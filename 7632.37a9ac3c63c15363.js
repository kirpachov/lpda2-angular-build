"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[7632],{7632:(M,T,t)=>{t.r(T),t.d(T,{ListComponent:()=>Z});var r=t(1368),_=t(4496),S=t(1560),s=t(4476),i=t(1236),E=t(8256),N=t(6820),d=t(1128),L=t(5892),g=t(3480),O=t(1512),A=t(8212),u=t(3616),X=t(6684),f=t(8824),x=t(2516),U=t(8248);const w=(o,l)=>l.id;function W(o,l){if(1&o&&(_.I0R(0,"span",13),_.aS0(1,21),_.C$Y(),_.I0R(2,"span",13),_.OEk(3),_.wVc(4,"date"),_.C$Y()),2&o){const e=_.GaO().$implicit;_.yG2(3),_.cNF(_.g7$(4,1,e.to_timestamp,"shortDate"))}}function z(o,l){1&o&&(_.SAx(0),_.aS0(1,22),_.k70())}function B(o,l){1&o&&(_.I0R(0,"span"),_.aS0(1,24),_.C$Y())}function K(o,l){if(1&o&&(_.I0R(0,"span",13),_.aS0(1,25),_.C$Y(),_.I0R(2,"span",13),_.OEk(3),_.C$Y(),_.I0R(4,"span",13),_.aS0(5,26),_.C$Y(),_.I0R(6,"span",13),_.OEk(7),_.C$Y()),2&o){const e=_.GaO(2).$implicit;_.yG2(3),_.cNF(e.weekly_from),_.yG2(4),_.cNF(e.weekly_to)}}function F(o,l){if(1&o&&(_.I0R(0,"span",13),_.aS0(1,23),_.C$Y(),_.I0R(2,"span",13),_.OEk(3),_.wVc(4,"weekday"),_.C$Y(),_.yuY(5,B,2,0,"span")(6,K,8,2)),2&o){const e=_.GaO().$implicit;_.yG2(3),_.cNF(_.kDX(4,2,e.weekday)),_.yG2(2),_.C0Y(5,e.isWholeDay?5:6)}}function b(o,l){if(1&o&&(_.I0R(0,"span",13),_.aS0(1,27),_.C$Y(),_.I0R(2,"span",13),_.OEk(3),_.wVc(4,"date"),_.C$Y(),_.I0R(5,"span",13),_.aS0(6,28),_.C$Y(),_.I0R(7,"span",13),_.OEk(8),_.wVc(9,"date"),_.C$Y(),_.I0R(10,"span",13),_.aS0(11,29),_.C$Y(),_.I0R(12,"span",13),_.OEk(13),_.wVc(14,"date"),_.C$Y(),_.I0R(15,"span",13),_.aS0(16,30),_.C$Y(),_.I0R(17,"span",13),_.OEk(18),_.wVc(19,"date"),_.C$Y()),2&o){const e=_.GaO().$implicit;_.yG2(3),_.cNF(_.g7$(4,4,e.from_timestamp,"HH:mm")),_.yG2(5),_.cNF(_.g7$(9,7,e.from_timestamp,"fullDate")),_.yG2(5),_.cNF(_.g7$(14,10,e.to_timestamp,"HH:mm")),_.yG2(5),_.cNF(_.g7$(19,13,e.to_timestamp,"fullDate"))}}function V(o,l){if(1&o){const e=_.KQA();_.I0R(0,"div",10),_.wR5(1,"app-show-translations",11),_.I0R(2,"div",12)(3,"div")(4,"span",13),_.aS0(5,14),_.C$Y(),_.I0R(6,"span",13),_.OEk(7),_.wVc(8,"date"),_.C$Y(),_.yuY(9,W,5,4)(10,z,2,0),_.C$Y(),_.I0R(11,"div"),_.yuY(12,F,7,4)(13,b,20,16),_.C$Y()(),_.I0R(14,"div",15)(15,"div")(16,"button",16),_.qCj("click",function(){const c=_.usT(e).$implicit,C=_.GaO(2);return _.CGJ(C.delete(c.id))}),_.I0R(17,"span",17)(18,"span",13),_.aS0(19,18),_.C$Y(),_.I0R(20,"mat-icon"),_.OEk(21,"delete"),_.C$Y()()()(),_.I0R(22,"div")(23,"a",19)(24,"span",17)(25,"span",13),_.aS0(26,20),_.C$Y(),_.I0R(27,"mat-icon"),_.OEk(28,"edit"),_.C$Y()()()()()()}if(2&o){const e=l.$implicit;_.yG2(),_.E7m("translations",e.translations.message),_.yG2(6),_.cNF(_.g7$(8,5,e.from_timestamp,"shortDate")),_.yG2(2),_.C0Y(9,e.to_timestamp?9:10),_.yG2(3),_.C0Y(12,e.isWeekly?12:13),_.yG2(11),_._6D("routerLink",e.id)}}const j=()=>[10,20,50,100];function Q(o,l){if(1&o){const e=_.KQA();_.c53(0,V,29,8,"div",31,w),_.I0R(2,"tui-table-pagination",9),_.qCj("paginationChange",function(I){_.usT(e);const c=_.GaO();return _.CGJ(c.paginationChange(I))}),_.C$Y()}if(2&o){const e=_.GaO();let n;_.oho(e.items()),_.yG2(2),_.E7m("items",_.q4q(2,j))("total",null!==(n=null==(n=e.data())||null==n.metadata?null:n.metadata.total_count)&&void 0!==n?n:0)}}function J(o,l){1&o&&(_.I0R(0,"p"),_.SAx(1),_.aS0(2,32),_.k70(),_.C$Y())}let Z=(()=>{class o{constructor(){this.loading=(0,_.OCB)(!1),this.data=(0,_.OCB)(null),this.items=(0,_.S6b)(()=>this.data()?.items||[]),this.route=(0,_.uUt)(i.gV),this.router=(0,_.uUt)(i.E5),this.service=(0,_.uUt)(N.I),this.notifications=(0,_.uUt)(d.E),this.destroy$=(0,_.uUt)(g.UF),this._=(0,_.uUt)(s.OY).setTitle("Chiusure o Ferie | La Porta D'Acqua"),this.inputSize="m",this.filters={}}ngOnInit(){this.search(),this.router.events.pipe((0,u.a)(this.destroy$),(0,X.I)(e=>e instanceof i.MT)).subscribe({next:()=>this.search()})}paginationChange(e){this.filters.page=e.page,this.filters.per_page=e.size,this.search()}delete(e){e&&this.notifications.confirm("Sei sicuro di voler cancellare questa chiusura?").subscribe({next:n=>{n&&this.confirmedDelete(e)}})}filtersChanged(e){this.filters=e,this.search(e)}confirmedDelete(e){this.loading.set(!0),this.service.destroy(e).pipe((0,u.a)(this.destroy$),(0,f.U)(()=>{this.loading.set(!1),this.search()})).subscribe({error:n=>{this.notifications.error((0,E.mk)(n)||"Qualcosa \xE8 andato storto nella cancellazione.")}})}search(e=this.filters){e||={},e={...e},this.loading.set(!0),this.service.search(e).pipe((0,u.a)(this.destroy$),(0,f.U)(()=>this.loading.set(!1))).subscribe({next:n=>{this.data.set(n)},error:n=>{this.notifications.error((0,E.mk)(n)||"Qualcosa \xE8 andato storto nella ricerca."),console.error(n)}})}static#_=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=_.In1({type:o,selectors:[["app-list"]],standalone:!0,features:[_.M5G([g.UF]),_.UHJ],decls:16,vars:1,consts:()=>{let e,n,I,c,C,P,$,m,p,D,R,h,y,G,Y,v,k,H;return e="Chiusure",n=" Nota che per evitare confusione dovuta al fuso orario, tutti gli orari in questa pagina sono espressi in UTC. Dovrai quindi sommare 1 ora per ottenere l'orario italiano.\n",I=" Di seguito l'elenco delle chiusure.\n",c="Crea nuovo",C="Dal",P="Elimina",$="Modifica",m="al",p="In poi",D="Chiusi ogni",R="Tutto il giorno",h="Dalle ore",y="Alle ore",G="Chiusi dalle ore",Y="del giorno",v="fino alle ore",k="del giorno",H="Nessun elemento trovato.",[e,[1,"text-warning"],n,[1,"text-slate-400"],I,["tuiButton","","appearance","flat","routerLink","new",1,"mb-3","me-3"],[1,"flex","items-center"],c,["class","my-2",3,"items","total"],[1,"my-2",3,"items","total","paginationChange"],[1,"border","rounded-lg","flex","flex-col","mb-5"],[3,"translations"],[1,"flex","flex-row","justify-between","p-4"],[1,"me-1"],C,[1,"flex","items-center","justify-end"],["type","button","size","m","tuiButton","","appearance","secondary-destructive",3,"click"],[1,"flex","items-center","justify-between","p-4"],P,["tuiLink","",3,"routerLink"],$,m,p,D,R,h,y,G,Y,v,k,["class","border rounded-lg flex flex-col mb-5"],H]},template:function(n,I){1&n&&(_.I0R(0,"h1"),_.SAx(1),_.aS0(2,0),_.k70(),_.C$Y(),_.I0R(3,"p",1),_.aS0(4,2),_.C$Y(),_.I0R(5,"p",3),_.aS0(6,4),_.C$Y(),_.I0R(7,"a",5)(8,"span",6)(9,"mat-icon"),_.OEk(10,"add"),_.C$Y(),_.I0R(11,"span"),_.aS0(12,7),_.C$Y()()(),_.yuY(13,Q,3,3,"tui-table-pagination",8)(14,J,3,0),_.wR5(15,"router-outlet")),2&n&&(_.yG2(13),_.C0Y(13,I.items().length>0?13:14))},dependencies:[S.oB,S.qL,i.qQ,i.cP,i.ER,r.y,L.yy,L.Ws,O.w,O.C,A.CI,A.Kw,x.G,U.G],encapsulation:2,changeDetection:0})}return o})()},2720:(M,T,t)=>{t.d(T,{k:()=>_});var r=t(8400);class _ extends r.w{static wholeDay(s){return"00:00"===s.weekly_from&&"23:59"===s.weekly_to}constructor(s){super(s),this.isWeekly=!1,this.isWholeDay=!1,this.from_timestamp=s.from_timestamp?new Date(s.from_timestamp):void 0,this.to_timestamp=s.to_timestamp?new Date(s.to_timestamp):void 0,this.weekly_from=s.weekly_from,this.weekly_to=s.weekly_to,this.weekday=s.weekday,this.message=s.message,this.translations={...s.translations??{}},this.isWeekly=this.calcIsWeekly(),this.isWholeDay=this.calcIsWholeday()}calcIsWeekly(){return"string"==typeof this.weekly_from&&this.weekly_from.length>0||"string"==typeof this.weekly_to&&this.weekly_to.length>0}calcIsWholeday(){return _.wholeDay({weekly_from:this.weekly_from,weekly_to:this.weekly_to})}}},2516:(M,T,t)=>{t.d(T,{G:()=>_});var r=t(4496);let _=(()=>{class S{constructor(){this.weekdays=["Domenica","Luned\xEC","Marted\xEC","Mercoled\xEC","Gioved\xEC","Venerd\xEC","Sabato"]}transform(i){return"number"!=typeof i&&"string"==typeof i&&(i=parseInt(i)),"number"==typeof i&&i>=0&&i<=6?this.weekdays[i]:null}static#_=this.\u0275fac=function(E){return new(E||S)};static#e=this.\u0275pipe=r.UTH({name:"weekday",type:S,pure:!0,standalone:!0})}return S})()},6820:(M,T,t)=>{t.d(T,{I:()=>s});var r=t(6012),_=t(2720),S=t(4496);let s=(()=>{class i extends r.s{constructor(){super(_.k,"admin/holidays")}static#_=this.\u0275fac=function(d){return new(d||i)};static#e=this.\u0275prov=S.wxM({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()}}]);