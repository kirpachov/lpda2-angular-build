"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[7840],{580:(K,P,s)=>{s.d(P,{m:()=>At});var i=s(7048),t=s(4496),O=s(6504),y=s(1040),L=s(4392),I=s(3480),E=s(6096),h=s(3616),M=s(3412),f=s(8824),x=s(9212),w=s(4704),b=s(9144),$=s(3252),B=s(1343),u=s(1368),C=s(3797),m=s(6052),D=s(9604),T=s(8048),z=s(7936),A=s(4336),G=s(7692),k=s(6732),N=s(1560);function W(n,c){1&n&&(t.SAx(0),t.aS0(1,10),t.k70())}function F(n,c){if(1&n&&(t.SAx(0),t.OEk(1),t.k70()),2&n){const e=c.polymorpheusOutlet;t.yG2(),t.oRS(" ",e," ")}}function V(n,c){if(1&n&&t.yuY(0,F,2,1,"ng-container",11),2&n){const e=t.GaO(2);t.E7m("polymorpheusOutlet",e.optionTemplate$())}}function j(n,c){1&n&&t.C_f(0)}const Y=(n,c)=>({$implicit:n,injector:c});function J(n,c){if(1&n&&t.yuY(0,j,1,0,"ng-container",12),2&n){const e=t.GaO().$implicit,o=t.GaO();t.E7m("polymorpheusOutlet",o.optionTemplate$())("polymorpheusOutletContext",t.IBC(2,Y,e,o.injector))}}function H(n,c){1&n&&t.C_f(0)}const l=n=>({data:n});function d(n,c){if(1&n&&t.yuY(0,H,1,0,"ng-container",12),2&n){const e=t.GaO().$implicit,o=t.GaO();t.E7m("polymorpheusOutlet",o.optionTemplate$())("polymorpheusOutletContext",t.S45(2,l,e))}}function a(n,c){if(1&n&&t.wR5(0,"div",13),2&n){const e=t.GaO().$implicit,o=t.GaO();t.E7m("innerText",o.stringify(e))}}function r(n,c){if(1&n&&t.yuY(0,V,1,1)(1,J,1,5)(2,d,1,4)(3,a,1,1),2&n){const e=t.GaO();let o;t.C0Y(0,"text"===(o=e.optionTemplateType$())?0:"template"===o?1:"component"===o?2:3)}}function p(n,c){if(1&n&&(t.SAx(0),t.OEk(1),t.k70()),2&n){const e=c.polymorpheusOutlet;t.yG2(),t.oRS(" ",e," ")}}function g(n,c){if(1&n&&t.yuY(0,p,2,1,"ng-container",11),2&n){const e=t.GaO(2);t.E7m("polymorpheusOutlet",e.nativeOptionTemplate$())}}function R(n,c){1&n&&t.C_f(0)}function Q(n,c){if(1&n&&t.yuY(0,R,1,0,"ng-container",12),2&n){const e=t.GaO().$implicit,o=t.GaO();t.E7m("polymorpheusOutlet",o.nativeOptionTemplate$())("polymorpheusOutletContext",t.IBC(2,Y,e,o.injector))}}function Z(n,c){1&n&&t.C_f(0)}function q(n,c){if(1&n&&t.yuY(0,Z,1,0,"ng-container",12),2&n){const e=t.GaO().$implicit,o=t.GaO();t.E7m("polymorpheusOutlet",o.nativeOptionTemplate$())("polymorpheusOutletContext",t.S45(2,l,e))}}function tt(n,c){if(1&n&&t.wR5(0,"div",13),2&n){const e=t.GaO().$implicit,o=t.GaO();t.E7m("innerText",o.stringify(e))}}function et(n,c){if(1&n&&t.yuY(0,g,1,1)(1,Q,1,5)(2,q,1,4)(3,tt,1,1),2&n){const e=t.GaO();let o;t.C0Y(0,"text"===(o=e.nativeOptionTemplateType$())?0:"template"===o?1:"component"===o?2:3)}}function nt(n,c){if(1&n&&(t.SAx(0),t.OEk(1),t.k70()),2&n){const e=t.GaO(2);t.yG2(),t.oRS(" ",e.placeholder," ")}}function it(n,c){if(1&n&&(t.I0R(0,"span",null,14),t._Xx(2),t.C$Y(),t.yuY(3,nt,2,1,"ng-container",15)),2&n){const e=t.Gew(1);t.yG2(3),t.E7m("ngIf",!e.hasChildNodes())}}function ot(n,c){1&n&&(t.SAx(0),t.aS0(1,19),t.k70())}function at(n,c){if(1&n&&(t.I0R(0,"span"),t.OEk(1),t.C$Y()),2&n){const e=t.GaO(2);t.yG2(),t.cNF(e.emptyContentString())}}function st(n,c){1&n&&t.C_f(0)}function rt(n,c){if(1&n&&(t.SAx(0),t.yuY(1,st,1,0,"ng-container",8),t.k70()),2&n){const e=t.GaO(4);t.yG2(),t.E7m("ngTemplateOutlet",e.emptyContentTemplate())}}function _t(n,c){if(1&n&&(t.SAx(0),t.yuY(1,rt,2,1,"ng-container",20),t.k70()),2&n){t.GaO(2);const e=t.Gew(6),o=t.GaO();t.yG2(),t.E7m("ngIf",o.emptyContentTemplate())("ngIfElse",e)}}function ct(n,c){if(1&n&&(t.SAx(0),t.yuY(1,_t,2,2,"ng-container",20),t.k70()),2&n){t.GaO();const e=t.Gew(4),o=t.GaO();t.yG2(),t.E7m("ngIf",o.emptyContent$())("ngIfElse",e)}}function lt(n,c){if(1&n&&(t.I0R(0,"span",null,16),t._Xx(2,1),t.C$Y(),t.yuY(3,ot,2,0,"ng-template",null,17,t.gJz)(5,at,2,1,"ng-template",null,18,t.gJz)(7,ct,2,2,"ng-container",15)),2&n){const e=t.Gew(1);t.yG2(7),t.E7m("ngIf",!e.hasChildNodes())}}function ut(n,c){1&n&&t.wR5(0,"tui-loader")}function mt(n,c){1&n&&t.C_f(0)}function pt(n,c){if(1&n&&t.yuY(0,mt,1,0,"ng-container",8),2&n){t.GaO(2);const e=t.Gew(9);t.E7m("ngTemplateOutlet",e)}}function dt(n,c){1&n&&t.C_f(0)}function gt(n,c){if(1&n&&(t.SAx(0),t.yuY(1,dt,1,0,"ng-container",8),t.k70()),2&n){t.GaO(2);const e=t.Gew(11);t.yG2(),t.E7m("ngTemplateOutlet",e)}}function ht(n,c){if(1&n&&t.yuY(0,pt,1,1,"ng-template",null,21,t.gJz)(2,gt,2,1,"ng-container",20),2&n){const e=t.Gew(1),o=t.GaO();t.yG2(2),t.E7m("ngIf",o.loading())("ngIfElse",e)}}function Ct(n,c){1&n&&t.C_f(0)}function ft(n,c){1&n&&t.C_f(0)}function vt(n,c){1&n&&t.C_f(0)}function Ot(n,c){if(1&n&&(t.SAx(0),t.yuY(1,vt,1,0,"ng-container",8),t.k70()),2&n){t.GaO(4);const e=t.Gew(11);t.yG2(),t.E7m("ngTemplateOutlet",e)}}function Tt(n,c){1&n&&t.C_f(0)}function yt(n,c){if(1&n){const e=t.KQA();t.I0R(0,"button",28)(1,"span",29),t.qCj("click",function(){t.usT(e);const _=t.GaO(4);return t.CGJ(_.loadMoreItems())}),t.yuY(2,Tt,1,0,"ng-container",20),t.C$Y()()}if(2&n){const e=t.GaO(4),o=t.Gew(1);t.E7m("size",e.optionSize)("disabled",!0),t.yG2(2),t.E7m("ngIf",e.loadMore)("ngIfElse",o)}}function Et(n,c){if(1&n&&(t.SAx(0),t.yuY(1,Ot,2,1,"ng-container",15)(2,yt,3,4,"button",27),t.k70()),2&n){const e=t.GaO(3);t.yG2(),t.E7m("ngIf",e.loading),t.yG2(),t.E7m("ngIf",!e.loading)}}const Mt=n=>({$implicit:n});function xt(n,c){if(1&n){const e=t.KQA();t.SAx(0),t.I0R(1,"button",25),t.qCj("mouseenter",function(){const _=t.usT(e),v=_.index,S=_.last,U=t.GaO(2);return t.CGJ(U.optionMouseEnter(v,S))})("focus",function(){const _=t.usT(e),v=_.index,S=_.last,U=t.GaO(2);return t.CGJ(U.optionFocus(v,S))}),t.yuY(2,ft,1,0,"ng-container",26),t.C$Y(),t.yuY(3,Et,3,2,"ng-container",15),t.k70()}if(2&n){const e=c.$implicit,o=c.last,_=t.GaO(2),v=t.Gew(5);t.yG2(),t.E7m("size",_.optionSize)("value",e)("disabled",_.disabledItemHandler(e)),t.yG2(),t.E7m("ngTemplateOutlet",v)("ngTemplateOutletContext",t.S45(6,Mt,e)),t.yG2(),t.E7m("ngIf",o&&_.thereAreMoreItems)}}function Dt(n,c){if(1&n){const e=t.KQA();t.I0R(0,"span",33),t.qCj("click",function(){t.usT(e);const _=t.GaO(3);return t.CGJ(_.createNew.emit())}),t.I0R(1,"mat-icon"),t.OEk(2,"add"),t.C$Y(),t.I0R(3,"span"),t.aS0(4,34),t.C$Y()()}}function St(n,c){if(1&n&&(t.I0R(0,"button",30)(1,"span",null,31),t._Xx(3,2),t.C$Y(),t.yuY(4,Dt,5,0,"span",32),t.C$Y()),2&n){const e=t.Gew(2),o=t.GaO(2);t.E7m("size",o.optionSize)("value",null)("disabled",!0),t.yG2(4),t.E7m("ngIf",!e.hasChildNodes())}}function Pt(n,c){if(1&n&&(t.I0R(0,"tui-data-list",22),t.yuY(1,xt,4,8,"ng-container",23)(2,St,5,4,"button",24),t.C$Y()),2&n){const e=t.GaO(),o=t.Gew(13);t.E7m("emptyContent",o),t.yG2(),t.E7m("ngForOf",e.items()),t.yG2(),t.E7m("ngIf",e.showCreateNew)}}const It=["*",[["","empty-content",""]],[["","create-new",""]]],bt=["*","[empty-content]","[create-new]"];let At=(()=>{class n{set optionTemplate(e){this.optionTemplate$.set(e)}set emptyContent(e){this.emptyContent$.set(e)}get emptyContent(){return this.emptyContent$()}set nativeOptionTemplate(e){this.nativeOptionTemplate$.set(e)}get thereAreMoreItems(){return null!=this.nextPageToLoad}constructor(){this.httpError=new t._w7,this.queryChange=new t._w7,this.pageChange=new t._w7,this.per_pageChange=new t._w7,this.createNew=new t._w7,this.outputType="object",this.showCleaner=!1,this.filters=null,this.multiple=!1,this.service=null,this.stringify=_=>`${_?_.toString():""}`,this.query=null,this.autofocus=!1,this.optionTemplate$=(0,t.OCB)(null),this.optionTemplateType$=(0,t.S6b)(()=>this.polymorpheusType(this.optionTemplate$())),this.inputSize="m",this.page=1,this.per_page=30,this.optionSize=this.inputSize,this.disabledItemHandler=L.so,this.loadMoreOnLastItem=!1,this.emptyContent$=(0,t.OCB)(null),this.nativeOptionTemplate$=(0,t.OCB)(null),this.nativeOptionTemplateType$=(0,t.S6b)(()=>this.polymorpheusType(this.nativeOptionTemplate$())),this.emptyContentTemplate=(0,t.S6b)(()=>{const _=this.emptyContent$();return null==_||"string"==typeof _?null:_}),this.emptyContentString=(0,t.S6b)(()=>{const _=this.emptyContent$();return null==_||"string"!=typeof _?null:_}),this.loading=(0,t.S6b)(()=>this.searching()||this.finding()),this.searching=(0,t.OCB)(!1),this.finding=(0,t.OCB)(!1),this.nextPageToLoad=this.page+1,this.defaultPage=1,this.defaultPerPage=30,this.destroy$=(0,t.uUt)(I.UF),this.injector=(0,t.uUt)(t.zZn),this.control=new O.yM(null),this.onSearchChange=_=>this.queryChange.next(_),this.items=(0,t.OCB)([]),this.searchSub=null,this.findSub=null;const e=()=>this.search().subscribe(),o=()=>{this.page=this.defaultPage,this.per_page=this.defaultPerPage};this.control.valueChanges.subscribe(()=>o()),this.queryChange.pipe((0,h.a)(this.destroy$)).subscribe(_=>{this.query=_,o(),this.items.set([]),e()}),(0,M.U)(this.pageChange,this.per_pageChange).pipe((0,h.a)(this.destroy$)).subscribe(()=>e())}ngOnInit(){}ngAfterViewInit(){this.queryChange.next(this.query=""),this.autofocus&&setTimeout(()=>this.focus(),100)}ngOnDestroy(){}ngOnChanges(e){e.filters&&this.search().subscribe((0,B.I)())}focus(e=!0){this.comboBox&&(this.comboBox.nativeFocusableElement?.focus(),e&&this.openDropdown())}openDropdown(){this.comboBox&&(this.comboBox.open||this.toggleDropdown())}closeDropdown(){this.comboBox&&this.comboBox.open&&this.toggleDropdown()}toggleDropdown(){this.comboBox&&this.comboBox.toggle()}optionMouseEnter(e,o=null){!0===o&&this.loadMoreOnLastItem&&this.loadMoreItems()}optionFocus(e,o=null){!0===o&&this.loadMoreOnLastItem&&this.loadMoreItems()}updatePage(e){this.page=e,this.pageChange.next(e)}updatePerPage(e){this.per_page=e,this.per_pageChange.next(e)}loadMoreItems(){this.loading()||this.thereAreMoreItems&&this.updatePage(this.nextPageToLoad)}writeValue(e){if(("number"==typeof e||"string"==typeof e)&&Number(e)==e)return this.setValById(e);this.control.setValue(e)}registerOnChange(e){this.control.valueChanges.subscribe(()=>e(this.formatOutput()))}registerOnTouched(e){this.control.valueChanges.subscribe(()=>e())}setDisabledState(e){e?this.control.disable():this.control.enable()}setValById(e){if(!this.service)return;this.finding.set(!0);const o=this.service.show(e).pipe((0,h.a)(this.destroy$),(0,f.U)(()=>this.finding.set(!1))).subscribe({next:_=>{this.writeValue(_),o.unsubscribe()}})}formatOutput(e=this.control.value){return null!=e&&null!=e?"id"===this.outputType?e?.id:e:null}searchParams(){const e={...this.filters??{},query:this.query,page:this.page,per_page:this.per_page};return e.query&&e.query.length>0||delete e.query,e}search(){if(!this.service)throw new Error("service is not defined");this.searchSub?.unsubscribe(),this.searching.set(!0);const e=this.searchParams();return this.service.search(e).pipe((0,x.y)(o=>{this.newItemsLoaded(e,o)}),(0,w.k)(o=>o.items),(0,b.a)(o=>(console.error(o),o instanceof i.gj&&this.httpError.emit(o),[])),(0,f.U)(()=>{this.searching.set(!1),this.searchSub?.unsubscribe(),this.searchSub=null}))}find(e){return this.findSub?.unsubscribe(),new $._(o=>{if(!this.service)throw new Error("service is not defined");if(!this.service.show)throw new Error("service.show is not defined");this.finding.set(!0),this.findSub=this.service.show(e).pipe((0,h.a)(this.destroy$),(0,f.U)(()=>this.finding.set(!1))).subscribe(_=>{o.next(_),o.complete()},_=>{this.httpError.emit(_),o.next(null),o.complete()})})}newItemsLoaded(e,o){this.nextPageToLoad=o.next_page;const _=o.items;if(1==e.page||0==this.items().length)return void this.items.set(_);if(0==_.length)return;const v=e.per_page*(e.page-1||1);_.forEach((S,U)=>{this.items.update(X=>(X[U+v]=S,X))})}polymorpheusType(e){return"string"==typeof e?"text":e instanceof t.Yw2?"template":"object"==typeof e&&e instanceof y.WO?"component":null}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-common-dynamic-select"]],viewQuery:function(o,_){if(1&o&&t.CC$(E.i_,5),2&o){let v;t.wto(v=t.Gqi())&&(_.comboBox=v.first)}},inputs:{outputType:"outputType",multiple:"multiple",service:"service",stringify:"stringify",query:"query",autofocus:"autofocus",placeholder:"placeholder",optionTemplate:"optionTemplate",stringifyOption:"stringifyOption",inputSize:"inputSize",page:"page",per_page:"per_page",optionSize:"optionSize",disabledItemHandler:"disabledItemHandler",loadMoreOnLastItem:"loadMoreOnLastItem",emptyContent:"emptyContent",showCreateNew:"showCreateNew",nativeOptionTemplate:"nativeOptionTemplate",filters:"filters",showCleaner:"showCleaner"},outputs:{httpError:"httpError",pageChange:"pageChange",queryChange:"queryChange",per_pageChange:"per_pageChange",createNew:"createNew"},standalone:!0,features:[t.M5G([{provide:O.Y6,useExisting:(0,t.wd)(()=>n),multi:!0},I.UF]),t.SYr,t.UHJ],ngContentSelectors:bt,decls:17,vars:6,consts:()=>{let e,o,_;return e="Carica altri",o="Non abbiamo trovato nulla.",_="Crea nuovo",[["loadMoreDefault",""],["valueContent",""],["nativeOptionTemplate",""],["placeholderTemplate",""],["nativeEmptyContentTemplate",""],["loadingTemplate",""],["loadingOrEmptyContent",""],[3,"tuiTextfieldCleaner","stringify","tuiTextfieldSize","formControl","valueContent","searchChange"],[4,"ngTemplateOutlet"],[3,"emptyContent",4,"tuiDataList"],e,[4,"polymorpheusOutlet"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],[3,"innerText"],["customContent",""],[4,"ngIf"],["customEmptyContent",""],["defaultEmptyContent",""],["emptyContentCustomString",""],o,[4,"ngIf","ngIfElse"],["empty",""],[3,"emptyContent"],[4,"ngFor","ngForOf"],["tuiOption","",3,"size","value","disabled",4,"ngIf"],["tuiOption","",3,"size","value","disabled","mouseenter","focus"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tuiOption","",3,"size","disabled",4,"ngIf"],["tuiOption","",3,"size","disabled"],["role","button",3,"click"],["tuiOption","",3,"size","value","disabled"],["createNewCustomTemplate",""],["role","button","class","d-flex align-items-center",3,"click",4,"ngIf"],["role","button",1,"d-flex","align-items-center",3,"click"],_]},template:function(o,_){if(1&o&&(t.kPM(It),t.yuY(0,W,2,0,"ng-template",null,0,t.gJz)(2,r,4,1,"ng-template",null,1,t.gJz)(4,et,4,1,"ng-template",null,2,t.gJz)(6,it,4,1,"ng-template",null,3,t.gJz)(8,lt,8,1,"ng-template",null,4,t.gJz)(10,ut,1,0,"ng-template",null,5,t.gJz)(12,ht,3,2,"ng-template",null,6,t.gJz),t.I0R(14,"tui-combo-box",7),t.qCj("searchChange",function(S){return _.onSearchChange(S)}),t.yuY(15,Ct,1,0,"ng-container",8)(16,Pt,3,3,"tui-data-list",9),t.C$Y()),2&o){const v=t.Gew(3),S=t.Gew(7);t.yG2(14),t.E7m("tuiTextfieldCleaner",_.showCleaner)("stringify",_.stringify)("tuiTextfieldSize",_.inputSize)("formControl",_.control)("valueContent",v),t.yG2(),t.E7m("ngTemplateOutlet",S)}},dependencies:[u.MD,u.ay,u.u_,u.XV,E.uk,E.i_,E.qI,T.aS,T.es,T.rD,z.KA,C.CQ,A.A$,A.yi,A.sP,A.Ux,m.q8,O.sl,O.ue,O.ug,k.kR,D.CA,G.Sk,G.Cb,y.Ux,y.Af,N.oB,N.qL],changeDetection:0})}return n})()},6988:(K,P,s)=>{s.d(P,{E:()=>I,Q:()=>E});var i=s(4496),t=s(3480),O=s(3840),y=s(3120),L=s(3616);let I=(()=>{class h{constructor(f,x){this.el=f,this.destroy$=x}set tuiScrollIntoView(f){f&&(0,y.k)(0).pipe((0,L.a)(this.destroy$)).subscribe(()=>{this.el.nativeElement.dispatchEvent(new CustomEvent(O.dG,{bubbles:!0,detail:this.el.nativeElement}))})}}return h.\u0275fac=function(f){return new(f||h)(i.GI1(i.GMv),i.GI1(t.UF,2))},h.\u0275dir=i.Sc5({type:h,selectors:[["","tuiScrollIntoView",""]],inputs:{tuiScrollIntoView:"tuiScrollIntoView"},features:[i.M5G([t.UF])]}),h})(),E=(()=>{class h{}return h.\u0275fac=function(f){return new(f||h)},h.\u0275mod=i.a4G({type:h}),h.\u0275inj=i.s3X({}),h})()},9604:(K,P,s)=>{s.d(P,{CA:()=>B});var i=s(4496),t=s(2528),O=s(3656),y=s(1368);let E=(()=>{class u{}return u.\u0275fac=function(m){return new(m||u)},u.\u0275mod=i.a4G({type:u}),u.\u0275inj=i.s3X({}),u})();(0,t.AL)({size:"m",autoColor:!1,rounded:!1});let B=(()=>{class u{}return u.\u0275fac=function(m){return new(m||u)},u.\u0275mod=i.a4G({type:u}),u.\u0275inj=i.s3X({imports:[[y.MD,E,O.Yt]]}),u})()},6096:(K,P,s)=>{s.d(P,{i_:()=>j,qI:()=>Y,uk:()=>H});var i=s(4496),t=s(6504),O=s(3044),y=s(1800),L=s(4392),I=s(4164),E=s(2528),h=s(4680),M=s(466),f=s(7936),x=s(8048),w=s(4108),b=s(5944),$=s(4336),B=s(9371),u=s(7176),C=s(5384),m=s(796),D=s(3012),T=s(1368),z=s(1040);function A(l,d){if(1&l&&(i.SAx(0),i.OEk(1),i.k70()),2&l){const a=d.polymorpheusOutlet;i.yG2(),i.oRS(" ",a," ")}}const G=(l,d)=>({$implicit:l,active:d});function k(l,d){if(1&l&&(i.I0R(0,"div",4),i.yuY(1,A,2,1,"ng-container",5),i.C$Y()),2&l){const a=i.GaO();i.yG2(),i.E7m("polymorpheusOutlet",a.computedContent)("polymorpheusOutletContext",i.IBC(2,G,a.value,a.computedFocused))}}function N(l,d){1&l&&i.C_f(0)}function W(l,d){if(1&l&&(i.I0R(0,"div",6),i.yuY(1,N,1,0,"ng-container",7),i.C$Y()),2&l){const a=i.GaO();i.yG2(),i.E7m("polymorpheusOutlet",a.arrow)}}const F=["*",[["input"]]],V=["*","input"];let j=(()=>{class l extends y.GG{constructor(a,r,p,g,R){super(a,r),this.arrowMode=p,this.itemsHandlers=g,this.textfieldSize=R,this.stringify=this.itemsHandlers.stringify,this.strictMatcher=L.yG,this.identityMatcher=this.itemsHandlers.identityMatcher,this.strict=!0,this.search=null,this.searchChange=new i._w7,this.open=!1}get size(){return this.textfieldSize.size}get arrow(){return this.interactive?this.arrowMode.interactive:this.arrowMode.disabled}get nativeFocusableElement(){var a,r;return null!==(r=null===(a=this.textfield)||void 0===a?void 0:a.nativeFocusableElement)&&void 0!==r?r:null}get focused(){var a;return(0,I.ER)(this.nativeFocusableElement)||!(null===(a=this.hostedDropdown)||void 0===a||!a.focused)}get nativeValue(){return null===this.value?this.search||"":this.stringify(this.value)}get showValueTemplate(){return(0,E.kF)(this.value)&&!this.focused}get computedContent(){return this.valueContent||this.nativeValue}onActiveZone(a){this.updateFocused(a)}checkOption(a){this.isStrictMatch(a)&&(this.value=a,this.updateSearch(null))}handleOption(a){this.focusInput(),this.close(),this.updateSearch(null),this.value=a,this.value&&this.setNativeValue(this.stringify(a))}onFieldKeyDownEnter(a){var r;this.open&&a.preventDefault();const p=(null===(r=this.accessor)||void 0===r?void 0:r.getOptions())||[];1===p.length&&(this.value=p[0],this.updateSearch(null),this.close())}onValueChange(a){var r,p;this.updateSearch(a);const g=null===(r=this.accessor)||void 0===r?void 0:r.getOptions().find(R=>this.isStrictMatch(R));if(void 0!==g)return this.value=g,void this.updateSearch(null);(this.strict||""===this.search)&&(this.value=null),""!==this.search&&(null===(p=this.hostedDropdown)||void 0===p||p.updateOpen(!0))}updateValue(a){super.updateValue(a)}toggle(){var a;null===(a=this.hostedDropdown)||void 0===a||a.updateOpen(!this.open)}isStrictMatch(a){var r;return!!this.search&&!(null===(r=this.strictMatcher)||void 0===r||!r.call(this,a,this.search,this.stringify))}close(){var a;null===(a=this.hostedDropdown)||void 0===a||a.updateOpen(!1)}updateSearch(a){this.search!==a&&(this.search=a,this.searchChange.emit(a))}setNativeValue(a){this.nativeFocusableElement&&(this.nativeFocusableElement.value=a)}focusInput(a=!1){this.nativeFocusableElement&&this.nativeFocusableElement.focus({preventScroll:a})}}return l.\u0275fac=function(a){return new(a||l)(i.GI1(t.eq,10),i.GI1(i.kD9),i.GI1(u.qE),i.GI1(D.qc),i.GI1(x.$K))},l.\u0275cmp=i.In1({type:l,selectors:[["tui-combo-box"]],contentQueries:function(a,r,p){if(1&a&&(i.szK(p,b.QP,5),i.szK(p,$.Ux,5,i.Yw2)),2&a){let g;i.wto(g=i.Gqi())&&(r.accessor=g.first),i.wto(g=i.Gqi())&&(r.datalist=g.first)}},viewQuery:function(a,r){if(1&a&&(i.CC$(M.Qw,5),i.CC$(f.y_,5)),2&a){let p;i.wto(p=i.Gqi())&&(r.hostedDropdown=p.first),i.wto(p=i.Gqi())&&(r.textfield=p.first)}},hostVars:1,hostBindings:function(a,r){2&a&&i.e48("data-size",r.size)},inputs:{stringify:"stringify",strictMatcher:"strictMatcher",identityMatcher:"identityMatcher",valueContent:"valueContent",strict:"strict",search:"search"},outputs:{searchChange:"searchChange"},features:[i.M5G([(0,h.NK)(l),(0,b.UH)(l),(0,y.q4)(l),(0,b.YB)(C.E$)],[m.YL]),i.eg9],ngContentSelectors:V,decls:7,vars:13,consts:[[1,"t-hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-combo-box__textfield",1,"t-textfield",3,"disabled","focusable","invalid","nativeId","pseudoFocus","pseudoHover","readOnly","tuiTextfieldIcon","value","click","keydown.enter","valueChange"],["automation-id","tui-combo-box__template","ngProjectAs","tuiContent","class","t-value",5,["tuiContent"],4,"ngIf"],["icon",""],["automation-id","tui-combo-box__template","ngProjectAs","tuiContent",5,["tuiContent"],1,"t-value"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],["appearance","icon","tuiWrapper","",1,"t-icon"],[4,"polymorpheusOutlet"]],template:function(a,r){if(1&a&&(i.kPM(F),i.I0R(0,"tui-hosted-dropdown",0),i.iHE("openChange",function(g){return i.kNx(r.open,g)||(r.open=g),g}),i.qCj("tuiActiveZoneChange",function(g){return r.onActiveZone(g)}),i.I0R(1,"tui-primitive-textfield",1),i.qCj("click",function(){return r.toggle()})("keydown.enter",function(g){return r.onFieldKeyDownEnter(g)})("valueChange",function(g){return r.onValueChange(g)}),i._Xx(2),i._Xx(3,1,["ngProjectAs","input",5,["input"]]),i.yuY(4,k,2,5,"div",2),i.C$Y(),i.yuY(5,W,2,1,"ng-template",null,3,i.gJz),i.C$Y()),2&a){const p=i.Gew(6);i.E7m("canOpen",r.interactive&&!!r.datalist)("content",r.datalist||""),i.OKB("open",r.open),i.yG2(),i.E7m("disabled",r.computedDisabled)("focusable",r.computedFocusable)("invalid",r.computedInvalid)("nativeId",r.nativeId)("pseudoFocus",r.computedFocused)("pseudoHover",r.pseudoHover)("readOnly",r.readOnly)("tuiTextfieldIcon",r.arrow?p:"")("value",r.nativeValue),i.yG2(3),i.E7m("ngIf",r.showValueTemplate)}},dependencies:[M.Qw,f.y_,O.M,f.KQ,x.uU,T.u_,z.Af,w.S],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-value[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center}.t-icon[_ngcontent-%COMP%]{pointer-events:auto}"],changeDetection:0}),l})(),Y=(()=>{class l extends B.Cm{get value(){return this.host.nativeValue}onValueChange(a){this.host.onValueChange(a)}}return l.\u0275fac=(()=>{let d;return function(r){return(d||(d=i.otF(l)))(r||l)}})(),l.\u0275dir=i.Sc5({type:l,selectors:[["tui-combo-box"]],features:[i.M5G([(0,b.iu)(l)]),i.eg9]}),l})(),H=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=i.a4G({type:l}),l.\u0275inj=i.s3X({imports:[[T.MD,z.Ux,O.L,f.KA,M.GE,C.YB,u.S2,w.g,x.aS]]}),l})()}}]);