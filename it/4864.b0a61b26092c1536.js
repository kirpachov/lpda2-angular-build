"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[4864],{4864:(y,M,e)=>{e.r(M),e.d(M,{ResetPasswordComponent:()=>W});var t=e(4496),n=e(1368),m=e(6504),v=e(9956),s=e(3480),o=e(5e3),r=e(8212),a=e(7692),l=e(8048),E=e(3797),f=e(7568),h=e(2992),p=e(3468),T=e(4872),I=e(9212),A=e(2300),S=e(3616),L=e(4964),c=e(1128),_=e(8256),i=e(8392),u=e(4476),d=e(7936);function D(P,U){if(1&P&&t.wR5(0,"app-errors",12),2&P){const g=t.GaO();t.E7m("errors",g.e("password"))}}function C(P,U){if(1&P&&t.wR5(0,"app-errors",12),2&P){const g=t.GaO();t.E7m("errors",g.e("code"))}}function $(P,U){if(1&P&&t.wR5(0,"app-errors",12),2&P){const g=t.GaO();t.E7m("errors",g.form.errors)}}let W=(()=>{class P{constructor(){this.auth=(0,t.uUt)(L.o),this.router=(0,t.uUt)(h.E5),this.configs=(0,t.uUt)(p.m),this.route=(0,t.uUt)(h.gV),this.notifications=(0,t.uUt)(c.E),this._=(0,t.uUt)(u.OY).setTitle("Imposta password | La Porta D'Acqua"),this.form=new m.WC({code:new m.Ku(null,[m.AQ.required]),password:new m.Ku(null,[m.AQ.required])}),this.destroy$=(0,t.uUt)(s.UF),this.loading=!1,this.typing=!1,this.type$=this.form.valueChanges.pipe((0,T.ay)(),(0,I.y)(()=>this.typing=!0),(0,A.o)(1e3),(0,I.y)(()=>this.typing=!1)).subscribe(),this.submitted=!1}se(g){if(this.typing||!this.submitted)return!1;const O=this.form.get(g);return!!O&&O.invalid&&(O.dirty||O.touched)}e(g){const O=this.form.get(g);return O?O.errors:null}ngOnInit(){this.setMinPasswordLength(),this.readCodeFromRoute()}submit(){this.submitted=!0,!this.form.invalid&&(this.loading=!0,this.auth.resetPassword(this.formValue()).pipe((0,S.a)(this.destroy$)).subscribe({next:()=>{this.loading=!1,this.router.navigate(["/auth"]),this.notifications.success("La password \xE8 stata reimpostata con successo. Ora puoi effettuare il login.")},error:g=>{this.loading=!1,this.notifications.error((0,_.mk)(g)||i.a),console.error("resetPassword",g),this.form.setErrors({...this.form.errors,server:g.error.message})}}))}formValue(){const g=this.form.value;return{code:g.code,password:g.password}}setMinPasswordLength(){this.configs.get("minPasswordLength").subscribe(g=>{g&&!isNaN(g)&&g>0&&this.form.get("password")?.setValidators([m.AQ.required,m.AQ.minLength(g)])})}readCodeFromRoute(){this.route.params.subscribe(g=>{g.code&&this.form.get("code")?.setValue(g.code)})}static#t=this.\u0275fac=function(O){return new(O||P)};static#e=this.\u0275cmp=t.In1({type:P,selectors:[["app-reset-password"]],standalone:!0,features:[t.M5G([s.UF]),t.UHJ],decls:25,vars:9,consts:()=>{let g,O;return g="Codice",O="Password",[[1,"flex","justify-center","h-full"],[1,"flex","flex-col","justify-center"],[1,"flex","flex-col",3,"formGroup","ngSubmit"],[1,"mb-1"],[1,"text-slate-400","mb-3"],[1,"mb-2","hidden"],["formControlName","code",3,"tuiAutoFocus","tuiTextfieldSize"],g,["tuiTextfield","","type","text"],[1,"mb-2"],["formControlName","password",3,"tuiAutoFocus","tuiTextfieldSize"],O,[3,"errors"],[1,"flex","justify-between"],["routerLink","/auth","tuiButton","","appearance","secondary","type","button",1,"me-2"],["tuiButton","","type","submit",1,"ms-2",3,"showLoader"]]},template:function(O,R){1&O&&(t.I0R(0,"div",0)(1,"div",1)(2,"form",2),t.qCj("ngSubmit",function(){return R.submit()}),t.I0R(3,"h2",3),t.OEk(4,"Reimposta la password."),t.C$Y(),t.I0R(5,"span",4),t.OEk(6,"Inserisci la nuova password."),t.C$Y(),t.I0R(7,"div",5)(8,"tui-input",6),t.SAx(9),t.aS0(10,7),t.k70(),t.wR5(11,"input",8),t.C$Y()(),t.I0R(12,"div",9)(13,"tui-input-password",10),t.SAx(14),t.aS0(15,11),t.k70(),t.wR5(16,"input",8),t.C$Y(),t.yuY(17,D,1,1,"app-errors",12),t.C$Y(),t.yuY(18,C,1,1,"app-errors",12)(19,$,1,1,"app-errors",12),t.I0R(20,"div",13)(21,"button",14),t.OEk(22,"Annulla"),t.C$Y(),t.I0R(23,"button",15),t.OEk(24,"Conferma"),t.C$Y()()()()()),2&O&&(t.yG2(2),t.E7m("formGroup",R.form),t.yG2(6),t.E7m("tuiAutoFocus",!0)("tuiTextfieldSize","l"),t.yG2(5),t.E7m("tuiAutoFocus",!0)("tuiTextfieldSize","l"),t.yG2(4),t.C0Y(17,R.se("password")?17:-1),t.yG2(),t.C0Y(18,R.se("code")?18:-1),t.yG2(),t.C0Y(19,R.submitted?19:-1),t.yG2(4),t.E7m("showLoader",R.loading))},dependencies:[n.MD,m.sl,m.sz,m.ue,m.u,m.uW,m.Wo,r.CI,r.Kw,E.CQ,E.Oo,E.cP,d.b,v.g,o.m6,o.gJ,a.Sk,f.eW,f.Mt,f.Ki,l.aS,l.rD,h.qQ,h.ER],styles:["[_nghost-%COMP%]{display:block;height:100%}"]})}return P})()},9956:(y,M,e)=>{e.d(M,{g:()=>L});var t=e(1368),n=e(4496),m=e(9938),v=e(2528),s=e(7308),o=e(7012),r=e(3972),a=e(5944),l=e(1040);function E(c,_){if(1&c&&(n.SAx(0),n.OEk(1),n.k70()),2&c){const i=_.polymorpheusOutlet;n.yG2(),n.oRS(" ",i," ")}}const f=()=>({});function h(c,_){if(1&c&&(n.I0R(0,"div",1),n.wVc(1,"async"),n.yuY(2,E,2,1,"ng-container",2),n.wVc(3,"async"),n.C$Y()),2&c){const i=n.GaO();n.eAK("t-message-text_light","onDark"===n.kDX(1,6,i.mode$)),n.E7m("@tuiFadeIn",i.animation)("@tuiHeightCollapse",i.animation),n.yG2(2),n.E7m("polymorpheusOutlet",i.error.message||n.kDX(3,8,i.defaultErrorMessage$))("polymorpheusOutletContext",i.error.context||n.q4q(10,f))}}let p=(()=>{class c{constructor(i,u,d){this.animation=i,this.mode$=u,this.defaultErrorMessage$=d,this.error=null,this.visible=!0}set errorSetter(i){this.error=(0,v.gT)(i)?new s.E(i):i}onAnimation(i){this.visible=i}}return c.\u0275fac=function(i){return new(i||c)(n.GI1(a.kp),n.GI1(a.Yx),n.GI1(a.cX))},c.\u0275cmp=n.In1({type:c,selectors:[["tui-error"]],hostBindings:function(i,u){1&i&&n.qCj("animationcancel.self",function(){return u.onAnimation(!1)})("animationstart.self",function(){return u.onAnimation(!0)})},inputs:{errorSetter:[n.Wk5.None,"error","errorSetter"]},features:[n.M5G([r.Ir])],decls:1,vars:1,consts:[["automation-id","tui-error__text","class","t-message-text",3,"t-message-text_light",4,"ngIf"],["automation-id","tui-error__text",1,"t-message-text"],[4,"polymorpheusOutlet","polymorpheusOutletContext"]],template:function(i,u){1&i&&n.yuY(0,h,4,11,"div",0),2&i&&n.E7m("ngIf",u.error&&u.visible)},dependencies:[t.u_,l.Af,t.a],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);display:block;color:var(--tui-negative);word-wrap:break-word;animation:tuiPresent 1s infinite}.t-message-text[_ngcontent-%COMP%]{margin-top:.25rem;white-space:pre-line}.t-message-text_light[_ngcontent-%COMP%]{color:var(--tui-negative-night)}"],data:{animation:[o.iY,o.K2]},changeDetection:0}),c})(),T=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=n.a4G({type:c}),c.\u0275inj=n.s3X({imports:[[t.MD,l.Ux]]}),c})();function I(c,_){1&c&&n.wR5(0,"tui-error",0),2&c&&n.E7m("error",_.$implicit)}function A(c,_){1&c&&n.C_f(0)}function S(c,_){1&c&&n.yuY(0,A,1,0,"ng-container",1),2&c&&n.E7m("ngTemplateOutlet",_.$implicit)}let L=(()=>{class c{constructor(){this._errors=null}get errors(){return this._errors}set errors(i){this._errors=i}allErrors(){return this.errors||null}errorsToTemplates(){return m.y.formatErrors(this.errors||null).filter(i=>i&&i instanceof n.Yw2)}errorsToStr(){return m.y.formatErrors(this.errors||null).filter(i=>i&&"string"==typeof i)}static#t=this.\u0275fac=function(u){return new(u||c)};static#e=this.\u0275cmp=n.In1({type:c,selectors:[["app-errors"]],inputs:{errors:"errors"},standalone:!0,features:[n.UHJ],decls:4,vars:0,consts:[[3,"error"],[4,"ngTemplateOutlet"]],template:function(u,d){1&u&&(n.c53(0,I,1,1,"tui-error",0,n.oxv),n.c53(2,S,1,1,"ng-container",null,n.oxv)),2&u&&(n.oho(d.errorsToStr()),n.yG2(2),n.oho(d.errorsToTemplates()))},dependencies:[t.MD,t.XV,T,p]})}return c})()},8256:(y,M,e)=>{function t(s,o){return s.error?.message?s.error.message:500==s.status?`${s.error.error} ${s.error.exception}`.replace(/\</gm,"").replace(/\>+/gm,""):504==s.status?"Server irraggiungibile, controlla la tua connessione e riprova.":n(function v(s){if("object"==typeof s.error&&"object"==typeof s.error.details&&Array.isArray(s.error.details)&&s.error.details.length>0){const o=s.error.details.filter(r=>"object"==typeof r&&null!=r&&r instanceof Object&&Object.keys(r).length>0).filter(r=>"string"==typeof r.attribute&&r.attribute.length>0&&("string"==typeof r.message&&r.message.length>0||Array.isArray(r.message)&&r.message.length>0));if(o.length>0)return o}return[]}(s),o)}function n(s,o){if(0==s.length)return null;const r=o?.joinChar??", ",a=s.map(l=>`${l.attribute} ${l.message}`);return a.length?function m(s){return[...new Set(s)]}(a).join(r):null}e.d(M,{Yj:()=>n,mk:()=>t})},9938:(y,M,e)=>{e.d(M,{y:()=>v});var t=e(6504);const n={required:"Questo campo non pu\xF2 essere vuoto!",email:"Questa email non \xE8 valida!",numbersOnly:"Solo numeri ammessi!",numberOnly:"Solo numeri ammessi!",numerical:"Solo numeri ammessi!",invalid_http_url:"Collegamento http non valido",minlength:s=>"Testo troppo corto: Lunghezza minima: " + s.requiredLength + ", lunghezza attuale: " + s.actualLength + "",InvalidFormat:s=>"\"" + s.value + "\" non \xE8 un formato valido. Esempio valido: \"" + s.validExample + "\"",pattern:s=>"\"" + s.actualValue + "\" non \xE8 un formato valido. Il formato deve rispettare la seguente espressione regolare (RegExp): \"" + s.requiredPattern + "\"",max:s=>"Il valore inserito \xE8 troppo grande! Valore massimo: " + s.max + ", valore attuale: " + s.actual + "",min:s=>"Il valore inserito \xE8 troppo piccolo! Valore minimo: " + s.min + ", valore attuale: " + s.actual + "",maxlength:s=>"Il valore inserito \xE8 troppo lungo! Lunghezza massima: " + s.requiredLength + ", Lunghezza attuale: " + s.actualLength + "",phoneIT:"Questo non sembra essere un numero di telefono italiano valido. Esempio: +39 123 456 7890",inclusion:s=>{const o=Array.isArray(s)?"I valori ammessi sono: " + s.join(", ") + ".":"";return "Il valore inserito non \xE8 valido. " + o + ""},arrayMinLength:s=>"Devi inserire almeno " + s.requiredLength + " elementi.",passwordConfirmation:"Le password non coincidono!",formWeeklyFromTo:"L'orario di inizio deve essere inferiore a quello di fine!"},m={assignToFormUnlessControl:!0};class v{static formatErrors(o,r){return null==o||null==o?[]:new v(o,r).formatErrors()}static assignErrorsToForm(o,r,a={}){const l=r.error?.details;if(!l||!Array.isArray(l))return"object"==typeof l&&Object.keys(l).length>0?this.assignErrorsToFormFromJson(o,l,a):void console.warn("invalid errors provided to assignErrorsToForm",l);this.assignErrorsToFormFromArray(o,l,a)}static assignErrorsToFormFromJson(o,r,a={}){const l={...m,...a};Object.keys(r).forEach(E=>{const f=r[E];f&&Array.isArray(f)?f.forEach(h=>{const p=o.controls[E];p?p.setErrors({[h.attribute]:h.message}):l.assignToFormUnlessControl&&o.setErrors({[h.attribute]:h.message})}):console.warn("assignErrorsToFormFromJson expected an array of ActiveError, but got:",f)})}static assignErrorsToFormFromArray(o,r,a={}){const l={...m,...a};r.forEach(E=>{const f=o instanceof t.WC?o.controls[E.attribute]:o;f?f.setErrors({[E.attribute]:E.message}):l.assignToFormUnlessControl&&o.setErrors({[E.attribute]:E.message})})}constructor(o,r=n){this.defaultMessages=n,this.messages={},this.enableLogging=!1,this.errors=o,r?this.mergeMessages(r):this.assignDefaults()}assignDefaults(){this.messages={},Object.keys(this.defaultMessages).forEach(o=>{this.messages[o]=this.defaultMessages[o]})}mergeMessages(o){[...Object.keys(this.defaultMessages),...Object.keys(o)].forEach(a=>{this.messages[a]=o[a]?o[a]:this.defaultMessages[a]})}formatErrors(){return[...this.errorMsgFromControl()]}warn(...o){this.enableLogging&&console.warn(...o)}errorMsgFromControl(){if(null==this.errors||null==this.errors)return[];var o=[];return Object.keys(this.errors).filter(r=>{if("string"==typeof this.errors[r]&&this.errors[r].length>0)return o.push(this.errors[r]);if(this.messages.hasOwnProperty(r)&&this.messages[r]&&null!=this.messages[r]){const E=this.messages[r];switch(typeof E){case"string":default:o.push(E);break;case"function":o.push(E(this.errors[r]))}}else if(this.warn(`ReactiveFormsErrors missing error message of "${r}". Parser error with your custom logic.`),[!0,!1].includes(this.errors[r])){var l={};l[r]=this.errors[r],"string"!=typeof l&&(l=JSON.stringify(l)),o.push(l)}else o.push(this.errors[r])}),o}}},8392:(y,M,e)=>{e.d(M,{a:()=>t});const t="Qualcosa \xE8 andato storto."},4736:(y,M,e)=>{e.d(M,{M:()=>v,O:()=>s});var t=e(4496),n=e(5944),m=e(4704);let v=(()=>{class o{constructor(a){this.months$=a}transform({month:a}){return this.months$.pipe((0,m.k)(l=>l[a]))}}return o.\u0275fac=function(a){return new(a||o)(t.GI1(n.GU,16))},o.\u0275pipe=t.UTH({name:"tuiMonth",type:o,pure:!0}),o})(),s=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=t.a4G({type:o}),o.\u0275inj=t.s3X({}),o})()},3797:(y,M,e)=>{e.d(M,{CQ:()=>c,Oo:()=>S,cP:()=>L});var t=e(4496),n=e(6504),m=e(3044),v=e(1800),s=e(4164),o=e(4680),r=e(466),a=e(7936),l=e(8048),E=e(4336),f=e(5944),h=e(9371),p=e(796),T=e(1368);const I=["*",[["input"]]],A=["*","input"];let S=(()=>{class _ extends v._y{constructor(u,d,D,C){super(u,d,C),this.textfieldSize=D,this.open=!1}get size(){return this.textfieldSize.size}get nativeFocusableElement(){return this.computedDisabled||!this.textfield?null:this.textfield.nativeFocusableElement}get focused(){return(0,s.ER)(this.nativeFocusableElement)||!!this.hostedDropdown&&this.hostedDropdown.focused}get canOpen(){return this.interactive&&!!this.datalist}onValueChange(u){this.value=u,this.open=!0}onActiveZone(u){this.updateFocused(u)}handleOption(u){this.setNativeValue(String(u)),this.focusInput(),this.value=String(u),this.open=!1}getFallbackValue(){return""}focusInput(u=!1){this.nativeFocusableElement&&this.nativeFocusableElement.focus({preventScroll:u})}setNativeValue(u){this.nativeFocusableElement&&(this.nativeFocusableElement.value=u)}}return _.\u0275fac=function(u){return new(u||_)(t.GI1(n.eq,10),t.GI1(t.kD9),t.GI1(l.$K),t.GI1(v.cn,8))},_.\u0275cmp=t.In1({type:_,selectors:[["tui-input"]],contentQueries:function(u,d,D){if(1&u&&t.szK(D,E.Ux,5,t.Yw2),2&u){let C;t.wto(C=t.Gqi())&&(d.datalist=C.first)}},viewQuery:function(u,d){if(1&u&&(t.CC$(r.Qw,5),t.CC$(a.y_,5)),2&u){let D;t.wto(D=t.Gqi())&&(d.hostedDropdown=D.first),t.wto(D=t.Gqi())&&(d.textfield=D.first)}},hostVars:1,hostBindings:function(u,d){2&u&&t.e48("data-size",d.size)},features:[t.M5G([p.g3,(0,o.NK)(_),(0,f.UH)(_),(0,v.q4)(_)],[p.YL]),t.eg9],ngContentSelectors:A,decls:4,vars:11,consts:[[1,"t-hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-input__textfield",1,"t-textfield",3,"disabled","focusable","invalid","nativeId","pseudoFocus","pseudoHover","readOnly","value","valueChange"]],template:function(u,d){1&u&&(t.kPM(I),t.I0R(0,"tui-hosted-dropdown",0),t.iHE("openChange",function(C){return t.kNx(d.open,C)||(d.open=C),C}),t.qCj("tuiActiveZoneChange",function(C){return d.onActiveZone(C)}),t.I0R(1,"tui-primitive-textfield",1),t.qCj("valueChange",function(C){return d.onValueChange(C)}),t._Xx(2),t._Xx(3,1,["ngProjectAs","input",5,["input"]]),t.C$Y()()),2&u&&(t.E7m("canOpen",d.canOpen)("content",d.datalist||""),t.OKB("open",d.open),t.yG2(),t.E7m("disabled",d.computedDisabled)("focusable",d.computedFocusable)("invalid",d.computedInvalid)("nativeId",d.nativeId)("pseudoFocus",d.computedFocused)("pseudoHover",d.pseudoHover)("readOnly",d.readOnly)("value",d.value))},dependencies:[r.Qw,a.y_,m.M,a.KQ],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}"],changeDetection:0}),_})(),L=(()=>{class _ extends h.Cm{onValueChange(u){this.host.onValueChange(u)}}return _.\u0275fac=(()=>{let i;return function(d){return(i||(i=t.otF(_)))(d||_)}})(),_.\u0275dir=t.Sc5({type:_,selectors:[["tui-input"]],features:[t.M5G([(0,f.iu)(_)]),t.eg9]}),_})(),c=(()=>{class _{}return _.\u0275fac=function(u){return new(u||_)},_.\u0275mod=t.a4G({type:_}),_.\u0275inj=t.s3X({imports:[[T.MD,m.L,a.KA,r.GE]]}),_})()},796:(y,M,e)=>{e.d(M,{YL:()=>f,g3:()=>h}),e(4736);var n=e(5193),m=e(5944),o=(e(3012),e(2700),e(528)),a=(e(4704),e(4496)),l=e(6504);const f=(0,n.Sk)({limitWidth:"fixed",align:"right"}),h={provide:m.Y9,deps:[[new a.T7N,new a.Yiy,l.Y6]],useFactory:o.Z}},4872:(y,M,e)=>{e.d(M,{ay:()=>v});var t=e(4496),n=e(3252),m=e(3616);function v(r){r||((0,t.yAg)(v),r=(0,t.uUt)(t.eM9));const a=new n._(l=>r.onDestroy(l.next.bind(l)));return l=>l.pipe((0,m.a)(a))}}}]);