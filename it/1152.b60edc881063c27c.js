"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[1152],{1920:($,m,o)=>{o.d(m,{w:()=>h});var e=o(4496),n=o(6504),O=o(3480),g=o(6700),f=o(3616),T=o(6684),C=o(3797),a=o(8588),d=o(1368),p=o(9956),c=o(1292);function I(l,S){if(1&l&&(e.I0R(0,"tui-textarea",2),e.OEk(1),e.C$Y()),2&l){const i=e.GaO().$implicit,s=e.GaO();e.E7m("formControl",i.control),e.yG2(),e.oRS(" ",s.getFullLang(i.lang)," ")}}function N(l,S){if(1&l&&(e.I0R(0,"tui-input",2),e.OEk(1),e.C$Y()),2&l){const i=e.GaO().$implicit,s=e.GaO();e.E7m("formControl",i.control),e.yG2(),e.oRS(" ",s.getFullLang(i.lang)," ")}}const A=l=>({"mb-3":l});function G(l,S){if(1&l&&(e.SAx(0),e.I0R(1,"div",1),e.yuY(2,I,2,2,"tui-textarea",2)(3,N,2,2),e.wR5(4,"app-errors",3),e.C$Y(),e.k70()),2&l){const i=S.$implicit,s=S.last,M=e.GaO();e.yG2(),e.E7m("ngClass",e.S45(3,A,!s)),e.yG2(),e.C0Y(2,M.long?2:3),e.yG2(2),e.E7m("errors",i.control.errors)}}const y=["*"];let h=(()=>{class l{constructor(){this.destroy$=new O.UF,this.long=!1,this.controls=(0,e.OCB)({}),this.controlsArr=(0,e.S6b)(()=>{const i=this.controls();return Object.keys(i).map(s=>({lang:s,control:i[s]}))}),this.touched$=new g.g(!1),this.value$=new g.g({})}ngAfterViewInit(){this.addLang("it"),this.addLang("en")}ngOnInit(){}registerOnChange(i){this.value$.pipe((0,f.a)(this.destroy$)).subscribe({next:s=>i(s)})}registerOnTouched(i){this.touched$.pipe((0,T.I)(s=>!0===s)).subscribe({next:()=>i()})}writeValue(i){this.patchValue(i??{}),this.touched$.next(!1)}wasTouched(){this.touched$.next(!0)}getFullLang(i){return c.S[i]??i}controlChanged(i){this.value$.next({...this.value$.value,[i]:this.controls()[i].value})}patchValue(i){Object.keys(i).forEach(s=>this.addLang(s)),Object.keys(this.controls()).forEach(s=>{this.controls()[s].patchValue(i[s]??null)})}addLang(i){if(this.controls()[i])return;const s=new n.Ku;s.valueChanges.subscribe({next:()=>this.controlChanged(i)}),this.controls.set({...this.controls(),[i]:s})}static#e=this.\u0275fac=function(s){return new(s||l)};static#t=this.\u0275cmp=e.In1({type:l,selectors:[["app-i18n-input"]],inputs:{long:"long"},standalone:!0,features:[e.M5G([{provide:n.Y6,useExisting:(0,e.wd)(()=>l),multi:!0},O.UF]),e.UHJ],ngContentSelectors:y,decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"ngClass"],[3,"formControl"],[3,"errors"]],template:function(s,M){1&s&&(e.kPM(),e._Xx(0),e.yuY(1,G,5,5,"ng-container",0)),2&s&&(e.yG2(),e.E7m("ngForOf",M.controlsArr()))},dependencies:[n.sl,n.ue,n.ug,C.CQ,C.Oo,C.cP,d.Iw,p.g,d.QF,a.Y3,a.wp,a.kd],changeDetection:0})}return l})()},8736:($,m,o)=>{o.d(m,{g:()=>te});var e=o(4496),n=o(6504),O=o(3480),g=o(5e3),f=o(1960),T=o(8212),C=o(4336),a=o(8048),d=o(5656),p=o(9880),c=o(3797),I=o(8588),N=o(5188),A=o(9888),G=o(6528),y=o(6380),h=o(9956),l=o(1236),S=o(1744),i=o(1920),s=o(6404),M=o(3616),B=o(4e3),X=o(7748),D=o(6052);function K(R,v){1&R&&e.wR5(0,"app-preorder-reservation-group-preorder-type",3),2&R&&e.E7m("type",v.$implicit)}function w(R,v){if(1&R&&e.wR5(0,"tui-data-list-wrapper",4),2&R){const t=e.GaO(),_=e.Gew(1);e.E7m("itemContent",_)("items",t.options)}}const W=["*"];let k=(()=>{class R{constructor(){this.destroy$=(0,e.uUt)(O.UF),this.control=new n.Ku(null),this.form=new n.WC({control:this.control}),this.options=[...s.i4]}writeValue(t){t&&!(0,s.ch)(t)&&(console.error("Invalid preorder type:",t),t=null),this.control.setValue(t||null)}registerOnChange(t){this.control.valueChanges.pipe((0,M.a)(this.destroy$),(0,B.a)()).subscribe({next:_=>t(_)})}registerOnTouched(t){this.registerOnChange(t)}setDisabledState(t){t?this.control.disable():this.control.enable()}static#e=this.\u0275fac=function(_){return new(_||R)};static#t=this.\u0275cmp=e.In1({type:R,selectors:[["app-select-preorder-type"]],standalone:!0,features:[e.M5G([O.UF,{provide:n.Y6,useExisting:(0,e.wd)(()=>R),multi:!0}]),e.UHJ],ngContentSelectors:W,decls:5,vars:2,consts:[["cardContent",""],[3,"formControl","valueContent"],[3,"itemContent","items",4,"tuiDataList"],[3,"type"],[3,"itemContent","items"]],template:function(_,r){if(1&_&&(e.kPM(),e.yuY(0,K,1,1,"ng-template",null,0,e.gJz),e.I0R(2,"tui-select",1),e._Xx(3),e.yuY(4,w,1,2,"tui-data-list-wrapper",2),e.C$Y()),2&_){const E=e.Gew(1);e.yG2(2),e.E7m("formControl",r.control)("valueContent",E)}},dependencies:[N.my,N.cP,N.uO,X.c,n.sl,n.ue,n.ug,D.q8,D.OO,C.Ux],encapsulation:2,changeDetection:0})}return R})();var U=o(7936),Q=o(5324),J=o(7492),j=o(9052);const H=()=>[];function Z(R,v){if(1&R){const t=e.KQA();e.I0R(0,"form",3),e.wR5(1,"app-show-image",4),e.I0R(2,"div",5)(3,"p",6),e.OEk(4),e.C$Y(),e.I0R(5,"div",7)(6,"tui-input",8),e.SAx(7),e.aS0(8,9),e.k70(),e.C$Y(),e.wR5(9,"app-errors",10),e.C$Y(),e.I0R(10,"div",7)(11,"tui-input",0),e.SAx(12),e.aS0(13,11),e.k70(),e.C$Y(),e.wR5(14,"app-errors",10),e.C$Y(),e.I0R(15,"div",7)(16,"button",12),e.qCj("click",function(){e.usT(t);const r=e.GaO().$index,E=e.GaO();return e.CGJ(E.removeAt(r))}),e.SAx(17),e.aS0(18,13),e.k70(),e.C$Y()()()()}if(2&R){const t=e.GaO().$implicit,_=e.GaO();e.E7m("formGroup",t),e.yG2(),e.E7m("image",(_.tableTypeByIds()[t.value.table_type_id].images||e.q4q(8,H))[0]),e.yG2(3),e.oRS(" ",_.tableTypeByIds()[t.value.table_type_id].name," "),e.yG2(2),e.E7m("tuiTextfieldPrefix","\u20ac")("formControl",t.controls.price),e.yG2(3),e.E7m("errors",t.controls.price.errors),e.yG2(2),e.E7m("formControl",t.controls.people_per_turn),e.yG2(3),e.E7m("errors",t.controls.people_per_turn.errors)}}function q(R,v){1&R&&e.yuY(0,Z,19,9,"form",2),2&R&&e.C0Y(0,v.$implicit.value.table_type_id?0:-1)}let ee=(()=>{class R{constructor(){this.addTable=new n.Ku(null),this.forms=new n.Sg([]),this.tableTypeByIds=(0,e.OCB)({}),this.tableTypes=(0,e.uUt)(J.W)}ngOnInit(){this.tableTypes.search({per_page:1e3}).subscribe(t=>{const _={};t.items.forEach(r=>{r.id&&(_[r.id]=r)}),this.tableTypeByIds.set(_)}),this.addTable.valueChanges.subscribe(t=>{t&&t.id&&(this.addRow({table_type_id:t.id,price:t.default_price,people_per_turn:t.default_people_per_turn}),this.addTable.reset())})}writeValue(t){this.forms.clear(),t&&Array.isArray(t)&&t.forEach(_=>{this.addRow(_)})}registerOnChange(t){this.forms.valueChanges.subscribe(t)}registerOnTouched(t){this.forms.valueChanges.subscribe(t)}setDisabledState(t){t?this.forms.disable():this.forms.enable()}removeAt(t){this.forms.removeAt(t)}addRow(t){this.forms.push(new n.WC({table_type_id:new n.Ku(t.table_type_id),price:new n.Ku(t.price||0),people_per_turn:new n.Ku(t.people_per_turn||0)}))}static#e=this.\u0275fac=function(_){return new(_||R)};static#t=this.\u0275cmp=e.In1({type:R,selectors:[["app-table-type-to-preorder-reservation-group-input"]],standalone:!0,features:[e.M5G([O.UF,{provide:n.Y6,useExisting:R,multi:!0}]),e.UHJ],decls:5,vars:1,consts:()=>{let t,_,r,E;return t="Aggiungi tavolo",_="Prezzo per persona",r="Ospiti per turno",E="Rimuovi",[[3,"formControl"],t,["class","flex items-center",3,"formGroup"],[1,"flex","items-center",3,"formGroup"],[1,"max-w-[300px]",3,"image"],[1,"block","p-4"],[1,"block","text-lg"],[1,"block","mb-2"],[3,"tuiTextfieldPrefix","formControl"],_,[3,"errors"],r,["type","button","tuiButton","","appearance","secondary-destructive",3,"click"],E]},template:function(_,r){1&_&&(e.c53(0,q,1,1,null,null,e.oxv),e.I0R(2,"app-table-type-select",0),e.SAx(3),e.aS0(4,1),e.k70(),e.C$Y()),2&_&&(e.oho(r.forms.controls),e.yG2(2),e.E7m("formControl",r.addTable))},dependencies:[T.CI,T.Kw,n.sl,n.sz,n.ue,n.u,n.ug,n.uW,c.CQ,c.Oo,c.cP,a.aS,a.Id,U.KA,Q.Y,j.y,h.g],encapsulation:2,changeDetection:0})}return R})(),te=(()=>{class R{constructor(){this.destroy$=(0,e.uUt)(O.UF),this.router=(0,e.uUt)(l.E5),this.route=(0,e.uUt)(l.gV),this.submit=new e._w7,this.disabled=(0,e.OCB)(!1),this.form=new n.WC({title:new n.Ku("Pagamento alla prenotazione richiesto " + Date.now() + "",[n.AQ.required]),active:new n.Ku(!0,[n.AQ.required,n.AQ.pattern(/^(true|false)$/)]),payment_value:new n.Ku(null,[n.AQ.required]),message:new n.Ku(null,[]),preorder_type:new n.Ku(null,[n.AQ.required]),table_types:new n.Ku(null,[]),min_people:new n.Ku(null,[n.AQ.min(1)])}),this.submitted=!1,this._item=null,this.cases=(0,e.OCB)(null),this.e=this.errorsForControl}set item(t){if(!(t instanceof f.u))return console.warn("PreorderReservationGroupFormComponent: value is blank or invalid",t),this.form.reset(),void(this._item=null);this._item=t,this.form.patchValue({payment_value:t.payment_value??null,title:t.title??null,active:"active"===t.status,message:t.translations?.message||{},preorder_type:t.preorder_type,table_types:t.table_type_to_preorder_reservation_groups??[],min_people:t.min_people??null})}get item(){return this._item}errorsForControl(t){const _=this.form.get(t);return _&&(this.submitted||_.touched)?_.errors??null:null}cancel(){this.router.navigate(["../"],{relativeTo:this.route})}formSubmit(){if(this.submitted=!0,this.form.invalid)return;const t={...this.form.value,...this.cases()??{}};t.status=t.active?"active":"inactive",delete t.active,this.submit.emit(t)}static#e=this.\u0275fac=function(_){return new(_||R)};static#t=this.\u0275cmp=e.In1({type:R,selectors:[["app-preorder-reservation-group-form"]],inputs:{item:"item"},outputs:{submit:"submit"},standalone:!0,features:[e.M5G([O.UF]),e.UHJ],decls:54,vars:17,consts:()=>{let t,_,r,E,P,F,V,L,Y,b,x,z;return t="Titolo: visibile solo a te",_="Tipologia di pagamento",r="Valore pagamento",E="N\xB0 minimo di persone eleggibilit\xE0",P="Quando il valore \xE8 presente, il pagamento verr\xE0 richiesto solo per prenotazioni pi\xF9 grandi del numero indicato.",F="Messaggio per i clienti che cercano di prenotare",V="Attivazione",L="Richiedere il pagamento?",Y="Tipologie di tavolo abilitate",b="Quando sono richiesti pagamenti?",x="Conferma",z="Annulla",[[3,"formGroup","ngSubmit"],[1,"block","mb-3"],["formControlName","title",3,"tuiAutoFocus"],t,[3,"errors"],[1,"block",3,"formControl"],_,[3,"formControl","tuiTextfieldPrefix"],r,["tuiTextfield",""],[3,"formControl"],E,[1,"text-slate-400"],P,[3,"long","formControl"],F,[1,"text-xl"],V,["contentAlign","right","formControlName","active","size","l"],L,[1,"mb-3","text-2xl"],Y,b,[1,"block","mb-3",3,"item","editable","outputMamiChanges"],[1,"flex","items-center"],["type","submit","tuiButton","","appearance","primary"],x,["tuiButton","","appearance","icon","type","button",3,"click"],z]},template:function(_,r){1&_&&(e.I0R(0,"form",0),e.qCj("ngSubmit",function(){return r.formSubmit()}),e.I0R(1,"div",1)(2,"tui-input",2),e.SAx(3),e.aS0(4,3),e.k70(),e.C$Y(),e.wR5(5,"app-errors",4),e.C$Y(),e.I0R(6,"div",1)(7,"app-select-preorder-type",5),e.SAx(8),e.aS0(9,6),e.k70(),e.C$Y(),e.wR5(10,"app-errors",4),e.C$Y(),e.I0R(11,"div",1)(12,"tui-input-number",7),e.SAx(13),e.aS0(14,8),e.k70(),e.wR5(15,"input",9),e.C$Y(),e.wR5(16,"app-errors",4),e.C$Y(),e.I0R(17,"div",1)(18,"tui-input-number",10),e.SAx(19),e.aS0(20,11),e.k70(),e.wR5(21,"input",9),e.C$Y(),e.I0R(22,"p",12),e.SAx(23),e.aS0(24,13),e.k70(),e.C$Y(),e.wR5(25,"app-errors",4),e.C$Y(),e.I0R(26,"div",1)(27,"app-i18n-input",14),e.SAx(28),e.aS0(29,15),e.k70(),e.C$Y(),e.wR5(30,"app-errors",4),e.C$Y(),e.I0R(31,"div",1)(32,"p",16),e.SAx(33),e.aS0(34,17),e.k70(),e.C$Y(),e.I0R(35,"tui-checkbox-block",18),e.SAx(36),e.aS0(37,19),e.k70(),e.C$Y(),e.wR5(38,"app-errors",4),e.C$Y(),e.I0R(39,"h2",20),e.aS0(40,21),e.C$Y(),e.I0R(41,"div",1),e.wR5(42,"app-table-type-to-preorder-reservation-group-input",10),e.C$Y(),e.I0R(43,"h2",20),e.aS0(44,22),e.C$Y(),e.I0R(45,"div",1)(46,"app-select-turns-paymentv2",23),e.qCj("outputMamiChanges",function(P){return r.cases.set(P)}),e.C$Y()(),e.I0R(47,"div",24)(48,"button",25),e.SAx(49),e.aS0(50,26),e.k70(),e.C$Y(),e.I0R(51,"button",27),e.qCj("click",function(){return r.cancel()}),e.SAx(52),e.aS0(53,28),e.k70(),e.C$Y()()()),2&_&&(e.E7m("formGroup",r.form),e.yG2(2),e.E7m("tuiAutoFocus",!0),e.yG2(3),e.E7m("errors",r.e("title")),e.yG2(2),e.E7m("formControl",r.form.controls.preorder_type),e.yG2(3),e.E7m("errors",r.e("preorder_type")),e.yG2(2),e.E7m("formControl",r.form.controls.payment_value)("tuiTextfieldPrefix","\u20ac"),e.yG2(4),e.E7m("errors",r.e("payment_value")),e.yG2(2),e.E7m("formControl",r.form.controls.min_people),e.yG2(7),e.E7m("errors",r.e("min_people")),e.yG2(2),e.E7m("long",!1)("formControl",r.form.controls.message),e.yG2(3),e.E7m("errors",r.e("message")),e.yG2(8),e.E7m("errors",r.e("active")),e.yG2(4),e.E7m("formControl",r.form.controls.table_types),e.yG2(4),e.E7m("item",r.item)("editable",!0))},dependencies:[n.y,n.sz,n.ue,n.u,n.sl,n.ug,n.uW,n.Wo,T.CI,T.Kw,c.CQ,c.Oo,c.cP,U.b,I.Y3,N.my,C.A$,g.m6,g.gJ,h.g,A.Q7,A.mi,A.Qj,a.aS,a.Id,d.WY,G.i,G.I,p.kh,y.iO,S.t,i.w,k,ee],changeDetection:0})}return R})()},1292:($,m,o)=>{o.d(m,{S:()=>e});const e={it:"Italiano",en:"Inglese",es:"Spagnolo",fr:"Francese",de:"Tedesco",pt:"Portoghese",ru:"Russo",zh:"Cinese",ja:"Giapponese",ar:"Arabo",hi:"Hindi",bn:"Bengalese",pa:"Punjabi",ms:"Malese"}},1200:($,m,o)=>{o.d(m,{A:()=>T,m:()=>C});var e=o(4496),n=o(900),O=o(3480),g=o(800),f=o(3616);let T=(()=>{class a{constructor(p,c,I){this.el=p,this.zone=c,this.destroy$=I,this.eventName=""}ngOnInit(){(0,g.w)(this.el.nativeElement,this.eventName,{passive:!1}).pipe((0,n.Uv)(this.zone),(0,n.uy)(),(0,f.a)(this.destroy$)).subscribe()}}return a.\u0275fac=function(p){return new(p||a)(e.GI1(e.GMv),e.GI1(e.WW2),e.GI1(O.UF,2))},a.\u0275dir=e.Sc5({type:a,selectors:[["","tuiPreventDefault",""]],inputs:{eventName:[e.Wk5.None,"tuiPreventDefault","eventName"]},features:[e.M5G([O.UF])]}),a})(),C=(()=>{class a{}return a.\u0275fac=function(p){return new(p||a)},a.\u0275mod=e.a4G({type:a}),a.\u0275inj=e.s3X({}),a})()}}]);