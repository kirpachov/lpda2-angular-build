(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[2040],{92040:(y,m,n)=>{"use strict";n.r(m),n.d(m,{EditPublicMessageModule:()=>Q});var e=n(31236),c=n(7552),t=n(54496),p=n(16500),P=n(83480),d=n(53616),g=n(66684),M=n(17368),f=n(54704),h=n(19212),O=n(68824),_=n(6504),A=n(97048),v=n(1128),$=n(9938),L=n(48392),D=n(38256),l=n(79064),C=n(99956),o=n(58212),s=n(8048),u=n(47568),U=n(66052),N=n(39860),z=n(31480),x=n(91368),b=n(63724),S=n(82496),Y=n(37936),F=n(94336);function K(a,G){1&a&&(t.OEk(0),t.wVc(1,"publicMessageKey")),2&a&&t.cNF(t.kDX(1,1,G.$implicit))}function W(a,G){if(1&a&&t.wR5(0,"tui-data-list-wrapper",20),2&a){const i=t.GaO(),r=t.Gew(9);t.E7m("itemContent",r)("items",i.keys)}}function X(a,G){1&a&&t.C_f(0)}const V=a=>({$implicit:a});function j(a,G){if(1&a&&(t.I0R(0,"div",5),t.OEk(1," Il testo verr\xe0 mostrato nella seguente posizione:"),t.wR5(2,"br"),t.I0R(3,"b"),t.yuY(4,X,1,0,"ng-container",21),t.C$Y()()),2&a){const i=t.GaO(),r=t.Gew(9);t.yG2(4),t.E7m("ngTemplateOutlet",r)("ngTemplateOutletContext",t.S45(2,V,i.form.value.key))}}let k=(()=>{class a{constructor(){this.service=(0,t.uUt)(p.o),this.destroy$=(0,t.uUt)(P.UF),this.route=(0,t.uUt)(e.gV),this.router=(0,t.uUt)(e.E5),this.notifications=(0,t.uUt)(v.E),this.loading=(0,t.OCB)(!1),this.keys=[...N.EF],this.submitted=(0,t.OCB)(!1),this.form=new _.WC({key:new _.Ku(null,[_.AQ.required]),text:new _.Ku(null)}),this.e=this.errorsFor}ngOnInit(){this.form.get("key")?.valueChanges?.pipe((0,d.a)(this.destroy$),(0,g.I)(i=>(0,N.Qn)(i)),(0,M.G)(i=>this.service.show(i))).subscribe({next:i=>{this.form.patchValue({text:i.translations?.text})},error:i=>{console.warn(i)}}),this.route.params.pipe((0,d.a)(this.destroy$),(0,f.k)(i=>i.key),(0,g.I)(i=>(0,N.Qn)(i)),(0,h.y)(i=>this.form.patchValue({key:i})),(0,h.y)(()=>this.form.controls.key.disable())).subscribe((0,b.I)())}submit(){this.submitted.set(!0),!this.form.invalid&&(this.loading.set(!0),this.service.create(this.formVal()).pipe((0,d.a)(this.destroy$),(0,O.U)(()=>this.loading.set(!1))).subscribe({next:()=>{this.notifications.fireSnackBar(S.$localize`Salvato`)},error:i=>{i instanceof A.gj&&422==i.status?$.y.assignErrorsToForm(this.form,i):this.notifications.error(i instanceof A.gj?(0,D.mk)(i):L.a)}}))}cancel(){this.router.navigate(["../"],{relativeTo:this.route})}errorsFor(i){const r=this.form.get(i);return r&&(r.dirty||r.touched||this.submitted())?r.errors:null}formVal(){return{key:this.form.controls.key.value,text:this.form.value.text}}static#t=this.\u0275fac=function(r){return new(r||a)};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["app-edit-public-message"]],standalone:!0,features:[t.M5G([P.UF]),t.UHJ],decls:29,vars:8,consts:()=>{let i,r,E,I,R,B;return i=S.$localize`Imposta messaggio`,r=S.$localize`Puoi mostrare dei messaggi personalizzati nelle pagine pubbliche. Per ciascuna posizione, puoi mettere esattamente un messaggio tradotto in piÃ¹ lingue.`,E=S.$localize`Seleziona la posizione del testo da mostrare.`,I=S.$localize`Traduzione`,R=S.$localize`Conferma`,B=S.$localize`Annulla`,[[1,"flex","items-center"],i,[1,"text-slate-400"],r,[3,"formGroup","ngSubmit"],[1,"mb-3"],["keySelectContent",""],["tuiTextfieldSize","l",3,"formControlName","valueContent"],E,["tuiTextfield",""],[3,"itemContent","items",4,"tuiDataList"],["class","mb-3"],[3,"errors"],["formControlName","text"],I,[1,"flex"],["tuiButton","","type","submit","size","l",1,"me-2",3,"showLoader"],R,["tuiButton","","type","button","appearance","icon","size","l",3,"showLoader","click"],B,[3,"itemContent","items"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]]},template:function(r,E){if(1&r&&(t.I0R(0,"h1",0)(1,"span"),t.aS0(2,1),t.C$Y()(),t.I0R(3,"p",2),t.SAx(4),t.aS0(5,3),t.k70(),t.C$Y(),t.I0R(6,"form",4),t.qCj("ngSubmit",function(){return E.submit()}),t.I0R(7,"div",5),t.yuY(8,K,2,3,"ng-template",null,6,t.gJz),t.I0R(10,"tui-select",7),t.SAx(11),t.aS0(12,8),t.k70(),t.wR5(13,"input",9),t.yuY(14,W,1,2,"tui-data-list-wrapper",10),t.C$Y(),t.yuY(15,j,5,4,"div",11),t.wR5(16,"app-errors",12),t.C$Y(),t.I0R(17,"div",5)(18,"app-i18n-input",13),t.SAx(19),t.aS0(20,14),t.k70(),t.C$Y(),t.wR5(21,"app-errors",12),t.C$Y(),t.I0R(22,"div",15)(23,"button",16),t.SAx(24),t.aS0(25,17),t.k70(),t.C$Y(),t.I0R(26,"button",18),t.qCj("click",function(){return E.cancel()}),t.SAx(27),t.aS0(28,19),t.k70(),t.C$Y()()()),2&r){const I=t.Gew(9);t.yG2(6),t.E7m("formGroup",E.form),t.yG2(4),t.E7m("formControlName","key")("valueContent",I),t.yG2(5),t.C0Y(15,E.form.value.key?15:-1),t.yG2(),t.E7m("errors",E.e("text")),t.yG2(5),t.E7m("errors",E.e("text")),t.yG2(2),t.E7m("showLoader",E.loading()),t.yG2(3),t.E7m("showLoader",E.loading())}},dependencies:[_.sl,_.sz,_.ue,_.u,_.uW,_.Wo,l.w,C.g,o.CI,o.Kw,u.my,u.cP,u.uO,Y.b,s.aS,s.rD,U.q8,U.OO,F.Ux,z.s,x.XV],encapsulation:2,changeDetection:0})}return a})(),Q=(()=>{class a{static#t=this.\u0275fac=function(r){return new(r||a)};static#e=this.\u0275mod=t.a4G({type:a});static#n=this.\u0275inj=t.s3X({imports:[e.qQ.forChild([(0,c.VV)(k,{path:"",closeable:!0,dismissible:!0,size:"m"})])]})}return a})()},79064:(y,m,n)=>{"use strict";n.d(m,{w:()=>D});var e=n(54496),c=n(6504),t=n(83480),p=n(46700),P=n(53616),d=n(66684),g=n(53797),M=n(70968),f=n(91368),h=n(99956),O=n(61292);function _(l,C){if(1&l&&(e.I0R(0,"tui-textarea",2),e.OEk(1),e.C$Y()),2&l){const o=e.GaO().$implicit,s=e.GaO();e.E7m("formControl",o.control),e.yG2(),e.oRS(" ",s.getFullLang(o.lang)," ")}}function A(l,C){if(1&l&&(e.I0R(0,"tui-input",2),e.OEk(1),e.C$Y()),2&l){const o=e.GaO().$implicit,s=e.GaO();e.E7m("formControl",o.control),e.yG2(),e.oRS(" ",s.getFullLang(o.lang)," ")}}const v=l=>({"mb-3":l});function $(l,C){if(1&l&&(e.SAx(0),e.I0R(1,"div",1),e.yuY(2,_,2,2,"tui-textarea",2)(3,A,2,2),e.wR5(4,"app-errors",3),e.C$Y(),e.k70()),2&l){const o=C.$implicit,s=C.last,u=e.GaO();e.yG2(),e.E7m("ngClass",e.S45(3,v,!s)),e.yG2(),e.C0Y(2,u.long?2:3),e.yG2(2),e.E7m("errors",o.control.errors)}}const L=["*"];let D=(()=>{class l{constructor(){this.destroy$=new t.UF,this.long=!1,this.controls=(0,e.OCB)({}),this.controlsArr=(0,e.S6b)(()=>{const o=this.controls();return Object.keys(o).map(s=>({lang:s,control:o[s]}))}),this.touched$=new p.g(!1),this.value$=new p.g({})}ngAfterViewInit(){this.addLang("it"),this.addLang("en")}ngOnInit(){}registerOnChange(o){this.value$.pipe((0,P.a)(this.destroy$)).subscribe({next:s=>o(s)})}registerOnTouched(o){this.touched$.pipe((0,d.I)(s=>!0===s)).subscribe({next:()=>o()})}writeValue(o){this.patchValue(o??{}),this.touched$.next(!1)}wasTouched(){this.touched$.next(!0)}getFullLang(o){return O.S[o]??o}controlChanged(o){this.value$.next({...this.value$.value,[o]:this.controls()[o].value})}patchValue(o){Object.keys(o).forEach(s=>this.addLang(s)),Object.keys(this.controls()).forEach(s=>{this.controls()[s].patchValue(o[s]??null)})}addLang(o){if(this.controls()[o])return;const s=new c.Ku;s.valueChanges.subscribe({next:()=>this.controlChanged(o)}),this.controls.set({...this.controls(),[o]:s})}static#t=this.\u0275fac=function(s){return new(s||l)};static#e=this.\u0275cmp=e.In1({type:l,selectors:[["app-i18n-input"]],inputs:{long:"long"},standalone:!0,features:[e.M5G([{provide:c.Y6,useExisting:(0,e.wd)(()=>l),multi:!0},t.UF]),e.UHJ],ngContentSelectors:L,decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"ngClass"],[3,"formControl"],[3,"errors"]],template:function(s,u){1&s&&(e.kPM(),e._Xx(0),e.yuY(1,$,5,5,"ng-container",0)),2&s&&(e.yG2(),e.E7m("ngForOf",u.controlsArr()))},dependencies:[c.sl,c.ue,c.ug,g.CQ,g.Oo,g.cP,f.Iw,h.g,f.QF,M.Y3,M.wp,M.kd],changeDetection:0})}return l})()},61292:(y,m,n)=>{"use strict";n.d(m,{S:()=>t});var e=n(19664);const t={it:e.$localize`Italiano`,en:e.$localize`Inglese`,es:e.$localize`Spagnolo`,fr:e.$localize`Francese`,de:e.$localize`Tedesco`,pt:e.$localize`Portoghese`,ru:e.$localize`Russo`,zh:e.$localize`Cinese`,ja:e.$localize`Giapponese`,ar:e.$localize`Arabo`,hi:e.$localize`Hindi`,bn:e.$localize`Bengalese`,pa:e.$localize`Punjabi`,ms:e.$localize`Malese`}},82496:()=>{}}]);