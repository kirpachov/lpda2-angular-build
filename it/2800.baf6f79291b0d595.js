"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[2800],{2800:(S,d,o)=>{o.r(d),o.d(d,{ViewReservationComponent:()=>p});var t=o(4496),R=o(1680),M=o(2992),N=o(4820),e=o(3480),O=o(3616),_=o(8824),I=o(7692);function m(c,P){if(1&c&&t.wR5(0,"app-public-reservation-confirmation",0),2&c){const C=t.GaO();t.E7m("reservation",C.reservation())}}function v(c,P){1&c&&t.wR5(0,"tui-loader",1)}function f(c,P){1&c&&(t.I0R(0,"p",2),t.SAx(1),t.Mff(2,3),t.wR5(3,"span",4),t.U7j(),t.k70(),t.C$Y())}let p=(()=>{class c{constructor(){this.destroy$=(0,t.uUt)(e.UF),this.router=(0,t.uUt)(M.E5),this.route=(0,t.uUt)(M.gV),this.reservations=(0,t.uUt)(N.G),this.loading=(0,t.OCB)(!0),this.reservation=(0,t.OCB)(null)}ngOnInit(){this.route.params.subscribe({next:C=>{const s=C.secret;"string"==typeof s&&s.length>0&&this.loadReservation(s)}})}loadReservation(C){this.reservation.set(null),this.reservations.load(C).pipe((0,O.a)(this.destroy$),(0,_.U)(()=>this.loading.set(!1))).subscribe({next:s=>{this.reservation.set(s)}})}static#t=this.\u0275fac=function(s){return new(s||c)};static#o=this.\u0275cmp=t.In1({type:c,selectors:[["app-view-reservation"]],standalone:!0,features:[t.M5G([e.UF]),t.UHJ],decls:3,vars:1,consts:()=>{let C;return C="" + "\ufffd#3\ufffd" + "Non siamo stati in grado di trovare la tua prenotazione." + "\ufffd/#3\ufffd" + " \xC8 nel passato? O \xE8 stata eliminata? ",[[3,"reservation"],["size","xl"],[1,"text-xl","text-center","mb-3"],C,[1,"text-red-600"]]},template:function(s,h){1&s&&t.yuY(0,m,1,1,"app-public-reservation-confirmation",0)(1,v,1,0)(2,f,4,0),2&s&&t.C0Y(0,h.reservation()?0:h.loading()?1:2)},dependencies:[R.I,I.Sk,I.Cb],styles:["[_nghost-%COMP%]{background-color:var(--sixth-color);display:block;overflow:hidden;padding-top:2em;padding-bottom:2em}"],changeDetection:0})}return c})()},1680:(S,d,o)=>{o.d(d,{I:()=>Y});var t=o(4496),R=o(7296),M=o(7048),N=o(8256),e=o(8392),O=o(4820),_=o(6616),I=o(1128),m=o(3480),v=o(3616),f=o(8824),p=o(1368),c=o(2992),P=o(8212),C=o(1512),s=o(7692),h=o(908);function D(n,u){1&n&&(t.I0R(0,"p",0),t.aS0(1,9),t.C$Y())}function a(n,u){if(1&n&&(t.I0R(0,"p",0),t.aS0(1,10),t.C$Y(),t.I0R(2,"div",11)(3,"a",12),t.SAx(4),t.aS0(5,13),t.k70(),t.C$Y()()),2&n){const i=t.GaO(4);t.yG2(3),t._6D("href",i.reservation.payment.hpp_url,t.K6U)}}function T(n,u){if(1&n&&t.yuY(0,D,2,0,"p",8)(1,a,6,1),2&n){const i=t.GaO(3);t.C0Y(0,i.isFreshReservation()?0:1)}}function r(n,u){1&n&&(t.I0R(0,"p",0),t.aS0(1,14),t.C$Y())}function E(n,u){if(1&n&&t.yuY(0,T,2,1)(1,r,2,0),2&n){const i=t.GaO(2);let l;t.C0Y(0,"todo"===(l=i.reservation.payment.status)?0:"paid"===l?1:-1)}}function L(n,u){1&n&&(t.I0R(0,"p",0),t.aS0(1,15),t.C$Y())}function U(n,u){1&n&&(t.SAx(0),t.aS0(1,16),t.k70())}function k(n,u){1&n&&t.wR5(0,"tui-loader",19)}function W(n,u){1&n&&(t.SAx(0),t.aS0(1,20),t.k70())}function K(n,u){if(1&n){const i=t.KQA();t.SAx(0),t.aS0(1,17),t.k70(),t.I0R(2,"span",18),t.qCj("click",function(){t.usT(i);const A=t.GaO(2);return t.CGJ(A.resendConfirmation())}),t.yuY(3,k,1,0,"tui-loader",19)(4,W,2,0),t.C$Y()}if(2&n){const i=t.GaO(2);t.yG2(3),t.C0Y(3,i.resendingConfirmation()?3:4)}}function z(n,u){if(1&n&&(t.yuY(0,E,2,1)(1,L,2,0),t.I0R(2,"p",0),t.yuY(3,U,2,0,"ng-container")(4,K,5,1),t.C$Y(),t.I0R(5,"p",0),t.SAx(6),t.aS0(7,1),t.k70(),t.OEk(8),t.wVc(9,"date"),t.wVc(10,"date"),t.C$Y(),t.wR5(11,"app-public-message",2),t.I0R(12,"div",3),t.SAx(13),t.aS0(14,4),t.k70(),t.I0R(15,"app-contact-us"),t.OEk(16,"Contattaci"),t.C$Y(),t.I0R(17,"span",5),t.OEk(18,"-"),t.C$Y(),t.I0R(19,"a",6),t.SAx(20),t.aS0(21,7),t.k70(),t.C$Y()()),2&n){const i=t.GaO();t.C0Y(0,i.reservation.payment?0:1),t.yG2(3),t.C0Y(3,i.isFreshReservation()?3:4),t.yG2(5),t.CAO(" ",t.g7$(9,6,i.reservation.datetime,"EEEE d MMMM y")," ",t.g7$(10,9,i.reservation.datetime,"HH:mm"),". "),t.yG2(3),t.E7m("location","existing-reservation-form"),t.yG2(8),t.CI5("routerLink","/cr/",i.reservation.secret,"")}}let Y=(()=>{class n{constructor(){this.notifications=(0,t.uUt)(I.E),this.reservations=(0,t.uUt)(O.G),this.destroy$=(0,t.uUt)(m.UF),this.localStorage=(0,t.uUt)(_.s),this.resendingConfirmation=(0,t.OCB)(!1)}isFreshReservation(){return this.reservation&&this.reservation.created_at?this.reservation.created_at.getTime()-Date.now()<3e5:(console.warn("isFreshReservation","missing reservation or created_at",this.reservation),!1)}resendConfirmation(){const i=this.reservation?.secret;i&&(this.resendingConfirmation.set(!0),this.reservations.resendConfirmation(i).pipe((0,v.a)(this.destroy$),(0,f.U)(()=>this.resendingConfirmation.set(!1))).subscribe({next:()=>{this.notifications.fireSnackBar("L'email arriver\xE0 a breve.")},error:l=>{this.notifications.error(l instanceof M.gj?(0,N.mk)(l):e.a)}}))}static#t=this.\u0275fac=function(l){return new(l||n)};static#o=this.\u0275cmp=t.In1({type:n,selectors:[["app-public-reservation-confirmation"]],inputs:{reservation:"reservation"},standalone:!0,features:[t.UHJ],decls:1,vars:1,consts:()=>{let i,l,A,$,x,B,F,b,y,V,G;return i="La prenotazione \xE8 fissata per ",l="Dimenticato qualcosa?",A="Cancella prenotazione",$="Il pagamento di conferma della prenotazione non risulta essere andato a buon fine, ma \xE8 possibile che sia necessario aspettare qualche minuto. Riprova pi\xF9 tardi.",x="Il pagamento di conferma della prenotazione non risulta essere andato a buon fine.",B="Esegui pagamento",F="Il pagamento della prenotazione \xE8 andato a buon fine e la prenotazione \xE8 confermata.",b="La tua prenotazione \xE8 stata creata.",y="Riceverai a breve un'email di conferma.",V="Dovresti aver ricevuto una mail di conferma. Non \xE8 arrivata?",G="Rimanda email",[[1,"text-xl","text-center","mb-3"],i,[1,"block","mb-3","text-center","text-xl",3,"location"],[1,"flex","items-center","justify-center","mb-3","text-xl"],l,[1,"mx-2"],["tuiLink","",3,"routerLink"],A,["class","text-xl text-center mb-3"],$,x,[1,"flex","items-center","justify-center","mb-3"],["size","m","tuiButton","","appearance","custom",1,"btn-primary","me-2",3,"href"],B,F,b,y,V,["type","button","role","button","size","m",1,"cursor-pointer","inline-flex","items-center","ms-2","underline",3,"click"],["size","xs"],G]},template:function(l,A){1&l&&t.yuY(0,z,22,12),2&l&&t.C0Y(0,A.reservation?0:-1)},dependencies:[p.y,P.CI,P.Kw,R.K,c.ER,C.w,C.C,h.Q,s.Sk,s.Cb],changeDetection:0})}return n})()},8256:(S,d,o)=>{function t(e,O){return e.error?.message?e.error.message:500==e.status?`${e.error.error} ${e.error.exception}`.replace(/\</gm,"").replace(/\>+/gm,""):504==e.status?"Server irraggiungibile, controlla la tua connessione e riprova.":R(function N(e){if("object"==typeof e.error&&"object"==typeof e.error.details&&Array.isArray(e.error.details)&&e.error.details.length>0){const O=e.error.details.filter(_=>"object"==typeof _&&null!=_&&_ instanceof Object&&Object.keys(_).length>0).filter(_=>"string"==typeof _.attribute&&_.attribute.length>0&&("string"==typeof _.message&&_.message.length>0||Array.isArray(_.message)&&_.message.length>0));if(O.length>0)return O}return[]}(e),O)}function R(e,O){if(0==e.length)return null;const _=O?.joinChar??", ",I=e.map(m=>`${m.attribute} ${m.message}`);return I.length?function M(e){return[...new Set(e)]}(I).join(_):null}o.d(d,{Yj:()=>R,mk:()=>t})},8392:(S,d,o)=>{o.d(d,{a:()=>t});const t="Qualcosa \xE8 andato storto."},1512:(S,d,o)=>{o.d(d,{C:()=>h,w:()=>D});var t=o(4496),R=o(900),M=o(4392),N=o(4164),e=o(3480),O=o(4680),_=o(3972),I=o(5944),m=o(3412),v=o(4704),f=o(3656),p=o(1368);const c=["tuiLink",""];function P(a,T){if(1&a&&t.wR5(0,"tui-svg",3),2&a){const r=t.GaO();t.E7m("src",r.icon||"")}}function C(a,T){if(1&a&&t.wR5(0,"tui-svg",4),2&a){const r=t.GaO();t.E7m("src",r.icon||"")}}const s=["*"];let h=(()=>{class a{constructor(r,E,L){this.el=r,this.mode$=E,this.pseudo=!1,this.icon="",this.iconAlign="right",this.iconRotated=!1,this.mode=null,this.focusVisible=!1,this.focusedChange=(0,m.U)((0,R.Ax)(this.el.nativeElement,"focusin").pipe((0,v.k)(M.Ml)),(0,R.Ax)(this.el.nativeElement,"focusout").pipe((0,v.k)(M.so))),L.subscribe(U=>{this.focusVisible=U})}get nativeFocusableElement(){return this.el.nativeElement}get focused(){return(0,N.ER)(this.nativeFocusableElement)}get hasIcon(){return!!this.icon}get iconAlignLeft(){return this.hasIcon&&"left"===this.iconAlign}get iconAlignRight(){return this.hasIcon&&"right"===this.iconAlign}}return a.\u0275fac=function(r){return new(r||a)(t.GI1(t.GMv),t.GI1(I.Yx),t.GI1(e.MF))},a.\u0275cmp=t.In1({type:a,selectors:[["a","tuiLink",""],["button","tuiLink",""]],hostVars:7,hostBindings:function(r,E){1&r&&t.qCj("$.data-mode.attr",function(){return E.mode$}),2&r&&(t.e48("data-host-mode",E.mode),t.eAK("_pseudo",E.pseudo)("_icon-rotated",E.iconRotated)("_focus-visible",E.focusVisible))},inputs:{pseudo:"pseudo",icon:"icon",iconAlign:"iconAlign",iconRotated:"iconRotated",mode:"mode"},exportAs:["tuiLink"],features:[t.M5G([(0,O.NK)(a),e.MF,e.UF,_.Ir])],attrs:c,ngContentSelectors:s,decls:4,vars:2,consts:[["class","t-icon t-icon_left",3,"src",4,"ngIf"],[1,"t-content"],["class","t-icon t-icon_right",3,"src",4,"ngIf"],[1,"t-icon","t-icon_left",3,"src"],[1,"t-icon","t-icon_right",3,"src"]],template:function(r,E){1&r&&(t.kPM(),t.yuY(0,P,1,1,"tui-svg",0),t.I0R(1,"span",1),t._Xx(2),t.C$Y(),t.yuY(3,C,1,1,"tui-svg",2)),2&r&&(t.E7m("ngIf",E.iconAlignLeft),t.yG2(3),t.E7m("ngIf",E.iconAlignRight))},dependencies:[f.Wu,p.u_],styles:["[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;text-decoration:none;transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;color:var(--tui-link);text-align:left;text-transform:inherit;font-weight:inherit;cursor:pointer;outline:none}[_nghost-%COMP%]:hover{color:var(--tui-link-hover)}[_nghost-%COMP%]:disabled{opacity:var(--tui-disabled-opacity);cursor:default}[data-mode=onLight][_nghost-%COMP%]{color:var(--tui-text-02)}[data-mode=onLight][_nghost-%COMP%]:hover, [data-mode=onLight]._active[_nghost-%COMP%]{color:var(--tui-text-01)}[data-mode=onLight]._pseudo[_nghost-%COMP%]{color:var(--tui-text-01)}[data-mode=onLight]._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{-webkit-text-decoration-color:rgba(0,0,0,.48);text-decoration-color:#0000007a}[data-mode=onLight]._pseudo[_nghost-%COMP%]:hover, [data-mode=onLight]._pseudo._active[_nghost-%COMP%]{color:var(--tui-text-03)}[data-mode=onLight][data-host-mode=negative][_nghost-%COMP%]{color:var(--tui-negative-night)}[data-mode=onLight][data-host-mode=negative][_nghost-%COMP%]:hover, [data-mode=onLight][data-host-mode=negative][_nghost-%COMP%]:active, [data-mode=onLight][data-host-mode=negative]._active[_nghost-%COMP%]{color:var(--tui-negative-night-hover)}[data-mode=onDark][_nghost-%COMP%]{color:var(--tui-text-03-night)}[data-mode=onDark][_nghost-%COMP%]:hover, [data-mode=onDark][_nghost-%COMP%]:active, [data-mode=onDark]._active[_nghost-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onDark]._pseudo[_nghost-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onDark]._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{-webkit-text-decoration-color:rgba(255,255,255,.48);text-decoration-color:#ffffff7a}[data-mode=onDark]._pseudo[_nghost-%COMP%]:hover, [data-mode=onDark]._pseudo[_nghost-%COMP%]:active, [data-mode=onDark]._pseudo._active[_nghost-%COMP%]{color:var(--tui-text-03-night)}[data-mode=onDark][data-host-mode=positive][_nghost-%COMP%]{color:var(--tui-positive-night)}[data-mode=onDark][data-host-mode=positive][_nghost-%COMP%]:hover, [data-mode=onDark][data-host-mode=positive][_nghost-%COMP%]:active, [data-mode=onDark][data-host-mode=positive]._active[_nghost-%COMP%]{color:var(--tui-positive-night-hover)}[data-host-mode=negative][_nghost-%COMP%]{color:var(--tui-negative)}[data-host-mode=negative][_nghost-%COMP%]:hover{color:var(--tui-negative-hover)}[data-host-mode=negative]._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{-webkit-text-decoration-color:rgba(222,76,30,.48);text-decoration-color:#de4c1e7a}[data-host-mode=positive][_nghost-%COMP%]{color:var(--tui-positive)}[data-host-mode=positive][_nghost-%COMP%]:hover{color:var(--tui-positive-hover)}[data-host-mode=positive]._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{-webkit-text-decoration-color:rgba(58,169,129,.48);text-decoration-color:#3aa9817a}._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-selection)}[data-mode=onLight]._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-clear);color:var(--tui-text-01)}[data-mode=onDark]._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-clear-inverse);color:var(--tui-text-01-night)}[data-host-mode=positive]._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-success-bg)}[data-host-mode=negative]._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-error-bg)}._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding-bottom:.15em;-webkit-text-decoration:underline dashed rgba(51,111,238,.48);text-decoration:underline dashed rgba(51,111,238,.48);text-underline-offset:.2em;text-decoration-thickness:.7px}.t-icon[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;width:var(--tui-link-icon-size, 1.5rem);height:var(--tui-link-icon-size, 1.5rem);margin-top:-.125rem}.t-icon_left[_ngcontent-%COMP%]{margin-right:.25rem}.t-icon_right[_ngcontent-%COMP%]{margin-left:.25rem}._icon-rotated[_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}"],changeDetection:0}),a})(),D=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=t.a4G({type:a}),a.\u0275inj=t.s3X({imports:[[p.MD,f.Yt]]}),a})()}}]);