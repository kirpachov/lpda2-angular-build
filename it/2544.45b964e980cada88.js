(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[2544],{79064:(y,u,e)=>{"use strict";e.d(u,{w:()=>I});var o=e(54496),C=e(6504),t=e(83480),R=e(46700),S=e(53616),N=e(66684),O=e(53797),T=e(70968),A=e(91368),E=e(99956),f=e(61292);function $(r,g){if(1&r&&(o.I0R(0,"tui-textarea",2),o.OEk(1),o.C$Y()),2&r){const n=o.GaO().$implicit,a=o.GaO();o.E7m("formControl",n.control),o.yG2(),o.oRS(" ",a.getFullLang(n.lang)," ")}}function d(r,g){if(1&r&&(o.I0R(0,"tui-input",2),o.OEk(1),o.C$Y()),2&r){const n=o.GaO().$implicit,a=o.GaO();o.E7m("formControl",n.control),o.yG2(),o.oRS(" ",a.getFullLang(n.lang)," ")}}const v=r=>({"mb-3":r});function G(r,g){if(1&r&&(o.SAx(0),o.I0R(1,"div",1),o.yuY(2,$,2,2,"tui-textarea",2)(3,d,2,2),o.wR5(4,"app-errors",3),o.C$Y(),o.k70()),2&r){const n=g.$implicit,a=g.last,m=o.GaO();o.yG2(),o.E7m("ngClass",o.S45(3,v,!a)),o.yG2(),o.C0Y(2,m.long?2:3),o.yG2(2),o.E7m("errors",n.control.errors)}}const M=["*"];let I=(()=>{class r{constructor(){this.destroy$=new t.UF,this.long=!1,this.controls=(0,o.OCB)({}),this.controlsArr=(0,o.S6b)(()=>{const n=this.controls();return Object.keys(n).map(a=>({lang:a,control:n[a]}))}),this.touched$=new R.g(!1),this.value$=new R.g({})}ngAfterViewInit(){this.addLang("it"),this.addLang("en")}ngOnInit(){}registerOnChange(n){this.value$.pipe((0,S.a)(this.destroy$)).subscribe({next:a=>n(a)})}registerOnTouched(n){this.touched$.pipe((0,N.I)(a=>!0===a)).subscribe({next:()=>n()})}writeValue(n){this.patchValue(n??{}),this.touched$.next(!1)}wasTouched(){this.touched$.next(!0)}getFullLang(n){return f.S[n]??n}controlChanged(n){this.value$.next({...this.value$.value,[n]:this.controls()[n].value})}patchValue(n){Object.keys(n).forEach(a=>this.addLang(a)),Object.keys(this.controls()).forEach(a=>{this.controls()[a].patchValue(n[a]??null)})}addLang(n){if(this.controls()[n])return;const a=new C.Ku;a.valueChanges.subscribe({next:()=>this.controlChanged(n)}),this.controls.set({...this.controls(),[n]:a})}static#t=this.\u0275fac=function(a){return new(a||r)};static#o=this.\u0275cmp=o.In1({type:r,selectors:[["app-i18n-input"]],inputs:{long:"long"},standalone:!0,features:[o.M5G([{provide:C.Y6,useExisting:(0,o.wd)(()=>r),multi:!0},t.UF]),o.UHJ],ngContentSelectors:M,decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"ngClass"],[3,"formControl"],[3,"errors"]],template:function(a,m){1&a&&(o.kPM(),o._Xx(0),o.yuY(1,G,5,5,"ng-container",0)),2&a&&(o.yG2(),o.E7m("ngForOf",m.controlsArr()))},dependencies:[C.sl,C.ue,C.ug,O.CQ,O.Oo,O.cP,A.Iw,E.g,A.QF,T.Y3,T.wp,T.kd],changeDetection:0})}return r})()},62544:(y,u,e)=>{"use strict";e.r(u),e.d(u,{CreateCategoryModule:()=>z});var o=e(31236),C=e(7552),t=e(54496),R=e(58212),S=e(78976),N=e(64436),O=e(41512),T=e(99956),A=e(79064),E=e(6504),f=e(83480),$=e(11712),d=e(53616),v=e(54704),G=e(66684),M=e(68824),I=e(45820),r=e(49088),g=e(9938),n=e(1128),a=e(38256),m=e(75704),P=e(48392),c=e(94952);function L(l,x){if(1&l&&(t.I0R(0,"h1",10)(1,"span"),t.aS0(2,11),t.C$Y()(),t.I0R(3,"div",1)(4,"span",12),t.SAx(5),t.aS0(6,13),t.k70(),t.C$Y(),t.I0R(7,"a",14),t.wVc(8,"urlTo"),t.OEk(9),t.C$Y()()),2&l){const s=t.GaO();let i,_;t.yG2(7),t.E7m("routerLink",t.g7$(8,2,null==(i=s.parent())?null:i.id,"menuCategory.show")),t.yG2(2),t.cNF(null==(_=s.parent())?null:_.name)}}function Y(l,x){1&l&&(t.I0R(0,"h1"),t.SAx(1),t.aS0(2,15),t.k70(),t.C$Y())}let B=(()=>{class l{constructor(){this.service=(0,t.uUt)($.S),this.destroy$=(0,t.uUt)(f.UF),this.router=(0,t.uUt)(o.E5),this.route=(0,t.uUt)(o.gV),this.urlTo=(0,t.uUt)(r.S),this.notifications=(0,t.uUt)(n.E),this.afterUrl=this.route.snapshot.queryParams.afterUrl,this.form=new E.WC({name:new E.Ku(null)}),this.parentId=null,this.parent=(0,t.OCB)(null),this.loading=(0,t.OCB)(!1),this.submitted=!1,this.e=this.errorsFor}ngOnInit(){this.route.parent?.parent?.params.pipe((0,d.a)(this.destroy$),(0,v.k)(s=>Number(s.category_id)),(0,G.I)(s=>"number"==typeof s&&!isNaN(s)&&s>0)).subscribe({next:s=>{this.parentId=s,this.loadParent()}})}submit(){this.submitted=!0,!this.form.invalid&&(this.loading.set(!0),this.service.create(this.formData()).pipe((0,d.a)(this.destroy$),(0,M.U)(()=>this.loading.set(!1))).subscribe({next:s=>{const i=this.afterUrl||this.urlTo.transform(s.id,"menuCategory.show");console.assert(i,`URL for menu category ${s.id} not found`),this.router.navigate([i],{relativeTo:this.route}),this.notifications.fireSnackBar(c.$localize`Categoria creata.`)},error:s=>{g.y.assignErrorsToForm(this.form,s),this.notifications.error((0,a.mk)(s)||P.a)}}))}formData(){const s=this.form.value,i=this.parent();return i instanceof I.Q&&(s.parent_id=i.id),s}errorsFor(s){const i=this.form.get(s);return i&&(i.dirty||i.touched||this.submitted)?i.errors:null}cancel(){this.router.navigate([this.afterUrl||".."],{relativeTo:this.route})}loadParent(s=this.parentId){s&&(this.loading.set(!0),this.service.show(s).pipe((0,d.a)(this.destroy$),(0,M.U)(()=>this.loading.set(!1))).subscribe({next:i=>{this.parent.set(i)},error:i=>{this.notifications.error((0,a.mk)(i)||P.a)}}))}static#t=this.\u0275fac=function(i){return new(i||l)};static#o=this.\u0275cmp=t.In1({type:l,selectors:[["app-create-category"]],standalone:!0,features:[t.M5G([f.UF,r.S]),t.UHJ],decls:15,vars:5,consts:()=>{let s,i,_,p,D,U;return s=c.$localize`Nome`,i=c.$localize`Conferma`,_=c.$localize`Annulla`,p=c.$localize`Crea nuova categoria`,D=c.$localize`La categoria verrà creata come sottocategoria di`,U=c.$localize`Crea nuovo menù`,[[3,"formGroup","ngSubmit"],[1,"mb-3"],["formControlName","name"],s,[3,"errors"],[1,"flex"],["tuiButton","","type","submit","size","l",1,"me-2",3,"showLoader"],i,["tuiButton","","type","button","appearance","icon","size","l",3,"showLoader","click"],_,[1,"flex","items-center"],p,[1,"me-2","text-slate-400"],D,["tuiLink","",3,"routerLink"],U]},template:function(i,_){1&i&&(t.yuY(0,L,10,5)(1,Y,3,0),t.I0R(2,"form",0),t.qCj("ngSubmit",function(){return _.submit()}),t.I0R(3,"div",1)(4,"app-i18n-input",2),t.SAx(5),t.aS0(6,3),t.k70(),t.C$Y(),t.wR5(7,"app-errors",4),t.C$Y(),t.I0R(8,"div",5)(9,"button",6),t.SAx(10),t.aS0(11,7),t.k70(),t.C$Y(),t.I0R(12,"button",8),t.qCj("click",function(){return _.cancel()}),t.SAx(13),t.aS0(14,9),t.k70(),t.C$Y()()()),2&i&&(t.C0Y(0,_.parent()?0:1),t.yG2(2),t.E7m("formGroup",_.form),t.yG2(5),t.E7m("errors",_.e("name")),t.yG2(2),t.E7m("showLoader",_.loading()),t.yG2(3),t.E7m("showLoader",_.loading()))},dependencies:[R.CI,R.Kw,T.g,A.w,E.sl,E.sz,E.ue,E.u,E.uW,E.Wo,S.Gy,m.W,N.a,O.w,O.C,o.ER,r.S],encapsulation:2,changeDetection:0})}return l})(),z=(()=>{class l{static#t=this.\u0275fac=function(i){return new(i||l)};static#o=this.\u0275mod=t.a4G({type:l});static#e=this.\u0275inj=t.s3X({imports:[o.qQ.forChild([(0,C.VV)(B,{path:"",closeable:!0,dismissible:!1,size:"l"})])]})}return l})()},61292:(y,u,e)=>{"use strict";e.d(u,{S:()=>t});var o=e(19664);const t={it:o.$localize`Italiano`,en:o.$localize`Inglese`,es:o.$localize`Spagnolo`,fr:o.$localize`Francese`,de:o.$localize`Tedesco`,pt:o.$localize`Portoghese`,ru:o.$localize`Russo`,zh:o.$localize`Cinese`,ja:o.$localize`Giapponese`,ar:o.$localize`Arabo`,hi:o.$localize`Hindi`,bn:o.$localize`Bengalese`,pa:o.$localize`Punjabi`,ms:o.$localize`Malese`}},94952:()=>{}}]);