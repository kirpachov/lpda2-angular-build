(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[3363],{53363:(U,d,i)=>{"use strict";i.r(d),i.d(d,{EditReservationModule:()=>O});var c=i(31236),h=i(7552),t=i(54496),m=i(58212),u=i(83480),p=i(28304),E=i(1128),g=i(46700),r=i(53616),C=i(66684),R=i(74e3),I=i(17368),v=i(19212),S=i(68824),T=i(9938),$=i(38256),y=i(63724),M=i(1560),f=i(12208),l=i(75472);let N=(()=>{class s{constructor(){this.service=(0,t.uUt)(p.S),this.destroy$=(0,t.uUt)(u.UF),this.router=(0,t.uUt)(c.E5),this.route=(0,t.uUt)(c.gV),this.notifications=(0,t.uUt)(E.E),this.loading=(0,t.OCB)(!1),this.item=(0,t.OCB)(null),this.id$=new g.g(null),this.item$=this.id$.pipe((0,r.a)(this.destroy$),(0,C.I)(e=>null!==e),(0,R.a)(),(0,I.G)(e=>this.service.show(e)),(0,v.y)(()=>this.loading.set(!1)),(0,v.y)(e=>this.item.set(e)))}ngOnInit(){this.item$.pipe((0,r.a)(this.destroy$)).subscribe((0,y.I)()),this.route.params.pipe((0,r.a)(this.destroy$)).subscribe({next:e=>{this.id$.next(e.id)}})}submit(e){const n=this.id$.value;n&&(this.loading.set(!0),this.service.update(n,e).pipe((0,r.a)(this.destroy$),(0,S.U)(()=>this.loading.set(!1))).subscribe({next:o=>{this.notifications.fireSnackBar(l.$localize`Prenotazione salvata`),this.router.navigate([".."],{relativeTo:this.route})},error:o=>{console.warn("invalid!",{form:this.formComponent,errors:o}),this.formComponent&&T.y.assignErrorsToForm(this.formComponent.form,o),this.notifications.error((0,$.mk)(o)||l.$localize`Qualcosa Ã¨ andato storto nel salvataggio.`)}}))}cancel(){confirm(l.$localize`Sei sicuro di voler annullare?`)&&this.navigateBack()}navigateBack(){this.router.navigate([".."],{relativeTo:this.route})}static#t=this.\u0275fac=function(n){return new(n||s)};static#i=this.\u0275cmp=t.In1({type:s,selectors:[["app-edit-reservation"]],viewQuery:function(n,o){if(1&n&&t.CC$(f.G,5),2&n){let a;t.wto(a=t.Gqi())&&(o.formComponent=a.first)}},standalone:!0,features:[t.M5G([u.UF]),t.UHJ],decls:8,vars:2,consts:()=>{let e;return e=l.$localize`Modifica prenotazione`,[[1,"flex","items-center","justify-between"],e,["type","button","tuiIconButton","","appearance","icon",3,"click"],[3,"item","loading","cancelled","formSubmit"]]},template:function(n,o){1&n&&(t.I0R(0,"div",0)(1,"h1"),t.SAx(2),t.aS0(3,1),t.k70(),t.C$Y(),t.I0R(4,"button",2),t.qCj("click",function(){return o.cancel()}),t.I0R(5,"mat-icon"),t.OEk(6,"close"),t.C$Y()()(),t.I0R(7,"app-admin-reservation-form",3),t.qCj("cancelled",function(){return o.cancel()})("formSubmit",function(A){return o.submit(A)}),t.C$Y()),2&n&&(t.yG2(7),t.E7m("item",o.item())("loading",o.loading()))},dependencies:[m.CI,m.Kw,M.qL,f.G],encapsulation:2})}return s})(),O=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#i=this.\u0275mod=t.a4G({type:s});static#e=this.\u0275inj=t.s3X({imports:[c.qQ.forChild([(0,h.VV)(N,{path:"",closeable:!0,dismissible:!1,size:"l"})])]})}return s})()},75472:()=>{}}]);