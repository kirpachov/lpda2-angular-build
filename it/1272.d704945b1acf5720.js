"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[1272],{4592:(f,v,n)=>{n.d(v,{u:()=>E});var t=n(4496),d=n(3480),u=n(8304),c=n(3616),s=n(8824),a=n(7692),_=n(5656);let e=(()=>{class o{transform(r){return null==r||"object"!=typeof r||Array.isArray(r)?[]:Object.keys(r).map(C=>[C,r[C]])}static#t=this.\u0275fac=function(C){return new(C||o)};static#e=this.\u0275pipe=t.UTH({name:"objectToArray",type:o,pure:!0,standalone:!0})}return o})();function l(o,p){if(1&o&&t.wR5(0,"tui-loader",0),2&o){const r=t.GaO();t.E7m("showLoader",r.showLoader)("size","s")}}const g=(o,p)=>p.turn.id;function O(o,p){1&o&&t._Xx(0)}const m=(o,p)=>p[0];function M(o,p){1&o&&t.OEk(0,"Quante persone ci sono al tavolo in questione")}function i(o,p){if(1&o&&(t.I0R(0,"th",4),t.OEk(1),t.I0R(2,"span"),t.aS0(3,11),t.C$Y()()),2&o){const r=p.$implicit;t.yG2(),t.oRS(" ",r[0]," ")}}function P(o,p){1&o&&t.OEk(0,"Quanti tavoli con lo stesso numero di persone")}function D(o,p){if(1&o&&(t.I0R(0,"td",8)(1,"span"),t.OEk(2),t.C$Y()()),2&o){const r=p.$implicit;t.yG2(2),t.cNF(r[1])}}function y(o,p){if(1&o&&(t.I0R(0,"p",1)(1,"b"),t.OEk(2),t.C$Y()(),t.I0R(3,"table",2)(4,"thead")(5,"tr",3)(6,"th",4),t.yuY(7,M,1,0,"ng-template",null,5,t.gJz),t.I0R(9,"span",6),t.aS0(10,7),t.C$Y()(),t.c53(11,i,4,1,"th",12,m),t.wVc(13,"objectToArray"),t.C$Y()(),t.I0R(14,"tbody")(15,"tr",3)(16,"td",8),t.yuY(17,P,1,0,"ng-template",null,9,t.gJz),t.I0R(19,"span",6),t.aS0(20,10),t.C$Y()(),t.c53(21,D,3,1,"td",13,m),t.wVc(23,"objectToArray"),t.C$Y()()()),2&o){const r=p.$implicit,C=t.Gew(8),R=t.Gew(18);t.yG2(2),t.cNF(r.turn.name),t.yG2(7),t.E7m("tuiHint",C),t.yG2(2),t.oho(t.kDX(13,3,r.summary)),t.yG2(8),t.E7m("tuiHint",R),t.yG2(2),t.oho(t.kDX(23,5,r.summary))}}const A=()=>[];function h(o,p){if(1&o&&(t.yuY(0,O,1,0),t.c53(1,y,24,7,null,null,g)),2&o){const r=t.GaO();t.C0Y(0,(r.data()||t.q4q(1,A)).length>0?0:-1),t.yG2(),t.oho(r.data())}}const T=["*"];let E=(()=>{class o{constructor(){this.destroy$=(0,t.uUt)(d.UF),this.service=(0,t.uUt)(u.S),this.data=(0,t.OCB)(null),this.loading=(0,t.OCB)(!1),this.showLoader=!0,this.filters=null}ngOnChanges(){this.query()}query(){this.loading.set(!0),this.service.tablesSummary(this.filters??{}).pipe((0,c.a)(this.destroy$),(0,s.U)(()=>this.loading.set(!1))).subscribe({next:r=>{this.data.set(r)}})}static#t=this.\u0275fac=function(C){return new(C||o)};static#e=this.\u0275cmp=t.In1({type:o,selectors:[["app-reservation-tables-summary"]],inputs:{showLoader:"showLoader",filters:"filters"},standalone:!0,features:[t.M5G([d.UF]),t.SYr,t.UHJ],ngContentSelectors:T,decls:2,vars:1,consts:()=>{let r,C,R;return r="Tipo:",C="Quantit\xE0:",R="persone",[[3,"showLoader","size"],[1,"font-xl"],[1,"tui-table"],[1,"tui-table__tr","tui-table__tr_border_none"],[1,"tui-table__th"],["headerExplain",""],[3,"tuiHint"],r,[1,"tui-table__td"],["valueExplain",""],C,R,["class","tui-table__th"],["class","tui-table__td"]]},template:function(C,R){1&C&&(t.kPM(),t.yuY(0,l,1,2,"tui-loader",0)(1,h,3,2)),2&C&&t.C0Y(0,R.loading()?0:1)},dependencies:[a.Sk,a.Cb,e,_.WY,_.lh,_.SL,_.i6,_.IT],styles:["td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid var(--tui-base-04)}table[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-size:.9rem}table[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]   .tui-table__td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]   .tui-table__th[_ngcontent-%COMP%]{padding:.5rem;height:inherit}"],changeDetection:0})}return o})()},9772:(f,v,n)=>{n.d(v,{CU:()=>d,ye:()=>u});const t=(new Date).getTimezoneOffset()/60;function d(c,s=t){return"string"==typeof c&&c.length>0&&c.match(/\d{2}:\d{2}/)?`${Number(c.split(":")[0])-s}:${c.split(":")[1]}`:(console.error("Invalid string provided to strTimeTimezone",{string:c}),"")}function u(c,s=t){return d(c,-1*s)}},5136:(f,v,n)=>{n.d(v,{e:()=>u});var t=n(8400),d=n(9772);class u extends t.w{constructor(s){super(s),this.name=s.name,this.weekday=s.weekday,this.step=s.step,this.valid_times=s.valid_times,this.starts_at=s.starts_at?(0,d.CU)(s.starts_at):void 0,this.ends_at=s.ends_at?(0,d.CU)(s.ends_at):void 0}}},5180:(f,v,n)=>{n.d(v,{C:()=>a});var t=n(8400);class d extends t.w{constructor(e){super(e),this.image_pixel_id=e.image_pixel_id,this.event_data=e.event_data,this.event_time=e.event_time?new Date(e.event_time):void 0}}class u extends t.w{constructor(e){super(e),this.image_id=e.image_id,this.delivered_email_id=e.delivered_email_id,this.record_type=e.record_type,this.record_id=e.record_id,this.event_type=e.event_type,this.secret=e.secret,this.events=e.events?e.events.map(l=>new d(l)):[]}}class c extends t.w{constructor(e){super(e),this.record_id=e.record_id,this.record_type=e.record_type,this.text=e.text,this.html=e.html,this.subject=e.subject,this.headers=e.headers,this.raw=e.raw,this.image_pixels=e.image_pixels?e.image_pixels.map(l=>new u(l)):[]}}class s extends t.w{constructor(e){super(e),this.hpp_url=e.hpp_url,this.value=e.value,this.status=e.status,this.reservation_id=e.reservation_id,this.preorder_type=e.preorder_type,this.other=e.other}}class a extends t.w{constructor(e){super(e),this.fullname=e.fullname,this.datetime=e.datetime?new Date(e.datetime):void 0,this.status=e.status,this.secret=e.secret,this.adults=e.adults,this.children=e.children,this.table=e.table,this.notes=e.notes,this.email=e.email,this.phone=e.phone,this.payment=e.payment?new s(e.payment):void 0,this.delivered_emails=e.delivered_emails?e.delivered_emails.map(l=>new c(l)):[]}}},1676:(f,v,n)=>{n.d(v,{s:()=>O});var t=n(4496),d=n(6772),u=n(4388),c=n(7048),s=n(8256),a=n(8392),_=n(6700),e=n(4704),l=n(9212);function g(m){if(null==m)return null;if("object"==typeof m)return m;if(!("string"==typeof m&&m.length>0))return null;try{return JSON.parse(m)}catch{}return null}let O=(()=>{class m extends d.A{constructor(){super("public_data"),this.notifications=(0,t.uUt)(u.E),this.data$=new _.g(null),this.messages=(0,t.OCB)(null),this.messages$=this.data$.pipe((0,e.k)(i=>"object"==typeof i&&null!==i?g(i.public_messages):null),(0,l.y)(i=>this.messages.set(i))),this.contacts=(0,t.OCB)(null),this.contacts$=this.data$.pipe((0,e.k)(i=>"object"==typeof i&&null!==i?g(i.settings.email_contacts):null),(0,l.y)(i=>this.contacts.set(i))),this.load(),[this.contacts$,this.messages$].forEach(i=>{i.subscribe({error:P=>{console.warn("unexpected error",P)}})})}load(){this.http.get("").subscribe({next:i=>{this.data$.next(i)},error:i=>{this.notifications.error(i instanceof c.gj?(0,s.mk)(i):a.a)}})}static#t=this.\u0275fac=function(P){return new(P||m)};static#e=this.\u0275prov=t.wxM({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},4820:(f,v,n)=>{n.d(v,{G:()=>g});var t=n(4496),d=n(5180),u=n(6700),c=n(4704),s=n(9212),a=n(9144),_=n(6772),e=n(1676),l=n(5136);let g=(()=>{class O extends _.A{constructor(){super("reservations"),this.publicData=(0,t.uUt)(e.s),this.created=new u.g(null),this.publicData.data$.subscribe({next:M=>{this.created.next(M?.reservation?new d.C(M.reservation):null)}})}getValidTimes(M){return this.get("valid_times",{params:{date:M.toISOString()}}).pipe((0,c.k)(i=>i.map(P=>new l.e(P))))}load(M){return this.get(`${M}`).pipe((0,c.k)(i=>new d.C(i.item)))}create(M){return this.post("",M).pipe((0,c.k)(i=>new d.C(i.item)),(0,s.y)(i=>this.created.next(i)),(0,a.a)(i=>{throw this.created.next(null),i}))}resendConfirmation(M){return this.post(`${M}/resend_confirmation_email`,{})}cancel(M){return this.post(`${M}/cancel`,{})}static#t=this.\u0275fac=function(i){return new(i||O)};static#e=this.\u0275prov=t.wxM({token:O,factory:O.\u0275fac,providedIn:"root"})}return O})()},8304:(f,v,n)=>{n.d(v,{S:()=>a});var t=n(4496),d=n(6012),u=n(5180),c=n(4704),s=n(4820);let a=(()=>{class _ extends d.s{constructor(){super(u.C,"admin/reservations"),this.publicReservations=(0,t.uUt)(s.G),this.getValidTimes=this.publicReservations.getValidTimes}tablesSummary(l={}){return this.get("tables_summary",{params:l})}deliverConfirmationEmail(l){return this.post(`${l}/deliver_confirmation_email`,{}).pipe((0,c.k)(g=>this.mapItem(g)))}static#t=this.\u0275fac=function(g){return new(g||_)};static#e=this.\u0275prov=t.wxM({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},1632:(f,v,n)=>{n.d(v,{k:()=>c,u:()=>s});var t=n(4496),d=n(900),u=n(4680);let c=(()=>{class a{constructor(e,l){this.el=e,this.takeOnlyTrustedEvents=l,this.tuiPressedChange=(0,d.Y7)(this.el.nativeElement,{onlyTrusted:this.takeOnlyTrustedEvents})}}return a.\u0275fac=function(e){return new(e||a)(t.GI1(t.GMv),t.GI1(u.mm))},a.\u0275dir=t.Sc5({type:a,selectors:[["","tuiPressedChange",""]],outputs:{tuiPressedChange:"tuiPressedChange"}}),a})(),s=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.a4G({type:a}),a.\u0275inj=t.s3X({}),a})()},1200:(f,v,n)=>{n.d(v,{A:()=>a,m:()=>_});var t=n(4496),d=n(900),u=n(3480),c=n(800),s=n(3616);let a=(()=>{class e{constructor(g,O,m){this.el=g,this.zone=O,this.destroy$=m,this.eventName=""}ngOnInit(){(0,c.w)(this.el.nativeElement,this.eventName,{passive:!1}).pipe((0,d.Uv)(this.zone),(0,d.uy)(),(0,s.a)(this.destroy$)).subscribe()}}return e.\u0275fac=function(g){return new(g||e)(t.GI1(t.GMv),t.GI1(t.WW2),t.GI1(u.UF,2))},e.\u0275dir=t.Sc5({type:e,selectors:[["","tuiPreventDefault",""]],inputs:{eventName:[t.Wk5.None,"tuiPreventDefault","eventName"]},features:[t.M5G([u.UF])]}),e})(),_=(()=>{class e{}return e.\u0275fac=function(g){return new(g||e)},e.\u0275mod=t.a4G({type:e}),e.\u0275inj=t.s3X({}),e})()},1512:(f,v,n)=>{n.d(v,{C:()=>y,w:()=>A});var t=n(4496),d=n(900),u=n(4392),c=n(4164),s=n(3480),a=n(4680),_=n(3972),e=n(5944),l=n(3412),g=n(4704),O=n(3656),m=n(1368);const M=["tuiLink",""];function i(h,T){if(1&h&&t.wR5(0,"tui-svg",3),2&h){const E=t.GaO();t.E7m("src",E.icon||"")}}function P(h,T){if(1&h&&t.wR5(0,"tui-svg",4),2&h){const E=t.GaO();t.E7m("src",E.icon||"")}}const D=["*"];let y=(()=>{class h{constructor(E,o,p){this.el=E,this.mode$=o,this.pseudo=!1,this.icon="",this.iconAlign="right",this.iconRotated=!1,this.mode=null,this.focusVisible=!1,this.focusedChange=(0,l.U)((0,d.Ax)(this.el.nativeElement,"focusin").pipe((0,g.k)(u.Ml)),(0,d.Ax)(this.el.nativeElement,"focusout").pipe((0,g.k)(u.so))),p.subscribe(r=>{this.focusVisible=r})}get nativeFocusableElement(){return this.el.nativeElement}get focused(){return(0,c.ER)(this.nativeFocusableElement)}get hasIcon(){return!!this.icon}get iconAlignLeft(){return this.hasIcon&&"left"===this.iconAlign}get iconAlignRight(){return this.hasIcon&&"right"===this.iconAlign}}return h.\u0275fac=function(E){return new(E||h)(t.GI1(t.GMv),t.GI1(e.Yx),t.GI1(s.MF))},h.\u0275cmp=t.In1({type:h,selectors:[["a","tuiLink",""],["button","tuiLink",""]],hostVars:7,hostBindings:function(E,o){1&E&&t.qCj("$.data-mode.attr",function(){return o.mode$}),2&E&&(t.e48("data-host-mode",o.mode),t.eAK("_pseudo",o.pseudo)("_icon-rotated",o.iconRotated)("_focus-visible",o.focusVisible))},inputs:{pseudo:"pseudo",icon:"icon",iconAlign:"iconAlign",iconRotated:"iconRotated",mode:"mode"},exportAs:["tuiLink"],features:[t.M5G([(0,a.NK)(h),s.MF,s.UF,_.Ir])],attrs:M,ngContentSelectors:D,decls:4,vars:2,consts:[["class","t-icon t-icon_left",3,"src",4,"ngIf"],[1,"t-content"],["class","t-icon t-icon_right",3,"src",4,"ngIf"],[1,"t-icon","t-icon_left",3,"src"],[1,"t-icon","t-icon_right",3,"src"]],template:function(E,o){1&E&&(t.kPM(),t.yuY(0,i,1,1,"tui-svg",0),t.I0R(1,"span",1),t._Xx(2),t.C$Y(),t.yuY(3,P,1,1,"tui-svg",2)),2&E&&(t.E7m("ngIf",o.iconAlignLeft),t.yG2(3),t.E7m("ngIf",o.iconAlignRight))},dependencies:[O.Wu,m.u_],styles:["[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;text-decoration:none;transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;color:var(--tui-link);text-align:left;text-transform:inherit;font-weight:inherit;cursor:pointer;outline:none}[_nghost-%COMP%]:hover{color:var(--tui-link-hover)}[_nghost-%COMP%]:disabled{opacity:var(--tui-disabled-opacity);cursor:default}[data-mode=onLight][_nghost-%COMP%]{color:var(--tui-text-02)}[data-mode=onLight][_nghost-%COMP%]:hover, [data-mode=onLight]._active[_nghost-%COMP%]{color:var(--tui-text-01)}[data-mode=onLight]._pseudo[_nghost-%COMP%]{color:var(--tui-text-01)}[data-mode=onLight]._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{-webkit-text-decoration-color:rgba(0,0,0,.48);text-decoration-color:#0000007a}[data-mode=onLight]._pseudo[_nghost-%COMP%]:hover, [data-mode=onLight]._pseudo._active[_nghost-%COMP%]{color:var(--tui-text-03)}[data-mode=onLight][data-host-mode=negative][_nghost-%COMP%]{color:var(--tui-negative-night)}[data-mode=onLight][data-host-mode=negative][_nghost-%COMP%]:hover, [data-mode=onLight][data-host-mode=negative][_nghost-%COMP%]:active, [data-mode=onLight][data-host-mode=negative]._active[_nghost-%COMP%]{color:var(--tui-negative-night-hover)}[data-mode=onDark][_nghost-%COMP%]{color:var(--tui-text-03-night)}[data-mode=onDark][_nghost-%COMP%]:hover, [data-mode=onDark][_nghost-%COMP%]:active, [data-mode=onDark]._active[_nghost-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onDark]._pseudo[_nghost-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onDark]._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{-webkit-text-decoration-color:rgba(255,255,255,.48);text-decoration-color:#ffffff7a}[data-mode=onDark]._pseudo[_nghost-%COMP%]:hover, [data-mode=onDark]._pseudo[_nghost-%COMP%]:active, [data-mode=onDark]._pseudo._active[_nghost-%COMP%]{color:var(--tui-text-03-night)}[data-mode=onDark][data-host-mode=positive][_nghost-%COMP%]{color:var(--tui-positive-night)}[data-mode=onDark][data-host-mode=positive][_nghost-%COMP%]:hover, [data-mode=onDark][data-host-mode=positive][_nghost-%COMP%]:active, [data-mode=onDark][data-host-mode=positive]._active[_nghost-%COMP%]{color:var(--tui-positive-night-hover)}[data-host-mode=negative][_nghost-%COMP%]{color:var(--tui-negative)}[data-host-mode=negative][_nghost-%COMP%]:hover{color:var(--tui-negative-hover)}[data-host-mode=negative]._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{-webkit-text-decoration-color:rgba(222,76,30,.48);text-decoration-color:#de4c1e7a}[data-host-mode=positive][_nghost-%COMP%]{color:var(--tui-positive)}[data-host-mode=positive][_nghost-%COMP%]:hover{color:var(--tui-positive-hover)}[data-host-mode=positive]._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{-webkit-text-decoration-color:rgba(58,169,129,.48);text-decoration-color:#3aa9817a}._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-selection)}[data-mode=onLight]._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-clear);color:var(--tui-text-01)}[data-mode=onDark]._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-clear-inverse);color:var(--tui-text-01-night)}[data-host-mode=positive]._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-success-bg)}[data-host-mode=negative]._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-error-bg)}._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding-bottom:.15em;-webkit-text-decoration:underline dashed rgba(51,111,238,.48);text-decoration:underline dashed rgba(51,111,238,.48);text-underline-offset:.2em;text-decoration-thickness:.7px}.t-icon[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;width:var(--tui-link-icon-size, 1.5rem);height:var(--tui-link-icon-size, 1.5rem);margin-top:-.125rem}.t-icon_left[_ngcontent-%COMP%]{margin-right:.25rem}.t-icon_right[_ngcontent-%COMP%]{margin-left:.25rem}._icon-rotated[_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}"],changeDetection:0}),h})(),A=(()=>{class h{}return h.\u0275fac=function(E){return new(E||h)},h.\u0275mod=t.a4G({type:h}),h.\u0275inj=t.s3X({imports:[[m.MD,O.Yt]]}),h})()}}]);