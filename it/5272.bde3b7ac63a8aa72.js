"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[5272],{3516:(L,g,e)=>{e.r(g),e.d(g,{LinkCategoryModule:()=>s});var n=e(2992),M=e(7552),t=e(4496),O=e(3480),T=e(1712),_=e(6504),d=e(3616),u=e(4704),f=e(4e3),D=e(8824),R=e(1128),v=e(8256),m=e(6524),p=e(8212),I=e(4436),P=e(1512),y=e(9088);function G(i,c){if(1&i&&(t.I0R(0,"p"),t.OEk(1," La categoria attuale \xe8 "),t.I0R(2,"b"),t.OEk(3),t.C$Y()()),2&i){const a=t.GaO(2);let l;t.yG2(3),t.cNF(null==(l=a.parent())?null:l.name)}}function K(i,c){if(1&i&&(t.I0R(0,"p"),t.aS0(1,10),t.C$Y(),t.yuY(2,G,4,1,"p"),t.I0R(3,"p"),t.aS0(4,11),t.C$Y()),2&i){const a=t.GaO();t.yG2(2),t.C0Y(2,a.parent()?2:-1)}}const r=i=>({except:i});function E(i,c){if(1&i){const a=t.KQA();t.I0R(0,"form",12),t.qCj("ngSubmit",function(){t.usT(a);const C=t.GaO();return t.CGJ(C.submit())}),t.I0R(1,"app-menu-category-select",13),t.SAx(2),t.aS0(3,14),t.k70(),t.C$Y(),t.I0R(4,"div",0)(5,"button",15),t.SAx(6),t.aS0(7,16),t.k70(),t.C$Y(),t.I0R(8,"button",17),t.qCj("click",function(){t.usT(a);const C=t.GaO();return t.CGJ(C.cancel())}),t.SAx(9),t.aS0(10,18),t.k70(),t.C$Y()()()}if(2&i){const a=t.GaO();t.E7m("formGroup",a.form),t.yG2(),t.E7m("filters",t.S45(3,r,a.parentId))("formControlName","category")}}let o=(()=>{class i{constructor(){this.service=(0,t.uUt)(T.S),this.destroy$=(0,t.uUt)(O.UF),this.route=(0,t.uUt)(n.gV),this.router=(0,t.uUt)(n.E5),this.notifications=(0,t.uUt)(R.E),this.loading=(0,t.OCB)(!1),this.parent=(0,t.OCB)(null),this.parentId=null,this.form=new _.WC({category:new _.Ku(null)})}ngOnInit(){this.route.parent?.parent?.params.pipe((0,d.a)(this.destroy$),(0,u.k)(a=>a.category_id),(0,f.a)()).subscribe({next:a=>{this.parentId=a,this.loadParent()}})}submit(){const a=this.parentId,l=this.form.value?.category?.id;a&&l?this.form.invalid||(this.loading.set(!0),this.service.addCategory(a,l).pipe((0,d.a)(this.destroy$),(0,D.U)(()=>this.loading.set(!1))).subscribe({next:()=>{this.navigateBack(),this.notifications.fireSnackBar("Categoria duplicata e associata.","Fatto",{duration:3e3})},error:C=>{this.notifications.error((0,v.mk)(C)||"Qualcosa \xE8 andato storto nell'associazione tra i record.")}})):console.error("something invalid.",{parentId:a,childId:l})}cancel(){confirm("Sei sicuro di voler annullare questa azione?")&&this.navigateBack()}navigateBack(){const a=this.route.snapshot.queryParams.afterUrl;a?this.router.navigateByUrl(a):this.router.navigate([".."],{relativeTo:this.route})}loadParent(){this.parent.set(null),this.parentId&&this.service.show(this.parentId).pipe((0,d.a)(this.destroy$)).subscribe({next:a=>{this.parent.set(a)},error:a=>{this.notifications.error((0,v.mk)(a)||"Qualcosa \xE8 andato storto nel caricamento della categoria padre.")}})}static#t=this.\u0275fac=function(l){return new(l||i)};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["app-link-category"]],standalone:!0,features:[t.M5G([O.UF]),t.UHJ],decls:15,vars:7,consts:()=>{let a,l,C,S,N,A,U;return a="Associa categoria esistente",l="La categoria selezionata verr\xE0 aggiunta alla categoria",C="La categoria che sceglierai verr\xE0 duplicata con tutti gli eventuali piatti e categorie che contiene. L'elemento appena creato verr\xE0 poi associato alla categoria attuale. ",S=" Ci\xF2 significa che le eventuali modifiche alla categoria appena creata non avranno effetto sulla categoria originale e viceversa. ",N="Categoria da associare",A="Conferma",U="Annulla",[[1,"flex","items-center"],[1,"me-2"],a,[3,"content"],[1,"mb-3"],[1,"me-2","text-slate-400"],l,["tuiLink","",3,"routerLink"],["helpMsg",""],[3,"formGroup"],C,S,[3,"formGroup","ngSubmit"],[1,"block","mb-3",3,"filters","formControlName"],N,["tuiButton","","type","submit","size","l","appearance","primary",1,"me-2"],A,["tuiButton","","type","button","size","l","appearance","outline",3,"click"],U]},template:function(l,C){if(1&l&&(t.I0R(0,"span",0)(1,"h1",1),t.SAx(2),t.aS0(3,2),t.k70(),t.C$Y(),t.wR5(4,"tui-tooltip",3),t.C$Y(),t.I0R(5,"div",4)(6,"span",5),t.SAx(7),t.aS0(8,6),t.k70(),t.C$Y(),t.I0R(9,"a",7),t.wVc(10,"urlTo"),t.OEk(11),t.C$Y()(),t.yuY(12,K,5,1,"ng-template",null,8,t.gJz)(14,E,11,5,"form",9)),2&l){const S=t.Gew(13);let N,A;t.yG2(4),t.E7m("content",S),t.yG2(5),t.E7m("routerLink",t.g7$(10,4,null==(N=C.parent())?null:N.id,"menuCategory.show")),t.yG2(2),t.cNF(null==(A=C.parent())?null:A.name),t.yG2(3),t.C0Y(14,C.parentId?14:-1)}},dependencies:[m.a,_.sl,_.sz,_.ue,_.u,_.uW,_.Wo,p.CI,p.Kw,I.a,I.i,P.w,P.C,n.ER,y.S]})}return i})(),s=(()=>{class i{static#t=this.\u0275fac=function(l){return new(l||i)};static#e=this.\u0275mod=t.a4G({type:i});static#n=this.\u0275inj=t.s3X({imports:[n.qQ.forChild([(0,M.VV)(o,{path:"",closeable:!0,dismissible:!1,size:"l"})])]})}return i})()},4736:(L,g,e)=>{e.d(g,{M:()=>O,O:()=>T});var n=e(4496),M=e(5944),t=e(4704);let O=(()=>{class _{constructor(u){this.months$=u}transform({month:u}){return this.months$.pipe((0,t.k)(f=>f[u]))}}return _.\u0275fac=function(u){return new(u||_)(n.GI1(M.GU,16))},_.\u0275pipe=n.UTH({name:"tuiMonth",type:_,pure:!0}),_})(),T=(()=>{class _{}return _.\u0275fac=function(u){return new(u||_)},_.\u0275mod=n.a4G({type:_}),_.\u0275inj=n.s3X({}),_})()},3797:(L,g,e)=>{e.d(g,{CQ:()=>K,Oo:()=>y,cP:()=>G});var n=e(4496),M=e(6504),t=e(3044),O=e(1800),T=e(4164),_=e(4680),d=e(466),u=e(7936),f=e(8048),D=e(4336),R=e(5944),v=e(9371),m=e(796),p=e(1368);const I=["*",[["input"]]],P=["*","input"];let y=(()=>{class r extends O._y{constructor(o,s,i,c){super(o,s,c),this.textfieldSize=i,this.open=!1}get size(){return this.textfieldSize.size}get nativeFocusableElement(){return this.computedDisabled||!this.textfield?null:this.textfield.nativeFocusableElement}get focused(){return(0,T.ER)(this.nativeFocusableElement)||!!this.hostedDropdown&&this.hostedDropdown.focused}get canOpen(){return this.interactive&&!!this.datalist}onValueChange(o){this.value=o,this.open=!0}onActiveZone(o){this.updateFocused(o)}handleOption(o){this.setNativeValue(String(o)),this.focusInput(),this.value=String(o),this.open=!1}getFallbackValue(){return""}focusInput(o=!1){this.nativeFocusableElement&&this.nativeFocusableElement.focus({preventScroll:o})}setNativeValue(o){this.nativeFocusableElement&&(this.nativeFocusableElement.value=o)}}return r.\u0275fac=function(o){return new(o||r)(n.GI1(M.eq,10),n.GI1(n.kD9),n.GI1(f.$K),n.GI1(O.cn,8))},r.\u0275cmp=n.In1({type:r,selectors:[["tui-input"]],contentQueries:function(o,s,i){if(1&o&&n.szK(i,D.Ux,5,n.Yw2),2&o){let c;n.wto(c=n.Gqi())&&(s.datalist=c.first)}},viewQuery:function(o,s){if(1&o&&(n.CC$(d.Qw,5),n.CC$(u.y_,5)),2&o){let i;n.wto(i=n.Gqi())&&(s.hostedDropdown=i.first),n.wto(i=n.Gqi())&&(s.textfield=i.first)}},hostVars:1,hostBindings:function(o,s){2&o&&n.e48("data-size",s.size)},features:[n.M5G([m.g3,(0,_.NK)(r),(0,R.UH)(r),(0,O.q4)(r)],[m.YL]),n.eg9],ngContentSelectors:P,decls:4,vars:11,consts:[[1,"t-hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-input__textfield",1,"t-textfield",3,"disabled","focusable","invalid","nativeId","pseudoFocus","pseudoHover","readOnly","value","valueChange"]],template:function(o,s){1&o&&(n.kPM(I),n.I0R(0,"tui-hosted-dropdown",0),n.iHE("openChange",function(c){return n.kNx(s.open,c)||(s.open=c),c}),n.qCj("tuiActiveZoneChange",function(c){return s.onActiveZone(c)}),n.I0R(1,"tui-primitive-textfield",1),n.qCj("valueChange",function(c){return s.onValueChange(c)}),n._Xx(2),n._Xx(3,1,["ngProjectAs","input",5,["input"]]),n.C$Y()()),2&o&&(n.E7m("canOpen",s.canOpen)("content",s.datalist||""),n.OKB("open",s.open),n.yG2(),n.E7m("disabled",s.computedDisabled)("focusable",s.computedFocusable)("invalid",s.computedInvalid)("nativeId",s.nativeId)("pseudoFocus",s.computedFocused)("pseudoHover",s.pseudoHover)("readOnly",s.readOnly)("value",s.value))},dependencies:[d.Qw,u.y_,t.M,u.KQ],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}"],changeDetection:0}),r})(),G=(()=>{class r extends v.Cm{onValueChange(o){this.host.onValueChange(o)}}return r.\u0275fac=(()=>{let E;return function(s){return(E||(E=n.otF(r)))(s||r)}})(),r.\u0275dir=n.Sc5({type:r,selectors:[["tui-input"]],features:[n.M5G([(0,R.iu)(r)]),n.eg9]}),r})(),K=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=n.a4G({type:r}),r.\u0275inj=n.s3X({imports:[[p.MD,t.L,u.KA,d.GE]]}),r})()},796:(L,g,e)=>{e.d(g,{YL:()=>R,g3:()=>v}),e(4736);var M=e(5193),t=e(5944),_=(e(3012),e(2700),e(528)),u=(e(4704),e(4496)),f=e(6504);const R=(0,M.Sk)({limitWidth:"fixed",align:"right"}),v={provide:t.Y9,deps:[[new u.T7N,new u.Yiy,f.Y6]],useFactory:_.Z}}}]);