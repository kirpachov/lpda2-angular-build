(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[9179],{71560:(R,u,n)=>{"use strict";n.r(u),n.d(u,{EditModule:()=>y});var l=n(31236),g=n(7552),t=n(54496),f=n(94640),d=n(97048),h=n(38256),m=n(48392),E=n(87556),T=n(1128),p=n(83480),c=n(53616),C=n(54704),I=n(66684),M=n(19212),N=n(17368),v=n(68824),S=n(14476),a=n(50248);let $=(()=>{class o{constructor(){this.destroy$=(0,t.uUt)(p.UF),this.service=(0,t.uUt)(E.K),this.notifications=(0,t.uUt)(T.E),this.router=(0,t.uUt)(l.E5),this.route=(0,t.uUt)(l.gV),this._=(0,t.uUt)(S.OY).setTitle(a.$localize`Modifica turni di prenotazioni | La Porta D'Acqua`),this.loading=(0,t.OCB)(!0),this.item=(0,t.OCB)(null)}ngOnInit(){this.route.params.pipe((0,c.a)(this.destroy$),(0,C.k)(i=>Number(i.id)),(0,I.I)(i=>"number"==typeof i&&i>0&&!isNaN(i)),(0,M.y)(()=>this.loading.set(!0)),(0,N.G)(i=>this.service.show(i).pipe((0,c.a)(this.destroy$),(0,v.U)(()=>this.loading.set(!1))))).subscribe({next:i=>this.item.set(i),error:i=>this.notifications.error(i instanceof d.gj?(0,h.mk)(i):m.a)})}update(i){if(this.loading())return;const e=this.item()?.id;e?(this.loading.set(!0),this.service.update(e,i).pipe((0,c.a)(this.destroy$),(0,v.U)(()=>this.loading.set(!1))).subscribe({next:()=>{this.notifications.fireSnackBar(a.$localize`Modificato.`),this.close()},error:s=>{this.form&&s instanceof d.gj?this.form.manageHttpError(s):(console.error(s),this.notifications.error(s instanceof d.gj?(0,h.mk)(s):m.a))}})):console.warn("no id")}cancel(){confirm(a.$localize`Sei sicuro di voler annullare?`)&&this.close()}close(){this.router.navigate(["../"],{relativeTo:this.route})}static#t=this.\u0275fac=function(e){return new(e||o)};static#i=this.\u0275cmp=t.In1({type:o,selectors:[["app-edit"]],viewQuery:function(e,s){if(1&e&&t.CC$(f.q,5),2&e){let r;t.wto(r=t.Gqi())&&(s.form=r.first)}},standalone:!0,features:[t.M5G([p.UF]),t.UHJ],decls:3,vars:3,consts:()=>{let i;return i=a.$localize`Modifica turno di prenotazione`,[i,[3,"loading","turn","context","submitted","cancelled"]]},template:function(e,s){1&e&&(t.I0R(0,"h1"),t.aS0(1,0),t.C$Y(),t.I0R(2,"app-reservation-turn-form",1),t.qCj("submitted",function(U){return s.update(U)})("cancelled",function(){return s.cancel()}),t.C$Y()),2&e&&(t.yG2(2),t.E7m("loading",s.loading())("turn",s.item())("context","update"))},dependencies:[f.q],encapsulation:2,changeDetection:0})}return o})(),y=(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#i=this.\u0275mod=t.a4G({type:o});static#n=this.\u0275inj=t.s3X({imports:[l.qQ.forChild([(0,g.VV)($,{path:"",closeable:!0,dismissible:!0,size:"l"})])]})}return o})()},50248:()=>{}}]);