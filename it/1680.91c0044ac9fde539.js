"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[1680],{908:(M,I,n)=>{n.d(I,{Q:()=>c});var e=n(2992),C=n(1512),r=n(4496);const l=()=>["show"],_=u=>({contacts:u}),i=u=>({outlets:u}),a=u=>["",u],t=["*"];let c=(()=>{class u{static#e=this.\u0275fac=function(d){return new(d||u)};static#t=this.\u0275cmp=r.In1({type:u,selectors:[["app-contact-us"]],standalone:!0,features:[r.UHJ],ngContentSelectors:t,decls:2,vars:8,consts:[["tuiLink","",1,"ms-1",3,"routerLink"]],template:function(d,o){1&d&&(r.kPM(),r.I0R(0,"a",0),r._Xx(1),r.C$Y()),2&d&&r.E7m("routerLink",r.S45(6,a,r.S45(4,i,r.S45(2,_,r.q4q(1,l)))))},dependencies:[e.ER,C.w,C.C]})}return u})()},7296:(M,I,n)=>{n.d(I,{K:()=>_});var e=n(4496),C=n(1676),r=n(9880),l=n(1560);let _=(()=>{class i{constructor(){this.service=(0,e.uUt)(C.s),this.location$=(0,e.OCB)(null),this.message=(0,e.S6b)(()=>{const t=this.location$(),c=this.service.messages();return null===t||null===c?null:c[t]})}set location(t){this.location$.set(t)}get location(){return this.location$()}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275cmp=e.In1({type:i,selectors:[["app-public-message"]],inputs:{location:"location"},standalone:!0,features:[e.UHJ],decls:8,vars:2,consts:[[3,"expanded"],[1,"text-2xl","flex","items-center","justify-center","p-2","text-primary"],[1,"mx-3"]],template:function(c,u){1&c&&(e.I0R(0,"tui-expand",0)(1,"div",1)(2,"mat-icon"),e.OEk(3,"priority_high"),e.C$Y(),e.I0R(4,"div",2),e.OEk(5),e.C$Y(),e.I0R(6,"mat-icon"),e.OEk(7,"priority_high"),e.C$Y()()()),2&c&&(e.E7m("expanded",null!=u.message()),e.yG2(5),e.cNF(u.message()))},dependencies:[r.kh,r.st,l.qL],styles:["[_nghost-%COMP%]{background-color:var(--fourth-color);display:block}"]})}return i})()},1680:(M,I,n)=>{n.d(I,{I:()=>Y});var e=n(4496),C=n(7296),r=n(7048),l=n(8256),_=n(8392),i=n(4820),a=n(6616),t=n(1128),c=n(3480),u=n(3616),f=n(8824),O=n(1368),d=n(2992),o=n(8212),R=n(1512),g=n(7692),P=n(908);function x(s,N){1&s&&(e.I0R(0,"p",0),e.aS0(1,9),e.C$Y())}function B(s,N){if(1&s&&(e.I0R(0,"p",0),e.aS0(1,10),e.C$Y(),e.I0R(2,"div",11)(3,"a",12),e.SAx(4),e.aS0(5,13),e.k70(),e.C$Y()()),2&s){const E=e.GaO(4);e.yG2(3),e._6D("href",E.reservation.payment.hpp_url,e.K6U)}}function D(s,N){if(1&s&&e.yuY(0,x,2,0,"p",8)(1,B,6,1),2&s){const E=e.GaO(3);e.C0Y(0,E.isFreshReservation()?0:1)}}function F(s,N){1&s&&(e.I0R(0,"p",0),e.aS0(1,14),e.C$Y())}function b(s,N){if(1&s&&e.yuY(0,D,2,1)(1,F,2,0),2&s){const E=e.GaO(2);let m;e.C0Y(0,"todo"===(m=E.reservation.payment.status)?0:"paid"===m?1:-1)}}function V(s,N){1&s&&(e.I0R(0,"p",0),e.aS0(1,15),e.C$Y())}function K(s,N){1&s&&(e.SAx(0),e.aS0(1,16),e.k70())}function G(s,N){1&s&&e.wR5(0,"tui-loader",19)}function z(s,N){1&s&&(e.SAx(0),e.aS0(1,20),e.k70())}function W(s,N){if(1&s){const E=e.KQA();e.SAx(0),e.aS0(1,17),e.k70(),e.I0R(2,"span",18),e.qCj("click",function(){e.usT(E);const p=e.GaO(2);return e.CGJ(p.resendConfirmation())}),e.yuY(3,G,1,0,"tui-loader",19)(4,z,2,0),e.C$Y()}if(2&s){const E=e.GaO(2);e.yG2(3),e.C0Y(3,E.resendingConfirmation()?3:4)}}function j(s,N){if(1&s&&(e.yuY(0,b,2,1)(1,V,2,0),e.I0R(2,"p",0),e.yuY(3,K,2,0,"ng-container")(4,W,5,1),e.C$Y(),e.I0R(5,"p",0),e.SAx(6),e.aS0(7,1),e.k70(),e.OEk(8),e.wVc(9,"date"),e.wVc(10,"date"),e.C$Y(),e.wR5(11,"app-public-message",2),e.I0R(12,"div",3),e.SAx(13),e.aS0(14,4),e.k70(),e.I0R(15,"app-contact-us"),e.OEk(16,"Contattaci"),e.C$Y(),e.I0R(17,"span",5),e.OEk(18,"-"),e.C$Y(),e.I0R(19,"a",6),e.SAx(20),e.aS0(21,7),e.k70(),e.C$Y()()),2&s){const E=e.GaO();e.C0Y(0,E.reservation.payment?0:1),e.yG2(3),e.C0Y(3,E.isFreshReservation()?3:4),e.yG2(5),e.CAO(" ",e.g7$(9,6,E.reservation.datetime,"EEEE d MMMM y")," ",e.g7$(10,9,E.reservation.datetime,"HH:mm"),". "),e.yG2(3),e.E7m("location","existing-reservation-form"),e.yG2(8),e.CI5("routerLink","/cr/",E.reservation.secret,"")}}let Y=(()=>{class s{constructor(){this.notifications=(0,e.uUt)(t.E),this.reservations=(0,e.uUt)(i.G),this.destroy$=(0,e.uUt)(c.UF),this.localStorage=(0,e.uUt)(a.s),this.resendingConfirmation=(0,e.OCB)(!1)}isFreshReservation(){return this.reservation&&this.reservation.created_at?this.reservation.created_at.getTime()-Date.now()<3e5:(console.warn("isFreshReservation","missing reservation or created_at",this.reservation),!1)}resendConfirmation(){const E=this.reservation?.secret;E&&(this.resendingConfirmation.set(!0),this.reservations.resendConfirmation(E).pipe((0,u.a)(this.destroy$),(0,f.U)(()=>this.resendingConfirmation.set(!1))).subscribe({next:()=>{this.notifications.fireSnackBar("L'email arriver\xE0 a breve.")},error:m=>{this.notifications.error(m instanceof r.gj?(0,l.mk)(m):_.a)}}))}static#e=this.\u0275fac=function(m){return new(m||s)};static#t=this.\u0275cmp=e.In1({type:s,selectors:[["app-public-reservation-confirmation"]],inputs:{reservation:"reservation"},standalone:!0,features:[e.UHJ],decls:1,vars:1,consts:()=>{let E,m,p,h,v,S,A,L,$,U,y;return E="La prenotazione \xE8 fissata per ",m="Dimenticato qualcosa?",p="Cancella prenotazione",h="Il pagamento di conferma della prenotazione non risulta essere andato a buon fine, ma \xE8 possibile che sia necessario aspettare qualche minuto. Riprova pi\xF9 tardi.",v="Il pagamento di conferma della prenotazione non risulta essere andato a buon fine.",S="Esegui pagamento",A="Il pagamento della prenotazione \xE8 andato a buon fine e la prenotazione \xE8 confermata.",L="La tua prenotazione \xE8 stata creata.",$="Riceverai a breve un'email di conferma.",U="Dovresti aver ricevuto una mail di conferma. Non \xE8 arrivata?",y="Rimanda email",[[1,"text-xl","text-center","mb-3"],E,[1,"block","mb-3","text-center","text-xl",3,"location"],[1,"flex","items-center","justify-center","mb-3","text-xl"],m,[1,"mx-2"],["tuiLink","",3,"routerLink"],p,["class","text-xl text-center mb-3"],h,v,[1,"flex","items-center","justify-center","mb-3"],["size","m","tuiButton","","appearance","custom",1,"btn-primary","me-2",3,"href"],S,A,L,$,U,["type","button","role","button","size","m",1,"cursor-pointer","inline-flex","items-center","ms-2","underline",3,"click"],["size","xs"],y]},template:function(m,p){1&m&&e.yuY(0,j,22,12),2&m&&e.C0Y(0,p.reservation?0:-1)},dependencies:[O.y,o.CI,o.Kw,C.K,d.ER,R.w,R.C,P.Q,g.Sk,g.Cb],changeDetection:0})}return s})()},8256:(M,I,n)=>{function e(_,i){return _.error?.message?_.error.message:500==_.status?`${_.error.error} ${_.error.exception}`.replace(/\</gm,"").replace(/\>+/gm,""):504==_.status?"Server irraggiungibile, controlla la tua connessione e riprova.":C(function l(_){if("object"==typeof _.error&&"object"==typeof _.error.details&&Array.isArray(_.error.details)&&_.error.details.length>0){const i=_.error.details.filter(a=>"object"==typeof a&&null!=a&&a instanceof Object&&Object.keys(a).length>0).filter(a=>"string"==typeof a.attribute&&a.attribute.length>0&&("string"==typeof a.message&&a.message.length>0||Array.isArray(a.message)&&a.message.length>0));if(i.length>0)return i}return[]}(_),i)}function C(_,i){if(0==_.length)return null;const a=i?.joinChar??", ",t=_.map(c=>`${c.attribute} ${c.message}`);return t.length?function r(_){return[...new Set(_)]}(t).join(a):null}n.d(I,{Yj:()=>C,mk:()=>e})},9772:(M,I,n)=>{n.d(I,{CU:()=>C,ye:()=>r});const e=(new Date).getTimezoneOffset()/60;function C(l,_=e){return"string"==typeof l&&l.length>0&&l.match(/\d{2}:\d{2}/)?`${Number(l.split(":")[0])-_}:${l.split(":")[1]}`:(console.error("Invalid string provided to strTimeTimezone",{string:l}),"")}function r(l,_=e){return C(l,-1*_)}},6360:(M,I,n)=>{n.d(I,{e:()=>l});var e=n(8400),C=n(9772);class r extends e.w{constructor(i){super(i),this.title=i.title,this.status=i.status,this.active_from=i.active_from?new Date(i.active_from):void 0,this.active_to=i.active_to?new Date(i.active_to):void 0,this.preorder_type=i.preorder_type,this.payment_value=i.payment_value,this.message=i.message}}class l extends e.w{constructor(i){super(i),this.name=i.name,this.weekday=i.weekday,this.step=i.step,this.valid_times=i.valid_times,this.starts_at=i.starts_at?(0,C.CU)(i.starts_at):void 0,this.ends_at=i.ends_at?(0,C.CU)(i.ends_at):void 0,this.preorder_reservation_group=i.preorder_reservation_group?new r(i.preorder_reservation_group):void 0}}},5180:(M,I,n)=>{n.d(I,{C:()=>i});var e=n(8400);class C extends e.w{constructor(t){super(t),this.image_pixel_id=t.image_pixel_id,this.event_data=t.event_data,this.event_time=t.event_time?new Date(t.event_time):void 0}}class r extends e.w{constructor(t){super(t),this.image_id=t.image_id,this.delivered_email_id=t.delivered_email_id,this.record_type=t.record_type,this.record_id=t.record_id,this.event_type=t.event_type,this.secret=t.secret,this.events=t.events?t.events.map(c=>new C(c)):[]}}class l extends e.w{constructor(t){super(t),this.record_id=t.record_id,this.record_type=t.record_type,this.text=t.text,this.html=t.html,this.subject=t.subject,this.headers=t.headers,this.raw=t.raw,this.image_pixels=t.image_pixels?t.image_pixels.map(c=>new r(c)):[]}}class _ extends e.w{constructor(t){super(t),this.hpp_url=t.hpp_url,this.value=t.value,this.status=t.status,this.reservation_id=t.reservation_id,this.preorder_type=t.preorder_type,this.other=t.other}}class i extends e.w{constructor(t){super(t),this.fullname=t.fullname,this.datetime=t.datetime?new Date(t.datetime):void 0,this.status=t.status,this.secret=t.secret,this.adults=t.adults,this.children=t.children,this.table=t.table,this.notes=t.notes,this.email=t.email,this.phone=t.phone,this.payment=t.payment?new _(t.payment):void 0,this.delivered_emails=t.delivered_emails?t.delivered_emails.map(c=>new l(c)):[]}}},1676:(M,I,n)=>{n.d(I,{s:()=>f});var e=n(4496),C=n(6772),r=n(1128),l=n(7048),_=n(8256),i=n(8392),a=n(6700),t=n(4704),c=n(9212);function u(O){if(null==O)return null;if("object"==typeof O)return O;if(!("string"==typeof O&&O.length>0))return null;try{return JSON.parse(O)}catch{}return null}let f=(()=>{class O extends C.A{constructor(){super("public_data"),this.notifications=(0,e.uUt)(r.E),this.data$=new a.g(null),this.messages=(0,e.OCB)(null),this.messages$=this.data$.pipe((0,t.k)(o=>"object"==typeof o&&null!==o?u(o.public_messages):null),(0,c.y)(o=>this.messages.set(o))),this.contacts=(0,e.OCB)(null),this.contacts$=this.data$.pipe((0,t.k)(o=>"object"==typeof o&&null!==o?u(o.settings.email_contacts):null),(0,c.y)(o=>this.contacts.set(o))),this.load(),[this.contacts$,this.messages$].forEach(o=>{o.subscribe({error:R=>{console.warn("unexpected error",R)}})})}load(){this.http.get("").subscribe({next:o=>{this.data$.next(o)},error:o=>{this.notifications.error(o instanceof l.gj?(0,_.mk)(o):i.a)}})}static#e=this.\u0275fac=function(R){return new(R||O)};static#t=this.\u0275prov=e.wxM({token:O,factory:O.\u0275fac,providedIn:"root"})}return O})()},4820:(M,I,n)=>{n.d(I,{G:()=>f});var e=n(4496),C=n(5180),r=n(6700),l=n(4704),_=n(9212),i=n(9144),a=n(6772),t=n(1676),c=n(6360),u=n(400);let f=(()=>{class O extends a.A{constructor(){super("reservations"),this.publicData=(0,e.uUt)(t.s),this.created=new r.g(null),this.publicData.data$.subscribe({next:o=>{this.created.next(o?.reservation?new C.C(o.reservation):null)}})}getValidTimes(o){let R="";return o instanceof u.EK&&(R=`${o.year}-${(o.month+1)%13}-${o.day}`),this.get("valid_times",{params:{date:R}}).pipe((0,l.k)(g=>g.map(P=>new c.e(P))))}load(o){return this.get(`${o}`).pipe((0,l.k)(R=>new C.C(R.item)))}create(o){return this.post("",o).pipe((0,l.k)(R=>new C.C(R.item)),(0,_.y)(R=>this.created.next(R)),(0,i.a)(R=>{throw this.created.next(null),R}))}resendConfirmation(o){return this.post(`${o}/resend_confirmation_email`,{})}cancel(o){return this.post(`${o}/cancel`,{})}static#e=this.\u0275fac=function(R){return new(R||O)};static#t=this.\u0275prov=e.wxM({token:O,factory:O.\u0275fac,providedIn:"root"})}return O})()}}]);