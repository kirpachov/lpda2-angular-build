"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[5040],{9184:(O,h,o)=>{o.r(h),o.d(h,{NewUserModule:()=>s});var e=o(4496),r=o(3480),p=o(5e3),m=o(6504),i=o(3797),t=o(6528),n=o(9956),u=o(8048),c=o(8212),f=o(3732),v=o(2992),M=o(3616),T=o(8824),C=o(9938),I=o(1128),R=o(8256),N=o(8392),D=o(7936);let _=(()=>{class a{constructor(){this.destroy$=(0,e.uUt)(r.UF),this.notifications=(0,e.uUt)(I.E),this.service=(0,e.uUt)(f.u),this.route=(0,e.uUt)(v.gV),this.router=(0,e.uUt)(v.E5),this.form=new m.WC({fullname:new m.Ku(""),email:new m.Ku("",[m.AQ.required,m.AQ.email]),can_root:new m.Ku(!1)}),this.submitting=(0,e.OCB)(!1),this.submitted=!1,this.e=this.errorsFor}submit(){this.submitted=!0,!this.form.invalid&&(this.submitting.set(!0),this.service.create(this.formVal()).pipe((0,M.a)(this.destroy$),(0,T.U)(()=>this.submitting.set(!1))).subscribe({next:E=>{this.notifications.fireSnackBar("Utente creato."),this.router.navigate([".."],{relativeTo:this.route})},error:E=>{C.y.assignErrorsToForm(this.form,E),this.notifications.error((0,R.mk)(E)||N.a)}}))}cancel(){const E=this.form.dirty||this.form.touched;(!E||E&&confirm("Sei sicuro di voler annullare?"))&&this.router.navigate([".."],{relativeTo:this.route})}errorsFor(E){const g=this.form.get(E);return g&&(g.touched||g.dirty||this.submitted)?g.errors:null}formVal(){return{...this.form.value}}static#e=this.\u0275fac=function(g){return new(g||a)};static#t=this.\u0275cmp=e.In1({type:a,selectors:[["app-new-user"]],standalone:!0,features:[e.M5G([r.UF]),e.UHJ],decls:29,vars:5,consts:()=>{let E,g,S,A,y,$,U;return E="Nuovo utente",g="Attenzione. L'utente che si sta per creare potr\xE0 accedere alla parte amministrativa e apportare modifiche ad alcune parti sensibili dell'applicazione.",S="Nome e cognome",A="Email",y="Ha diritti di amministratore?",$="Conferma",U="Annulla",[E,g,[3,"formGroup","ngSubmit"],[1,"mb-3"],["tuiTextfieldSize","l","formControlName","fullname",3,"tuiAutoFocus"],S,["tuiTextfield",""],[3,"errors"],["tuiTextfieldSize","l","formControlName","email"],A,["contentAlign","right","formControlName","can_root","size","l"],y,[1,"flex","items-center"],["type","submit","size","l","tuiButton","","appearance","primary",1,"me-2"],$,["type","button","size","l","tuiButton","","appearance","outline",3,"click"],U]},template:function(g,S){1&g&&(e.I0R(0,"h1"),e.aS0(1,0),e.C$Y(),e.I0R(2,"p"),e.aS0(3,1),e.C$Y(),e.I0R(4,"form",2),e.qCj("ngSubmit",function(){return S.submit()}),e.I0R(5,"div",3)(6,"tui-input",4),e.SAx(7),e.aS0(8,5),e.k70(),e.wR5(9,"input",6),e.C$Y(),e.wR5(10,"app-errors",7),e.C$Y(),e.I0R(11,"div",3)(12,"tui-input",8),e.SAx(13),e.aS0(14,9),e.k70(),e.wR5(15,"input",6),e.C$Y(),e.wR5(16,"app-errors",7),e.C$Y(),e.I0R(17,"div",3)(18,"tui-checkbox-block",10),e.SAx(19),e.aS0(20,11),e.k70(),e.C$Y(),e.wR5(21,"app-errors",7),e.C$Y(),e.I0R(22,"div",12)(23,"button",13),e.SAx(24),e.aS0(25,14),e.k70(),e.C$Y(),e.I0R(26,"button",15),e.qCj("click",function(){return S.cancel()}),e.SAx(27),e.aS0(28,16),e.k70(),e.C$Y()()()),2&g&&(e.yG2(4),e.E7m("formGroup",S.form),e.yG2(2),e.E7m("tuiAutoFocus",!0),e.yG2(4),e.E7m("errors",S.e("fullname")),e.yG2(6),e.E7m("errors",S.e("email")),e.yG2(5),e.E7m("errors",S.e("can_root")))},dependencies:[m.sl,m.sz,m.ue,m.u,m.uW,m.Wo,i.CQ,i.Oo,i.cP,D.b,n.g,u.aS,u.rD,c.CI,c.Kw,t.i,t.I,p.m6,p.gJ],encapsulation:2,changeDetection:0})}return a})();var l=o(7552);let s=(()=>{class a{static#e=this.\u0275fac=function(g){return new(g||a)};static#t=this.\u0275mod=e.a4G({type:a});static#o=this.\u0275inj=e.s3X({imports:[v.qQ.forChild([(0,l.VV)(_,{path:"",closeable:!0,dismissible:!1,size:"l"})])]})}return a})()},9956:(O,h,o)=>{o.d(h,{g:()=>D});var e=o(1368),r=o(4496),p=o(9938),m=o(2528),i=o(7308),t=o(7012),n=o(3972),u=o(5944),c=o(1040);function f(_,l){if(1&_&&(r.SAx(0),r.OEk(1),r.k70()),2&_){const s=l.polymorpheusOutlet;r.yG2(),r.oRS(" ",s," ")}}const v=()=>({});function M(_,l){if(1&_&&(r.I0R(0,"div",1),r.wVc(1,"async"),r.yuY(2,f,2,1,"ng-container",2),r.wVc(3,"async"),r.C$Y()),2&_){const s=r.GaO();r.eAK("t-message-text_light","onDark"===r.kDX(1,6,s.mode$)),r.E7m("@tuiFadeIn",s.animation)("@tuiHeightCollapse",s.animation),r.yG2(2),r.E7m("polymorpheusOutlet",s.error.message||r.kDX(3,8,s.defaultErrorMessage$))("polymorpheusOutletContext",s.error.context||r.q4q(10,v))}}let T=(()=>{class _{constructor(s,a,d){this.animation=s,this.mode$=a,this.defaultErrorMessage$=d,this.error=null,this.visible=!0}set errorSetter(s){this.error=(0,m.gT)(s)?new i.E(s):s}onAnimation(s){this.visible=s}}return _.\u0275fac=function(s){return new(s||_)(r.GI1(u.kp),r.GI1(u.Yx),r.GI1(u.cX))},_.\u0275cmp=r.In1({type:_,selectors:[["tui-error"]],hostBindings:function(s,a){1&s&&r.qCj("animationcancel.self",function(){return a.onAnimation(!1)})("animationstart.self",function(){return a.onAnimation(!0)})},inputs:{errorSetter:[r.Wk5.None,"error","errorSetter"]},features:[r.M5G([n.Ir])],decls:1,vars:1,consts:[["automation-id","tui-error__text","class","t-message-text",3,"t-message-text_light",4,"ngIf"],["automation-id","tui-error__text",1,"t-message-text"],[4,"polymorpheusOutlet","polymorpheusOutletContext"]],template:function(s,a){1&s&&r.yuY(0,M,4,11,"div",0),2&s&&r.E7m("ngIf",a.error&&a.visible)},dependencies:[e.u_,c.Af,e.a],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);display:block;color:var(--tui-negative);word-wrap:break-word;animation:tuiPresent 1s infinite}.t-message-text[_ngcontent-%COMP%]{margin-top:.25rem;white-space:pre-line}.t-message-text_light[_ngcontent-%COMP%]{color:var(--tui-negative-night)}"],data:{animation:[t.iY,t.K2]},changeDetection:0}),_})(),C=(()=>{class _{}return _.\u0275fac=function(s){return new(s||_)},_.\u0275mod=r.a4G({type:_}),_.\u0275inj=r.s3X({imports:[[e.MD,c.Ux]]}),_})();function I(_,l){1&_&&r.wR5(0,"tui-error",0),2&_&&r.E7m("error",l.$implicit)}function R(_,l){1&_&&r.C_f(0)}function N(_,l){1&_&&r.yuY(0,R,1,0,"ng-container",1),2&_&&r.E7m("ngTemplateOutlet",l.$implicit)}let D=(()=>{class _{constructor(){this._errors=null}get errors(){return this._errors}set errors(s){this._errors=s}allErrors(){return this.errors||null}errorsToTemplates(){return p.y.formatErrors(this.errors||null).filter(s=>s&&s instanceof r.Yw2)}errorsToStr(){return p.y.formatErrors(this.errors||null).filter(s=>s&&"string"==typeof s)}static#e=this.\u0275fac=function(a){return new(a||_)};static#t=this.\u0275cmp=r.In1({type:_,selectors:[["app-errors"]],inputs:{errors:"errors"},standalone:!0,features:[r.UHJ],decls:4,vars:0,consts:[[3,"error"],[4,"ngTemplateOutlet"]],template:function(a,d){1&a&&(r.c53(0,I,1,1,"tui-error",0,r.oxv),r.c53(2,N,1,1,"ng-container",null,r.oxv)),2&a&&(r.oho(d.errorsToStr()),r.yG2(2),r.oho(d.errorsToTemplates()))},dependencies:[e.MD,e.XV,C,T]})}return _})()},8256:(O,h,o)=>{function e(i,t){return i.error?.message?i.error.message:500==i.status?`${i.error.error} ${i.error.exception}`.replace(/\</gm,"").replace(/\>+/gm,""):504==i.status?"Server irraggiungibile, controlla la tua connessione e riprova.":r(function m(i){if("object"==typeof i.error&&"object"==typeof i.error.details&&Array.isArray(i.error.details)&&i.error.details.length>0){const t=i.error.details.filter(n=>"object"==typeof n&&null!=n&&n instanceof Object&&Object.keys(n).length>0).filter(n=>"string"==typeof n.attribute&&n.attribute.length>0&&("string"==typeof n.message&&n.message.length>0||Array.isArray(n.message)&&n.message.length>0));if(t.length>0)return t}return[]}(i),t)}function r(i,t){if(0==i.length)return null;const n=t?.joinChar??", ",u=i.map(c=>`${c.attribute} ${c.message}`);return u.length?function p(i){return[...new Set(i)]}(u).join(n):null}o.d(h,{Yj:()=>r,mk:()=>e})},9938:(O,h,o)=>{o.d(h,{y:()=>m});var e=o(6504);const r={required:"Questo campo non pu\xF2 essere vuoto!",email:"Questa email non \xE8 valida!",numbersOnly:"Solo numeri ammessi!",numberOnly:"Solo numeri ammessi!",numerical:"Solo numeri ammessi!",invalid_http_url:"Collegamento http non valido",minlength:i=>"Testo troppo corto: Lunghezza minima: " + i.requiredLength + ", lunghezza attuale: " + i.actualLength + "",InvalidFormat:i=>"\"" + i.value + "\" non \xE8 un formato valido. Esempio valido: \"" + i.validExample + "\"",pattern:i=>"\"" + i.actualValue + "\" non \xE8 un formato valido. Il formato deve rispettare la seguente espressione regolare (RegExp): \"" + i.requiredPattern + "\"",max:i=>"Il valore inserito \xE8 troppo grande! Valore massimo: " + i.max + ", valore attuale: " + i.actual + "",min:i=>"Il valore inserito \xE8 troppo piccolo! Valore minimo: " + i.min + ", valore attuale: " + i.actual + "",maxlength:i=>"Il valore inserito \xE8 troppo lungo! Lunghezza massima: " + i.requiredLength + ", Lunghezza attuale: " + i.actualLength + "",phoneIT:"Questo non sembra essere un numero di telefono italiano valido. Esempio: +39 123 456 7890",inclusion:i=>{const t=Array.isArray(i)?"I valori ammessi sono: " + i.join(", ") + ".":"";return "Il valore inserito non \xE8 valido. " + t + ""},arrayMinLength:i=>"Devi inserire almeno " + i.requiredLength + " elementi.",passwordConfirmation:"Le password non coincidono!",formWeeklyFromTo:"L'orario di inizio deve essere inferiore a quello di fine!"},p={assignToFormUnlessControl:!0};class m{static formatErrors(t,n){return null==t||null==t?[]:new m(t,n).formatErrors()}static assignErrorsToForm(t,n,u={}){const c=n.error?.details;if(!c||!Array.isArray(c))return"object"==typeof c&&Object.keys(c).length>0?this.assignErrorsToFormFromJson(t,c,u):void console.warn("invalid errors provided to assignErrorsToForm",c);this.assignErrorsToFormFromArray(t,c,u)}static assignErrorsToFormFromJson(t,n,u={}){const c={...p,...u};Object.keys(n).forEach(f=>{const v=n[f];v&&Array.isArray(v)?v.forEach(M=>{const T=t.controls[f];T?T.setErrors({[M.attribute]:M.message}):c.assignToFormUnlessControl&&t.setErrors({[M.attribute]:M.message})}):console.warn("assignErrorsToFormFromJson expected an array of ActiveError, but got:",v)})}static assignErrorsToFormFromArray(t,n,u={}){const c={...p,...u};n.forEach(f=>{const v=t instanceof e.WC?t.controls[f.attribute]:t;v?v.setErrors({[f.attribute]:f.message}):c.assignToFormUnlessControl&&t.setErrors({[f.attribute]:f.message})})}constructor(t,n=r){this.defaultMessages=r,this.messages={},this.enableLogging=!1,this.errors=t,n?this.mergeMessages(n):this.assignDefaults()}assignDefaults(){this.messages={},Object.keys(this.defaultMessages).forEach(t=>{this.messages[t]=this.defaultMessages[t]})}mergeMessages(t){[...Object.keys(this.defaultMessages),...Object.keys(t)].forEach(u=>{this.messages[u]=t[u]?t[u]:this.defaultMessages[u]})}formatErrors(){return[...this.errorMsgFromControl()]}warn(...t){this.enableLogging&&console.warn(...t)}errorMsgFromControl(){if(null==this.errors||null==this.errors)return[];var t=[];return Object.keys(this.errors).filter(n=>{if("string"==typeof this.errors[n]&&this.errors[n].length>0)return t.push(this.errors[n]);if(this.messages.hasOwnProperty(n)&&this.messages[n]&&null!=this.messages[n]){const f=this.messages[n];switch(typeof f){case"string":default:t.push(f);break;case"function":t.push(f(this.errors[n]))}}else if(this.warn(`ReactiveFormsErrors missing error message of "${n}". Parser error with your custom logic.`),[!0,!1].includes(this.errors[n])){var c={};c[n]=this.errors[n],"string"!=typeof c&&(c=JSON.stringify(c)),t.push(c)}else t.push(this.errors[n])}),t}}},8392:(O,h,o)=>{o.d(h,{a:()=>e});const e="Qualcosa \xE8 andato storto."},1632:(O,h,o)=>{o.d(h,{k:()=>m,u:()=>i});var e=o(4496),r=o(900),p=o(4680);let m=(()=>{class t{constructor(u,c){this.el=u,this.takeOnlyTrustedEvents=c,this.tuiPressedChange=(0,r.Y7)(this.el.nativeElement,{onlyTrusted:this.takeOnlyTrustedEvents})}}return t.\u0275fac=function(u){return new(u||t)(e.GI1(e.GMv),e.GI1(p.mm))},t.\u0275dir=e.Sc5({type:t,selectors:[["","tuiPressedChange",""]],outputs:{tuiPressedChange:"tuiPressedChange"}}),t})(),i=(()=>{class t{}return t.\u0275fac=function(u){return new(u||t)},t.\u0275mod=e.a4G({type:t}),t.\u0275inj=e.s3X({}),t})()},4736:(O,h,o)=>{o.d(h,{M:()=>m,O:()=>i});var e=o(4496),r=o(5944),p=o(4704);let m=(()=>{class t{constructor(u){this.months$=u}transform({month:u}){return this.months$.pipe((0,p.k)(c=>c[u]))}}return t.\u0275fac=function(u){return new(u||t)(e.GI1(r.GU,16))},t.\u0275pipe=e.UTH({name:"tuiMonth",type:t,pure:!0}),t})(),i=(()=>{class t{}return t.\u0275fac=function(u){return new(u||t)},t.\u0275mod=e.a4G({type:t}),t.\u0275inj=e.s3X({}),t})()},3797:(O,h,o)=>{o.d(h,{CQ:()=>_,Oo:()=>N,cP:()=>D});var e=o(4496),r=o(6504),p=o(3044),m=o(1800),i=o(4164),t=o(4680),n=o(466),u=o(7936),c=o(8048),f=o(4336),v=o(5944),M=o(9371),T=o(796),C=o(1368);const I=["*",[["input"]]],R=["*","input"];let N=(()=>{class l extends m._y{constructor(a,d,E,g){super(a,d,g),this.textfieldSize=E,this.open=!1}get size(){return this.textfieldSize.size}get nativeFocusableElement(){return this.computedDisabled||!this.textfield?null:this.textfield.nativeFocusableElement}get focused(){return(0,i.ER)(this.nativeFocusableElement)||!!this.hostedDropdown&&this.hostedDropdown.focused}get canOpen(){return this.interactive&&!!this.datalist}onValueChange(a){this.value=a,this.open=!0}onActiveZone(a){this.updateFocused(a)}handleOption(a){this.setNativeValue(String(a)),this.focusInput(),this.value=String(a),this.open=!1}getFallbackValue(){return""}focusInput(a=!1){this.nativeFocusableElement&&this.nativeFocusableElement.focus({preventScroll:a})}setNativeValue(a){this.nativeFocusableElement&&(this.nativeFocusableElement.value=a)}}return l.\u0275fac=function(a){return new(a||l)(e.GI1(r.eq,10),e.GI1(e.kD9),e.GI1(c.$K),e.GI1(m.cn,8))},l.\u0275cmp=e.In1({type:l,selectors:[["tui-input"]],contentQueries:function(a,d,E){if(1&a&&e.szK(E,f.Ux,5,e.Yw2),2&a){let g;e.wto(g=e.Gqi())&&(d.datalist=g.first)}},viewQuery:function(a,d){if(1&a&&(e.CC$(n.Qw,5),e.CC$(u.y_,5)),2&a){let E;e.wto(E=e.Gqi())&&(d.hostedDropdown=E.first),e.wto(E=e.Gqi())&&(d.textfield=E.first)}},hostVars:1,hostBindings:function(a,d){2&a&&e.e48("data-size",d.size)},features:[e.M5G([T.g3,(0,t.NK)(l),(0,v.UH)(l),(0,m.q4)(l)],[T.YL]),e.eg9],ngContentSelectors:R,decls:4,vars:11,consts:[[1,"t-hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-input__textfield",1,"t-textfield",3,"disabled","focusable","invalid","nativeId","pseudoFocus","pseudoHover","readOnly","value","valueChange"]],template:function(a,d){1&a&&(e.kPM(I),e.I0R(0,"tui-hosted-dropdown",0),e.iHE("openChange",function(g){return e.kNx(d.open,g)||(d.open=g),g}),e.qCj("tuiActiveZoneChange",function(g){return d.onActiveZone(g)}),e.I0R(1,"tui-primitive-textfield",1),e.qCj("valueChange",function(g){return d.onValueChange(g)}),e._Xx(2),e._Xx(3,1,["ngProjectAs","input",5,["input"]]),e.C$Y()()),2&a&&(e.E7m("canOpen",d.canOpen)("content",d.datalist||""),e.OKB("open",d.open),e.yG2(),e.E7m("disabled",d.computedDisabled)("focusable",d.computedFocusable)("invalid",d.computedInvalid)("nativeId",d.nativeId)("pseudoFocus",d.computedFocused)("pseudoHover",d.pseudoHover)("readOnly",d.readOnly)("value",d.value))},dependencies:[n.Qw,u.y_,p.M,u.KQ],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}"],changeDetection:0}),l})(),D=(()=>{class l extends M.Cm{onValueChange(a){this.host.onValueChange(a)}}return l.\u0275fac=(()=>{let s;return function(d){return(s||(s=e.otF(l)))(d||l)}})(),l.\u0275dir=e.Sc5({type:l,selectors:[["tui-input"]],features:[e.M5G([(0,v.iu)(l)]),e.eg9]}),l})(),_=(()=>{class l{}return l.\u0275fac=function(a){return new(a||l)},l.\u0275mod=e.a4G({type:l}),l.\u0275inj=e.s3X({imports:[[C.MD,p.L,u.KA,n.GE]]}),l})()},796:(O,h,o)=>{o.d(h,{YL:()=>v,g3:()=>M}),o(4736);var r=o(5193),p=o(5944),t=(o(3012),o(2700),o(528)),u=(o(4704),o(4496)),c=o(6504);const v=(0,r.Sk)({limitWidth:"fixed",align:"right"}),M={provide:p.Y9,deps:[[new u.T7N,new u.Yiy,c.Y6]],useFactory:t.Z}}}]);