"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[9212],{1592:(M,m,e)=>{e.r(m),e.d(m,{RequireResetPasswordComponent:()=>U});var t=e(4496),O=e(1368),E=e(2992),i=e(6504),h=e(4872),d=e(9212),_=e(2300),a=e(3616),s=e(3480),o=e(5e3),l=e(8016),u=e(8212),n=e(7692),g=e(8048),R=e(3797),f=e(7568),C=e(4964),v=e(1128),I=e(8256),y=e(8392),A=e(4476),T=e(7936);let U=(()=>{class P{constructor(){this.route=(0,t.uUt)(E.gV),this.auth=(0,t.uUt)(C.o),this.dialogs=(0,t.uUt)(l._k),this.router=(0,t.uUt)(E.E5),this.destroy$=(0,t.uUt)(s.UF),this.notifications=(0,t.uUt)(v.E),this._=(0,t.uUt)(A.OY).setTitle("Password dimenticata | La Porta D'Acqua"),this.form=new i.WC({email:new i.Ku(null,[i.AQ.required,i.AQ.email])}),this.submitted=!1,this.loading=!1,this.typing=!1,this.type$=this.form.valueChanges.pipe((0,h.ay)(),(0,d.y)(()=>this.typing=!0),(0,_.o)(1e3),(0,d.y)(()=>this.typing=!1)).subscribe()}ngOnInit(){this.updateEmailFromQueryParams()}submit(){this.submitted=!0,!this.form.invalid&&(this.loading=!0,this.auth.requireResetPassword(this.form.value.email).pipe((0,a.a)(this.destroy$)).subscribe({next:()=>{this.loading=!1,this.showEmailDialog()},error:r=>{this.loading=!1,this.notifications.error((0,I.mk)(r)||y.a)}}))}updateEmailFromQueryParams(){const r=this.route.snapshot.queryParams.email;r&&this.form.patchValue({email:r})}showEmailDialog(){this.dialogs.open("Le abbiamo inviato un email con i dettagli su come resettare la password.",{label:"Email inviata",size:"l",data:{button:"Grazie"}}).subscribe({error:r=>console.error("Dialog closed",r),complete:()=>this.router.navigate(["/auth"],{queryParams:{email:this.form.value.email}})})}static#t=this.\u0275fac=function(c){return new(c||P)};static#e=this.\u0275cmp=t.In1({type:P,selectors:[["app-require-reset-password"]],standalone:!0,features:[t.M5G([s.UF]),t.UHJ],decls:19,vars:4,consts:()=>{let r;return r="Email",[[1,"flex","justify-center","h-full"],[1,"flex","flex-col","justify-center"],[1,"flex","flex-col",3,"formGroup","ngSubmit"],[1,"mb-1"],[1,"text-slate-400"],[1,"text-slate-400","mb-3"],[1,"mb-2"],["formControlName","email",3,"tuiAutoFocus","tuiTextfieldSize"],r,["tuiTextfield","","autocomplete","email","type","text"],[1,"flex","justify-between"],["routerLink","/auth","tuiButton","","appearance","secondary","type","button",1,"me-2"],["tuiButton","","type","submit",1,"ms-2",3,"showLoader"]]},template:function(c,D){1&c&&(t.I0R(0,"div",0)(1,"div",1)(2,"form",2),t.qCj("ngSubmit",function(){return D.submit()}),t.I0R(3,"h2",3),t.OEk(4,"Reimposta la password."),t.C$Y(),t.I0R(5,"span",4),t.OEk(6,"Inserisci l'indirizzo email dell'account."),t.C$Y(),t.I0R(7,"span",5),t.OEk(8,"Ti invieremo un'email da cui potrai resettare la password."),t.C$Y(),t.I0R(9,"div",6)(10,"tui-input",7),t.SAx(11),t.aS0(12,8),t.k70(),t.wR5(13,"input",9),t.C$Y()(),t.I0R(14,"div",10)(15,"button",11),t.OEk(16,"Annulla"),t.C$Y(),t.I0R(17,"button",12),t.OEk(18,"Conferma"),t.C$Y()()()()()),2&c&&(t.yG2(2),t.E7m("formGroup",D.form),t.yG2(8),t.E7m("tuiAutoFocus",!0)("tuiTextfieldSize","l"),t.yG2(7),t.E7m("showLoader",D.loading))},dependencies:[O.MD,i.sl,i.sz,i.ue,i.u,i.uW,i.Wo,u.CI,u.Kw,R.CQ,R.Oo,R.cP,T.b,o.m6,o.gJ,n.Sk,f.eW,g.aS,g.rD,E.qQ,E.ER],styles:["[_nghost-%COMP%]{display:block;height:100%}"]})}return P})()},4872:(M,m,e)=>{e.d(m,{ay:()=>i});var t=e(4496),O=e(3252),E=e(3616);function i(_){_||((0,t.yAg)(i),_=(0,t.uUt)(t.eM9));const a=new O._(s=>_.onDestroy(s.next.bind(s)));return s=>s.pipe((0,E.a)(a))}}}]);