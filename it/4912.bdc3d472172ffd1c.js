"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[4912],{9064:(L,O,s)=>{s.d(O,{w:()=>y});var t=s(4496),M=s(6504),A=s(3480),g=s(6700),m=s(3616),T=s(6684),u=s(3797),_=s(8588),v=s(1368),b=s(9956),x=s(1292);function z(I,d){if(1&I&&(t.I0R(0,"tui-textarea",2),t.OEk(1),t.C$Y()),2&I){const c=t.GaO().$implicit,f=t.GaO();t.E7m("formControl",c.control),t.yG2(),t.oRS(" ",f.getFullLang(c.lang)," ")}}function C(I,d){if(1&I&&(t.I0R(0,"tui-input",2),t.OEk(1),t.C$Y()),2&I){const c=t.GaO().$implicit,f=t.GaO();t.E7m("formControl",c.control),t.yG2(),t.oRS(" ",f.getFullLang(c.lang)," ")}}const F=I=>({"mb-3":I});function Y(I,d){if(1&I&&(t.SAx(0),t.I0R(1,"div",1),t.yuY(2,z,2,2,"tui-textarea",2)(3,C,2,2),t.wR5(4,"app-errors",3),t.C$Y(),t.k70()),2&I){const c=d.$implicit,f=d.last,D=t.GaO();t.yG2(),t.E7m("ngClass",t.S45(3,F,!f)),t.yG2(),t.C0Y(2,D.long?2:3),t.yG2(2),t.E7m("errors",c.control.errors)}}const Q=["*"];let y=(()=>{class I{constructor(){this.destroy$=new A.UF,this.long=!1,this.controls=(0,t.OCB)({}),this.controlsArr=(0,t.S6b)(()=>{const c=this.controls();return Object.keys(c).map(f=>({lang:f,control:c[f]}))}),this.touched$=new g.g(!1),this.value$=new g.g({})}ngAfterViewInit(){this.addLang("it"),this.addLang("en")}ngOnInit(){}registerOnChange(c){this.value$.pipe((0,m.a)(this.destroy$)).subscribe({next:f=>c(f)})}registerOnTouched(c){this.touched$.pipe((0,T.I)(f=>!0===f)).subscribe({next:()=>c()})}writeValue(c){this.patchValue(c??{}),this.touched$.next(!1)}wasTouched(){this.touched$.next(!0)}getFullLang(c){return x.S[c]??c}controlChanged(c){this.value$.next({...this.value$.value,[c]:this.controls()[c].value})}patchValue(c){Object.keys(c).forEach(f=>this.addLang(f)),Object.keys(this.controls()).forEach(f=>{this.controls()[f].patchValue(c[f]??null)})}addLang(c){if(this.controls()[c])return;const f=new M.Ku;f.valueChanges.subscribe({next:()=>this.controlChanged(c)}),this.controls.set({...this.controls(),[c]:f})}static#t=this.\u0275fac=function(f){return new(f||I)};static#e=this.\u0275cmp=t.In1({type:I,selectors:[["app-i18n-input"]],inputs:{long:"long"},standalone:!0,features:[t.M5G([{provide:M.Y6,useExisting:(0,t.wd)(()=>I),multi:!0},A.UF]),t.UHJ],ngContentSelectors:Q,decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"ngClass"],[3,"formControl"],[3,"errors"]],template:function(f,D){1&f&&(t.kPM(),t._Xx(0),t.yuY(1,Y,5,5,"ng-container",0)),2&f&&(t.yG2(),t.E7m("ngForOf",D.controlsArr()))},dependencies:[M.sl,M.ue,M.ug,u.CQ,u.Oo,u.cP,v.Iw,b.g,v.QF,_.Y3,_.wp,_.kd],changeDetection:0})}return I})()},4152:(L,O,s)=>{s.d(O,{c:()=>ti});var t=s(4496),M=s(3797),A=s(1316),g=s(6504),m=s(900),T=s(3480),u=s(2528),_=s(3412),v=s(4704),b=s(6684),x=s(7368),z=s(5568),C=s(4e3),F=s(3616);let Y=(()=>{class a{constructor({nativeElement:e},n){this.tuiDroppableDropped=(0,m.Ax)(e,"drop").pipe((0,m.uy)(),(0,v.k)(o=>o.dataTransfer),(0,b.I)(u.kF)),this.tuiDroppableDragOverChange=(0,m.Ax)(e,"dragenter").pipe((0,x.G)(({target:o,dataTransfer:r})=>(0,_.U)((0,m.Ax)(e,"dragleave").pipe((0,b.I)(l=>l.target===o)),(0,m.Ax)(e,"drop")).pipe((0,v.k)(()=>null),(0,z.W)(r))),(0,C.a)((o,r)=>!!o&&!!r||!o&&!r)),(0,m.Ax)(e,"dragover").pipe((0,m.uy)(),(0,F.a)(n)).subscribe()}}return a.\u0275fac=function(e){return new(e||a)(t.GI1(t.GMv),t.GI1(T.UF,2))},a.\u0275dir=t.Sc5({type:a,selectors:[["","tuiDroppableDropped",""],["","tuiDroppableDragOverChange",""]],outputs:{tuiDroppableDropped:"tuiDroppableDropped",tuiDroppableDragOverChange:"tuiDroppableDragOverChange"},features:[t.M5G([T.UF])]}),a})(),Q=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.a4G({type:a}),a.\u0275inj=t.s3X({}),a})();var y=s(168),I=s(1800),d=s(4164),c=s(4392),f=s(4680),D=s(9392),Dt=s(6732),St=s(1096),ut=s(832),Pt=s(1632),Ft=s(3905),pt=s(1512),dt=s(4108),Gt=s(3972),ht=s(3656),gt=s(7692),U=s(8212),mt=s(8976),at=s(3012),Lt=s(7232);function ft(a,i){return void 0===i?null:i<1024?`${i} ${a[0]}`:i<1048576?`${(i/1024).toFixed(0)} ${a[1]}`:`${(0,Lt.Q3)(i/1048576,2).toLocaleString("ru-RU")} ${a[2]}`}var kt=s(6040),vt=s(2700),W=s(1368),K=s(1040),Bt=s(1588),Wt=s(1200),Ut=s(9880);(0,u.AL)({formatSize:ft,icons:{normal:({$implicit:a})=>"l"===a?"tuiIconFileLarge":"tuiIconCheckCircleLarge",error:"tuiIconAlertCircleLarge",deleted:"tuiIconTrashLarge"}});let ae=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.a4G({type:a}),a.\u0275inj=t.s3X({imports:[[W.MD,mt.Gy,gt.Sk,K.Ux,ht.Yt,ut.I,U.CI,Bt.s,Ut.kh,Wt.m]]}),a})();const xt=["input"],re=["formatRejection"],se=["maxSizeRejection"];function le(a,i){1&a&&t.C_f(0)}function ce(a,i){if(1&a&&(t.SAx(0),t.OEk(1),t.k70()),2&a){const e=i.polymorpheusOutlet;t.yG2(),t.oRS(" ",e," ")}}function ue(a,i){1&a&&t.wR5(0,"span",10),2&a&&t.E7m("textContent",i.polymorpheusOutlet)}function pe(a,i){if(1&a&&(t.I0R(0,"div")(1,"a",7),t.yuY(2,ce,2,1,"ng-container",8),t.wVc(3,"async"),t.C$Y(),t.yuY(4,ue,1,1,"span",9),t.wVc(5,"async"),t.C$Y()),2&a){const e=t.GaO();t.yG2(2),t.E7m("polymorpheusOutlet",t.kDX(3,2,e.computedLink$)),t.yG2(2),t.E7m("polymorpheusOutlet",t.kDX(5,4,e.computedLabel$))}}function de(a,i){if(1&a&&(t.SAx(0),t._Xx(1),t.wR5(2,"input",11,12),t.k70()),2&a){const e=t.GaO();t.yG2(2),t.E7m("accept",e.accept)("id",e.id)("multiple",e.multiple)("tuiFocusable",e.focusable)}}function he(a,i){if(1&a&&(t.OEk(0),t.wVc(1,"async")),2&a){const e=t.GaO();let n;t.oRS(" ",(null==(n=t.kDX(1,1,e.inputFileTexts$))?null:n.formatRejectionReason)||"","\n")}}function ge(a,i){if(1&a&&(t.OEk(0),t.wVc(1,"async"),t.wVc(2,"tuiMaxSizeRejectionError")),2&a){const e=t.GaO();t.oRS(" ",t.kDX(1,1,t.kDX(2,3,e.maxFileSize)),"\n")}}const me=[[["input"]]],_e=a=>({$implicit:a}),st=(0,u.AL)({capture:null,accepts:"",multiple:!1,size:"m",maxFileSize:31457280});let fe=(()=>{class a{constructor(e,n,o,r){this.host=e,this.el=n,this.idService=o,this.options=r}get tabIndex(){return this.host.focusable?0:-1}get id(){return this.el.nativeElement.id||this.idService.generate()}get accept(){var e;return null!==(e=this.el.nativeElement.accept)&&void 0!==e?e:this.options.accepts}get multiple(){var e;return null!==(e=this.el.nativeElement.multiple)&&void 0!==e?e:this.options.multiple}get capture(){var e;return null!==(e=this.el.nativeElement.getAttribute("capture"))&&void 0!==e?e:this.options.capture}get input(){return this.el.nativeElement}}return a.\u0275fac=function(e){return new(e||a)(t.GI1((0,t.wd)(()=>Mt)),t.GI1(t.GMv),t.GI1(T.y2),t.GI1(st))},a.\u0275dir=t.Sc5({type:a,selectors:[["input","tuiInputFiles",""]],hostAttrs:["type","file",1,"t-native"],hostVars:5,hostBindings:function(e,n){2&e&&(t.SoX("tabIndex",n.tabIndex)("id",n.id)("accept",n.accept)("multiple",n.multiple),t.e48("capture",n.capture))}}),a})(),ve=(()=>{class a{constructor(e,n){this.inputFileTexts$=e,this.units$=n}transform(e){return(0,kt.E)([this.inputFileTexts$,this.units$]).pipe((0,v.k)(([{maxSizeRejectionReason:n},o])=>`${n}${ft(o,e)}`))}}return a.\u0275fac=function(e){return new(e||a)(t.GI1(at.oJ,16),t.GI1(at.wx,16))},a.\u0275pipe=t.UTH({name:"tuiMaxSizeRejectionError",type:a,pure:!0}),a})(),Mt=(()=>{class a extends I.GG{constructor(e,n,o,r,l){super(e,n),this.isMobile=o,this.inputFileTexts$=r,this.options=l,this.dataTransfer=null,this.accept=this.options.accepts,this.multiple=this.options.multiple,this.size=this.options.size,this.maxFileSize=this.options.maxFileSize,this.reject=new t._w7}get computedMultiple(){var e,n;return null!==(n=null===(e=this.nativeInput)||void 0===e?void 0:e.multiple)&&void 0!==n?n:this.multiple}get computedAccept(){var e,n;return null!==(n=null===(e=this.nativeInput)||void 0===e?void 0:e.accept)&&void 0!==n?n:this.accept}get nativeFocusableElement(){var e;return(null===(e=this.input)||void 0===e?void 0:e.nativeElement)||null}get focused(){return(0,d.ER)(this.nativeFocusableElement)}get computedPseudoHovered(){var e;return null!==(e=this.pseudoHover)&&void 0!==e?e:this.fileDragged||null}get computedLink$(){return this.computeLink$(this.fileDragged,this.computedMultiple,this.link)}get computedLabel$(){return this.computeLabel$(this.isMobile,this.fileDragged,this.computedMultiple,this.label)}get fileDragged(){var e;return!(null===(e=this.dataTransfer)||void 0===e||!e.types.includes("Files"))}get arrayValue(){return this.getValueArray(this.value)}onFocused(e){this.updateFocused(e)}onFilesSelected(){var e,n,o;const r=null!==(n=null===(e=this.nativeInput)||void 0===e?void 0:e.input)&&void 0!==n?n:null===(o=this.input)||void 0===o?void 0:o.nativeElement;r&&(this.processSelectedFiles(r.files),r.value="")}onDropped(e){this.processSelectedFiles(e.files)}onDragOver(e){this.dataTransfer=e}removeFile(e){this.value=this.computedMultiple?this.arrayValue.filter(n=>n!==e):null}computeLink$(e,n,o){return e?(0,vt.of)(""):this.inputFileTexts$.pipe((0,v.k)(r=>n&&!o?r.defaultLinkMultiple:o||r.defaultLinkSingle))}computeLabel$(e,n,o,r){return e?(0,vt.of)(""):this.inputFileTexts$.pipe((0,v.k)(n?l=>o?l.dropMultiple:l.drop:l=>o&&!r?l.defaultLabelMultiple:r||l.defaultLabelSingle))}getValueArray(e){return e?Array.isArray(e)?e:[e]:c.kJ}processSelectedFiles(e){if(!e?.length)return;const n={formatRejection:this.formatRejection,maxSizeRejection:this.maxSizeRejection},o=this.computedMultiple?Array.from(e):[e[0]],r=o.filter(h=>h.size>this.maxFileSize),l=o.filter(h=>!this.isFormatAcceptable(h)&&!r.includes(h)),p=o.filter(h=>!r.includes(h)&&!l.includes(h));(r.length||l.length)&&this.rejectFiles([...r.map(h=>({name:h.name,type:h.type,size:h.size,content:n.maxSizeRejection})),...l.map(h=>({name:h.name,type:h.type,size:h.size,content:n.formatRejection}))]),this.value=this.computedMultiple?[...this.arrayValue,...p]:p[0]||null}isFormatAcceptable(e){if(!this.computedAccept)return!0;const n=`.${(e.name.split(".").pop()||"").toLowerCase()}`;return function $t(a){return a.toLowerCase().split(",").map(i=>i.trim())}(this.computedAccept).some(o=>o===n||o===e.type||"*"===o.split("/")[1]&&e.type.split("/")[0]===o.split("/")[0])}rejectFiles(e){this.reject.emit(this.computedMultiple?e:e[0])}}return a.\u0275fac=function(e){return new(e||a)(t.GI1(g.eq,10),t.GI1(t.kD9),t.GI1(f.Mv),t.GI1(at.oJ),t.GI1(st))},a.\u0275cmp=t.In1({type:a,selectors:[["tui-input-files"]],contentQueries:function(e,n,o){if(1&e&&(t.szK(o,fe,5),t.szK(o,t.Yw2,5)),2&e){let r;t.wto(r=t.Gqi())&&(n.nativeInput=r.first),t.wto(r=t.Gqi())&&(n.template=r.first)}},viewQuery:function(e,n){if(1&e&&(t.CC$(xt,5),t.CC$(re,5),t.CC$(se,5)),2&e){let o;t.wto(o=t.Gqi())&&(n.input=o.first),t.wto(o=t.Gqi())&&(n.formatRejection=o.first),t.wto(o=t.Gqi())&&(n.maxSizeRejection=o.first)}},hostBindings:function(e,n){1&e&&t.qCj("focusin",function(){return n.onFocused(!0)})("focusout",function(){return n.onFocused(!1)})("change",function(){return n.onFilesSelected()})},inputs:{link:"link",label:"label",accept:"accept",multiple:"multiple",size:"size",maxFileSize:"maxFileSize"},outputs:{reject:"reject"},features:[t.M5G([Gt.Ir,(0,f.NK)(a)]),t.eg9],ngContentSelectors:xt,decls:10,vars:12,consts:[["appearance","input-file","tuiWrapper","",1,"t-wrapper",3,"active","disabled","focus","hover"],["automation-id","tui-input-file__label",1,"t-label",3,"mousedown.prevent.silent","tuiDroppableDragOverChange","tuiDroppableDropped"],[1,"t-description"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],["formatRejection",""],["maxSizeRejection",""],["tuiLink",""],[4,"polymorpheusOutlet"],[3,"textContent",4,"polymorpheusOutlet"],[3,"textContent"],["title","","type","file",1,"t-native",3,"accept","id","multiple","tuiFocusable"],["input",""]],template:function(e,n){1&e&&(t.kPM(me),t.I0R(0,"div",0)(1,"label",1),t.qCj("mousedown.prevent.silent",function(){return 0})("tuiDroppableDragOverChange",function(r){return n.onDragOver(r)})("tuiDroppableDropped",function(r){return n.onDropped(r)}),t.I0R(2,"div",2),t.yuY(3,le,1,0,"ng-container",3)(4,pe,6,6,"div",4),t.C$Y(),t.yuY(5,de,4,4,"ng-container",4),t.C$Y()(),t.yuY(6,he,2,3,"ng-template",null,5,t.gJz)(8,ge,3,5,"ng-template",null,6,t.gJz)),2&e&&(t.eAK("_mobile",n.isMobile),t.E7m("active",n.pseudoActive)("disabled",n.computedDisabled)("focus",n.computedFocused)("hover",n.pseudoHover||n.fileDragged||null),t.yG2(3),t.E7m("ngTemplateOutlet",n.template||null)("ngTemplateOutletContext",t.S45(10,_e,n.fileDragged)),t.yG2(),t.E7m("ngIf",!n.template),t.yG2(),t.E7m("ngIf",!n.readOnly&&!n.computedDisabled))},dependencies:[pt.C,dt.S,Y,W.XV,W.u_,K.Af,y.O,W.a,ve],styles:['tui-input-files{display:block;min-height:var(--tui-height-l);border-radius:var(--tui-radius-m);font:var(--tui-font-text-m)}tui-input-files .t-native{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}tui-input-files .t-native::-webkit-file-upload-button{display:none}tui-input-files .t-native+.t-native{display:none}tui-input-files .t-label{width:100%;min-height:inherit;text-align:center}tui-input-files .t-description{display:flex;justify-content:center;align-items:center;height:100%;min-height:inherit;padding:1rem 0;box-sizing:border-box}[tuiWrapper][data-appearance=input-file]{background:transparent;word-wrap:break-word;color:var(--tui-text-02);min-height:inherit;border-radius:inherit;padding:0 .5rem;box-sizing:border-box}[tuiWrapper][data-appearance=input-file]:after{border:1px dashed;color:var(--tui-link)}[tuiWrapper][data-appearance=input-file]._mobile:after{border:1px solid}[tuiWrapper][data-appearance=input-file]:disabled:disabled:after,[tuiWrapper][data-appearance=input-file][data-state=disabled][data-state=disabled]:after{color:var(--tui-text-03)}:focus-visible:not([data-focused="false"])>[tuiWrapper][data-appearance=input-file]:after,[data-focused=true]>[tuiWrapper][data-appearance=input-file]:after{border-style:solid;border-width:2px;color:var(--tui-focus)}[tuiWrapper][data-appearance=input-file]:focus-visible:focus-visible:after{border-style:solid;border-width:2px;color:var(--tui-focus)}[tuiWrapper][data-appearance=input-file]._focused._focused:after{border-style:solid;border-width:2px;color:var(--tui-focus)}[tuiWrapper][data-appearance=input-file][data-mode=onDark]{color:var(--tui-text-01-night)}[tuiWrapper][data-appearance=input-file][data-mode=onDark]:after{color:var(--tui-text-01-night)}:focus-visible:not([data-focused="false"])>[tuiWrapper][data-appearance=input-file][data-mode=onDark]:after,[data-focused=true]>[tuiWrapper][data-appearance=input-file][data-mode=onDark]:after{color:var(--tui-text-01-night)}[tuiWrapper][data-appearance=input-file][data-mode=onDark]:focus-visible:focus-visible:after{color:var(--tui-text-01-night)}[tuiWrapper][data-appearance=input-file][data-mode=onDark]._focused._focused:after{color:var(--tui-text-01-night)}@media (hover: hover){[tuiWrapper][data-appearance=input-file][data-mode=onDark]:hover:not(._no-hover),[tuiWrapper][data-appearance=input-file][data-mode=onDark][data-state=hover]{background:var(--tui-clear-inverse-hover)}[tuiWrapper][data-appearance=input-file][data-mode=onDark]:hover:not(._no-hover):after,[tuiWrapper][data-appearance=input-file][data-mode=onDark][data-state=hover]:after{color:var(--tui-text-03-night)}}[tuiWrapper][data-appearance=input-file][data-mode=onDark]:active:not(._no-active),[tuiWrapper][data-appearance=input-file][data-mode=onDark][data-state=active],[tuiWrapper][data-appearance=input-file][data-mode=onDark][data-state=active]:hover{background:var(--tui-clear-inverse-active)}[tuiWrapper][data-appearance=input-file][data-mode=onDark]:active:not(._no-active):after,[tuiWrapper][data-appearance=input-file][data-mode=onDark][data-state=active]:after,[tuiWrapper][data-appearance=input-file][data-mode=onDark][data-state=active]:hover:after{color:var(--tui-text-03-night)}[tuiWrapper][data-appearance=input-file][data-mode=onLight]{color:var(--tui-text-01)}[tuiWrapper][data-appearance=input-file][data-mode=onLight]:after{color:var(--tui-text-01)}@media (hover: hover){[tuiWrapper][data-appearance=input-file][data-mode=onLight]:hover:not(._no-hover),[tuiWrapper][data-appearance=input-file][data-mode=onLight][data-state=hover]{background:var(--tui-clear-hover)}[tuiWrapper][data-appearance=input-file][data-mode=onLight]:hover:not(._no-hover):after,[tuiWrapper][data-appearance=input-file][data-mode=onLight][data-state=hover]:after{color:var(--tui-text-03)}}[tuiWrapper][data-appearance=input-file][data-mode=onLight]:active:not(._no-active),[tuiWrapper][data-appearance=input-file][data-mode=onLight][data-state=active],[tuiWrapper][data-appearance=input-file][data-mode=onLight][data-state=active]:hover{background:var(--tui-clear-active)}[tuiWrapper][data-appearance=input-file][data-mode=onLight]:active:not(._no-active):after,[tuiWrapper][data-appearance=input-file][data-mode=onLight][data-state=active]:after,[tuiWrapper][data-appearance=input-file][data-mode=onLight][data-state=active]:hover:after{color:var(--tui-text-03)}@media (hover: hover){[tuiWrapper][data-appearance=input-file]:hover:not(._no-hover),[tuiWrapper][data-appearance=input-file][data-state=hover]{background:var(--tui-secondary)}[tuiWrapper][data-appearance=input-file]:hover:not(._no-hover):after,[tuiWrapper][data-appearance=input-file][data-state=hover]:after{color:var(--tui-link-hover)}}[tuiWrapper][data-appearance=input-file]:active:not(._no-active),[tuiWrapper][data-appearance=input-file][data-state=active],[tuiWrapper][data-appearance=input-file][data-state=active]:hover{background:var(--tui-secondary-hover)}\n'],encapsulation:2,changeDetection:0}),(0,A.UN)([D.w7],a.prototype,"computeLink$",null),(0,A.UN)([D.w7],a.prototype,"computeLabel$",null),(0,A.UN)([D.w7],a.prototype,"getValueArray",null),a})(),xe=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.a4G({type:a}),a.\u0275inj=t.s3X({imports:[[W.MD,K.Ux,Dt.kR,St.O,ut.I,Pt.u,Ft.MZ,y.C,Q,dt.g,ht.Yt,pt.w,gt.Sk,U.CI,mt.Gy,ae]]}),a})();var It=s(8016),X=s(5656),Ce=s(1560),Me=s(9052),Ie=s(1128),k=s(1528),ye=s(5084),Ee=s(5657),N=s(800),Te=s(4476);const Ae=["wrapper"],Oe=["sourceImage"];function be(a,i){if(1&a){const e=t.KQA();t.I0R(0,"img",4,5),t.qCj("load",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.imageLoadedInView())})("mousedown",function(o){t.usT(e);const r=t.GaO();return t.CGJ(r.startMove(o,r.moveTypes.Drag))})("touchstart",function(o){t.usT(e);const r=t.GaO();return t.CGJ(r.startMove(o,r.moveTypes.Drag))})("error",function(o){t.usT(e);const r=t.GaO();return t.CGJ(r.loadImageError(o))}),t.C$Y()}if(2&a){const e=i.ngIf,n=t.GaO();t.m4B("visibility",n.imageVisible?"visible":"hidden")("transform",n.safeTransformStyle),t.eAK("ngx-ic-draggable",!n.disabled&&n.allowMoveImage),t.E7m("src",e,t.K6U),t.e48("alt",n.imageAltText)}}function Re(a,i){if(1&a){const e=t.KQA();t.SAx(0),t.I0R(1,"span",9),t.qCj("mousedown",function(o){t.usT(e);const r=t.GaO(2);return t.CGJ(r.startMove(o,r.moveTypes.Resize,"topleft"))})("touchstart",function(o){t.usT(e);const r=t.GaO(2);return t.CGJ(r.startMove(o,r.moveTypes.Resize,"topleft"))}),t.wR5(2,"span",10),t.C$Y(),t.I0R(3,"span",11),t.wR5(4,"span",10),t.C$Y(),t.I0R(5,"span",12),t.qCj("mousedown",function(o){t.usT(e);const r=t.GaO(2);return t.CGJ(r.startMove(o,r.moveTypes.Resize,"topright"))})("touchstart",function(o){t.usT(e);const r=t.GaO(2);return t.CGJ(r.startMove(o,r.moveTypes.Resize,"topright"))}),t.wR5(6,"span",10),t.C$Y(),t.I0R(7,"span",13),t.wR5(8,"span",10),t.C$Y(),t.I0R(9,"span",14),t.qCj("mousedown",function(o){t.usT(e);const r=t.GaO(2);return t.CGJ(r.startMove(o,r.moveTypes.Resize,"bottomright"))})("touchstart",function(o){t.usT(e);const r=t.GaO(2);return t.CGJ(r.startMove(o,r.moveTypes.Resize,"bottomright"))}),t.wR5(10,"span",10),t.C$Y(),t.I0R(11,"span",15),t.wR5(12,"span",10),t.C$Y(),t.I0R(13,"span",16),t.qCj("mousedown",function(o){t.usT(e);const r=t.GaO(2);return t.CGJ(r.startMove(o,r.moveTypes.Resize,"bottomleft"))})("touchstart",function(o){t.usT(e);const r=t.GaO(2);return t.CGJ(r.startMove(o,r.moveTypes.Resize,"bottomleft"))}),t.wR5(14,"span",10),t.C$Y(),t.I0R(15,"span",17),t.wR5(16,"span",10),t.C$Y(),t.I0R(17,"span",18),t.qCj("mousedown",function(o){t.usT(e);const r=t.GaO(2);return t.CGJ(r.startMove(o,r.moveTypes.Resize,"top"))})("touchstart",function(o){t.usT(e);const r=t.GaO(2);return t.CGJ(r.startMove(o,r.moveTypes.Resize,"top"))}),t.C$Y(),t.I0R(18,"span",19),t.qCj("mousedown",function(o){t.usT(e);const r=t.GaO(2);return t.CGJ(r.startMove(o,r.moveTypes.Resize,"right"))})("touchstart",function(o){t.usT(e);const r=t.GaO(2);return t.CGJ(r.startMove(o,r.moveTypes.Resize,"right"))}),t.C$Y(),t.I0R(19,"span",20),t.qCj("mousedown",function(o){t.usT(e);const r=t.GaO(2);return t.CGJ(r.startMove(o,r.moveTypes.Resize,"bottom"))})("touchstart",function(o){t.usT(e);const r=t.GaO(2);return t.CGJ(r.startMove(o,r.moveTypes.Resize,"bottom"))}),t.C$Y(),t.I0R(20,"span",21),t.qCj("mousedown",function(o){t.usT(e);const r=t.GaO(2);return t.CGJ(r.startMove(o,r.moveTypes.Resize,"left"))})("touchstart",function(o){t.usT(e);const r=t.GaO(2);return t.CGJ(r.startMove(o,r.moveTypes.Resize,"left"))}),t.C$Y(),t.k70()}}function we(a,i){if(1&a){const e=t.KQA();t.I0R(0,"div",6),t.qCj("keydown",function(o){t.usT(e);const r=t.GaO();return t.CGJ(r.keyboardAccess(o))}),t.I0R(1,"div",7),t.qCj("mousedown",function(o){t.usT(e);const r=t.GaO();return t.CGJ(r.startMove(o,r.moveTypes.Move))})("touchstart",function(o){t.usT(e);const r=t.GaO();return t.CGJ(r.startMove(o,r.moveTypes.Move))}),t.C$Y(),t.yuY(2,Re,21,0,"ng-container",8),t.C$Y()}if(2&a){const e=t.GaO();t.m4B("top",e.state.cropper.y1,"px")("left",e.state.cropper.x1,"px")("width",e.state.cropper.x2-e.state.cropper.x1,"px")("height",e.state.cropper.y2-e.state.cropper.y1,"px")("margin-left","center"===e.state.options.alignImage?e.marginLeft:null)("visibility",e.imageVisible?"visible":"hidden"),t.eAK("ngx-ic-round",e.state.options.roundCropper),t.e48("aria-label",e.state.options.cropperFrameAriaLabel),t.yG2(2),t.E7m("ngIf",!(e.state.options.hideResizeSquares||e.state.options.cropperStaticWidth&&e.state.options.cropperStaticHeight))}}function Z(a,i,e){return a=function ze(a,i){let e=a.x2-a.x1,n=a.y2-a.y1;const o=a.x1+e/2,r=a.y1+n/2;i.options.cropperStaticHeight&&i.options.cropperStaticWidth?(e=i.maxSize.width>i.options.cropperStaticWidth?i.options.cropperStaticWidth:i.maxSize.width,n=i.maxSize.height>i.options.cropperStaticHeight?i.options.cropperStaticHeight:i.maxSize.height):(e=Math.max(i.cropperScaledMinWidth,Math.min(e,i.cropperScaledMaxWidth,i.maxSize.width)),n=Math.max(i.cropperScaledMinHeight,Math.min(n,i.cropperScaledMaxHeight,i.maxSize.height)),i.options.maintainAspectRatio&&(i.maxSize.width/i.options.aspectRatio<i.maxSize.height?n=e/i.options.aspectRatio:e=n*i.options.aspectRatio));const l=o-e/2,h=r-n/2;return{x1:l,x2:l+e,y1:h,y2:h+n}}(a,i),J(a,i,e)}function J(a,i,e=!1){return a.x1<0&&(a={...a,x1:0,x2:a.x2-(e?a.x1:0)}),a.y1<0&&(a={...a,y2:a.y2-(e?a.y1:0),y1:0}),a.x2>i.maxSize.width&&(a={...a,x1:a.x1-(e?a.x2-i.maxSize.width:0),x2:i.maxSize.width}),a.y2>i.maxSize.height&&(a={...a,y1:a.y1-(e?a.y2-i.maxSize.height:0),y2:i.maxSize.height}),a}function yt(a,i,e){const n={...e.cropper},o=q(a)-i.clientX,r=tt(a)-i.clientY;switch(i.position){case"left":n.x1=Math.min(Math.max(i.cropper.x1+o,n.x2-e.cropperScaledMaxWidth),n.x2-e.cropperScaledMinWidth);break;case"topleft":n.x1=Math.min(Math.max(i.cropper.x1+o,n.x2-e.cropperScaledMaxWidth),n.x2-e.cropperScaledMinWidth),n.y1=Math.min(Math.max(i.cropper.y1+r,n.y2-e.cropperScaledMaxHeight),n.y2-e.cropperScaledMinHeight);break;case"top":n.y1=Math.min(Math.max(i.cropper.y1+r,n.y2-e.cropperScaledMaxHeight),n.y2-e.cropperScaledMinHeight);break;case"topright":n.x2=Math.max(Math.min(i.cropper.x2+o,n.x1+e.cropperScaledMaxWidth),n.x1+e.cropperScaledMinWidth),n.y1=Math.min(Math.max(i.cropper.y1+r,n.y2-e.cropperScaledMaxHeight),n.y2-e.cropperScaledMinHeight);break;case"right":n.x2=Math.max(Math.min(i.cropper.x2+o,n.x1+e.cropperScaledMaxWidth),n.x1+e.cropperScaledMinWidth);break;case"bottomright":n.x2=Math.max(Math.min(i.cropper.x2+o,n.x1+e.cropperScaledMaxWidth),n.x1+e.cropperScaledMinWidth),n.y2=Math.max(Math.min(i.cropper.y2+r,n.y1+e.cropperScaledMaxHeight),n.y1+e.cropperScaledMinHeight);break;case"bottom":n.y2=Math.max(Math.min(i.cropper.y2+r,n.y1+e.cropperScaledMaxHeight),n.y1+e.cropperScaledMinHeight);break;case"bottomleft":n.x1=Math.min(Math.max(i.cropper.x1+o,n.x2-e.cropperScaledMaxWidth),n.x2-e.cropperScaledMinWidth),n.y2=Math.max(Math.min(i.cropper.y2+r,n.y1+e.cropperScaledMaxHeight),n.y1+e.cropperScaledMinHeight);break;case"center":const l="scale"in a?a.scale:1,p=Math.min(Math.max(e.cropperScaledMinWidth,Math.abs(i.cropper.x2-i.cropper.x1)*l),e.cropperScaledMaxWidth),h=Math.min(Math.max(e.cropperScaledMinHeight,Math.abs(i.cropper.y2-i.cropper.y1)*l),e.cropperScaledMaxHeight);n.x1=i.clientX-p/2,n.x2=i.clientX+p/2,n.y1=i.clientY-h/2,n.y2=i.clientY+h/2,n.x1<0?(n.x2-=n.x1,n.x1=0):n.x2>e.maxSize.width&&(n.x1-=n.x2-e.maxSize.width,n.x2=e.maxSize.width),n.y1<0?(n.y2-=n.y1,n.y1=0):n.y2>e.maxSize.height&&(n.y1-=n.y2-e.maxSize.height,n.y2=e.maxSize.height)}return e.options.maintainAspectRatio?function Se(a,i,e){i={...i};let n=0,o=0;switch(a){case"top":i.x2=i.x1+(i.y2-i.y1)*e.options.aspectRatio,n=Math.max(i.x2-e.maxSize.width,0),o=Math.max(0-i.y1,0),(n>0||o>0)&&(i.x2-=o*e.options.aspectRatio>n?o*e.options.aspectRatio:n,i.y1+=o*e.options.aspectRatio>n?o:n/e.options.aspectRatio);break;case"bottom":i.x2=i.x1+(i.y2-i.y1)*e.options.aspectRatio,n=Math.max(i.x2-e.maxSize.width,0),o=Math.max(i.y2-e.maxSize.height,0),(n>0||o>0)&&(i.x2-=o*e.options.aspectRatio>n?o*e.options.aspectRatio:n,i.y2-=o*e.options.aspectRatio>n?o:n/e.options.aspectRatio);break;case"topleft":i.y1=i.y2-(i.x2-i.x1)/e.options.aspectRatio,n=Math.max(0-i.x1,0),o=Math.max(0-i.y1,0),(n>0||o>0)&&(i.x1+=o*e.options.aspectRatio>n?o*e.options.aspectRatio:n,i.y1+=o*e.options.aspectRatio>n?o:n/e.options.aspectRatio);break;case"topright":i.y1=i.y2-(i.x2-i.x1)/e.options.aspectRatio,n=Math.max(i.x2-e.maxSize.width,0),o=Math.max(0-i.y1,0),(n>0||o>0)&&(i.x2-=o*e.options.aspectRatio>n?o*e.options.aspectRatio:n,i.y1+=o*e.options.aspectRatio>n?o:n/e.options.aspectRatio);break;case"right":case"bottomright":i.y2=i.y1+(i.x2-i.x1)/e.options.aspectRatio,n=Math.max(i.x2-e.maxSize.width,0),o=Math.max(i.y2-e.maxSize.height,0),(n>0||o>0)&&(i.x2-=o*e.options.aspectRatio>n?o*e.options.aspectRatio:n,i.y2-=o*e.options.aspectRatio>n?o:n/e.options.aspectRatio);break;case"left":case"bottomleft":i.y2=i.y1+(i.x2-i.x1)/e.options.aspectRatio,n=Math.max(0-i.x1,0),o=Math.max(i.y2-e.maxSize.height,0),(n>0||o>0)&&(i.x1+=o*e.options.aspectRatio>n?o*e.options.aspectRatio:n,i.y2-=o*e.options.aspectRatio>n?o:n/e.options.aspectRatio);break;case"center":i.x2=i.x1+(i.y2-i.y1)*e.options.aspectRatio,i.y2=i.y1+(i.x2-i.x1)/e.options.aspectRatio;const r=Math.max(0-i.x1,0),l=Math.max(i.x2-e.maxSize.width,0),p=Math.max(i.y2-e.maxSize.height,0),h=Math.max(0-i.y1,0);(r>0||l>0||p>0||h>0)&&(i.x1+=p*e.options.aspectRatio>r?p*e.options.aspectRatio:r,i.x2-=h*e.options.aspectRatio>l?h*e.options.aspectRatio:l,i.y1+=h*e.options.aspectRatio>l?h:l/e.options.aspectRatio,i.y2-=p*e.options.aspectRatio>r?p:r/e.options.aspectRatio)}return i}(i.position,n,e):n}function q(a){return"touches"in a&&a.touches[0]?a.touches[0].clientX:"clientX"in a?a.clientX:0}function tt(a){return"touches"in a&&a.touches[0]?a.touches[0].clientY:"clientX"in a?a.clientY:0}class Pe{constructor(){this.options={format:"png",output:"blob",autoCrop:!0,maintainAspectRatio:!0,aspectRatio:1,resetCropOnAspectRatioChange:!0,resizeToWidth:0,resizeToHeight:0,cropperMinWidth:0,cropperMinHeight:0,cropperMaxHeight:0,cropperMaxWidth:0,cropperStaticWidth:0,cropperStaticHeight:0,canvasRotation:0,roundCropper:!1,onlyScaleDown:!1,imageQuality:92,backgroundColor:null,containWithinAspectRatio:!1,hideResizeSquares:!1,alignImage:"center",cropperFrameAriaLabel:void 0,checkImageType:!0},this.cropper={x1:0,x2:0,y1:0,y2:0},this.transform={},this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=3}setOptionsFromChanges(i){i.options?.currentValue&&this.setOptions(i.options.currentValue);const e=Object.entries(i).filter(([n])=>n in this.options).reduce((n,[o,r])=>({...n,[o]:r.currentValue}),{});Object.keys(e).length>0&&this.setOptions(e)}setOptions(i){if(this.options={...this.options,...i||{}},this.validateOptions(),!this.loadedImage?.transformed.image.complete||!this.maxSize)return;let e=!1;this.options.maintainAspectRatio&&i.aspectRatio||i.maintainAspectRatio?(this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.options.maintainAspectRatio&&(this.options.resetCropOnAspectRatioChange||!this.aspectRatioIsCorrect())&&(this.cropper=this.maxSizeCropperPosition(),e=!0)):((i.cropperMinWidth||i.cropperMinHeight)&&(this.setCropperScaledMinSize(),e=!0),(i.cropperMaxWidth||i.cropperMaxHeight)&&(this.setCropperScaledMaxSize(),e=!0),(i.cropperStaticWidth||i.cropperStaticHeight)&&(e=!0)),e&&(this.cropper=Z(this.cropper,this,!1))}validateOptions(){if(this.options.maintainAspectRatio&&!this.options.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}setMaxSize(i,e){this.maxSize={width:i,height:e},this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()}setCropperScaledMinSize(){this.loadedImage?.transformed.size?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.cropperScaledMinWidth=this.options.cropperMinWidth>0?Math.max(20,this.options.cropperMinWidth/this.loadedImage.transformed.size.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.cropperScaledMinHeight=this.options.maintainAspectRatio?Math.max(20,this.cropperScaledMinWidth/this.options.aspectRatio):this.options.cropperMinHeight>0?Math.max(20,this.options.cropperMinHeight/this.loadedImage.transformed.size.height*this.maxSize.height):20}setCropperScaledMaxSize(){if(this.loadedImage?.transformed.size){const i=this.loadedImage.transformed.size.width/this.maxSize.width;this.cropperScaledMaxWidth=this.options.cropperMaxWidth>20?this.options.cropperMaxWidth/i:this.maxSize.width,this.cropperScaledMaxHeight=this.options.cropperMaxHeight>20?this.options.cropperMaxHeight/i:this.maxSize.height,this.options.maintainAspectRatio&&(this.cropperScaledMaxWidth>this.cropperScaledMaxHeight*this.options.aspectRatio?this.cropperScaledMaxWidth=this.cropperScaledMaxHeight*this.options.aspectRatio:this.cropperScaledMaxWidth<this.cropperScaledMaxHeight*this.options.aspectRatio&&(this.cropperScaledMaxHeight=this.cropperScaledMaxWidth/this.options.aspectRatio))}else this.cropperScaledMaxWidth=this.maxSize.width,this.cropperScaledMaxHeight=this.maxSize.height}equalsCropperPosition(i){return null==this.cropper&&null==i||null!=this.cropper&&null!=i&&this.cropper.x1.toFixed(3)===i.x1.toFixed(3)&&this.cropper.y1.toFixed(3)===i.y1.toFixed(3)&&this.cropper.x2.toFixed(3)===i.x2.toFixed(3)&&this.cropper.y2.toFixed(3)===i.y2.toFixed(3)}equalsTransformTranslate(i){return(this.transform.translateH??0)===(i.translateH??0)&&(this.transform.translateV??0)===(i.translateV??0)}equalsTransform(i){return this.equalsTransformTranslate(i)&&(this.transform.scale??1)===(i.scale??1)&&(this.transform.rotate??0)===(i.rotate??0)&&(this.transform.flipH??!1)===(i.flipH??!1)&&(this.transform.flipV??!1)===(i.flipV??!1)}aspectRatioIsCorrect(){return(this.cropper.x2-this.cropper.x1)/(this.cropper.y2-this.cropper.y1)===this.options.aspectRatio}resizeCropperPosition(i){this.cropper&&(i.width!==this.maxSize.width||i.height!==this.maxSize.height)&&(this.cropper={x1:this.cropper.x1*this.maxSize.width/i.width,x2:this.cropper.x2*this.maxSize.width/i.width,y1:this.cropper.y1*this.maxSize.height/i.height,y2:this.cropper.y2*this.maxSize.height/i.height})}maxSizeCropperPosition(){return{x1:0,y1:0,x2:this.maxSize.width,y2:this.maxSize.height}}}var P=function(a){return a.Drag="drag",a.Move="move",a.Resize="resize",a.Pinch="pinch",a}(P||{});function Et(a,i){return a/100*i}class Ge{crop(i,e){const n=this.getImagePosition(i),o=n.x2-n.x1,r=n.y2-n.y1,l=document.createElement("canvas");l.width=o,l.height=r;const p=l.getContext("2d");if(!p)return null;null!=i.options.backgroundColor&&(p.fillStyle=i.options.backgroundColor,p.fillRect(0,0,o,r));const h=(i.transform.scale||1)*(i.transform.flipH?-1:1),R=(i.transform.scale||1)*(i.transform.flipV?-1:1),{translateH:G,translateV:S}=this.getCanvasTranslate(i),E=i.loadedImage.transformed;p.setTransform(h,0,0,R,E.size.width/2+G,E.size.height/2+S),p.translate(-n.x1/h,-n.y1/R),p.rotate((i.transform.rotate||0)*Math.PI/180),p.drawImage(E.image,-E.size.width/2,-E.size.height/2);const w={width:o,height:r,imagePosition:n,cropperPosition:{...i.cropper}};i.options.containWithinAspectRatio&&(w.offsetImagePosition=this.getOffsetImagePosition(i));const $=this.getResizeRatio(o,r,i.options);return 1!==$&&(w.width=Math.round(o*$),w.height=i.options.maintainAspectRatio?Math.round(w.width/i.options.aspectRatio):Math.round(r*$),function Fe(a,i,e){const n=a.width,o=a.height,r=n/(i=Math.round(i)),l=o/(e=Math.round(e)),p=Math.ceil(r/2),h=Math.ceil(l/2),R=a.getContext("2d");if(R){const G=R.getImageData(0,0,n,o),S=R.createImageData(i,e),E=G.data,w=S.data;for(let $=0;$<e;$++)for(let H=0;H<i;H++){const et=4*(H+$*i),ei=$*l;let B=0,it=0,Tt=0,At=0,Ot=0,bt=0,Rt=0;const ii=Math.floor(H*r),ni=Math.floor($*l);let lt=Math.ceil((H+1)*r),ct=Math.ceil(($+1)*l);lt=Math.min(lt,n),ct=Math.min(ct,o);for(let nt=ni;nt<ct;nt++){const wt=Math.abs(ei-nt)/h,oi=H*r,ai=wt*wt;for(let ot=ii;ot<lt;ot++){const zt=Math.abs(oi-ot)/p,j=Math.sqrt(ai+zt*zt);if(j>=1)continue;B=2*j*j*j-3*j*j+1;const V=4*(ot+nt*n);Rt+=B*E[V+3],Tt+=B,E[V+3]<255&&(B=B*E[V+3]/250),At+=B*E[V],Ot+=B*E[V+1],bt+=B*E[V+2],it+=B}}w[et]=At/it,w[et+1]=Ot/it,w[et+2]=bt/it,w[et+3]=Rt/Tt}a.width=i,a.height=e,R.putImageData(S,0,0)}}(l,w.width,w.height)),"blob"===e?this.cropToBlob(w,l,i):(w.base64=l.toDataURL("image/"+i.options.format,this.getQuality(i.options)),w)}cropToBlob(i,e,n){var o=this;return(0,k.c)(function*(){return i.blob=yield new Promise(r=>e.toBlob(r,"image/"+n.options.format,o.getQuality(n.options))),i.blob&&(i.objectUrl=URL.createObjectURL(i.blob)),i})()}getCanvasTranslate(i){if("px"===i.transform.translateUnit){const e=this.getRatio(i);return{translateH:(i.transform.translateH||0)*e,translateV:(i.transform.translateV||0)*e}}return{translateH:i.transform.translateH?Et(i.transform.translateH,i.loadedImage.transformed.size.width):0,translateV:i.transform.translateV?Et(i.transform.translateV,i.loadedImage.transformed.size.height):0}}getRatio(i){return i.loadedImage.transformed.size.width/i.maxSize.width}getImagePosition(i){const e=this.getRatio(i),n={x1:Math.round(i.cropper.x1*e),y1:Math.round(i.cropper.y1*e),x2:Math.round(i.cropper.x2*e),y2:Math.round(i.cropper.y2*e)};return i.options.containWithinAspectRatio||(n.x1=Math.max(n.x1,0),n.y1=Math.max(n.y1,0),n.x2=Math.min(n.x2,i.loadedImage.transformed.size.width),n.y2=Math.min(n.y2,i.loadedImage.transformed.size.height)),n}getOffsetImagePosition(i){const e=i.options.canvasRotation+i.loadedImage.exifTransform.rotate,n=this.getRatio(i);let o,r;e%2?(o=(i.loadedImage.transformed.size.width-i.loadedImage.original.size.height)/2,r=(i.loadedImage.transformed.size.height-i.loadedImage.original.size.width)/2):(o=(i.loadedImage.transformed.size.width-i.loadedImage.original.size.width)/2,r=(i.loadedImage.transformed.size.height-i.loadedImage.original.size.height)/2);const l={x1:Math.round(i.cropper.x1*n)-o,y1:Math.round(i.cropper.y1*n)-r,x2:Math.round(i.cropper.x2*n)-o,y2:Math.round(i.cropper.y2*n)-r};return i.options.containWithinAspectRatio||(l.x1=Math.max(l.x1,0),l.y1=Math.max(l.y1,0),l.x2=Math.min(l.x2,i.loadedImage.transformed.size.width),l.y2=Math.min(l.y2,i.loadedImage.transformed.size.height)),l}getResizeRatio(i,e,n){const o=n.resizeToWidth/i,r=n.resizeToHeight/e,l=new Array;n.resizeToWidth>0&&l.push(o),n.resizeToHeight>0&&l.push(r);const p=0===l.length?1:Math.min(...l);return p>1&&!n.onlyScaleDown?p:Math.min(p,1)}getQuality(i){return Math.min(1,Math.max(0,i.imageQuality/100))}}class We{constructor(){this.autoRotateSupported=function $e(){return new Promise(a=>{const i=new Image;i.onload=()=>{a(1===i.width&&2===i.height)},i.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}()}loadImageFile(i,e){var n=this;return(0,k.c)(function*(){const o=yield i.arrayBuffer();return e.options.checkImageType?yield n.checkImageTypeAndLoadImageFromArrayBuffer(o,i.type,e):yield n.loadImageFromArrayBuffer(o,e)})()}checkImageTypeAndLoadImageFromArrayBuffer(i,e,n){return this.isValidImageType(e)?this.loadImageFromArrayBuffer(i,n,e):Promise.reject(new Error("Invalid image type"))}isValidImageType(i){return/image\/(png|jpg|jpeg|heic|bmp|gif|tiff|svg|webp|x-icon|vnd.microsoft.icon)/.test(i)}loadImageFromURL(i,e){var n=this;return(0,k.c)(function*(){const r=yield(yield fetch(i)).blob(),l=yield r.arrayBuffer();return yield n.loadImageFromArrayBuffer(l,e,r.type)})()}loadBase64Image(i,e){const n=this.base64ToArrayBuffer(i);return this.loadImageFromArrayBuffer(n,e)}base64ToArrayBuffer(i){i=i.replace(/^data:([^;]+);base64,/gim,"");const e=atob(i),n=e.length,o=new Uint8Array(n);for(let r=0;r<n;r++)o[r]=e.charCodeAt(r);return o.buffer}loadImageFromArrayBuffer(i,e,n){var o=this;return(0,k.c)(function*(){const r=yield new Promise(function(){var l=(0,k.c)(function*(p,h){try{const R=new Blob([i],n?{type:n}:void 0),G=URL.createObjectURL(R),S=new Image,w="image/svg+xml"===n?yield o.getSvgImageSize(R):void 0;S.onload=()=>p({originalImage:S,originalImageSize:w,originalObjectUrl:G,originalArrayBuffer:i}),S.onerror=h,S.src=G}catch(R){h(R)}});return function(p,h){return l.apply(this,arguments)}}());return yield o.transformImageFromArrayBuffer(r,e,null!=r.originalImageSize)})()}getSvgImageSize(i){return(0,k.c)(function*(){const o=(new DOMParser).parseFromString(yield i.text(),"image/svg+xml").querySelector("svg");if(!o)throw Error("Failed to parse SVG image");const r=o.getAttribute("width"),l=o.getAttribute("height");if(r&&l)return null;const p=o.getAttribute("viewBox")||o.getAttribute("viewbox");if(p){const h=p.split(" ");return{width:+h[2],height:+h[3]}}throw Error("Failed to load SVG image. SVG must have width + height or viewBox definition.")})()}transformImageFromArrayBuffer(i,e,n=!1){var o=this;return(0,k.c)(function*(){const l=function ke(a){switch("object"==typeof a&&(a=function Be(a){const i=new DataView(a);if(65496!==i.getUint16(0,!1))return-2;const e=i.byteLength;let n=2;for(;n<e;){if(i.getUint16(n+2,!1)<=8)return-1;const o=i.getUint16(n,!1);if(n+=2,65505==o){if(1165519206!==i.getUint32(n+=2,!1))return-1;const r=18761==i.getUint16(n+=6,!1);n+=i.getUint32(n+4,r);const l=i.getUint16(n,r);n+=2;for(let p=0;p<l;p++)if(274==i.getUint16(n+12*p,r))return i.getUint16(n+12*p+8,r)}else{if(65280!=(65280&o))break;n+=i.getUint16(n,!1)}}return-1}(a)),a){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}((yield o.autoRotateSupported)?-1:i.originalArrayBuffer);return i.originalImage&&i.originalImage.complete?o.transformLoadedImage({original:{objectUrl:i.originalObjectUrl,image:i.originalImage,size:i.originalImageSize??{width:i.originalImage.naturalWidth,height:i.originalImage.naturalHeight}},exifTransform:l},e,n):Promise.reject(new Error("No image loaded"))})()}transformLoadedImage(i,e,n=!1){var o=this;return(0,k.c)(function*(){const r=e.options.canvasRotation+i.exifTransform.rotate,l=i.original.size;if(!n&&0===r&&!i.exifTransform.flip&&!e.options.containWithinAspectRatio)return{original:{objectUrl:i.original.objectUrl,image:i.original.image,size:{...l}},transformed:{objectUrl:i.original.objectUrl,image:i.original.image,size:{...l}},exifTransform:i.exifTransform};const p=o.getTransformedSize(l,i.exifTransform,e),h=document.createElement("canvas");h.width=p.width,h.height=p.height;const R=h.getContext("2d");R?.setTransform(i.exifTransform.flip?-1:1,0,0,1,h.width/2,h.height/2),R?.rotate(Math.PI*(r/2)),R?.drawImage(i.original.image,-l.width/2,-l.height/2);const G=yield new Promise(w=>h.toBlob(w,e.options.format));if(!G)throw new Error("Failed to get Blob for transformed image.");const S=URL.createObjectURL(G),E=yield o.loadImageFromObjectUrl(S);return{original:{objectUrl:i.original.objectUrl,image:i.original.image,size:{...l}},transformed:{objectUrl:S,image:E,size:{width:E.width,height:E.height}},exifTransform:i.exifTransform}})()}loadImageFromObjectUrl(i){return new Promise((e,n)=>{const o=new Image;o.onload=()=>e(o),o.onerror=n,o.src=i})}getTransformedSize(i,e,n){const o=n.options.canvasRotation+e.rotate;if(n.options.containWithinAspectRatio){if(o%2){const l=i.height/n.options.aspectRatio;return{width:Math.max(i.height,i.width*n.options.aspectRatio),height:Math.max(i.width,l)}}{const l=i.width/n.options.aspectRatio;return{width:Math.max(i.width,i.height*n.options.aspectRatio),height:Math.max(i.height,l)}}}return o%2?{height:i.width,width:i.height}:{width:i.width,height:i.height}}}let je=(()=>{class a{get alignImageStyle(){return this.state.options.alignImage}constructor(e,n,o){this.sanitizer=e,this.cd=n,this.zone=o,this.pinchStart$=new Ee.E,this.cropService=new Ge,this.loadImageService=new We,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.moveTypes=P,this.state=new Pe,this.safeImgDataUrl=(0,t.OCB)(void 0),this.marginLeft="0px",this.imageVisible=!1,this.allowMoveImage=!1,this.checkImageType=!0,this.disabled=!1,this.hidden=!1,this.imageCropped=new t._w7,this.startCropImage=new t._w7,this.imageLoaded=new t._w7,this.cropperReady=new t._w7,this.loadImageFailed=new t._w7,this.transformChange=new t._w7,this.cropperChange=new t._w7,this.reset()}ngOnInit(){this.state.stepSize=this.initialStepSize||this.state.stepSize}ngOnChanges(e){const n=this.state.cropper,o=this.state.transform,r=this.state.options.backgroundColor;if(this.state.setOptionsFromChanges(e),this.onChangesInputImage(e),e.transform&&this.transform&&(this.state.transform=this.transform,this.setCssTransform()),!this.state.loadedImage?.transformed.image.complete||!this.state.maxSize)return;if(this.containWithinAspectRatio&&e.aspectRatio||e.containWithinAspectRatio||e.canvasRotation)return void this.loadImageService.transformLoadedImage(this.state.loadedImage,this.state).then(p=>this.setLoadedImage(p)).catch(p=>this.loadImageError(p));e.cropper&&this.cropper&&(this.state.cropper=Z(this.cropper,this.state,!0));const l=!this.state.equalsCropperPosition(n);l&&(!this.cropper||!this.state.equalsCropperPosition(this.cropper))&&this.cropperChange.emit(this.state.cropper),(l||!this.state.equalsTransform(o)||this.state.options.backgroundColor!==r)&&this.doAutoCrop(),e.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesInputImage(e){(e.imageChangedEvent||e.imageURL||e.imageBase64||e.imageFile)&&this.reset(),e.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),e.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),e.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),e.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){const e=this.imageChangedEvent?.target?.files;return e instanceof FileList&&e.length>0}reset(){this.safeImgDataUrl.set("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="),this.state.loadedImage=void 0,this.state.maxSize=void 0,this.imageVisible=!1}loadImageFile(e){this.loadImageService.loadImageFile(e,this.state).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}loadBase64Image(e){this.loadImageService.loadBase64Image(e,this.state).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}loadImageFromURL(e){this.loadImageService.loadImageFromURL(e,this.state).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}setLoadedImage(e){this.state.loadedImage=e,this.safeImgDataUrl.set(this.sanitizer.bypassSecurityTrustResourceUrl(e.transformed.objectUrl))}loadImageError(e){console.error(e),this.loadImageFailed.emit()}setCssTransform(){const e=this.state.transform?.translateUnit||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.state.transform.translateH||0}${e}, ${this.state.transform.translateV||0}${e}) scaleX(`+(this.state.transform.scale||1)*(this.state.transform.flipH?-1:1)+") scaleY("+(this.state.transform.scale||1)*(this.state.transform.flipV?-1:1)+") rotate("+(this.state.transform.rotate||0)+"deg)")}imageLoadedInView(){null!=this.state.loadedImage&&(this.imageLoaded.emit(this.state.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),!this.cropper||this.maintainAspectRatio&&!this.state.aspectRatioIsCorrect()?(this.state.cropper=Z(this.state.maxSizeCropperPosition(),this.state,!0),this.cropperChange.emit(this.state.cropper)):(this.state.cropper=Z(this.cropper,this.state,!0),this.emitCropperPositionChange(this.cropper)),this.imageVisible=!0,this.cropperReady.emit({...this.state.maxSize}),this.doAutoCrop(),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage?.nativeElement?.offsetWidth>1}onResize(){if(this.state.loadedImage)if(this.hidden)this.resizedWhileHidden=!0;else{const e={...this.state.maxSize};this.setMaxSize(),this.state.resizeCropperPosition(e),this.cd.markForCheck()}}keyboardAccess(e){this.changeKeyboardStepSize(e),this.keyboardMoveCropper(e)}changeKeyboardStepSize(e){const n=+e.key;n>=1&&n<=9&&(this.state.stepSize=n)}keyboardMoveCropper(e){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key))return;const o=e.shiftKey?P.Resize:P.Move,r=e.altKey?function Ne(a){switch(a){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";default:return"right"}}(e.key):function Ue(a){switch(a){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";default:return"left"}}(e.key),l=function He(a,i){switch(a){case"ArrowUp":return{clientX:0,clientY:-1*i};case"ArrowRight":return{clientX:i,clientY:0};case"ArrowDown":return{clientX:0,clientY:i};default:return{clientX:-1*i,clientY:0}}}(e.key,this.state.stepSize);e.preventDefault(),e.stopPropagation(),this.moveStart={active:!0,type:o,position:r,clientX:0,clientY:0,transform:this.state.transform,cropper:this.state.cropper},this.handleMouseMove(l),this.handleMouseUp()}startMove(e,n,o=null){this.disabled||this.moveStart?.active&&this.moveStart?.type===P.Pinch||n===P.Drag&&!this.allowMoveImage||("preventDefault"in e&&e.preventDefault(),this.moveStart={active:!0,type:n,position:o,clientX:q(e),clientY:tt(e),transform:this.state.transform,cropper:this.state.cropper},this.initMouseMove())}initMouseMove(){(0,_.U)((0,N.w)(document,"mousemove"),(0,N.w)(document,"touchmove")).pipe((0,F.a)((0,_.U)((0,N.w)(document,"mouseup"),(0,N.w)(document,"touchend"),this.pinchStart$).pipe((0,ye.K)()))).subscribe({next:e=>this.zone.run(()=>{this.handleMouseMove(e),this.cd.markForCheck()}),complete:()=>this.zone.run(()=>{this.handleMouseUp(),this.cd.markForCheck()})})}handleMouseMove(e){if(this.moveStart?.active)if("stopPropagation"in e&&e.stopPropagation(),"preventDefault"in e&&e.preventDefault(),this.moveStart.type===P.Move)this.state.cropper=J(function De(a,i){const e=q(a)-i.clientX,n=tt(a)-i.clientY;return{x1:i.cropper.x1+e,y1:i.cropper.y1+n,x2:i.cropper.x2+e,y2:i.cropper.y2+n}}(e,this.moveStart),this.state,!0);else if(this.moveStart.type===P.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&(this.state.cropper=J(yt(e,this.moveStart,this.state),this.state,!1));else if(this.moveStart.type===P.Drag){const n=q(e)-this.moveStart.clientX,o=tt(e)-this.moveStart.clientY;this.state.transform={...this.state.transform,translateH:(this.moveStart.transform?.translateH||0)+n,translateV:(this.moveStart.transform?.translateV||0)+o},this.setCssTransform()}}handleMouseUp(){!this.moveStart?.active||this.moveStart?.type===P.Pinch||((!this.state.equalsCropperPosition(this.moveStart.cropper)||this.moveStart.transform&&!this.state.equalsTransform(this.moveStart.transform))&&(this.moveStart.type===P.Drag?this.transformChange.emit(this.state.transform):this.cropperChange.emit(this.state.cropper),this.doAutoCrop()),this.moveStart=void 0)}startPinch(e){this.disabled||!this.sourceImageLoaded()||e.touches.length<2||("preventDefault"in e&&e.preventDefault(),this.moveStart={active:!0,type:P.Pinch,position:"center",clientX:this.state.cropper.x1+(this.state.cropper.x2-this.state.cropper.x1)/2,clientY:this.state.cropper.y1+(this.state.cropper.y2-this.state.cropper.y1)/2,cropper:this.state.cropper},this.initPinch())}initPinch(){this.pinchStart$.next(),(0,N.w)(document,"touchmove").pipe((0,F.a)((0,N.w)(document,"touchend"))).subscribe({next:e=>this.zone.run(()=>{this.handlePinchMove(e),this.cd.markForCheck()}),complete:()=>this.zone.run(()=>{this.handlePinchStop(),this.cd.markForCheck()})})}handlePinchMove(e){this.moveStart?.active&&(e.preventDefault&&e.preventDefault(),this.moveStart.type===P.Pinch&&!this.cropperStaticWidth&&!this.cropperStaticHeight&&(this.state.cropper=J(yt(e,this.moveStart,this.state),this.state,!1)),this.cd.markForCheck())}handlePinchStop(){this.moveStart?.active&&(this.state.equalsCropperPosition(this.moveStart.cropper)||(this.emitCropperPositionChange(this.moveStart.cropper),this.doAutoCrop()),this.moveStart=void 0)}setMaxSize(){if(this.sourceImage){const e=getComputedStyle(this.sourceImage.nativeElement);this.state.setMaxSize(parseFloat(e.width),parseFloat(e.height)),this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.state.maxSize.width/2+"px)")}}emitCropperPositionChange(e){this.state.equalsCropperPosition(e)||this.cropperChange.emit(this.state.cropper)}doAutoCrop(){this.state.options.autoCrop&&this.crop()}crop(e=this.state.options.output){if(null!=this.state.loadedImage?.transformed?.image){if(this.startCropImage.emit(),"blob"===e)return this.cropToBlob();if("base64"===e)return this.cropToBase64()}return null}cropToBlob(){var e=this;return new Promise((n,o)=>this.zone.run((0,k.c)(function*(){const r=yield e.cropService.crop(e.state,"blob");r?(e.imageCropped.emit(r),n(r)):o("Crop image failed")})))}cropToBase64(){const e=this.cropService.crop(this.state,"base64");return e?(this.imageCropped.emit(e),e):null}ngOnDestroy(){this.pinchStart$.complete()}static#t=this.\u0275fac=function(n){return new(n||a)(t.GI1(Te.mI),t.GI1(t.kD9),t.GI1(t.WW2))};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["image-cropper"]],viewQuery:function(n,o){if(1&n&&(t.CC$(Ae,7),t.CC$(Oe,5)),2&n){let r;t.wto(r=t.Gqi())&&(o.wrapper=r.first),t.wto(r=t.Gqi())&&(o.sourceImage=r.first)}},hostVars:6,hostBindings:function(n,o){1&n&&t.qCj("resize",function(){return o.onResize()},!1,t.MbM),2&n&&(t.m4B("text-align",o.alignImageStyle),t.eAK("disabled",o.disabled)("ngx-ic-hidden",o.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",options:"options",cropperFrameAriaLabel:"cropperFrameAriaLabel",output:"output",format:"format",autoCrop:"autoCrop",cropper:"cropper",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",checkImageType:"checkImageType",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange",cropperChange:"cropperChange"},standalone:!0,features:[t.SYr,t.UHJ],decls:4,vars:10,consts:[[3,"touchstart"],["class","ngx-ic-source-image","role","presentation",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart","error",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],["role","presentation",1,"ngx-ic-source-image",3,"src","load","mousedown","touchstart","error"],["sourceImage",""],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],["role","presentation",1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(n,o){1&n&&(t.I0R(0,"div",0),t.qCj("touchstart",function(l){return o.startPinch(l)}),t.yuY(1,be,2,8,"img",1),t.wR5(2,"div",2),t.yuY(3,we,3,16,"div",3),t.C$Y()),2&n&&(t.m4B("background",o.imageVisible&&o.state.options.backgroundColor),t.yG2(),t.E7m("ngIf",o.safeImgDataUrl()),t.yG2(),t.m4B("width",(null==o.state.maxSize?null:o.state.maxSize.width)||0,"px")("height",(null==o.state.maxSize?null:o.state.maxSize.height)||0,"px")("margin-left","center"===o.alignImage?o.marginLeft:null),t.yG2(),t.E7m("ngIf",o.imageVisible))},dependencies:[W.u_],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:var(--cropper-move-border, 1px solid rgba(255, 255, 255, .5))}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ic-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0})}return a})();function Ye(a,i){1&a&&(t.SAx(0),t.OEk(1,"Fill Aspect Ratio"),t.k70())}function Qe(a,i){1&a&&(t.SAx(0),t.OEk(1,"Contain Within Aspect Ratio"),t.k70())}let Ke=(()=>{class a{constructor(e,n){this.dialogs=e,this.context=n,this.image=(0,t.OCB)(null),this.croppedImageBase64=(0,t.OCB)(null),this.flipH=(0,t.OCB)(void 0),this.flipV=(0,t.OCB)(void 0),this.scale=(0,t.OCB)(void 0),this.rotate=(0,t.OCB)(void 0),this.translateH=(0,t.OCB)(void 0),this.translateV=(0,t.OCB)(void 0),this.translateUnit=(0,t.OCB)(void 0),this.transform=(0,t.S6b)(()=>({scale:this.scale(),rotate:this.rotate(),flipH:this.flipH(),flipV:this.flipV(),translateH:this.translateH(),translateV:this.translateV(),translateUnit:this.translateUnit()})),this.containWithinAspectRatio=(0,t.OCB)(!0),this.aspectRatio=(0,t.OCB)(3/4),this.cropperMinWidth=(0,t.OCB)(256),this.maintainAspectRatio=(0,t.OCB)(!0),this.onlyScaleDown=(0,t.OCB)(!0),this.roundCropper=(0,t.OCB)(!1),console.log("context",{...n}),this.image.set(n.data.image)}ngOnInit(){["maintainAspectRatio","onlyScaleDown","roundCropper","flipH","flipV","containWithinAspectRatio"].forEach(e=>{const n=this.context.data[e];"boolean"==typeof n&&this[e].set(n)}),["aspectRatio","cropperMinWidth","scale","rotate","translateH","translateV"].forEach(e=>{const n=this.context.data[e];"number"==typeof n&&this[e].set(n)})}submit(){const e=this.croppedImageBase64();e&&this.context.completeWith(function Ve(a){const i=a.split(","),e=i[0].replace("data:","").replace(";base64",""),n=atob(i[1]),o=new ArrayBuffer(n.length),r=new Uint8Array(o);for(let l=0;l<n.length;l+=1)r[l]=n.charCodeAt(l);return new Blob([o],{type:e})}(e))}cancel(){this.context.completeWith(null)}imageCropped(e){if("string"!=typeof e.base64){if(e.blob){var n=new FileReader;n.readAsDataURL(e.blob),n.onloadend=()=>{"string"==typeof n.result&&n.result.length>0&&this.croppedImageBase64.set(n.result)}}}else this.croppedImageBase64.set(e.base64)}resetImage(){this.scale.set(void 0),this.rotate.set(void 0),this.flipH.set(void 0),this.flipV.set(void 0),this.translateH.set(void 0),this.translateV.set(void 0),this.translateUnit.set(void 0)}imageLoaded(){this.resetImage()}rotateLeft(){this.rotate.update(e=>(e??0)-90)}rotateRight(){this.rotate.update(e=>(e??0)+90)}flipHorizontal(){this.flipH.update(e=>!e)}flipVertical(){this.flipV.update(e=>!e)}zoomOut(){this.scale.update(e=>(e??1)-.1)}zoomIn(){this.scale.update(e=>(e??1)+.1)}static#t=this.\u0275fac=function(n){return new(n||a)(t.GI1(It._k),t.GI1(K.C0))};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["app-resize-image-modal"]],standalone:!0,features:[t.UHJ],decls:35,vars:28,consts:()=>{let e,n,o,r,l,p,h,R,G,S;return e="Ridimensiona l'immagine",n="Puoi decidere se ritagliare o ridimensionare l'immagine in questione. Quando hai finito, prosegui cliccando 'conferma' in fondo a questa pagina.",o="Ruota a sinistra",r="Ruota a destra",l="Ruota in orizzontale",p="Ruota in verticale",h="Reimposta",R="Risultato",G="Conferma",S="Annulla",[[1,"text-2xl"],e,[1,"text-slate-400"],n,[1,"mb-3"],["format","png","output","blob",3,"imageFile","maintainAspectRatio","containWithinAspectRatio","cropperMinWidth","aspectRatio","onlyScaleDown","roundCropper","transform","alignImage","imageCropped","imageLoaded"],[1,"d-inline-block","my-2"],["tuiButton","","type","button",1,"mb-2","text-nowrap","mx-2",3,"appearance","size","click"],o,r,l,p,h,["tuiButton","","size","s","type","button",1,"mb-2","text-nowrap","mx-2",3,"appearance","click"],R,[1,"mx-auto","border","w-100",3,"src"],[1,"flex","items-center"],["tuiButton","","type","button",3,"appearance","size","click"],G,["tuiButton","","appearance","icon","type","button",3,"size","click"],S]},template:function(n,o){if(1&n&&(t.I0R(0,"h3",0),t.aS0(1,1),t.C$Y(),t.I0R(2,"p",2),t.aS0(3,3),t.C$Y(),t.I0R(4,"div",4)(5,"image-cropper",5),t.qCj("imageCropped",function(l){return o.imageCropped(l)})("imageLoaded",function(){return o.imageLoaded()}),t.C$Y()(),t.I0R(6,"div",6)(7,"button",7),t.qCj("click",function(){return o.rotateLeft()}),t.aS0(8,8),t.C$Y(),t.I0R(9,"button",7),t.qCj("click",function(){return o.rotateRight()}),t.aS0(10,9),t.C$Y(),t.I0R(11,"button",7),t.qCj("click",function(){return o.flipHorizontal()}),t.aS0(12,10),t.C$Y(),t.I0R(13,"button",7),t.qCj("click",function(){return o.flipVertical()}),t.aS0(14,11),t.C$Y(),t.I0R(15,"button",7),t.qCj("click",function(){return o.containWithinAspectRatio.set(!o.containWithinAspectRatio())}),t.yuY(16,Ye,2,0,"ng-container")(17,Qe,2,0),t.C$Y(),t.I0R(18,"button",7),t.qCj("click",function(){return o.resetImage()}),t.aS0(19,12),t.C$Y(),t.I0R(20,"button",13),t.qCj("click",function(){return o.zoomOut()}),t.OEk(21,"Zoom -"),t.C$Y(),t.I0R(22,"button",13),t.qCj("click",function(){return o.zoomIn()}),t.OEk(23,"Zoom +"),t.C$Y()(),t.I0R(24,"h3",0),t.aS0(25,14),t.C$Y(),t.I0R(26,"div",4),t.wR5(27,"img",15),t.C$Y(),t.I0R(28,"div",16)(29,"button",17),t.qCj("click",function(){return o.submit()}),t.SAx(30),t.aS0(31,18),t.k70(),t.C$Y(),t.I0R(32,"button",19),t.qCj("click",function(){return o.cancel()}),t.SAx(33),t.aS0(34,20),t.k70(),t.C$Y()()),2&n){let r;t.yG2(5),t.E7m("imageFile",null!==(r=o.image())&&void 0!==r?r:void 0)("maintainAspectRatio",o.maintainAspectRatio())("containWithinAspectRatio",o.containWithinAspectRatio())("cropperMinWidth",o.cropperMinWidth())("aspectRatio",o.aspectRatio())("onlyScaleDown",o.onlyScaleDown())("roundCropper",o.roundCropper())("transform",o.transform())("alignImage","left"),t.yG2(2),t.E7m("appearance","outline")("size","s"),t.yG2(2),t.E7m("appearance","outline")("size","s"),t.yG2(2),t.E7m("appearance","outline")("size","s"),t.yG2(2),t.E7m("appearance","outline")("size","s"),t.yG2(2),t.E7m("appearance","outline")("size","s"),t.yG2(),t.C0Y(16,o.containWithinAspectRatio()?16:17),t.yG2(2),t.E7m("appearance","outline")("size","s"),t.yG2(2),t.E7m("appearance","outline"),t.yG2(2),t.E7m("appearance","outline"),t.yG2(5),t.E7m("src",o.croppedImageBase64(),t.K6U),t.yG2(2),t.E7m("appearance","primary")("size","xl"),t.yG2(3),t.E7m("size","xl")}},dependencies:[je,U.CI,U.Kw],encapsulation:2})}return a})();var Xe=s(8392);function Ze(a,i){if(1&a){const e=t.KQA();t.I0R(0,"div",2)(1,"div",3)(2,"div",4)(3,"button",5),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.emit(o.control.value))}),t.I0R(4,"mat-icon"),t.OEk(5,"check"),t.C$Y()(),t.I0R(6,"button",5),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.fireResizeModal())}),t.I0R(7,"mat-icon"),t.OEk(8,"edit"),t.C$Y()(),t.I0R(9,"button",6),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.resetControl())}),t.I0R(10,"mat-icon"),t.OEk(11,"delete"),t.C$Y()()()(),t.wR5(12,"app-show-image",7),t.C$Y()}if(2&a){const e=t.GaO();t.yG2(3),t.E7m("tuiHint","Conferma")("disabled",e.control.disabled)("showLoader",e.loading),t.yG2(3),t.E7m("tuiHint","Ridimensiona e ritaglia")("disabled",e.control.disabled)("showLoader",e.loading),t.yG2(3),t.E7m("tuiHint","Rimuovi immagine")("disabled",e.control.disabled)("showLoader",e.loading),t.yG2(3),t.E7m("image",e.control.value)}}function Je(a,i){if(1&a&&t.wR5(0,"tui-input-files",1),2&a){const e=t.GaO();t._6D("accept",e.accept),t.E7m("formControl",e.control)("label",e.label)("link",e.link)}}const qe=["*"];let ti=(()=>{class a{constructor(){this.destroy$=(0,t.uUt)(T.UF),this.dialogs=(0,t.uUt)(It._k),this.injector=(0,t.uUt)(t.zZn),this.notifications=(0,t.uUt)(Ie.E),this.control=new g.Ku(null),this.loading=!1,this.link="Scegli un'immagine",this.label="oppure trascinala qui",this.accept="image/*",this.cropperSettings=null,this.imageChange=new t._w7}ngOnInit(){this.control.valueChanges.pipe((0,F.a)(this.destroy$)).subscribe({next:e=>{e instanceof File&&this.fireResizeModal()}})}registerOnChange(e){this.imageChange.pipe((0,F.a)(this.destroy$)).subscribe({next:n=>e(n)})}registerOnTouched(e){this.imageChange.pipe((0,F.a)(this.destroy$)).subscribe({next:()=>e()})}writeValue(e){e instanceof File?this.control.setValue(e):null!=e?console.warn("Invalid value for ImageInputComponent",e):this.control.setValue(null)}resetControl(){this.control.reset()}emit(e){this.imageChange.emit(e)}fireResizeModal(){const e=this.control.value;e&&this.dialogs.open(new K.WO(Ke,this.injector),{size:"l",closeable:!0,dismissible:!0,data:{...this.cropperSettings||{},image:e}}).subscribe({next:n=>{n?this.emit(n):this.control.setValue(null,{emitEvent:!0})},error:n=>{this.notifications.error(Xe.a)}})}static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["app-image-input"]],inputs:{loading:"loading",link:"link",label:"label",accept:"accept",cropperSettings:"cropperSettings"},outputs:{imageChange:"imageChange"},standalone:!0,features:[t.M5G([{provide:g.Y6,useExisting:(0,t.wd)(()=>a),multi:!0},T.UF]),t.UHJ],ngContentSelectors:qe,decls:3,vars:2,consts:[["class","block items-center border border-solid rounded-sm border-slate-200 relative my-1 p-2"],[3,"accept","formControl","label","link"],[1,"block","items-center","border","border-solid","rounded-sm","border-slate-200","relative","my-1","p-2"],[1,"!absolute","me-1","mt-1","top-0","right-0"],[1,"flex","flex-col"],["size","m","appearance","outline","tuiIconButton","","type","button",1,"mb-2",3,"tuiHint","disabled","showLoader","click"],["size","m","appearance","secondary-destructive","tuiIconButton","","type","button",1,"mb-2",3,"tuiHint","disabled","showLoader","click"],[1,"mx-auto",2,"max-width","300px",3,"image"]],template:function(n,o){1&n&&(t.kPM(),t._Xx(0),t.yuY(1,Ze,13,10,"div",0)(2,Je,1,4,"tui-input-files",1)),2&n&&(t.yG2(),t.C0Y(1,o.control.value?1:-1),t.yG2(),t.C0Y(2,o.control.value?-1:2))},dependencies:[W.MD,M.CQ,xe,Mt,g.sl,g.ue,g.ug,U.CI,U.Kw,Ce.qL,Me.y,X.WY,X.lh,X.SL,X.i6,X.IT],changeDetection:0})}return a})()},9052:(L,O,s)=>{s.d(O,{y:()=>_});var t=s(4496),M=s(7760),A=s(6700),g=s(7368),m=s(2700),T=s(1368);function u(v,b){if(1&v&&(t.wR5(0,"img",1),t.wVc(1,"async")),2&v){const x=t.GaO();t.m8U(x.imgClass),t._6D("src",t.kDX(1,5,x.imageSrc$),t.K6U),t.E7m("draggable",!1)}}let _=(()=>{class v{constructor(){this.noImage="/assets/img/no-image.jpg",this.imagesService=(0,t.uUt)(M.U),this.imgClass="block rounded",this.image$=new A.g(null),this.imageSrc$=this.image$.pipe((0,g.G)(x=>x instanceof File?(0,m.of)(URL.createObjectURL(x)):x&&x.id?this.imagesService.downloadUrl(x.id):(0,m.of)(this.noImage)))}set image(x){this.image$.next(x??null)}static#t=this.\u0275fac=function(z){return new(z||v)};static#e=this.\u0275cmp=t.In1({type:v,selectors:[["app-show-image"]],inputs:{imgClass:"imgClass",image:"image"},standalone:!0,features:[t.UHJ],decls:2,vars:3,consts:[[3,"draggable","class","src"],[3,"draggable","src"]],template:function(z,C){1&z&&(t.yuY(0,u,2,7,"img",0),t.wVc(1,"async")),2&z&&t.C0Y(0,t.kDX(1,1,C.imageSrc$)?0:-1)},dependencies:[T.a],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}"],changeDetection:0})}return v})()},1292:(L,O,s)=>{s.d(O,{S:()=>t});const t={it:"Italiano",en:"Inglese",es:"Spagnolo",fr:"Francese",de:"Tedesco",pt:"Portoghese",ru:"Russo",zh:"Cinese",ja:"Giapponese",ar:"Arabo",hi:"Hindi",bn:"Bengalese",pa:"Punjabi",ms:"Malese"}},2264:(L,O,s)=>{s.d(O,{W:()=>M});var t=s(8400);class M extends t.w{constructor(g){super(g),this.filename=g.filename,this.status=g.status,this.key=g.key,this.original_id=g.original_id,this.tag=g.tag,this.url=g.url}}},7760:(L,O,s)=>{s.d(O,{U:()=>g});var t=s(6012),M=s(2264),A=s(4496);let g=(()=>{class m extends t.s{constructor(){super(M.W,"images")}removeFromRecord(u,_){return this.patch(`${u}/remove_from_record`,{record_type:_.record_type,record_id:_.record_id})}updateRecord(u,_){return this.patch("record",{image_ids:_,record_type:u.record_type,record_id:u.record_id})}downloadUrl(u){return this.url(`${u}/download`)}static#t=this.\u0275fac=function(_){return new(_||m)};static#e=this.\u0275prov=A.wxM({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},832:(L,O,s)=>{s.d(O,{I:()=>g,w:()=>A});var t=s(4496),M=s(3480);let A=(()=>{class m{constructor(u){this.tuiFocusVisibleChange=u}}return m.\u0275fac=function(u){return new(u||m)(t.GI1(M.MF))},m.\u0275dir=t.Sc5({type:m,selectors:[["","tuiFocusVisibleChange",""]],outputs:{tuiFocusVisibleChange:"tuiFocusVisibleChange"},features:[t.M5G([M.UF,M.MF])]}),m})(),g=(()=>{class m{}return m.\u0275fac=function(u){return new(u||m)},m.\u0275mod=t.a4G({type:m}),m.\u0275inj=t.s3X({}),m})()},1096:(L,O,s)=>{s.d(O,{O:()=>b,h:()=>v});var t=s(4496),M=s(900),A=s(4164),g=s(3412),m=s(4704),T=s(5568),u=s(4e3),_=s(2644);let v=(()=>{class x{constructor({nativeElement:C},F){this.tuiFocusedChange=(0,g.U)((0,M.Ax)(C,"focusin"),(0,M.Ax)(C,"focusout")).pipe((0,m.k)(()=>(0,A.ER)(C)),(0,T.W)(!1),(0,u.a)(),(0,_.s)(1),(0,M.OA)(F))}}return x.\u0275fac=function(C){return new(C||x)(t.GI1(t.GMv),t.GI1(t.WW2))},x.\u0275dir=t.Sc5({type:x,selectors:[["","tuiFocusedChange",""]],outputs:{tuiFocusedChange:"tuiFocusedChange"}}),x})(),b=(()=>{class x{}return x.\u0275fac=function(C){return new(C||x)},x.\u0275mod=t.a4G({type:x}),x.\u0275inj=t.s3X({}),x})()},1588:(L,O,s)=>{s.d(O,{S:()=>M,s:()=>A});var t=s(4496);let M=(()=>{class g{}return g.\u0275fac=function(T){return new(T||g)},g.\u0275dir=t.Sc5({type:g,selectors:[["","tuiItem",""]]}),g})(),A=(()=>{class g{}return g.\u0275fac=function(T){return new(T||g)},g.\u0275mod=t.a4G({type:g}),g.\u0275inj=t.s3X({}),g})()},1200:(L,O,s)=>{s.d(O,{A:()=>T,m:()=>u});var t=s(4496),M=s(900),A=s(3480),g=s(800),m=s(3616);let T=(()=>{class _{constructor(b,x,z){this.el=b,this.zone=x,this.destroy$=z,this.eventName=""}ngOnInit(){(0,g.w)(this.el.nativeElement,this.eventName,{passive:!1}).pipe((0,M.Uv)(this.zone),(0,M.uy)(),(0,m.a)(this.destroy$)).subscribe()}}return _.\u0275fac=function(b){return new(b||_)(t.GI1(t.GMv),t.GI1(t.WW2),t.GI1(A.UF,2))},_.\u0275dir=t.Sc5({type:_,selectors:[["","tuiPreventDefault",""]],inputs:{eventName:[t.Wk5.None,"tuiPreventDefault","eventName"]},features:[t.M5G([A.UF])]}),_})(),u=(()=>{class _{}return _.\u0275fac=function(b){return new(b||_)},_.\u0275mod=t.a4G({type:_}),_.\u0275inj=t.s3X({}),_})()},9880:(L,O,s)=>{s.d(O,{kP:()=>z,kh:()=>Q,st:()=>Y});var t=s(4496),M=s(3480),A=s(4392),g=s(3120),m=s(3616),T=s(7692),u=s(1368);const _=["wrapper"];function v(y,I){if(1&y&&(t.I0R(0,"tui-loader",4),t.C_f(1,5),t.C$Y()),2&y){const d=t.GaO(2);t.E7m("overlay",!0)("showLoader",d.loading),t.yG2(),t.E7m("ngTemplateOutlet",d.content)}}function b(y,I){if(1&y&&(t.SAx(0),t._Xx(1),t.yuY(2,v,2,3,"tui-loader",3),t.k70()),2&y){const d=t.GaO();t.yG2(2),t.E7m("ngIf",d.async)("ngIfElse",d.content)}}const x=["*"];let z=(()=>{class y{}return y.\u0275fac=function(d){return new(d||y)},y.\u0275dir=t.Sc5({type:y,selectors:[["","tuiExpandContent",""]]}),y})();let Y=(()=>{class y{constructor(d,c){this.cdr=d,this.destroy$=c,this.state=0,this.async=!1,this.content=null,this.expanded=null}set expandedSetter(d){if(null!==this.expanded)return 0!==this.state?(this.expanded=d,void(this.state=3)):(this.expanded=d,void this.retrigger(this.async&&d?1:3));this.expanded=d}get overflow(){return 0!==this.state}get loading(){return!!this.expanded&&this.async&&1===this.state}get height(){const{expanded:d,state:c,contentWrapper:f}=this;return d&&2===c||!d&&3===c?0:f&&(!d&&2===c||d&&3===c)?f.nativeElement.offsetHeight:f&&d&&1===c?Math.max(f.nativeElement.offsetHeight,48):null}get contentVisible(){return this.expanded||0!==this.state}onTransitionEnd({propertyName:d}){"opacity"===d&&3===this.state&&(this.state=0)}onExpandLoaded(d){d.stopPropagation(),1===this.state&&this.retrigger(3)}retrigger(d){this.state=2,(0,g.k)(0).pipe((0,m.a)(this.destroy$)).subscribe(()=>{2===this.state&&(this.state=d,this.cdr.markForCheck())})}}return y.\u0275fac=function(d){return new(d||y)(t.GI1(t.kD9),t.GI1(M.UF,2))},y.\u0275cmp=t.In1({type:y,selectors:[["tui-expand"]],contentQueries:function(d,c,f){if(1&d&&t.szK(f,z,5,t.Yw2),2&d){let D;t.wto(D=t.Gqi())&&(c.content=D.first)}},viewQuery:function(d,c){if(1&d&&t.CC$(_,5),2&d){let f;t.wto(f=t.Gqi())&&(c.contentWrapper=f.first)}},hostVars:9,hostBindings:function(d,c){1&d&&t.qCj("transitionend.self",function(D){return c.onTransitionEnd(D)})("tui-expand-loaded",function(D){return c.onExpandLoaded(D)}),2&d&&(t.e48("aria-expanded",c.expanded),t.m4B("height",c.height,"px"),t.eAK("_expanded",c.expanded)("_overflow",c.overflow)("_loading",c.loading))},inputs:{async:"async",expandedSetter:[t.Wk5.None,"expanded","expandedSetter"]},features:[t.M5G([M.UF])],ngContentSelectors:x,decls:3,vars:3,consts:[[1,"t-wrapper"],["wrapper",""],[4,"ngIf"],["size","l",3,"overlay","showLoader",4,"ngIf","ngIfElse"],["size","l",3,"overlay","showLoader"],[3,"ngTemplateOutlet"]],template:function(d,c){1&d&&(t.kPM(),t.I0R(0,"div",0,1),t.yuY(2,b,3,2,"ng-container",2),t.C$Y()),2&d&&(t.E7m("@tuiParentAnimation",void 0)("@.disabled",c.overflow),t.yG2(2),t.E7m("ngIf",c.contentVisible))},dependencies:[T.Cb,u.u_,u.XV],styles:['[_nghost-%COMP%]{transition-property:opacity,height,visibility;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;display:block;opacity:0;transition-delay:1ms}._overflow[_nghost-%COMP%]{overflow:hidden}._expanded[_nghost-%COMP%]{opacity:1;transform:translate(0)}._loading[_nghost-%COMP%]{opacity:.99}.t-wrapper[_ngcontent-%COMP%]:before, .t-wrapper[_ngcontent-%COMP%]:after{content:"";display:table}'],data:{animation:[A.cI]},changeDetection:0}),y})(),Q=(()=>{class y{}return y.\u0275fac=function(d){return new(d||y)},y.\u0275mod=t.a4G({type:y}),y.\u0275inj=t.s3X({imports:[[u.MD,T.Sk]]}),y})()},8976:(L,O,s)=>{s.d(O,{Gy:()=>T,Ko:()=>m});var t=s(4496),M=s(3480),A=s(1368);let g=(()=>{class u{}return u.\u0275fac=function(v){return new(v||u)},u.\u0275cmp=t.In1({type:u,selectors:[["ng-component"]],hostAttrs:[1,"tui-group-styles"],decls:0,vars:0,template:function(v,b){},styles:[".tui-group{position:relative;display:flex;isolation:isolate}.tui-group>*{flex:1 1 0;min-width:0}.tui-group>*:not(:last-child){margin-right:.125rem}.tui-group.tui-group>*:nth-child(n){border-radius:0}.tui-group_collapsed>*{z-index:1}.tui-group_collapsed>*:not(:last-child){margin-right:-1px}.tui-group_collapsed>*._readonly,.tui-group_collapsed>*._disabled,.tui-group_collapsed>*._readonly:hover,.tui-group_collapsed>*._disabled:hover{z-index:0}.tui-group_collapsed>*:hover,.tui-group_collapsed>*._hovered,.tui-group_collapsed>*._pressed{z-index:3}.tui-group_collapsed>*._invalid{z-index:2}.tui-group_collapsed>*._invalid:hover,.tui-group_collapsed>*._invalid._hovered,.tui-group_collapsed>*._invalid._pressed{z-index:4}.tui-group_collapsed>*._hosted_dropdown_focused,.tui-group_collapsed>*._focus-visible,.tui-group_collapsed>*._focused.ng-touched,.tui-group_collapsed>*._focused.ng-untouched{z-index:5}.tui-group_collapsed>*._active,.tui-group_collapsed>*[data-appearance=whiteblock-active]{z-index:6}.tui-group_collapsed>*._focus-visible._focused,.tui-group_collapsed>*._focus-visible._active,.tui-group_collapsed>*._focus-visible[data-appearance=whiteblock-active]{z-index:7}.tui-group_orientation_vertical{display:inline-flex;flex-direction:column}.tui-group_orientation_vertical>*{min-height:auto;flex:0 0 auto}.tui-group_orientation_vertical>*:not(:last-child){margin-right:0;margin-bottom:.125rem}.tui-group_orientation_vertical.tui-group_collapsed>*:not(:last-child){margin-right:0;margin-bottom:-1px}.tui-group_rounded.tui-group_orientation_horizontal>*:first-child{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_horizontal>*:last-child{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_horizontal.tui-group_radius_large>*:first-child{border-top-left-radius:var(--tui-radius-l);border-bottom-left-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_horizontal.tui-group_radius_large>*:last-child{border-top-right-radius:var(--tui-radius-l);border-bottom-right-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_vertical>*:first-child{border-top-left-radius:var(--tui-radius-m);border-top-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_vertical>*:last-child{border-bottom-left-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_vertical.tui-group_radius_large>*:first-child{border-top-left-radius:var(--tui-radius-l);border-top-right-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_vertical.tui-group_radius_large>*:last-child{border-bottom-left-radius:var(--tui-radius-l);border-bottom-right-radius:var(--tui-radius-l)}@media screen and (max-width: 47.9625em){.tui-group_rounded.tui-group_adaptive.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_horizontal>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:last-child:not(:first-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_horizontal>*:last-child:not(:first-child){border-radius:var(--tui-radius-m)}}@media screen and (max-width: 47.9625em){.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:last-child:not(:first-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:last-child:not(:first-child){border-radius:var(--tui-radius-l)}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_orientation_vertical{width:100%}.tui-group_adaptive.tui-group_orientation_vertical>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_vertical>*:not(:last-child){margin-bottom:1rem}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-m) var(--tui-radius-m) 0 0}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-m) var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:not(:last-child){margin-bottom:-1px}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_orientation_horizontal{flex-direction:column;width:100%}.tui-group_adaptive.tui-group_orientation_horizontal>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_horizontal>*:not(:last-child){margin-right:0;margin-bottom:1rem}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-m) var(--tui-radius-m) 0 0}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-m) var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:not(:last-child){margin-right:0;margin-bottom:-1px}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-l)}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-l) var(--tui-radius-l)}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-l)}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-l) var(--tui-radius-l)}}.tui-group__auto-width-item{min-width:auto;flex:0 0 auto}.tui-group .tui-group__inherit-item{border-radius:inherit}\n"],encapsulation:2,changeDetection:0}),u})(),m=(()=>{class u{constructor(v){this.orientation="horizontal",this.adaptive=!1,this.collapsed=!1,this.rounded=!0,this.size="m",v.addComponent(g)}get orientationHorizontal(){return"horizontal"===this.orientation}get orientationVertical(){return"vertical"===this.orientation}get sizeLarge(){return"l"===this.size}}return u.\u0275fac=function(v){return new(v||u)(t.GI1(M.WS))},u.\u0275dir=t.Sc5({type:u,selectors:[["","tuiGroup","",5,"ng-container"]],hostAttrs:["role","group",1,"tui-group"],hostVars:12,hostBindings:function(v,b){2&v&&t.eAK("tui-group_adaptive",b.adaptive)("tui-group_collapsed",b.collapsed)("tui-group_rounded",b.rounded)("tui-group_orientation_horizontal",b.orientationHorizontal)("tui-group_orientation_vertical",b.orientationVertical)("tui-group_radius_large",b.sizeLarge)},inputs:{orientation:"orientation",adaptive:"adaptive",collapsed:"collapsed",rounded:"rounded",size:"size"}}),u})(),T=(()=>{class u{}return u.\u0275fac=function(v){return new(v||u)},u.\u0275mod=t.a4G({type:u}),u.\u0275inj=t.s3X({imports:[[A.MD]]}),u})()}}]);