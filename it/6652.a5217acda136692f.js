"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[6652],{8940:(L,C,e)=>{e.r(C),e.d(C,{AdminDashboardComponent:()=>lt});var t=e(4496),m=e(1368),u=e(4476),_=e(1528),h=e(2540),d=e(6928),y=e(5657),f=e(112),n=e(3252),O=e(5800),$=e(7368);class p{constructor(){this.subject=new h.o(1),this.subscriptions=new d.wH}doFilter(g){this.subject.next(g)}dispose(){this.subscriptions.unsubscribe()}notEmpty(g,o){this.subscriptions.add(this.subject.subscribe(i=>{if(i[g]){const a=i[g].currentValue;null!=a&&o(a)}}))}has(g,o){this.subscriptions.add(this.subject.subscribe(i=>{i[g]&&o(i[g].currentValue)}))}notFirst(g,o){this.subscriptions.add(this.subject.subscribe(i=>{i[g]&&!i[g].isFirstChange()&&o(i[g].currentValue)}))}notFirstAndEmpty(g,o){this.subscriptions.add(this.subject.subscribe(i=>{if(i[g]&&!i[g].isFirstChange()){const a=i[g].currentValue;null!=a&&o(a)}}))}}const v=new t.UbH("NGX_ECHARTS_CONFIG");let E=(()=>{class r{constructor(o,i,a){this.el=i,this.ngZone=a,this.options=null,this.theme=null,this.initOpts=null,this.merge=null,this.autoResize=!0,this.loading=!1,this.loadingType="default",this.loadingOpts=null,this.chartInit=new t._w7,this.optionsError=new t._w7,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartHighlight=this.createLazyEvent("highlight"),this.chartDownplay=this.createLazyEvent("downplay"),this.chartSelectChanged=this.createLazyEvent("selectchanged"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendLegendSelectAll=this.createLazyEvent("legendselectall"),this.chartLegendLegendInverseSelect=this.createLazyEvent("legendinverseselect"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartGraphRoam=this.createLazyEvent("graphroam"),this.chartGeoRoam=this.createLazyEvent("georoam"),this.chartTreeRoam=this.createLazyEvent("treeroam"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartGeoSelectChanged=this.createLazyEvent("geoselectchanged"),this.chartGeoSelected=this.createLazyEvent("geoselected"),this.chartGeoUnselected=this.createLazyEvent("geounselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartGlobalCursorTaken=this.createLazyEvent("globalcursortaken"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.chart$=new h.o(1),this.resize$=new y.E,this.changeFilter=new p,this.resizeObFired=!1,this.echarts=o.echarts,this.theme=o.theme||null}ngOnChanges(o){this.changeFilter.doFilter(o)}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe((0,O.U)(100,f.M,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(o=>{for(const i of o)i.target===this.el.nativeElement&&(this.resizeObFired?this.animationFrameID=window.requestAnimationFrame(()=>{this.resize$.next()}):this.resizeObFired=!0)})),this.resizeOb.observe(this.el.nativeElement)),this.changeFilter.notFirstAndEmpty("options",o=>this.onOptionsChange(o)),this.changeFilter.notFirstAndEmpty("merge",o=>this.setOption(o)),this.changeFilter.has("loading",o=>this.toggleLoading(!!o)),this.changeFilter.notFirst("theme",()=>this.refreshChart())}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.loadingSub&&this.loadingSub.unsubscribe(),this.changeFilter.dispose(),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(o){this.chart?o?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading():this.loadingSub=this.chart$.subscribe(i=>o?i.showLoading(this.loadingType,this.loadingOpts):i.hideLoading())}setOption(o,i){if(this.chart)try{this.chart.setOption(o,i)}catch(a){console.error(a),this.optionsError.emit(a)}}refreshChart(){var o=this;return(0,_.c)(function*(){o.dispose(),yield o.initChart()})()}createChart(){const o=this.el.nativeElement;if(window&&window.getComputedStyle){const i=window.getComputedStyle(o,null).getPropertyValue("height");(!i||"0px"===i)&&(!o.style.height||"0px"===o.style.height)&&(o.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:a})=>a(o,this.theme,this.initOpts)))}initChart(){var o=this;return(0,_.c)(function*(){yield o.onOptionsChange(o.options),o.merge&&o.chart&&o.setOption(o.merge)})()}onOptionsChange(o){var i=this;return(0,_.c)(function*(){o&&(i.chart||(i.chart=yield i.createChart(),i.chart$.next(i.chart),i.chartInit.emit(i.chart)),i.setOption(i.options,!0))})()}createLazyEvent(o){return this.chartInit.pipe((0,$.G)(i=>new n._(a=>(i.on(o,N=>this.ngZone.run(()=>a.next(N))),()=>{this.chart&&(this.chart.isDisposed()||i.off(o))}))))}static#t=this.\u0275fac=function(i){return new(i||r)(t.GI1(v),t.GI1(t.GMv),t.GI1(t.WW2))};static#e=this.\u0275dir=t.Sc5({type:r,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loading:"loading",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartHighlight:"chartHighlight",chartDownplay:"chartDownplay",chartSelectChanged:"chartSelectChanged",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendLegendSelectAll:"chartLegendLegendSelectAll",chartLegendLegendInverseSelect:"chartLegendLegendInverseSelect",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartGraphRoam:"chartGraphRoam",chartGeoRoam:"chartGeoRoam",chartTreeRoam:"chartTreeRoam",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartGeoSelectChanged:"chartGeoSelectChanged",chartGeoSelected:"chartGeoSelected",chartGeoUnselected:"chartGeoUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartGlobalCursorTaken:"chartGlobalCursorTaken",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],standalone:!0,features:[t.SYr]})}return r})();const x=(r={})=>({provide:v,useFactory:()=>({...r,echarts:()=>e.e(8820).then(e.bind(e,8820))})});var c=e(7692);const l=()=>({});let D=(()=>{class r{constructor(){this.loading=!1}ngOnChanges(o){o.stats&&this.refresh()}onChartInit(o){this.echart=o,this.refresh()}refresh(){this.stats&&this.stats["reservations-by-hour"]&&this.echart?.setOption(this.dataLoadedUpdateChart(this.stats["reservations-by-hour"]))}dataLoadedUpdateChart(o){const i=Object.keys(o),a=Object.values(o);return{xAxis:{type:"category",data:i,name:"Data e ora"},yAxis:{type:"value",name:"Prenotati"},series:[{data:a,type:"bar"}]}}static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275cmp=t.In1({type:r,selectors:[["app-reservations-by-hour-bar-chart"]],inputs:{loading:"loading",stats:"stats"},standalone:!0,features:[t.M5G([x()]),t.SYr,t.UHJ],decls:2,vars:3,consts:[[3,"showLoader"],["echarts","",3,"options","chartInit"]],template:function(i,a){1&i&&(t.I0R(0,"tui-loader",0)(1,"div",1),t.qCj("chartInit",function(w){return a.onChartInit(w)}),t.C$Y()()),2&i&&(t.E7m("showLoader",a.loading),t.yG2(),t.E7m("options",t.q4q(2,l)))},dependencies:[E,c.Sk,c.Cb],encapsulation:2,changeDetection:0})}return r})();var M=e(1512),A=e(5656),b=e(8212),B=e(1236),K=e(7048),W=e(8256),Y=e(8392),j=e(6772),X=e(964);var U=e(4704);let Q=(()=>{class r extends j.A{constructor(){super("/admin/stats")}stats(o={}){return this.http.get("",{params:o}).pipe((0,U.k)(i=>function Z(r){return"object"==typeof r&&null!==r&&function V(r){return"object"==typeof r&&null!==r&&Object.keys(r).every(g=>"string"==typeof g&&"number"==typeof r[g])}(r["reservations-by-hour"])}(i)?i:(console.warn("Invalid stats response",i),{})),(0,U.k)(i=>function J(r){const g={...r};if(g["reservations-by-hour"]&&r["reservations-by-hour"]){g["reservations-by-hour"]={};for(const[o,i]of Object.entries(r["reservations-by-hour"]))g["reservations-by-hour"][(0,X.Q9)(o)]=i}return g}(i)))}static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275prov=t.wxM({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var q=e(1128),tt=e(3480),et=e(3616),nt=e(8824),k=e(6376),F=e(1560),it=e(2920);function ot(r,g){1&r&&(t.SAx(0),t.aS0(1,20),t.k70())}function st(r,g){1&r&&(t.SAx(0),t.aS0(1,21),t.k70())}function rt(r,g){1&r&&(t.SAx(0),t.aS0(1,22),t.k70())}function at(r,g){1&r&&(t.SAx(0),t.aS0(1,23),t.k70())}let lt=(()=>{class r{constructor(){this._=(0,t.uUt)(u.OY).setTitle("Dashboard | La Porta D'Acqua"),this.service=(0,t.uUt)(Q),this.destroy$=(0,t.uUt)(tt.UF),this.notifications=(0,t.uUt)(q.E),this.datePipe=(0,t.uUt)(m.y),this.reservationsEvents=(0,t.uUt)(it.I),this.loading=(0,t.OCB)(!1),this.stats=(0,t.OCB)(null),this.today=new Date}ngOnInit(){this.loadStats(),this.reservationsEvents.listenWsChanges().subscribe({next:()=>this.loadStats()})}loadStats(){const o=this.datePipe.transform(this.today,"yyyy-MM-dd")||"",i=this.datePipe.transform(this.today,"yyyy-MM-dd")||"";this.loading.set(!0),this.service.stats({reservations_date_from:o,reservations_date_to:i}).pipe((0,et.a)(this.destroy$),(0,nt.U)(()=>this.loading.set(!1))).subscribe({next:a=>{this.stats.set(a)},error:a=>{this.notifications.error(a instanceof K.gj?(0,W.mk)(a):Y.a)}})}static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275cmp=t.In1({type:r,selectors:[["app-admin-dashboard"]],standalone:!0,features:[t.UHJ],decls:50,vars:11,consts:()=>{let o,i,a,N,w,H,G,S,T,P,R;return o="La porta d'acqua - dashboard",i="Prenotati per oggi",a="Prenotati per questa settimana",N="Prenotati per questo mese",w="Prenotati per quest'anno",H=" Prenotazioni ",G=" Di seguito la quantit\xE0 di prenotati per oggi. ",S="Numero di prenotati per la giornata odierna. Vengono escluse prenotazioni cancellate o annullate. Vengono contati sia adulti che bambini.",T="Numero di prenotati dall'ultimo luned\xEC alla prossima domenica.",P="Numero di prenotati dal primo giorno fino all'ultimo giorno del mese corrente.",R="Numero di prenotati dal primo giorno fino all'ultimo giorno dell'anno corrente.",[["currentDayReservations",""],["currentWeekReservationsHint",""],["currentMonthReservationsHint",""],["currentYearReservationsHint",""],[1,"flex","items-center"],o,["tuiIconButton","","appearance","icon","type","button",3,"showLoader","click"],[1,"flex","flex-wrap","items-center"],[1,"col-12","md:col-6","lg:col-3","p-1"],[1,"tui-island__title",3,"tuiHint"],i,[1,"tui-island__paragraph"],a,N,w,["tuiLink","","routerLink","/admin/reservations"],[1,"text-xl"],H,G,[3,"stats","loading"],S,T,P,R]},template:function(i,a){if(1&i&&(t.yuY(0,ot,2,0,"ng-template",null,0,t.gJz)(2,st,2,0,"ng-template",null,1,t.gJz)(4,rt,2,0,"ng-template",null,2,t.gJz)(6,at,2,0,"ng-template",null,3,t.gJz),t.I0R(8,"div",4)(9,"h1"),t.aS0(10,5),t.C$Y(),t.I0R(11,"button",6),t.qCj("click",function(){return a.loadStats()}),t.I0R(12,"mat-icon"),t.OEk(13,"refresh"),t.C$Y()()(),t.I0R(14,"div",7)(15,"div",8)(16,"tui-island")(17,"h3",9),t.SAx(18),t.aS0(19,10),t.k70(),t.C$Y(),t.I0R(20,"p",11),t.OEk(21),t.C$Y()()(),t.I0R(22,"div",8)(23,"tui-island")(24,"h3",9),t.SAx(25),t.aS0(26,12),t.k70(),t.C$Y(),t.I0R(27,"p",11),t.OEk(28),t.C$Y()()(),t.I0R(29,"div",8)(30,"tui-island")(31,"h3",9),t.SAx(32),t.aS0(33,13),t.k70(),t.C$Y(),t.I0R(34,"p",11),t.OEk(35),t.C$Y()()(),t.I0R(36,"div",8)(37,"tui-island")(38,"h3",9),t.SAx(39),t.aS0(40,14),t.k70(),t.C$Y(),t.I0R(41,"p",11),t.OEk(42),t.C$Y()()()(),t.I0R(43,"div")(44,"a",15)(45,"span",16),t.aS0(46,17),t.C$Y()(),t.I0R(47,"p"),t.aS0(48,18),t.C$Y(),t.wR5(49,"app-reservations-by-hour-bar-chart",19),t.C$Y()),2&i){const N=t.Gew(1),w=t.Gew(3),H=t.Gew(5),G=t.Gew(7);let S,T,P,R;t.yG2(11),t.E7m("showLoader",a.loading()),t.yG2(6),t.E7m("tuiHint",N),t.yG2(4),t.oRS(" ",null!==(S=null==(S=a.stats())||null==S["reservations-count"]||null==S["reservations-count"].current?null:S["reservations-count"].current.day)&&void 0!==S?S:"?"," "),t.yG2(3),t.E7m("tuiHint",w),t.yG2(4),t.oRS(" ",null!==(T=null==(T=a.stats())||null==T["reservations-count"]||null==T["reservations-count"].current?null:T["reservations-count"].current.week)&&void 0!==T?T:"?"," "),t.yG2(3),t.E7m("tuiHint",H),t.yG2(4),t.oRS(" ",null!==(P=null==(P=a.stats())||null==P["reservations-count"]||null==P["reservations-count"].current?null:P["reservations-count"].current.month)&&void 0!==P?P:"?"," "),t.yG2(3),t.E7m("tuiHint",G),t.yG2(4),t.oRS(" ",null!==(R=null==(R=a.stats())||null==R["reservations-count"]||null==R["reservations-count"].current?null:R["reservations-count"].current.year)&&void 0!==R?R:"?"," "),t.yG2(7),t.E7m("stats",a.stats())("loading",a.loading())}},dependencies:[m.MD,D,M.w,M.C,B.qQ,B.ER,k.k,k.C,A.WY,A.lh,A.SL,A.i6,A.IT,b.CI,b.Kw,F.oB,F.qL],encapsulation:2,changeDetection:0})}return r})()},8128:(L,C,e)=>{function t(m){if(!m)return null;const u=m.match(/filename="(.+)"/);return u?u[1]:null}e.d(C,{k:()=>t})},9772:(L,C,e)=>{e.d(C,{CU:()=>u,MJ:()=>m,ye:()=>_}),(new Date).getTimezoneOffset();const m=1;function u(h,d=m){if(!("string"==typeof h&&h.length>0&&h.match(/\d{1,2}:\d{1,2}/)))return console.error("Invalid string provided to strTimeTimezone",{string:h}),"";const f=Number(h.split(":")[0])+d;return`${f<10?"0":""}${f}:${h.split(":")[1]}`}function _(h,d=m){return u(h,-1*d)}},964:(L,C,e)=>{e.d(C,{Ez:()=>O,In:()=>E,Q1:()=>z,Q9:()=>v,QX:()=>f,Qx:()=>_,_0:()=>x,ay:()=>h,cr:()=>y,e6:()=>u,yc:()=>d});var t=e(400),m=e(9772);const u=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/;function _(s,c){const l=new t.uc(c.hours,c.minutes).shift({hours:-m.MJ});return new Date(Date.UTC(s.year,s.month,s.day,l.hours,l.minutes)).toISOString()}function h(s){if(!("string"==typeof s&&s.length>0&&s.match(u)))return console.error("Invalid string provided to isoStringToTuiDay",{isoString:s}),null;const c=new Date(s);return new t.EK(c.getFullYear(),c.getMonth()+1,c.getDate())}function d(s){if("string"==typeof s&&s.length>0&&s.match(/^\d{4}-\d{1,2}-\d{1,2}\s{1}\d{1,2}:\d{1,2}$/)&&(s=s.split(" ")[0]),!("string"==typeof s&&s.length>0&&s.match(/^\d{4}-\d{1,2}-\d{1,2}$/)))return console.error("Invalid string provided to stringToTuiDay. Expected format YYYY-MM-DD, got",{str:s}),null;const{day:c,month:l,year:D}=t.EK.parseRawDateString(s,"YMD");return new t.EK(D,l,c)}function y(s){if("string"==typeof s&&s.length>0&&s.match(/^\d{4}-\d{1,2}-\d{1,2}\s{1}\d{1,2}:\d{1,2}$/)&&(s=s.split(" ")[1]),!("string"==typeof s&&s.length>0&&s.match(/^\d{1,2}:\d{1,2}$/)))return console.error("Invalid string provided to stringToTuiDay. Expected format HH:mm, got",{str:s}),null;const[c,l]=s.split(":").map(D=>Number(D));return"number"==typeof c&&c>=0&&c<=23?"number"==typeof l&&l>=0&&l<60?new t.uc(c,l):(console.error("error while parsing time in stringToTuiTime. minutes are invalid",{minutes:l}),null):(console.error("error while parsing time in stringToTuiTime. hours is invalid ",{hours:c}),null)}function f(s){if(!("string"==typeof s&&s.length>0&&s.match(u)))return console.error("Invalid string provided to isoStringToTuiTime",{isoString:s}),null;const c=new Date(s);return new t.uc(c.getHours(),c.getMinutes())}function O(s){return new Date(`1970-01-01 ${s.toString()}`).toISOString()}function v(s){const c=new Date(`${s}Z`);return`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}-${String(c.getDate()).padStart(2,"0")} ${String(c.getHours()).padStart(2,"0")}:${String(c.getMinutes()).padStart(2,"0")}`}function E(s){return function $(s){const c=new Date(`1970-01-01 ${s}`);return`${`${c.getUTCHours()}`.padStart(2,"0")}:${`${c.getUTCMinutes()}`.padStart(2,"0")}`}(s.toString())}function x(s){return new t.EK(s.getFullYear(),s.getMonth(),s.getDate())}function z(s){return new t.uc(s.getHours(),s.getMinutes())}},2264:(L,C,e)=>{e.d(C,{W:()=>m});var t=e(8400);class m extends t.w{constructor(_){super(_),this.filename=_.filename,this.status=_.status,this.key=_.key,this.original_id=_.original_id,this.tag=_.tag,this.url=_.url}}},5180:(L,C,e)=>{e.d(C,{C:()=>y});var t=e(8400);class m extends t.w{constructor(n){super(n),this.image_pixel_id=n.image_pixel_id,this.event_data=n.event_data,this.event_time=n.event_time?new Date(n.event_time):void 0}}class u extends t.w{constructor(n){super(n),this.image_id=n.image_id,this.delivered_email_id=n.delivered_email_id,this.record_type=n.record_type,this.record_id=n.record_id,this.event_type=n.event_type,this.secret=n.secret,this.events=n.events?n.events.map(O=>new m(O)):[]}}class _ extends t.w{constructor(n){super(n),this.record_id=n.record_id,this.record_type=n.record_type,this.text=n.text,this.html=n.html,this.subject=n.subject,this.headers=n.headers,this.raw=n.raw,this.image_pixels=n.image_pixels?n.image_pixels.map(O=>new u(O)):[]}}class h extends t.w{constructor(n){super(n),this.hpp_url=n.hpp_url,this.value=n.value,this.status=n.status,this.reservation_id=n.reservation_id,this.preorder_type=n.preorder_type,this.external_id=n.external_id,this.other=n.other}}var d=e(9064);class y extends t.w{get people(){return(this.adults||0)+(this.children||0)}constructor(n){super(n),this.fullname=n.fullname,this.datetime=n.datetime?new Date(n.datetime):void 0,this.cancelled_at=n.cancelled_at?new Date(n.cancelled_at):void 0,this.status=n.status,this.secret=n.secret,this.adults=n.adults,this.children=n.children,this.table=n.table,this.notes=n.notes,this.email=n.email,this.phone=n.phone,this.payment=n.payment?new h(n.payment):void 0,this.delivered_emails=n.delivered_emails?n.delivered_emails.map(O=>new _(O)):[],this.table_type_id=n.table_type_id,this.table_type=n.table_type?new d.g(n.table_type):void 0}}},9064:(L,C,e)=>{e.d(C,{g:()=>u});var t=e(8400),m=e(2264);class u extends t.w{constructor(h){super(h),this.name=h.name,this.description=h.description,this.default_people_per_turn=h.default_people_per_turn,this.default_price=h.default_price,this.notes=h.notes,this.status=h.status,this.translations=h.translations,this.images=h.images?h.images.map(d=>new m.W(d)):[]}}},8304:(L,C,e)=>{e.d(C,{S:()=>n});var t=e(6012),m=e(5180),u=e(4704),_=e(3252),h=e(9144),d=e(7048),y=e(8128),f=e(4496);let n=(()=>{class O extends t.s{constructor(){super(m.C,"admin/reservations")}createPayment(p,v){return this.post(`${p}/payment`,v).pipe((0,u.k)(E=>this.mapItem(E)))}updateStatus(p,v){return this.patch(`${p}/status/${v}`,{}).pipe((0,u.k)(E=>this.mapItem(E)))}tablesSummary(p={}){return this.get("tables_summary",{params:p})}ungroupedTablesSummary(p={}){return this.get("ungrouped_tables_summary",{params:p})}deliverConfirmationEmail(p){return this.post(`${p}/deliver_confirmation_email`,{}).pipe((0,u.k)(v=>this.mapItem(v)))}refoundPayment(p){return this.post(`${p}/refund_payment`,{}).pipe((0,u.k)(v=>this.mapItem(v)))}confirmPayment(p){return this.post(`${p}/record_deferred_payment`,{}).pipe((0,u.k)(v=>this.mapItem(v)))}refreshPaymentStatus(p){return this.post(`${p}/refresh_payment_status`,{}).pipe((0,u.k)(v=>this.mapItem(v)))}export(p){return new _._(v=>{this.get("export",{responseType:"blob",observe:"response",params:p}).pipe((0,h.a)(E=>(console.error("ReservationsService.export() error:",E),v.error(E),new _._))).subscribe(E=>{if(E instanceof d.WA&&E.body){const x=(0,y.k)(E.headers?.get("Content-Disposition"))??"Prenotazioni.xlsx",z=E.headers?.get("Content-Type")??"application/octet-stream",s=window.URL.createObjectURL(new Blob([E.body],{type:z})),c=document.createElement("a");c.href=s,c.download=x,c.click(),v.complete()}})})}static#t=this.\u0275fac=function(v){return new(v||O)};static#e=this.\u0275prov=f.wxM({token:O,factory:O.\u0275fac,providedIn:"root"})}return O})()},1512:(L,C,e)=>{e.d(C,{C:()=>s,w:()=>c});var t=e(4496),m=e(900),u=e(4392),_=e(4164),h=e(3480),d=e(4680),y=e(3972),f=e(5944),n=e(3412),O=e(4704),$=e(3656),p=e(1368);const v=["tuiLink",""];function E(l,D){if(1&l&&t.wR5(0,"tui-svg",3),2&l){const M=t.GaO();t.E7m("src",M.icon||"")}}function x(l,D){if(1&l&&t.wR5(0,"tui-svg",4),2&l){const M=t.GaO();t.E7m("src",M.icon||"")}}const z=["*"];let s=(()=>{class l{constructor(M,A,b){this.el=M,this.mode$=A,this.pseudo=!1,this.icon="",this.iconAlign="right",this.iconRotated=!1,this.mode=null,this.focusVisible=!1,this.focusedChange=(0,n.U)((0,m.Ax)(this.el.nativeElement,"focusin").pipe((0,O.k)(u.Ml)),(0,m.Ax)(this.el.nativeElement,"focusout").pipe((0,O.k)(u.so))),b.subscribe(B=>{this.focusVisible=B})}get nativeFocusableElement(){return this.el.nativeElement}get focused(){return(0,_.ER)(this.nativeFocusableElement)}get hasIcon(){return!!this.icon}get iconAlignLeft(){return this.hasIcon&&"left"===this.iconAlign}get iconAlignRight(){return this.hasIcon&&"right"===this.iconAlign}}return l.\u0275fac=function(M){return new(M||l)(t.GI1(t.GMv),t.GI1(f.Yx),t.GI1(h.MF))},l.\u0275cmp=t.In1({type:l,selectors:[["a","tuiLink",""],["button","tuiLink",""]],hostVars:7,hostBindings:function(M,A){1&M&&t.qCj("$.data-mode.attr",function(){return A.mode$}),2&M&&(t.e48("data-host-mode",A.mode),t.eAK("_pseudo",A.pseudo)("_icon-rotated",A.iconRotated)("_focus-visible",A.focusVisible))},inputs:{pseudo:"pseudo",icon:"icon",iconAlign:"iconAlign",iconRotated:"iconRotated",mode:"mode"},exportAs:["tuiLink"],features:[t.M5G([(0,d.NK)(l),h.MF,h.UF,y.Ir])],attrs:v,ngContentSelectors:z,decls:4,vars:2,consts:[["class","t-icon t-icon_left",3,"src",4,"ngIf"],[1,"t-content"],["class","t-icon t-icon_right",3,"src",4,"ngIf"],[1,"t-icon","t-icon_left",3,"src"],[1,"t-icon","t-icon_right",3,"src"]],template:function(M,A){1&M&&(t.kPM(),t.yuY(0,E,1,1,"tui-svg",0),t.I0R(1,"span",1),t._Xx(2),t.C$Y(),t.yuY(3,x,1,1,"tui-svg",2)),2&M&&(t.E7m("ngIf",A.iconAlignLeft),t.yG2(3),t.E7m("ngIf",A.iconAlignRight))},dependencies:[$.Wu,p.u_],styles:["[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;text-decoration:none;transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;color:var(--tui-link);text-align:left;text-transform:inherit;font-weight:inherit;cursor:pointer;outline:none}[_nghost-%COMP%]:hover{color:var(--tui-link-hover)}[_nghost-%COMP%]:disabled{opacity:var(--tui-disabled-opacity);cursor:default}[data-mode=onLight][_nghost-%COMP%]{color:var(--tui-text-02)}[data-mode=onLight][_nghost-%COMP%]:hover, [data-mode=onLight]._active[_nghost-%COMP%]{color:var(--tui-text-01)}[data-mode=onLight]._pseudo[_nghost-%COMP%]{color:var(--tui-text-01)}[data-mode=onLight]._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{-webkit-text-decoration-color:rgba(0,0,0,.48);text-decoration-color:#0000007a}[data-mode=onLight]._pseudo[_nghost-%COMP%]:hover, [data-mode=onLight]._pseudo._active[_nghost-%COMP%]{color:var(--tui-text-03)}[data-mode=onLight][data-host-mode=negative][_nghost-%COMP%]{color:var(--tui-negative-night)}[data-mode=onLight][data-host-mode=negative][_nghost-%COMP%]:hover, [data-mode=onLight][data-host-mode=negative][_nghost-%COMP%]:active, [data-mode=onLight][data-host-mode=negative]._active[_nghost-%COMP%]{color:var(--tui-negative-night-hover)}[data-mode=onDark][_nghost-%COMP%]{color:var(--tui-text-03-night)}[data-mode=onDark][_nghost-%COMP%]:hover, [data-mode=onDark][_nghost-%COMP%]:active, [data-mode=onDark]._active[_nghost-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onDark]._pseudo[_nghost-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onDark]._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{-webkit-text-decoration-color:rgba(255,255,255,.48);text-decoration-color:#ffffff7a}[data-mode=onDark]._pseudo[_nghost-%COMP%]:hover, [data-mode=onDark]._pseudo[_nghost-%COMP%]:active, [data-mode=onDark]._pseudo._active[_nghost-%COMP%]{color:var(--tui-text-03-night)}[data-mode=onDark][data-host-mode=positive][_nghost-%COMP%]{color:var(--tui-positive-night)}[data-mode=onDark][data-host-mode=positive][_nghost-%COMP%]:hover, [data-mode=onDark][data-host-mode=positive][_nghost-%COMP%]:active, [data-mode=onDark][data-host-mode=positive]._active[_nghost-%COMP%]{color:var(--tui-positive-night-hover)}[data-host-mode=negative][_nghost-%COMP%]{color:var(--tui-negative)}[data-host-mode=negative][_nghost-%COMP%]:hover{color:var(--tui-negative-hover)}[data-host-mode=negative]._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{-webkit-text-decoration-color:rgba(222,76,30,.48);text-decoration-color:#de4c1e7a}[data-host-mode=positive][_nghost-%COMP%]{color:var(--tui-positive)}[data-host-mode=positive][_nghost-%COMP%]:hover{color:var(--tui-positive-hover)}[data-host-mode=positive]._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{-webkit-text-decoration-color:rgba(58,169,129,.48);text-decoration-color:#3aa9817a}._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-selection)}[data-mode=onLight]._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-clear);color:var(--tui-text-01)}[data-mode=onDark]._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-clear-inverse);color:var(--tui-text-01-night)}[data-host-mode=positive]._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-success-bg)}[data-host-mode=negative]._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-error-bg)}._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding-bottom:.15em;-webkit-text-decoration:underline dashed rgba(51,111,238,.48);text-decoration:underline dashed rgba(51,111,238,.48);text-underline-offset:.2em;text-decoration-thickness:.7px}.t-icon[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;width:var(--tui-link-icon-size, 1.5rem);height:var(--tui-link-icon-size, 1.5rem);margin-top:-.125rem}.t-icon_left[_ngcontent-%COMP%]{margin-right:.25rem}.t-icon_right[_ngcontent-%COMP%]{margin-left:.25rem}._icon-rotated[_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}"],changeDetection:0}),l})(),c=(()=>{class l{}return l.\u0275fac=function(M){return new(M||l)},l.\u0275mod=t.a4G({type:l}),l.\u0275inj=t.s3X({imports:[[p.MD,$.Yt]]}),l})()},6376:(L,C,e)=>{e.d(C,{C:()=>_,k:()=>h});var t=e(4496),m=e(1368);const u=["*"];let _=(()=>{class d{constructor(){this.size="m",this.textAlign="left",this.hoverable=!1,this.transparent=!1}get sizeS(){return"s"===this.size}get sizeM(){return"m"===this.size}get sizeL(){return"l"===this.size}get textAlignLeft(){return"left"===this.textAlign}get textAlignCenter(){return"center"===this.textAlign}get textAlignRight(){return"right"===this.textAlign}}return d.\u0275fac=function(f){return new(f||d)},d.\u0275cmp=t.In1({type:d,selectors:[["tui-island"],["a","tuiIsland",""]],hostAttrs:[1,"tui-island"],hostVars:16,hostBindings:function(f,n){2&f&&t.eAK("tui-island_hoverable",n.hoverable)("tui-island_transparent",n.transparent)("tui-island_size_s",n.sizeS)("tui-island_size_m",n.sizeM)("tui-island_size_l",n.sizeL)("tui-island_text-align_left",n.textAlignLeft)("tui-island_text-align_center",n.textAlignCenter)("tui-island_text-align_right",n.textAlignRight)},inputs:{size:"size",textAlign:"textAlign",hoverable:"hoverable",transparent:"transparent"},ngContentSelectors:u,decls:1,vars:0,template:function(f,n){1&f&&(t.kPM(),t._Xx(0))},styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),d})(),h=(()=>{class d{}return d.\u0275fac=function(f){return new(f||d)},d.\u0275mod=t.a4G({type:d}),d.\u0275inj=t.s3X({imports:[[m.MD]]}),d})()}}]);