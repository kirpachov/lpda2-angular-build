"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[2420],{9492:(f,c,i)=>{i.r(c),i.d(c,{EditTagModule:()=>P});var l=i(2992),u=i(7552),t=i(4496),h=i(1512),n=i(8212),v=i(1560),p=i(6504),T=i(3797),E=i(8588),d=i(1700),C=i(9116),$=i(3480),I=i(4388),M=i(6700),m=i(3616),y=i(6684),A=i(4e3),S=i(7368),g=i(9212),U=i(8824),G=i(3724),O=i(9938),D=i(8256);let N=(()=>{class a{constructor(){this.service=(0,t.uUt)(C.w),this.destroy$=(0,t.uUt)($.UF),this.router=(0,t.uUt)(l.E5),this.route=(0,t.uUt)(l.gV),this.notifications=(0,t.uUt)(I.E),this.loading=(0,t.OCB)(!1),this.item=(0,t.OCB)(null),this.id$=new M.g(null),this.item$=this.id$.pipe((0,m.a)(this.destroy$),(0,y.I)(s=>null!==s),(0,A.a)(),(0,S.G)(s=>this.service.show(s)),(0,g.y)(()=>this.loading.set(!1)),(0,g.y)(s=>this.item.set(s)))}ngOnInit(){this.item$.pipe((0,m.a)(this.destroy$)).subscribe((0,G.I)()),this.route.params.pipe((0,m.a)(this.destroy$)).subscribe({next:s=>{this.id$.next(s.id)}})}submit(s){const o=this.id$.value;if(!o)throw new Error("Tag ID is not set");this.loading.set(!0),this.service.update(o,s).pipe((0,m.a)(this.destroy$),(0,U.U)(()=>this.loading.set(!1))).subscribe({next:e=>{this.notifications.fireSnackBar("Modifiche salvate."),this.router.navigate([".."],{relativeTo:this.route})},error:e=>{this.formComponent&&O.y.assignErrorsToForm(this.formComponent.form,e),this.notifications.error((0,D.mk)(e)||"Qualcosa \xE8 andato storto nel salvataggio.")}})}cancel(){this.router.navigate([".."],{relativeTo:this.route})}static#t=this.\u0275fac=function(o){return new(o||a)};static#i=this.\u0275cmp=t.In1({type:a,selectors:[["app-edit-tag"]],viewQuery:function(o,e){if(1&o&&t.CC$(d.k,5),2&o){let r;t.wto(r=t.Gqi())&&(e.formComponent=r.first)}},standalone:!0,features:[t.UHJ],decls:8,vars:2,consts:()=>{let s;return s="Modifica tag",[[1,"flex","items-center","justify-between"],s,["type","button","tuiIconButton","","appearance","icon",3,"click"],[3,"item","loading","cancelled","formSubmit"]]},template:function(o,e){1&o&&(t.I0R(0,"div",0)(1,"h1"),t.SAx(2),t.aS0(3,1),t.k70(),t.C$Y(),t.I0R(4,"button",2),t.qCj("click",function(){return e.cancel()}),t.I0R(5,"mat-icon"),t.OEk(6,"close"),t.C$Y()()(),t.I0R(7,"app-tag-form",3),t.qCj("cancelled",function(){return e.cancel()})("formSubmit",function(R){return e.submit(R)}),t.C$Y()),2&o&&(t.yG2(7),t.E7m("item",e.item())("loading",e.loading()))},dependencies:[h.w,v.qL,p.sl,n.CI,n.Kw,T.CQ,E.Y3,d.k],encapsulation:2})}return a})(),P=(()=>{class a{static#t=this.\u0275fac=function(o){return new(o||a)};static#i=this.\u0275mod=t.a4G({type:a});static#s=this.\u0275inj=t.s3X({imports:[l.qQ.forChild([(0,u.VV)(N,{path:"",closeable:!0,dismissible:!1,size:"l"})])]})}return a})()},355:(f,c,i)=>{i.d(c,{E:()=>t});var l=i(8400),u=i(2264);class t extends l.w{constructor(n){super(n),this.name=n.name,this.description=n.description,this.status=n.status,this.other=n.other,this.translations={...n.translations},this.color=n.color,n.image&&(this.image=new u.W(n.image))}}}}]);