"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[1152],{1920:($,P,o)=>{o.d(P,{w:()=>G});var e=o(4496),n=o(6504),O=o(3480),g=o(6700),f=o(3616),T=o(6684),C=o(3797),R=o(8588),d=o(1368),c=o(9956),u=o(1292);function I(l,M){if(1&l&&(e.I0R(0,"tui-textarea",2),e.OEk(1),e.C$Y()),2&l){const r=e.GaO().$implicit,s=e.GaO();e.E7m("formControl",r.control),e.yG2(),e.oRS(" ",s.getFullLang(r.lang)," ")}}function N(l,M){if(1&l&&(e.I0R(0,"tui-input",2),e.OEk(1),e.C$Y()),2&l){const r=e.GaO().$implicit,s=e.GaO();e.E7m("formControl",r.control),e.yG2(),e.oRS(" ",s.getFullLang(r.lang)," ")}}const v=l=>({"mb-3":l});function h(l,M){if(1&l&&(e.SAx(0),e.I0R(1,"div",1),e.yuY(2,I,2,2,"tui-textarea",2)(3,N,2,2),e.wR5(4,"app-errors",3),e.C$Y(),e.k70()),2&l){const r=M.$implicit,s=M.last,S=e.GaO();e.yG2(),e.E7m("ngClass",e.S45(3,v,!s)),e.yG2(),e.C0Y(2,S.long?2:3),e.yG2(2),e.E7m("errors",r.control.errors)}}const y=["*"];let G=(()=>{class l{constructor(){this.destroy$=new O.UF,this.long=!1,this.controls=(0,e.OCB)({}),this.controlsArr=(0,e.S6b)(()=>{const r=this.controls();return Object.keys(r).map(s=>({lang:s,control:r[s]}))}),this.touched$=new g.g(!1),this.value$=new g.g({})}ngAfterViewInit(){this.addLang("it"),this.addLang("en")}ngOnInit(){}registerOnChange(r){this.value$.pipe((0,f.a)(this.destroy$)).subscribe({next:s=>r(s)})}registerOnTouched(r){this.touched$.pipe((0,T.I)(s=>!0===s)).subscribe({next:()=>r()})}writeValue(r){this.patchValue(r??{}),this.touched$.next(!1)}wasTouched(){this.touched$.next(!0)}getFullLang(r){return u.S[r]??r}controlChanged(r){this.value$.next({...this.value$.value,[r]:this.controls()[r].value})}patchValue(r){Object.keys(r).forEach(s=>this.addLang(s)),Object.keys(this.controls()).forEach(s=>{this.controls()[s].patchValue(r[s]??null)})}addLang(r){if(this.controls()[r])return;const s=new n.Ku;s.valueChanges.subscribe({next:()=>this.controlChanged(r)}),this.controls.set({...this.controls(),[r]:s})}static#e=this.\u0275fac=function(s){return new(s||l)};static#t=this.\u0275cmp=e.In1({type:l,selectors:[["app-i18n-input"]],inputs:{long:"long"},standalone:!0,features:[e.M5G([{provide:n.Y6,useExisting:(0,e.wd)(()=>l),multi:!0},O.UF]),e.UHJ],ngContentSelectors:y,decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"ngClass"],[3,"formControl"],[3,"errors"]],template:function(s,S){1&s&&(e.kPM(),e._Xx(0),e.yuY(1,h,5,5,"ng-container",0)),2&s&&(e.yG2(),e.E7m("ngForOf",S.controlsArr()))},dependencies:[n.sl,n.ue,n.ug,C.CQ,C.Oo,C.cP,d.Iw,c.g,d.QF,R.Y3,R.wp,R.kd],changeDetection:0})}return l})()},8736:($,P,o)=>{o.d(P,{g:()=>q});var e=o(4496),n=o(6504),O=o(3480),g=o(5e3),f=o(1960),T=o(8212),C=o(4336),R=o(8048),d=o(5656),c=o(9880),u=o(3797),I=o(8588),N=o(5188),v=o(9888),h=o(6528),y=o(6380),G=o(9956),l=o(1236),M=o(1744),r=o(1920),s=o(6404),S=o(3616),b=o(4e3),B=o(7748),D=o(6052);function z(a,A){1&a&&e.wR5(0,"app-preorder-reservation-group-preorder-type",3),2&a&&e.E7m("type",A.$implicit)}function K(a,A){if(1&a&&e.wR5(0,"tui-data-list-wrapper",4),2&a){const t=e.GaO(),_=e.Gew(1);e.E7m("itemContent",_)("items",t.options)}}const X=["*"];let w=(()=>{class a{constructor(){this.destroy$=(0,e.uUt)(O.UF),this.control=new n.Ku(null),this.form=new n.WC({control:this.control}),this.options=[...s.i4]}writeValue(t){t&&!(0,s.ch)(t)&&(console.error("Invalid preorder type:",t),t=null),this.control.setValue(t||null)}registerOnChange(t){this.control.valueChanges.pipe((0,S.a)(this.destroy$),(0,b.a)()).subscribe({next:_=>t(_)})}registerOnTouched(t){this.registerOnChange(t)}setDisabledState(t){t?this.control.disable():this.control.enable()}static#e=this.\u0275fac=function(_){return new(_||a)};static#t=this.\u0275cmp=e.In1({type:a,selectors:[["app-select-preorder-type"]],standalone:!0,features:[e.M5G([O.UF,{provide:n.Y6,useExisting:(0,e.wd)(()=>a),multi:!0}]),e.UHJ],ngContentSelectors:X,decls:5,vars:2,consts:[["cardContent",""],[3,"formControl","valueContent"],[3,"itemContent","items",4,"tuiDataList"],[3,"type"],[3,"itemContent","items"]],template:function(_,i){if(1&_&&(e.kPM(),e.yuY(0,z,1,1,"ng-template",null,0,e.gJz),e.I0R(2,"tui-select",1),e._Xx(3),e.yuY(4,K,1,2,"tui-data-list-wrapper",2),e.C$Y()),2&_){const E=e.Gew(1);e.yG2(2),e.E7m("formControl",i.control)("valueContent",E)}},dependencies:[N.my,N.cP,N.uO,B.c,n.sl,n.ue,n.ug,D.q8,D.OO,C.Ux],encapsulation:2,changeDetection:0})}return a})();var U=o(7936),W=o(5324),k=o(7492),Q=o(9052);const J=()=>[];function j(a,A){if(1&a){const t=e.KQA();e.I0R(0,"form",3),e.wR5(1,"app-show-image",4),e.I0R(2,"div",5)(3,"p",6),e.OEk(4),e.C$Y(),e.I0R(5,"div",7)(6,"tui-input",8),e.SAx(7),e.aS0(8,9),e.k70(),e.C$Y(),e.wR5(9,"app-errors",10),e.C$Y(),e.I0R(10,"div",7)(11,"tui-input",0),e.SAx(12),e.aS0(13,11),e.k70(),e.C$Y(),e.wR5(14,"app-errors",10),e.C$Y(),e.I0R(15,"div",7)(16,"button",12),e.qCj("click",function(){e.usT(t);const i=e.GaO().$index,E=e.GaO();return e.CGJ(E.removeAt(i))}),e.SAx(17),e.aS0(18,13),e.k70(),e.C$Y()()()()}if(2&a){const t=e.GaO().$implicit,_=e.GaO();e.E7m("formGroup",t),e.yG2(),e.E7m("image",(_.tableTypeByIds()[t.value.table_type_id].images||e.q4q(8,J))[0]),e.yG2(3),e.oRS(" ",_.tableTypeByIds()[t.value.table_type_id].name," "),e.yG2(2),e.E7m("tuiTextfieldPrefix","\u20ac")("formControl",t.controls.price),e.yG2(3),e.E7m("errors",t.controls.price.errors),e.yG2(2),e.E7m("formControl",t.controls.people_per_turn),e.yG2(3),e.E7m("errors",t.controls.people_per_turn.errors)}}function H(a,A){1&a&&e.yuY(0,j,19,9,"form",2),2&a&&e.C0Y(0,A.$implicit.value.table_type_id?0:-1)}let Z=(()=>{class a{constructor(){this.addTable=new n.Ku(null),this.forms=new n.Sg([]),this.tableTypeByIds=(0,e.OCB)({}),this.tableTypes=(0,e.uUt)(k.W)}ngOnInit(){this.tableTypes.search({per_page:1e3}).subscribe(t=>{const _={};t.items.forEach(i=>{i.id&&(_[i.id]=i)}),this.tableTypeByIds.set(_)}),this.addTable.valueChanges.subscribe(t=>{t&&t.id&&(this.addRow({table_type_id:t.id,price:t.default_price,people_per_turn:t.default_people_per_turn}),this.addTable.reset())})}writeValue(t){this.forms.clear(),t&&Array.isArray(t)&&t.forEach(_=>{this.addRow(_)})}registerOnChange(t){this.forms.valueChanges.subscribe(t)}registerOnTouched(t){this.forms.valueChanges.subscribe(t)}setDisabledState(t){t?this.forms.disable():this.forms.enable()}removeAt(t){this.forms.removeAt(t)}addRow(t){this.forms.push(new n.WC({table_type_id:new n.Ku(t.table_type_id),price:new n.Ku(t.price||0),people_per_turn:new n.Ku(t.people_per_turn||0)}))}static#e=this.\u0275fac=function(_){return new(_||a)};static#t=this.\u0275cmp=e.In1({type:a,selectors:[["app-table-type-to-preorder-reservation-group-input"]],standalone:!0,features:[e.M5G([O.UF,{provide:n.Y6,useExisting:a,multi:!0}]),e.UHJ],decls:5,vars:1,consts:()=>{let t,_,i,E;return t="Aggiungi tavolo",_="Prezzo per persona",i="Ospiti per turno",E="Rimuovi",[[3,"formControl"],t,["class","flex items-center",3,"formGroup"],[1,"flex","items-center",3,"formGroup"],[1,"max-w-[300px]",3,"image"],[1,"block","p-4"],[1,"block","text-lg"],[1,"block","mb-2"],[3,"tuiTextfieldPrefix","formControl"],_,[3,"errors"],i,["type","button","tuiButton","","appearance","secondary-destructive",3,"click"],E]},template:function(_,i){1&_&&(e.c53(0,H,1,1,null,null,e.oxv),e.I0R(2,"app-table-type-select",0),e.SAx(3),e.aS0(4,1),e.k70(),e.C$Y()),2&_&&(e.oho(i.forms.controls),e.yG2(2),e.E7m("formControl",i.addTable))},dependencies:[T.CI,T.Kw,n.sl,n.sz,n.ue,n.u,n.ug,n.uW,u.CQ,u.Oo,u.cP,R.aS,R.Id,U.KA,W.Y,Q.y,G.g],encapsulation:2,changeDetection:0})}return a})(),q=(()=>{class a{constructor(){this.destroy$=(0,e.uUt)(O.UF),this.router=(0,e.uUt)(l.E5),this.route=(0,e.uUt)(l.gV),this.submit=new e._w7,this.disabled=(0,e.OCB)(!1),this.form=new n.WC({title:new n.Ku("Pagamento alla prenotazione richiesto " + Date.now() + "",[n.AQ.required]),active:new n.Ku(!0,[n.AQ.required,n.AQ.pattern(/^(true|false)$/)]),payment_value:new n.Ku(null,[n.AQ.required]),message:new n.Ku(null,[]),preorder_type:new n.Ku(null,[n.AQ.required]),table_types:new n.Ku(null,[])}),this.submitted=!1,this._item=null,this.cases=(0,e.OCB)(null),this.e=this.errorsForControl}set item(t){if(!(t instanceof f.u))return console.warn("PreorderReservationGroupFormComponent: value is blank or invalid",t),this.form.reset(),void(this._item=null);this._item=t,this.form.patchValue({payment_value:t.payment_value??null,title:t.title??null,active:"active"===t.status,message:t.translations?.message||{},preorder_type:t.preorder_type,table_types:t.table_type_to_preorder_reservation_groups??[]})}get item(){return this._item}errorsForControl(t){const _=this.form.get(t);return _&&(this.submitted||_.touched)?_.errors??null:null}cancel(){this.router.navigate(["../"],{relativeTo:this.route})}formSubmit(){if(this.submitted=!0,this.form.invalid)return;const t={...this.form.value,...this.cases()??{}};t.status=t.active?"active":"inactive",delete t.active,this.submit.emit(t)}static#e=this.\u0275fac=function(_){return new(_||a)};static#t=this.\u0275cmp=e.In1({type:a,selectors:[["app-preorder-reservation-group-form"]],inputs:{item:"item"},outputs:{submit:"submit"},standalone:!0,features:[e.M5G([O.UF]),e.UHJ],decls:45,vars:15,consts:()=>{let t,_,i,E,m,F,L,V,x,Y;return t="Titolo: visibile solo a te",_="Tipologia di pagamento",i="Valore pagamento",E="Messaggio per i clienti che cercano di prenotare",m="Attivazione",F="Richiedere il pagamento?",L="Tipologie di tavolo abilitate",V="Quando sono richiesti pagamenti?",x="Conferma",Y="Annulla",[[3,"formGroup","ngSubmit"],[1,"block","mb-3"],["formControlName","title",3,"tuiAutoFocus"],t,[3,"errors"],[1,"block",3,"formControl"],_,[3,"formControlName","tuiTextfieldPrefix"],i,["tuiTextfield",""],[3,"long","formControlName"],E,[1,"text-xl"],m,["contentAlign","right","formControlName","active","size","l"],F,[1,"mb-3","text-2xl"],L,[3,"formControl"],V,[1,"block","mb-3",3,"item","editable","outputMamiChanges"],[1,"flex","items-center"],["type","submit","tuiButton","","appearance","primary"],x,["tuiButton","","appearance","icon","type","button",3,"click"],Y]},template:function(_,i){1&_&&(e.I0R(0,"form",0),e.qCj("ngSubmit",function(){return i.formSubmit()}),e.I0R(1,"div",1)(2,"tui-input",2),e.SAx(3),e.aS0(4,3),e.k70(),e.C$Y(),e.wR5(5,"app-errors",4),e.C$Y(),e.I0R(6,"div",1)(7,"app-select-preorder-type",5),e.SAx(8),e.aS0(9,6),e.k70(),e.C$Y(),e.wR5(10,"app-errors",4),e.C$Y(),e.I0R(11,"div",1)(12,"tui-input-number",7),e.SAx(13),e.aS0(14,8),e.k70(),e.wR5(15,"input",9),e.C$Y(),e.wR5(16,"app-errors",4),e.C$Y(),e.I0R(17,"div",1)(18,"app-i18n-input",10),e.SAx(19),e.aS0(20,11),e.k70(),e.C$Y(),e.wR5(21,"app-errors",4),e.C$Y(),e.I0R(22,"div",1)(23,"p",12),e.SAx(24),e.aS0(25,13),e.k70(),e.C$Y(),e.I0R(26,"tui-checkbox-block",14),e.SAx(27),e.aS0(28,15),e.k70(),e.C$Y(),e.wR5(29,"app-errors",4),e.C$Y(),e.I0R(30,"h2",16),e.aS0(31,17),e.C$Y(),e.I0R(32,"div",1),e.wR5(33,"app-table-type-to-preorder-reservation-group-input",18),e.C$Y(),e.I0R(34,"h2",16),e.aS0(35,19),e.C$Y(),e.I0R(36,"div",1)(37,"app-select-turns-paymentv2",20),e.qCj("outputMamiChanges",function(m){return i.cases.set(m)}),e.C$Y()(),e.I0R(38,"div",21)(39,"button",22),e.SAx(40),e.aS0(41,23),e.k70(),e.C$Y(),e.I0R(42,"button",24),e.qCj("click",function(){return i.cancel()}),e.SAx(43),e.aS0(44,25),e.k70(),e.C$Y()()()),2&_&&(e.E7m("formGroup",i.form),e.yG2(2),e.E7m("tuiAutoFocus",!0),e.yG2(3),e.E7m("errors",i.e("title")),e.yG2(2),e.E7m("formControl",i.form.controls.preorder_type),e.yG2(3),e.E7m("errors",i.e("preorder_type")),e.yG2(2),e.E7m("formControlName","payment_value")("tuiTextfieldPrefix","\u20ac"),e.yG2(4),e.E7m("errors",i.e("payment_value")),e.yG2(2),e.E7m("long",!1)("formControlName","message"),e.yG2(3),e.E7m("errors",i.e("message")),e.yG2(8),e.E7m("errors",i.e("active")),e.yG2(4),e.E7m("formControl",i.form.controls.table_types),e.yG2(4),e.E7m("item",i.item)("editable",!0))},dependencies:[n.y,n.sz,n.ue,n.u,n.sl,n.ug,n.uW,n.Wo,T.CI,T.Kw,u.CQ,u.Oo,u.cP,U.b,I.Y3,N.my,C.A$,g.m6,g.gJ,G.g,v.Q7,v.mi,v.Qj,R.aS,R.Id,d.WY,h.i,h.I,c.kh,y.iO,M.t,r.w,w,Z],changeDetection:0})}return a})()},1292:($,P,o)=>{o.d(P,{S:()=>e});const e={it:"Italiano",en:"Inglese",es:"Spagnolo",fr:"Francese",de:"Tedesco",pt:"Portoghese",ru:"Russo",zh:"Cinese",ja:"Giapponese",ar:"Arabo",hi:"Hindi",bn:"Bengalese",pa:"Punjabi",ms:"Malese"}},1200:($,P,o)=>{o.d(P,{A:()=>T,m:()=>C});var e=o(4496),n=o(900),O=o(3480),g=o(800),f=o(3616);let T=(()=>{class R{constructor(c,u,I){this.el=c,this.zone=u,this.destroy$=I,this.eventName=""}ngOnInit(){(0,g.w)(this.el.nativeElement,this.eventName,{passive:!1}).pipe((0,n.Uv)(this.zone),(0,n.uy)(),(0,f.a)(this.destroy$)).subscribe()}}return R.\u0275fac=function(c){return new(c||R)(e.GI1(e.GMv),e.GI1(e.WW2),e.GI1(O.UF,2))},R.\u0275dir=e.Sc5({type:R,selectors:[["","tuiPreventDefault",""]],inputs:{eventName:[e.Wk5.None,"tuiPreventDefault","eventName"]},features:[e.M5G([O.UF])]}),R})(),C=(()=>{class R{}return R.\u0275fac=function(c){return new(c||R)},R.\u0275mod=e.a4G({type:R}),R.\u0275inj=e.s3X({}),R})()}}]);