"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[2544],{9064:(T,E,e)=>{e.d(E,{w:()=>y});var t=e(4496),m=e(6504),o=e(3480),_=e(6700),f=e(3616),n=e(6684),g=e(3797),a=e(8588),l=e(1368),c=e(9956),v=e(1292);function M(h,d){if(1&h&&(t.I0R(0,"tui-textarea",2),t.OEk(1),t.C$Y()),2&h){const s=t.GaO().$implicit,i=t.GaO();t.E7m("formControl",s.control),t.yG2(),t.oRS(" ",i.getFullLang(s.lang)," ")}}function R(h,d){if(1&h&&(t.I0R(0,"tui-input",2),t.OEk(1),t.C$Y()),2&h){const s=t.GaO().$implicit,i=t.GaO();t.E7m("formControl",s.control),t.yG2(),t.oRS(" ",i.getFullLang(s.lang)," ")}}const A=h=>({"mb-3":h});function D(h,d){if(1&h&&(t.SAx(0),t.I0R(1,"div",1),t.yuY(2,M,2,2,"tui-textarea",2)(3,R,2,2),t.wR5(4,"app-errors",3),t.C$Y(),t.k70()),2&h){const s=d.$implicit,i=d.last,C=t.GaO();t.yG2(),t.E7m("ngClass",t.S45(3,A,!i)),t.yG2(),t.C0Y(2,C.long?2:3),t.yG2(2),t.E7m("errors",s.control.errors)}}const P=["*"];let y=(()=>{class h{constructor(){this.destroy$=new o.UF,this.long=!1,this.controls=(0,t.OCB)({}),this.controlsArr=(0,t.S6b)(()=>{const s=this.controls();return Object.keys(s).map(i=>({lang:i,control:s[i]}))}),this.touched$=new _.g(!1),this.value$=new _.g({})}ngAfterViewInit(){this.addLang("it"),this.addLang("en")}ngOnInit(){}registerOnChange(s){this.value$.pipe((0,f.a)(this.destroy$)).subscribe({next:i=>s(i)})}registerOnTouched(s){this.touched$.pipe((0,n.I)(i=>!0===i)).subscribe({next:()=>s()})}writeValue(s){this.patchValue(s??{}),this.touched$.next(!1)}wasTouched(){this.touched$.next(!0)}getFullLang(s){return v.S[s]??s}controlChanged(s){this.value$.next({...this.value$.value,[s]:this.controls()[s].value})}patchValue(s){Object.keys(s).forEach(i=>this.addLang(i)),Object.keys(this.controls()).forEach(i=>{this.controls()[i].patchValue(s[i]??null)})}addLang(s){if(this.controls()[s])return;const i=new m.Ku;i.valueChanges.subscribe({next:()=>this.controlChanged(s)}),this.controls.set({...this.controls(),[s]:i})}static#t=this.\u0275fac=function(i){return new(i||h)};static#o=this.\u0275cmp=t.In1({type:h,selectors:[["app-i18n-input"]],inputs:{long:"long"},standalone:!0,features:[t.M5G([{provide:m.Y6,useExisting:(0,t.wd)(()=>h),multi:!0},o.UF]),t.UHJ],ngContentSelectors:P,decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"ngClass"],[3,"formControl"],[3,"errors"]],template:function(i,C){1&i&&(t.kPM(),t._Xx(0),t.yuY(1,D,5,5,"ng-container",0)),2&i&&(t.yG2(),t.E7m("ngForOf",C.controlsArr()))},dependencies:[m.sl,m.ue,m.ug,g.CQ,g.Oo,g.cP,l.Iw,c.g,l.QF,a.Y3,a.wp,a.kd],changeDetection:0})}return h})()},2544:(T,E,e)=>{e.r(E),e.d(E,{CreateCategoryModule:()=>b});var t=e(2992),m=e(7552),o=e(4496),_=e(8212),f=e(8976),n=e(4436),g=e(1512),a=e(9956),l=e(9064),c=e(6504),v=e(3480),M=e(1712),R=e(3616),A=e(4704),D=e(6684),P=e(8824),y=e(5820),h=e(9088),d=e(9938),s=e(1128),i=e(8256),C=e(5704),$=e(8392);function L(O,k){if(1&O&&(o.I0R(0,"h1",10)(1,"span"),o.aS0(2,11),o.C$Y()(),o.I0R(3,"div",1)(4,"span",12),o.SAx(5),o.aS0(6,13),o.k70(),o.C$Y(),o.I0R(7,"a",14),o.wVc(8,"urlTo"),o.OEk(9),o.C$Y()()),2&O){const r=o.GaO();let u,p;o.yG2(7),o.E7m("routerLink",o.g7$(8,2,null==(u=r.parent())?null:u.id,"menuCategory.show")),o.yG2(2),o.cNF(null==(p=r.parent())?null:p.name)}}function x(O,k){1&O&&(o.I0R(0,"h1"),o.SAx(1),o.aS0(2,15),o.k70(),o.C$Y())}let U=(()=>{class O{constructor(){this.service=(0,o.uUt)(M.S),this.destroy$=(0,o.uUt)(v.UF),this.router=(0,o.uUt)(t.E5),this.route=(0,o.uUt)(t.gV),this.urlTo=(0,o.uUt)(h.S),this.notifications=(0,o.uUt)(s.E),this.afterUrl=this.route.snapshot.queryParams.afterUrl,this.form=new c.WC({name:new c.Ku(null)}),this.parentId=null,this.parent=(0,o.OCB)(null),this.loading=(0,o.OCB)(!1),this.submitted=!1,this.e=this.errorsFor}ngOnInit(){this.route.parent?.parent?.params.pipe((0,R.a)(this.destroy$),(0,A.k)(r=>Number(r.category_id)),(0,D.I)(r=>"number"==typeof r&&!isNaN(r)&&r>0)).subscribe({next:r=>{this.parentId=r,this.loadParent()}})}submit(){this.submitted=!0,!this.form.invalid&&(this.loading.set(!0),this.service.create(this.formData()).pipe((0,R.a)(this.destroy$),(0,P.U)(()=>this.loading.set(!1))).subscribe({next:r=>{const u=this.afterUrl||this.urlTo.transform(r.id,"menuCategory.show");console.assert(u,`URL for menu category ${r.id} not found`),this.router.navigate([u],{relativeTo:this.route}),this.notifications.fireSnackBar("Categoria creata.")},error:r=>{d.y.assignErrorsToForm(this.form,r),this.notifications.error((0,i.mk)(r)||$.a)}}))}formData(){const r=this.form.value,u=this.parent();return u instanceof y.Q&&(r.parent_id=u.id),r}errorsFor(r){const u=this.form.get(r);return u&&(u.dirty||u.touched||this.submitted)?u.errors:null}cancel(){this.router.navigate([this.afterUrl||".."],{relativeTo:this.route})}loadParent(r=this.parentId){r&&(this.loading.set(!0),this.service.show(r).pipe((0,R.a)(this.destroy$),(0,P.U)(()=>this.loading.set(!1))).subscribe({next:u=>{this.parent.set(u)},error:u=>{this.notifications.error((0,i.mk)(u)||$.a)}}))}static#t=this.\u0275fac=function(u){return new(u||O)};static#o=this.\u0275cmp=o.In1({type:O,selectors:[["app-create-category"]],standalone:!0,features:[o.M5G([v.UF,h.S]),o.UHJ],decls:15,vars:5,consts:()=>{let r,u,p,S,N,G;return r="Nome",u="Conferma",p="Annulla",S="Crea nuova categoria",N="La categoria verr\xE0 creata come sottocategoria di",G="Crea nuovo men\xF9",[[3,"formGroup","ngSubmit"],[1,"mb-3"],["formControlName","name"],r,[3,"errors"],[1,"flex"],["tuiButton","","type","submit","size","l",1,"me-2",3,"showLoader"],u,["tuiButton","","type","button","appearance","icon","size","l",3,"showLoader","click"],p,[1,"flex","items-center"],S,[1,"me-2","text-slate-400"],N,["tuiLink","",3,"routerLink"],G]},template:function(u,p){1&u&&(o.yuY(0,L,10,5)(1,x,3,0),o.I0R(2,"form",0),o.qCj("ngSubmit",function(){return p.submit()}),o.I0R(3,"div",1)(4,"app-i18n-input",2),o.SAx(5),o.aS0(6,3),o.k70(),o.C$Y(),o.wR5(7,"app-errors",4),o.C$Y(),o.I0R(8,"div",5)(9,"button",6),o.SAx(10),o.aS0(11,7),o.k70(),o.C$Y(),o.I0R(12,"button",8),o.qCj("click",function(){return p.cancel()}),o.SAx(13),o.aS0(14,9),o.k70(),o.C$Y()()()),2&u&&(o.C0Y(0,p.parent()?0:1),o.yG2(2),o.E7m("formGroup",p.form),o.yG2(5),o.E7m("errors",p.e("name")),o.yG2(2),o.E7m("showLoader",p.loading()),o.yG2(3),o.E7m("showLoader",p.loading()))},dependencies:[_.CI,_.Kw,a.g,l.w,c.sl,c.sz,c.ue,c.u,c.uW,c.Wo,f.Gy,C.W,n.a,g.w,g.C,t.ER,h.S],encapsulation:2,changeDetection:0})}return O})(),b=(()=>{class O{static#t=this.\u0275fac=function(u){return new(u||O)};static#o=this.\u0275mod=o.a4G({type:O});static#e=this.\u0275inj=o.s3X({imports:[t.qQ.forChild([(0,m.VV)(U,{path:"",closeable:!0,dismissible:!1,size:"l"})])]})}return O})()},1292:(T,E,e)=>{e.d(E,{S:()=>t});const t={it:"Italiano",en:"Inglese",es:"Spagnolo",fr:"Francese",de:"Tedesco",pt:"Portoghese",ru:"Russo",zh:"Cinese",ja:"Giapponese",ar:"Arabo",hi:"Hindi",bn:"Bengalese",pa:"Punjabi",ms:"Malese"}},2264:(T,E,e)=>{e.d(E,{W:()=>m});var t=e(8400);class m extends t.w{constructor(_){super(_),this.filename=_.filename,this.status=_.status,this.key=_.key,this.original_id=_.original_id,this.tag=_.tag,this.url=_.url}}},5820:(T,E,e)=>{e.d(E,{Q:()=>_});var t=e(8400);class m extends t.w{constructor(n){super(n),this.public_visible=n.public_visible,this.public_from=n.public_from?new Date(n.public_from):void 0,this.public_to=n.public_to?new Date(n.public_to):void 0,this.private_visible=n.private_visible,this.daily_from=n.daily_from?new Date(n.daily_from):void 0,this.daily_to=n.daily_to?new Date(n.daily_to):void 0}}var o=e(2264);class _ extends t.w{constructor(n){super(n),this.name=n.name,this.description=n.description,this.status=n.status,this.price=n.price,this.parent_id=n.parent_id,this.index=n.index,this.secret=n.secret,this.secret_desc=n.secret_desc,this.visibility_id=n.visibility_id,this.visibility=n.visibility?new m(n.visibility):void 0,this.parent=n.parent?new _(n.parent):void 0,this.children=n.children?n.children.map(g=>new _(g)):[],this.images=n.images?n.images.map(g=>new o.W(g)):[],this.translations=n.translations}}},9088:(T,E,e)=>{e.d(E,{S:()=>o});var t=e(4496);const m={menuCategory:{show:"/admin/menu/{itemId}",duplicate:"/admin/menu/{itemId}/duplicate",export:"/admin/menu/{itemId}/export",createChild:"/admin/menu/{itemId}/create-category",linkCategory:"/admin/menu/{itemId}/link-category",createDish:"/admin/menu/{itemId}/create-dish",linkDish:"/admin/menu/{itemId}/link-dish",private:"/menu/{itemId}",public:"/menu/{itemId}"},dish:{show:"/admin/menu/{categoryId}/dish/{itemId}"}};let o=(()=>{class _{transform(n,g){const a=m[g.split(".")[0]];if(!a)throw new Error(`Resource not found: ${g} (resouce: ${g.split(".")[0]})`);const l=g.split(".")[1];if(!a[l])throw new Error(`Action not found: ${g} (action: ${l})`);if(typeof n>"u"||null===n)return null;if("number"==typeof n&&(n=n.toString()),"object"==typeof n&&null!==n&&!Array.isArray(n)){let c=a[l];if(Object.keys(n).forEach(v=>{const M=n[v];void 0!==M&&c.includes(`{${v}}`)&&(c=c.replace(`{${v}}`,M??""))}),c.includes("{{"))throw new Error(`Unresolved interpolation: ${c}`);return c}if("string"!=typeof n)throw new Error(`Invalid itemId: ${n} (type: ${typeof n})`);return a[l].replace("{itemId}",n)}static#t=this.\u0275fac=function(g){return new(g||_)};static#o=this.\u0275pipe=t.UTH({name:"urlTo",type:_,pure:!0,standalone:!0})}return _})()},1712:(T,E,e)=>{e.d(E,{S:()=>f});var t=e(6012),m=e(5820),o=e(4704),_=e(4496);let f=(()=>{class n extends t.s{constructor(){super(m.Q,"admin/menu/categories")}addCategory(a,l,c={}){return this.post(`${a}/add_category/${l}`,c)}addDish(a,l){return this.post(`${a}/dishes/${l}`,{})}removeDish(a,l){return this.delete(`${a}/dishes/${l}`,{})}orderDishes(a,l){return this.patch(`${a}/order_dishes`,{field:l})}dashboardData(a){return this.get(`${a}/dashboard_data`)}updateVisibility(a,l){return this.patch(`${a}/visibility`,l).pipe((0,o.k)(c=>this.mapItem(c)))}copy(a,l){return this.post(`${a}/copy`,l).pipe((0,o.k)(c=>this.mapItem(c)))}move(a,l){return this.patch(`${a}/move/${l}`,{}).pipe((0,o.k)(c=>this.mapItem(c)))}static#t=this.\u0275fac=function(l){return new(l||n)};static#o=this.\u0275prov=_.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()},1512:(T,E,e)=>{e.d(E,{C:()=>y,w:()=>h});var t=e(4496),m=e(900),o=e(4392),_=e(4164),f=e(3480),n=e(4680),g=e(3972),a=e(5944),l=e(3412),c=e(4704),v=e(3656),M=e(1368);const R=["tuiLink",""];function A(d,s){if(1&d&&t.wR5(0,"tui-svg",3),2&d){const i=t.GaO();t.E7m("src",i.icon||"")}}function D(d,s){if(1&d&&t.wR5(0,"tui-svg",4),2&d){const i=t.GaO();t.E7m("src",i.icon||"")}}const P=["*"];let y=(()=>{class d{constructor(i,C,$){this.el=i,this.mode$=C,this.pseudo=!1,this.icon="",this.iconAlign="right",this.iconRotated=!1,this.mode=null,this.focusVisible=!1,this.focusedChange=(0,l.U)((0,m.Ax)(this.el.nativeElement,"focusin").pipe((0,c.k)(o.Ml)),(0,m.Ax)(this.el.nativeElement,"focusout").pipe((0,c.k)(o.so))),$.subscribe(L=>{this.focusVisible=L})}get nativeFocusableElement(){return this.el.nativeElement}get focused(){return(0,_.ER)(this.nativeFocusableElement)}get hasIcon(){return!!this.icon}get iconAlignLeft(){return this.hasIcon&&"left"===this.iconAlign}get iconAlignRight(){return this.hasIcon&&"right"===this.iconAlign}}return d.\u0275fac=function(i){return new(i||d)(t.GI1(t.GMv),t.GI1(a.Yx),t.GI1(f.MF))},d.\u0275cmp=t.In1({type:d,selectors:[["a","tuiLink",""],["button","tuiLink",""]],hostVars:7,hostBindings:function(i,C){1&i&&t.qCj("$.data-mode.attr",function(){return C.mode$}),2&i&&(t.e48("data-host-mode",C.mode),t.eAK("_pseudo",C.pseudo)("_icon-rotated",C.iconRotated)("_focus-visible",C.focusVisible))},inputs:{pseudo:"pseudo",icon:"icon",iconAlign:"iconAlign",iconRotated:"iconRotated",mode:"mode"},exportAs:["tuiLink"],features:[t.M5G([(0,n.NK)(d),f.MF,f.UF,g.Ir])],attrs:R,ngContentSelectors:P,decls:4,vars:2,consts:[["class","t-icon t-icon_left",3,"src",4,"ngIf"],[1,"t-content"],["class","t-icon t-icon_right",3,"src",4,"ngIf"],[1,"t-icon","t-icon_left",3,"src"],[1,"t-icon","t-icon_right",3,"src"]],template:function(i,C){1&i&&(t.kPM(),t.yuY(0,A,1,1,"tui-svg",0),t.I0R(1,"span",1),t._Xx(2),t.C$Y(),t.yuY(3,D,1,1,"tui-svg",2)),2&i&&(t.E7m("ngIf",C.iconAlignLeft),t.yG2(3),t.E7m("ngIf",C.iconAlignRight))},dependencies:[v.Wu,M.u_],styles:["[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;text-decoration:none;transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;color:var(--tui-link);text-align:left;text-transform:inherit;font-weight:inherit;cursor:pointer;outline:none}[_nghost-%COMP%]:hover{color:var(--tui-link-hover)}[_nghost-%COMP%]:disabled{opacity:var(--tui-disabled-opacity);cursor:default}[data-mode=onLight][_nghost-%COMP%]{color:var(--tui-text-02)}[data-mode=onLight][_nghost-%COMP%]:hover, [data-mode=onLight]._active[_nghost-%COMP%]{color:var(--tui-text-01)}[data-mode=onLight]._pseudo[_nghost-%COMP%]{color:var(--tui-text-01)}[data-mode=onLight]._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{-webkit-text-decoration-color:rgba(0,0,0,.48);text-decoration-color:#0000007a}[data-mode=onLight]._pseudo[_nghost-%COMP%]:hover, [data-mode=onLight]._pseudo._active[_nghost-%COMP%]{color:var(--tui-text-03)}[data-mode=onLight][data-host-mode=negative][_nghost-%COMP%]{color:var(--tui-negative-night)}[data-mode=onLight][data-host-mode=negative][_nghost-%COMP%]:hover, [data-mode=onLight][data-host-mode=negative][_nghost-%COMP%]:active, [data-mode=onLight][data-host-mode=negative]._active[_nghost-%COMP%]{color:var(--tui-negative-night-hover)}[data-mode=onDark][_nghost-%COMP%]{color:var(--tui-text-03-night)}[data-mode=onDark][_nghost-%COMP%]:hover, [data-mode=onDark][_nghost-%COMP%]:active, [data-mode=onDark]._active[_nghost-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onDark]._pseudo[_nghost-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onDark]._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{-webkit-text-decoration-color:rgba(255,255,255,.48);text-decoration-color:#ffffff7a}[data-mode=onDark]._pseudo[_nghost-%COMP%]:hover, [data-mode=onDark]._pseudo[_nghost-%COMP%]:active, [data-mode=onDark]._pseudo._active[_nghost-%COMP%]{color:var(--tui-text-03-night)}[data-mode=onDark][data-host-mode=positive][_nghost-%COMP%]{color:var(--tui-positive-night)}[data-mode=onDark][data-host-mode=positive][_nghost-%COMP%]:hover, [data-mode=onDark][data-host-mode=positive][_nghost-%COMP%]:active, [data-mode=onDark][data-host-mode=positive]._active[_nghost-%COMP%]{color:var(--tui-positive-night-hover)}[data-host-mode=negative][_nghost-%COMP%]{color:var(--tui-negative)}[data-host-mode=negative][_nghost-%COMP%]:hover{color:var(--tui-negative-hover)}[data-host-mode=negative]._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{-webkit-text-decoration-color:rgba(222,76,30,.48);text-decoration-color:#de4c1e7a}[data-host-mode=positive][_nghost-%COMP%]{color:var(--tui-positive)}[data-host-mode=positive][_nghost-%COMP%]:hover{color:var(--tui-positive-hover)}[data-host-mode=positive]._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{-webkit-text-decoration-color:rgba(58,169,129,.48);text-decoration-color:#3aa9817a}._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-selection)}[data-mode=onLight]._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-clear);color:var(--tui-text-01)}[data-mode=onDark]._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-clear-inverse);color:var(--tui-text-01-night)}[data-host-mode=positive]._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-success-bg)}[data-host-mode=negative]._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-error-bg)}._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding-bottom:.15em;-webkit-text-decoration:underline dashed rgba(51,111,238,.48);text-decoration:underline dashed rgba(51,111,238,.48);text-underline-offset:.2em;text-decoration-thickness:.7px}.t-icon[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;width:var(--tui-link-icon-size, 1.5rem);height:var(--tui-link-icon-size, 1.5rem);margin-top:-.125rem}.t-icon_left[_ngcontent-%COMP%]{margin-right:.25rem}.t-icon_right[_ngcontent-%COMP%]{margin-left:.25rem}._icon-rotated[_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}"],changeDetection:0}),d})(),h=(()=>{class d{}return d.\u0275fac=function(i){return new(i||d)},d.\u0275mod=t.a4G({type:d}),d.\u0275inj=t.s3X({imports:[[M.MD,v.Yt]]}),d})()}}]);