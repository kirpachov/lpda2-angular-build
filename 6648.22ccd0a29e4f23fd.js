"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[6648],{6648:(P,d,e)=>{e.r(d),e.d(d,{UpdateModule:()=>Y});var s=e(1236),T=e(7552),_=e(7048),t=e(4496),r=e(6504),C=e(8256),g=e(9938),a=e(8392),c=e(2943),u=e(1128),m=e(3480),E=e(5e3),b=e(8212),h=e(7692),I=e(8048),S=e(3616),D=e(4704),O=e(6684),U=e(4e3),A=e(9212),M=e(8824),G=e(4792),p=e(6264);const R=["*"];let $=(()=>{class n{constructor(){this.showLoader=!1}static#t=this.\u0275fac=function(i){return new(i||n)};static#o=this.\u0275cmp=t.In1({type:n,selectors:[["app-no-item"]],inputs:{showLoader:"showLoader"},standalone:!0,features:[t.UHJ],ngContentSelectors:R,decls:4,vars:3,consts:[[1,"block","w-100","h-100",3,"overlay","showLoader","size"],["alt","not found","src","assets/img/not-found.svg","tuiSlot","top",1,"image"]],template:function(i,l){1&i&&(t.kPM(),t.I0R(0,"tui-loader",0)(1,"tui-block-status"),t.wR5(2,"img",1),t._Xx(3),t.C$Y()()),2&i&&t.E7m("overlay",!0)("showLoader",l.showLoader)("size","xl")},dependencies:[h.Sk,h.Cb,p.eA,p.M$,p.Gu],encapsulation:2})}return n})();var v=e(3797),x=e(9956);function L(n,k){if(1&n){const o=t.KQA();t.I0R(0,"p",1),t.OEk(1),t.wVc(2,"humanizeContactKey"),t.C$Y(),t.I0R(3,"form",2),t.qCj("ngSubmit",function(){t.usT(o);const l=t.GaO();return t.CGJ(l.submit())}),t.I0R(4,"div",3)(5,"tui-input",4),t.OEk(6),t.wVc(7,"humanizeContactKey"),t.C$Y(),t.wR5(8,"app-errors",5),t.C$Y(),t.wR5(9,"app-errors",5),t.I0R(10,"div",6)(11,"button",7),t.SAx(12),t.aS0(13,8),t.k70(),t.C$Y(),t.I0R(14,"button",9),t.qCj("click",function(){t.usT(o);const l=t.GaO();return t.CGJ(l.cancel())}),t.SAx(15),t.aS0(16,10),t.k70(),t.C$Y()()()}if(2&n){const o=t.GaO();let i,l;t.yG2(),t.oRS(" ",t.kDX(2,8,null==(i=o.item())?null:i.key)," "),t.yG2(2),t.E7m("formGroup",o.form),t.yG2(2),t.E7m("tuiAutoFocus",!0)("formControl",o.valueControl),t.yG2(),t.oRS(" ",t.kDX(7,10,null==(l=o.item())?null:l.key)," "),t.yG2(2),t.E7m("errors",o.valueControl.errors),t.yG2(),t.E7m("errors",o.form.errors),t.yG2(2),t.E7m("showLoader",o.loading())}}function B(n,k){1&n&&t.wR5(0,"tui-loader",11),2&n&&t.E7m("size","l")}function X(n,k){if(1&n){const o=t.KQA();t.I0R(0,"app-no-item"),t.SAx(1),t.aS0(2,12),t.k70(),t.I0R(3,"button",9),t.qCj("click",function(){t.usT(o);const l=t.GaO();return t.CGJ(l.close())}),t.SAx(4),t.aS0(5,13),t.k70(),t.C$Y()()}}let z=(()=>{class n{constructor(){this.service=(0,t.uUt)(c.s),this.router=(0,t.uUt)(s.E5),this.route=(0,t.uUt)(s.gV),this.destroy=(0,t.uUt)(m.UF),this.notifications=(0,t.uUt)(u.E),this.item=(0,t.OCB)(null),this.key=(0,t.OCB)(null),this.downloading=(0,t.OCB)(!1),this.saving=(0,t.OCB)(!1),this.loading=(0,t.S6b)(()=>this.downloading()||this.saving()),this.valueControl=new r.Ku(null),this.form=new r.WC({value:this.valueControl}),this.formDefaultValue=this.form.value}ngOnInit(){this.route.params.pipe((0,S.a)(this.destroy),(0,D.k)(o=>o.key),(0,O.I)(o=>"string"==typeof o&&o.length>0),(0,U.a)(),(0,A.y)(o=>this.key.set(o)),(0,A.y)(()=>this.reload())).subscribe()}submit(){const o=this.key();if(this.form.invalid||!o)return;const i=this.valueControl.value||"";this.saving.set(!0),this.service.update(o,i).pipe((0,S.a)(this.destroy),(0,M.U)(()=>this.saving.set(!1))).subscribe({next:()=>this.close(),error:l=>{l instanceof _.gj?g.y.assignErrorsToForm(this.form,l):this.notifications.error()}})}cancel(){confirm("Sei sicuro di voler annullare? Tutte le modifiche non salvate andranno perse.")&&this.close()}close(){this.router.navigate([".."],{relativeTo:this.route})}reload(){this.item.set(null);const o=this.key();o?(this.downloading.set(!0),this.service.show(o).pipe((0,S.a)(this.destroy),(0,M.U)(()=>this.downloading.set(!1))).subscribe({next:i=>this.itemLoaded(i),error:i=>this.notifications.error(i instanceof _.gj?(0,C.mk)(i):a.a)})):console.error("invalid key")}itemLoaded(o){this.item.set(o),o?this.form.patchValue({value:o.value??null}):this.form.reset(this.formDefaultValue)}static#t=this.\u0275fac=function(i){return new(i||n)};static#o=this.\u0275cmp=t.In1({type:n,selectors:[["app-update"]],standalone:!0,features:[t.M5G([m.UF]),t.UHJ],decls:5,vars:1,consts:()=>{let o,i,l,N,y;return o="Modifica contatto",i="Conferma",l="Annulla",N="Non abbiamo trovato il contatto che cercavi :'(",y="Esci",[o,[1,"text-xl"],[3,"formGroup","ngSubmit"],[1,"block","mb-3"],[3,"tuiAutoFocus","formControl"],[3,"errors"],[1,"flex","items-center"],["type","submit","tuiButton","",1,"me-2",3,"showLoader"],i,["type","button","tuiButton","","appearance","icon",3,"click"],l,[3,"size"],N,y]},template:function(i,l){1&i&&(t.I0R(0,"h1"),t.aS0(1,0),t.C$Y(),t.yuY(2,L,17,12)(3,B,1,1)(4,X,6,0)),2&i&&(t.yG2(2),t.C0Y(2,l.item()?2:l.loading()?3:4))},dependencies:[r.sl,r.sz,r.ue,r.u,r.ug,r.uW,b.CI,b.Kw,h.Sk,h.Cb,G.M,$,v.CQ,v.Oo,v.cP,I.aS,E.m6,E.gJ,x.g],encapsulation:2,changeDetection:0})}return n})(),Y=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#o=this.\u0275mod=t.a4G({type:n});static#e=this.\u0275inj=t.s3X({imports:[s.qQ.forChild([(0,T.VV)(z,{path:"",closeable:!0,dismissible:!1,size:"l"})])]})}return n})()},6264:(P,d,e)=>{e.d(d,{Gu:()=>C,M$:()=>r,eA:()=>g});var s=e(4496),T=e(1368);const _=[[["","tuiSlot","top"]],[["h1"],["h2"],["h3"],["h4"],["h5"],["h6"]],"*",[["a"],["button"],["","tuiSlot","action"]]],t=["[tuiSlot='top']","h1,h2,h3,h4,h5,h6","*","a,button,[tuiSlot='action']"];let r=(()=>{class a{constructor(){this.card=!1}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275cmp=s.In1({type:a,selectors:[["tui-block-status"]],hostVars:2,hostBindings:function(u,m){2&u&&s.eAK("_card",m.card)},inputs:{card:"card"},ngContentSelectors:t,decls:7,vars:0,consts:[[1,"t-block-image"],[1,"t-block-text"],[1,"t-block-actions"]],template:function(u,m){1&u&&(s.kPM(_),s.I0R(0,"div",0),s._Xx(1),s.C$Y(),s._Xx(2,1),s.I0R(3,"div",1),s._Xx(4,2),s.C$Y(),s.I0R(5,"div",2),s._Xx(6,3),s.C$Y())},styles:["tui-block-status{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;box-sizing:border-box;overflow:hidden;width:100%;height:100%}tui-root._mobile tui-block-status{padding:2rem}tui-block-status._card{border-radius:var(--tui-radius-xl);padding:2rem}tui-root._mobile tui-block-status._card{padding:1.25rem}tui-root._mobile tui-block-status._card .t-block-image{margin-top:.75rem}tui-block-status .t-block-image{margin-bottom:2rem}tui-root._mobile tui-block-status .t-block-image{margin-bottom:1.5rem}tui-block-status .t-block-text{font:var(--tui-font-text-m);color:var(--tui-text-02);margin-bottom:2rem;white-space:pre-line}tui-root._mobile tui-block-status .t-block-text{margin-bottom:1.5rem}tui-block-status .t-block-actions{display:flex;flex-direction:column;align-items:center;width:100%}tui-block-status h1,tui-block-status h2,tui-block-status h3,tui-block-status h4,tui-block-status h5,tui-block-status h6{font:var(--tui-font-heading-4);margin-top:0;margin-bottom:1rem}tui-root._mobile tui-block-status h1,tui-root._mobile tui-block-status h2,tui-root._mobile tui-block-status h3,tui-root._mobile tui-block-status h4,tui-root._mobile tui-block-status h5,tui-root._mobile tui-block-status h6{font:var(--tui-font-heading-5);margin-bottom:.5rem}tui-block-status img{width:9rem;height:9rem}tui-root._mobile tui-block-status img{width:8rem;height:8rem}tui-block-status a:not(:last-child),tui-block-status button:not(:last-child){margin-bottom:.75rem}tui-root._mobile tui-block-status a:not(:last-child),tui-root._mobile tui-block-status button:not(:last-child){margin-bottom:.5rem}\n"],encapsulation:2,changeDetection:0}),a})(),C=(()=>{class a{constructor(){this.tuiSlot="top"}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275dir=s.Sc5({type:a,selectors:[["","tuiSlot",""]],inputs:{tuiSlot:"tuiSlot"}}),a})(),g=(()=>{class a{}return a.\u0275fac=function(u){return new(u||a)},a.\u0275mod=s.a4G({type:a}),a.\u0275inj=s.s3X({imports:[[T.MD]]}),a})()}}]);