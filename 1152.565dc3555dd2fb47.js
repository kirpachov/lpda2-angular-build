"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[1152],{8736:(L,m,_)=>{_.d(m,{g:()=>te});var e=_(4496),o=_(6504),O=_(3480),P=_(5e3),N=_(1960),p=_(8212),c=_(4336),R=_(8048),T=_(5656),u=_(9880),a=_(3797),S=_(8588),d=_(5188),M=_(9888),g=_(6528),b=_(6380),f=_(9956),I=_(1236),Y=_(1744),x=_(1920),A=_(6404),X=_(3616),B=_(4e3),z=_(7748),v=_(6052);function w(i,C){1&i&&e.wR5(0,"app-preorder-reservation-group-preorder-type",3),2&i&&e.E7m("type",C.$implicit)}function K(i,C){if(1&i&&e.wR5(0,"tui-data-list-wrapper",4),2&i){const t=e.GaO(),n=e.Gew(1);e.E7m("itemContent",n)("items",t.options)}}const k=["*"];let W=(()=>{class i{constructor(){this.destroy$=(0,e.uUt)(O.UF),this.control=new o.Ku(null),this.form=new o.WC({control:this.control}),this.options=[...A.i4]}writeValue(t){t&&!(0,A.ch)(t)&&(console.error("Invalid preorder type:",t),t=null),this.control.setValue(t||null)}registerOnChange(t){this.control.valueChanges.pipe((0,X.a)(this.destroy$),(0,B.a)()).subscribe({next:n=>t(n)})}registerOnTouched(t){this.registerOnChange(t)}setDisabledState(t){t?this.control.disable():this.control.enable()}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.In1({type:i,selectors:[["app-select-preorder-type"]],standalone:!0,features:[e.M5G([O.UF,{provide:o.Y6,useExisting:(0,e.wd)(()=>i),multi:!0}]),e.UHJ],ngContentSelectors:k,decls:5,vars:2,consts:[["cardContent",""],[3,"formControl","valueContent"],[3,"itemContent","items",4,"tuiDataList"],[3,"type"],[3,"itemContent","items"]],template:function(n,r){if(1&n&&(e.kPM(),e.yuY(0,w,1,1,"ng-template",null,0,e.gJz),e.I0R(2,"tui-select",1),e._Xx(3),e.yuY(4,K,1,2,"tui-data-list-wrapper",2),e.C$Y()),2&n){const E=e.Gew(1);e.yG2(2),e.E7m("formControl",r.control)("valueContent",E)}},dependencies:[d.my,d.cP,d.uO,z.c,o.sl,o.ue,o.ug,v.q8,v.OO,c.Ux],encapsulation:2,changeDetection:0})}return i})();var G=_(7936),Q=_(5324),J=_(7492),H=_(9052);const Z=()=>[];function j(i,C){if(1&i){const t=e.KQA();e.I0R(0,"form",3),e.wR5(1,"app-show-image",4),e.I0R(2,"div",5)(3,"p",6),e.OEk(4),e.C$Y(),e.I0R(5,"div",7)(6,"tui-input",8),e.SAx(7),e.aS0(8,9),e.k70(),e.C$Y(),e.wR5(9,"app-errors",10),e.C$Y(),e.I0R(10,"div",7)(11,"tui-input",0),e.SAx(12),e.aS0(13,11),e.k70(),e.C$Y(),e.wR5(14,"app-errors",10),e.C$Y(),e.I0R(15,"div",7)(16,"button",12),e.qCj("click",function(){e.usT(t);const r=e.GaO().$index,E=e.GaO();return e.CGJ(E.removeAt(r))}),e.SAx(17),e.aS0(18,13),e.k70(),e.C$Y()()()()}if(2&i){const t=e.GaO().$implicit,n=e.GaO();e.E7m("formGroup",t),e.yG2(),e.E7m("image",(n.tableTypeByIds()[t.value.table_type_id].images||e.q4q(8,Z))[0]),e.yG2(3),e.oRS(" ",n.tableTypeByIds()[t.value.table_type_id].name," "),e.yG2(2),e.E7m("tuiTextfieldPrefix","\u20ac")("formControl",t.controls.price),e.yG2(3),e.E7m("errors",t.controls.price.errors),e.yG2(2),e.E7m("formControl",t.controls.people_per_turn),e.yG2(3),e.E7m("errors",t.controls.people_per_turn.errors)}}function q(i,C){1&i&&e.yuY(0,j,19,9,"form",2),2&i&&e.C0Y(0,C.$implicit.value.table_type_id?0:-1)}let ee=(()=>{class i{constructor(){this.addTable=new o.Ku(null),this.forms=new o.Sg([]),this.tableTypeByIds=(0,e.OCB)({}),this.tableTypes=(0,e.uUt)(J.W)}ngOnInit(){this.tableTypes.search({per_page:1e3}).subscribe(t=>{const n={};t.items.forEach(r=>{r.id&&(n[r.id]=r)}),this.tableTypeByIds.set(n)}),this.addTable.valueChanges.subscribe(t=>{t&&t.id&&(this.addRow({table_type_id:t.id,price:t.default_price,people_per_turn:t.default_people_per_turn}),this.addTable.reset())})}writeValue(t){this.forms.clear(),t&&Array.isArray(t)&&t.forEach(n=>{this.addRow(n)})}registerOnChange(t){this.forms.valueChanges.subscribe(t)}registerOnTouched(t){this.forms.valueChanges.subscribe(t)}setDisabledState(t){t?this.forms.disable():this.forms.enable()}removeAt(t){this.forms.removeAt(t)}addRow(t){this.forms.push(new o.WC({table_type_id:new o.Ku(t.table_type_id),price:new o.Ku(t.price||0),people_per_turn:new o.Ku(t.people_per_turn||0)}))}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.In1({type:i,selectors:[["app-table-type-to-preorder-reservation-group-input"]],standalone:!0,features:[e.M5G([O.UF,{provide:o.Y6,useExisting:i,multi:!0}]),e.UHJ],decls:5,vars:1,consts:()=>{let t,n,r,E;return t="Aggiungi tavolo",n="Prezzo per persona",r="Ospiti per turno",E="Rimuovi",[[3,"formControl"],t,["class","flex items-center",3,"formGroup"],[1,"flex","items-center",3,"formGroup"],[1,"max-w-[300px]",3,"image"],[1,"block","p-4"],[1,"block","text-lg"],[1,"block","mb-2"],[3,"tuiTextfieldPrefix","formControl"],n,[3,"errors"],r,["type","button","tuiButton","","appearance","secondary-destructive",3,"click"],E]},template:function(n,r){1&n&&(e.c53(0,q,1,1,null,null,e.oxv),e.I0R(2,"app-table-type-select",0),e.SAx(3),e.aS0(4,1),e.k70(),e.C$Y()),2&n&&(e.oho(r.forms.controls),e.yG2(2),e.E7m("formControl",r.addTable))},dependencies:[p.CI,p.Kw,o.sl,o.sz,o.ue,o.u,o.ug,o.uW,a.CQ,a.Oo,a.cP,R.aS,R.Id,G.KA,Q.Y,H.y,f.g],encapsulation:2,changeDetection:0})}return i})(),te=(()=>{class i{constructor(){this.destroy$=(0,e.uUt)(O.UF),this.router=(0,e.uUt)(I.E5),this.route=(0,e.uUt)(I.gV),this.submit=new e._w7,this.disabled=(0,e.OCB)(!1),this.form=new o.WC({title:new o.Ku("Pagamento alla prenotazione richiesto " + Date.now() + "",[o.AQ.required]),active:new o.Ku(!0,[o.AQ.required,o.AQ.pattern(/^(true|false)$/)]),payment_value:new o.Ku(null,[o.AQ.required]),message:new o.Ku(null,[]),preorder_type:new o.Ku(null,[o.AQ.required]),table_types:new o.Ku(null,[]),min_people:new o.Ku(null,[o.AQ.min(1)])}),this.submitted=!1,this._item=null,this.cases=(0,e.OCB)(null),this.e=this.errorsForControl}set item(t){if(!(t instanceof N.u))return console.warn("PreorderReservationGroupFormComponent: value is blank or invalid",t),this.form.reset(),void(this._item=null);this._item=t,this.form.patchValue({payment_value:t.payment_value??null,title:t.title??null,active:"active"===t.status,message:t.translations?.message||{},preorder_type:t.preorder_type,table_types:t.table_type_to_preorder_reservation_groups??[],min_people:t.min_people??null})}get item(){return this._item}errorsForControl(t){const n=this.form.get(t);return n&&(this.submitted||n.touched)?n.errors??null:null}cancel(){this.router.navigate(["../"],{relativeTo:this.route})}formSubmit(){if(this.submitted=!0,this.form.invalid)return;const t={...this.form.value,...this.cases()??{}};t.status=t.active?"active":"inactive",delete t.active,this.submit.emit(t)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.In1({type:i,selectors:[["app-preorder-reservation-group-form"]],inputs:{item:"item"},outputs:{submit:"submit"},standalone:!0,features:[e.M5G([O.UF]),e.UHJ],decls:54,vars:17,consts:()=>{let t,n,r,E,l,y,$,h,U,D,F,V;return t="Titolo: visibile solo a te",n="Tipologia di pagamento",r="Valore pagamento",E="N\xB0 minimo di persone eleggibilit\xE0",l="Quando il valore \xE8 presente, il pagamento verr\xE0 richiesto solo per prenotazioni pi\xF9 grandi del numero indicato.",y="Messaggio per i clienti che cercano di prenotare",$="Attivazione",h="Richiedere il pagamento?",U="Tipologie di tavolo abilitate",D="Quando sono richiesti pagamenti?",F="Conferma",V="Annulla",[[3,"formGroup","ngSubmit"],[1,"block","mb-3"],["formControlName","title",3,"tuiAutoFocus"],t,[3,"errors"],[1,"block",3,"formControl"],n,[3,"formControl","tuiTextfieldPrefix"],r,["tuiTextfield",""],[3,"formControl"],E,[1,"text-slate-400"],l,[3,"long","formControl"],y,[1,"text-xl"],$,["contentAlign","right","formControlName","active","size","l"],h,[1,"mb-3","text-2xl"],U,D,[1,"block","mb-3",3,"item","editable","outputMamiChanges"],[1,"flex","items-center"],["type","submit","tuiButton","","appearance","primary"],F,["tuiButton","","appearance","icon","type","button",3,"click"],V]},template:function(n,r){1&n&&(e.I0R(0,"form",0),e.qCj("ngSubmit",function(){return r.formSubmit()}),e.I0R(1,"div",1)(2,"tui-input",2),e.SAx(3),e.aS0(4,3),e.k70(),e.C$Y(),e.wR5(5,"app-errors",4),e.C$Y(),e.I0R(6,"div",1)(7,"app-select-preorder-type",5),e.SAx(8),e.aS0(9,6),e.k70(),e.C$Y(),e.wR5(10,"app-errors",4),e.C$Y(),e.I0R(11,"div",1)(12,"tui-input-number",7),e.SAx(13),e.aS0(14,8),e.k70(),e.wR5(15,"input",9),e.C$Y(),e.wR5(16,"app-errors",4),e.C$Y(),e.I0R(17,"div",1)(18,"tui-input-number",10),e.SAx(19),e.aS0(20,11),e.k70(),e.wR5(21,"input",9),e.C$Y(),e.I0R(22,"p",12),e.SAx(23),e.aS0(24,13),e.k70(),e.C$Y(),e.wR5(25,"app-errors",4),e.C$Y(),e.I0R(26,"div",1)(27,"app-i18n-input",14),e.SAx(28),e.aS0(29,15),e.k70(),e.C$Y(),e.wR5(30,"app-errors",4),e.C$Y(),e.I0R(31,"div",1)(32,"p",16),e.SAx(33),e.aS0(34,17),e.k70(),e.C$Y(),e.I0R(35,"tui-checkbox-block",18),e.SAx(36),e.aS0(37,19),e.k70(),e.C$Y(),e.wR5(38,"app-errors",4),e.C$Y(),e.I0R(39,"h2",20),e.aS0(40,21),e.C$Y(),e.I0R(41,"div",1),e.wR5(42,"app-table-type-to-preorder-reservation-group-input",10),e.C$Y(),e.I0R(43,"h2",20),e.aS0(44,22),e.C$Y(),e.I0R(45,"div",1)(46,"app-select-turns-paymentv2",23),e.qCj("outputMamiChanges",function(l){return r.cases.set(l)}),e.C$Y()(),e.I0R(47,"div",24)(48,"button",25),e.SAx(49),e.aS0(50,26),e.k70(),e.C$Y(),e.I0R(51,"button",27),e.qCj("click",function(){return r.cancel()}),e.SAx(52),e.aS0(53,28),e.k70(),e.C$Y()()()),2&n&&(e.E7m("formGroup",r.form),e.yG2(2),e.E7m("tuiAutoFocus",!0),e.yG2(3),e.E7m("errors",r.e("title")),e.yG2(2),e.E7m("formControl",r.form.controls.preorder_type),e.yG2(3),e.E7m("errors",r.e("preorder_type")),e.yG2(2),e.E7m("formControl",r.form.controls.payment_value)("tuiTextfieldPrefix","\u20ac"),e.yG2(4),e.E7m("errors",r.e("payment_value")),e.yG2(2),e.E7m("formControl",r.form.controls.min_people),e.yG2(7),e.E7m("errors",r.e("min_people")),e.yG2(2),e.E7m("long",!1)("formControl",r.form.controls.message),e.yG2(3),e.E7m("errors",r.e("message")),e.yG2(8),e.E7m("errors",r.e("active")),e.yG2(4),e.E7m("formControl",r.form.controls.table_types),e.yG2(4),e.E7m("item",r.item)("editable",!0))},dependencies:[o.y,o.sz,o.ue,o.u,o.sl,o.ug,o.uW,o.Wo,p.CI,p.Kw,a.CQ,a.Oo,a.cP,G.b,S.Y3,d.my,c.A$,P.m6,P.gJ,f.g,M.Q7,M.mi,M.Qj,R.aS,R.Id,T.WY,g.i,g.I,u.kh,b.iO,Y.t,x.w,W,ee],changeDetection:0})}return i})()},1200:(L,m,_)=>{_.d(m,{A:()=>p,m:()=>c});var e=_(4496),o=_(900),O=_(3480),P=_(800),N=_(3616);let p=(()=>{class R{constructor(u,a,S){this.el=u,this.zone=a,this.destroy$=S,this.eventName=""}ngOnInit(){(0,P.w)(this.el.nativeElement,this.eventName,{passive:!1}).pipe((0,o.Uv)(this.zone),(0,o.uy)(),(0,N.a)(this.destroy$)).subscribe()}}return R.\u0275fac=function(u){return new(u||R)(e.GI1(e.GMv),e.GI1(e.WW2),e.GI1(O.UF,2))},R.\u0275dir=e.Sc5({type:R,selectors:[["","tuiPreventDefault",""]],inputs:{eventName:[e.Wk5.None,"tuiPreventDefault","eventName"]},features:[e.M5G([O.UF])]}),R})(),c=(()=>{class R{}return R.\u0275fac=function(u){return new(u||R)},R.\u0275mod=e.a4G({type:R}),R.\u0275inj=e.s3X({}),R})()}}]);