"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[1338],{1338:(L,E,o)=>{o.d(E,{W:()=>j,N:()=>W});var M=o(1316),t=o(4496),s=o(1200),p=o(9104),l=o(400),F=o(4392),O=o(900),C=o(2528),y=o(3480),x=o(9392),_=o(1673),I=o(4336),V=o(3656),R=o(3840),m=o(5944),g=o(812),c=o(3012),f=o(3616),D=o(1152);let h=(()=>{class a{constructor(e,n,r){this.disabledItemHandler=F.so,this.markerHandler=R.SE,this.defaultViewedMonthFirst=l.Ci.currentLocal(),this.defaultViewedMonthSecond=l.Ci.currentLocal().append({month:1}),this.min=l.sF,this.max=l.q7,this.value=null,this.dayClick=new t._w7,this.hoveredItem=null,this.userViewedMonthFirst=this.defaultViewedMonthFirst,this.userViewedMonthSecond=this.defaultViewedMonthSecond,this.monthOffset=(i,u)=>i.append({month:u}),e&&e.pipe((0,O.iQ)(n),(0,f.a)(r)).subscribe(i=>{this.value=i,this.updateViewedMonths()})}get cappedUserViewedMonthSecond(){return this.userViewedMonthSecond.monthBefore(this.max)?this.userViewedMonthSecond:this.max}get cappedUserViewedMonthFirst(){return this.userViewedMonthFirst.monthSameOrBefore(this.userViewedMonthSecond)?this.userViewedMonthFirst:this.userViewedMonthSecond}ngOnInit(){this.setInitialMonths()}onSectionFirstViewedMonth(e){this.userViewedMonthFirst=e,this.userViewedMonthSecond=this.userViewedMonthFirst.append({month:1})}onSectionSecondViewedMonth(e){this.userViewedMonthSecond=e,this.userViewedMonthFirst=this.userViewedMonthSecond.append({month:-1})}onDayClick(e){this.dayClick.emit(e)}setInitialMonths(){this.value||(this.userViewedMonthSecond=this.updatedViewedMonthSecond(this.defaultViewedMonthSecond),this.userViewedMonthFirst=this.updatedViewedMonthFirst(this.defaultViewedMonthFirst))}updatedViewedMonthSecond(e){return e.monthSameOrAfter(this.max)?this.max:e.monthBefore(this.min)?this.min.append({month:1}):e}updatedViewedMonthFirst(e){return e.monthSameOrAfter(this.userViewedMonthSecond)?this.userViewedMonthSecond.append({month:-1}):e.monthSameOrBefore(this.min)?this.min:e}updateViewedMonths(){this.userViewedMonthFirst=null===this.value?this.defaultViewedMonthFirst:this.value.from,this.userViewedMonthSecond=this.userViewedMonthFirst.append({month:1})}}return a.\u0275fac=function(e){return new(e||a)(t.GI1(c.aY,8),t.GI1(t.kD9),t.GI1(y.UF,2))},a.\u0275cmp=t.In1({type:a,selectors:[["tui-primitive-calendar-range"]],inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",defaultViewedMonthFirst:"defaultViewedMonthFirst",defaultViewedMonthSecond:"defaultViewedMonthSecond",min:"min",max:"max",value:"value"},outputs:{dayClick:"dayClick"},features:[t.M5G([y.UF])],decls:5,vars:30,consts:[[3,"disabledItemHandler","markerHandler","max","maxViewedMonth","min","month","showAdjacent","value","hoveredItem","hoveredItemChange","dayClick","monthChange"],[1,"t-border",3,"disabledItemHandler","markerHandler","max","min","minViewedMonth","month","showAdjacent","value","hoveredItem","hoveredItemChange","dayClick","monthChange"]],template:function(e,n){1&e&&(t.I0R(0,"tui-calendar",0),t.iHE("hoveredItemChange",function(i){return t.kNx(n.hoveredItem,i)||(n.hoveredItem=i),i}),t.qCj("dayClick",function(i){return n.onDayClick(i)})("monthChange",function(i){return n.onSectionFirstViewedMonth(i)}),t.wVc(1,"tuiMapper"),t.C$Y(),t.I0R(2,"tui-calendar",1),t.iHE("hoveredItemChange",function(i){return t.kNx(n.hoveredItem,i)||(n.hoveredItem=i),i}),t.qCj("dayClick",function(i){return n.onDayClick(i)})("monthChange",function(i){return n.onSectionSecondViewedMonth(i)}),t.wVc(3,"tuiMapper"),t.wVc(4,"tuiMapper"),t.C$Y()),2&e&&(t.E7m("disabledItemHandler",n.disabledItemHandler)("markerHandler",n.markerHandler)("max",n.max)("maxViewedMonth",t.I7O(1,18,n.cappedUserViewedMonthSecond,n.monthOffset,-1))("min",n.min)("month",n.userViewedMonthFirst)("showAdjacent",!1)("value",n.value),t.OKB("hoveredItem",n.hoveredItem),t.yG2(2),t.E7m("disabledItemHandler",n.disabledItemHandler)("markerHandler",n.markerHandler)("max",n.max)("min",n.min)("minViewedMonth",t.I7O(3,22,n.cappedUserViewedMonthFirst,n.monthOffset,1))("month",n.userViewedMonthSecond.monthSameOrBefore(n.min)?t.I7O(4,26,n.min,n.monthOffset,1):n.userViewedMonthSecond)("showAdjacent",!1)("value",n.value),t.OKB("hoveredItem",n.hoveredItem))},dependencies:[_.I,p.M],styles:["[_nghost-%COMP%]{display:flex}.t-border[_ngcontent-%COMP%]{border-left:1px solid var(--tui-base-03)}"],changeDetection:0}),a})(),H=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.a4G({type:a}),a.\u0275inj=t.s3X({imports:[[p.E,D.M9,_.y]]}),a})();var v=o(1368);const G=(a,d,e,n)=>[a,d,e,n,!1],b=(a,d,e,n)=>[a,d,e,n,!0];function U(a,d){if(1&a){const e=t.KQA();t.I0R(0,"tui-primitive-calendar-range",2),t.qCj("dayClick",function(r){t.usT(e);const i=t.GaO();return t.CGJ(i.onDayClick(r))}),t.wVc(1,"tuiMapper"),t.wVc(2,"tuiMapper"),t.C$Y()}if(2&a){const e=t.GaO();t.E7m("defaultViewedMonthFirst",e.defaultViewedMonth)("disabledItemHandler",e.calculatedDisabledItemHandler)("markerHandler",e.markerHandler)("max",t.MxA(1,6,t.WuN(18,G,e.computedMax,e.maxLengthMapper,e.value,e.maxLength)))("min",t.MxA(2,12,t.WuN(23,b,e.computedMin,e.maxLengthMapper,e.value,e.maxLength)))("value",e.value)}}function B(a,d){if(1&a&&t.wR5(0,"tui-svg",9),2&a){const e=t.GaO(3);t.E7m("src",e.icons.check)}}function K(a,d){if(1&a){const e=t.KQA();t.I0R(0,"button",7),t.qCj("click",function(){const i=t.usT(e).$implicit,u=t.GaO(2);return t.CGJ(u.onItemSelect(i))})("keydown.enter.prevent",function(){const i=t.usT(e).$implicit,u=t.GaO(2);return t.CGJ(u.onItemSelect(i))})("keydown.space.prevent",function(){const i=t.usT(e).$implicit,u=t.GaO(2);return t.CGJ(u.onItemSelect(i))}),t.OEk(1),t.yuY(2,B,1,1,"tui-svg",8),t.C$Y()}if(2&a){const e=d.$implicit,n=t.GaO(2);t.e48("aria-checked",n.isItemActive(e)),t.yG2(),t.oRS(" ",e," "),t.yG2(),t.E7m("ngIf",n.isItemActive(e))}}const Y=(a,d,e,n,r,i)=>[a,d,e,n,r,i];function N(a,d){if(1&a){const e=t.KQA();t.I0R(0,"div",3)(1,"tui-calendar",4),t.qCj("dayClick",function(r){t.usT(e);const i=t.GaO();return t.CGJ(i.onDayClick(r))}),t.wVc(2,"tuiMapper"),t.wVc(3,"tuiMapper"),t.C$Y(),t.I0R(4,"tui-data-list",5),t.yuY(5,K,3,3,"button",6),t.wVc(6,"tuiMapper"),t.wVc(7,"async"),t.C$Y()()}if(2&a){const e=t.GaO();t.yG2(),t.E7m("disabledItemHandler",e.calculatedDisabledItemHandler)("markerHandler",e.markerHandler)("max",t.MxA(2,7,t.WuN(28,G,e.computedMax,e.maxLengthMapper,e.value,e.maxLength)))("min",t.MxA(3,13,t.WuN(33,b,e.computedMin,e.maxLengthMapper,e.value,e.maxLength)))("month",e.computedMonth)("value",e.value),t.yG2(4),t.E7m("ngForOf",t.MxA(6,19,t.Gyg(38,Y,e.items,e.mapper,e.min,e.max,e.minLength,t.kDX(7,26,e.otherDateText$))))}}let j=(()=>{class a{constructor(e,n,r,i,u){this.otherDateText$=i,this.icons=u,this.defaultViewedMonth=l.Ci.currentLocal(),this.disabledItemHandler=F.so,this.markerHandler=R.SE,this.items=[],this.min=l.sF,this.max=l.q7,this.minLength=null,this.maxLength=null,this.value=null,this.valueChange=new t._w7,this.previousValue=null,this.maxLengthMapper=g.m2,this.mapper=(w,T,A,k,P="")=>[...w.filter(S=>(null===k||S.range.from.append(k).daySameOrBefore(S.range.to))&&(null===T||S.range.to.daySameOrAfter(T))&&(null===A||S.range.from.daySameOrBefore(A))),P],e&&e.pipe((0,O.iQ)(n),(0,f.a)(r)).subscribe(w=>{this.value=w})}get computedMin(){var e;return null!==(e=this.min)&&void 0!==e?e:l.sF}get computedMax(){var e;return null!==(e=this.max)&&void 0!==e?e:l.q7}onEsc(e){var n;"Escape"!==e.key||null===(n=this.value)||void 0===n||!n.isSingleDay||(e.stopPropagation(),this.value=this.previousValue)}get calculatedDisabledItemHandler(){return this.calculateDisabledItemHandler(this.disabledItemHandler,this.value,this.minLength)}get computedMonth(){return this.value?this.value.to:this.defaultViewedMonth}isItemActive(e){const{activePeriod:n}=this;return(0,C.gT)(e)&&null===n||n===e}onRangeChange(e){this.updateValue(e)}onDayClick(e){const{value:n}=this;this.previousValue=n,null!==n&&n.isSingleDay?this.updateValue(l.Se.sort(n.from,e)):this.value=new l.Se(e,e)}onItemSelect(e){"string"==typeof e?null!==this.activePeriod&&this.updateValue(null):this.updateValue(e.range.dayLimit(this.min,this.max))}updateValue(e){this.value=e,this.valueChange.emit(e)}get activePeriod(){return this.items.find(e=>(0,C.K2)(this.value,e.range,(n,r)=>n.from.daySame(r.from.dayLimit(this.min,this.max))&&n.to.daySame(r.to.dayLimit(this.min,this.max))))||null}calculateDisabledItemHandler(e,n,r){return i=>{if(!n?.isSingleDay||!r)return e(i);const u=(0,C.Kw)(Object.entries(r).map(([k,P])=>[k,-P])),w=n.from.append(u).append({day:1}),T=n.from.append(r).append({day:-1});return w.dayBefore(i)&&T.dayAfter(i)||e(i)}}}return a.\u0275fac=function(e){return new(e||a)(t.GI1(c.aY,8),t.GI1(t.kD9),t.GI1(y.UF,2),t.GI1(c.qo),t.GI1(m.QJ))},a.\u0275cmp=t.In1({type:a,selectors:[["tui-calendar-range"]],hostBindings:function(e,n){1&e&&t.qCj("keydown.capture",function(i){return n.onEsc(i)},!1,t.wLc)},inputs:{defaultViewedMonth:"defaultViewedMonth",disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength",value:"value"},outputs:{valueChange:"valueChange"},features:[t.M5G([y.UF])],decls:3,vars:2,consts:[["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"defaultViewedMonthFirst","disabledItemHandler","markerHandler","max","min","value","dayClick",4,"ngIf","ngIfElse"],["presets",""],["automation-id","tui-calendar-range__calendars","tuiPreventDefault","mousedown",3,"defaultViewedMonthFirst","disabledItemHandler","markerHandler","max","min","value","dayClick"],[1,"t-wrapper"],["automation-id","tui-calendar-range__calendar","tuiPreventDefault","mousedown",3,"disabledItemHandler","markerHandler","max","min","month","value","dayClick"],["automation-id","tui-calendar-range__menu","role","menu",1,"t-menu"],["automation-id","tui-calendar-range__menu__item","role","menuitemradio","tuiOption","","tuiPreventDefault","mousedown",3,"click","keydown.enter.prevent","keydown.space.prevent",4,"ngFor","ngForOf"],["automation-id","tui-calendar-range__menu__item","role","menuitemradio","tuiOption","","tuiPreventDefault","mousedown",3,"click","keydown.enter.prevent","keydown.space.prevent"],["automation-id","tui-calendar-range__checkmark","class","t-checkmark",3,"src",4,"ngIf"],["automation-id","tui-calendar-range__checkmark",1,"t-checkmark",3,"src"]],template:function(e,n){if(1&e&&t.yuY(0,U,3,28,"tui-primitive-calendar-range",0)(1,N,8,45,"ng-template",null,1,t.gJz),2&e){const r=t.Gew(2);t.E7m("ngIf",!n.items.length)("ngIfElse",r)}},dependencies:[h,_.I,I.yi,I.sP,V.Wu,v.u_,s.A,v.ay,p.M,v.a],styles:["[_nghost-%COMP%]{display:block}.t-wrapper[_ngcontent-%COMP%]{display:flex}.t-menu[_ngcontent-%COMP%]{width:11rem;border-left:1px solid var(--tui-base-03)}.t-checkmark[_ngcontent-%COMP%]{margin-left:auto;width:1rem;height:1rem}"],changeDetection:0}),(0,M.UN)([x.w7],a.prototype,"calculateDisabledItemHandler",null),a})(),W=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.a4G({type:a}),a.\u0275inj=t.s3X({imports:[[v.MD,p.E,s.m,_.y,_.y,V.Yt,I.A$,H]]}),a})()},812:(L,E,o)=>{o.d(E,{m2:()=>I,mU:()=>C,qS:()=>p,w3:()=>V}),o(4392);var t=o(2528);o(3840);const p={DMY:"dd/mm/yyyy",MDY:"mm/dd/yyyy",YMD:"yyyy/mm/dd"},C=/\([#]+\)|[#\- ]/g,I=(m,g,c,f)=>{if(!g?.isSingleDay||!c)return m;const D=(0,t.Kw)(Object.entries(c).map(([H,v])=>[H,-v])),h=g.from.append(f?D:c).append({day:f?1:-1});return f?h.dayBefore(m)?m:h:m&&h.dayAfter(m)?m:h},V={HH:23,MM:59,SS:59,MS:999}}}]);