(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[9212],{29212:(f,d,e)=>{"use strict";e.r(d),e.d(d,{RequireResetPasswordComponent:()=>S});var t=e(54496),D=e(91368),E=e(31236),a=e(6504),R=e(74872),P=e(19212),_=e(34680),i=e(53616),s=e(83480),o=e(35e3),l=e(98016),u=e(58212),n=e(27692),M=e(8048),g=e(53797),C=e(77568),v=e(24964),I=e(1128),y=e(38256),A=e(48392),T=e(14476),c=e(32956),U=e(37936);let S=(()=>{class O{constructor(){this.route=(0,t.uUt)(E.gV),this.auth=(0,t.uUt)(v.o),this.dialogs=(0,t.uUt)(l._k),this.router=(0,t.uUt)(E.E5),this.destroy$=(0,t.uUt)(s.UF),this.notifications=(0,t.uUt)(I.E),this._=(0,t.uUt)(T.OY).setTitle(c.$localize`Password dimenticata | La Porta D'Acqua`),this.form=new a.WC({email:new a.Ku(null,[a.AQ.required,a.AQ.email])}),this.submitted=!1,this.loading=!1,this.typing=!1,this.type$=this.form.valueChanges.pipe((0,R.ay)(),(0,P.y)(()=>this.typing=!0),(0,_.o)(1e3),(0,P.y)(()=>this.typing=!1)).subscribe()}ngOnInit(){this.updateEmailFromQueryParams()}submit(){this.submitted=!0,!this.form.invalid&&(this.loading=!0,this.auth.requireResetPassword(this.form.value.email).pipe((0,i.a)(this.destroy$)).subscribe({next:()=>{this.loading=!1,this.showEmailDialog()},error:r=>{this.loading=!1,this.notifications.error((0,y.mk)(r)||A.a)}}))}updateEmailFromQueryParams(){const r=this.route.snapshot.queryParams.email;r&&this.form.patchValue({email:r})}showEmailDialog(){this.dialogs.open(c.$localize`Le abbiamo inviato un email con i dettagli su come resettare la password.`,{label:c.$localize`Email inviata`,size:"l",data:{button:"Grazie"}}).subscribe({error:r=>console.error("Dialog closed",r),complete:()=>this.router.navigate(["/auth"],{queryParams:{email:this.form.value.email}})})}static#t=this.\u0275fac=function(m){return new(m||O)};static#e=this.\u0275cmp=t.In1({type:O,selectors:[["app-require-reset-password"]],standalone:!0,features:[t.M5G([s.UF]),t.UHJ],decls:19,vars:4,consts:()=>{let r;return r=c.$localize`Email`,[[1,"flex","justify-center","h-full"],[1,"flex","flex-col","justify-center"],[1,"flex","flex-col",3,"formGroup","ngSubmit"],[1,"mb-1"],[1,"text-slate-400"],[1,"text-slate-400","mb-3"],[1,"mb-2"],["formControlName","email",3,"tuiAutoFocus","tuiTextfieldSize"],r,["tuiTextfield","","autocomplete","email","type","text"],[1,"flex","justify-between"],["routerLink","/auth","tuiButton","","appearance","secondary","type","button",1,"me-2"],["tuiButton","","type","submit",1,"ms-2",3,"showLoader"]]},template:function(m,h){1&m&&(t.I0R(0,"div",0)(1,"div",1)(2,"form",2),t.qCj("ngSubmit",function(){return h.submit()}),t.I0R(3,"h2",3),t.OEk(4,"Reimposta la password."),t.C$Y(),t.I0R(5,"span",4),t.OEk(6,"Inserisci l'indirizzo email dell'account."),t.C$Y(),t.I0R(7,"span",5),t.OEk(8,"Ti invieremo un'email da cui potrai resettare la password."),t.C$Y(),t.I0R(9,"div",6)(10,"tui-input",7),t.SAx(11),t.aS0(12,8),t.k70(),t.wR5(13,"input",9),t.C$Y()(),t.I0R(14,"div",10)(15,"button",11),t.OEk(16,"Annulla"),t.C$Y(),t.I0R(17,"button",12),t.OEk(18,"Conferma"),t.C$Y()()()()()),2&m&&(t.yG2(2),t.E7m("formGroup",h.form),t.yG2(8),t.E7m("tuiAutoFocus",!0)("tuiTextfieldSize","l"),t.yG2(7),t.E7m("showLoader",h.loading))},dependencies:[D.MD,a.sl,a.sz,a.ue,a.u,a.uW,a.Wo,u.CI,u.Kw,g.CQ,g.Oo,g.cP,U.b,o.m6,o.gJ,n.Sk,C.eW,M.aS,M.rD,E.qQ,E.ER],styles:["[_nghost-%COMP%]{display:block;height:100%}"]})}return O})()},32956:()=>{},74872:(f,d,e)=>{"use strict";e.d(d,{ay:()=>a});var t=e(54496),D=e(53252),E=e(53616);function a(_){_||((0,t.yAg)(a),_=(0,t.uUt)(t.eM9));const i=new D._(s=>_.onDestroy(s.next.bind(s)));return s=>s.pipe((0,E.a)(i))}}}]);