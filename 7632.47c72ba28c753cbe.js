(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[7632],{17632:(u,I,t)=>{"use strict";t.r(I),t.d(I,{ListComponent:()=>j});var l=t(91368),_=t(54496),E=t(1560),i=t(14476),a=t(31236),O=t(38256),r=t(26820),d=t(1128),A=t(5892),g=t(83480),N=t(41512),f=t(58212),L=t(53616),Y=t(66684),P=t(68824),v=t(42516),k=t(58248),s=t(12472);const U=(o,T)=>T.id;function W(o,T){if(1&o&&(_.I0R(0,"span",9),_.aS0(1,17),_.C$Y(),_.I0R(2,"span",9),_.OEk(3),_.wVc(4,"date"),_.C$Y()),2&o){const e=_.GaO().$implicit;_.yG2(3),_.cNF(_.g7$(4,1,e.to_timestamp,"shortDate"))}}function x(o,T){1&o&&(_.SAx(0),_.aS0(1,18),_.k70())}function z(o,T){1&o&&(_.I0R(0,"span"),_.aS0(1,20),_.C$Y())}function B(o,T){if(1&o&&(_.I0R(0,"span",9),_.aS0(1,21),_.C$Y(),_.I0R(2,"span",9),_.OEk(3),_.C$Y(),_.I0R(4,"span",9),_.aS0(5,22),_.C$Y(),_.I0R(6,"span",9),_.OEk(7),_.C$Y()),2&o){const e=_.GaO(2).$implicit;_.yG2(3),_.cNF(e.weekly_from),_.yG2(4),_.cNF(e.weekly_to)}}function K(o,T){if(1&o&&(_.I0R(0,"span",9),_.aS0(1,19),_.C$Y(),_.I0R(2,"span",9),_.OEk(3),_.wVc(4,"weekday"),_.C$Y(),_.yuY(5,z,2,0,"span")(6,B,8,2)),2&o){const e=_.GaO().$implicit;_.yG2(3),_.cNF(_.kDX(4,2,e.weekday)),_.yG2(2),_.C0Y(5,e.isWholeDay?5:6)}}function H(o,T){1&o&&(_.SAx(0),_.aS0(1,23),_.k70())}function X(o,T){if(1&o){const e=_.KQA();_.I0R(0,"div",6),_.wR5(1,"app-show-translations",7),_.I0R(2,"div",8)(3,"div")(4,"span",9),_.aS0(5,10),_.C$Y(),_.I0R(6,"span",9),_.OEk(7),_.wVc(8,"date"),_.C$Y(),_.yuY(9,W,5,4)(10,x,2,0),_.C$Y(),_.I0R(11,"div"),_.yuY(12,K,7,4)(13,H,2,0),_.C$Y()(),_.I0R(14,"div",11)(15,"div")(16,"button",12),_.qCj("click",function(){const C=_.usT(e).$implicit,M=_.GaO(2);return _.CGJ(M.delete(C.id))}),_.I0R(17,"span",13)(18,"span",9),_.aS0(19,14),_.C$Y(),_.I0R(20,"mat-icon"),_.OEk(21,"delete"),_.C$Y()()()(),_.I0R(22,"div")(23,"a",15)(24,"span",13)(25,"span",9),_.aS0(26,16),_.C$Y(),_.I0R(27,"mat-icon"),_.OEk(28,"edit"),_.C$Y()()()()()()}if(2&o){const e=T.$implicit;_.yG2(),_.E7m("translations",e.translations.message),_.yG2(6),_.cNF(_.g7$(8,5,e.from_timestamp,"shortDate")),_.yG2(2),_.C0Y(9,e.to_timestamp?9:10),_.yG2(3),_.C0Y(12,e.isWeekly?12:13),_.yG2(11),_._6D("routerLink",e.id)}}const w=()=>[10,20,50,100];function F(o,T){if(1&o){const e=_.KQA();_.c53(0,X,29,8,"div",24,U),_.I0R(2,"tui-table-pagination",5),_.qCj("paginationChange",function(c){_.usT(e);const C=_.GaO();return _.CGJ(C.paginationChange(c))}),_.C$Y()}if(2&o){const e=_.GaO();let n;_.oho(e.items()),_.yG2(2),_.E7m("items",_.q4q(2,w))("total",null!==(n=null==(n=e.data())||null==n.metadata?null:n.metadata.total_count)&&void 0!==n?n:0)}}function b(o,T){1&o&&(_.I0R(0,"p"),_.SAx(1),_.aS0(2,25),_.k70(),_.C$Y())}let j=(()=>{class o{constructor(){this.loading=(0,_.OCB)(!1),this.data=(0,_.OCB)(null),this.items=(0,_.S6b)(()=>this.data()?.items||[]),this.route=(0,_.uUt)(a.gV),this.router=(0,_.uUt)(a.E5),this.service=(0,_.uUt)(r.I),this.notifications=(0,_.uUt)(d.E),this.destroy$=(0,_.uUt)(g.UF),this._=(0,_.uUt)(i.OY).setTitle(s.$localize`Chiusure o Ferie | La Porta D'Acqua`),this.inputSize="m",this.filters={}}ngOnInit(){this.search(),this.router.events.pipe((0,L.a)(this.destroy$),(0,Y.I)(e=>e instanceof a.MT)).subscribe({next:()=>this.search()})}paginationChange(e){this.filters.page=e.page,this.filters.per_page=e.size,this.search()}delete(e){e&&this.notifications.confirm(s.$localize`Sei sicuro di voler cancellare questa chiusura?`).subscribe({next:n=>{n&&this.confirmedDelete(e)}})}filtersChanged(e){this.filters=e,this.search(e)}confirmedDelete(e){this.loading.set(!0),this.service.destroy(e).pipe((0,L.a)(this.destroy$),(0,P.U)(()=>{this.loading.set(!1),this.search()})).subscribe({error:n=>{this.notifications.error((0,O.mk)(n)||s.$localize`Qualcosa è andato storto nella cancellazione.`)}})}search(e=this.filters){e||={},e={...e},this.loading.set(!0),this.service.search(e).pipe((0,L.a)(this.destroy$),(0,P.U)(()=>this.loading.set(!1))).subscribe({next:n=>{this.data.set(n)},error:n=>{this.notifications.error((0,O.mk)(n)||s.$localize`Qualcosa è andato storto nella ricerca.`),console.error(n)}})}static#_=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=_.In1({type:o,selectors:[["app-list"]],standalone:!0,features:[_.M5G([g.UF]),_.UHJ],decls:14,vars:1,consts:()=>{let e,n,c,C,M,m,D,p,h,$,R,y,G;return e=s.$localize`Ferie`,n=s.$localize`Crea nuovo`,c=s.$localize`:from date:Dal`,C=s.$localize`Elimina`,M=s.$localize`Modifica`,m=s.$localize`:until date:al`,D=s.$localize`In poi`,p=s.$localize`Chiusi ogni`,h=s.$localize`Tutto il giorno`,$=s.$localize`Dalle ore`,R=s.$localize`Alle ore`,y=s.$localize`Sempre chiusi durante questo periodo`,G=s.$localize`Nessun elemento trovato.`,[e,["tuiButton","","appearance","flat","routerLink","new",1,"mb-3","me-3"],[1,"flex","items-center"],n,["class","my-2",3,"items","total"],[1,"my-2",3,"items","total","paginationChange"],[1,"border","rounded-lg","flex","flex-col","mb-5"],[3,"translations"],[1,"flex","flex-row","justify-between","p-4"],[1,"me-1"],c,[1,"flex","items-center","justify-end"],["type","button","size","m","tuiButton","","appearance","secondary-destructive",3,"click"],[1,"flex","items-center","justify-between","p-4"],C,["tuiLink","",3,"routerLink"],M,m,D,p,h,$,R,y,["class","border rounded-lg flex flex-col mb-5"],G]},template:function(n,c){1&n&&(_.I0R(0,"h1"),_.SAx(1),_.aS0(2,0),_.k70(),_.C$Y(),_.I0R(3,"p"),_.OEk(4," Di seguito l'elenco delle ferie o giorni di chiusura settimanli.\n"),_.C$Y(),_.I0R(5,"a",1)(6,"span",2)(7,"mat-icon"),_.OEk(8,"add"),_.C$Y(),_.I0R(9,"span"),_.aS0(10,3),_.C$Y()()(),_.yuY(11,F,3,3,"tui-table-pagination",4)(12,b,3,0),_.wR5(13,"router-outlet")),2&n&&(_.yG2(11),_.C0Y(11,c.items().length>0?11:12))},dependencies:[E.oB,E.qL,a.qQ,a.cP,a.ER,l.y,A.yy,A.Ws,N.w,N.C,f.CI,f.Kw,v.G,k.G],encapsulation:2,changeDetection:0})}return o})()},92720:(u,I,t)=>{"use strict";t.d(I,{k:()=>_});var l=t(58400);class _ extends l.w{static wholeDay(i){return"00:00"===i.weekly_from&&"23:59"===i.weekly_to}constructor(i){super(i),this.isWeekly=!1,this.isWholeDay=!1,this.from_timestamp=i.from_timestamp?new Date(i.from_timestamp):void 0,this.to_timestamp=i.to_timestamp?new Date(i.to_timestamp):void 0,this.weekly_from=i.weekly_from,this.weekly_to=i.weekly_to,this.weekday=i.weekday,this.message=i.message,this.translations={...i.translations??{}},this.isWeekly=this.calcIsWeekly(),this.isWholeDay=this.calcIsWholeday()}calcIsWeekly(){return"string"==typeof this.weekly_from&&this.weekly_from.length>0||"string"==typeof this.weekly_to&&this.weekly_to.length>0}calcIsWholeday(){return _.wholeDay({weekly_from:this.weekly_from,weekly_to:this.weekly_to})}}},42516:(u,I,t)=>{"use strict";t.d(I,{G:()=>i});var l=t(30220),E=t(54496);let i=(()=>{class a{constructor(){this.weekdays=[l.$localize`Domenica`,l.$localize`Lunedì`,l.$localize`Martedì`,l.$localize`Mercoledì`,l.$localize`Giovedì`,l.$localize`Venerdì`,l.$localize`Sabato`]}transform(r){return"number"!=typeof r&&"string"==typeof r&&(r=parseInt(r)),"number"==typeof r&&r>=0&&r<=6?this.weekdays[r]:null}static#_=this.\u0275fac=function(d){return new(d||a)};static#e=this.\u0275pipe=E.UTH({name:"weekday",type:a,pure:!0,standalone:!0})}return a})()},26820:(u,I,t)=>{"use strict";t.d(I,{I:()=>i});var l=t(36012),_=t(92720),E=t(54496);let i=(()=>{class a extends l.s{constructor(){super(_.k,"admin/holidays")}static#_=this.\u0275fac=function(d){return new(d||a)};static#e=this.\u0275prov=E.wxM({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()},12472:()=>{}}]);