(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[8620],{28620:(W,P,s)=>{"use strict";s.r(P),s.d(P,{EditPasswordModule:()=>b});var S=s(31236),m=s(7552),t=s(54496),i=s(6504),g=s(1560),w=s(94616),T=s(1128),f=s(35e3),R=s(27692),I=s(8048),A=s(58212),p=s(77568),u=s(12228),C=s(37936);function D(e,n){1&e&&(t.I0R(0,"p",18),t.OEk(1,"La password inserita non \xe8 corretta!"),t.C$Y())}function $(e,n){1&e&&(t.I0R(0,"p",18),t.aS0(1,19),t.C$Y())}function M(e,n){1&e&&(t.I0R(0,"p",18),t.OEk(1,"Il tuo account \xe8 stato bloccato, quindi non \xe8 possibile modificare la password!"),t.C$Y())}function O(e,n){1&e&&t.yuY(0,D,2,0,"p",17)(1,$,2,0,"p",17)(2,M,2,0,"p",17),2&e&&(t.C0Y(0,n.invalid?0:-1),t.yG2(),t.C0Y(1,n.required?1:-1),t.yG2(),t.C0Y(2,n.userBlocked?2:-1))}function v(e,n){1&e&&(t.I0R(0,"p",20),t.aS0(1,21),t.C$Y())}function h(e,n){1&e&&(t.I0R(0,"p",18),t.aS0(1,22),t.C$Y())}function G(e,n){if(1&e&&(t.I0R(0,"p",18),t.OEk(1),t.C$Y()),2&e){const a=t.GaO();t.yG2(),t.cNF(a.tooShort)}}function F(e,n){1&e&&t.yuY(0,h,2,0,"p",17)(1,G,2,1,"p",17),2&e&&(t.C0Y(0,n.required?0:-1),t.yG2(),t.C0Y(1,n.tooShort?1:-1))}function L(e,n){1&e&&(t.I0R(0,"p",20),t.aS0(1,23),t.C$Y())}function y(e,n){1&e&&(t.I0R(0,"mat-icon"),t.OEk(1,"vpn_key"),t.C$Y())}let N=(()=>{class e{constructor(){this.submitting=!1,this.current_password=new i.Ku(null,[i.AQ.required]),this.new_password=new i.Ku(null,[i.AQ.required]),this.form=new i.WC({current_password:this.current_password,new_password:this.new_password}),this.profile=(0,t.uUt)(w.x),this.router=(0,t.uUt)(S.E5),this.activeRoute=(0,t.uUt)(S.gV),this.notification=(0,t.uUt)(T.E)}submit(){this.form.invalid||(this.submitting=!0,this.profile.changePassword(this.current_password.value,this.new_password.value).subscribe({next:()=>{this.submitting=!1,this.router.navigate([".."],{relativeTo:this.activeRoute}),this.notification.fireSnackBar(u.$localize`Password aggiornata con successo!`)},error:a=>{this.submitting=!1,422===a.status&&a.error.errors.forEach(o=>{const _=`${o.field}:${o.code}`;switch(_){case"current_password:missing":case"current_password:blank":this.current_password.setErrors({required:!0});break;case"current_password:invalid":this.current_password.setErrors({invalid:o.message});break;case"new_password:missing":case"new_password:blank":this.new_password.setErrors({required:!0});break;case"new_password:too_short":this.new_password.setErrors({tooShort:o.message});break;case"user:blocked":this.current_password.setErrors({userBlocked:o.message});break;default:console.error(`Unhandled error: ${_}: ${o.message}`)}})}}))}static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275cmp=t.In1({type:e,selectors:[["app-edit-password"]],standalone:!0,features:[t.UHJ],decls:32,vars:9,consts:()=>{let a,r,o,_,d,l,c;return a=u.$localize`Modifica password`,r=u.$localize`Inserisci la tua password corrente e scegli una nuova password, quindi premi ${"\ufffd#8\ufffd"}:START_TAG_STRONG:Avanti${"\ufffd/#8\ufffd"}:CLOSE_TAG_STRONG: per proseguire`,o=u.$localize`Avanti`,_=u.$localize`La password non può essere vuota!`,d=u.$localize`Inserisci la tua password attuale`,l=u.$localize`La password non può essere vuota!`,c=u.$localize`Scegli una nuova password per il tuo account`,[[1,"text-2xl","font-bold","uppercase","|","flex","items-center","justify-center","|","border-b-2","border-b-slate-100","|","pb-4","mb-4"],["inline","",1,"me-3"],a,[3,"showLoader","overlay"],[1,"mb-2"],r,[3,"formGroup","ngSubmit"],[1,"mb-3"],["tuiHintContent","","formControlName","current_password","data-cy","password-field","tuiAutoFocus","",3,"tuiTextfieldIconLeft"],["password",""],["tuiTextfield","","type","password","autocomplete","password"],["tuiHintContent","","formControlName","new_password","data-cy","password-field",3,"tuiTextfieldIconLeft"],[1,"flex","flex-row","justify-between","items-center"],["tuiButton","","appearance","secondary-destructive","routerLink",".."],["tuiButton","","type","submit","data-cy","submit-btn",3,"showLoader","disabled"],o,["keyIcon",""],["class","form-text error"],[1,"form-text","error"],_,[1,"form-text"],d,l,c]},template:function(r,o){if(1&r&&(t.I0R(0,"h1",0)(1,"mat-icon",1),t.OEk(2,"lock"),t.C$Y(),t.SAx(3),t.aS0(4,2),t.k70(),t.C$Y(),t.I0R(5,"tui-loader",3)(6,"p",4),t.Mff(7,5),t.wR5(8,"strong"),t.U7j(),t.C$Y(),t.I0R(9,"form",6),t.qCj("ngSubmit",function(){return o.submit()}),t.I0R(10,"div")(11,"div",7)(12,"tui-input-password",8,9),t.OEk(14," Password attuale "),t.wR5(15,"input",10),t.C$Y(),t.yuY(16,O,3,3)(17,v,2,0),t.C$Y(),t.I0R(18,"div",7)(19,"tui-input-password",11,9),t.OEk(21," Scegli una nuova password "),t.wR5(22,"input",10),t.C$Y(),t.yuY(23,F,2,2)(24,L,2,0),t.C$Y(),t.I0R(25,"div",12)(26,"a",13),t.OEk(27,"Annulla"),t.C$Y(),t.I0R(28,"button",14),t.aS0(29,15),t.C$Y()()()()(),t.yuY(30,y,2,0,"ng-template",null,16,t.gJz)),2&r){const _=t.Gew(31);let d,l,c;t.yG2(5),t.E7m("showLoader",o.submitting)("overlay",!0),t.yG2(4),t.E7m("formGroup",o.form),t.yG2(3),t.E7m("tuiTextfieldIconLeft",_),t.yG2(4),t.C0Y(16,(d=(null==(l=o.form.get("current_password"))?null:l.touched)&&(null==(l=o.form.get("current_password"))?null:l.errors))?16:17,d),t.yG2(3),t.E7m("tuiTextfieldIconLeft",_),t.yG2(4),t.C0Y(23,(d=(null==(c=o.form.get("new_password"))?null:c.touched)&&(null==(c=o.form.get("new_password"))?null:c.errors))?23:24,d),t.yG2(5),t.E7m("showLoader",o.submitting)("disabled",o.form.invalid)}},dependencies:[S.qQ,S.ER,i.sl,i.sz,i.ue,i.u,i.uW,i.Wo,R.Sk,R.Cb,p.eW,p.Mt,p.Ki,C.b,I.aS,I.Ep,f.m6,f.gJ,A.CI,A.Kw,g.oB,g.qL]})}return e})(),b=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275mod=t.a4G({type:e});static#o=this.\u0275inj=t.s3X({imports:[S.qQ.forChild([(0,m.VV)(N,{path:"",closeable:!0,dismissible:!1,size:"s"})])]})}return e})()},12228:()=>{}}]);