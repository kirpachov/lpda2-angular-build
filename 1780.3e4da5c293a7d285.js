"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[1780],{8108:(h,d,_)=>{_.r(d),_.d(d,{ShowModule:()=>k});var a=_(1236),T=_(7552),e=_(4496),c=_(4251),u=_(3480),N=_(7692),p=_(1512),i=_(8212),E=_(9880),S=_(3616),I=_(8824),y=_(7748),v=_(6424),W=_(1368),H=_(1128),U=_(1744),V=_(1551),b=_(9052),L=_(7492);const z=(o,R)=>R.id,P=()=>[];function X(o,R){if(1&o&&(e.I0R(0,"div",25),e.wR5(1,"app-show-image",26),e.I0R(2,"div",27)(3,"p",28),e.OEk(4),e.C$Y(),e.I0R(5,"div",29),e.SAx(6),e.aS0(7,30),e.k70(),e.OEk(8),e.wVc(9,"currency"),e.C$Y(),e.I0R(10,"div",29),e.SAx(11),e.aS0(12,31),e.k70(),e.OEk(13),e.C$Y()()()),2&o){const t=e.GaO().$implicit,n=e.GaO(2);e.yG2(),e.E7m("image",(n.tableTypeByIds()[t.table_type_id].images||e.q4q(6,P))[0]),e.yG2(3),e.oRS(" ",n.tableTypeByIds()[t.table_type_id].name," "),e.yG2(4),e.oRS(" ",e.kDX(9,4,t.price)," "),e.yG2(5),e.oRS(" ",t.people_per_turn," ")}}function x(o,R){1&o&&e.yuY(0,X,14,7,"div",24),2&o&&e.C0Y(0,R.$implicit.table_type_id?0:-1)}function Y(o,R){if(1&o){const t=e.KQA();e.I0R(0,"table",1)(1,"tbody")(2,"tr",2)(3,"td",3)(4,"span",4),e.aS0(5,5),e.C$Y()(),e.I0R(6,"td",3),e.OEk(7),e.C$Y()(),e.I0R(8,"tr",2)(9,"td",3)(10,"span",4),e.aS0(11,6),e.C$Y()(),e.I0R(12,"td",3),e.wR5(13,"app-preorder-reservation-group-preorder-type",7),e.C$Y()(),e.I0R(14,"tr",2)(15,"td",3)(16,"span",4),e.aS0(17,8),e.C$Y()(),e.I0R(18,"td",3),e.OEk(19),e.wVc(20,"currency"),e.C$Y()(),e.I0R(21,"tr",2)(22,"td",3)(23,"span",4),e.aS0(24,9),e.C$Y()(),e.I0R(25,"td",3),e.wR5(26,"app-show-translations",10),e.C$Y()(),e.I0R(27,"tr",2)(28,"td",3)(29,"span",4),e.aS0(30,11),e.C$Y()(),e.I0R(31,"td",3),e.wR5(32,"app-preorder-reservation-group-status",12),e.C$Y()()()(),e.I0R(33,"h2",13),e.aS0(34,14),e.C$Y(),e.I0R(35,"p",15),e.aS0(36,16),e.C$Y(),e.I0R(37,"div",17),e.c53(38,x,1,1,null,null,z),e.C$Y(),e.I0R(40,"h2",13),e.aS0(41,18),e.C$Y(),e.wR5(42,"app-select-turns-paymentv2",19),e.I0R(43,"div")(44,"a",20),e.SAx(45),e.aS0(46,21),e.k70(),e.C$Y(),e.I0R(47,"div")(48,"button",22),e.qCj("click",function(){e.usT(t);const s=e.GaO();return e.CGJ(s.delete())}),e.SAx(49),e.aS0(50,23),e.k70(),e.C$Y()()()}if(2&o){const t=e.GaO();let n,s,r,O;e.yG2(7),e.oRS(" ",t.item().title," "),e.yG2(6),e.E7m("type",null==(n=t.item())?null:n.preorder_type),e.yG2(6),e.oRS(" ",e.kDX(20,8,t.item().payment_value)," "),e.yG2(7),e.E7m("translations",null==(s=t.item())||null==s.translations?null:s.translations.message),e.yG2(6),e.E7m("item",t.item()),e.yG2(2),e.oBb(((null==(r=t.item())?null:r.table_type_to_preorder_reservation_groups)||e.q4q(10,P)).length),e.Ylm(34),e.yG2(4),e.oho(null==(O=t.item())?null:O.table_type_to_preorder_reservation_groups),e.yG2(4),e.E7m("item",t.item())("editable",!1)}}function w(o,R){1&o&&e.wR5(0,"tui-loader",32),2&o&&e.E7m("showLoader",!0)}function F(o,R){1&o&&(e.I0R(0,"p"),e.SAx(1),e.aS0(2,33),e.k70(),e.C$Y())}let B=(()=>{class o{constructor(){this.service=(0,e.uUt)(c.e),this.destroy$=(0,e.uUt)(u.UF),this.router=(0,e.uUt)(a.E5),this.route=(0,e.uUt)(a.gV),this.notifications=(0,e.uUt)(H.E),this.item=(0,e.OCB)(null),this.loading=(0,e.OCB)(!1),this.itemId=null,this.tableTypeByIds=(0,e.OCB)({}),this.tableTypes=(0,e.uUt)(L.W)}ngOnInit(){this.tableTypes.search({per_page:1e3}).subscribe(t=>{const n={};t.items.forEach(s=>{s.id&&(n[s.id]=s)}),this.tableTypeByIds.set(n)}),this.route.params.pipe((0,S.a)(this.destroy$)).subscribe({next:t=>{this.itemId=Number(t.id),isNaN(this.itemId)?this.item.set(null):this.load(this.itemId)}})}delete(){this.notifications.confirm("Eliminando questo elemento, non verra pi\xF9 chiesto il pagamento alla prenotazione per i casi che prevedeva.").pipe((0,S.a)(this.destroy$)).subscribe({next:t=>{t&&this.confirmedDelete()}})}confirmedDelete(){this.itemId&&(this.loading.set(!0),this.service.destroy(this.itemId).pipe((0,S.a)(this.destroy$),(0,I.U)(()=>{this.loading.set(!1),this.router.navigate(["../"],{relativeTo:this.route})})).subscribe())}load(t){this.loading.set(!0),this.service.show(t).pipe((0,S.a)(this.destroy$),(0,I.U)(()=>this.loading.set(!1))).subscribe({next:n=>this.item.set(n)})}static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.In1({type:o,selectors:[["app-show"]],standalone:!0,features:[e.M5G([u.UF]),e.UHJ],decls:5,vars:1,consts:()=>{let t,n,s,r,O,M,g,C,A,m,G,$,f,D;return t="Dettagli pagamento alla prenotazione",n="Titolo",s="Tipologia pagamento",r="Valore pagamento",O="Messaggio",M="Stato",g="Tipologie di tavolo abilitate (" + "\ufffd0\ufffd" + ")",C=" Quando si seleziona una tipologia di tavolo, si tratta sempre di un pagamento e mai di un autorizzazione. Indipendentemente dalla configurazione qui presente. ",A="Quando sono richiesti pagamenti?",m="Modifica",G="Elimina",$="Prezzo per persona",f="Ospiti per turno",D="Non trovato :'(",[t,[1,"tui-table","mb-3"],[1,"tui-table__tr","tui-table__tr_border_none"],[1,"tui-table__td"],[1,"text-xl"],n,s,[3,"type"],r,O,[3,"translations"],M,[3,"item"],[1,"mb-3","text-2xl"],g,[1,"text-xl","text-slate-400"],C,[1,"block"],A,[1,"block","mb-3",3,"item","editable"],["routerLink","edit","tuiButton","","appearance","flat",1,"mb-3"],m,["tuiButton","","appearance","secondary-destructive","type","button",3,"click"],G,["class","flex items-center"],[1,"flex","items-center"],[1,"max-w-[300px]",3,"image"],[1,"block","p-4"],[1,"block","text-xl","font-bold"],[1,"block","mb-2"],$,f,[3,"showLoader"],D]},template:function(n,s){1&n&&(e.I0R(0,"h1"),e.aS0(1,0),e.C$Y(),e.yuY(2,Y,51,11)(3,w,1,1)(4,F,3,0)),2&n&&(e.yG2(2),e.C0Y(2,s.item()?2:s.loading()?3:4))},dependencies:[N.Sk,N.Cb,y.c,v.w,W.cf,p.w,a.qQ,a.ER,i.CI,i.Kw,U.t,V.G,E.kh,b.y],encapsulation:2,changeDetection:0})}return o})(),k=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.a4G({type:o});static#_=this.\u0275inj=e.s3X({imports:[a.qQ.forChild([(0,T.VV)(B,{path:"",closeable:!0,dismissible:!0,size:"l"})])]})}return o})()},6988:(h,d,_)=>{_.d(d,{E:()=>N,Q:()=>p});var a=_(4496),T=_(3480),e=_(3840),c=_(3120),u=_(3616);let N=(()=>{class i{constructor(S,I){this.el=S,this.destroy$=I}set tuiScrollIntoView(S){S&&(0,c.k)(0).pipe((0,u.a)(this.destroy$)).subscribe(()=>{this.el.nativeElement.dispatchEvent(new CustomEvent(e.dG,{bubbles:!0,detail:this.el.nativeElement}))})}}return i.\u0275fac=function(S){return new(S||i)(a.GI1(a.GMv),a.GI1(T.UF,2))},i.\u0275dir=a.Sc5({type:i,selectors:[["","tuiScrollIntoView",""]],inputs:{tuiScrollIntoView:"tuiScrollIntoView"},features:[a.M5G([T.UF])]}),i})(),p=(()=>{class i{}return i.\u0275fac=function(S){return new(S||i)},i.\u0275mod=a.a4G({type:i}),i.\u0275inj=a.s3X({}),i})()}}]);