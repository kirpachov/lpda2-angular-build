"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[2824],{9800:(U,N,a)=>{a.r(N),a.d(N,{ViewDishModule:()=>fo});var p=a(1236),h=a(7552),e=a(4496),M=a(1264),l=a(3480),C=a(8676),d=a(1128),u=a(3616),E=a(4704),G=a(6684),f=a(4e3),k=a(9212),g=a(8824),T=a(8256),A=a(7692),D=a(8212),te=a(4436),x=a(1560),L=a(466),O=a(4336),I=a(1368),pe=a(5891),de=a(9640);function me(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",3),e.qCj("click",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.updateStatus("active"))}),e.wR5(1,"app-dish-status",7),e.C$Y()}2&t&&(e.yG2(),e.E7m("status","active"))}function Ce(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",3),e.qCj("click",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.updateStatus("inactive"))}),e.wR5(1,"app-dish-status",7),e.C$Y()}2&t&&(e.yG2(),e.E7m("status","inactive"))}function Se(t,_){if(1&t){const n=e.KQA();e.I0R(0,"tui-data-list"),e.yuY(1,me,2,1,"button",2)(2,Ce,2,1,"button",2),e.I0R(3,"button",3),e.qCj("click",function(){e.usT(n);const o=e.GaO();return e.CGJ(o.delete())}),e.I0R(4,"span",4)(5,"mat-icon",5),e.OEk(6,"delete"),e.C$Y(),e.I0R(7,"span"),e.aS0(8,6),e.C$Y()()()()}if(2&t){const n=e.GaO();e.yG2(),e.C0Y(1,"active"!=(null==n.dish?null:n.dish.status)?1:-1),e.yG2(),e.C0Y(2,"inactive"!=(null==n.dish?null:n.dish.status)?2:-1)}}const he=t=>({rotate180:t});function Ee(t,_){if(1&t&&(e.I0R(0,"tui-hosted-dropdown",1,8)(2,"button",9)(3,"span",4),e.wR5(4,"app-dish-status",10),e.I0R(5,"mat-icon",11),e.OEk(6,"expand_more"),e.C$Y()()()()),2&t){const n=e.Gew(1),i=e.GaO(),o=e.Gew(1);e.E7m("content",o),e.yG2(4),e.E7m("status",i.dish.status),e.yG2(),e.E7m("ngClass",e.S45(3,he,n.open))}}let fe=(()=>{class t{constructor(){this.notifications=(0,e.uUt)(d.E),this.destroy$=(0,e.uUt)(l.UF),this.deleteDish=new e._w7,this.statusChange=new e._w7,this.dishChange=new e._w7,this.dish=null}delete(){this.notifications.confirm("Sei sicuro di voler eliminare il piatto?",{yes:"S\xEC, elimina il piatto",no:"Annulla"}).pipe((0,u.a)(this.destroy$)).subscribe({next:n=>{n&&this.deleteDish.emit()}})}updateStatus(n){this.dish instanceof pe.S&&(this.dish.status=n,this.dishChange.emit(this.dish)),this.statusChange.emit(n)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-edit-dish-status"]],inputs:{dish:"dish"},outputs:{deleteDish:"deleteDish",statusChange:"statusChange",dishChange:"dishChange"},standalone:!0,features:[e.M5G([l.UF]),e.UHJ],decls:3,vars:1,consts:()=>{let n;return n="Elimina",[["dropdownContent",""],[3,"content"],["tuiOption",""],["tuiOption","",3,"click"],[1,"flex","items-center"],[1,"me-1"],n,[3,"status"],["dropdown",""],["tuiButton","","type","button","appearance","outline","size","l"],[1,"me-1",3,"status"],[1,"animation-speed-2",3,"ngClass"]]},template:function(i,o){1&i&&e.yuY(0,Se,9,2,"ng-template",null,0,e.gJz)(2,Ee,7,5,"tui-hosted-dropdown",1),2&i&&(e.yG2(2),e.C0Y(2,o.dish&&o.dish.status?2:-1))},dependencies:[L.GE,L.Qw,O.A$,O.yi,O.sP,x.qL,D.CI,D.Kw,I.QF,de.o],encapsulation:2})}return t})();var Te=a(5004),X=a(5e3),ne=a(8432),B=a(8016),z=a(1512),J=a(5193),R=a(8048),y=a(5656),b=a(6376),W=a(1104),P=a(3797),V=a(4856),H=a(9052),r=a(6504),K=a(5892),$=a(3400),j=a(580),Oe=a(532),v=a(1040);function Ie(t,_){if(1&t&&e.wR5(0,"app-show-image",5),2&t){const n=e.GaO(2);let i;e.E7m("image",null==(i=n.item())?null:i.image)}}function Ne(t,_){if(1&t&&(e.I0R(0,"div",1),e.yuY(1,Ie,1,1,"app-show-image",2),e.I0R(2,"span",3),e.OEk(3),e.C$Y(),e.I0R(4,"span",4),e.OEk(5),e.C$Y()()),2&t){const n=e.GaO();let i,o,s;e.yG2(),e.C0Y(1,null!=(i=n.item())&&i.image?1:-1),e.yG2(2),e.oRS(" #",null==(o=n.item())?null:o.id," "),e.yG2(2),e.oRS(" ",null==(s=n.item())?null:s.name," ")}}function Me(t,_){1&t&&e.OEk(0," invalid input.\n")}let Ge=(()=>{class t{constructor(n){this.context=n,this.item=(0,e.OCB)(null);const i=n.data;i&&i instanceof Oe.e?this.item.set(i):console.warn("invalid data. Please provide parm 'data' to context.",i)}static#e=this.\u0275fac=function(i){return new(i||t)(e.GI1(v.C0))};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-ingredient-select-option"]],standalone:!0,features:[e.UHJ],decls:2,vars:1,consts:[["class","flex items-center p-2"],[1,"flex","items-center","p-2"],["class","max-h-[100px] max-w-[100px]",3,"image"],[1,"ms-2","text-slate-400"],[1,"ms-2","text-lg"],[1,"max-h-[100px]","max-w-[100px]",3,"image"]],template:function(i,o){1&i&&e.yuY(0,Ne,6,3,"div",0)(1,Me,1,0),2&i&&e.C0Y(0,o.item()?0:1)},dependencies:[H.y],encapsulation:2,changeDetection:0})}return t})();var w=a(6096),Q=a(6052),Z=a(9604),q=a(7936),ee=a(6732);function Re(t,_){1&t&&(e.SAx(0),e.aS0(1,10),e.k70())}function ye(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=_.polymorpheusOutlet;e.yG2(),e.oRS(" ",n," ")}}function De(t,_){if(1&t&&e.yuY(0,ye,2,1,"ng-container",11),2&t){const n=e.GaO(2);e.E7m("polymorpheusOutlet",n.optionTemplate$())}}function Ae(t,_){1&t&&e.C_f(0)}const ie=(t,_)=>({$implicit:t,injector:_});function xe(t,_){if(1&t&&e.yuY(0,Ae,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.optionTemplate$())("polymorpheusOutletContext",e.IBC(2,ie,n,i.injector))}}function $e(t,_){1&t&&e.C_f(0)}const oe=t=>({data:t});function ve(t,_){if(1&t&&e.yuY(0,$e,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.optionTemplate$())("polymorpheusOutletContext",e.S45(2,oe,n))}}function Le(t,_){if(1&t&&e.wR5(0,"div",13),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("innerText",i.stringify(n))}}function Pe(t,_){if(1&t&&e.yuY(0,De,1,1)(1,xe,1,5)(2,ve,1,4)(3,Le,1,1),2&t){const n=e.GaO();let i;e.C0Y(0,"text"===(i=n.optionTemplateType$())?0:"template"===i?1:"component"===i?2:3)}}function we(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=_.polymorpheusOutlet;e.yG2(),e.oRS(" ",n," ")}}function be(t,_){if(1&t&&e.yuY(0,we,2,1,"ng-container",11),2&t){const n=e.GaO(2);e.E7m("polymorpheusOutlet",n.nativeOptionTemplate$())}}function Ye(t,_){1&t&&e.C_f(0)}function Ue(t,_){if(1&t&&e.yuY(0,Ye,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.nativeOptionTemplate$())("polymorpheusOutletContext",e.IBC(2,ie,n,i.injector))}}function He(t,_){1&t&&e.C_f(0)}function ke(t,_){if(1&t&&e.yuY(0,He,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.nativeOptionTemplate$())("polymorpheusOutletContext",e.S45(2,oe,n))}}function ze(t,_){if(1&t&&e.wR5(0,"div",13),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("innerText",i.stringify(n))}}function Be(t,_){if(1&t&&e.yuY(0,be,1,1)(1,Ue,1,5)(2,ke,1,4)(3,ze,1,1),2&t){const n=e.GaO();let i;e.C0Y(0,"text"===(i=n.nativeOptionTemplateType$())?0:"template"===i?1:"component"===i?2:3)}}function Fe(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=e.GaO(2);e.yG2(),e.oRS(" ",n.placeholder," ")}}function Xe(t,_){if(1&t&&(e.I0R(0,"span",null,14),e._Xx(2),e.C$Y(),e.yuY(3,Fe,2,1,"ng-container",15)),2&t){const n=e.Gew(1);e.yG2(3),e.E7m("ngIf",!n.hasChildNodes())}}function Je(t,_){1&t&&(e.SAx(0),e.aS0(1,19),e.k70())}function We(t,_){if(1&t&&(e.I0R(0,"span"),e.OEk(1),e.C$Y()),2&t){const n=e.GaO(2);e.yG2(),e.cNF(n.emptyContentString())}}function Ve(t,_){1&t&&e.C_f(0)}function Ke(t,_){if(1&t&&(e.SAx(0),e.yuY(1,Ve,1,0,"ng-container",8),e.k70()),2&t){const n=e.GaO(4);e.yG2(),e.E7m("ngTemplateOutlet",n.emptyContentTemplate())}}function je(t,_){if(1&t&&(e.SAx(0),e.yuY(1,Ke,2,1,"ng-container",20),e.k70()),2&t){e.GaO(2);const n=e.Gew(6),i=e.GaO();e.yG2(),e.E7m("ngIf",i.emptyContentTemplate())("ngIfElse",n)}}function Qe(t,_){if(1&t&&(e.SAx(0),e.yuY(1,je,2,2,"ng-container",20),e.k70()),2&t){e.GaO();const n=e.Gew(4),i=e.GaO();e.yG2(),e.E7m("ngIf",i.emptyContent$())("ngIfElse",n)}}function Ze(t,_){if(1&t&&(e.I0R(0,"span",null,16),e._Xx(2,1),e.C$Y(),e.yuY(3,Je,2,0,"ng-template",null,17,e.gJz)(5,We,2,1,"ng-template",null,18,e.gJz)(7,Qe,2,2,"ng-container",15)),2&t){const n=e.Gew(1);e.yG2(7),e.E7m("ngIf",!n.hasChildNodes())}}function qe(t,_){1&t&&e.wR5(0,"tui-loader")}function et(t,_){1&t&&e.C_f(0)}function tt(t,_){if(1&t&&e.yuY(0,et,1,0,"ng-container",8),2&t){e.GaO(2);const n=e.Gew(9);e.E7m("ngTemplateOutlet",n)}}function nt(t,_){1&t&&e.C_f(0)}function it(t,_){if(1&t&&(e.SAx(0),e.yuY(1,nt,1,0,"ng-container",8),e.k70()),2&t){e.GaO(2);const n=e.Gew(11);e.yG2(),e.E7m("ngTemplateOutlet",n)}}function ot(t,_){if(1&t&&e.yuY(0,tt,1,1,"ng-template",null,21,e.gJz)(2,it,2,1,"ng-container",20),2&t){const n=e.Gew(1),i=e.GaO();e.yG2(2),e.E7m("ngIf",i.loading())("ngIfElse",n)}}function _t(t,_){1&t&&e.C_f(0)}function st(t,_){1&t&&e.C_f(0)}function at(t,_){1&t&&e.C_f(0)}function lt(t,_){if(1&t&&(e.SAx(0),e.yuY(1,at,1,0,"ng-container",8),e.k70()),2&t){e.GaO(4);const n=e.Gew(11);e.yG2(),e.E7m("ngTemplateOutlet",n)}}function ct(t,_){1&t&&e.C_f(0)}function rt(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",28)(1,"span",29),e.qCj("click",function(){e.usT(n);const o=e.GaO(4);return e.CGJ(o.loadMoreItems())}),e.yuY(2,ct,1,0,"ng-container",20),e.C$Y()()}if(2&t){const n=e.GaO(4),i=e.Gew(1);e.E7m("size",n.optionSize)("disabled",!0),e.yG2(2),e.E7m("ngIf",n.loadMore)("ngIfElse",i)}}function ut(t,_){if(1&t&&(e.SAx(0),e.yuY(1,lt,2,1,"ng-container",15)(2,rt,3,4,"button",27),e.k70()),2&t){const n=e.GaO(3);e.yG2(),e.E7m("ngIf",n.loading),e.yG2(),e.E7m("ngIf",!n.loading)}}const gt=t=>({$implicit:t});function pt(t,_){if(1&t){const n=e.KQA();e.SAx(0),e.I0R(1,"button",25),e.qCj("mouseenter",function(){const o=e.usT(n),s=o.index,c=o.last,m=e.GaO(2);return e.CGJ(m.optionMouseEnter(s,c))})("focus",function(){const o=e.usT(n),s=o.index,c=o.last,m=e.GaO(2);return e.CGJ(m.optionFocus(s,c))}),e.yuY(2,st,1,0,"ng-container",26),e.C$Y(),e.yuY(3,ut,3,2,"ng-container",15),e.k70()}if(2&t){const n=_.$implicit,i=_.last,o=e.GaO(2),s=e.Gew(5);e.yG2(),e.E7m("size",o.optionSize)("value",n)("disabled",o.disabledItemHandler(n)),e.yG2(),e.E7m("ngTemplateOutlet",s)("ngTemplateOutletContext",e.S45(6,gt,n)),e.yG2(),e.E7m("ngIf",i&&o.thereAreMoreItems)}}function dt(t,_){if(1&t){const n=e.KQA();e.I0R(0,"span",33),e.qCj("click",function(){e.usT(n);const o=e.GaO(3);return e.CGJ(o.createNew.emit())}),e.I0R(1,"mat-icon"),e.OEk(2,"add"),e.C$Y(),e.I0R(3,"span"),e.aS0(4,34),e.C$Y()()}}function mt(t,_){if(1&t&&(e.I0R(0,"button",30)(1,"span",null,31),e._Xx(3,2),e.C$Y(),e.yuY(4,dt,5,0,"span",32),e.C$Y()),2&t){const n=e.Gew(2),i=e.GaO(2);e.E7m("size",i.optionSize)("value",null)("disabled",!0),e.yG2(4),e.E7m("ngIf",!n.hasChildNodes())}}function Ct(t,_){if(1&t&&(e.I0R(0,"tui-data-list",22),e.yuY(1,pt,4,8,"ng-container",23)(2,mt,5,4,"button",24),e.C$Y()),2&t){const n=e.GaO(),i=e.Gew(13);e.E7m("emptyContent",i),e.yG2(),e.E7m("ngForOf",n.items()),e.yG2(),e.E7m("ngIf",n.showCreateNew)}}const St=["*",[["","empty-content",""]],[["","create-new",""]]],ht=["*","[empty-content]","[create-new]"];let Et=(()=>{class t extends j.m{constructor(){super(),this.stringify=n=>n.name??"",this.service=(0,e.uUt)(ne.K),this.nativeOptionTemplate$.set(new v.WO(Ge))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-ingredient-select"]],inputs:{outputType:"outputType",service:"service",stringify:"stringify",query:"query",autofocus:"autofocus",placeholder:"placeholder",optionTemplate:"optionTemplate",stringifyOption:"stringifyOption",inputSize:"inputSize",page:"page",per_page:"per_page",optionSize:"optionSize",disabledItemHandler:"disabledItemHandler",loadMoreOnLastItem:"loadMoreOnLastItem",emptyContent:"emptyContent",showCreateNew:"showCreateNew",nativeOptionTemplate:"nativeOptionTemplate",filters:"filters",showCleaner:"showCleaner"},outputs:{httpError:"httpError",pageChange:"pageChange",queryChange:"queryChange",per_pageChange:"per_pageChange",createNew:"createNew"},standalone:!0,features:[e.M5G([{provide:r.Y6,useExisting:(0,e.wd)(()=>t),multi:!0},l.UF]),e.eg9,e.UHJ],ngContentSelectors:ht,decls:17,vars:6,consts:()=>{let n,i,o;return n="Carica altri",i="Non abbiamo trovato nulla.",o="Crea nuovo",[["loadMoreDefault",""],["valueContent",""],["nativeOptionTemplate",""],["placeholderTemplate",""],["nativeEmptyContentTemplate",""],["loadingTemplate",""],["loadingOrEmptyContent",""],[3,"tuiTextfieldCleaner","stringify","tuiTextfieldSize","formControl","valueContent","searchChange"],[4,"ngTemplateOutlet"],[3,"emptyContent",4,"tuiDataList"],n,[4,"polymorpheusOutlet"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],[3,"innerText"],["customContent",""],[4,"ngIf"],["customEmptyContent",""],["defaultEmptyContent",""],["emptyContentCustomString",""],i,[4,"ngIf","ngIfElse"],["empty",""],[3,"emptyContent"],[4,"ngFor","ngForOf"],["tuiOption","",3,"size","value","disabled",4,"ngIf"],["tuiOption","",3,"size","value","disabled","mouseenter","focus"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tuiOption","",3,"size","disabled",4,"ngIf"],["tuiOption","",3,"size","disabled"],["role","button",3,"click"],["tuiOption","",3,"size","value","disabled"],["createNewCustomTemplate",""],["role","button","class","d-flex align-items-center",3,"click",4,"ngIf"],["role","button",1,"d-flex","align-items-center",3,"click"],o]},template:function(i,o){if(1&i&&(e.kPM(St),e.yuY(0,Re,2,0,"ng-template",null,0,e.gJz)(2,Pe,4,1,"ng-template",null,1,e.gJz)(4,Be,4,1,"ng-template",null,2,e.gJz)(6,Xe,4,1,"ng-template",null,3,e.gJz)(8,Ze,8,1,"ng-template",null,4,e.gJz)(10,qe,1,0,"ng-template",null,5,e.gJz)(12,ot,3,2,"ng-template",null,6,e.gJz),e.I0R(14,"tui-combo-box",7),e.qCj("searchChange",function(c){return o.onSearchChange(c)}),e.yuY(15,_t,1,0,"ng-container",8)(16,Ct,3,3,"tui-data-list",9),e.C$Y()),2&i){const s=e.Gew(3),c=e.Gew(7);e.yG2(14),e.E7m("tuiTextfieldCleaner",o.showCleaner)("stringify",o.stringify)("tuiTextfieldSize",o.inputSize)("formControl",o.control)("valueContent",s),e.yG2(),e.E7m("ngTemplateOutlet",c)}},dependencies:[I.MD,I.ay,I.u_,I.XV,w.uk,w.i_,w.qI,R.aS,R.es,R.rD,q.KA,P.CQ,O.A$,O.yi,O.sP,O.Ux,Q.q8,r.sl,r.ue,r.ug,ee.kR,Z.CA,A.Sk,A.Cb,v.Ux,v.Af,x.oB,x.qL],changeDetection:0})}return t})();var F=a(1343);const ft=(t,_)=>_.id;function Tt(t,_){if(1&t&&e.wR5(0,"app-show-image",13),2&t){const n=e.GaO().$implicit;e.E7m("image",n.image)}}function Ot(t,_){1&t&&(e.SAx(0),e.aS0(1,14),e.k70())}function It(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",15),e.qCj("click",function(){e.usT(n);const o=e.GaO().$implicit,s=e.GaO();return e.CGJ(s.remove(o))}),e.SAx(1),e.aS0(2,16),e.k70(),e.C$Y()}}function Nt(t,_){if(1&t&&(e.I0R(0,"tui-island",4)(1,"div",5)(2,"span",6),e.yuY(3,Tt,1,1,"app-show-image",7),e.I0R(4,"div"),e.OEk(5),e.C$Y()(),e.I0R(6,"div",6),e.yuY(7,Ot,2,0,"ng-template",null,8,e.gJz),e.I0R(9,"button",9)(10,"mat-icon"),e.OEk(11,"drag_handle"),e.C$Y()(),e.yuY(12,It,3,0,"ng-template",null,10,e.gJz),e.I0R(14,"tui-hosted-dropdown",11)(15,"button",12)(16,"mat-icon"),e.OEk(17,"delete"),e.C$Y()()()()()()),2&t){const n=_.$implicit,i=e.Gew(8),o=e.Gew(13);e.yG2(3),e.E7m("ngIf",n&&n.image),e.yG2(2),e.oRS(" ",n.name," "),e.yG2(4),e.E7m("tuiHint",i),e.yG2(5),e.E7m("content",o)}}function Mt(t,_){1&t&&(e.I0R(0,"p"),e.SAx(1),e.aS0(2,17),e.k70(),e.C$Y())}const Gt=t=>({avoid_associated_dish_id:t});function Rt(t,_){if(1&t){const n=e.KQA();e.I0R(0,"form",18),e.qCj("ngSubmit",function(){e.usT(n);const o=e.GaO();return e.CGJ(o.addIngredient())}),e.I0R(1,"div",19)(2,"app-ingredient-select",20),e.SAx(3),e.aS0(4,21),e.k70(),e.C$Y()(),e.I0R(5,"button",22),e.SAx(6),e.aS0(7,23),e.k70(),e.C$Y()()}if(2&t){const n=e.GaO();e.E7m("formGroup",n.newIngredientForm),e.yG2(2),e.E7m("filters",e.S45(4,Gt,n.dish.id))("formControlName","ingredient"),e.yG2(3),e.E7m("showLoader",n.associatingIngredient())}}function yt(t,_){1&t&&e.OEk(0,"\nerror. no dish or dish.id\n")}let Dt=(()=>{class t{constructor(){this.ingredientsService=(0,e.uUt)(ne.K),this.dishesService=(0,e.uUt)(C.k),this.destroy$=(0,e.uUt)(l.UF),this.notifications=(0,e.uUt)(d.E),this.dialogs=(0,e.uUt)(B._k),this.dishChange=new e._w7,this.dish=null,this.searching=(0,e.OCB)(!1),this.deleting=(0,e.OCB)(!1),this.moving=(0,e.OCB)(!1),this.associatingIngredient=(0,e.OCB)(!1),this.removingIngredient=(0,e.OCB)(!1),this.loading=(0,e.S6b)(()=>this.searching()||this.deleting()||this.moving()||this.associatingIngredient()||this.removingIngredient()),this.ordering=(0,e.OCB)(!1),this.data=(0,e.OCB)(null),this.items=(0,e.S6b)(()=>this.data()?.items??[]),this.newIngredientForm=new r.WC({ingredient:new r.Ku(null,r.AQ.required)})}ngOnChanges(n){n.dish&&this.search()}search(n=this.defaultFilters()){this.searchSub?.unsubscribe(),this.searching.set(!0),this.searchSub=this.ingredientsService.search(n).pipe((0,u.a)(this.destroy$),(0,g.U)(()=>this.searching.set(!1))).subscribe({next:i=>this.data.set(i),error:i=>{this.data.set(null),this.notifications.error((0,T.mk)(i)||"Qualcosa \xE8 andato storto. Riprova pi\xF9 tardi.")}})}drop(n){if(n.previousIndex===n.currentIndex)return;const i=this.items(),o=i[n.previousIndex]?.id,s=this.dish?.id;o&&s&&((0,$.qv)(i,n.previousIndex,n.currentIndex),this.moving.set(!0),this.dishesService.moveIngredient(s,o,n.currentIndex).pipe((0,u.a)(this.destroy$),(0,g.U)(()=>this.moving.set(!1)),(0,g.U)(()=>this.search())).subscribe({error:c=>this.notifications.error((0,T.mk)(c)||"Qualcosa \xE8 andato storto.")}))}remove(n){const i=this.dish?.id,o=n.id;i&&o&&(this.removingIngredient.set(!0),this.dishesService.removeIngredient(i,o).pipe((0,u.a)(this.destroy$),(0,g.U)(()=>this.removingIngredient.set(!1)),(0,g.U)(()=>this.search())).subscribe((0,F.I)()))}triggerOrdering(){this.ordering()||this.notifications.fireSnackBar("Sposta i piatti trascinandoli con il bottone sul lato destro di ciascuna categoria.","Capito",{duration:5e3}),this.ordering.set(!this.ordering())}dismissAddIngredient(){this.addIngredientModal?.unsubscribe(),this.newIngredientForm.reset()}showAddIngredient(n){this.addIngredientModal=this.dialogs.open(n).subscribe()}addIngredient(){const n=this.dish?.id,i=this.newIngredientForm.get("ingredient")?.value?.id;this.newIngredientForm.valid&&i&&n&&(this.associatingIngredient.set(!0),this.dishesService.addIngredient(n,i).pipe((0,u.a)(this.destroy$),(0,g.U)(()=>this.dismissAddIngredient()),(0,g.U)(()=>this.search()),(0,g.U)(()=>this.associatingIngredient.set(!1))).subscribe({error:o=>this.notifications.error((0,T.mk)(o)||"Qualcosa \xE8 andato storto.")}))}defaultFilters(){const n={per_page:1e3};return this.dish&&this.dish.id&&(n.associated_dish_id=this.dish.id),n}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-dish-ingredients"]],inputs:{dish:"dish"},outputs:{dishChange:"dishChange"},standalone:!0,features:[e.M5G([l.UF]),e.SYr,e.UHJ],decls:9,vars:2,consts:()=>{let n,i,o,s,c,m;return n="Ingredienti",i="Trascina per ordinare.",o="Rimuovi ingrediente dal piatto",s="Non ci sono ingredienti",c="Aggiungi ingrediente",m="Aggiungi ingrediente",[[3,"click"],n,["cdkDropList","",1,"items-list",3,"cdkDropListDropped"],["class","flex items-center",3,"formGroup"],["cdkDrag","",1,"mb-2"],[1,"flex","justify-between","items-center"],[1,"flex","items-center"],["style","max-width: 100px;","class","inline-block rounded me-2",3,"image",4,"ngIf"],["dragHint",""],["size","m","cdkDragHandle","","tuiIconButton","","type","button","appearance","outline",1,"me-2",3,"tuiHint"],["deleteDropdown",""],[3,"content"],["size","m","tuiIconButton","","type","button","appearance","outline"],[1,"inline-block","rounded","me-2",2,"max-width","100px",3,"image"],i,["tuiButton","","appearance","secondary-destructive","type","button",1,"m-4",3,"click"],o,s,[1,"flex","items-center",3,"formGroup","ngSubmit"],[1,"grow","me-1"],[3,"filters","formControlName"],c,["tuiButton","","size","m","type","submit",1,"me-2",3,"showLoader"],m,["cdkDrag","","class","mb-2"]]},template:function(i,o){1&i&&(e.I0R(0,"h4",0),e.qCj("click",function(){return o.search()}),e.SAx(1),e.aS0(2,1),e.k70(),e.C$Y(),e.I0R(3,"div",2),e.qCj("cdkDropListDropped",function(c){return o.drop(c)}),e.c53(4,Nt,18,4,"tui-island",24,ft,!1,Mt,3,0,"p"),e.C$Y(),e.yuY(7,Rt,8,6,"form",3)(8,yt,1,0)),2&i&&(e.yG2(4),e.oho(o.items()),e.yG2(3),e.C0Y(7,o.dish&&o.dish.id?7:8))},dependencies:[z.w,x.qL,L.GE,L.Qw,D.CI,D.Kw,b.k,b.C,W.t,J.ms,O.A$,I.u_,H.y,r.sl,r.sz,r.ue,r.u,r.uW,r.Wo,P.CQ,X.m6,R.aS,A.Sk,K.yy,$.Cm,$.w5,$.A3,y.WY,y.lh,y.SL,y.i6,y.IT,V.Gs,Et],styles:["[_nghost-%COMP%]   .items-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   tui-island[cdkDrag][_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   .items-list[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .items-list[_ngcontent-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   [cdkDragHandle][_ngcontent-%COMP%]{cursor:move}"],changeDetection:0})}return t})();var _e=a(7307),At=a(4824);function xt(t,_){if(1&t&&e.wR5(0,"app-show-image",5),2&t){const n=e.GaO(2);let i;e.E7m("image",null==(i=n.item())?null:i.image)}}function $t(t,_){if(1&t&&(e.I0R(0,"div",1),e.yuY(1,xt,1,1,"app-show-image",2),e.I0R(2,"span",3),e.OEk(3),e.C$Y(),e.I0R(4,"span",4),e.OEk(5),e.C$Y()()),2&t){const n=e.GaO();let i,o,s;e.yG2(),e.C0Y(1,null!=(i=n.item())&&i.image?1:-1),e.yG2(2),e.oRS(" #",null==(o=n.item())?null:o.id," "),e.yG2(2),e.oRS(" ",null==(s=n.item())?null:s.name," ")}}function vt(t,_){1&t&&e.OEk(0," invalid input.\n")}let Lt=(()=>{class t{constructor(n){this.context=n,this.item=(0,e.OCB)(null);const i=n.data;i&&i instanceof At.o?this.item.set(i):console.warn("invalid data. Please provide parm 'data' to context.",i)}static#e=this.\u0275fac=function(i){return new(i||t)(e.GI1(v.C0))};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-allergen-select-option"]],standalone:!0,features:[e.UHJ],decls:2,vars:1,consts:[["class","flex items-center p-2"],[1,"flex","items-center","p-2"],["class","max-h-[100px] max-w-[100px]",3,"image"],[1,"ms-2","text-slate-400"],[1,"ms-2","text-lg"],[1,"max-h-[100px]","max-w-[100px]",3,"image"]],template:function(i,o){1&i&&e.yuY(0,$t,6,3,"div",0)(1,vt,1,0),2&i&&e.C0Y(0,o.item()?0:1)},dependencies:[H.y],encapsulation:2,changeDetection:0})}return t})();function Pt(t,_){1&t&&(e.SAx(0),e.aS0(1,10),e.k70())}function wt(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=_.polymorpheusOutlet;e.yG2(),e.oRS(" ",n," ")}}function bt(t,_){if(1&t&&e.yuY(0,wt,2,1,"ng-container",11),2&t){const n=e.GaO(2);e.E7m("polymorpheusOutlet",n.optionTemplate$())}}function Yt(t,_){1&t&&e.C_f(0)}const se=(t,_)=>({$implicit:t,injector:_});function Ut(t,_){if(1&t&&e.yuY(0,Yt,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.optionTemplate$())("polymorpheusOutletContext",e.IBC(2,se,n,i.injector))}}function Ht(t,_){1&t&&e.C_f(0)}const ae=t=>({data:t});function kt(t,_){if(1&t&&e.yuY(0,Ht,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.optionTemplate$())("polymorpheusOutletContext",e.S45(2,ae,n))}}function zt(t,_){if(1&t&&e.wR5(0,"div",13),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("innerText",i.stringify(n))}}function Bt(t,_){if(1&t&&e.yuY(0,bt,1,1)(1,Ut,1,5)(2,kt,1,4)(3,zt,1,1),2&t){const n=e.GaO();let i;e.C0Y(0,"text"===(i=n.optionTemplateType$())?0:"template"===i?1:"component"===i?2:3)}}function Ft(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=_.polymorpheusOutlet;e.yG2(),e.oRS(" ",n," ")}}function Xt(t,_){if(1&t&&e.yuY(0,Ft,2,1,"ng-container",11),2&t){const n=e.GaO(2);e.E7m("polymorpheusOutlet",n.nativeOptionTemplate$())}}function Jt(t,_){1&t&&e.C_f(0)}function Wt(t,_){if(1&t&&e.yuY(0,Jt,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.nativeOptionTemplate$())("polymorpheusOutletContext",e.IBC(2,se,n,i.injector))}}function Vt(t,_){1&t&&e.C_f(0)}function Kt(t,_){if(1&t&&e.yuY(0,Vt,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.nativeOptionTemplate$())("polymorpheusOutletContext",e.S45(2,ae,n))}}function jt(t,_){if(1&t&&e.wR5(0,"div",13),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("innerText",i.stringify(n))}}function Qt(t,_){if(1&t&&e.yuY(0,Xt,1,1)(1,Wt,1,5)(2,Kt,1,4)(3,jt,1,1),2&t){const n=e.GaO();let i;e.C0Y(0,"text"===(i=n.nativeOptionTemplateType$())?0:"template"===i?1:"component"===i?2:3)}}function Zt(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=e.GaO(2);e.yG2(),e.oRS(" ",n.placeholder," ")}}function qt(t,_){if(1&t&&(e.I0R(0,"span",null,14),e._Xx(2),e.C$Y(),e.yuY(3,Zt,2,1,"ng-container",15)),2&t){const n=e.Gew(1);e.yG2(3),e.E7m("ngIf",!n.hasChildNodes())}}function en(t,_){1&t&&(e.SAx(0),e.aS0(1,19),e.k70())}function tn(t,_){if(1&t&&(e.I0R(0,"span"),e.OEk(1),e.C$Y()),2&t){const n=e.GaO(2);e.yG2(),e.cNF(n.emptyContentString())}}function nn(t,_){1&t&&e.C_f(0)}function on(t,_){if(1&t&&(e.SAx(0),e.yuY(1,nn,1,0,"ng-container",8),e.k70()),2&t){const n=e.GaO(4);e.yG2(),e.E7m("ngTemplateOutlet",n.emptyContentTemplate())}}function _n(t,_){if(1&t&&(e.SAx(0),e.yuY(1,on,2,1,"ng-container",20),e.k70()),2&t){e.GaO(2);const n=e.Gew(6),i=e.GaO();e.yG2(),e.E7m("ngIf",i.emptyContentTemplate())("ngIfElse",n)}}function sn(t,_){if(1&t&&(e.SAx(0),e.yuY(1,_n,2,2,"ng-container",20),e.k70()),2&t){e.GaO();const n=e.Gew(4),i=e.GaO();e.yG2(),e.E7m("ngIf",i.emptyContent$())("ngIfElse",n)}}function an(t,_){if(1&t&&(e.I0R(0,"span",null,16),e._Xx(2,1),e.C$Y(),e.yuY(3,en,2,0,"ng-template",null,17,e.gJz)(5,tn,2,1,"ng-template",null,18,e.gJz)(7,sn,2,2,"ng-container",15)),2&t){const n=e.Gew(1);e.yG2(7),e.E7m("ngIf",!n.hasChildNodes())}}function ln(t,_){1&t&&e.wR5(0,"tui-loader")}function cn(t,_){1&t&&e.C_f(0)}function rn(t,_){if(1&t&&e.yuY(0,cn,1,0,"ng-container",8),2&t){e.GaO(2);const n=e.Gew(9);e.E7m("ngTemplateOutlet",n)}}function un(t,_){1&t&&e.C_f(0)}function gn(t,_){if(1&t&&(e.SAx(0),e.yuY(1,un,1,0,"ng-container",8),e.k70()),2&t){e.GaO(2);const n=e.Gew(11);e.yG2(),e.E7m("ngTemplateOutlet",n)}}function pn(t,_){if(1&t&&e.yuY(0,rn,1,1,"ng-template",null,21,e.gJz)(2,gn,2,1,"ng-container",20),2&t){const n=e.Gew(1),i=e.GaO();e.yG2(2),e.E7m("ngIf",i.loading())("ngIfElse",n)}}function dn(t,_){1&t&&e.C_f(0)}function mn(t,_){1&t&&e.C_f(0)}function Cn(t,_){1&t&&e.C_f(0)}function Sn(t,_){if(1&t&&(e.SAx(0),e.yuY(1,Cn,1,0,"ng-container",8),e.k70()),2&t){e.GaO(4);const n=e.Gew(11);e.yG2(),e.E7m("ngTemplateOutlet",n)}}function hn(t,_){1&t&&e.C_f(0)}function En(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",28)(1,"span",29),e.qCj("click",function(){e.usT(n);const o=e.GaO(4);return e.CGJ(o.loadMoreItems())}),e.yuY(2,hn,1,0,"ng-container",20),e.C$Y()()}if(2&t){const n=e.GaO(4),i=e.Gew(1);e.E7m("size",n.optionSize)("disabled",!0),e.yG2(2),e.E7m("ngIf",n.loadMore)("ngIfElse",i)}}function fn(t,_){if(1&t&&(e.SAx(0),e.yuY(1,Sn,2,1,"ng-container",15)(2,En,3,4,"button",27),e.k70()),2&t){const n=e.GaO(3);e.yG2(),e.E7m("ngIf",n.loading),e.yG2(),e.E7m("ngIf",!n.loading)}}const Tn=t=>({$implicit:t});function On(t,_){if(1&t){const n=e.KQA();e.SAx(0),e.I0R(1,"button",25),e.qCj("mouseenter",function(){const o=e.usT(n),s=o.index,c=o.last,m=e.GaO(2);return e.CGJ(m.optionMouseEnter(s,c))})("focus",function(){const o=e.usT(n),s=o.index,c=o.last,m=e.GaO(2);return e.CGJ(m.optionFocus(s,c))}),e.yuY(2,mn,1,0,"ng-container",26),e.C$Y(),e.yuY(3,fn,3,2,"ng-container",15),e.k70()}if(2&t){const n=_.$implicit,i=_.last,o=e.GaO(2),s=e.Gew(5);e.yG2(),e.E7m("size",o.optionSize)("value",n)("disabled",o.disabledItemHandler(n)),e.yG2(),e.E7m("ngTemplateOutlet",s)("ngTemplateOutletContext",e.S45(6,Tn,n)),e.yG2(),e.E7m("ngIf",i&&o.thereAreMoreItems)}}function In(t,_){if(1&t){const n=e.KQA();e.I0R(0,"span",33),e.qCj("click",function(){e.usT(n);const o=e.GaO(3);return e.CGJ(o.createNew.emit())}),e.I0R(1,"mat-icon"),e.OEk(2,"add"),e.C$Y(),e.I0R(3,"span"),e.aS0(4,34),e.C$Y()()}}function Nn(t,_){if(1&t&&(e.I0R(0,"button",30)(1,"span",null,31),e._Xx(3,2),e.C$Y(),e.yuY(4,In,5,0,"span",32),e.C$Y()),2&t){const n=e.Gew(2),i=e.GaO(2);e.E7m("size",i.optionSize)("value",null)("disabled",!0),e.yG2(4),e.E7m("ngIf",!n.hasChildNodes())}}function Mn(t,_){if(1&t&&(e.I0R(0,"tui-data-list",22),e.yuY(1,On,4,8,"ng-container",23)(2,Nn,5,4,"button",24),e.C$Y()),2&t){const n=e.GaO(),i=e.Gew(13);e.E7m("emptyContent",i),e.yG2(),e.E7m("ngForOf",n.items()),e.yG2(),e.E7m("ngIf",n.showCreateNew)}}const Gn=["*",[["","empty-content",""]],[["","create-new",""]]],Rn=["*","[empty-content]","[create-new]"];let yn=(()=>{class t extends j.m{constructor(){super(),this.stringify=n=>n.name??"",this.service=(0,e.uUt)(_e._),this.nativeOptionTemplate$.set(new v.WO(Lt))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-allergen-select"]],inputs:{outputType:"outputType",service:"service",stringify:"stringify",query:"query",autofocus:"autofocus",placeholder:"placeholder",optionTemplate:"optionTemplate",stringifyOption:"stringifyOption",inputSize:"inputSize",page:"page",per_page:"per_page",optionSize:"optionSize",disabledItemHandler:"disabledItemHandler",loadMoreOnLastItem:"loadMoreOnLastItem",emptyContent:"emptyContent",showCreateNew:"showCreateNew",nativeOptionTemplate:"nativeOptionTemplate",filters:"filters",showCleaner:"showCleaner"},outputs:{httpError:"httpError",pageChange:"pageChange",queryChange:"queryChange",per_pageChange:"per_pageChange",createNew:"createNew"},standalone:!0,features:[e.M5G([{provide:r.Y6,useExisting:(0,e.wd)(()=>t),multi:!0},l.UF]),e.eg9,e.UHJ],ngContentSelectors:Rn,decls:17,vars:6,consts:()=>{let n,i,o;return n="Carica altri",i="Non abbiamo trovato nulla.",o="Crea nuovo",[["loadMoreDefault",""],["valueContent",""],["nativeOptionTemplate",""],["placeholderTemplate",""],["nativeEmptyContentTemplate",""],["loadingTemplate",""],["loadingOrEmptyContent",""],[3,"tuiTextfieldCleaner","stringify","tuiTextfieldSize","formControl","valueContent","searchChange"],[4,"ngTemplateOutlet"],[3,"emptyContent",4,"tuiDataList"],n,[4,"polymorpheusOutlet"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],[3,"innerText"],["customContent",""],[4,"ngIf"],["customEmptyContent",""],["defaultEmptyContent",""],["emptyContentCustomString",""],i,[4,"ngIf","ngIfElse"],["empty",""],[3,"emptyContent"],[4,"ngFor","ngForOf"],["tuiOption","",3,"size","value","disabled",4,"ngIf"],["tuiOption","",3,"size","value","disabled","mouseenter","focus"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tuiOption","",3,"size","disabled",4,"ngIf"],["tuiOption","",3,"size","disabled"],["role","button",3,"click"],["tuiOption","",3,"size","value","disabled"],["createNewCustomTemplate",""],["role","button","class","d-flex align-items-center",3,"click",4,"ngIf"],["role","button",1,"d-flex","align-items-center",3,"click"],o]},template:function(i,o){if(1&i&&(e.kPM(Gn),e.yuY(0,Pt,2,0,"ng-template",null,0,e.gJz)(2,Bt,4,1,"ng-template",null,1,e.gJz)(4,Qt,4,1,"ng-template",null,2,e.gJz)(6,qt,4,1,"ng-template",null,3,e.gJz)(8,an,8,1,"ng-template",null,4,e.gJz)(10,ln,1,0,"ng-template",null,5,e.gJz)(12,pn,3,2,"ng-template",null,6,e.gJz),e.I0R(14,"tui-combo-box",7),e.qCj("searchChange",function(c){return o.onSearchChange(c)}),e.yuY(15,dn,1,0,"ng-container",8)(16,Mn,3,3,"tui-data-list",9),e.C$Y()),2&i){const s=e.Gew(3),c=e.Gew(7);e.yG2(14),e.E7m("tuiTextfieldCleaner",o.showCleaner)("stringify",o.stringify)("tuiTextfieldSize",o.inputSize)("formControl",o.control)("valueContent",s),e.yG2(),e.E7m("ngTemplateOutlet",c)}},dependencies:[I.MD,I.ay,I.u_,I.XV,w.uk,w.i_,w.qI,R.aS,R.es,R.rD,q.KA,P.CQ,O.A$,O.yi,O.sP,O.Ux,Q.q8,r.sl,r.ue,r.ug,ee.kR,Z.CA,A.Sk,A.Cb,v.Ux,v.Af,x.oB,x.qL],changeDetection:0})}return t})();const Dn=(t,_)=>_.id;function An(t,_){if(1&t&&e.wR5(0,"app-show-image",13),2&t){const n=e.GaO().$implicit;e.E7m("image",n.image)}}function xn(t,_){1&t&&(e.SAx(0),e.aS0(1,14),e.k70())}function $n(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",15),e.qCj("click",function(){e.usT(n);const o=e.GaO().$implicit,s=e.GaO();return e.CGJ(s.remove(o))}),e.SAx(1),e.aS0(2,16),e.k70(),e.C$Y()}}function vn(t,_){if(1&t&&(e.I0R(0,"tui-island",4)(1,"div",5)(2,"span",6),e.yuY(3,An,1,1,"app-show-image",7),e.I0R(4,"div"),e.OEk(5),e.C$Y()(),e.I0R(6,"div",6),e.yuY(7,xn,2,0,"ng-template",null,8,e.gJz),e.I0R(9,"button",9)(10,"mat-icon"),e.OEk(11,"drag_handle"),e.C$Y()(),e.yuY(12,$n,3,0,"ng-template",null,10,e.gJz),e.I0R(14,"tui-hosted-dropdown",11)(15,"button",12)(16,"mat-icon"),e.OEk(17,"delete"),e.C$Y()()()()()()),2&t){const n=_.$implicit,i=e.Gew(8),o=e.Gew(13);e.yG2(3),e.E7m("ngIf",n&&n.image),e.yG2(2),e.oRS(" ",n.name," "),e.yG2(4),e.E7m("tuiHint",i),e.yG2(5),e.E7m("content",o)}}function Ln(t,_){1&t&&(e.I0R(0,"p"),e.SAx(1),e.aS0(2,17),e.k70(),e.C$Y())}const Pn=t=>({avoid_associated_dish_id:t});function wn(t,_){if(1&t){const n=e.KQA();e.I0R(0,"form",18),e.qCj("ngSubmit",function(){e.usT(n);const o=e.GaO();return e.CGJ(o.addAllergen())}),e.I0R(1,"div",19)(2,"app-allergen-select",20),e.SAx(3),e.aS0(4,21),e.k70(),e.C$Y()(),e.I0R(5,"button",22),e.SAx(6),e.aS0(7,23),e.k70(),e.C$Y()()}if(2&t){const n=e.GaO();e.E7m("formGroup",n.newAllergenForm),e.yG2(2),e.E7m("filters",e.S45(4,Pn,n.dish.id))("formControlName","allergen"),e.yG2(3),e.E7m("showLoader",n.addingAllergen())}}function bn(t,_){1&t&&e.OEk(0,"\nno dish or dish.id\n")}let Yn=(()=>{class t{constructor(){this.allergensService=(0,e.uUt)(_e._),this.dishesService=(0,e.uUt)(C.k),this.destroy$=(0,e.uUt)(l.UF),this.notifications=(0,e.uUt)(d.E),this.dialogs=(0,e.uUt)(B._k),this.dishChange=new e._w7,this.dish=null,this.searching=(0,e.OCB)(!1),this.deleting=(0,e.OCB)(!1),this.moving=(0,e.OCB)(!1),this.addingAllergen=(0,e.OCB)(!1),this.removingAllergen=(0,e.OCB)(!1),this.loading=(0,e.S6b)(()=>this.searching()||this.deleting()||this.moving()||this.addingAllergen()||this.removingAllergen()),this.ordering=(0,e.OCB)(!1),this.data=(0,e.OCB)(null),this.items=(0,e.S6b)(()=>this.data()?.items??[]),this.newAllergenForm=new r.WC({allergen:new r.Ku(null,r.AQ.required)})}ngOnChanges(n){n.dish&&this.search()}search(n=this.defaultFilters()){this.searchSub?.unsubscribe(),this.searching.set(!0),this.searchSub=this.allergensService.search(n).pipe((0,u.a)(this.destroy$),(0,g.U)(()=>this.searching.set(!1))).subscribe({next:i=>this.data.set(i),error:i=>{this.data.set(null),this.notifications.error((0,T.mk)(i)||"Qualcosa \xE8 andato storto. Riprova pi\xF9 tardi.")}})}drop(n){if(n.previousIndex===n.currentIndex)return;const i=this.items(),o=i[n.previousIndex]?.id,s=this.dish?.id;o&&s&&((0,$.qv)(i,n.previousIndex,n.currentIndex),this.moving.set(!0),this.dishesService.moveAllergen(s,o,n.currentIndex).pipe((0,u.a)(this.destroy$),(0,g.U)(()=>this.moving.set(!1)),(0,g.U)(()=>this.search())).subscribe({error:c=>this.notifications.error((0,T.mk)(c)||"Qualcosa \xE8 andato storto.")}))}remove(n){const i=this.dish?.id,o=n.id;i&&o&&(this.removingAllergen.set(!0),this.dishesService.removeAllergen(i,o).pipe((0,u.a)(this.destroy$),(0,g.U)(()=>this.removingAllergen.set(!1)),(0,g.U)(()=>this.search())).subscribe((0,F.I)()))}triggerOrdering(){this.ordering()||this.notifications.fireSnackBar("Sposta i piatti trascinandoli con il bottone sul lato destro di ciascuna categoria.","Capito",{duration:5e3}),this.ordering.set(!this.ordering())}dismissAddAllergen(){this.addAllergenModal?.unsubscribe(),this.newAllergenForm.reset()}showAddAllergen(n){this.addAllergenModal=this.dialogs.open(n).subscribe()}addAllergen(){const n=this.dish?.id,i=this.newAllergenForm.get("allergen")?.value?.id;this.newAllergenForm.valid&&i&&n&&(this.addingAllergen.set(!0),this.dishesService.addAllergen(n,i).pipe((0,u.a)(this.destroy$),(0,g.U)(()=>this.dismissAddAllergen()),(0,g.U)(()=>this.search()),(0,g.U)(()=>this.addingAllergen.set(!1))).subscribe({error:o=>this.notifications.error((0,T.mk)(o)||"Qualcosa \xE8 andato storto.")}))}defaultFilters(){const n={per_page:1e3};return this.dish&&this.dish.id&&(n.associated_dish_id=this.dish.id),n}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-dish-allergens"]],inputs:{dish:"dish"},outputs:{dishChange:"dishChange"},standalone:!0,features:[e.M5G([l.UF]),e.SYr,e.UHJ],decls:9,vars:2,consts:()=>{let n,i,o,s,c,m;return n="Allergeni",i="Trascina per ordinare.",o="Rimuovi allergene dal piatto",s="Non ci sono allergeni",c="Aggiungi allergene",m="Aggiungi allergene",[[3,"click"],n,["cdkDropList","",1,"items-list",3,"cdkDropListDropped"],["class","flex items-center",3,"formGroup"],["cdkDrag","",1,"mb-2"],[1,"flex","justify-between","items-center"],[1,"flex","items-center"],["style","max-width: 100px;","class","inline-block rounded me-2",3,"image",4,"ngIf"],["dragHint",""],["size","m","cdkDragHandle","","tuiIconButton","","type","button","appearance","outline",1,"me-2",3,"tuiHint"],["deleteDropdown",""],[3,"content"],["size","m","tuiIconButton","","type","button","appearance","outline"],[1,"inline-block","rounded","me-2",2,"max-width","100px",3,"image"],i,["tuiButton","","appearance","secondary-destructive","type","button",1,"m-4",3,"click"],o,s,[1,"flex","items-center",3,"formGroup","ngSubmit"],[1,"grow","me-1"],[3,"filters","formControlName"],c,["tuiButton","","size","m","type","submit",1,"me-2",3,"showLoader"],m,["cdkDrag","","class","mb-2"]]},template:function(i,o){1&i&&(e.I0R(0,"h4",0),e.qCj("click",function(){return o.search()}),e.SAx(1),e.aS0(2,1),e.k70(),e.C$Y(),e.I0R(3,"div",2),e.qCj("cdkDropListDropped",function(c){return o.drop(c)}),e.c53(4,vn,18,4,"tui-island",24,Dn,!1,Ln,3,0,"p"),e.C$Y(),e.yuY(7,wn,8,6,"form",3)(8,bn,1,0)),2&i&&(e.yG2(4),e.oho(o.items()),e.yG2(3),e.C0Y(7,o.dish&&o.dish.id?7:8))},dependencies:[z.w,x.qL,L.GE,L.Qw,D.CI,D.Kw,b.k,b.C,W.t,J.ms,O.A$,I.u_,H.y,r.sl,r.sz,r.ue,r.u,r.uW,r.Wo,P.CQ,X.m6,R.aS,A.Sk,K.yy,$.Cm,$.w5,$.A3,y.WY,y.lh,y.SL,y.i6,y.IT,V.Gs,yn],styles:["[_nghost-%COMP%]   .items-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   tui-island[cdkDrag][_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   .items-list[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .items-list[_ngcontent-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   [cdkDragHandle][_ngcontent-%COMP%]{cursor:move}"],changeDetection:0})}return t})();var le=a(9116),Un=a(355);function Hn(t,_){if(1&t&&e.wR5(0,"app-show-image",5),2&t){const n=e.GaO(2);let i;e.E7m("image",null==(i=n.item())?null:i.image)}}function kn(t,_){if(1&t&&(e.I0R(0,"div",1),e.yuY(1,Hn,1,1,"app-show-image",2),e.I0R(2,"span",3),e.OEk(3),e.C$Y(),e.I0R(4,"span",4),e.OEk(5),e.C$Y()()),2&t){const n=e.GaO();let i,o,s;e.yG2(),e.C0Y(1,null!=(i=n.item())&&i.image?1:-1),e.yG2(2),e.oRS(" #",null==(o=n.item())?null:o.id," "),e.yG2(2),e.oRS(" ",null==(s=n.item())?null:s.name," ")}}function zn(t,_){1&t&&e.OEk(0," invalid input.\n")}let Bn=(()=>{class t{constructor(n){this.context=n,this.item=(0,e.OCB)(null);const i=n.data;i&&i instanceof Un.E?this.item.set(i):console.warn("invalid data. Please provide parm 'data' to context.",i)}static#e=this.\u0275fac=function(i){return new(i||t)(e.GI1(v.C0))};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-MenuTag-select-option"]],standalone:!0,features:[e.UHJ],decls:2,vars:1,consts:[["class","flex items-center p-2"],[1,"flex","items-center","p-2"],["class","max-h-[100px] max-w-[100px]",3,"image"],[1,"ms-2","text-slate-400"],[1,"ms-2","text-lg"],[1,"max-h-[100px]","max-w-[100px]",3,"image"]],template:function(i,o){1&i&&e.yuY(0,kn,6,3,"div",0)(1,zn,1,0),2&i&&e.C0Y(0,o.item()?0:1)},dependencies:[H.y],encapsulation:2,changeDetection:0})}return t})();function Fn(t,_){1&t&&(e.SAx(0),e.aS0(1,10),e.k70())}function Xn(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=_.polymorpheusOutlet;e.yG2(),e.oRS(" ",n," ")}}function Jn(t,_){if(1&t&&e.yuY(0,Xn,2,1,"ng-container",11),2&t){const n=e.GaO(2);e.E7m("polymorpheusOutlet",n.optionTemplate$())}}function Wn(t,_){1&t&&e.C_f(0)}const ce=(t,_)=>({$implicit:t,injector:_});function Vn(t,_){if(1&t&&e.yuY(0,Wn,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.optionTemplate$())("polymorpheusOutletContext",e.IBC(2,ce,n,i.injector))}}function Kn(t,_){1&t&&e.C_f(0)}const re=t=>({data:t});function jn(t,_){if(1&t&&e.yuY(0,Kn,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.optionTemplate$())("polymorpheusOutletContext",e.S45(2,re,n))}}function Qn(t,_){if(1&t&&e.wR5(0,"div",13),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("innerText",i.stringify(n))}}function Zn(t,_){if(1&t&&e.yuY(0,Jn,1,1)(1,Vn,1,5)(2,jn,1,4)(3,Qn,1,1),2&t){const n=e.GaO();let i;e.C0Y(0,"text"===(i=n.optionTemplateType$())?0:"template"===i?1:"component"===i?2:3)}}function qn(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=_.polymorpheusOutlet;e.yG2(),e.oRS(" ",n," ")}}function ei(t,_){if(1&t&&e.yuY(0,qn,2,1,"ng-container",11),2&t){const n=e.GaO(2);e.E7m("polymorpheusOutlet",n.nativeOptionTemplate$())}}function ti(t,_){1&t&&e.C_f(0)}function ni(t,_){if(1&t&&e.yuY(0,ti,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.nativeOptionTemplate$())("polymorpheusOutletContext",e.IBC(2,ce,n,i.injector))}}function ii(t,_){1&t&&e.C_f(0)}function oi(t,_){if(1&t&&e.yuY(0,ii,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.nativeOptionTemplate$())("polymorpheusOutletContext",e.S45(2,re,n))}}function _i(t,_){if(1&t&&e.wR5(0,"div",13),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("innerText",i.stringify(n))}}function si(t,_){if(1&t&&e.yuY(0,ei,1,1)(1,ni,1,5)(2,oi,1,4)(3,_i,1,1),2&t){const n=e.GaO();let i;e.C0Y(0,"text"===(i=n.nativeOptionTemplateType$())?0:"template"===i?1:"component"===i?2:3)}}function ai(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=e.GaO(2);e.yG2(),e.oRS(" ",n.placeholder," ")}}function li(t,_){if(1&t&&(e.I0R(0,"span",null,14),e._Xx(2),e.C$Y(),e.yuY(3,ai,2,1,"ng-container",15)),2&t){const n=e.Gew(1);e.yG2(3),e.E7m("ngIf",!n.hasChildNodes())}}function ci(t,_){1&t&&(e.SAx(0),e.aS0(1,19),e.k70())}function ri(t,_){if(1&t&&(e.I0R(0,"span"),e.OEk(1),e.C$Y()),2&t){const n=e.GaO(2);e.yG2(),e.cNF(n.emptyContentString())}}function ui(t,_){1&t&&e.C_f(0)}function gi(t,_){if(1&t&&(e.SAx(0),e.yuY(1,ui,1,0,"ng-container",8),e.k70()),2&t){const n=e.GaO(4);e.yG2(),e.E7m("ngTemplateOutlet",n.emptyContentTemplate())}}function pi(t,_){if(1&t&&(e.SAx(0),e.yuY(1,gi,2,1,"ng-container",20),e.k70()),2&t){e.GaO(2);const n=e.Gew(6),i=e.GaO();e.yG2(),e.E7m("ngIf",i.emptyContentTemplate())("ngIfElse",n)}}function di(t,_){if(1&t&&(e.SAx(0),e.yuY(1,pi,2,2,"ng-container",20),e.k70()),2&t){e.GaO();const n=e.Gew(4),i=e.GaO();e.yG2(),e.E7m("ngIf",i.emptyContent$())("ngIfElse",n)}}function mi(t,_){if(1&t&&(e.I0R(0,"span",null,16),e._Xx(2,1),e.C$Y(),e.yuY(3,ci,2,0,"ng-template",null,17,e.gJz)(5,ri,2,1,"ng-template",null,18,e.gJz)(7,di,2,2,"ng-container",15)),2&t){const n=e.Gew(1);e.yG2(7),e.E7m("ngIf",!n.hasChildNodes())}}function Ci(t,_){1&t&&e.wR5(0,"tui-loader")}function Si(t,_){1&t&&e.C_f(0)}function hi(t,_){if(1&t&&e.yuY(0,Si,1,0,"ng-container",8),2&t){e.GaO(2);const n=e.Gew(9);e.E7m("ngTemplateOutlet",n)}}function Ei(t,_){1&t&&e.C_f(0)}function fi(t,_){if(1&t&&(e.SAx(0),e.yuY(1,Ei,1,0,"ng-container",8),e.k70()),2&t){e.GaO(2);const n=e.Gew(11);e.yG2(),e.E7m("ngTemplateOutlet",n)}}function Ti(t,_){if(1&t&&e.yuY(0,hi,1,1,"ng-template",null,21,e.gJz)(2,fi,2,1,"ng-container",20),2&t){const n=e.Gew(1),i=e.GaO();e.yG2(2),e.E7m("ngIf",i.loading())("ngIfElse",n)}}function Oi(t,_){1&t&&e.C_f(0)}function Ii(t,_){1&t&&e.C_f(0)}function Ni(t,_){1&t&&e.C_f(0)}function Mi(t,_){if(1&t&&(e.SAx(0),e.yuY(1,Ni,1,0,"ng-container",8),e.k70()),2&t){e.GaO(4);const n=e.Gew(11);e.yG2(),e.E7m("ngTemplateOutlet",n)}}function Gi(t,_){1&t&&e.C_f(0)}function Ri(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",28)(1,"span",29),e.qCj("click",function(){e.usT(n);const o=e.GaO(4);return e.CGJ(o.loadMoreItems())}),e.yuY(2,Gi,1,0,"ng-container",20),e.C$Y()()}if(2&t){const n=e.GaO(4),i=e.Gew(1);e.E7m("size",n.optionSize)("disabled",!0),e.yG2(2),e.E7m("ngIf",n.loadMore)("ngIfElse",i)}}function yi(t,_){if(1&t&&(e.SAx(0),e.yuY(1,Mi,2,1,"ng-container",15)(2,Ri,3,4,"button",27),e.k70()),2&t){const n=e.GaO(3);e.yG2(),e.E7m("ngIf",n.loading),e.yG2(),e.E7m("ngIf",!n.loading)}}const Di=t=>({$implicit:t});function Ai(t,_){if(1&t){const n=e.KQA();e.SAx(0),e.I0R(1,"button",25),e.qCj("mouseenter",function(){const o=e.usT(n),s=o.index,c=o.last,m=e.GaO(2);return e.CGJ(m.optionMouseEnter(s,c))})("focus",function(){const o=e.usT(n),s=o.index,c=o.last,m=e.GaO(2);return e.CGJ(m.optionFocus(s,c))}),e.yuY(2,Ii,1,0,"ng-container",26),e.C$Y(),e.yuY(3,yi,3,2,"ng-container",15),e.k70()}if(2&t){const n=_.$implicit,i=_.last,o=e.GaO(2),s=e.Gew(5);e.yG2(),e.E7m("size",o.optionSize)("value",n)("disabled",o.disabledItemHandler(n)),e.yG2(),e.E7m("ngTemplateOutlet",s)("ngTemplateOutletContext",e.S45(6,Di,n)),e.yG2(),e.E7m("ngIf",i&&o.thereAreMoreItems)}}function xi(t,_){if(1&t){const n=e.KQA();e.I0R(0,"span",33),e.qCj("click",function(){e.usT(n);const o=e.GaO(3);return e.CGJ(o.createNew.emit())}),e.I0R(1,"mat-icon"),e.OEk(2,"add"),e.C$Y(),e.I0R(3,"span"),e.aS0(4,34),e.C$Y()()}}function $i(t,_){if(1&t&&(e.I0R(0,"button",30)(1,"span",null,31),e._Xx(3,2),e.C$Y(),e.yuY(4,xi,5,0,"span",32),e.C$Y()),2&t){const n=e.Gew(2),i=e.GaO(2);e.E7m("size",i.optionSize)("value",null)("disabled",!0),e.yG2(4),e.E7m("ngIf",!n.hasChildNodes())}}function vi(t,_){if(1&t&&(e.I0R(0,"tui-data-list",22),e.yuY(1,Ai,4,8,"ng-container",23)(2,$i,5,4,"button",24),e.C$Y()),2&t){const n=e.GaO(),i=e.Gew(13);e.E7m("emptyContent",i),e.yG2(),e.E7m("ngForOf",n.items()),e.yG2(),e.E7m("ngIf",n.showCreateNew)}}const Li=["*",[["","empty-content",""]],[["","create-new",""]]],Pi=["*","[empty-content]","[create-new]"];let wi=(()=>{class t extends j.m{constructor(){super(),this.stringify=n=>n.name??"",this.service=(0,e.uUt)(le.w),this.nativeOptionTemplate$.set(new v.WO(Bn))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-menu-tag-select"]],inputs:{outputType:"outputType",service:"service",stringify:"stringify",query:"query",autofocus:"autofocus",placeholder:"placeholder",optionTemplate:"optionTemplate",stringifyOption:"stringifyOption",inputSize:"inputSize",page:"page",per_page:"per_page",optionSize:"optionSize",disabledItemHandler:"disabledItemHandler",loadMoreOnLastItem:"loadMoreOnLastItem",emptyContent:"emptyContent",showCreateNew:"showCreateNew",nativeOptionTemplate:"nativeOptionTemplate",filters:"filters",showCleaner:"showCleaner"},outputs:{httpError:"httpError",pageChange:"pageChange",queryChange:"queryChange",per_pageChange:"per_pageChange",createNew:"createNew"},standalone:!0,features:[e.M5G([{provide:r.Y6,useExisting:(0,e.wd)(()=>t),multi:!0},l.UF]),e.eg9,e.UHJ],ngContentSelectors:Pi,decls:17,vars:6,consts:()=>{let n,i,o;return n="Carica altri",i="Non abbiamo trovato nulla.",o="Crea nuovo",[["loadMoreDefault",""],["valueContent",""],["nativeOptionTemplate",""],["placeholderTemplate",""],["nativeEmptyContentTemplate",""],["loadingTemplate",""],["loadingOrEmptyContent",""],[3,"tuiTextfieldCleaner","stringify","tuiTextfieldSize","formControl","valueContent","searchChange"],[4,"ngTemplateOutlet"],[3,"emptyContent",4,"tuiDataList"],n,[4,"polymorpheusOutlet"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],[3,"innerText"],["customContent",""],[4,"ngIf"],["customEmptyContent",""],["defaultEmptyContent",""],["emptyContentCustomString",""],i,[4,"ngIf","ngIfElse"],["empty",""],[3,"emptyContent"],[4,"ngFor","ngForOf"],["tuiOption","",3,"size","value","disabled",4,"ngIf"],["tuiOption","",3,"size","value","disabled","mouseenter","focus"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tuiOption","",3,"size","disabled",4,"ngIf"],["tuiOption","",3,"size","disabled"],["role","button",3,"click"],["tuiOption","",3,"size","value","disabled"],["createNewCustomTemplate",""],["role","button","class","d-flex align-items-center",3,"click",4,"ngIf"],["role","button",1,"d-flex","align-items-center",3,"click"],o]},template:function(i,o){if(1&i&&(e.kPM(Li),e.yuY(0,Fn,2,0,"ng-template",null,0,e.gJz)(2,Zn,4,1,"ng-template",null,1,e.gJz)(4,si,4,1,"ng-template",null,2,e.gJz)(6,li,4,1,"ng-template",null,3,e.gJz)(8,mi,8,1,"ng-template",null,4,e.gJz)(10,Ci,1,0,"ng-template",null,5,e.gJz)(12,Ti,3,2,"ng-template",null,6,e.gJz),e.I0R(14,"tui-combo-box",7),e.qCj("searchChange",function(c){return o.onSearchChange(c)}),e.yuY(15,Oi,1,0,"ng-container",8)(16,vi,3,3,"tui-data-list",9),e.C$Y()),2&i){const s=e.Gew(3),c=e.Gew(7);e.yG2(14),e.E7m("tuiTextfieldCleaner",o.showCleaner)("stringify",o.stringify)("tuiTextfieldSize",o.inputSize)("formControl",o.control)("valueContent",s),e.yG2(),e.E7m("ngTemplateOutlet",c)}},dependencies:[I.MD,I.ay,I.u_,I.XV,w.uk,w.i_,w.qI,R.aS,R.es,R.rD,q.KA,P.CQ,O.A$,O.yi,O.sP,O.Ux,Q.q8,r.sl,r.ue,r.ug,ee.kR,Z.CA,A.Sk,A.Cb,v.Ux,v.Af,x.oB,x.qL],changeDetection:0})}return t})();const bi=(t,_)=>_.id;function Yi(t,_){if(1&t&&e.wR5(0,"app-show-image",13),2&t){const n=e.GaO().$implicit;e.E7m("image",n.image)}}function Ui(t,_){1&t&&(e.SAx(0),e.aS0(1,14),e.k70())}function Hi(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",15),e.qCj("click",function(){e.usT(n);const o=e.GaO().$implicit,s=e.GaO();return e.CGJ(s.remove(o))}),e.SAx(1),e.aS0(2,16),e.k70(),e.C$Y()}}function ki(t,_){if(1&t&&(e.I0R(0,"tui-island",4)(1,"div",5)(2,"span",6),e.yuY(3,Yi,1,1,"app-show-image",7),e.I0R(4,"div"),e.OEk(5),e.C$Y()(),e.I0R(6,"div",6),e.yuY(7,Ui,2,0,"ng-template",null,8,e.gJz),e.I0R(9,"button",9)(10,"mat-icon"),e.OEk(11,"drag_handle"),e.C$Y()(),e.yuY(12,Hi,3,0,"ng-template",null,10,e.gJz),e.I0R(14,"tui-hosted-dropdown",11)(15,"button",12)(16,"mat-icon"),e.OEk(17,"delete"),e.C$Y()()()()()()),2&t){const n=_.$implicit,i=e.Gew(8),o=e.Gew(13);e.yG2(3),e.E7m("ngIf",n&&n.image),e.yG2(2),e.oRS(" ",n.name," "),e.yG2(4),e.E7m("tuiHint",i),e.yG2(5),e.E7m("content",o)}}function zi(t,_){1&t&&(e.I0R(0,"p"),e.SAx(1),e.aS0(2,17),e.k70(),e.C$Y())}const Bi=t=>({avoid_associated_dish_id:t});function Fi(t,_){if(1&t){const n=e.KQA();e.I0R(0,"form",18),e.qCj("ngSubmit",function(){e.usT(n);const o=e.GaO();return e.CGJ(o.addTag())}),e.I0R(1,"div",19)(2,"app-menu-tag-select",20),e.SAx(3),e.aS0(4,21),e.k70(),e.C$Y()(),e.I0R(5,"button",22),e.SAx(6),e.aS0(7,23),e.k70(),e.C$Y()()}if(2&t){const n=e.GaO();e.E7m("formGroup",n.newTagForm),e.yG2(2),e.E7m("filters",e.S45(4,Bi,n.dish.id))("formControlName","tag"),e.yG2(3),e.E7m("showLoader",n.addingTag())}}function Xi(t,_){1&t&&e.OEk(0,"\nerror. no dish or dish.id\n")}let Ji=(()=>{class t{constructor(){this.tagsService=(0,e.uUt)(le.w),this.dishesService=(0,e.uUt)(C.k),this.destroy$=(0,e.uUt)(l.UF),this.notifications=(0,e.uUt)(d.E),this.dialogs=(0,e.uUt)(B._k),this.dishChange=new e._w7,this.dish=null,this.searching=(0,e.OCB)(!1),this.deleting=(0,e.OCB)(!1),this.moving=(0,e.OCB)(!1),this.addingTag=(0,e.OCB)(!1),this.removingTag=(0,e.OCB)(!1),this.loading=(0,e.S6b)(()=>this.searching()||this.deleting()||this.moving()||this.addingTag()||this.removingTag()),this.ordering=(0,e.OCB)(!1),this.data=(0,e.OCB)(null),this.items=(0,e.S6b)(()=>this.data()?.items??[]),this.newTagForm=new r.WC({tag:new r.Ku(null,r.AQ.required)})}ngOnChanges(n){n.dish&&this.search()}search(n=this.defaultFilters()){this.searchSub?.unsubscribe(),this.searching.set(!0),this.searchSub=this.tagsService.search(n).pipe((0,u.a)(this.destroy$),(0,g.U)(()=>this.searching.set(!1))).subscribe({next:i=>this.data.set(i),error:i=>{this.data.set(null),this.notifications.error((0,T.mk)(i)||"Qualcosa \xE8 andato storto. Riprova pi\xF9 tardi.")}})}drop(n){if(n.previousIndex===n.currentIndex)return;const i=this.items(),o=i[n.previousIndex]?.id,s=this.dish?.id;o&&s&&((0,$.qv)(i,n.previousIndex,n.currentIndex),this.moving.set(!0),this.dishesService.moveTag(s,o,n.currentIndex).pipe((0,u.a)(this.destroy$),(0,g.U)(()=>this.moving.set(!1)),(0,g.U)(()=>this.search())).subscribe({error:c=>this.notifications.error((0,T.mk)(c)||"Qualcosa \xE8 andato storto.")}))}remove(n){const i=this.dish?.id,o=n.id;i&&o&&(this.removingTag.set(!0),this.dishesService.removeTag(i,o).pipe((0,u.a)(this.destroy$),(0,g.U)(()=>this.removingTag.set(!1)),(0,g.U)(()=>this.search())).subscribe((0,F.I)()))}triggerOrdering(){this.ordering()||this.notifications.fireSnackBar("Sposta i piatti trascinandoli con il bottone sul lato destro di ciascuna categoria.","Capito",{duration:5e3}),this.ordering.set(!this.ordering())}dismissAddTag(){this.addTagModal?.unsubscribe(),this.newTagForm.reset()}showAddTag(n){this.addTagModal=this.dialogs.open(n).subscribe()}addTag(){const n=this.dish?.id,i=this.newTagForm.get("tag")?.value?.id;this.newTagForm.valid&&i&&n&&(this.addingTag.set(!0),this.dishesService.addTag(n,i).pipe((0,u.a)(this.destroy$),(0,g.U)(()=>this.dismissAddTag()),(0,g.U)(()=>this.search()),(0,g.U)(()=>this.addingTag.set(!1))).subscribe({error:o=>this.notifications.error((0,T.mk)(o)||"Qualcosa \xE8 andato storto.")}))}defaultFilters(){const n={per_page:1e3};return this.dish&&this.dish.id&&(n.associated_dish_id=this.dish.id),n}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-dish-tags"]],inputs:{dish:"dish"},outputs:{dishChange:"dishChange"},standalone:!0,features:[e.M5G([l.UF]),e.SYr,e.UHJ],decls:9,vars:2,consts:()=>{let n,i,o,s,c,m;return n="Tag",i="Trascina per ordinare.",o="Rimuovi tag dal piatto",s="Non ci sono tag",c="Aggiungi tag",m="Aggiungi tag",[[3,"click"],n,["cdkDropList","",1,"items-list",3,"cdkDropListDropped"],["class","flex items-center",3,"formGroup"],["cdkDrag","",1,"mb-2"],[1,"flex","justify-between","items-center"],[1,"flex","items-center"],["style","max-width: 100px;","class","inline-block rounded me-2",3,"image",4,"ngIf"],["dragHint",""],["size","m","cdkDragHandle","","tuiIconButton","","type","button","appearance","outline",1,"me-2",3,"tuiHint"],["deleteDropdown",""],[3,"content"],["size","m","tuiIconButton","","type","button","appearance","outline"],[1,"inline-block","rounded","me-2",2,"max-width","100px",3,"image"],i,["tuiButton","","appearance","secondary-destructive","type","button",1,"m-4",3,"click"],o,s,[1,"flex","items-center",3,"formGroup","ngSubmit"],[1,"grow","me-1"],[3,"filters","formControlName"],c,["tuiButton","","size","m","type","submit",1,"me-2",3,"showLoader"],m,["cdkDrag","","class","mb-2"]]},template:function(i,o){1&i&&(e.I0R(0,"h4",0),e.qCj("click",function(){return o.search()}),e.SAx(1),e.aS0(2,1),e.k70(),e.C$Y(),e.I0R(3,"div",2),e.qCj("cdkDropListDropped",function(c){return o.drop(c)}),e.c53(4,ki,18,4,"tui-island",24,bi,!1,zi,3,0,"p"),e.C$Y(),e.yuY(7,Fi,8,6,"form",3)(8,Xi,1,0)),2&i&&(e.yG2(4),e.oho(o.items()),e.yG2(3),e.C0Y(7,o.dish&&o.dish.id?7:8))},dependencies:[z.w,x.qL,L.GE,L.Qw,D.CI,D.Kw,b.k,b.C,W.t,J.ms,O.A$,I.u_,H.y,r.sl,r.sz,r.ue,r.u,r.uW,r.Wo,P.CQ,X.m6,R.aS,A.Sk,K.yy,$.Cm,$.w5,$.A3,y.WY,y.lh,y.SL,y.i6,y.IT,V.Gs,wi],styles:["[_nghost-%COMP%]   .items-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   tui-island[cdkDrag][_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   .items-list[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .items-list[_ngcontent-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   [cdkDragHandle][_ngcontent-%COMP%]{cursor:move}"],changeDetection:0})}return t})();var Wi=a(2300),Vi=a(9880);const Ki=["*"];let ji=(()=>{class t{constructor(){this.dishChanged=new e._w7,this.dish=null,this.destroy$=(0,e.uUt)(l.UF),this.notifications=(0,e.uUt)(d.E),this.dishesService=(0,e.uUt)(C.k),this.removingPrice=(0,e.OCB)(!1),this.searchingDishes=(0,e.OCB)(!1),this.savingPrice=(0,e.OCB)(!1),this.loading=(0,e.S6b)(()=>this.savingPrice()||this.searchingDishes()||this.removingPrice()),this.price=new r.Ku(null)}ngOnInit(){this.price.valueChanges.pipe((0,u.a)(this.destroy$),(0,f.a)(),(0,G.I)(n=>n!=this.dish?.price),(0,Wi.o)(1500)).subscribe({next:n=>this.updateRemote(n)})}ngOnChanges(n){n.dish&&this.price.patchValue(this.dish?.price??null)}updateRemote(n){const i=this.dish?.id;i&&(this.updateRemoteSub?.unsubscribe(),this.savingPrice.set(!0),this.updateRemoteSub=this.dishesService.update(i,{price:n}).pipe((0,u.a)(this.destroy$),(0,g.U)(()=>this.savingPrice.set(!1))).subscribe({next:o=>{this.dish=o,this.dishChanged.emit(o),this.notifications.fireSnackBar("Prezzo salvato.")},error:o=>{this.notifications.fireSnackBar((0,T.mk)(o)||"Qualcosa \xE8 andato storto nel salvataggio del prezzo.")}}))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-dish-price"]],inputs:{dish:"dish"},outputs:{dishChanged:"dishChanged"},standalone:!0,features:[e.M5G([l.UF]),e.SYr,e.UHJ],ngContentSelectors:Ki,decls:2,vars:1,consts:[["tuiTextfieldSize","l","tuiTextfieldPostfix","\u20ac",3,"formControl"]],template:function(i,o){1&i&&(e.kPM(),e.I0R(0,"tui-input",0),e._Xx(1),e.C$Y()),2&i&&e.E7m("formControl",o.price)},dependencies:[P.CQ,P.Oo,P.cP,R.aS,R.rD,R.We,r.sl,r.ue,r.ug,Vi.kh,D.CI],encapsulation:2,changeDetection:0})}return t})();var Qi=a(9088);const Zi=(t,_)=>_.id;function qi(t,_){if(1&t&&(e.I0R(0,"li",2)(1,"a",3),e.wVc(2,"urlTo"),e.OEk(3),e.C$Y()()),2&t){const n=_.$implicit;e.yG2(),e._6D("routerLink",e.g7$(2,2,n.id,"menuCategory.show")),e.yG2(2),e.oRS(" ",n.name," ")}}function eo(t,_){if(1&t&&(e._Xx(0),e.I0R(1,"ul",1),e.c53(2,qi,4,5,"li",4,Zi),e.C$Y()),2&t){const n=e.GaO();e.yG2(2),e.oho(n.references().categories)}}const to=["*"];let no=(()=>{class t{constructor(){this.destroy$=(0,e.uUt)(l.UF),this.service=(0,e.uUt)(C.k),this.notifications=(0,e.uUt)(d.E),this.item=(0,e.OCB)(null),this.references=(0,e.OCB)(null),this.searching=(0,e.OCB)(!1)}set dish(n){this.item.set(n??null),this.searchReferences()}searchReferences(){this.references.set(null);const n=this.item()?.id;n&&(this.searching.set(!0),this.service.references(n).pipe((0,u.a)(this.destroy$),(0,g.U)(()=>this.searching.set(!1))).subscribe({next:i=>this.references.set(i),error:i=>this.notifications.error((0,T.mk)(i)||"Qualcosa \xE8 andato storto.")}))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-dish-references"]],inputs:{dish:"dish"},standalone:!0,features:[e.M5G([l.UF]),e.UHJ],ngContentSelectors:to,decls:1,vars:1,consts:[["class","tui-list tui-list_small"],[1,"tui-list","tui-list_small"],[1,"tui-list__item"],["tuiLink","",1,"mb-2",3,"routerLink"],["class","tui-list__item"]],template:function(i,o){1&i&&(e.kPM(),e.yuY(0,eo,4,0,"ul",0)),2&i&&e.C0Y(0,o.item()&&o.references()?0:-1)},dependencies:[Qi.S,p.ER,z.w,z.C],changeDetection:0})}return t})();var io=a(8392),oo=a(6832);const _o=(t,_)=>_.id;function so(t,_){if(1&t&&e.wR5(0,"app-show-image",10),2&t){const n=e.GaO().$implicit;e.E7m("image",n.images[0])}}function ao(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",11),e.qCj("click",function(){e.usT(n);const o=e.GaO().$implicit,s=e.GaO();return e.CGJ(s.remove(o))}),e.SAx(1),e.aS0(2,12),e.k70(),e.C$Y()}}function lo(t,_){if(1&t&&(e.I0R(0,"tui-island",3)(1,"div",4)(2,"span",5),e.yuY(3,so,1,1,"app-show-image",6),e.I0R(4,"div"),e.OEk(5),e.C$Y()(),e.I0R(6,"div",5),e.yuY(7,ao,3,0,"ng-template",null,7,e.gJz),e.I0R(9,"tui-hosted-dropdown",8)(10,"button",9)(11,"mat-icon"),e.OEk(12,"delete"),e.C$Y()()()()()()),2&t){const n=_.$implicit,i=e.Gew(8);e.yG2(3),e.E7m("ngIf",n&&n.images&&n.images[0]),e.yG2(2),e.oRS(" ",n.name," "),e.yG2(4),e.E7m("content",i)}}function co(t,_){1&t&&(e.I0R(0,"p"),e.SAx(1),e.aS0(2,13),e.k70(),e.C$Y())}const ro=t=>({can_suggest:t});function uo(t,_){if(1&t){const n=e.KQA();e.I0R(0,"form",14),e.qCj("ngSubmit",function(){e.usT(n);const o=e.GaO();return e.CGJ(o.addDish())}),e.I0R(1,"div",15)(2,"app-dish-select",16),e.SAx(3),e.aS0(4,17),e.k70(),e.C$Y()(),e.I0R(5,"button",18),e.SAx(6),e.aS0(7,19),e.k70(),e.C$Y()()}if(2&t){const n=e.GaO();e.E7m("formGroup",n.newDishForm),e.yG2(2),e.E7m("filters",e.S45(4,ro,n.dish.id))("formControlName","dish"),e.yG2(3),e.E7m("showLoader",n.addingDish())}}function go(t,_){1&t&&e.OEk(0,"\nerror. no dish or dish.id\n")}let po=(()=>{class t{constructor(){this.dishesService=(0,e.uUt)(C.k),this.destroy$=(0,e.uUt)(l.UF),this.notifications=(0,e.uUt)(d.E),this.dialogs=(0,e.uUt)(B._k),this.dishChange=new e._w7,this.dish$=(0,e.OCB)(null),this.deleting=(0,e.OCB)(!1),this.moving=(0,e.OCB)(!1),this.addingDish=(0,e.OCB)(!1),this.removingDish=(0,e.OCB)(!1),this.loading=(0,e.S6b)(()=>this.deleting()||this.moving()||this.addingDish()||this.removingDish()),this.ordering=(0,e.OCB)(!1),this.items=(0,e.OCB)([]),this.newDishForm=new r.WC({dish:new r.Ku(null,r.AQ.required)})}set dish(n){this.dish$.set(n??null),this.items.set(n?.suggestions??[])}get dish(){return this.dish$()}remove(n){const i=this.dish$()?.id;i&&n.id&&(this.removingDish.set(!0),this.dishesService.removeSuggestion(i,n.id).pipe((0,u.a)(this.destroy$),(0,g.U)(()=>{this.removingDish.set(!1),this.dishChange.emit()})).subscribe((0,F.I)()))}dismissAddDish(){this.addDishModal?.unsubscribe(),this.newDishForm.reset(),this.dishChange.emit()}showAddDish(n){this.addDishModal=this.dialogs.open(n).subscribe()}addDish(){const n=this.dish?.id,i=this.newDishForm.get("dish")?.value?.id;this.newDishForm.valid&&i&&n&&(this.addingDish.set(!0),this.dishesService.addSuggestion(n,i).pipe((0,u.a)(this.destroy$),(0,g.U)(()=>this.dismissAddDish()),(0,g.U)(()=>this.addingDish.set(!1))).subscribe({error:o=>this.notifications.error((0,T.mk)(o)||io.a)}))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-dish-suggestions"]],inputs:{dish:"dish"},outputs:{dishChange:"dishChange"},standalone:!0,features:[e.UHJ],decls:9,vars:2,consts:()=>{let n,i,o,s,c;return n="Piatti/bibite da accoppiare suggeriti",i="Rimuovi suggerimento",o="Non ci sono suggerimenti per questo piatto",s="Aggiungi associazione consigliata",c="Salva",[n,[1,"items-list"],["class","flex items-center",3,"formGroup"],[1,"mb-2"],[1,"flex","justify-between","items-center"],[1,"flex","items-center"],["style","max-width: 100px;","class","inline-block rounded me-2",3,"image",4,"ngIf"],["deleteDropdown",""],[3,"content"],["size","m","tuiIconButton","","type","button","appearance","outline"],[1,"inline-block","rounded","me-2",2,"max-width","100px",3,"image"],["tuiButton","","appearance","secondary-destructive","type","button",1,"m-4",3,"click"],i,o,[1,"flex","items-center",3,"formGroup","ngSubmit"],[1,"grow","me-1"],[3,"filters","formControlName"],s,["tuiButton","","size","m","type","submit",1,"me-2",3,"showLoader"],c,["class","mb-2"]]},template:function(i,o){1&i&&(e.I0R(0,"h4"),e.SAx(1),e.aS0(2,0),e.k70(),e.C$Y(),e.I0R(3,"div",1),e.c53(4,lo,13,3,"tui-island",20,_o,!1,co,3,0,"p"),e.C$Y(),e.yuY(7,uo,8,6,"form",2)(8,go,1,0)),2&i&&(e.yG2(4),e.oho(o.items()),e.yG2(3),e.C0Y(7,o.dish&&o.dish.id?7:8))},dependencies:[b.k,b.C,H.y,I.u_,D.CI,D.Kw,L.GE,L.Qw,x.qL,A.Sk,r.sl,r.sz,r.ue,r.u,r.uW,r.Wo,oo.i],encapsulation:2})}return t})();function mo(t,_){1&t&&(e.I0R(0,"p"),e.aS0(1,22),e.C$Y(),e.I0R(2,"p"),e.aS0(3,23),e.C$Y())}function Co(t,_){if(1&t){const n=e.KQA();e.I0R(0,"div",2)(1,"h4",3),e.aS0(2,24),e.C$Y(),e.I0R(3,"app-name-desc-eip",25),e.qCj("submittedChanges",function(o){e.usT(n);const s=e.GaO(2);return e.CGJ(s.saveNameDesc(o))}),e.C$Y()()}if(2&t){const n=e.GaO(2);let i;e.yG2(3),e.E7m("translations",null==(i=n.dish())?null:i.translations)}}function So(t,_){if(1&t){const n=e.KQA();e.I0R(0,"div")(1,"div",0)(2,"div",1)(3,"h1"),e.OEk(4),e.C$Y()()(),e.I0R(5,"div",2)(6,"h4",3),e.aS0(7,4),e.C$Y(),e.wR5(8,"app-show-images",5),e.C$Y(),e.I0R(9,"div",2)(10,"h4",3),e.aS0(11,6),e.C$Y(),e.I0R(12,"app-edit-dish-status",7),e.qCj("deleteDish",function(){e.usT(n);const o=e.GaO();return e.CGJ(o.delete())})("statusChange",function(o){e.usT(n);const s=e.GaO();return e.CGJ(s.updateStatus(o))})("dishChange",function(o){e.usT(n);const s=e.GaO();return e.CGJ(s.dish.set(o))}),e.C$Y()(),e.yuY(13,mo,4,0,"ng-template",null,8,e.gJz),e.I0R(15,"div",2)(16,"div",9)(17,"mat-icon",10),e.OEk(18,"link"),e.C$Y(),e.I0R(19,"h4",11),e.aS0(20,12),e.C$Y(),e.wR5(21,"tui-tooltip",13),e.C$Y(),e.wR5(22,"app-dish-references",14),e.C$Y(),e.I0R(23,"div",2)(24,"h4",3),e.aS0(25,15),e.C$Y(),e.I0R(26,"app-dish-price",16),e.qCj("dishChanged",function(o){e.usT(n);const s=e.GaO();return e.CGJ(s.dish.set(o))}),e.SAx(27),e.aS0(28,17),e.k70(),e.C$Y()(),e.yuY(29,Co,4,1,"div",18),e.I0R(30,"div",2)(31,"app-dish-ingredients",19),e.qCj("dishChange",function(o){e.usT(n);const s=e.GaO();return e.CGJ(s.dish.set(o))}),e.C$Y()(),e.I0R(32,"div",2)(33,"app-dish-allergens",19),e.qCj("dishChange",function(o){e.usT(n);const s=e.GaO();return e.CGJ(s.dish.set(o))}),e.C$Y()(),e.I0R(34,"div",2)(35,"app-dish-tags",19),e.qCj("dishChange",function(o){e.usT(n);const s=e.GaO();return e.CGJ(s.dish.set(o))}),e.C$Y()(),e.I0R(36,"div",2)(37,"app-dish-suggestions",19),e.qCj("dishChange",function(){e.usT(n);const o=e.GaO();return e.CGJ(o.reload())}),e.C$Y()(),e.I0R(38,"button",20),e.qCj("click",function(){e.usT(n);const o=e.GaO();return e.CGJ(o.confirmAndDelete())}),e.SAx(39),e.aS0(40,21),e.k70(),e.C$Y()()}if(2&t){const n=e.Gew(14),i=e.GaO();let o,s,c,m;e.yG2(4),e.cNF(null==(o=i.dish())?null:o.name),e.yG2(4),e.E7m("recordType","Menu::Dish")("recordId",null==(s=i.dish())?null:s.id)("images",null==(c=i.dish())?null:c.images),e.yG2(4),e.E7m("dish",i.dish()),e.yG2(9),e.E7m("content",n),e.yG2(),e.E7m("dish",i.dish()),e.yG2(4),e.E7m("dish",i.dish()),e.yG2(3),e.C0Y(29,null!=(m=i.dish())&&m.translations?29:-1),e.yG2(2),e.E7m("dish",i.dish()),e.yG2(2),e.E7m("dish",i.dish()),e.yG2(2),e.E7m("dish",i.dish()),e.yG2(2),e.E7m("dish",i.dish()),e.yG2(),e.E7m("appearance","secondary-destructive")}}function ho(t,_){1&t&&e.wR5(0,"tui-loader",26),2&t&&e.E7m("showLoader",!0)("size","l")}let Eo=(()=>{class t{constructor(){this.destroy$=(0,e.uUt)(l.UF),this.service=(0,e.uUt)(C.k),this.notifications=(0,e.uUt)(d.E),this.router=(0,e.uUt)(p.E5),this.route=(0,e.uUt)(p.gV),this.loading=(0,e.OCB)(!1),this.dish=(0,e.OCB)(null),this.dishId=(0,e.OCB)(null)}ngOnInit(){this.route.params.pipe((0,u.a)(this.destroy$),(0,E.k)(n=>Number(n.dish_id)),(0,G.I)(n=>"number"==typeof n&&!isNaN(n)&&n>0),(0,f.a)(),(0,k.y)(n=>this.dishId.set(n))).subscribe({next:n=>this.reload(),error:n=>{this.dishId.set(null),this.dish.set(null)}})}reload(){const n=this.dishId();n&&this.loadDish(n)}delete(){const n=this.dish()?.id;n&&(this.loading.set(!0),this.service.destroy(n).pipe((0,u.a)(this.destroy$),(0,g.U)(()=>this.loading.set(!1))).subscribe({next:()=>{this.notifications.fireSnackBar("Piatto eliminata."),this.router.navigate(["../.."],{relativeTo:this.route})},error:i=>{this.notifications.error((0,T.mk)(i)||"Qualcosa \xE8 andato storto.")}}))}updateStatus(n){const i=this.dish()?.id;!n||!i||(this.loading.set(!0),this.service.updateStatus(i,n).pipe((0,u.a)(this.destroy$),(0,g.U)(()=>this.loading.set(!1))).subscribe({next:o=>{this.notifications.fireSnackBar("Stato aggiornato."),this.dish.set(o)},error:o=>{this.notifications.error((0,T.mk)(o)||"Qualcosa \xE8 andato storto.")}}))}loadDish(n){this.dishId.set(n),this.loading.set(!0),this.service.show(n).pipe((0,u.a)(this.destroy$),(0,g.U)(()=>this.loading.set(!1))).subscribe({next:i=>this.dish.set(i),error:i=>{this.dish.set(null),this.notifications.error((0,T.mk)(i)||"Qualcosa \xE8 andato storto.")}})}saveNameDesc(n){const i=this.dish()?.id;i&&(this.loading.set(!0),this.service.update(i,n).pipe((0,u.a)(this.destroy$),(0,g.U)(()=>this.loading.set(!1))).subscribe({next:o=>{this.notifications.fireSnackBar("Traduzioni aggiornate."),this.dish.set(o)},error:o=>{this.notifications.error((0,T.mk)(o)||"Qualcosa \xE8 andato storto.")}}))}confirmAndDelete(){this.notifications.confirm("Sei sicuro di voler eliminare questo piatto?").subscribe({next:n=>{n&&this.delete()}})}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["__app-view-dish"]],standalone:!0,features:[e.M5G([l.UF]),e.UHJ],decls:2,vars:1,consts:()=>{let n,i,o,s,c,m,S,ue,ge;return n="Immagini piatto",i="Stato piatto",o="Piatto presente anche in:",s="Prezzo",c="Prezzo",m="Elimina piatto",S="Lo stesso piatto pu\xF2 essere presente in pi\xF9 categorie.",ue="Le categorie elencate di seguito sono tutte le categorie in cui \xE8 possibile vedere questo piatto.",ge="Traduzioni",[[1,"flex","items-center","justify-between"],[1,"flex","flex-items"],[1,"mb-3"],[1,"mb-1","me-1"],n,[1,"mb-3",3,"recordType","recordId","images"],i,[3,"dish","deleteDish","statusChange","dishChange"],["referencesHelp",""],[1,"flex","items-center","mb-2"],[1,"me-1"],[1,"me-1","my-0"],o,["direction","right",3,"content"],[3,"dish"],s,[3,"dish","dishChanged"],c,["class","mb-3"],[3,"dish","dishChange"],["tuiButton","","type","button",3,"appearance","click"],m,S,ue,ge,[1,"mb-3",3,"translations","submittedChanges"],[3,"showLoader","size"]]},template:function(i,o){1&i&&e.yuY(0,So,41,14,"div")(1,ho,1,2),2&i&&e.C0Y(0,o.dish()?0:o.loading()?1:-1)},dependencies:[M.g,A.Sk,A.Cb,D.CI,D.Kw,x.qL,fe,Te.O,Dt,Yn,Ji,ji,no,te.a,te.i,po],changeDetection:0})}return t})(),fo=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=e.a4G({type:t});static#n=this.\u0275inj=e.s3X({imports:[p.qQ.forChild([(0,h.VV)(Eo,{path:"",closeable:!0,dismissible:!1,size:"l"})])]})}return t})()},7307:(U,N,a)=>{a.d(N,{_:()=>M});var p=a(6012),h=a(4824),e=a(4496);let M=(()=>{class l extends p.s{constructor(){super(h.o,"admin/menu/allergens")}static#e=this.\u0275fac=function(u){return new(u||l)};static#t=this.\u0275prov=e.wxM({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()},8432:(U,N,a)=>{a.d(N,{K:()=>M});var p=a(6012),h=a(532),e=a(4496);let M=(()=>{class l extends p.s{constructor(){super(h.e,"admin/menu/ingredients")}static#e=this.\u0275fac=function(u){return new(u||l)};static#t=this.\u0275prov=e.wxM({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()},9116:(U,N,a)=>{a.d(N,{w:()=>M});var p=a(6012),h=a(355),e=a(4496);let M=(()=>{class l extends p.s{constructor(){super(h.E,"admin/menu/tags")}static#e=this.\u0275fac=function(u){return new(u||l)};static#t=this.\u0275prov=e.wxM({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()},832:(U,N,a)=>{a.d(N,{I:()=>M,w:()=>e});var p=a(4496),h=a(3480);let e=(()=>{class l{constructor(d){this.tuiFocusVisibleChange=d}}return l.\u0275fac=function(d){return new(d||l)(p.GI1(h.MF))},l.\u0275dir=p.Sc5({type:l,selectors:[["","tuiFocusVisibleChange",""]],outputs:{tuiFocusVisibleChange:"tuiFocusVisibleChange"},features:[p.M5G([h.UF,h.MF])]}),l})(),M=(()=>{class l{}return l.\u0275fac=function(d){return new(d||l)},l.\u0275mod=p.a4G({type:l}),l.\u0275inj=p.s3X({}),l})()},1096:(U,N,a)=>{a.d(N,{O:()=>G,h:()=>E});var p=a(4496),h=a(900),e=a(4164),M=a(3412),l=a(4704),C=a(5568),d=a(4e3),u=a(2644);let E=(()=>{class f{constructor({nativeElement:g},T){this.tuiFocusedChange=(0,M.U)((0,h.Ax)(g,"focusin"),(0,h.Ax)(g,"focusout")).pipe((0,l.k)(()=>(0,e.ER)(g)),(0,C.W)(!1),(0,d.a)(),(0,u.s)(1),(0,h.OA)(T))}}return f.\u0275fac=function(g){return new(g||f)(p.GI1(p.GMv),p.GI1(p.WW2))},f.\u0275dir=p.Sc5({type:f,selectors:[["","tuiFocusedChange",""]],outputs:{tuiFocusedChange:"tuiFocusedChange"}}),f})(),G=(()=>{class f{}return f.\u0275fac=function(g){return new(g||f)},f.\u0275mod=p.a4G({type:f}),f.\u0275inj=p.s3X({}),f})()},1632:(U,N,a)=>{a.d(N,{k:()=>M,u:()=>l});var p=a(4496),h=a(900),e=a(4680);let M=(()=>{class C{constructor(u,E){this.el=u,this.takeOnlyTrustedEvents=E,this.tuiPressedChange=(0,h.Y7)(this.el.nativeElement,{onlyTrusted:this.takeOnlyTrustedEvents})}}return C.\u0275fac=function(u){return new(u||C)(p.GI1(p.GMv),p.GI1(e.mm))},C.\u0275dir=p.Sc5({type:C,selectors:[["","tuiPressedChange",""]],outputs:{tuiPressedChange:"tuiPressedChange"}}),C})(),l=(()=>{class C{}return C.\u0275fac=function(u){return new(u||C)},C.\u0275mod=p.a4G({type:C}),C.\u0275inj=p.s3X({}),C})()},4259:(U,N,a)=>{a.d(N,{U9:()=>C,_k:()=>l});var p=a(4496),h=a(7232);class M{constructor(u){this.$implicit=u}}let l=(()=>{class d{constructor(E,G){this.viewContainer=E,this.templateRef=G}set tuiRepeatTimesOf(E){const G=Math.floor((0,h.K6)(E,0,65536)),{length:f}=this.viewContainer;E<f?this.removeContainers(f-E):this.addContainers(G)}addContainers(E){for(let G=this.viewContainer.length;G<E;G++)this.viewContainer.createEmbeddedView(this.templateRef,new M(G))}removeContainers(E){for(let G=0;G<E;G++)this.viewContainer.remove()}}return d.\u0275fac=function(E){return new(E||d)(p.GI1(p.y8U),p.GI1(p.Yw2))},d.\u0275dir=p.Sc5({type:d,selectors:[["","tuiRepeatTimes","","tuiRepeatTimesOf",""]],inputs:{tuiRepeatTimesOf:"tuiRepeatTimesOf"}}),d})(),C=(()=>{class d{}return d.\u0275fac=function(E){return new(E||d)},d.\u0275mod=p.a4G({type:d}),d.\u0275inj=p.s3X({}),d})()}}]);