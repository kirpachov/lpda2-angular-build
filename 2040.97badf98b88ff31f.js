"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[2040],{2040:(y,S,n)=>{n.r(S),n.d(S,{EditPublicMessageModule:()=>k});var e=n(1236),u=n(7552),t=n(4496),p=n(6500),T=n(3480),I=n(3616),m=n(6684),d=n(7368),P=n(4704),f=n(9212),G=n(8824),_=n(6504),h=n(7048),O=n(1128),v=n(9938),$=n(8392),L=n(8256),l=n(9064),g=n(9956),o=n(8212),i=n(8048),c=n(5188),D=n(6052),N=n(9860),B=n(1480),z=n(1368),x=n(1343),b=n(7936),Y=n(4336);function F(a,A){1&a&&(t.OEk(0),t.wVc(1,"publicMessageKey")),2&a&&t.cNF(t.kDX(1,1,A.$implicit))}function K(a,A){if(1&a&&t.wR5(0,"tui-data-list-wrapper",20),2&a){const s=t.GaO(),r=t.Gew(9);t.E7m("itemContent",r)("items",s.keys)}}function X(a,A){1&a&&t.C_f(0)}const V=a=>({$implicit:a});function W(a,A){if(1&a&&(t.I0R(0,"div",5),t.OEk(1," Il testo verr\xe0 mostrato nella seguente posizione:"),t.wR5(2,"br"),t.I0R(3,"b"),t.yuY(4,X,1,0,"ng-container",21),t.C$Y()()),2&a){const s=t.GaO(),r=t.Gew(9);t.yG2(4),t.E7m("ngTemplateOutlet",r)("ngTemplateOutletContext",t.S45(2,V,s.form.value.key))}}let j=(()=>{class a{constructor(){this.service=(0,t.uUt)(p.o),this.destroy$=(0,t.uUt)(T.UF),this.route=(0,t.uUt)(e.gV),this.router=(0,t.uUt)(e.E5),this.notifications=(0,t.uUt)(O.E),this.loading=(0,t.OCB)(!1),this.keys=[...N.EF],this.submitted=(0,t.OCB)(!1),this.form=new _.WC({key:new _.Ku(null,[_.AQ.required]),text:new _.Ku(null)}),this.e=this.errorsFor}ngOnInit(){this.form.get("key")?.valueChanges?.pipe((0,I.a)(this.destroy$),(0,m.I)(s=>(0,N.Qn)(s)),(0,d.G)(s=>this.service.show(s))).subscribe({next:s=>{this.form.patchValue({text:s.translations?.text})},error:s=>{console.warn(s)}}),this.route.params.pipe((0,I.a)(this.destroy$),(0,P.k)(s=>s.key),(0,m.I)(s=>(0,N.Qn)(s)),(0,f.y)(s=>this.form.patchValue({key:s})),(0,f.y)(()=>this.form.controls.key.disable())).subscribe((0,x.I)())}submit(){this.submitted.set(!0),!this.form.invalid&&(this.loading.set(!0),this.service.create(this.formVal()).pipe((0,I.a)(this.destroy$),(0,G.U)(()=>this.loading.set(!1))).subscribe({next:()=>{this.notifications.fireSnackBar("Salvato")},error:s=>{s instanceof h.gj&&422==s.status?v.y.assignErrorsToForm(this.form,s):this.notifications.error(s instanceof h.gj?(0,L.mk)(s):$.a)}}))}cancel(){this.router.navigate(["../"],{relativeTo:this.route})}errorsFor(s){const r=this.form.get(s);return r&&(r.dirty||r.touched||this.submitted())?r.errors:null}formVal(){return{key:this.form.controls.key.value,text:this.form.value.text}}static#t=this.\u0275fac=function(r){return new(r||a)};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["app-edit-public-message"]],standalone:!0,features:[t.M5G([T.UF]),t.UHJ],decls:29,vars:8,consts:()=>{let s,r,E,C,U,R;return s="Imposta messaggio",r="\n           Puoi mostrare dei messaggi personalizzati nelle pagine pubbliche. Per\n          ciascuna posizione, puoi mettere esattamente un messaggio tradotto in\n          pi\xF9 lingue. \n        ",E="Seleziona la posizione del testo da mostrare.",C="Traduzione",U="Conferma",R="Annulla",[[1,"flex","items-center"],s,[1,"text-slate-400"],r,[3,"formGroup","ngSubmit"],[1,"mb-3"],["keySelectContent",""],["tuiTextfieldSize","l",3,"formControlName","valueContent"],E,["tuiTextfield",""],[3,"itemContent","items",4,"tuiDataList"],["class","mb-3"],[3,"errors"],["formControlName","text"],C,[1,"flex"],["tuiButton","","type","submit","size","l",1,"me-2",3,"showLoader"],U,["tuiButton","","type","button","appearance","icon","size","l",3,"showLoader","click"],R,[3,"itemContent","items"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]]},template:function(r,E){if(1&r&&(t.I0R(0,"h1",0)(1,"span"),t.aS0(2,1),t.C$Y()(),t.I0R(3,"p",2),t.SAx(4),t.aS0(5,3),t.k70(),t.C$Y(),t.I0R(6,"form",4),t.qCj("ngSubmit",function(){return E.submit()}),t.I0R(7,"div",5),t.yuY(8,F,2,3,"ng-template",null,6,t.gJz),t.I0R(10,"tui-select",7),t.SAx(11),t.aS0(12,8),t.k70(),t.wR5(13,"input",9),t.yuY(14,K,1,2,"tui-data-list-wrapper",10),t.C$Y(),t.yuY(15,W,5,4,"div",11),t.wR5(16,"app-errors",12),t.C$Y(),t.I0R(17,"div",5)(18,"app-i18n-input",13),t.SAx(19),t.aS0(20,14),t.k70(),t.C$Y(),t.wR5(21,"app-errors",12),t.C$Y(),t.I0R(22,"div",15)(23,"button",16),t.SAx(24),t.aS0(25,17),t.k70(),t.C$Y(),t.I0R(26,"button",18),t.qCj("click",function(){return E.cancel()}),t.SAx(27),t.aS0(28,19),t.k70(),t.C$Y()()()),2&r){const C=t.Gew(9);t.yG2(6),t.E7m("formGroup",E.form),t.yG2(4),t.E7m("formControlName","key")("valueContent",C),t.yG2(5),t.C0Y(15,E.form.value.key?15:-1),t.yG2(),t.E7m("errors",E.e("text")),t.yG2(5),t.E7m("errors",E.e("text")),t.yG2(2),t.E7m("showLoader",E.loading()),t.yG2(3),t.E7m("showLoader",E.loading())}},dependencies:[_.sl,_.sz,_.ue,_.u,_.uW,_.Wo,l.w,g.g,o.CI,o.Kw,c.my,c.cP,c.uO,b.b,i.aS,i.rD,D.q8,D.OO,Y.Ux,B.s,z.XV],encapsulation:2,changeDetection:0})}return a})(),k=(()=>{class a{static#t=this.\u0275fac=function(r){return new(r||a)};static#e=this.\u0275mod=t.a4G({type:a});static#n=this.\u0275inj=t.s3X({imports:[e.qQ.forChild([(0,u.VV)(j,{path:"",closeable:!0,dismissible:!0,size:"m"})])]})}return a})()},9064:(y,S,n)=>{n.d(S,{w:()=>L});var e=n(4496),u=n(6504),t=n(3480),p=n(6700),T=n(3616),I=n(6684),m=n(3797),d=n(8588),P=n(1368),f=n(9956),G=n(1292);function _(l,g){if(1&l&&(e.I0R(0,"tui-textarea",2),e.OEk(1),e.C$Y()),2&l){const o=e.GaO().$implicit,i=e.GaO();e.E7m("formControl",o.control),e.yG2(),e.oRS(" ",i.getFullLang(o.lang)," ")}}function h(l,g){if(1&l&&(e.I0R(0,"tui-input",2),e.OEk(1),e.C$Y()),2&l){const o=e.GaO().$implicit,i=e.GaO();e.E7m("formControl",o.control),e.yG2(),e.oRS(" ",i.getFullLang(o.lang)," ")}}const O=l=>({"mb-3":l});function v(l,g){if(1&l&&(e.SAx(0),e.I0R(1,"div",1),e.yuY(2,_,2,2,"tui-textarea",2)(3,h,2,2),e.wR5(4,"app-errors",3),e.C$Y(),e.k70()),2&l){const o=g.$implicit,i=g.last,c=e.GaO();e.yG2(),e.E7m("ngClass",e.S45(3,O,!i)),e.yG2(),e.C0Y(2,c.long?2:3),e.yG2(2),e.E7m("errors",o.control.errors)}}const $=["*"];let L=(()=>{class l{constructor(){this.destroy$=new t.UF,this.long=!1,this.controls=(0,e.OCB)({}),this.controlsArr=(0,e.S6b)(()=>{const o=this.controls();return Object.keys(o).map(i=>({lang:i,control:o[i]}))}),this.touched$=new p.g(!1),this.value$=new p.g({})}ngAfterViewInit(){this.addLang("it"),this.addLang("en")}ngOnInit(){}registerOnChange(o){this.value$.pipe((0,T.a)(this.destroy$)).subscribe({next:i=>o(i)})}registerOnTouched(o){this.touched$.pipe((0,I.I)(i=>!0===i)).subscribe({next:()=>o()})}writeValue(o){this.patchValue(o??{}),this.touched$.next(!1)}wasTouched(){this.touched$.next(!0)}getFullLang(o){return G.S[o]??o}controlChanged(o){this.value$.next({...this.value$.value,[o]:this.controls()[o].value})}patchValue(o){Object.keys(o).forEach(i=>this.addLang(i)),Object.keys(this.controls()).forEach(i=>{this.controls()[i].patchValue(o[i]??null)})}addLang(o){if(this.controls()[o])return;const i=new u.Ku;i.valueChanges.subscribe({next:()=>this.controlChanged(o)}),this.controls.set({...this.controls(),[o]:i})}static#t=this.\u0275fac=function(i){return new(i||l)};static#e=this.\u0275cmp=e.In1({type:l,selectors:[["app-i18n-input"]],inputs:{long:"long"},standalone:!0,features:[e.M5G([{provide:u.Y6,useExisting:(0,e.wd)(()=>l),multi:!0},t.UF]),e.UHJ],ngContentSelectors:$,decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"ngClass"],[3,"formControl"],[3,"errors"]],template:function(i,c){1&i&&(e.kPM(),e._Xx(0),e.yuY(1,v,5,5,"ng-container",0)),2&i&&(e.yG2(),e.E7m("ngForOf",c.controlsArr()))},dependencies:[u.sl,u.ue,u.ug,m.CQ,m.Oo,m.cP,P.Iw,f.g,P.QF,d.Y3,d.wp,d.kd],changeDetection:0})}return l})()},1292:(y,S,n)=>{n.d(S,{S:()=>e});const e={it:"Italiano",en:"Inglese",es:"Spagnolo",fr:"Francese",de:"Tedesco",pt:"Portoghese",ru:"Russo",zh:"Cinese",ja:"Giapponese",ar:"Arabo",hi:"Hindi",bn:"Bengalese",pa:"Punjabi",ms:"Malese"}}}]);