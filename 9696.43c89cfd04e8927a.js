(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[9696],{3040:(L,u,s)=>{"use strict";s.d(u,{M:()=>d});var t=s(4496),c=s(1128),a=s(8212),_=s(1560);const r=["*"];let d=(()=>{class C{constructor(){this.notifications=(0,t.uUt)(c.E),this.appearance="outline",this.size="m",this.copyHandler=this.defaultCopyHandler,this.message="Copiato"}copy(){this.copyHandler(this.content??null)}defaultCopyHandler(g){g&&navigator.clipboard.writeText(g).then(m=>{this.notifications.fireSnackBar(this.message)})}static#t=this.\u0275fac=function(m){return new(m||C)};static#e=this.\u0275cmp=t.In1({type:C,selectors:[["app-copy-content"]],inputs:{content:"content",appearance:"appearance",size:"size",copyHandler:"copyHandler",message:"message"},standalone:!0,features:[t.UHJ],ngContentSelectors:r,decls:4,vars:2,consts:[["tuiIconButton","","type","button",1,"ms-2",3,"appearance","size","click"]],template:function(m,h){1&m&&(t.kPM(),t._Xx(0),t.I0R(1,"button",0),t.qCj("click",function(){return h.copy()}),t.I0R(2,"mat-icon"),t.OEk(3,"content_copy"),t.C$Y()()),2&m&&(t.yG2(),t.E7m("appearance",h.appearance)("size",h.size))},dependencies:[a.CI,a.Kw,_.qL],styles:["[_nghost-%COMP%]{display:flex;align-items:center}"],changeDetection:0})}return C})()},9696:(L,u,s)=>{"use strict";s.r(u),s.d(u,{CategoryDashboardComponent:()=>Ti});var t=s(4496),c=s(3480),a=s(1236),_=s(1712),r=s(8676),d=s(1128),C=s(3616),l=s(8824),g=s(8256),m=s(1264),h=s(8016),p=s(8212),T=s(6504),$=s(7656),w=s(168),F=s(1096),A=s(832),B=s(2528),D=s(1800),y=s(4164),V=s(4680),X=s(1632),f=s(7692),N=s(3656),R=s(4108),I=s(4304),G=s(1220),O=s(1368),M=s(1040);const Y=["focusableElement"];function v(n,S){if(1&n&&t.wR5(0,"tui-loader",7),2&n){const e=t.GaO();t.E7m("inheritColor",!0)("showLoader",e.value)("size",e.loaderSize)}}function it(n,S){1&n&&t.wR5(0,"tui-svg",10),2&n&&t.E7m("src",S.polymorpheusOutlet)}const rt=n=>({$implicit:n});function Yt(n,S){if(1&n&&(t.I0R(0,"span",8),t.yuY(1,it,1,1,"tui-svg",9),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.E7m("polymorpheusOutlet",e.iconOn)("polymorpheusOutletContext",t.S45(2,rt,e.size))}}function Lt(n,S){if(1&n&&t.wR5(0,"tui-loader",7),2&n){const e=t.GaO();t.E7m("inheritColor",!0)("showLoader",!e.value)("size",e.loaderSize)}}function Bt(n,S){1&n&&t.wR5(0,"tui-svg",12),2&n&&t.E7m("src",S.polymorpheusOutlet)}function Ct(n,S){if(1&n&&(t.I0R(0,"span",8),t.yuY(1,Bt,1,1,"tui-svg",11),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.E7m("polymorpheusOutlet",e.iconOff)("polymorpheusOutletContext",t.S45(2,rt,e.size))}}const gt=(0,B.AL)({icons:{toggleOff:({$implicit:n})=>"m"===n?"tuiIconToggleOff":"tuiIconToggleOffLarge",toggleOn:({$implicit:n})=>"m"===n?"tuiIconToggleOn":"tuiIconToggleOnLarge"},appearances:{checked:I.oN.Primary,unchecked:I.oN.Secondary},singleColor:!1,showIcons:!1,size:"m"});let wt=(()=>{class n extends D._y{constructor(e,i,o,E){super(e,i),this.modeDirective=o,this.options=E,this.singleColor=this.options.singleColor,this.showIcons=this.options.showIcons,this.showLoader=!1,this.size=this.options.size}get iconOn(){return this.options.icons.toggleOn}get iconOff(){return this.options.icons.toggleOff}get nativeFocusableElement(){var e,i;return null!==(i=null===(e=this.focusableElement)||void 0===e?void 0:e.nativeElement)&&void 0!==i?i:null}get focused(){return(0,y.ER)(this.nativeFocusableElement)}get appearance(){return this.singleColor||this.value?this.options.appearances.checked:this.options.appearances.unchecked}get sizeM(){return"m"===this.size}get loaderSize(){return this.sizeM?"xs":"s"}get hostMode(){var e,i;return null!==(i=null===(e=this.modeDirective)||void 0===e?void 0:e.mode)&&void 0!==i?i:null}onChecked(e){this.value=e}onFocused(e){this.updateFocused(e)}onFocusVisible(e){this.updateFocusVisible(e)}getFallbackValue(){return!1}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(T.eq,10),t.GI1(t.kD9),t.GI1(G.Y,8),t.GI1(gt))},n.\u0275cmp=t.In1({type:n,selectors:[["tui-toggle"]],viewQuery:function(e,i){if(1&e&&t.CC$(Y,5),2&e){let o;t.wto(o=t.Gqi())&&(i.focusableElement=o.first)}},hostVars:4,hostBindings:function(e,i){2&e&&(t.e48("data-size",i.size)("data-mode",i.hostMode),t.eAK("_checked",i.value))},inputs:{singleColor:"singleColor",showIcons:"showIcons",showLoader:"showLoader",size:"size"},features:[t.M5G([(0,V.NK)(n),(0,D.q4)(n)]),t.eg9],decls:9,vars:16,consts:[["tuiWrapper","",3,"active","appearance","disabled","focus","hover","invalid","readOnly"],[1,"t-toggle"],["class","t-loader",3,"inheritColor","showLoader","size",4,"ngIf"],["class","t-icon-wrapper",4,"ngIf"],[1,"t-circle"],["automation-id","tui-toggle__checkbox","role","switch","type","checkbox",1,"t-checkbox",3,"disabled","id","tuiFocusable","tuiChecked","tuiCheckedChange","tuiFocusedChange","tuiFocusVisibleChange"],["focusableElement",""],[1,"t-loader",3,"inheritColor","showLoader","size"],[1,"t-icon-wrapper"],["automation-id","tui-toggle__check-icon","class","t-icon",3,"src",4,"polymorpheusOutlet","polymorpheusOutletContext"],["automation-id","tui-toggle__check-icon",1,"t-icon",3,"src"],["automation-id","tui-toggle__cancel-icon","class","t-icon t-icon_off",3,"src",4,"polymorpheusOutlet","polymorpheusOutletContext"],["automation-id","tui-toggle__cancel-icon",1,"t-icon","t-icon_off",3,"src"]],template:function(e,i){1&e&&(t.I0R(0,"div",0)(1,"div",1),t.yuY(2,v,1,3,"tui-loader",2)(3,Yt,2,4,"span",3),t.wR5(4,"div",4),t.yuY(5,Lt,1,3,"tui-loader",2)(6,Ct,2,4,"span",3),t.C$Y(),t.I0R(7,"input",5,6),t.iHE("tuiCheckedChange",function(E){return t.kNx(i.value,E)||(i.value=E),E}),t.qCj("tuiFocusedChange",function(E){return i.onFocused(E)})("tuiFocusVisibleChange",function(E){return i.onFocusVisible(E)}),t.C$Y()()),2&e&&(t.E7m("active",i.pseudoActive)("appearance",i.appearance)("disabled",i.computedDisabled)("focus",i.computedFocusVisible)("hover",i.pseudoHover)("invalid",i.computedInvalid)("readOnly",i.readOnly),t.yG2(2),t.E7m("ngIf",i.showLoader),t.yG2(),t.E7m("ngIf",i.showIcons&&!i.showLoader),t.yG2(2),t.E7m("ngIf",i.showLoader),t.yG2(),t.E7m("ngIf",i.showIcons&&!i.showLoader),t.yG2(),t.E7m("disabled",i.disabled)("id",i.id)("tuiFocusable",i.focusable),t.OKB("tuiChecked",i.value),t.e48("aria-checked",i.value))},dependencies:[f.Cb,N.Wu,R.S,O.u_,M.Af,$.g,w.O,F.h,A.w],styles:["[_nghost-%COMP%]{position:relative;display:inline-block;vertical-align:middle;overflow:hidden;border-radius:6.25rem}[data-size=m][_nghost-%COMP%]{width:2rem;height:1rem}[data-size=l][_nghost-%COMP%]{width:3rem;height:1.5rem}.t-checkbox[_ngcontent-%COMP%]{padding:0;margin:0;border-width:0;border-radius:inherit;background:none;font-size:inherit;line-height:inherit;font-weight:inherit;color:inherit;caret-color:currentColor;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;word-break:keep-all;-webkit-text-fill-color:currentColor;position:absolute;top:0;left:0;height:100%;width:100%;opacity:0;cursor:pointer}.t-checkbox[_ngcontent-%COMP%]:-webkit-autofill, .t-checkbox[_ngcontent-%COMP%]:-webkit-autofill:hover, .t-checkbox[_ngcontent-%COMP%]:-webkit-autofill:focus{caret-color:var(--tui-base-09);border-radius:inherit;color:inherit!important;background-color:transparent!important;-webkit-text-fill-color:var(--tui-text-01)!important;border-color:var(--tui-autofill);-webkit-box-shadow:0 0 0 100rem var(--tui-autofill) inset!important}._disabled[_nghost-%COMP%]   .t-checkbox[_ngcontent-%COMP%]{pointer-events:none;cursor:default}.t-toggle[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;display:flex;align-items:center;justify-content:center}[data-size=m][_nghost-%COMP%]   .t-toggle[_ngcontent-%COMP%]{width:3rem;height:1rem;transform:translate(-1rem)}[data-size=l][_nghost-%COMP%]   .t-toggle[_ngcontent-%COMP%]{width:4.5rem;height:1.5rem;transform:translate(-1.5rem)}._checked[_nghost-%COMP%]   .t-toggle[_ngcontent-%COMP%]{transform:translate(0)}.t-circle[_ngcontent-%COMP%]{margin:.125rem 0;flex-shrink:0;border-radius:100%;background-color:var(--tui-base-01)}._disabled[_nghost-%COMP%]   .t-circle_light[_ngcontent-%COMP%]{opacity:.24}[data-size=m][_nghost-%COMP%]   .t-circle[_ngcontent-%COMP%]{width:.75rem;height:.75rem}[data-size=l][_nghost-%COMP%]   .t-circle[_ngcontent-%COMP%]{width:1rem;height:1rem}._disabled[_nghost-%COMP%]   .t-circle[_ngcontent-%COMP%]{background-color:var(--tui-base-01)}.t-loader[_ngcontent-%COMP%]{min-width:auto}[_nghost-%COMP%]:not(._checked)   .t-loader[_ngcontent-%COMP%]{color:var(--tui-base-06)}[_nghost-%COMP%]:not(._checked)._disabled   .t-loader[_ngcontent-%COMP%]{color:var(--tui-base-05)}[_nghost-%COMP%]:not(._checked)[data-mode=onDark]   .t-loader[_ngcontent-%COMP%]{color:var(--tui-text-03-night)}[_nghost-%COMP%]:not(._checked)[data-mode=onDark]._disabled   .t-loader[_ngcontent-%COMP%]{color:var(--tui-clear-inverse-active)}[_nghost-%COMP%]:not(._checked)[data-mode=onLight]   .t-loader[_ngcontent-%COMP%]{color:var(--tui-text-03)}[_nghost-%COMP%]:not(._checked)[data-mode=onLight]._disabled   .t-loader[_ngcontent-%COMP%]{color:var(--tui-clear-active)}[data-size=m][_nghost-%COMP%]   .t-loader[_ngcontent-%COMP%]{width:.75rem;margin:0 .2rem;transform:scale(.75)}[data-size=l][_nghost-%COMP%]   .t-loader[_ngcontent-%COMP%]{width:1rem;margin:0 .25rem}.t-icon-wrapper[_ngcontent-%COMP%]{display:flex}.t-icon[_ngcontent-%COMP%]{opacity:.8}.t-icon_off[_ngcontent-%COMP%]{color:var(--tui-base-06)}._disabled[_nghost-%COMP%]   .t-icon_off[_ngcontent-%COMP%]{color:var(--tui-base-05)}[data-mode=onDark][_nghost-%COMP%]   .t-icon_off[_ngcontent-%COMP%]{color:var(--tui-text-03-night)}[data-mode=onDark]._disabled[_nghost-%COMP%]   .t-icon_off[_ngcontent-%COMP%]{color:var(--tui-clear-inverse-active)}[data-mode=onLight][_nghost-%COMP%]   .t-icon_off[_ngcontent-%COMP%]{color:var(--tui-text-03)}[data-mode=onLight]._disabled[_nghost-%COMP%]   .t-icon_off[_ngcontent-%COMP%]{color:var(--tui-clear-active)}[data-size=m][_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{width:1rem;height:1rem;transform:scale(.75)}[data-size=l][_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{margin:0 .125rem;width:1.5rem;height:1.5rem}[_nghost-%COMP%]:hover   .t-icon[_ngcontent-%COMP%]{opacity:1}"],changeDetection:0}),n})(),ct=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.a4G({type:n}),n.\u0275inj=t.s3X({imports:[[O.MD,F.O,w.C,X.u,A.I,$.W,R.g,N.Yt,f.Sk,M.Ux]]}),n})();var $t=s(939),K=s(6380),Q=s(2740),j=s(2204),Et=s(9956),ot=s(400),St=s(9880),at=s(1512),ut=s(9088),st=s(964),xt=s(1528),Ut=s(1956),ie=s(4476);const oe=["qrcElement"];let se=(()=>{class n{constructor(e,i){this.renderer=e,this.sanitizer=i,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new t._w7,this.context=null}ngOnChanges(){var e=this;return(0,xt.c)(function*(){yield e.createQRCode()})()}isValidQrCodeText(e){return!1===this.allowEmptyString?!(typeof e>"u"||""===e||"null"===e||null===e):!(typeof e>"u")}toDataURL(e){return new Promise((i,o)=>{(0,Ut.g7)(this.qrdata,e,(E,P)=>{E?o(E):i(P)})})}toCanvas(e,i){return new Promise((o,E)=>{(0,Ut.gH)(e,this.qrdata,i,P=>{P?E(P):o("success")})})}toSVG(e){return new Promise((i,o)=>{(0,Ut.toString)(this.qrdata,e,(E,P)=>{E?o(E):i(P)})})}renderElement(e){for(const i of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,i);this.renderer.appendChild(this.qrcElement.nativeElement,e)}createQRCode(){var e=this;return(0,xt.c)(function*(){e.version&&e.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),e.version=40):e.version&&e.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),e.version=1):void 0!==e.version&&isNaN(e.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),e.version=void 0);try{if(!e.isValidQrCodeText(e.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");e.isValidQrCodeText(e.qrdata)&&""===e.qrdata&&(e.qrdata=" ");const i={color:{dark:e.colorDark,light:e.colorLight},errorCorrectionLevel:e.errorCorrectionLevel,margin:e.margin,scale:e.scale,version:e.version,width:e.width},o=e.imageSrc,E=e.imageHeight||40,P=e.imageWidth||40;switch(e.elementType){case"canvas":{const b=e.renderer.createElement("canvas");e.context=b.getContext("2d"),e.toCanvas(b,i).then(()=>{if(e.ariaLabel&&e.renderer.setAttribute(b,"aria-label",`${e.ariaLabel}`),e.title&&e.renderer.setAttribute(b,"title",`${e.title}`),o&&e.context){e.centerImage=new Image(P,E),o!==e.centerImage.src&&(e.centerImage.src=o),E!==e.centerImage.height&&(e.centerImage.height=E),P!==e.centerImage.width&&(e.centerImage.width=P);const U=e.centerImage;U&&(U.onload=()=>{e.context?.drawImage(U,b.width/2-P/2,b.height/2-E/2,P,E)})}e.renderElement(b),e.emitQRCodeURL(b)}).catch(U=>{console.error("[angularx-qrcode] canvas error:",U)});break}case"svg":{const b=e.renderer.createElement("div");e.toSVG(i).then(U=>{e.renderer.setProperty(b,"innerHTML",U);const H=b.firstChild;e.renderer.setAttribute(H,"height",`${e.width}`),e.renderer.setAttribute(H,"width",`${e.width}`),e.renderElement(H),e.emitQRCodeURL(H)}).catch(U=>{console.error("[angularx-qrcode] svg error:",U)});break}default:{const b=e.renderer.createElement("img");e.toDataURL(i).then(U=>{e.alt&&b.setAttribute("alt",e.alt),e.ariaLabel&&b.setAttribute("aria-label",e.ariaLabel),b.setAttribute("src",U),e.title&&b.setAttribute("title",e.title),e.renderElement(b),e.emitQRCodeURL(b)}).catch(U=>{console.error("[angularx-qrcode] img/url error:",U)})}}}catch(i){console.error("[angularx-qrcode] Error generating QR Code:",i.message)}})()}emitQRCodeURL(e){const i=e.constructor.name;if(i===SVGSVGElement.name){const P=new Blob([e.outerHTML],{type:"image/svg+xml"}),b=URL.createObjectURL(P),U=this.sanitizer.bypassSecurityTrustUrl(b);return void this.qrCodeURL.emit(U)}let o="";i===HTMLCanvasElement.name&&(o=e.toDataURL("image/png")),i===HTMLImageElement.name&&(o=e.src),fetch(o).then(E=>E.blob()).then(E=>URL.createObjectURL(E)).then(E=>this.sanitizer.bypassSecurityTrustUrl(E)).then(E=>{this.qrCodeURL.emit(E)}).catch(E=>{console.error("[angularx-qrcode] Error when fetching image/png URL: "+E)})}static#t=this.\u0275fac=function(i){return new(i||n)(t.GI1(t.q87),t.GI1(ie.mI))};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["qrcode"]],viewQuery:function(i,o){if(1&i&&t.CC$(oe,7),2&i){let E;t.wto(E=t.Gqi())&&(o.qrcElement=E.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[t.SYr],decls:2,vars:2,consts:[["qrcElement",""]],template:function(i,o){1&i&&t.wR5(0,"div",null,0),2&i&&t.m8U(o.cssClass)},encapsulation:2,changeDetection:0})}return n})(),ae=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.a4G({type:n});static#n=this.\u0275inj=t.s3X({})}return n})();var Tt=s(1560);let re=(()=>{class n{saveAsImage(e,i="qrcode"){let o=null;if(o=e.qrcElement.nativeElement.querySelector("canvas").toDataURL("image/png"),!o)return;const E=function _e(n){const S=n.split(";base64,"),e=S[0].split(":")[1],i=window.atob(S[1]),o=new Uint8Array(i.length);for(let E=0;E<i.length;++E)o[E]=i.charCodeAt(E);return new Blob([o],{type:e})}(o),P=new Blob([E],{type:"image/png"}),b=window.URL.createObjectURL(P),U=document.createElement("a");U.href=b,U.download=i,U.click()}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-qr-code"]],inputs:{data:"data"},standalone:!0,features:[t.M5G([]),t.UHJ],decls:10,vars:3,consts:()=>{let e;return e="Scarica",[[1,"relative","qr-container"],[1,"download-container","bg-black/50","absolute","top-0","bottom-0","end-0","start-0","flex","items-center","justify-center"],["tuiButton","","type","button","appearance","primary",3,"click"],[1,"flex","items-center"],e,[1,"flex","justify-center",3,"elementType","qrdata","width"],["publicQR",""]]},template:function(i,o){if(1&i){const E=t.KQA();t.I0R(0,"div",0)(1,"div",1)(2,"button",2),t.qCj("click",function(){t.usT(E);const b=t.Gew(9);return t.CGJ(o.saveAsImage(b))}),t.I0R(3,"span",3)(4,"mat-icon"),t.OEk(5,"download_file"),t.C$Y(),t.I0R(6,"span"),t.aS0(7,4),t.C$Y()()()(),t.wR5(8,"qrcode",5,6),t.C$Y()}2&i&&(t.yG2(8),t.E7m("elementType","canvas")("qrdata",o.data)("width",256))},dependencies:[ae,se,Tt.qL,p.CI,p.Kw],styles:["[_nghost-%COMP%]   .qr-container[_ngcontent-%COMP%]   .download-container[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .qr-container[_ngcontent-%COMP%]:hover   .download-container[_ngcontent-%COMP%]{display:flex}"],changeDetection:0})}return n})();var le=s(3040);function ce(n,S){1&n&&(t.I0R(0,"span",28),t.aS0(1,29),t.C$Y())}function ue(n,S){1&n&&(t.I0R(0,"span",30),t.aS0(1,31),t.C$Y())}function de(n,S){if(1&n&&t.wR5(0,"app-qr-code",13),2&n){const e=t.GaO();t.E7m("data",e.publicUrl)}}const zt=n=>({hidden:n});function Ce(n,S){if(1&n&&(t.I0R(0,"p",4),t.aS0(1,32),t.C$Y(),t.I0R(2,"div",6)(3,"span"),t.aS0(4,33),t.C$Y(),t.I0R(5,"div",34)(6,"div",35)(7,"tui-input-date",36),t.SAx(8),t.aS0(9,37),t.k70(),t.C$Y(),t.wR5(10,"app-errors",11),t.C$Y(),t.I0R(11,"div",38)(12,"tui-input-time",39),t.SAx(13),t.aS0(14,40),t.k70(),t.C$Y(),t.I0R(15,"span",4),t.aS0(16,41),t.C$Y(),t.wR5(17,"app-errors",11),t.C$Y()()(),t.I0R(18,"div",6)(19,"span"),t.aS0(20,42),t.C$Y(),t.I0R(21,"div",34)(22,"div",35)(23,"tui-input-date",43),t.SAx(24),t.aS0(25,44),t.k70(),t.C$Y(),t.wR5(26,"app-errors",11),t.C$Y(),t.I0R(27,"div",38)(28,"tui-input-time",45),t.SAx(29),t.aS0(30,46),t.k70(),t.C$Y(),t.I0R(31,"span",4),t.aS0(32,47),t.C$Y(),t.wR5(33,"app-errors",11),t.C$Y()()()),2&n){const e=t.GaO();t.yG2(10),t.E7m("errors",e.e("public_from_date")),t.yG2(),t.E7m("ngClass",t.S45(6,zt,!e.form.value.public_from_date)),t.yG2(6),t.E7m("errors",e.e("public_from_time")),t.yG2(9),t.E7m("errors",e.e("public_to_date")),t.yG2(),t.E7m("ngClass",t.S45(8,zt,!e.form.value.public_to_date)),t.yG2(6),t.E7m("errors",e.e("public_to_time"))}}function ge(n,S){if(1&n&&(t.I0R(0,"p",4),t.aS0(1,48),t.C$Y(),t.I0R(2,"div",6)(3,"span"),t.aS0(4,49),t.C$Y(),t.I0R(5,"div",34)(6,"div",35)(7,"tui-input-time",50),t.SAx(8),t.aS0(9,51),t.k70(),t.C$Y(),t.I0R(10,"span",4),t.aS0(11,52),t.C$Y(),t.wR5(12,"app-errors",11),t.C$Y(),t.I0R(13,"div",53)(14,"tui-input-time",54),t.SAx(15),t.aS0(16,55),t.k70(),t.C$Y(),t.I0R(17,"span",4),t.aS0(18,56),t.C$Y(),t.wR5(19,"app-errors",11),t.C$Y()()()),2&n){const e=t.GaO();t.yG2(12),t.E7m("errors",e.e("daily_from")),t.yG2(7),t.E7m("errors",e.e("daily_to"))}}function Ee(n,S){1&n&&(t.I0R(0,"span",28),t.aS0(1,57),t.C$Y())}function Se(n,S){1&n&&(t.I0R(0,"span",30),t.aS0(1,58),t.C$Y())}function Te(n,S){if(1&n&&t.wR5(0,"app-qr-code",13),2&n){const e=t.GaO();t.E7m("data",e.privateUrl)}}let me=(()=>{class n{constructor(e){this.context=e,this.destroy$=(0,t.uUt)(c.UF),this.service=(0,t.uUt)(_.S),this.notifications=(0,t.uUt)(d.E),this.urlTo=(0,t.uUt)(ut.S),this.form=new T.WC({private_visible:new T.Ku,public_from_date:new T.Ku,public_from_time:new T.Ku,public_to_date:new T.Ku,public_to_time:new T.Ku,public_visible:new T.Ku,daily_from:new T.Ku,daily_to:new T.Ku}),this.submitted=!1,this.dailyVisibilityOpen=!1,this.absoluteVisibilityOpen=!1,this.saving=(0,t.OCB)(!1),this.privateUrl=`${location.origin}/${this.urlTo.transform(this.context.data?.category?.secret_desc??this.context.data?.category?.secret??"","menuCategory.private")}`,this.publicUrl=`${location.origin}/${this.urlTo.transform(this.context.data?.category?.id??"","menuCategory.public")}`,this.e=this.getErrorsFor}ngOnInit(){const e=this.context.data.category.visibility;e?this.updateForm(e):this.form.reset()}submit(e={}){this.submitted=!0;const i=this.context.data?.category?.id;this.form.invalid||!i||(this.saving.set(!0),this.service.updateVisibility(i,{...this.formVal(),...e}).pipe((0,C.a)(this.destroy$),(0,l.U)(()=>this.saving.set(!1))).subscribe({next:o=>{this.notifications.fireSnackBar("Visibilit\xE0 aggiornata."),this.context.completeWith(o)},error:o=>{this.manageError(o)}}))}cancel(){(this.form.touched||this.form.dirty)&&!confirm("Sei sicuro di voler annullare le modifiche fatte?")||this.context.completeWith(null)}formVal(){const e={public_visible:this.form.value.public_visible,private_visible:this.form.value.private_visible,daily_from:this.form.value.daily_from instanceof ot.uc?(0,st.Ez)(this.form.value.daily_from):"",daily_to:this.form.value.daily_to instanceof ot.uc?(0,st.Ez)(this.form.value.daily_to):""},i=this.form.value;if(i.public_from_date instanceof ot.EK){const o=i.public_from_time instanceof ot.uc?i.public_from_time:new ot.uc(0,0);e.public_from=(0,st.Qx)(i.public_from_date,o)}else e.public_from="";if(i.public_to_date instanceof ot.EK){const o=i.public_to_time instanceof ot.uc?i.public_to_time:new ot.uc(0,0);e.public_to=(0,st.Qx)(i.public_to_date,o)}else e.public_to="";return e}togglePrivateVisible(){this.form.patchValue({private_visible:!this.form.value.private_visible})}togglePublicVisible(){this.form.patchValue({public_visible:!this.form.value.public_visible})}updateForm(e){if(!e)return;const i={public_visible:e.public_visible,private_visible:e.private_visible,public_from_date:e.public_from?(0,st._0)(e.public_from):null,public_from_time:e.public_from?(0,st.Q1)(e.public_from):null,public_to_date:e.public_to?(0,st._0)(e.public_to):null,public_to_time:e.public_to?(0,st.Q1)(e.public_to):null,daily_from:e.daily_from?(0,st.Q1)(e.daily_from):null,daily_to:e.daily_to?(0,st.Q1)(e.daily_to):null};i.public_from_time instanceof ot.uc&&0===i.public_from_time?.hours&&0===i.public_from_time?.minutes&&(i.public_from_time=null),i.public_to_time instanceof ot.uc&&0===i.public_to_time?.hours&&0===i.public_to_time?.minutes&&(i.public_to_time=null),this.form.patchValue(i),(e.daily_from||e.daily_to)&&(this.dailyVisibilityOpen=!0),(e.public_from||e.public_to)&&(this.absoluteVisibilityOpen=!0)}getErrorsFor(e){const i=this.form.get(e);return i&&(this.submitted||i.touched||i.dirty)?i.errors:null}manageError(e){422!=e.status||"object"!=typeof e.error.details||"cannot_publish"!=e.error.details.error_code?this.notifications.error((0,g.mk)(e)||"Errore nel salvataggio."):this.notifications.confirm(e.error.message??"Pubblicazione fallita.",{yes:"Forza pubblicazione",no:"Annulla",title:"Errori nella pubblicazione"}).pipe((0,C.a)(this.destroy$)).subscribe({next:i=>{i&&this.force()},error:i=>{console.warn("error",i)}})}force(){this.submit({force:!0})}static#t=this.\u0275fac=function(i){return new(i||n)(t.GI1(M.C0))};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-timestamps-modal"]],standalone:!0,features:[t.M5G([c.UF,ut.S]),t.UHJ],decls:55,vars:21,consts:()=>{let e,i,o,E,P,b,U,H,W,q,Z,tt,et,nt,k,pt,Ot,ft,It,Mt,ht,Rt,Nt,At,yt,Pt;return e="La categoria sar\xE0 effettivamente visibile nel men\xF9 pubblico se sar\xE0 in stato 'attivo'; altrimenti, qualunque siano le impostazioni di seguito, la categoria non sar\xE0 pubblica.",i="Se attivata, il men\xF9 sar\xE0 visibile nella pagina pubblica.",o="Programma visibilit\xE0 assoluta",E="Programma visibilit\xE0 giornaliera",P="Se attivata, solo gli utenti che conoscono il link potranno visualizzare la pagina.",b="Conferma",U="Annulla",H="Attivata",W="Disattivata",q="\xC8 possibile mostrare o nascondere il me\xF9 nella pagina pubblica in modo programmatico da una certa data fino ad un altra. Se queste date non vengono inserite, il men\xF9 sar\xE0 sempre visibile.",Z="Men\xF9 visibile dal giorno:",tt="Giorno",et="Ora",nt="Formato 24 ore.",k="Fino al giorno:",pt="Giorno",Ot="Ora",ft="Formato 24 ore.",It="\xC8 possibile mostrare il men\xF9 nella pagina pubblica solo in determinate fasce orarie. Se non vengono specificate fasce orarie, il men\xF9 sar\xE0 sempre visibile.",Mt="Orari:",ht="Dalle ore",Rt="Formato 24 ore.",Nt="fino alle ore",At="Formato 24 ore.",yt="Attivata",Pt="Disattivata",[[3,"formGroup","ngSubmit"],[1,"text-slate-400","block","mb-3"],e,[3,"overlay","showLoader"],[1,"text-sm","text-slate-400"],i,[1,"mb-3"],[1,"flex","items-center"],[1,"me-1",3,"formControlName"],[1,"cursor-pointer",3,"click"],["class","text-green-700"],[3,"errors"],[3,"expanded"],[3,"data"],[1,"flex","items-center","mb-3"],["target","_blank","tuiLink","",1,"me-2","text-xs",3,"href"],[3,"content"],[3,"open"],[1,"text-lg"],o,["tuiAccordionItemContent",""],E,[1,"my-3"],P,["tuiButton","","type","submit","size","l",1,"me-1"],b,["tuiButton","","appearance","outline","type","button","size","l",3,"click"],U,[1,"text-green-700"],H,[1,"text-slate-700"],W,q,Z,[1,"flex","items-top"],[1,"flex","grow","flex-col"],["formControlName","public_from_date",1,"me-2","mb-1"],tt,[1,"grow","flex","flex-col",3,"ngClass"],["formControlName","public_from_time",1,"mb-1"],et,nt,k,["formControlName","public_to_date",1,"me-2","mb-1"],pt,["formControlName","public_to_time",1,"mb-1"],Ot,ft,It,Mt,["formControlName","daily_from",1,"me-2","mb-1"],ht,Rt,[1,"grow","flex","flex-col"],["formControlName","daily_to",1,"mb-1"],Nt,At,yt,Pt]},template:function(i,o){1&i&&(t.I0R(0,"form",0),t.qCj("ngSubmit",function(){return o.submit()}),t.I0R(1,"p",1),t.aS0(2,2),t.C$Y(),t.I0R(3,"tui-loader",3)(4,"h4"),t.OEk(5,"Visibilit\xe0 pubblica"),t.C$Y(),t.I0R(6,"p",4),t.aS0(7,5),t.C$Y(),t.I0R(8,"div",6)(9,"div",7),t.wR5(10,"tui-toggle",8),t.I0R(11,"span",9),t.qCj("click",function(){return o.togglePublicVisible()}),t.yuY(12,ce,2,0,"span",10)(13,ue,2,0),t.C$Y()(),t.wR5(14,"app-errors",11),t.C$Y(),t.I0R(15,"tui-expand",12),t.yuY(16,de,1,1,"app-qr-code",13),t.I0R(17,"div",14)(18,"a",15),t.OEk(19),t.C$Y(),t.wR5(20,"app-copy-content",16),t.C$Y(),t.I0R(21,"tui-accordion")(22,"tui-accordion-item",17)(23,"span",18),t.aS0(24,19),t.C$Y(),t.yuY(25,Ce,34,10,"ng-template",20),t.C$Y(),t.I0R(26,"tui-accordion-item",17)(27,"span",18),t.aS0(28,21),t.C$Y(),t.yuY(29,ge,20,2,"ng-template",20),t.C$Y()()(),t.wR5(30,"hr",22),t.I0R(31,"h4"),t.OEk(32,"Visibilit\xe0 privata"),t.C$Y(),t.I0R(33,"p",4),t.aS0(34,23),t.C$Y(),t.I0R(35,"div",6)(36,"div",7),t.wR5(37,"tui-toggle",8),t.I0R(38,"span",9),t.qCj("click",function(){return o.togglePrivateVisible()}),t.yuY(39,Ee,2,0,"span",10)(40,Se,2,0),t.C$Y()(),t.wR5(41,"app-errors",11),t.C$Y(),t.I0R(42,"tui-expand",12),t.yuY(43,Te,1,1,"app-qr-code",13),t.I0R(44,"div",14)(45,"a",15),t.OEk(46),t.C$Y(),t.wR5(47,"app-copy-content",16),t.C$Y()(),t.I0R(48,"div",7)(49,"button",24),t.SAx(50),t.aS0(51,25),t.k70(),t.C$Y(),t.I0R(52,"button",26),t.qCj("click",function(){return o.cancel()}),t.SAx(53),t.aS0(54,27),t.k70(),t.C$Y()()()()),2&i&&(t.E7m("formGroup",o.form),t.yG2(3),t.E7m("overlay",!0)("showLoader",o.saving()),t.yG2(7),t.E7m("formControlName","public_visible"),t.yG2(2),t.C0Y(12,o.form.value.public_visible?12:13),t.yG2(2),t.E7m("errors",o.e("public_visible")),t.yG2(),t.E7m("expanded",o.form.value.public_visible),t.yG2(),t.C0Y(16,o.publicUrl?16:-1),t.yG2(2),t._6D("href",o.publicUrl,t.K6U),t.yG2(),t.cNF(o.publicUrl),t.yG2(),t.E7m("content",o.publicUrl),t.yG2(2),t.E7m("open",o.absoluteVisibilityOpen),t.yG2(4),t.E7m("open",o.dailyVisibilityOpen),t.yG2(11),t.E7m("formControlName","private_visible"),t.yG2(2),t.C0Y(39,o.form.value.private_visible?39:40),t.yG2(2),t.E7m("errors",o.e("private_visible")),t.yG2(),t.E7m("expanded",o.form.value.private_visible),t.yG2(),t.C0Y(43,o.privateUrl?43:-1),t.yG2(2),t._6D("href",o.privateUrl,t.K6U),t.yG2(),t.cNF(o.privateUrl),t.yG2(),t.E7m("content",o.privateUrl))},dependencies:[ct,wt,Et.g,T.sl,T.sz,T.ue,T.u,T.uW,T.Wo,$t.K6,p.CI,p.Kw,K.iO,K.yc,K.Ml,Q.IZ,Q.iw,Q.gt,St.kh,St.st,at.w,at.C,f.Sk,f.Cb,re,O.QF,j.Ep,j.Ix,j._Q,j.Up,le.M],changeDetection:0})}return n})();var pe=s(7336);function Oe(n,S){1&n&&(t.I0R(0,"span",15),t.aS0(1,16),t.C$Y())}function fe(n,S){1&n&&(t.I0R(0,"span",17),t.aS0(1,18),t.C$Y())}function Ie(n,S){if(1&n&&(t.I0R(0,"span",5),t.aS0(1,21),t.C$Y(),t.I0R(2,"span",5),t.OEk(3),t.wVc(4,"date"),t.C$Y()),2&n){const e=t.GaO(3);t.yG2(3),t.cNF(t.g7$(4,1,e.daily_from(),"HH:mm"))}}function Me(n,S){if(1&n&&(t.I0R(0,"span",5),t.OEk(1,"fino alle ore"),t.C$Y(),t.I0R(2,"span",5),t.OEk(3),t.wVc(4,"date"),t.C$Y()),2&n){const e=t.GaO(3);t.yG2(3),t.cNF(t.g7$(4,1,e.daily_to(),"HH:mm"))}}function he(n,S){if(1&n&&(t.I0R(0,"div",4)(1,"span",5),t.aS0(2,20),t.C$Y(),t.yuY(3,Ie,5,4)(4,Me,5,4),t.C$Y()),2&n){const e=t.GaO(2);t.yG2(3),t.C0Y(3,e.daily_from()?3:-1),t.yG2(),t.C0Y(4,e.daily_to()?4:-1)}}function Re(n,S){if(1&n&&(t.I0R(0,"span"),t.OEk(1),t.wVc(2,"date"),t.C$Y()),2&n){const e=t.GaO(4);t.yG2(),t.cNF(t.g7$(2,1,e.public_from(),"HH:mm"))}}function Ne(n,S){if(1&n&&(t.I0R(0,"div",4)(1,"span",5),t.aS0(2,22),t.C$Y(),t.I0R(3,"span",5),t.OEk(4),t.wVc(5,"date"),t.C$Y(),t.yuY(6,Re,3,4,"span"),t.wVc(7,"date"),t.C$Y()),2&n){const e=t.GaO(3);t.yG2(4),t.cNF(t.g7$(5,2,e.public_from(),"EEEE d MMMM y")),t.yG2(2),t.C0Y(6,"00:00"!=t.g7$(7,5,e.public_from(),"HH:mm")?6:-1)}}function Ae(n,S){if(1&n&&(t.I0R(0,"span"),t.OEk(1),t.wVc(2,"date"),t.C$Y()),2&n){const e=t.GaO(4);t.yG2(),t.cNF(t.g7$(2,1,e.public_to(),"HH:mm"))}}function ye(n,S){if(1&n&&(t.I0R(0,"div",4)(1,"span",5),t.aS0(2,23),t.C$Y(),t.I0R(3,"span",5),t.OEk(4),t.wVc(5,"date"),t.C$Y(),t.yuY(6,Ae,3,4,"span"),t.wVc(7,"date"),t.C$Y()),2&n){const e=t.GaO(3);t.yG2(4),t.cNF(t.g7$(5,2,e.public_to(),"EEEE d MMMM y")),t.yG2(2),t.C0Y(6,"00:00"!=t.g7$(7,5,e.public_to(),"HH:mm")?6:-1)}}function Pe(n,S){if(1&n&&(t.I0R(0,"div"),t.yuY(1,Ne,8,8,"div",19)(2,ye,8,8,"div",19),t.C$Y()),2&n){const e=t.GaO(2);t.yG2(),t.C0Y(1,e.public_from()?1:-1),t.yG2(),t.C0Y(2,e.public_to()?2:-1)}}function Le(n,S){if(1&n&&(t.yuY(0,he,5,2,"div",19),t.I0R(1,"div",3),t.yuY(2,Pe,3,2,"div"),t.C$Y()),2&n){const e=t.GaO();t.C0Y(0,e.daily_from()||e.daily_to()?0:-1),t.yG2(2),t.C0Y(2,e.public_from()||e.public_to()?2:-1)}}function De(n,S){1&n&&(t.I0R(0,"span",15),t.aS0(1,24),t.C$Y())}function $e(n,S){1&n&&(t.I0R(0,"span",17),t.aS0(1,25),t.C$Y())}let be=(()=>{class n{constructor(){this.dialogs=(0,t.uUt)(h._k),this.injector=(0,t.uUt)(t.zZn),this.item=(0,t.OCB)(null),this.private_visible=(0,t.S6b)(()=>this.item()?.visibility?.private_visible??!1),this.isInactive=(0,t.S6b)(()=>"inactive"===this.item()?.status),this.public_from=(0,t.S6b)(()=>this.item()?.visibility?.public_from),this.public_to=(0,t.S6b)(()=>this.item()?.visibility?.public_to),this.daily_from=(0,t.S6b)(()=>this.item()?.visibility?.daily_from),this.daily_to=(0,t.S6b)(()=>this.item()?.visibility?.daily_to),this.public_visible=(0,t.S6b)(()=>this.item()?.visibility?.public_visible??!1),this.categoryChange=new t._w7}set category(e){this.item.set(e??null)}get category(){return this.item()}editTimestamps(){this.dialogs.open(new M.WO(me,this.injector),{data:{category:this.item()},dismissible:!1,closeable:!0,label:"Modifica visibilit\xE0"}).subscribe({next:e=>{e&&(this.item.set(e),this.categoryChange.emit(e))}})}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-eip-category-visibility"]],inputs:{category:"category"},outputs:{categoryChange:"categoryChange"},standalone:!0,features:[t.M5G([c.UF]),t.UHJ],decls:28,vars:4,consts:()=>{let e,i,o,E,P,b,U,H,W,q,Z,tt,et,nt;return e="Visibilit\xE0",i="Visibilit\xE0",o="pubblica",E="Visibilit\xE0",P="privata",b="Modifica visibilit\xE0",U="Attivata",H="Disattivata",W="Visibile",q="dalle ore",Z="Da",tt="fino a",et="Attivata",nt="Disattivata",[[1,"my-3","block","text-2xl"],e,[1,"block",3,"item"],[1,"flex","flex-col"],[1,"flex","items-center"],[1,"me-1"],i,[1,"me-2"],o,["class","me-2 text-green-700"],["class","flex flex-col"],E,P,["type","button","tuiButton","","size","m","appearance","flat",3,"click"],b,[1,"me-2","text-green-700"],U,[1,"me-2","text-slate-700"],H,["class","flex items-center"],W,q,Z,tt,et,nt]},template:function(i,o){1&i&&(t.I0R(0,"p",0),t.aS0(1,1),t.C$Y(),t.wR5(2,"app-menu-category-visibility-summary",2),t.I0R(3,"div",3)(4,"div",4)(5,"span",4)(6,"span",5),t.aS0(7,6),t.C$Y(),t.I0R(8,"b",7),t.aS0(9,8),t.C$Y()(),t.yuY(10,Oe,2,0,"span",9)(11,fe,2,0)(12,Le,3,2,"div",10),t.C$Y()(),t.I0R(13,"div",3)(14,"div",4)(15,"span",4)(16,"span",5),t.aS0(17,11),t.C$Y(),t.I0R(18,"b",7),t.aS0(19,12),t.C$Y()(),t.yuY(20,De,2,0,"span",9)(21,$e,2,0),t.C$Y()(),t.I0R(22,"button",13),t.qCj("click",function(){return o.editTimestamps()}),t.I0R(23,"span",4)(24,"mat-icon"),t.OEk(25,"edit"),t.C$Y(),t.I0R(26,"span"),t.aS0(27,14),t.C$Y()()()),2&i&&(t.yG2(2),t.E7m("item",o.item()),t.yG2(8),t.C0Y(10,o.public_visible()?10:11),t.yG2(2),t.C0Y(12,o.public_visible()?12:-1),t.yG2(8),t.C0Y(20,o.private_visible()?20:21))},dependencies:[ct,T.sl,O.y,p.CI,p.Kw,Tt.qL,pe.A],changeDetection:0})}return n})();var Ge=s(5004),_t=s(466),J=s(4336),ve=s(2904);function Ye(n,S){if(1&n&&t.wR5(0,"i"),2&n){const e=t.GaO();t.uQ9("align-self-center fas fa-fw fa-",e.icon,"")}}function Be(n,S){if(1&n&&(t.I0R(0,"span",3),t.OEk(1),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.oRS(" ",e.humanStatus," ")}}const we=n=>({color:n}),Ue=["*"];let ke=(()=>{class n extends ve.c{constructor(){super(...arguments),this.configs={active:{text:"Attivo",color:"var(--tui-positive, lime)",icon:"check"},inactive:{text:"Inattivo",color:"var(--tui-negative, red)",icon:"close"},deleted:{text:"Eliminato",color:"red",icon:"trash"}}}static#t=this.\u0275fac=(()=>{let e;return function(o){return(e||(e=t.otF(n)))(o||n)}})();static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-menu-category-status"]],inputs:{status:"status"},standalone:!0,features:[t.eg9,t.UHJ],ngContentSelectors:Ue,decls:7,vars:5,consts:[[1,"d-flex","flex-column"],[1,"d-flex","flex-row",3,"ngStyle"],[3,"class",4,"ngIf"],[1,"align-self-center"],["customTitle",""],["class","align-self-center",4,"ngIf"]],template:function(i,o){if(1&i&&(t.kPM(),t.I0R(0,"span",0)(1,"span",1),t.yuY(2,Ye,1,3,"i",2),t.I0R(3,"span",3,4),t._Xx(5),t.C$Y(),t.yuY(6,Be,2,1,"span",5),t.C$Y()()),2&i){const E=t.Gew(4);t.yG2(),t.E7m("ngStyle",t.S45(3,we,o.color)),t.yG2(),t.E7m("ngIf",o.validStatus&&o.validConfig),t.yG2(4),t.E7m("ngIf",!E.hasChildNodes())}},dependencies:[O.Qt,O.u_],encapsulation:2,changeDetection:0})}return n})();function xe(n,S){if(1&n){const e=t.KQA();t.I0R(0,"button",3),t.qCj("click",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.updateStatus("active"))}),t.I0R(1,"app-menu-category-status",7),t.SAx(2),t.aS0(3,8),t.k70(),t.C$Y()()}2&n&&(t.yG2(),t.E7m("status","active"))}function ze(n,S){if(1&n){const e=t.KQA();t.I0R(0,"button",3),t.qCj("click",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.updateStatus("inactive"))}),t.I0R(1,"app-menu-category-status",7),t.SAx(2),t.aS0(3,9),t.k70(),t.C$Y()()}2&n&&(t.yG2(),t.E7m("status","inactive"))}function He(n,S){if(1&n){const e=t.KQA();t.I0R(0,"tui-data-list"),t.yuY(1,xe,4,1,"button",2)(2,ze,4,1,"button",2),t.I0R(3,"button",3),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.delete())}),t.I0R(4,"span",4)(5,"mat-icon",5),t.OEk(6,"delete"),t.C$Y(),t.I0R(7,"span"),t.aS0(8,6),t.C$Y()()()()}if(2&n){const e=t.GaO();t.yG2(),t.C0Y(1,e.category&&"active"!=e.category.status?1:-1),t.yG2(),t.C0Y(2,e.category&&"inactive"!=e.category.status?2:-1)}}const Ve=n=>({rotate180:n});function Fe(n,S){if(1&n&&(t.I0R(0,"tui-hosted-dropdown",1,10)(2,"button",11)(3,"span",4),t.wR5(4,"app-menu-category-status",7),t.I0R(5,"mat-icon",12),t.OEk(6,"expand_more"),t.C$Y()()()()),2&n){const e=t.Gew(1),i=t.GaO(),o=t.Gew(1);t.E7m("content",o),t.yG2(4),t.E7m("status",i.category.status),t.yG2(),t.E7m("ngClass",t.S45(3,Ve,e.open))}}let Xe=(()=>{class n{constructor(){this.notifications=(0,t.uUt)(d.E),this.destroy$=(0,t.uUt)(c.UF),this.deleteCategory=new t._w7,this.statusChange=new t._w7,this.categoryChange=new t._w7,this.category=null}delete(){this.notifications.confirm("Sei sicuro di voler eliminare la categoria?",{yes:"S\xEC, elimina la categoria",no:"Annulla"}).pipe((0,C.a)(this.destroy$)).subscribe({next:e=>{e&&this.deleteCategory.emit()}})}updateStatus(e){this.statusChange.emit(e)}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-edit-menu-category-status"]],inputs:{category:"category"},outputs:{deleteCategory:"deleteCategory",statusChange:"statusChange",categoryChange:"categoryChange"},standalone:!0,features:[t.M5G([c.UF]),t.UHJ],decls:3,vars:1,consts:()=>{let e,i,o;return e="Elimina",i="Attiva",o="Disattiva",[["dropdownContent",""],[3,"content"],["type","button","tuiOption",""],["type","button","tuiOption","",3,"click"],[1,"flex","items-center"],[1,"me-1"],e,[1,"me-1",3,"status"],i,o,["dropdown",""],["tuiButton","","type","button","appearance","outline","size","l"],[1,"animation-speed-2",3,"ngClass"]]},template:function(i,o){1&i&&t.yuY(0,He,9,2,"ng-template",null,0,t.gJz)(2,Fe,7,5,"tui-hosted-dropdown",1),2&i&&(t.yG2(2),t.C0Y(2,o.category&&o.category.status?2:-1))},dependencies:[_t.GE,_t.Qw,J.A$,J.yi,J.sP,Tt.qL,ke,p.CI,p.Kw,O.QF],encapsulation:2})}return n})();var Ht=s(4e3),Ke=s(6684),Vt=s(2300),dt=s(3797),mt=s(8048);const Qe=["*"];let Je=(()=>{class n{constructor(){this.destroy$=(0,t.uUt)(c.UF),this.notifications=(0,t.uUt)(d.E),this.categoriesService=(0,t.uUt)(_.S),this.removingPrice=(0,t.OCB)(!1),this.searchingDishes=(0,t.OCB)(!1),this.savingPrice=(0,t.OCB)(!1),this.loading=(0,t.S6b)(()=>this.savingPrice()||this.searchingDishes()||this.removingPrice()),this.categoryChanged=new t._w7,this.category=null,this.price=new T.Ku(null)}ngOnInit(){this.price.valueChanges.pipe((0,C.a)(this.destroy$),(0,Ht.a)(),(0,Ke.I)(e=>e!=this.category?.price),(0,Vt.o)(1500)).subscribe({next:e=>this.updateRemote(e)})}ngOnChanges(e){e.category&&this.price.patchValue(this.category?.price??null)}updateRemote(e){const i=this.category?.id;i&&(this.updateRemoteSub?.unsubscribe(),this.savingPrice.set(!0),this.updateRemoteSub=this.categoriesService.update(i,{price:e}).pipe((0,C.a)(this.destroy$),(0,l.U)(()=>this.savingPrice.set(!1))).subscribe({next:o=>{this.category=o,this.categoryChanged.emit(o),this.notifications.fireSnackBar("Prezzo salvato.")},error:o=>{this.notifications.fireSnackBar((0,g.mk)(o)||"Qualcosa \xE8 andato storto nel salvataggio del prezzo.")}}))}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-category-price"]],inputs:{category:"category"},outputs:{categoryChanged:"categoryChanged"},standalone:!0,features:[t.M5G([c.UF]),t.SYr,t.UHJ],ngContentSelectors:Qe,decls:2,vars:1,consts:[["tuiTextfieldSize","l","tuiTextfieldPostfix","\u20ac",3,"formControl"]],template:function(i,o){1&i&&(t.kPM(),t.I0R(0,"tui-input",0),t._Xx(1),t.C$Y()),2&i&&t.E7m("formControl",o.price)},dependencies:[dt.CQ,dt.Oo,dt.cP,mt.aS,mt.rD,mt.We,T.sl,T.ue,T.ug,St.kh,p.CI],encapsulation:2,changeDetection:0})}return n})();function je(n,S){1&n&&(t.SAx(0),t.aS0(1,6),t.k70())}function We(n,S){1&n&&(t.SAx(0),t.aS0(1,7),t.k70())}function qe(n,S){if(1&n&&(t.I0R(0,"a",28),t.wVc(1,"urlTo"),t.I0R(2,"span",2)(3,"mat-icon",3),t.OEk(4,"link"),t.C$Y(),t.I0R(5,"span"),t.aS0(6,32),t.C$Y()()()),2&n){const e=t.GaO(3);t.E7m("routerLink",t.g7$(1,1,e.category.id,"menuCategory.public"))}}function Ze(n,S){if(1&n&&(t.I0R(0,"a",28),t.wVc(1,"urlTo"),t.I0R(2,"span",2)(3,"mat-icon",3),t.OEk(4,"share"),t.C$Y(),t.I0R(5,"span"),t.aS0(6,33),t.C$Y()()()),2&n){const e=t.GaO(3);t.E7m("routerLink",t.g7$(1,1,e.category.secret,"menuCategory.private"))}}function tn(n,S){if(1&n){const e=t.KQA();t.I0R(0,"tui-data-list")(1,"button",28)(2,"span",2)(3,"mat-icon",3),t.OEk(4,"content_copy"),t.C$Y(),t.I0R(5,"span"),t.aS0(6,29),t.C$Y()()(),t.yuY(7,qe,7,4,"a",28)(8,Ze,7,4,"a",28),t.I0R(9,"button",30),t.qCj("click",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.confirmAndDelete())}),t.I0R(10,"span",2)(11,"mat-icon",3),t.OEk(12,"delete"),t.C$Y(),t.I0R(13,"span"),t.aS0(14,31),t.C$Y()()()()}if(2&n){const e=t.GaO(2);t.yG2(),t.E7m("routerLink","duplicate"),t.yG2(6),t.C0Y(7,!0===(null==e.category.visibility?null:e.category.visibility.public_visible)?7:-1),t.yG2(),t.C0Y(8,!0===(null==e.category.visibility?null:e.category.visibility.private_visible)?8:-1)}}function en(n,S){if(1&n){const e=t.KQA();t.I0R(0,"p",9),t.aS0(1,34),t.C$Y(),t.I0R(2,"app-name-desc-eip",35),t.qCj("submittedChanges",function(o){t.usT(e);const E=t.GaO(2);return t.CGJ(E.saveNameDesc(o))}),t.C$Y()}if(2&n){const e=t.GaO(2);t.yG2(2),t.E7m("translations",e.category.translations)}}function nn(n,S){if(1&n){const e=t.KQA();t.I0R(0,"app-eip-category-visibility",36),t.iHE("categoryChange",function(o){t.usT(e);const E=t.GaO(2);return t.kNx(E.category,o)||(E.category=o),t.CGJ(o)}),t.C$Y()}if(2&n){const e=t.GaO(2);t.OKB("category",e.category)}}function on(n,S){if(1&n){const e=t.KQA();t.I0R(0,"div",8)(1,"div")(2,"p",9),t.aS0(3,10),t.C$Y(),t.wR5(4,"app-show-images",11),t.I0R(5,"div",0)(6,"h4",12),t.aS0(7,13),t.C$Y(),t.I0R(8,"app-edit-menu-category-status",14),t.qCj("deleteCategory",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.deleteCategory())})("statusChange",function(o){t.usT(e);const E=t.GaO();return t.CGJ(E.updateStatus(o))}),t.iHE("categoryChange",function(o){t.usT(e);const E=t.GaO();return t.kNx(E.category,o)||(E.category=o),t.CGJ(o)}),t.C$Y()(),t.I0R(9,"div",0)(10,"app-category-price",15),t.qCj("categoryChanged",function(o){t.usT(e);const E=t.GaO();return t.CGJ(E.setCategory(o))}),t.SAx(11),t.aS0(12,16),t.k70(),t.C$Y()()(),t.yuY(13,tn,15,3,"ng-template",null,17,t.gJz),t.I0R(15,"div")(16,"tui-hosted-dropdown",18)(17,"button",19)(18,"mat-icon"),t.OEk(19,"more_vert"),t.C$Y()()()()(),t.yuY(20,en,3,1)(21,nn,1,1,"app-eip-category-visibility",20),t.I0R(22,"p",9),t.aS0(23,21),t.C$Y(),t.I0R(24,"table",22)(25,"tbody")(26,"tr",23)(27,"td",24)(28,"span"),t.aS0(29,25),t.C$Y()(),t.I0R(30,"td",24),t.OEk(31),t.C$Y()(),t.I0R(32,"tr",23)(33,"td",24)(34,"span"),t.aS0(35,26),t.C$Y()(),t.I0R(36,"td",24),t.OEk(37),t.wVc(38,"date"),t.C$Y()(),t.I0R(39,"tr",23)(40,"td",24)(41,"span"),t.aS0(42,27),t.C$Y()(),t.I0R(43,"td",24),t.OEk(44),t.wVc(45,"date"),t.C$Y()()()()}if(2&n){const e=t.Gew(14),i=t.GaO();t.yG2(4),t.E7m("recordType","Menu::Category")("recordId",i.category.id)("images",i.category.images),t.yG2(4),t.OKB("category",i.category),t.yG2(2),t.E7m("category",i.category),t.yG2(6),t.E7m("content",e),t.yG2(4),t.C0Y(20,i.category.translations?20:-1),t.yG2(),t.C0Y(21,i.category.visibility?21:-1),t.yG2(10),t.cNF(i.category.id),t.yG2(6),t.cNF(t.g7$(38,11,i.category.updated_at,"full")),t.yG2(7),t.cNF(t.g7$(45,14,i.category.created_at,"full"))}}const sn=[[["","breadcrumb",""]]],an=n=>({rotate180:n}),_n=["[breadcrumb]"];let rn=(()=>{class n{constructor(){this.destroy$=(0,t.uUt)(c.UF),this.service=(0,t.uUt)(_.S),this.notifications=(0,t.uUt)(d.E),this.router=(0,t.uUt)(a.E5),this.route=(0,t.uUt)(a.gV),this.categoryChange=new t._w7,this.category=null,this.expanded=!1,this.loading=(0,t.OCB)(!1)}saveNameDesc(e){const i=this.category?.id;i&&(this.loading.set(!0),this.service.update(i,e).pipe((0,C.a)(this.destroy$),(0,l.U)(()=>this.loading.set(!1))).subscribe({next:o=>{this.notifications.fireSnackBar("Traduzioni aggiornate."),this.categoryChange.emit(o),this.category=o},error:o=>{this.notifications.error((0,g.mk)(o)||"Qualcosa \xE8 andato storto.")}}))}updateStatus(e){const i=this.category?.id;!e||!i||(this.loading.set(!0),this.service.update(i,{status:e}).pipe((0,C.a)(this.destroy$),(0,l.U)(()=>this.loading.set(!1))).subscribe({next:o=>{this.notifications.fireSnackBar("Stato aggiornato."),this.categoryChange.emit(o),this.category=o},error:o=>{this.notifications.error((0,g.mk)(o)||"Qualcosa \xE8 andato storto.")}}))}deleteCategory(){const e=this.category?.id;e&&(this.loading.set(!0),this.service.destroy(e).pipe((0,C.a)(this.destroy$),(0,l.U)(()=>this.loading.set(!1))).subscribe({next:()=>{this.notifications.fireSnackBar("Categoria eliminata."),this.router.navigate(["../"],{relativeTo:this.route})},error:i=>{this.notifications.error((0,g.mk)(i)||"Qualcosa \xE8 andato storto.")}}))}confirmAndDelete(){this.notifications.confirm("Sei sicuro di voler eliminare la categoria?",{yes:"S\xEC, elimina la categoria",no:"Annulla"}).pipe((0,C.a)(this.destroy$)).subscribe({next:e=>{this.deleteCategory()}})}setCategory(e){this.category=e,this.categoryChange.emit(e)}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-category-details"]],inputs:{category:"category"},outputs:{categoryChange:"categoryChange"},standalone:!0,features:[t.M5G([c.UF]),t.UHJ],ngContentSelectors:_n,decls:13,vars:7,consts:()=>{let e,i,o,E,P,b,U,H,W,q,Z,tt,et,nt;return e="Chiudi dettagli",i="Dettagli categoria",o="Immagini categoria",E="Stato categoria",P="Prezzo fisso per la categoria",b="Dettagli",U="id",H="Ultima modifica",W="Data creazione",q="Duplica",Z="Elimina",tt="Anteprima link pubblico",et="Anteprima link privato",nt="Traduzioni",[[1,"mb-3"],["tuiButton","","appearance","flat","size","m",3,"click"],[1,"flex","items-center"],[1,"me-1"],[1,"animation-speed-2",3,"ngClass"],[3,"expanded"],e,i,[1,"flex","justify-between"],[1,"my-3","block","text-2xl"],o,[1,"mb-3",3,"recordType","recordId","images"],[1,"mb-1","me-1"],E,[1,"mb-3",3,"category","deleteCategory","statusChange","categoryChange"],[3,"category","categoryChanged"],P,["actions",""],[3,"content"],["tuiIconButton","","type","button","appearance","outline","size","m"],[3,"category"],b,[1,"tui-table"],[1,"tui-table__tr","tui-table__tr_border_none"],[1,"tui-table__td"],U,H,W,["type","button","tuiOption","",3,"routerLink"],q,["type","button","tuiOption","",3,"click"],Z,tt,et,nt,[1,"mb-3",3,"translations","submittedChanges"],[3,"category","categoryChange"]]},template:function(i,o){1&i&&(t.kPM(sn),t.I0R(0,"h1"),t.OEk(1),t.C$Y(),t._Xx(2),t.I0R(3,"div",0)(4,"button",1),t.qCj("click",function(){return o.expanded=!o.expanded}),t.I0R(5,"span",2)(6,"span",3),t.yuY(7,je,2,0,"ng-container")(8,We,2,0),t.C$Y(),t.I0R(9,"mat-icon",4),t.OEk(10,"expand_more"),t.C$Y()()()(),t.I0R(11,"tui-expand",5),t.yuY(12,on,46,17),t.C$Y()),2&i&&(t.yG2(),t.oRS(" ",null==o.category?null:o.category.name,"\n"),t.yG2(6),t.C0Y(7,o.expanded?7:8),t.yG2(2),t.E7m("ngClass",t.S45(5,an,o.expanded)),t.yG2(2),t.E7m("expanded",o.expanded),t.yG2(),t.C0Y(12,o.category?12:-1))},dependencies:[m.g,be,Ge.O,St.kh,St.st,p.CI,p.Kw,Tt.qL,O.QF,Xe,_t.GE,_t.Qw,J.A$,J.yi,J.sP,a.ER,ut.S,Je,O.y],changeDetection:0})}return n})();var ln=s(3020),cn=s(5193),un=s(5656),Ft=s(6376),dn=s(1104),Xt=s(4856),Kt=s(6528),Qt=s(5e3),bt=s(9212),Cn=s(9052),Jt=s(5892),Gt=s(3400),vt=s(8392),gn=s(9640),En=s(2368);function Sn(n,S){if(1&n&&(t.I0R(0,"p",10),t.OEk(1),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.oRS(" ",e.context.data.hint," ")}}let jt=(()=>{class n{constructor(e,i){this.dialogs=e,this.context=i,this.control=new T.Ku(null,[T.AQ.required]),this.form=new T.WC({category:this.control})}submit(){const e=this.control.value;e&&this.context.completeWith(e)}cancelled(){this.context.completeWith(null)}static#t=this.\u0275fac=function(i){return new(i||n)(t.GI1(h._k),t.GI1(M.C0))};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-modal-input-menu-category"]],standalone:!0,features:[t.UHJ],decls:13,vars:4,consts:()=>{let e,i,o;return e="Seleziona la categoria",i="Conferma",o="Annulla",[[3,"formGroup","ngSubmit"],[1,"block","mb-3"],[3,"autofocus","formControl"],e,["class","text-slate-400 block mb-3"],[1,"flex","items-center"],["type","submit","tuiButton","",1,"me-2"],i,["type","button","tuiButton","","appearance","icon",3,"click"],o,[1,"text-slate-400","block","mb-3"]]},template:function(i,o){1&i&&(t.I0R(0,"form",0),t.qCj("ngSubmit",function(){return o.submit()}),t.I0R(1,"div",1)(2,"app-menu-category-select",2),t.SAx(3),t.aS0(4,3),t.k70(),t.C$Y()(),t.yuY(5,Sn,2,1,"p",4),t.I0R(6,"div",5)(7,"button",6),t.SAx(8),t.aS0(9,7),t.k70(),t.C$Y(),t.I0R(10,"button",8),t.qCj("click",function(){return o.cancelled()}),t.SAx(11),t.aS0(12,9),t.k70(),t.C$Y()()()),2&i&&(t.E7m("formGroup",o.form),t.yG2(2),t.E7m("autofocus",!0)("formControl",o.control),t.yG2(3),t.C0Y(5,o.context.data.hint?5:-1))},dependencies:[En.a,T.sl,T.sz,T.ue,T.u,T.ug,T.uW,p.CI,p.Kw],encapsulation:2})}return n})();var Tn=s(7936);const mn=(n,S)=>S.id;function pn(n,S){if(1&n&&(t.I0R(0,"span",19),t.OEk(1),t.C$Y()),2&n){const e=t.GaO();let i;t.yG2(),t.oRS("(",null==(i=e.data())||null==i.metadata?null:i.metadata.total_count,")")}}function On(n,S){if(1&n&&(t.I0R(0,"a",21),t.wVc(1,"urlTo"),t.I0R(2,"span",1)(3,"mat-icon",19),t.OEk(4,"share"),t.C$Y(),t.SAx(5),t.aS0(6,23),t.k70(),t.C$Y()()),2&n){const e=t.GaO(2);t.E7m("routerLink",t.g7$(1,1,e.parentCategoryId,"menuCategory.linkDish"))}}function fn(n,S){if(1&n&&(t.I0R(0,"tui-data-list",20)(1,"a",21),t.wVc(2,"urlTo"),t.I0R(3,"span",1)(4,"mat-icon",19),t.OEk(5,"add_circle"),t.C$Y(),t.I0R(6,"span"),t.aS0(7,22),t.C$Y()()(),t.yuY(8,On,7,4,"a",21),t.C$Y()),2&n){const e=t.GaO();let i;t.yG2(),t.E7m("routerLink",t.g7$(2,2,null!==(i=e.parentCategoryId)&&void 0!==i?i:"","menuCategory.createDish")),t.yG2(7),t.C0Y(8,e.parentCategoryId?8:-1)}}function In(n,S){1&n&&(t.SAx(0),t.aS0(1,28),t.k70())}function Mn(n,S){1&n&&(t.SAx(0),t.aS0(1,29),t.k70())}function hn(n,S){1&n&&(t.SAx(0),t.aS0(1,30),t.k70())}function Rn(n,S){1&n&&(t.SAx(0),t.aS0(1,31),t.k70())}function Nn(n,S){if(1&n){const e=t.KQA();t.I0R(0,"tui-data-list",20)(1,"button",24),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.triggerFiltering())}),t.I0R(2,"span",1)(3,"mat-icon",19),t.OEk(4,"search"),t.C$Y(),t.SAx(5),t.aS0(6,25),t.k70(),t.C$Y()(),t.yuY(7,In,2,0,"ng-template",null,26,t.gJz),t.I0R(9,"button",24),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.triggerSelectingDishes())}),t.I0R(10,"span",1)(11,"mat-icon",19),t.OEk(12,"check_box"),t.C$Y(),t.yuY(13,Mn,2,0,"ng-container",27),t.C$Y()(),t.I0R(14,"button",24),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.triggerOrdering())}),t.I0R(15,"span",1)(16,"mat-icon",19),t.OEk(17,"sort_by_alpha"),t.C$Y(),t.yuY(18,hn,2,0,"ng-container")(19,Rn,2,0),t.C$Y()()()}if(2&n){const e=t.Gew(8),i=t.GaO();t.yG2(13),t.E7m("ngIf",i.selecting())("ngIfElse",e),t.yG2(5),t.C0Y(18,i.ordering()?18:19)}}function An(n,S){if(1&n){const e=t.KQA();t.I0R(0,"div",32)(1,"form",33),t.qCj("ngSubmit",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.submitFilters())}),t.I0R(2,"button",34)(3,"mat-icon"),t.OEk(4,"search"),t.C$Y()(),t.I0R(5,"tui-input",35),t.SAx(6),t.aS0(7,36),t.k70(),t.wR5(8,"input",37),t.C$Y()()()}if(2&n){const e=t.GaO();t.yG2(),t.E7m("formGroup",e.filters),t.yG2(),t.E7m("showLoader",e.searching()),t.yG2(3),t.E7m("tuiTextfieldSize","m"),t.yG2(3),t.E7m("autocomplete",!1)}}function yn(n,S){if(1&n){const e=t.KQA();t.I0R(0,"tui-data-list")(1,"button",45)(2,"button",46),t.qCj("click",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.updateSelectedDishStatus("active"))}),t.I0R(3,"app-dish-status",47)(4,"span",1)(5,"mat-icon",19),t.OEk(6,"check_circle"),t.C$Y(),t.I0R(7,"span"),t.aS0(8,48),t.C$Y()()()()(),t.I0R(9,"button",45)(10,"button",46),t.qCj("click",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.updateSelectedDishStatus("inactive"))}),t.I0R(11,"app-dish-status",47)(12,"span",1)(13,"mat-icon",19),t.OEk(14,"cancel"),t.C$Y(),t.I0R(15,"span"),t.aS0(16,49),t.C$Y()()()()(),t.I0R(17,"button",45)(18,"button",46),t.qCj("click",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.removeSelectedDishesFromCategory())}),t.I0R(19,"span",1)(20,"span"),t.aS0(21,50),t.C$Y()()()(),t.I0R(22,"button",45)(23,"button",46),t.qCj("click",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.moveSelectedToOtherCategory())}),t.I0R(24,"span",1)(25,"span"),t.aS0(26,51),t.C$Y()()()(),t.I0R(27,"button",45)(28,"button",46),t.qCj("click",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.associateSelectedToOtherCategory())}),t.I0R(29,"span",1)(30,"span"),t.aS0(31,52),t.C$Y()()()()()}2&n&&(t.yG2(3),t.E7m("status","active"),t.yG2(8),t.E7m("status","inactive"))}const Wt=n=>({rotate180:n});function Pn(n,S){if(1&n&&(t.yuY(0,yn,32,2,"ng-template",null,38,t.gJz),t.I0R(2,"div",32)(3,"div",39)(4,"span",40),t.OEk(5),t.SAx(6),t.aS0(7,41),t.k70(),t.C$Y(),t.I0R(8,"tui-hosted-dropdown",6,42)(10,"button",43)(11,"span",39)(12,"span"),t.aS0(13,44),t.C$Y(),t.I0R(14,"mat-icon",10),t.OEk(15,"expand_more"),t.C$Y()()()()()()),2&n){const e=t.Gew(1),i=t.Gew(9),o=t.GaO();t.yG2(5),t.oRS(" ",o.selectedDishes().length," "),t.yG2(3),t.E7m("content",e),t.yG2(2),t.E7m("disabled",0==o.selectedDishes().length),t.yG2(4),t.E7m("ngClass",t.S45(4,Wt,i.open))}}function Ln(n,S){if(1&n){const e=t.KQA();t.I0R(0,"button",53),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.orderAllBy("name"))}),t.SAx(1),t.aS0(2,54),t.k70(),t.C$Y()}}function Dn(n,S){if(1&n){const e=t.KQA();t.I0R(0,"button",46),t.qCj("click",function(){t.usT(e);const o=t.GaO(3).$implicit,E=t.GaO();return t.CGJ(E.updateDishStatus(o.id,"active"))}),t.I0R(1,"app-dish-status",47)(2,"span",1)(3,"mat-icon",19),t.OEk(4,"check_circle"),t.C$Y(),t.I0R(5,"span"),t.aS0(6,69),t.C$Y()()()()}2&n&&(t.yG2(),t.E7m("status","active"))}function $n(n,S){if(1&n){const e=t.KQA();t.I0R(0,"button",46),t.qCj("click",function(){t.usT(e);const o=t.GaO(3).$implicit,E=t.GaO();return t.CGJ(E.updateDishStatus(o.id,"inactive"))}),t.I0R(1,"app-dish-status",47)(2,"span",1)(3,"mat-icon",19),t.OEk(4,"cancel"),t.C$Y(),t.I0R(5,"span"),t.aS0(6,70),t.C$Y()()()()}2&n&&(t.yG2(),t.E7m("status","inactive"))}function bn(n,S){if(1&n){const e=t.KQA();t.I0R(0,"tui-loader",71)(1,"p"),t.aS0(2,72),t.C$Y(),t.I0R(3,"div",73)(4,"button",74),t.qCj("click",function(){t.usT(e);const o=t.GaO(3).$implicit,E=t.GaO();return t.CGJ(E.deleteDish(o))}),t.SAx(5),t.aS0(6,75),t.k70(),t.C$Y(),t.I0R(7,"button",76),t.qCj("click",function(){t.usT(e);const o=t.GaO(3).$implicit,E=t.GaO();return t.CGJ(E.removeDishFromCategory(o))}),t.SAx(8),t.aS0(9,77),t.k70(),t.C$Y(),t.I0R(10,"button",78),t.qCj("click",function(){t.usT(e);const o=t.GaO(4);return t.CGJ(o.closeModal())}),t.SAx(11),t.aS0(12,79),t.k70(),t.C$Y()()()}if(2&n){const e=t.GaO(4);t.E7m("overlay",!0)("showLoader",e.deleting())}}const Gn=n=>["dish",n],vn=n=>["dish",n,"duplicate"];function Yn(n,S){if(1&n){const e=t.KQA();t.I0R(0,"tui-data-list",20)(1,"a",21)(2,"span",1)(3,"mat-icon",19),t.OEk(4,"visibility"),t.C$Y(),t.I0R(5,"span"),t.aS0(6,64),t.C$Y()()(),t.I0R(7,"a",21)(8,"span",1)(9,"mat-icon",19),t.OEk(10,"content_copy"),t.C$Y(),t.I0R(11,"span"),t.aS0(12,65),t.C$Y()()(),t.yuY(13,Dn,7,1,"button",66)(14,$n,7,1,"button",66)(15,bn,13,2,"ng-template",null,67,t.gJz),t.I0R(17,"button",46),t.qCj("click",function(){t.usT(e);const o=t.Gew(16),E=t.GaO(3);return t.CGJ(E.showModal(o))}),t.I0R(18,"span",1)(19,"mat-icon",19),t.OEk(20,"delete"),t.C$Y(),t.I0R(21,"span"),t.aS0(22,68),t.C$Y()()()()}if(2&n){const e=t.GaO(2).$implicit;t.yG2(),t.E7m("routerLink",t.S45(4,Gn,e.id)),t.yG2(6),t.E7m("routerLink",t.S45(6,vn,e.id)),t.yG2(6),t.E7m("ngIf","active"!=e.status),t.yG2(),t.E7m("ngIf","inactive"!=e.status)}}function Bn(n,S){if(1&n&&t.yuY(0,Yn,23,8,"tui-data-list",63),2&n){const e=t.GaO().$implicit;t.E7m("ngIf",e)}}function wn(n,S){if(1&n&&t.wR5(0,"app-show-image",80),2&n){const e=t.GaO().$implicit;t.E7m("image",e.images[0])}}function Un(n,S){1&n&&(t.I0R(0,"button",62)(1,"mat-icon",81),t.OEk(2,"drag_handle"),t.C$Y()())}function kn(n,S){if(1&n){const e=t.KQA();t.I0R(0,"tui-checkbox-block",82),t.qCj("ngModelChange",function(o){t.usT(e);const E=t.GaO(),P=E.$implicit,b=E.$index,U=t.GaO();return t.CGJ(U.triggerSelection(P,b,o))}),t.C$Y()}if(2&n){const e=t.GaO().$implicit,i=t.GaO();t.E7m("ngModel",i.selectedDishes().includes(e.id))}}function xn(n,S){if(1&n&&(t.I0R(0,"tui-hosted-dropdown",6)(1,"button",62)(2,"mat-icon"),t.OEk(3,"more_vert"),t.C$Y()()()),2&n){t.GaO();const e=t.Gew(1);t.E7m("content",e)}}const zn=n=>({"border-tui-primary bg-tui-secondary-active":n}),qt=(n,S)=>({categoryId:n,itemId:S}),Hn=n=>({"text-warning":n});function Vn(n,S){if(1&n&&(t.yuY(0,Bn,1,1,"ng-template",null,55,t.gJz),t.I0R(2,"tui-island",56)(3,"div",57)(4,"span",1)(5,"a",58),t.wVc(6,"urlTo"),t.yuY(7,wn,1,1,"app-show-image",59),t.C$Y(),t.I0R(8,"div")(9,"a",60),t.wVc(10,"urlTo"),t.OEk(11),t.C$Y(),t.I0R(12,"p",61),t.OEk(13),t.C$Y()()(),t.yuY(14,Un,3,0,"button",62)(15,kn,1,1)(16,xn,4,1),t.C$Y()()),2&n){const e=S.$implicit,i=t.GaO();t.yG2(2),t.E7m("ngClass",t.S45(14,zn,i.selectedDishes().includes(e.id))),t.yG2(3),t.E7m("routerLink",t.g7$(6,8,t.IBC(16,qt,i.parentCategoryId,e.id),"dish.show")),t.yG2(2),t.E7m("ngIf",e&&e.images&&e.images.length>0),t.yG2(2),t.E7m("routerLink",t.g7$(10,11,t.IBC(19,qt,i.parentCategoryId,e.id),"dish.show")),t.yG2(2),t.cNF(e.name),t.yG2(),t.E7m("ngClass",t.S45(22,Hn,"inactive"===e.status)),t.yG2(),t.cNF(e.status),t.yG2(),t.C0Y(14,i.ordering()?14:i.selecting()?15:16)}}function Fn(n,S){1&n&&t.wR5(0,"tui-loader",83),2&n&&t.E7m("showLoader",!0)}function Xn(n,S){1&n&&(t.I0R(0,"p",84),t.SAx(1),t.aS0(2,85),t.k70(),t.C$Y())}function Kn(n,S){if(1&n&&t.yuY(0,Fn,1,1,"tui-loader",83)(1,Xn,3,0),2&n){const e=t.GaO();t.C0Y(0,e.searching()?0:1)}}const Qn=n=>({invisible:n}),Jn=n=>({"allow-reorder":n}),jn=()=>[10,100,1e3];let Wn=(()=>{class n{constructor(){this.injector=(0,t.uUt)(t.zZn),this.service=(0,t.uUt)(r.k),this.categoriesService=(0,t.uUt)(_.S),this.destroy$=(0,t.uUt)(c.UF),this.notifications=(0,t.uUt)(d.E),this.router=(0,t.uUt)(a.E5),this.dialogs=(0,t.uUt)(h._k),this.data=(0,t.OCB)(null),this.items=(0,t.S6b)(()=>this.data()?.items??[]),this.filtering=(0,t.OCB)(!0),this.selecting=(0,t.OCB)(!1),this.ordering=(0,t.OCB)(!1),this.searching=(0,t.OCB)(!1),this.deleting=(0,t.OCB)(!1),this.moving=(0,t.OCB)(!1),this.updatingStatus=(0,t.OCB)(!1),this.relocating=(0,t.OCB)(!1),this.loading=(0,t.S6b)(()=>this.searching()||this.deleting()||this.moving()||this.updatingStatus()||this.relocating()),this.reorderEnabled=(0,t.OCB)(!0),this.filters=new T.WC({query:new T.Ku(null)}),this.selectedDishes=(0,t.OCB)([]),this.offset=0,this.per_page=100,this.parentCategoryId=null}ngOnInit(){this.search(),this.filters.valueChanges.pipe((0,C.a)(this.destroy$),(0,Ht.a)(),(0,Vt.o)(200),(0,bt.y)(()=>this.offset=0)).subscribe({next:()=>this.search()}),this.router.events.pipe((0,C.a)(this.destroy$)).subscribe({next:e=>{e instanceof a.MT&&this.search()}})}ngOnChanges(e){e.parentCategoryId&&this.search()}triggerSelectingDishes(){this.selecting()?this.resetSelecting():this.selecting.set(!0)}updateSelectedDishStatus(e){this.updatingStatus.set(!0),this.service.bulkUpdateStatus({dish_ids:this.selectedDishes(),status:e}).pipe((0,C.a)(this.destroy$),(0,l.U)(()=>this.updatingStatus.set(!1)),(0,bt.y)(()=>this.search())).subscribe({next:()=>{this.resetSelecting(),this.notifications.fireSnackBar("Stato aggiornato.")},error:i=>{this.notifications.error((0,g.mk)(i)||"Qualcosa \xE8 andato storto.")}})}removeSelectedDishesFromCategory(){this.notifications.confirm("Sei sicuro di voler rimuovere i piatti selezionati da questa categoria?").subscribe({next:e=>{if(e){if(!this.parentCategoryId)return this.notifications.error(vt.a);this.relocateDishes({dish_ids:this.selectedDishes(),from_category_id:this.parentCategoryId})}}})}moveSelectedToOtherCategory(){this.dialogs.open(new M.WO(jt,this.injector),{data:{hint:"I piatti verrano rimossi dall'attuale categoria e associati alla nuova."},label:"Seleziona la categoria in cui spostare i piatti."}).pipe((0,C.a)(this.destroy$)).subscribe({next:e=>{e&&e.id&&this.parentCategoryId?this.relocateDishes({dish_ids:this.selectedDishes(),from_category_id:this.parentCategoryId,to_category_id:e.id}):this.notifications.error(vt.a)},error:e=>this.notifications.error(e)})}associateSelectedToOtherCategory(){this.dialogs.open(new M.WO(jt,this.injector),{data:{hint:"I piatti saranno visibili sia dalla categoria attuale sia da quella che stai per selezionare."},label:"Seleziona la categoria a cui aggiungere i piatti selezionati."}).pipe((0,C.a)(this.destroy$)).subscribe({next:e=>{e&&e.id&&this.parentCategoryId?this.relocateDishes({dish_ids:this.selectedDishes(),to_category_id:e.id}):this.notifications.error(vt.a)},error:e=>this.notifications.error(e)})}triggerSelection(e,i,o){const E=e.id;E&&this.selectedDishes.update(P=>(o?P.push(E):P=P.filter(b=>b!=E),[...new Set(P)]))}updateDishStatus(e,i){!i||!e||(this.updatingStatus.set(!0),this.service.updateStatus(e,i).pipe((0,C.a)(this.destroy$),(0,l.U)(()=>this.updatingStatus.set(!1)),(0,bt.y)(()=>this.search())).subscribe({next:()=>{this.notifications.fireSnackBar("Stato aggiornato.")},error:o=>{this.notifications.error((0,g.mk)(o)||"Qualcosa \xE8 andato storto.")}}))}triggerFiltering(){this.filtering.set(!this.filtering()),this.search()}submitFilters(){this.search()}paginationChange(e){this.per_page=e.size,this.offset=e.page,this.search()}search(e=this.parseFilters()){this.searchSub?.unsubscribe(),this.searching.set(!0),this.searchSub=this.service.search(e).pipe((0,C.a)(this.destroy$),(0,l.U)(()=>this.searching.set(!1))).subscribe({next:i=>this.data.set(i),error:i=>{this.data.set(null),this.notifications.error((0,g.mk)(i)||"Qualcosa \xE8 andato storto. Riprova pi\xF9 tardi.")}})}parseFilters(){const e=this.filters.value,i={per_page:this.per_page,offset:this.offset};return this.filtering()&&e.query&&(i.query=e.query),i.category_id=this.parentCategoryId??"",i}deleteDish(e){const i=e?.id;i&&(this.deleting.set(!0),this.service.destroy(i).pipe((0,C.a)(this.destroy$),(0,l.U)(()=>this.deleting.set(!1)),(0,l.U)(()=>this.closeModal())).subscribe({next:()=>{this.notifications.fireSnackBar("Piatto eliminato."),this.search()},error:o=>{this.notifications.error((0,g.mk)(o)||"Qualcosa \xE8 andato storto.")}}))}removeDishFromCategory(e){const i=e?.id;i&&this.parentCategoryId&&(this.deleting.set(!0),this.categoriesService.removeDish(this.parentCategoryId,i).pipe((0,C.a)(this.destroy$),(0,l.U)(()=>this.deleting.set(!1)),(0,l.U)(()=>this.closeModal())).subscribe({next:()=>{this.notifications.fireSnackBar("Piatto rimosso dalla categoria."),this.search()},error:o=>{this.notifications.error((0,g.mk)(o)||vt.a)}}))}drop(e){if(e.previousIndex===e.currentIndex)return;const i=this.items(),o=i[e.previousIndex]?.id;if(!o)return;const E=this.parentCategoryId;(0,Gt.qv)(i,e.previousIndex,e.currentIndex);const P=E?{to_index:e.currentIndex,category_id:E}:{to_index:e.currentIndex};this.moving.set(!0),this.service.move(o,P).pipe((0,C.a)(this.destroy$),(0,l.U)(()=>this.moving.set(!1)),(0,l.U)(()=>this.search())).subscribe({error:b=>this.notifications.error((0,g.mk)(b)||"Qualcosa \xE8 andato storto.")})}triggerOrdering(){this.ordering()||this.notifications.fireSnackBar("Sposta i piatti trascinandoli con il bottone sul lato destro di ciascuna categoria.","Capito",{duration:5e3}),this.ordering.set(!this.ordering())}orderAllBy(e){const i=this.parentCategoryId;i&&(this.moving.set(!0),this.categoriesService.orderDishes(i,e).pipe((0,C.a)(this.destroy$),(0,l.U)(()=>this.moving.set(!1))).subscribe({next:()=>{this.notifications.fireSnackBar("Tutti i piatti ordinati per " + e + ""),this.ordering.set(!1),this.search()},error:o=>this.notifications.error((0,g.mk)(o)||"Qualcosa \xE8 andato storto.")}))}showModal(e,i={}){this.modalSub=this.dialogs.open(e,{size:"auto"}).subscribe()}closeModal(){this.modalSub?.unsubscribe()}resetSelecting(){this.selecting.set(!1),this.selectedDishes.set([])}relocateDishes(e){this.relocating.set(!0),this.service.relocate(e).pipe((0,C.a)(this.destroy$),(0,l.U)(()=>this.relocating.set(!1)),(0,bt.y)(()=>this.search())).subscribe({error:i=>this.notifications.error((0,g.mk)(i)||"Qualcosa \xE8 andato storto."),next:()=>{this.resetSelecting(),this.notifications.fireSnackBar("Piatto/i spostato/i.")}})}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-list-dishes"]],inputs:{parentCategoryId:"parentCategoryId"},standalone:!0,features:[t.M5G([_.S]),t.SYr,t.UHJ],decls:34,vars:23,consts:()=>{let e,i,o,E,P,b,U,H,W,q,Z,tt,et,nt,k,pt,Ot,ft,It,Mt,ht,Rt,Nt,At,yt,Pt,x,ne;return e="Piatti",i="Aggiungi",o="Crea nuovo",E="Associa esistente",P="Filtra elementi",b="Seleziona elementi",U="Chiudi selezione",H="Fatto.",W="Riordina",q="Filtra per nome o descrizione",Z="piatti selezionati",tt="Azioni",et="Attiva",nt="Disattiva",k="Rimuovi da questa categoria",pt="Sposta in un altra categoria",Ot="Associa anche in un altra categoria",ft="Ordina tutti per nome",It="Visualizza",Mt="Duplica",ht="Rimuovi",Rt="Attiva",Nt="Disattiva",At="Vuoi eliminare definitivamente questo piatto, oppure solo rimuoverlo da questa categoria?",yt="Elimina definitivamente",Pt="Rimuovi da questa categoria",x="Annulla",ne="Non ci sono piatti",[[1,"flex","items-center","justify-between"],[1,"flex","items-center"],[1,"me-1",3,"click"],e,["class","me-1"],["addItemDropdownContent",""],[3,"content"],["addDropdown",""],["tuiButton","","appearance","flat","type","button","size","m"],i,[1,"animation-speed-2",3,"ngClass"],["categoriesOptions",""],["tuiIconButton","","size","m","appearance","outline","type","button"],["tuiProgressBar","","max","100",3,"ngClass","size","value"],["class","mt-3"],["type","button","size","l","tuiButton","","appearance","flat"],[1,"text-slate-400","my-3"],["cdkDropList","",1,"items-list",3,"ngClass","cdkDropListDisabled","cdkDropListDropped"],[1,"my-2",3,"items","size","total","paginationChange"],[1,"me-1"],["role","menu"],["tuiOption","",3,"routerLink"],o,E,["tuiOption","",3,"click"],P,["openSelectionMsg",""],[4,"ngIf","ngIfElse"],b,U,H,W,[1,"mt-3"],[1,"flex","items-center",3,"formGroup","ngSubmit"],["type","submit","tuiIconButton","","appearance","flat",1,"me-2",3,"showLoader"],["formControlName","query","tuiAutoFocus","",1,"grow",3,"tuiTextfieldSize"],q,["type","text","tuiTextfield","",3,"autocomplete"],["bulkActionsDropdown",""],[1,"flex","items-center","justify-center"],[1,"me-2","text-xl"],Z,["hostedDropdown",""],["tuiButton","","type","button","appearance","outline","size","m",3,"disabled"],tt,["tuiOption",""],["type","button","tuiOption","",3,"click"],[3,"status"],et,nt,k,pt,Ot,["type","button","size","l","tuiButton","","appearance","flat",3,"click"],ft,["actions",""],["cdkDrag","",1,"border","mb-2",3,"ngClass"],[1,"flex","justify-between","items-center"],[3,"routerLink"],["style","max-width: 100px;","class","inline-block rounded me-2",3,"image",4,"ngIf"],["tuiLink","",1,"text-lg",3,"routerLink"],[1,"tui-island__category",3,"ngClass"],["cdkDragHandle","","size","m","appearance","outline","type","button","tuiIconButton",""],["role","menu",4,"ngIf"],It,Mt,["type","button","tuiOption","",3,"click",4,"ngIf"],["removeDishDropdownTemplate",""],ht,Rt,Nt,["size","l",3,"overlay","showLoader"],At,[1,"grid","grid-cols-1","md:grid-cols-3","gap-3"],["type","button","tuiButton","","appearance","secondary-destructive",3,"click"],yt,["type","button","tuiButton","","appearance","secondary",3,"click"],Pt,["type","button","tuiButton","","appearance","outline",3,"click"],x,[1,"inline-block","rounded","me-2",2,"max-width","100px",3,"image"],[1,"drag-shake"],["size","l",1,"centered",3,"ngModel","ngModelChange"],["size","m",3,"showLoader"],[1,"text-center"],ne]},template:function(i,o){if(1&i&&(t.I0R(0,"div",0)(1,"div",1)(2,"h2",2),t.qCj("click",function(){return o.search()}),t.SAx(3),t.aS0(4,3),t.k70(),t.C$Y(),t.yuY(5,pn,2,1,"span",4)(6,fn,9,5,"ng-template",null,5,t.gJz),t.I0R(8,"tui-hosted-dropdown",6,7)(10,"button",8)(11,"span",1)(12,"mat-icon"),t.OEk(13,"add"),t.C$Y(),t.I0R(14,"span"),t.aS0(15,9),t.C$Y(),t.I0R(16,"mat-icon",10),t.OEk(17,"expand_more"),t.C$Y()()()()(),t.yuY(18,Nn,20,3,"ng-template",null,11,t.gJz),t.I0R(20,"tui-hosted-dropdown",6)(21,"button",12)(22,"mat-icon"),t.OEk(23,"more_vert"),t.C$Y()()()(),t.wR5(24,"progress",13),t.yuY(25,An,9,4,"div",14)(26,Pn,16,6)(27,Ln,3,0,"button",15),t.wR5(28,"hr",16),t.I0R(29,"div",17),t.qCj("cdkDropListDropped",function(P){return o.drop(P)}),t.c53(30,Vn,17,24,null,null,mn,!1,Kn,2,1),t.C$Y(),t.I0R(33,"tui-table-pagination",18),t.qCj("paginationChange",function(P){return o.paginationChange(P)}),t.C$Y()),2&i){const E=t.Gew(7),P=t.Gew(9),b=t.Gew(19);let U,H;t.yG2(5),t.C0Y(5,null!=(U=o.data())&&null!=U.metadata&&U.metadata.total_count?5:-1),t.yG2(3),t.E7m("content",E),t.yG2(8),t.E7m("ngClass",t.S45(16,Wt,P.open)),t.yG2(4),t.E7m("content",b),t.yG2(4),t.E7m("ngClass",t.S45(18,Qn,!o.loading()))("size","s")("value",void 0),t.yG2(),t.C0Y(25,o.filtering()?25:-1),t.yG2(),t.C0Y(26,o.selecting()?26:-1),t.yG2(),t.C0Y(27,o.ordering()?27:-1),t.yG2(2),t.E7m("ngClass",t.S45(20,Jn,o.reorderEnabled()))("cdkDropListDisabled",!o.reorderEnabled()),t.yG2(),t.oho(o.items()),t.yG2(3),t.E7m("items",t.q4q(22,jn))("size",100)("total",null!==(H=null==(H=o.data())||null==H.metadata?null:H.metadata.total_count)&&void 0!==H?H:0)}},dependencies:[a.ER,at.w,at.C,Tt.qL,_t.GE,_t.Qw,p.CI,p.Kw,Ft.k,Ft.C,dn.t,cn.ms,J.A$,J.yi,J.sP,O.u_,Cn.y,ut.S,T.sl,T.sz,T.ue,T.u,T.uW,T.Wo,dt.CQ,dt.Oo,dt.cP,Tn.b,Qt.m6,Qt.gJ,mt.aS,mt.rD,f.Sk,f.Cb,O.QF,Jt.yy,Jt.Ws,Gt.Cm,Gt.w5,Gt.A3,un.WY,Xt.Gs,Xt.qA,gn.o,Kt.i,Kt.I,T.y,T._G],styles:["[_nghost-%COMP%]   .items-list.allow-reorder.cdk-drop-list-dragging[_ngcontent-%COMP%]   tui-island[cdkDrag][_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   .items-list.allow-reorder[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .items-list.allow-reorder[_ngcontent-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   [cdkDragHandle][_ngcontent-%COMP%]{cursor:move}"]})}return n})(),qn=(()=>{class n{constructor(){this.parent=null}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-list-items"]],hostAttrs:[1,"grow","flex","flex-col","md:flex-row"],inputs:{parent:"parent"},standalone:!0,features:[t.UHJ],decls:4,vars:2,consts:[[1,"flex","flex-col","grow-0","mb-5","md:me-3","md:grow"],[1,"border-solid","border-slate-200","p-2","rounded-md","border",3,"parentCategoryId"],[1,"flex","flex-col","grow-0","mb-5","md:grow"]],template:function(i,o){1&i&&(t.I0R(0,"div",0),t.wR5(1,"app-list-categories",1),t.C$Y(),t.I0R(2,"div",2),t.wR5(3,"app-list-dishes",1),t.C$Y()),2&i&&(t.yG2(),t.E7m("parentCategoryId",null==o.parent?null:o.parent.id),t.yG2(2),t.E7m("parentCategoryId",null==o.parent?null:o.parent.id))},dependencies:[p.CI,at.w,_t.GE,ln.M,Wn],encapsulation:2})}return n})();var Zn=s(4392),kt=s(1588);function ti(n,S){1&n&&t.C_f(0)}function ei(n,S){if(1&n&&t.wR5(0,"tui-svg",4),2&n){const e=t.GaO(2);t.E7m("src",e.options.icon)}}function ni(n,S){if(1&n&&(t.SAx(0),t.C_f(1,2),t.yuY(2,ei,1,1,"tui-svg",3),t.k70()),2&n){const e=S.$implicit,i=S.last;t.yG2(),t.E7m("ngTemplateOutlet",e),t.yG2(),t.E7m("ngIf",!i)}}const te=(0,B.AL)({icon:"tuiIconChevronRight",size:"m",mode:"onLight"});let ii=(()=>{class n extends G.Y{constructor(e){super(),this.options=e,this.size=this.options.size,this.items=Zn.Jh,this.mode=this.options.mode}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(te))},n.\u0275cmp=t.In1({type:n,selectors:[["tui-breadcrumbs"]],contentQueries:function(e,i,o){if(1&e&&t.szK(o,kt.S,4,t.Yw2),2&e){let E;t.wto(E=t.Gqi())&&(i.items=E)}},hostVars:1,hostBindings:function(e,i){2&e&&t.e48("data-size",i.size)},inputs:{size:"size"},features:[t.M5G([{provide:G.Y,useExisting:(0,t.wd)(()=>n)}]),t.eg9],decls:3,vars:4,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["class","t-icon",3,"src",4,"ngIf"],[1,"t-icon",3,"src"]],template:function(e,i){1&e&&(t.yuY(0,ti,1,0,"ng-container",0),t.wVc(1,"async"),t.yuY(2,ni,3,2,"ng-container",1)),2&e&&(t.E7m("ngIf",t.kDX(1,2,i.items.changes)),t.yG2(2),t.E7m("ngForOf",i.items))},dependencies:[N.Wu,O.u_,O.ay,O.XV,O.a],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:2.5rem;white-space:nowrap;font:var(--tui-font-text-s);color:var(--tui-text-01)}[data-size=l][_nghost-%COMP%]{font:var(--tui-font-text-m)}.t-icon[_ngcontent-%COMP%]{margin:0 .25rem;opacity:.4}"],changeDetection:0}),n})(),oi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.a4G({type:n}),n.\u0275inj=t.s3X({imports:[[O.MD,N.Yt,kt.s]]}),n})();var si=s(9888),ee=s(4259);function ai(n,S){if(1&n&&(t.I0R(0,"a",4),t.OEk(1),t.C$Y()),2&n){const e=S.$implicit,i=t.GaO(4);t._6D("routerLink",i.items[e].url),t.yG2(),t.oRS(" ",i.items[e].name," ")}}function _i(n,S){if(1&n&&(t.I0R(0,"tui-data-list"),t.yuY(1,ai,2,2,"a",3),t.C$Y()),2&n){const e=t.GaO(3);t.yG2(),t.E7m("tuiRepeatTimesOf",e.items.length-e.max)}}function ri(n,S){if(1&n&&(t.I0R(0,"tui-hosted-dropdown",5),t.wR5(1,"button",6),t.C$Y()),2&n){t.GaO();const e=t.Gew(1);t.E7m("content",e)}}function li(n,S){1&n&&t.yuY(0,_i,2,1,"ng-template",null,1,t.gJz)(2,ri,2,1,"tui-hosted-dropdown",2)}function ci(n,S){if(1&n&&(t.I0R(0,"a",8),t.OEk(1),t.C$Y()),2&n){const e=t.GaO().$implicit,i=t.GaO(2);t._6D("routerLink",i.items[e+i.items.length-i.max].url),t.yG2(),t.oRS(" ",i.items[e+i.items.length-i.max].name," ")}}function ui(n,S){1&n&&(t.SAx(0),t.yuY(1,ci,2,2,"a",7),t.k70())}function di(n,S){if(1&n&&(t.I0R(0,"tui-breadcrumbs"),t.yuY(1,li,3,0)(2,ui,2,0,"ng-container",0),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.C0Y(1,e.items.length>e.max?1:-1),t.yG2(),t.E7m("tuiRepeatTimesOf",e.max)}}let Ci=(()=>{class n{constructor(){this.urlTo=(0,t.uUt)(ut.S),this.items=[],this.max=1,this.includeRoot=!0}set breadcrumbs(e){this.parseBreadcrumbs(e??[]),this.max=this.items.length}parseBreadcrumbs(e){this.items=[],this.includeRoot&&this.items.push({url:"/admin/menu/",name:"Menu"}),e&&e.forEach(i=>{const o=this.urlTo.transform(i.id,"menuCategory.show");o?this.items.push({url:o,name:i.name??`no-name #${i.id}`}):console.error("Invalid url for category",{item:i,url:o})})}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-category-breadcrumbs"]],inputs:{breadcrumbs:"breadcrumbs",includeRoot:"includeRoot"},standalone:!0,features:[t.M5G([ut.S]),t.UHJ],decls:1,vars:1,consts:[[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["content",""],[3,"content",4,"tuiItem"],["tuiOption","",3,"routerLink",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["tuiOption","",3,"routerLink"],[3,"content"],["appearance","secondary","icon","tuiIconMoreHorizontal","size","xs","title","More","tuiIconButton",""],["tuiLink","",3,"routerLink",4,"tuiItem"],["tuiLink","",3,"routerLink"]],template:function(i,o){1&i&&t.yuY(0,di,3,2,"tui-breadcrumbs"),2&i&&t.C0Y(0,o.items.length>0?0:-1)},dependencies:[oi,ii,kt.S,J.A$,J.yi,J.sP,ee.U9,ee._k,a.ER,_t.GE,_t.Qw,p.CI,p.Kw,at.w,at.C,si.Q7,T.y],changeDetection:0})}return n})();function gi(n,S){1&n&&t.wR5(0,"tui-loader",0),2&n&&t.E7m("showLoader",!0)("size","xl")}function Ei(n,S){if(1&n){const e=t.KQA();t.I0R(0,"app-category-details",1),t.qCj("categoryChange",function(o){t.usT(e);const E=t.GaO();return t.CGJ(E.category.set(o))}),t.wR5(1,"app-category-breadcrumbs",2),t.C$Y(),t.wR5(2,"app-list-items",3)}if(2&n){const e=t.GaO();t.E7m("category",e.category()),t.yG2(),t.E7m("breadcrumbs",e.breadcrumbs()),t.yG2(),t.E7m("parent",e.category())}}function Si(n,S){if(1&n&&(t.I0R(0,"h1"),t.aS0(1,4),t.C$Y(),t.I0R(2,"a",5)(3,"span"),t.aS0(4,6),t.C$Y()()),2&n){const e=t.GaO();t.yG2(),t.oBb(e.categoryId),t.Ylm(1)}}let Ti=(()=>{class n{constructor(){this.route=(0,t.uUt)(a.gV),this.router=(0,t.uUt)(a.E5),this.categoriesService=(0,t.uUt)(_.S),this.dishesService=(0,t.uUt)(r.k),this.destroy$=(0,t.uUt)(c.UF),this.notifications=(0,t.uUt)(d.E),this.categoryId=null,this.loadingData=(0,t.OCB)(!1),this.loadingCategory=(0,t.OCB)(!1),this.loading=(0,t.S6b)(()=>this.loadingCategory()||this.loadingData()),this.category=(0,t.OCB)(null),this.data=(0,t.OCB)(null),this.breadcrumbs=(0,t.S6b)(()=>this.data()?.breadcrumbs??[]),this.max=1}ngOnInit(){this.route.params.pipe((0,C.a)(this.destroy$)).subscribe(e=>{this.categoryId=Number(e.category_id),console.assert(!isNaN(this.categoryId)&&this.categoryId>0,"Category id is required"),this.loadCategory(),this.loadData()})}loadCategory(e=this.categoryId){console.assert(!isNaN(e)&&e>0,"Category id is required"),this.loadingCategory.set(!0),this.categoriesService.show(e).pipe((0,C.a)(this.destroy$),(0,l.U)(()=>this.loadingCategory.set(!1))).subscribe({next:i=>this.setCategory(i),error:i=>{this.setCategory(null),this.notifications.error((0,g.mk)(i)||"Qualcosa \xE8 andato storto. Riprova pi\xF9 tardi.")}})}loadData(e=this.categoryId){console.assert(!isNaN(e)&&e>0,"Category id is required"),this.loadingData.set(!0),this.categoriesService.dashboardData(e).pipe((0,C.a)(this.destroy$),(0,l.U)(()=>this.loadingData.set(!1))).subscribe({next:i=>this.data.set(i),error:i=>this.notifications.error((0,g.mk)(i)||"Qualcosa \xE8 andato storto. Riprova pi\xF9 tardi.")})}setCategory(e){this.category.set(e)}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-category-dashboard"]],hostAttrs:[1,"grow","flex","flex-col"],standalone:!0,features:[t.M5G([c.UF]),t.UHJ],decls:4,vars:1,consts:()=>{let e,i;return e="Categoria #" + "\ufffd0\ufffd" + " non trovata.",i="Torna al men\xF9",[[3,"showLoader","size"],[3,"category","categoryChange"],["breadcrumb","",1,"mb-3",3,"breadcrumbs"],[3,"parent"],e,["tuiLink","","routerLink","/admin/menu"],i]},template:function(i,o){1&i&&(t.yuY(0,gi,1,2,"tui-loader",0)(1,Ei,3,3)(2,Si,5,1),t.wR5(3,"router-outlet")),2&i&&t.C0Y(0,o.loading()?0:o.category()?1:2)},dependencies:[rn,f.Sk,f.Cb,qn,a.cP,Ci,at.w,at.C,a.ER],changeDetection:0})}return n})()},4824:(L,u,s)=>{"use strict";s.d(u,{o:()=>a});var t=s(8400),c=s(2264);class a extends t.w{constructor(r){super(r),this.name=r.name,this.description=r.description,this.status=r.status,this.other=r.other,this.translations={...r.translations},r.image&&(this.image=new c.W(r.image))}}},5891:(L,u,s)=>{"use strict";s.d(u,{S:()=>d});var t=s(8400),c=s(2264),a=s(355),_=s(4824),r=s(532);class d extends t.w{constructor(l){super(l),this.name=l.name,this.description=l.description,this.status=l.status,this.price=l.price,this.translations=l.translations,this.images=l.images?l.images.map(g=>new c.W(g)):[],this.suggestions=l.suggestions?l.suggestions.map(g=>new d(g)):[],this.tags=l.tags?l.tags.map(g=>new a.E(g)):[],this.allergens=l.allergens?l.allergens.map(g=>new _.o(g)):[],this.ingredients=l.ingredients?l.ingredients.map(g=>new r.e(g)):[]}}},532:(L,u,s)=>{"use strict";s.d(u,{e:()=>a});var t=s(8400),c=s(2264);class a extends t.w{constructor(r){super(r),this.name=r.name,this.description=r.description,this.status=r.status,this.other=r.other,this.translations={...r.translations},r.image&&(this.image=new c.W(r.image))}}},355:(L,u,s)=>{"use strict";s.d(u,{E:()=>a});var t=s(8400),c=s(2264);class a extends t.w{constructor(r){super(r),this.name=r.name,this.description=r.description,this.status=r.status,this.other=r.other,this.translations={...r.translations},this.color=r.color,r.image&&(this.image=new c.W(r.image))}}},8676:(L,u,s)=>{"use strict";s.d(u,{k:()=>r});var t=s(6012),c=s(5891),a=s(4704),_=s(4496);let r=(()=>{class d extends t.s{constructor(){super(c.S,"admin/menu/dishes")}bulkUpdateStatus(l){return this.patch(`bulk_status/${l.status}`,{dish_ids:l.dish_ids})}relocate(l){return this.patch("relocate",l)}updatePrices(l){return(null==l.filters||null==l.filters)&&delete l.filters,this.patch("update_prices",l)}copy(l,g){return this.post(`${l}/copy`,g).pipe((0,a.k)(m=>this.mapItem(m)))}move(l,g){return this.patch(`${l}/move`,g).pipe((0,a.k)(m=>this.mapItem(m)))}moveIngredient(l,g,m){return this.patch(`${l}/ingredients/${g}/move`,{to_index:m}).pipe((0,a.k)(h=>this.mapItem(h)))}moveTag(l,g,m){return this.patch(`${l}/tags/${g}/move`,{to_index:m}).pipe((0,a.k)(h=>this.mapItem(h)))}moveAllergen(l,g,m){return this.patch(`${l}/allergens/${g}/move`,{to_index:m}).pipe((0,a.k)(h=>this.mapItem(h)))}updateStatus(l,g){return this.patch(`${l}/status/${g}`,{}).pipe((0,a.k)(m=>this.mapItem(m)))}addIngredient(l,g){return this.post(`${l}/ingredients/${g}`,{}).pipe((0,a.k)(m=>this.mapItem(m)))}removeIngredient(l,g){return this.delete(`${l}/ingredients/${g}`).pipe((0,a.k)(m=>this.mapItem(m)))}addTag(l,g){return this.post(`${l}/tags/${g}`,{}).pipe((0,a.k)(m=>this.mapItem(m)))}removeTag(l,g){return this.delete(`${l}/tags/${g}`).pipe((0,a.k)(m=>this.mapItem(m)))}addAllergen(l,g){return this.post(`${l}/allergens/${g}`,{}).pipe((0,a.k)(m=>this.mapItem(m)))}removeAllergen(l,g){return this.delete(`${l}/allergens/${g}`).pipe((0,a.k)(m=>this.mapItem(m)))}references(l){return this.get(`${l}/references`).pipe((0,a.k)(g=>g))}addSuggestion(l,g){return this.post(`${l}/suggestions/${g}`,{}).pipe((0,a.k)(m=>this.mapItem(m)))}removeSuggestion(l,g){return this.delete(`${l}/suggestions/${g}`).pipe((0,a.k)(m=>this.mapItem(m)))}static#t=this.\u0275fac=function(g){return new(g||d)};static#e=this.\u0275prov=_.wxM({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()},4868:L=>{"use strict";var u={single_source_shortest_paths:function(s,t,c){var a={},_={};_[t]=0;var d,C,l,g,m,p,r=u.PriorityQueue.make();for(r.push(t,0);!r.empty();)for(l in g=(d=r.pop()).cost,m=s[C=d.value]||{})m.hasOwnProperty(l)&&(p=g+m[l],(typeof _[l]>"u"||_[l]>p)&&(_[l]=p,r.push(l,p),a[l]=C));if(typeof c<"u"&&typeof _[c]>"u"){var w=["Could not find a path from ",t," to ",c,"."].join("");throw new Error(w)}return a},extract_shortest_path_from_predecessor_list:function(s,t){for(var c=[],a=t;a;)c.push(a),a=s[a];return c.reverse(),c},find_path:function(s,t,c){var a=u.single_source_shortest_paths(s,t,c);return u.extract_shortest_path_from_predecessor_list(a,c)},PriorityQueue:{make:function(s){var a,t=u.PriorityQueue,c={};for(a in s=s||{},t)t.hasOwnProperty(a)&&(c[a]=t[a]);return c.queue=[],c.sorter=s.sorter||t.default_sorter,c},default_sorter:function(s,t){return s.cost-t.cost},push:function(s,t){this.queue.push({value:s,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};L.exports=u},8940:L=>{"use strict";L.exports=function(s){for(var t=[],c=s.length,a=0;a<c;a++){var _=s.charCodeAt(a);if(_>=55296&&_<=56319&&c>a+1){var r=s.charCodeAt(a+1);r>=56320&&r<=57343&&(_=1024*(_-55296)+r-56320+65536,a+=1)}_<128?t.push(_):_<2048?(t.push(_>>6|192),t.push(63&_|128)):_<55296||_>=57344&&_<65536?(t.push(_>>12|224),t.push(_>>6&63|128),t.push(63&_|128)):_>=65536&&_<=1114111?(t.push(_>>18|240),t.push(_>>12&63|128),t.push(_>>6&63|128),t.push(63&_|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},1956:(L,u,s)=>{const c=s(8072),a=s(384),_=s(2384),r=s(9944);function d(C,l,g,m,h){const p=[].slice.call(arguments,1),T=p.length,$="function"==typeof p[T-1];if(!$&&!c())throw new Error("Callback required as last argument");if(!$){if(T<1)throw new Error("Too few arguments provided");return 1===T?(g=l,l=m=void 0):2===T&&!l.getContext&&(m=g,g=l,l=void 0),new Promise(function(w,F){try{const A=a.create(g,m);w(C(A,l,m))}catch(A){F(A)}})}if(T<2)throw new Error("Too few arguments provided");2===T?(h=g,g=l,l=m=void 0):3===T&&(l.getContext&&typeof h>"u"?(h=m,m=void 0):(h=m,m=g,g=l,l=void 0));try{const w=a.create(g,m);h(null,C(w,l,m))}catch(w){h(w)}}u.gH=d.bind(null,_.render),u.g7=d.bind(null,_.renderToDataURL),u.toString=d.bind(null,function(C,l,g){return r.render(C,g)})},8072:L=>{L.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},4936:(L,u,s)=>{const t=s(5744).getSymbolSize;u.getRowColCoords=function(a){if(1===a)return[];const _=Math.floor(a/7)+2,r=t(a),d=145===r?26:2*Math.ceil((r-13)/(2*_-2)),C=[r-7];for(let l=1;l<_-1;l++)C[l]=C[l-1]-d;return C.push(6),C.reverse()},u.getPositions=function(a){const _=[],r=u.getRowColCoords(a),d=r.length;for(let C=0;C<d;C++)for(let l=0;l<d;l++)0===C&&0===l||0===C&&l===d-1||C===d-1&&0===l||_.push([r[C],r[l]]);return _}},4600:(L,u,s)=>{const t=s(3612),c=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(_){this.mode=t.ALPHANUMERIC,this.data=_}a.getBitsLength=function(r){return 11*Math.floor(r/2)+r%2*6},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(r){let d;for(d=0;d+2<=this.data.length;d+=2){let C=45*c.indexOf(this.data[d]);C+=c.indexOf(this.data[d+1]),r.put(C,11)}this.data.length%2&&r.put(c.indexOf(this.data[d]),6)},L.exports=a},8980:L=>{function u(){this.buffer=[],this.length=0}u.prototype={get:function(s){const t=Math.floor(s/8);return 1==(this.buffer[t]>>>7-s%8&1)},put:function(s,t){for(let c=0;c<t;c++)this.putBit(1==(s>>>t-c-1&1))},getLengthInBits:function(){return this.length},putBit:function(s){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),s&&(this.buffer[t]|=128>>>this.length%8),this.length++}},L.exports=u},664:L=>{function u(s){if(!s||s<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=s,this.data=new Uint8Array(s*s),this.reservedBit=new Uint8Array(s*s)}u.prototype.set=function(s,t,c,a){const _=s*this.size+t;this.data[_]=c,a&&(this.reservedBit[_]=!0)},u.prototype.get=function(s,t){return this.data[s*this.size+t]},u.prototype.xor=function(s,t,c){this.data[s*this.size+t]^=c},u.prototype.isReserved=function(s,t){return this.reservedBit[s*this.size+t]},L.exports=u},4692:(L,u,s)=>{const t=s(8940),c=s(3612);function a(_){this.mode=c.BYTE,"string"==typeof _&&(_=t(_)),this.data=new Uint8Array(_)}a.getBitsLength=function(r){return 8*r},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(_){for(let r=0,d=this.data.length;r<d;r++)_.put(this.data[r],8)},L.exports=a},2136:(L,u,s)=>{const t=s(5120),c=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];u.getBlocksCount=function(r,d){switch(d){case t.L:return c[4*(r-1)+0];case t.M:return c[4*(r-1)+1];case t.Q:return c[4*(r-1)+2];case t.H:return c[4*(r-1)+3];default:return}},u.getTotalCodewordsCount=function(r,d){switch(d){case t.L:return a[4*(r-1)+0];case t.M:return a[4*(r-1)+1];case t.Q:return a[4*(r-1)+2];case t.H:return a[4*(r-1)+3];default:return}}},5120:(L,u)=>{u.L={bit:1},u.M={bit:0},u.Q={bit:3},u.H={bit:2},u.isValid=function(c){return c&&typeof c.bit<"u"&&c.bit>=0&&c.bit<4},u.from=function(c,a){if(u.isValid(c))return c;try{return function s(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return u.L;case"m":case"medium":return u.M;case"q":case"quartile":return u.Q;case"h":case"high":return u.H;default:throw new Error("Unknown EC Level: "+t)}}(c)}catch{return a}}},8984:(L,u,s)=>{const t=s(5744).getSymbolSize;u.getPositions=function(_){const r=t(_);return[[0,0],[r-7,0],[0,r-7]]}},8196:(L,u,s)=>{const t=s(5744),_=t.getBCHDigit(1335);u.getEncodedBits=function(d,C){const l=d.bit<<3|C;let g=l<<10;for(;t.getBCHDigit(g)-_>=0;)g^=1335<<t.getBCHDigit(g)-_;return 21522^(l<<10|g)}},6764:(L,u)=>{const s=new Uint8Array(512),t=new Uint8Array(256);(function(){let a=1;for(let _=0;_<255;_++)s[_]=a,t[a]=_,a<<=1,256&a&&(a^=285);for(let _=255;_<512;_++)s[_]=s[_-255]})(),u.log=function(a){if(a<1)throw new Error("log("+a+")");return t[a]},u.exp=function(a){return s[a]},u.mul=function(a,_){return 0===a||0===_?0:s[t[a]+t[_]]}},6396:(L,u,s)=>{const t=s(3612),c=s(5744);function a(_){this.mode=t.KANJI,this.data=_}a.getBitsLength=function(r){return 13*r},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(_){let r;for(r=0;r<this.data.length;r++){let d=c.toSJIS(this.data[r]);if(d>=33088&&d<=40956)d-=33088;else{if(!(d>=57408&&d<=60351))throw new Error("Invalid SJIS character: "+this.data[r]+"\nMake sure your charset is UTF-8");d-=49472}d=192*(d>>>8&255)+(255&d),_.put(d,13)}},L.exports=a},9540:(L,u)=>{u.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function t(c,a,_){switch(c){case u.Patterns.PATTERN000:return(a+_)%2==0;case u.Patterns.PATTERN001:return a%2==0;case u.Patterns.PATTERN010:return _%3==0;case u.Patterns.PATTERN011:return(a+_)%3==0;case u.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(_/3))%2==0;case u.Patterns.PATTERN101:return a*_%2+a*_%3==0;case u.Patterns.PATTERN110:return(a*_%2+a*_%3)%2==0;case u.Patterns.PATTERN111:return(a*_%3+(a+_)%2)%2==0;default:throw new Error("bad maskPattern:"+c)}}u.isValid=function(a){return null!=a&&""!==a&&!isNaN(a)&&a>=0&&a<=7},u.from=function(a){return u.isValid(a)?parseInt(a,10):void 0},u.getPenaltyN1=function(a){const _=a.size;let r=0,d=0,C=0,l=null,g=null;for(let m=0;m<_;m++){d=C=0,l=g=null;for(let h=0;h<_;h++){let p=a.get(m,h);p===l?d++:(d>=5&&(r+=d-5+3),l=p,d=1),p=a.get(h,m),p===g?C++:(C>=5&&(r+=C-5+3),g=p,C=1)}d>=5&&(r+=d-5+3),C>=5&&(r+=C-5+3)}return r},u.getPenaltyN2=function(a){const _=a.size;let r=0;for(let d=0;d<_-1;d++)for(let C=0;C<_-1;C++){const l=a.get(d,C)+a.get(d,C+1)+a.get(d+1,C)+a.get(d+1,C+1);(4===l||0===l)&&r++}return 3*r},u.getPenaltyN3=function(a){const _=a.size;let r=0,d=0,C=0;for(let l=0;l<_;l++){d=C=0;for(let g=0;g<_;g++)d=d<<1&2047|a.get(l,g),g>=10&&(1488===d||93===d)&&r++,C=C<<1&2047|a.get(g,l),g>=10&&(1488===C||93===C)&&r++}return 40*r},u.getPenaltyN4=function(a){let _=0;const r=a.data.length;for(let C=0;C<r;C++)_+=a.data[C];return 10*Math.abs(Math.ceil(100*_/r/5)-10)},u.applyMask=function(a,_){const r=_.size;for(let d=0;d<r;d++)for(let C=0;C<r;C++)_.isReserved(C,d)||_.xor(C,d,t(a,C,d))},u.getBestMask=function(a,_){const r=Object.keys(u.Patterns).length;let d=0,C=1/0;for(let l=0;l<r;l++){_(l),u.applyMask(l,a);const g=u.getPenaltyN1(a)+u.getPenaltyN2(a)+u.getPenaltyN3(a)+u.getPenaltyN4(a);u.applyMask(l,a),g<C&&(C=g,d=l)}return d}},3612:(L,u,s)=>{const t=s(8656),c=s(8768);u.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},u.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},u.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},u.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},u.MIXED={bit:-1},u.getCharCountIndicator=function(r,d){if(!r.ccBits)throw new Error("Invalid mode: "+r);if(!t.isValid(d))throw new Error("Invalid version: "+d);return d>=1&&d<10?r.ccBits[0]:d<27?r.ccBits[1]:r.ccBits[2]},u.getBestModeForData=function(r){return c.testNumeric(r)?u.NUMERIC:c.testAlphanumeric(r)?u.ALPHANUMERIC:c.testKanji(r)?u.KANJI:u.BYTE},u.toString=function(r){if(r&&r.id)return r.id;throw new Error("Invalid mode")},u.isValid=function(r){return r&&r.bit&&r.ccBits},u.from=function(r,d){if(u.isValid(r))return r;try{return function a(_){if("string"!=typeof _)throw new Error("Param is not a string");switch(_.toLowerCase()){case"numeric":return u.NUMERIC;case"alphanumeric":return u.ALPHANUMERIC;case"kanji":return u.KANJI;case"byte":return u.BYTE;default:throw new Error("Unknown mode: "+_)}}(r)}catch{return d}}},4983:(L,u,s)=>{const t=s(3612);function c(a){this.mode=t.NUMERIC,this.data=a.toString()}c.getBitsLength=function(_){return 10*Math.floor(_/3)+(_%3?_%3*3+1:0)},c.prototype.getLength=function(){return this.data.length},c.prototype.getBitsLength=function(){return c.getBitsLength(this.data.length)},c.prototype.write=function(_){let r,d,C;for(r=0;r+3<=this.data.length;r+=3)d=this.data.substr(r,3),C=parseInt(d,10),_.put(C,10);const l=this.data.length-r;l>0&&(d=this.data.substr(r),C=parseInt(d,10),_.put(C,3*l+1))},L.exports=c},7892:(L,u,s)=>{const t=s(6764);u.mul=function(a,_){const r=new Uint8Array(a.length+_.length-1);for(let d=0;d<a.length;d++)for(let C=0;C<_.length;C++)r[d+C]^=t.mul(a[d],_[C]);return r},u.mod=function(a,_){let r=new Uint8Array(a);for(;r.length-_.length>=0;){const d=r[0];for(let l=0;l<_.length;l++)r[l]^=t.mul(_[l],d);let C=0;for(;C<r.length&&0===r[C];)C++;r=r.slice(C)}return r},u.generateECPolynomial=function(a){let _=new Uint8Array([1]);for(let r=0;r<a;r++)_=u.mul(_,new Uint8Array([1,t.exp(r)]));return _}},384:(L,u,s)=>{const t=s(5744),c=s(5120),a=s(8980),_=s(664),r=s(4936),d=s(8984),C=s(9540),l=s(2136),g=s(4176),m=s(6544),h=s(8196),p=s(3612),T=s(4168);function B(f,N,R){const I=f.size,G=h.getEncodedBits(N,R);let O,M;for(O=0;O<15;O++)M=1==(G>>O&1),f.set(O<6?O:O<8?O+1:I-15+O,8,M,!0),f.set(8,O<8?I-O-1:O<9?15-O-1+1:15-O-1,M,!0);f.set(I-8,8,1,!0)}function X(f,N,R,I){let G;if(Array.isArray(f))G=T.fromArray(f);else{if("string"!=typeof f)throw new Error("Invalid data");{let it=N;if(!it){const rt=T.rawSplit(f);it=m.getBestVersionForData(rt,R)}G=T.fromString(f,it||40)}}const O=m.getBestVersionForData(G,R);if(!O)throw new Error("The amount of data is too big to be stored in a QR Code");if(N){if(N<O)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+O+".\n")}else N=O;const M=function y(f,N,R){const I=new a;R.forEach(function(v){I.put(v.mode.bit,4),I.put(v.getLength(),p.getCharCountIndicator(v.mode,f)),v.write(I)});const M=8*(t.getSymbolTotalCodewords(f)-l.getTotalCodewordsCount(f,N));for(I.getLengthInBits()+4<=M&&I.put(0,4);I.getLengthInBits()%8!=0;)I.putBit(0);const Y=(M-I.getLengthInBits())/8;for(let v=0;v<Y;v++)I.put(v%2?17:236,8);return function V(f,N,R){const I=t.getSymbolTotalCodewords(N),O=I-l.getTotalCodewordsCount(N,R),M=l.getBlocksCount(N,R),v=M-I%M,it=Math.floor(I/M),rt=Math.floor(O/M),Yt=rt+1,Lt=it-rt,Bt=new g(Lt);let Ct=0;const lt=new Array(M),gt=new Array(M);let Dt=0;const wt=new Uint8Array(f.buffer);for(let j=0;j<M;j++){const Et=j<v?rt:Yt;lt[j]=wt.slice(Ct,Ct+Et),gt[j]=Bt.encode(lt[j]),Ct+=Et,Dt=Math.max(Dt,Et)}const ct=new Uint8Array(I);let K,Q,$t=0;for(K=0;K<Dt;K++)for(Q=0;Q<M;Q++)K<lt[Q].length&&(ct[$t++]=lt[Q][K]);for(K=0;K<Lt;K++)for(Q=0;Q<M;Q++)ct[$t++]=gt[Q][K];return ct}(I,f,N)}(N,R,G),Y=t.getSymbolSize(N),v=new _(Y);return function $(f,N){const R=f.size,I=d.getPositions(N);for(let G=0;G<I.length;G++){const O=I[G][0],M=I[G][1];for(let Y=-1;Y<=7;Y++)if(!(O+Y<=-1||R<=O+Y))for(let v=-1;v<=7;v++)M+v<=-1||R<=M+v||f.set(O+Y,M+v,Y>=0&&Y<=6&&(0===v||6===v)||v>=0&&v<=6&&(0===Y||6===Y)||Y>=2&&Y<=4&&v>=2&&v<=4,!0)}}(v,N),function w(f){const N=f.size;for(let R=8;R<N-8;R++){const I=R%2==0;f.set(R,6,I,!0),f.set(6,R,I,!0)}}(v),function F(f,N){const R=r.getPositions(N);for(let I=0;I<R.length;I++){const G=R[I][0],O=R[I][1];for(let M=-2;M<=2;M++)for(let Y=-2;Y<=2;Y++)f.set(G+M,O+Y,-2===M||2===M||-2===Y||2===Y||0===M&&0===Y,!0)}}(v,N),B(v,R,0),N>=7&&function A(f,N){const R=f.size,I=m.getEncodedBits(N);let G,O,M;for(let Y=0;Y<18;Y++)G=Math.floor(Y/3),O=Y%3+R-8-3,M=1==(I>>Y&1),f.set(G,O,M,!0),f.set(O,G,M,!0)}(v,N),function D(f,N){const R=f.size;let I=-1,G=R-1,O=7,M=0;for(let Y=R-1;Y>0;Y-=2)for(6===Y&&Y--;;){for(let v=0;v<2;v++)if(!f.isReserved(G,Y-v)){let it=!1;M<N.length&&(it=1==(N[M]>>>O&1)),f.set(G,Y-v,it),O--,-1===O&&(M++,O=7)}if(G+=I,G<0||R<=G){G-=I,I=-I;break}}}(v,M),isNaN(I)&&(I=C.getBestMask(v,B.bind(null,v,R))),C.applyMask(I,v),B(v,R,I),{modules:v,version:N,errorCorrectionLevel:R,maskPattern:I,segments:G}}u.create=function(N,R){if(typeof N>"u"||""===N)throw new Error("No input text");let G,O,I=c.M;return typeof R<"u"&&(I=c.from(R.errorCorrectionLevel,c.M),G=m.from(R.version),O=C.from(R.maskPattern),R.toSJISFunc&&t.setToSJISFunction(R.toSJISFunc)),X(N,G,I,O)}},4176:(L,u,s)=>{const t=s(7892);function c(a){this.genPoly=void 0,this.degree=a,this.degree&&this.initialize(this.degree)}c.prototype.initialize=function(_){this.degree=_,this.genPoly=t.generateECPolynomial(this.degree)},c.prototype.encode=function(_){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(_.length+this.degree);r.set(_);const d=t.mod(r,this.genPoly),C=this.degree-d.length;if(C>0){const l=new Uint8Array(this.degree);return l.set(d,C),l}return d},L.exports=c},8768:(L,u)=>{const s="[0-9]+";let c="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";c=c.replace(/u/g,"\\u");const a="(?:(?![A-Z0-9 $%*+\\-./:]|"+c+")(?:.|[\r\n]))+";u.KANJI=new RegExp(c,"g"),u.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),u.BYTE=new RegExp(a,"g"),u.NUMERIC=new RegExp(s,"g"),u.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const _=new RegExp("^"+c+"$"),r=new RegExp("^"+s+"$"),d=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");u.testKanji=function(l){return _.test(l)},u.testNumeric=function(l){return r.test(l)},u.testAlphanumeric=function(l){return d.test(l)}},4168:(L,u,s)=>{const t=s(3612),c=s(4983),a=s(4600),_=s(4692),r=s(6396),d=s(8768),C=s(5744),l=s(4868);function g(A){return unescape(encodeURIComponent(A)).length}function m(A,B,D){const y=[];let V;for(;null!==(V=A.exec(D));)y.push({data:V[0],index:V.index,mode:B,length:V[0].length});return y}function h(A){const B=m(d.NUMERIC,t.NUMERIC,A),D=m(d.ALPHANUMERIC,t.ALPHANUMERIC,A);let y,V;return C.isKanjiModeEnabled()?(y=m(d.BYTE,t.BYTE,A),V=m(d.KANJI,t.KANJI,A)):(y=m(d.BYTE_KANJI,t.BYTE,A),V=[]),B.concat(D,y,V).sort(function(f,N){return f.index-N.index}).map(function(f){return{data:f.data,mode:f.mode,length:f.length}})}function p(A,B){switch(B){case t.NUMERIC:return c.getBitsLength(A);case t.ALPHANUMERIC:return a.getBitsLength(A);case t.KANJI:return r.getBitsLength(A);case t.BYTE:return _.getBitsLength(A)}}function F(A,B){let D;const y=t.getBestModeForData(A);if(D=t.from(B,y),D!==t.BYTE&&D.bit<y.bit)throw new Error('"'+A+'" cannot be encoded with mode '+t.toString(D)+".\n Suggested mode is: "+t.toString(y));switch(D===t.KANJI&&!C.isKanjiModeEnabled()&&(D=t.BYTE),D){case t.NUMERIC:return new c(A);case t.ALPHANUMERIC:return new a(A);case t.KANJI:return new r(A);case t.BYTE:return new _(A)}}u.fromArray=function(B){return B.reduce(function(D,y){return"string"==typeof y?D.push(F(y,null)):y.data&&D.push(F(y.data,y.mode)),D},[])},u.fromString=function(B,D){const V=function $(A){const B=[];for(let D=0;D<A.length;D++){const y=A[D];switch(y.mode){case t.NUMERIC:B.push([y,{data:y.data,mode:t.ALPHANUMERIC,length:y.length},{data:y.data,mode:t.BYTE,length:y.length}]);break;case t.ALPHANUMERIC:B.push([y,{data:y.data,mode:t.BYTE,length:y.length}]);break;case t.KANJI:B.push([y,{data:y.data,mode:t.BYTE,length:g(y.data)}]);break;case t.BYTE:B.push([{data:y.data,mode:t.BYTE,length:g(y.data)}])}}return B}(h(B,C.isKanjiModeEnabled())),X=function w(A,B){const D={},y={start:{}};let V=["start"];for(let X=0;X<A.length;X++){const f=A[X],N=[];for(let R=0;R<f.length;R++){const I=f[R],G=""+X+R;N.push(G),D[G]={node:I,lastCount:0},y[G]={};for(let O=0;O<V.length;O++){const M=V[O];D[M]&&D[M].node.mode===I.mode?(y[M][G]=p(D[M].lastCount+I.length,I.mode)-p(D[M].lastCount,I.mode),D[M].lastCount+=I.length):(D[M]&&(D[M].lastCount=I.length),y[M][G]=p(I.length,I.mode)+4+t.getCharCountIndicator(I.mode,B))}}V=N}for(let X=0;X<V.length;X++)y[V[X]].end=0;return{map:y,table:D}}(V,D),f=l.find_path(X.map,"start","end"),N=[];for(let R=1;R<f.length-1;R++)N.push(X.table[f[R]].node);return u.fromArray(function T(A){return A.reduce(function(B,D){const y=B.length-1>=0?B[B.length-1]:null;return y&&y.mode===D.mode?(B[B.length-1].data+=D.data,B):(B.push(D),B)},[])}(N))},u.rawSplit=function(B){return u.fromArray(h(B,C.isKanjiModeEnabled()))}},5744:(L,u)=>{let s;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];u.getSymbolSize=function(a){if(!a)throw new Error('"version" cannot be null or undefined');if(a<1||a>40)throw new Error('"version" should be in range from 1 to 40');return 4*a+17},u.getSymbolTotalCodewords=function(a){return t[a]},u.getBCHDigit=function(c){let a=0;for(;0!==c;)a++,c>>>=1;return a},u.setToSJISFunction=function(a){if("function"!=typeof a)throw new Error('"toSJISFunc" is not a valid function.');s=a},u.isKanjiModeEnabled=function(){return typeof s<"u"},u.toSJIS=function(a){return s(a)}},8656:(L,u)=>{u.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}},6544:(L,u,s)=>{const t=s(5744),c=s(2136),a=s(5120),_=s(3612),r=s(8656),C=t.getBCHDigit(7973);function g(p,T){return _.getCharCountIndicator(p,T)+4}function m(p,T){let $=0;return p.forEach(function(w){const F=g(w.mode,T);$+=F+w.getBitsLength()}),$}u.from=function(T,$){return r.isValid(T)?parseInt(T,10):$},u.getCapacity=function(T,$,w){if(!r.isValid(T))throw new Error("Invalid QR Code version");typeof w>"u"&&(w=_.BYTE);const B=8*(t.getSymbolTotalCodewords(T)-c.getTotalCodewordsCount(T,$));if(w===_.MIXED)return B;const D=B-g(w,T);switch(w){case _.NUMERIC:return Math.floor(D/10*3);case _.ALPHANUMERIC:return Math.floor(D/11*2);case _.KANJI:return Math.floor(D/13);default:return Math.floor(D/8)}},u.getBestVersionForData=function(T,$){let w;const F=a.from($,a.M);if(Array.isArray(T)){if(T.length>1)return function h(p,T){for(let $=1;$<=40;$++)if(m(p,$)<=u.getCapacity($,T,_.MIXED))return $}(T,F);if(0===T.length)return 1;w=T[0]}else w=T;return function l(p,T,$){for(let w=1;w<=40;w++)if(T<=u.getCapacity(w,$,p))return w}(w.mode,w.getLength(),F)},u.getEncodedBits=function(T){if(!r.isValid(T)||T<7)throw new Error("Invalid QR Code version");let $=T<<12;for(;t.getBCHDigit($)-C>=0;)$^=7973<<t.getBCHDigit($)-C;return T<<12|$}},2384:(L,u,s)=>{const t=s(3848);u.render=function(r,d,C){let l=C,g=d;typeof l>"u"&&(!d||!d.getContext)&&(l=d,d=void 0),d||(g=function a(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}()),l=t.getOptions(l);const m=t.getImageWidth(r.modules.size,l),h=g.getContext("2d"),p=h.createImageData(m,m);return t.qrToImageData(p.data,r,l),function c(_,r,d){_.clearRect(0,0,r.width,r.height),r.style||(r.style={}),r.height=d,r.width=d,r.style.height=d+"px",r.style.width=d+"px"}(h,g,m),h.putImageData(p,0,0),g},u.renderToDataURL=function(r,d,C){let l=C;return typeof l>"u"&&(!d||!d.getContext)&&(l=d,d=void 0),l||(l={}),u.render(r,d,l).toDataURL(l.type||"image/png",(l.rendererOpts||{}).quality)}},9944:(L,u,s)=>{const t=s(3848);function c(r,d){const C=r.a/255,l=d+'="'+r.hex+'"';return C<1?l+" "+d+'-opacity="'+C.toFixed(2).slice(1)+'"':l}function a(r,d,C){let l=r+d;return typeof C<"u"&&(l+=" "+C),l}u.render=function(d,C,l){const g=t.getOptions(C),m=d.modules.size,h=d.modules.data,p=m+2*g.margin,T=g.color.light.a?"<path "+c(g.color.light,"fill")+' d="M0 0h'+p+"v"+p+'H0z"/>':"",$="<path "+c(g.color.dark,"stroke")+' d="'+function _(r,d,C){let l="",g=0,m=!1,h=0;for(let p=0;p<r.length;p++){const T=Math.floor(p%d),$=Math.floor(p/d);!T&&!m&&(m=!0),r[p]?(h++,p>0&&T>0&&r[p-1]||(l+=m?a("M",T+C,.5+$+C):a("m",g,0),g=0,m=!1),T+1<d&&r[p+1]||(l+=a("h",h),h=0)):g++}return l}(h,m,g.margin)+'"/>',A='<svg xmlns="http://www.w3.org/2000/svg" '+(g.width?'width="'+g.width+'" height="'+g.width+'" ':"")+'viewBox="0 0 '+p+" "+p+'" shape-rendering="crispEdges">'+T+$+"</svg>\n";return"function"==typeof l&&l(null,A),A}},3848:(L,u)=>{function s(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)throw new Error("Color should be defined as hex string");let c=t.slice().replace("#","").split("");if(c.length<3||5===c.length||c.length>8)throw new Error("Invalid hex color: "+t);(3===c.length||4===c.length)&&(c=Array.prototype.concat.apply([],c.map(function(_){return[_,_]}))),6===c.length&&c.push("F","F");const a=parseInt(c.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:255&a,hex:"#"+c.slice(0,6).join("")}}u.getOptions=function(c){c||(c={}),c.color||(c.color={});const _=c.width&&c.width>=21?c.width:void 0;return{width:_,scale:_?4:c.scale||4,margin:typeof c.margin>"u"||null===c.margin||c.margin<0?4:c.margin,color:{dark:s(c.color.dark||"#000000ff"),light:s(c.color.light||"#ffffffff")},type:c.type,rendererOpts:c.rendererOpts||{}}},u.getScale=function(c,a){return a.width&&a.width>=c+2*a.margin?a.width/(c+2*a.margin):a.scale},u.getImageWidth=function(c,a){const _=u.getScale(c,a);return Math.floor((c+2*a.margin)*_)},u.qrToImageData=function(c,a,_){const r=a.modules.size,d=a.modules.data,C=u.getScale(r,_),l=Math.floor((r+2*_.margin)*C),g=_.margin*C,m=[_.color.light,_.color.dark];for(let h=0;h<l;h++)for(let p=0;p<l;p++){let T=4*(h*l+p),$=_.color.light;h>=g&&p>=g&&h<l-g&&p<l-g&&($=m[d[Math.floor((h-g)/C)*r+Math.floor((p-g)/C)]?1:0]),c[T++]=$.r,c[T++]=$.g,c[T++]=$.b,c[T]=$.a}}}}]);