(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[7796],{8040:(v,u,i)=>{"use strict";i.r(u),i.d(u,{CategoryDashboardComponent:()=>to});var t=i(4496),_=i(3480),a=i(2992),s=i(1712),l=i(8676),c=i(4388),d=i(3616),g=i(8824),T=i(8256),M=i(1264),N=i(8016),f=i(8212),m=i(6504),P=i(7656),$=i(168),H=i(1096),A=i(832),b=i(2528),L=i(1800),p=i(4164),x=i(4680),U=i(1632),S=i(7692),y=i(3656),R=i(4108),I=i(4304),D=i(1220),O=i(1368),h=i(1040);const Y=["focusableElement"];function G(n,E){if(1&n&&t.wR5(0,"tui-loader",7),2&n){const e=t.GaO();t.E7m("inheritColor",!0)("showLoader",e.value)("size",e.loaderSize)}}function tt(n,E){1&n&&t.wR5(0,"tui-svg",10),2&n&&t.E7m("src",E.polymorpheusOutlet)}const at=n=>({$implicit:n});function Rt(n,E){if(1&n&&(t.I0R(0,"span",8),t.yuY(1,tt,1,1,"tui-svg",9),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.E7m("polymorpheusOutlet",e.iconOn)("polymorpheusOutletContext",t.S45(2,at,e.size))}}function Ot(n,E){if(1&n&&t.wR5(0,"tui-loader",7),2&n){const e=t.GaO();t.E7m("inheritColor",!0)("showLoader",!e.value)("size",e.loaderSize)}}function yt(n,E){1&n&&t.wR5(0,"tui-svg",12),2&n&&t.E7m("src",E.polymorpheusOutlet)}function Ct(n,E){if(1&n&&(t.I0R(0,"span",8),t.yuY(1,yt,1,1,"tui-svg",11),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.E7m("polymorpheusOutlet",e.iconOff)("polymorpheusOutletContext",t.S45(2,at,e.size))}}const Et=(0,b.AL)({icons:{toggleOff:({$implicit:n})=>"m"===n?"tuiIconToggleOff":"tuiIconToggleOffLarge",toggleOn:({$implicit:n})=>"m"===n?"tuiIconToggleOn":"tuiIconToggleOnLarge"},appearances:{checked:I.oN.Primary,unchecked:I.oN.Secondary},singleColor:!1,showIcons:!1,size:"m"});let At=(()=>{class n extends L._y{constructor(e,o,r,C){super(e,o),this.modeDirective=r,this.options=C,this.singleColor=this.options.singleColor,this.showIcons=this.options.showIcons,this.showLoader=!1,this.size=this.options.size}get iconOn(){return this.options.icons.toggleOn}get iconOff(){return this.options.icons.toggleOff}get nativeFocusableElement(){var e,o;return null!==(o=null===(e=this.focusableElement)||void 0===e?void 0:e.nativeElement)&&void 0!==o?o:null}get focused(){return(0,p.ER)(this.nativeFocusableElement)}get appearance(){return this.singleColor||this.value?this.options.appearances.checked:this.options.appearances.unchecked}get sizeM(){return"m"===this.size}get loaderSize(){return this.sizeM?"xs":"s"}get hostMode(){var e,o;return null!==(o=null===(e=this.modeDirective)||void 0===e?void 0:e.mode)&&void 0!==o?o:null}onChecked(e){this.value=e}onFocused(e){this.updateFocused(e)}onFocusVisible(e){this.updateFocusVisible(e)}getFallbackValue(){return!1}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(m.eq,10),t.GI1(t.kD9),t.GI1(D.Y,8),t.GI1(Et))},n.\u0275cmp=t.In1({type:n,selectors:[["tui-toggle"]],viewQuery:function(e,o){if(1&e&&t.CC$(Y,5),2&e){let r;t.wto(r=t.Gqi())&&(o.focusableElement=r.first)}},hostVars:4,hostBindings:function(e,o){2&e&&(t.e48("data-size",o.size)("data-mode",o.hostMode),t.eAK("_checked",o.value))},inputs:{singleColor:"singleColor",showIcons:"showIcons",showLoader:"showLoader",size:"size"},features:[t.M5G([(0,x.NK)(n),(0,L.q4)(n)]),t.eg9],decls:9,vars:16,consts:[["tuiWrapper","",3,"active","appearance","disabled","focus","hover","invalid","readOnly"],[1,"t-toggle"],["class","t-loader",3,"inheritColor","showLoader","size",4,"ngIf"],["class","t-icon-wrapper",4,"ngIf"],[1,"t-circle"],["automation-id","tui-toggle__checkbox","role","switch","type","checkbox",1,"t-checkbox",3,"disabled","id","tuiFocusable","tuiChecked","tuiCheckedChange","tuiFocusedChange","tuiFocusVisibleChange"],["focusableElement",""],[1,"t-loader",3,"inheritColor","showLoader","size"],[1,"t-icon-wrapper"],["automation-id","tui-toggle__check-icon","class","t-icon",3,"src",4,"polymorpheusOutlet","polymorpheusOutletContext"],["automation-id","tui-toggle__check-icon",1,"t-icon",3,"src"],["automation-id","tui-toggle__cancel-icon","class","t-icon t-icon_off",3,"src",4,"polymorpheusOutlet","polymorpheusOutletContext"],["automation-id","tui-toggle__cancel-icon",1,"t-icon","t-icon_off",3,"src"]],template:function(e,o){1&e&&(t.I0R(0,"div",0)(1,"div",1),t.yuY(2,G,1,3,"tui-loader",2)(3,Rt,2,4,"span",3),t.wR5(4,"div",4),t.yuY(5,Ot,1,3,"tui-loader",2)(6,Ct,2,4,"span",3),t.C$Y(),t.I0R(7,"input",5,6),t.iHE("tuiCheckedChange",function(C){return t.kNx(o.value,C)||(o.value=C),C}),t.qCj("tuiFocusedChange",function(C){return o.onFocused(C)})("tuiFocusVisibleChange",function(C){return o.onFocusVisible(C)}),t.C$Y()()),2&e&&(t.E7m("active",o.pseudoActive)("appearance",o.appearance)("disabled",o.computedDisabled)("focus",o.computedFocusVisible)("hover",o.pseudoHover)("invalid",o.computedInvalid)("readOnly",o.readOnly),t.yG2(2),t.E7m("ngIf",o.showLoader),t.yG2(),t.E7m("ngIf",o.showIcons&&!o.showLoader),t.yG2(2),t.E7m("ngIf",o.showLoader),t.yG2(),t.E7m("ngIf",o.showIcons&&!o.showLoader),t.yG2(),t.E7m("disabled",o.disabled)("id",o.id)("tuiFocusable",o.focusable),t.OKB("tuiChecked",o.value),t.e48("aria-checked",o.value))},dependencies:[S.Cb,y.Wu,R.S,O.u_,h.Af,P.g,$.O,H.h,A.w],styles:["[_nghost-%COMP%]{position:relative;display:inline-block;vertical-align:middle;overflow:hidden;border-radius:6.25rem}[data-size=m][_nghost-%COMP%]{width:2rem;height:1rem}[data-size=l][_nghost-%COMP%]{width:3rem;height:1.5rem}.t-checkbox[_ngcontent-%COMP%]{padding:0;margin:0;border-width:0;border-radius:inherit;background:none;font-size:inherit;line-height:inherit;font-weight:inherit;color:inherit;caret-color:currentColor;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;word-break:keep-all;-webkit-text-fill-color:currentColor;position:absolute;top:0;left:0;height:100%;width:100%;opacity:0;cursor:pointer}.t-checkbox[_ngcontent-%COMP%]:-webkit-autofill, .t-checkbox[_ngcontent-%COMP%]:-webkit-autofill:hover, .t-checkbox[_ngcontent-%COMP%]:-webkit-autofill:focus{caret-color:var(--tui-base-09);border-radius:inherit;color:inherit!important;background-color:transparent!important;-webkit-text-fill-color:var(--tui-text-01)!important;border-color:var(--tui-autofill);-webkit-box-shadow:0 0 0 100rem var(--tui-autofill) inset!important}._disabled[_nghost-%COMP%]   .t-checkbox[_ngcontent-%COMP%]{pointer-events:none;cursor:default}.t-toggle[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;display:flex;align-items:center;justify-content:center}[data-size=m][_nghost-%COMP%]   .t-toggle[_ngcontent-%COMP%]{width:3rem;height:1rem;transform:translate(-1rem)}[data-size=l][_nghost-%COMP%]   .t-toggle[_ngcontent-%COMP%]{width:4.5rem;height:1.5rem;transform:translate(-1.5rem)}._checked[_nghost-%COMP%]   .t-toggle[_ngcontent-%COMP%]{transform:translate(0)}.t-circle[_ngcontent-%COMP%]{margin:.125rem 0;flex-shrink:0;border-radius:100%;background-color:var(--tui-base-01)}._disabled[_nghost-%COMP%]   .t-circle_light[_ngcontent-%COMP%]{opacity:.24}[data-size=m][_nghost-%COMP%]   .t-circle[_ngcontent-%COMP%]{width:.75rem;height:.75rem}[data-size=l][_nghost-%COMP%]   .t-circle[_ngcontent-%COMP%]{width:1rem;height:1rem}._disabled[_nghost-%COMP%]   .t-circle[_ngcontent-%COMP%]{background-color:var(--tui-base-01)}.t-loader[_ngcontent-%COMP%]{min-width:auto}[_nghost-%COMP%]:not(._checked)   .t-loader[_ngcontent-%COMP%]{color:var(--tui-base-06)}[_nghost-%COMP%]:not(._checked)._disabled   .t-loader[_ngcontent-%COMP%]{color:var(--tui-base-05)}[_nghost-%COMP%]:not(._checked)[data-mode=onDark]   .t-loader[_ngcontent-%COMP%]{color:var(--tui-text-03-night)}[_nghost-%COMP%]:not(._checked)[data-mode=onDark]._disabled   .t-loader[_ngcontent-%COMP%]{color:var(--tui-clear-inverse-active)}[_nghost-%COMP%]:not(._checked)[data-mode=onLight]   .t-loader[_ngcontent-%COMP%]{color:var(--tui-text-03)}[_nghost-%COMP%]:not(._checked)[data-mode=onLight]._disabled   .t-loader[_ngcontent-%COMP%]{color:var(--tui-clear-active)}[data-size=m][_nghost-%COMP%]   .t-loader[_ngcontent-%COMP%]{width:.75rem;margin:0 .2rem;transform:scale(.75)}[data-size=l][_nghost-%COMP%]   .t-loader[_ngcontent-%COMP%]{width:1rem;margin:0 .25rem}.t-icon-wrapper[_ngcontent-%COMP%]{display:flex}.t-icon[_ngcontent-%COMP%]{opacity:.8}.t-icon_off[_ngcontent-%COMP%]{color:var(--tui-base-06)}._disabled[_nghost-%COMP%]   .t-icon_off[_ngcontent-%COMP%]{color:var(--tui-base-05)}[data-mode=onDark][_nghost-%COMP%]   .t-icon_off[_ngcontent-%COMP%]{color:var(--tui-text-03-night)}[data-mode=onDark]._disabled[_nghost-%COMP%]   .t-icon_off[_ngcontent-%COMP%]{color:var(--tui-clear-inverse-active)}[data-mode=onLight][_nghost-%COMP%]   .t-icon_off[_ngcontent-%COMP%]{color:var(--tui-text-03)}[data-mode=onLight]._disabled[_nghost-%COMP%]   .t-icon_off[_ngcontent-%COMP%]{color:var(--tui-clear-active)}[data-size=m][_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{width:1rem;height:1rem;transform:scale(.75)}[data-size=l][_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{margin:0 .125rem;width:1.5rem;height:1.5rem}[_nghost-%COMP%]:hover   .t-icon[_ngcontent-%COMP%]{opacity:1}"],changeDetection:0}),n})(),ct=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.a4G({type:n}),n.\u0275inj=t.s3X({imports:[[O.MD,H.O,$.C,U.u,A.I,P.W,R.g,y.Yt,S.Sk,h.Ux]]}),n})();var ht=i(3320),K=i(6380),J=i(2740),W=i(2204),mt=i(9956),et=i(400),Tt=i(9880),ot=i(1512),ut=i(9088),nt=i(964),Lt=i(1528),Nt=i(1956),Jt=i(4476);const jt=["qrcElement"];let Wt=(()=>{class n{constructor(e,o){this.renderer=e,this.sanitizer=o,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new t._w7,this.context=null}ngOnChanges(){var e=this;return(0,Lt.c)(function*(){yield e.createQRCode()})()}isValidQrCodeText(e){return!1===this.allowEmptyString?!(typeof e>"u"||""===e||"null"===e||null===e):!(typeof e>"u")}toDataURL(e){return new Promise((o,r)=>{(0,Nt.g7)(this.qrdata,e,(C,B)=>{C?r(C):o(B)})})}toCanvas(e,o){return new Promise((r,C)=>{(0,Nt.gH)(e,this.qrdata,o,B=>{B?C(B):r("success")})})}toSVG(e){return new Promise((o,r)=>{(0,Nt.toString)(this.qrdata,e,(C,B)=>{C?r(C):o(B)})})}renderElement(e){for(const o of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,o);this.renderer.appendChild(this.qrcElement.nativeElement,e)}createQRCode(){var e=this;return(0,Lt.c)(function*(){e.version&&e.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),e.version=40):e.version&&e.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),e.version=1):void 0!==e.version&&isNaN(e.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),e.version=void 0);try{if(!e.isValidQrCodeText(e.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");e.isValidQrCodeText(e.qrdata)&&""===e.qrdata&&(e.qrdata=" ");const o={color:{dark:e.colorDark,light:e.colorLight},errorCorrectionLevel:e.errorCorrectionLevel,margin:e.margin,scale:e.scale,version:e.version,width:e.width},r=e.imageSrc,C=e.imageHeight||40,B=e.imageWidth||40;switch(e.elementType){case"canvas":{const w=e.renderer.createElement("canvas");e.context=w.getContext("2d"),e.toCanvas(w,o).then(()=>{if(e.ariaLabel&&e.renderer.setAttribute(w,"aria-label",`${e.ariaLabel}`),e.title&&e.renderer.setAttribute(w,"title",`${e.title}`),r&&e.context){e.centerImage=new Image(B,C),r!==e.centerImage.src&&(e.centerImage.src=r),C!==e.centerImage.height&&(e.centerImage.height=C),B!==e.centerImage.width&&(e.centerImage.width=B);const k=e.centerImage;k&&(k.onload=()=>{e.context?.drawImage(k,w.width/2-B/2,w.height/2-C/2,B,C)})}e.renderElement(w),e.emitQRCodeURL(w)}).catch(k=>{console.error("[angularx-qrcode] canvas error:",k)});break}case"svg":{const w=e.renderer.createElement("div");e.toSVG(o).then(k=>{e.renderer.setProperty(w,"innerHTML",k);const V=w.firstChild;e.renderer.setAttribute(V,"height",`${e.width}`),e.renderer.setAttribute(V,"width",`${e.width}`),e.renderElement(V),e.emitQRCodeURL(V)}).catch(k=>{console.error("[angularx-qrcode] svg error:",k)});break}default:{const w=e.renderer.createElement("img");e.toDataURL(o).then(k=>{e.alt&&w.setAttribute("alt",e.alt),e.ariaLabel&&w.setAttribute("aria-label",e.ariaLabel),w.setAttribute("src",k),e.title&&w.setAttribute("title",e.title),e.renderElement(w),e.emitQRCodeURL(w)}).catch(k=>{console.error("[angularx-qrcode] img/url error:",k)})}}}catch(o){console.error("[angularx-qrcode] Error generating QR Code:",o.message)}})()}emitQRCodeURL(e){const o=e.constructor.name;if(o===SVGSVGElement.name){const B=new Blob([e.outerHTML],{type:"image/svg+xml"}),w=URL.createObjectURL(B),k=this.sanitizer.bypassSecurityTrustUrl(w);return void this.qrCodeURL.emit(k)}let r="";o===HTMLCanvasElement.name&&(r=e.toDataURL("image/png")),o===HTMLImageElement.name&&(r=e.src),fetch(r).then(C=>C.blob()).then(C=>URL.createObjectURL(C)).then(C=>this.sanitizer.bypassSecurityTrustUrl(C)).then(C=>{this.qrCodeURL.emit(C)}).catch(C=>{console.error("[angularx-qrcode] Error when fetching image/png URL: "+C)})}static#t=this.\u0275fac=function(o){return new(o||n)(t.GI1(t.q87),t.GI1(Jt.mI))};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["qrcode"]],viewQuery:function(o,r){if(1&o&&t.CC$(jt,7),2&o){let C;t.wto(C=t.Gqi())&&(r.qrcElement=C.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[t.SYr],decls:2,vars:2,consts:[["qrcElement",""]],template:function(o,r){1&o&&t.wR5(0,"div",null,0),2&o&&t.m8U(r.cssClass)},encapsulation:2,changeDetection:0})}return n})(),qt=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.a4G({type:n});static#n=this.\u0275inj=t.s3X({})}return n})();var dt=i(1560);let te=(()=>{class n{saveAsImage(e,o="qrcode"){let r=null;if(r=e.qrcElement.nativeElement.querySelector("canvas").toDataURL("image/png"),!r)return;const C=function Zt(n){const E=n.split(";base64,"),e=E[0].split(":")[1],o=window.atob(E[1]),r=new Uint8Array(o.length);for(let C=0;C<o.length;++C)r[C]=o.charCodeAt(C);return new Blob([r],{type:e})}(r),B=new Blob([C],{type:"image/png"}),w=window.URL.createObjectURL(B),k=document.createElement("a");k.href=w,k.download=o,k.click()}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-qr-code"]],inputs:{data:"data"},standalone:!0,features:[t.M5G([]),t.UHJ],decls:10,vars:3,consts:()=>{let e;return e="Scarica",[[1,"relative","qr-container"],[1,"download-container","bg-black/50","absolute","top-0","bottom-0","end-0","start-0","flex","items-center","justify-center"],["tuiButton","","type","button","appearance","primary",3,"click"],[1,"flex","items-center"],e,[1,"flex","justify-center",3,"elementType","qrdata","width"],["publicQR",""]]},template:function(o,r){if(1&o){const C=t.KQA();t.I0R(0,"div",0)(1,"div",1)(2,"button",2),t.qCj("click",function(){t.usT(C);const w=t.Gew(9);return t.CGJ(r.saveAsImage(w))}),t.I0R(3,"span",3)(4,"mat-icon"),t.OEk(5,"download_file"),t.C$Y(),t.I0R(6,"span"),t.aS0(7,4),t.C$Y()()()(),t.wR5(8,"qrcode",5,6),t.C$Y()}2&o&&(t.yG2(8),t.E7m("elementType","canvas")("qrdata",r.data)("width",256))},dependencies:[qt,Wt,dt.qL,f.CI,f.Kw],styles:["[_nghost-%COMP%]   .qr-container[_ngcontent-%COMP%]   .download-container[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .qr-container[_ngcontent-%COMP%]:hover   .download-container[_ngcontent-%COMP%]{display:flex}"],changeDetection:0})}return n})();function ee(n,E){if(1&n){const e=t.KQA();t.I0R(0,"button",1),t.qCj("click",function(){t.usT(e);const r=t.GaO();return t.CGJ(r.copy())}),t.I0R(1,"mat-icon"),t.OEk(2,"content_copy"),t.C$Y()()}if(2&n){const e=t.GaO();t.E7m("appearance",e.appearance)("size",e.size)}}function ne(n,E){if(1&n){const e=t.KQA();t.I0R(0,"button",1),t.qCj("click",function(){t.usT(e);const r=t.GaO();return t.CGJ(r.copy())}),t.I0R(1,"mat-icon"),t.OEk(2,"content_copy"),t.C$Y()()}if(2&n){const e=t.GaO();t.E7m("appearance",e.appearance)("size",e.size)}}let oe=(()=>{class n{constructor(){this.notifications=(0,t.uUt)(c.E),this.onlyIcon=!0,this.appearance="outline",this.size="m",this.copyHandler=this.defaultCopyHandler,this.message="Copiato"}copy(){this.copyHandler(this.content??null)}defaultCopyHandler(e){e&&navigator.clipboard.writeText(e).then(o=>{this.notifications.fireSnackBar(this.message)})}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-copy-content"]],inputs:{content:"content",onlyIcon:"onlyIcon",appearance:"appearance",size:"size",copyHandler:"copyHandler",message:"message"},standalone:!0,features:[t.UHJ],decls:2,vars:1,consts:[["tuiIconButton","","type","button",3,"appearance","size"],["tuiIconButton","","type","button",3,"appearance","size","click"]],template:function(o,r){1&o&&t.yuY(0,ee,3,2,"button",0)(1,ne,3,2),2&o&&t.C0Y(0,r.onlyIcon?0:1)},dependencies:[f.CI,f.Kw,dt.qL],changeDetection:0})}return n})();function ie(n,E){1&n&&(t.I0R(0,"span",26),t.aS0(1,27),t.C$Y())}function ae(n,E){1&n&&(t.I0R(0,"span",28),t.aS0(1,29),t.C$Y())}function se(n,E){if(1&n&&t.wR5(0,"app-qr-code",11),2&n){const e=t.GaO();t.E7m("data",e.publicUrl)}}const bt=n=>({hidden:n});function re(n,E){if(1&n&&(t.I0R(0,"p",2),t.aS0(1,30),t.C$Y(),t.I0R(2,"div",4)(3,"span"),t.aS0(4,31),t.C$Y(),t.I0R(5,"div",32)(6,"div",33)(7,"tui-input-date",34),t.SAx(8),t.aS0(9,35),t.k70(),t.C$Y(),t.wR5(10,"app-errors",9),t.C$Y(),t.I0R(11,"div",36)(12,"tui-input-time",37),t.SAx(13),t.aS0(14,38),t.k70(),t.C$Y(),t.I0R(15,"span",2),t.aS0(16,39),t.C$Y(),t.wR5(17,"app-errors",9),t.C$Y()()(),t.I0R(18,"div",4)(19,"span"),t.aS0(20,40),t.C$Y(),t.I0R(21,"div",32)(22,"div",33)(23,"tui-input-date",41),t.SAx(24),t.aS0(25,42),t.k70(),t.C$Y(),t.wR5(26,"app-errors",9),t.C$Y(),t.I0R(27,"div",36)(28,"tui-input-time",43),t.SAx(29),t.aS0(30,44),t.k70(),t.C$Y(),t.I0R(31,"span",2),t.aS0(32,45),t.C$Y(),t.wR5(33,"app-errors",9),t.C$Y()()()),2&n){const e=t.GaO();t.yG2(10),t.E7m("errors",e.e("public_from_date")),t.yG2(),t.E7m("ngClass",t.S45(6,bt,!e.form.value.public_from_date)),t.yG2(6),t.E7m("errors",e.e("public_from_time")),t.yG2(9),t.E7m("errors",e.e("public_to_date")),t.yG2(),t.E7m("ngClass",t.S45(8,bt,!e.form.value.public_to_date)),t.yG2(6),t.E7m("errors",e.e("public_to_time"))}}function _e(n,E){if(1&n&&(t.I0R(0,"p",2),t.aS0(1,46),t.C$Y(),t.I0R(2,"div",4)(3,"span"),t.aS0(4,47),t.C$Y(),t.I0R(5,"div",32)(6,"div",33)(7,"tui-input-time",48),t.SAx(8),t.aS0(9,49),t.k70(),t.C$Y(),t.I0R(10,"span",2),t.aS0(11,50),t.C$Y(),t.wR5(12,"app-errors",9),t.C$Y(),t.I0R(13,"div",51)(14,"tui-input-time",52),t.SAx(15),t.aS0(16,53),t.k70(),t.C$Y(),t.I0R(17,"span",2),t.aS0(18,54),t.C$Y(),t.wR5(19,"app-errors",9),t.C$Y()()()),2&n){const e=t.GaO();t.yG2(12),t.E7m("errors",e.e("daily_from")),t.yG2(7),t.E7m("errors",e.e("daily_to"))}}function le(n,E){1&n&&(t.I0R(0,"span",26),t.aS0(1,55),t.C$Y())}function ce(n,E){1&n&&(t.I0R(0,"span",28),t.aS0(1,56),t.C$Y())}function ue(n,E){if(1&n&&t.wR5(0,"app-qr-code",11),2&n){const e=t.GaO();t.E7m("data",e.privateUrl)}}let de=(()=>{class n{constructor(e){this.context=e,this.destroy$=(0,t.uUt)(_.UF),this.service=(0,t.uUt)(s.S),this.notifications=(0,t.uUt)(c.E),this.urlTo=(0,t.uUt)(ut.S),this.form=new m.WC({private_visible:new m.Ku,public_from_date:new m.Ku,public_from_time:new m.Ku,public_to_date:new m.Ku,public_to_time:new m.Ku,public_visible:new m.Ku,daily_from:new m.Ku,daily_to:new m.Ku}),this.submitted=!1,this.dailyVisibilityOpen=!1,this.absoluteVisibilityOpen=!1,this.saving=(0,t.OCB)(!1),this.privateUrl=`${location.origin}${this.urlTo.transform(this.context.data?.category?.secret_desc??this.context.data?.category?.secret??"","menuCategory.private")}`,this.publicUrl=`${location.origin}${this.urlTo.transform(this.context.data?.category?.id??"","menuCategory.public")}`,this.e=this.getErrorsFor}ngOnInit(){const e=this.context.data.category.visibility;e?this.updateForm(e):this.form.reset()}submit(e={}){this.submitted=!0;const o=this.context.data?.category?.id;this.form.invalid||!o||(this.saving.set(!0),this.service.updateVisibility(o,{...this.formVal(),...e}).pipe((0,d.a)(this.destroy$),(0,g.U)(()=>this.saving.set(!1))).subscribe({next:r=>{this.notifications.fireSnackBar("Visibilit\xE0 aggiornata."),this.context.completeWith(r)},error:r=>{this.manageError(r)}}))}cancel(){(this.form.touched||this.form.dirty)&&!confirm("Sei sicuro di voler annullare le modifiche fatte?")||this.context.completeWith(null)}formVal(){const e={public_visible:this.form.value.public_visible,private_visible:this.form.value.private_visible,daily_from:this.form.value.daily_from instanceof et.uc?(0,nt.Ez)(this.form.value.daily_from):"",daily_to:this.form.value.daily_to instanceof et.uc?(0,nt.Ez)(this.form.value.daily_to):""},o=this.form.value;if(o.public_from_date instanceof et.EK){const r=o.public_from_time instanceof et.uc?o.public_from_time:new et.uc(0,0);e.public_from=(0,nt.Qx)(o.public_from_date,r)}else e.public_from="";if(o.public_to_date instanceof et.EK){const r=o.public_to_time instanceof et.uc?o.public_to_time:new et.uc(0,0);e.public_to=(0,nt.Qx)(o.public_to_date,r)}else e.public_to="";return e}togglePrivateVisible(){this.form.patchValue({private_visible:!this.form.value.private_visible})}togglePublicVisible(){this.form.patchValue({public_visible:!this.form.value.public_visible})}updateForm(e){if(!e)return;const o={public_visible:e.public_visible,private_visible:e.private_visible,public_from_date:e.public_from?(0,nt._0)(e.public_from):null,public_from_time:e.public_from?(0,nt.Q1)(e.public_from):null,public_to_date:e.public_to?(0,nt._0)(e.public_to):null,public_to_time:e.public_to?(0,nt.Q1)(e.public_to):null,daily_from:e.daily_from?(0,nt.Q1)(e.daily_from):null,daily_to:e.daily_to?(0,nt.Q1)(e.daily_to):null};o.public_from_time instanceof et.uc&&0===o.public_from_time?.hours&&0===o.public_from_time?.minutes&&(o.public_from_time=null),o.public_to_time instanceof et.uc&&0===o.public_to_time?.hours&&0===o.public_to_time?.minutes&&(o.public_to_time=null),this.form.patchValue(o),(e.daily_from||e.daily_to)&&(this.dailyVisibilityOpen=!0),(e.public_from||e.public_to)&&(this.absoluteVisibilityOpen=!0)}getErrorsFor(e){const o=this.form.get(e);return o&&(this.submitted||o.touched||o.dirty)?o.errors:null}manageError(e){422!=e.status||"object"!=typeof e.error.details||"cannot_publish"!=e.error.details.error_code?this.notifications.error((0,T.mk)(e)||"Errore nel salvataggio."):this.notifications.confirm(e.error.message??"Pubblicazione fallita.",{yes:"Forza pubblicazione",no:"Annulla",title:"Errori nella pubblicazione"}).pipe((0,d.a)(this.destroy$)).subscribe({next:o=>{o&&this.force()},error:o=>{console.warn("error",o)}})}force(){this.submit({force:!0})}static#t=this.\u0275fac=function(o){return new(o||n)(t.GI1(h.C0))};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-timestamps-modal"]],standalone:!0,features:[t.M5G([_.UF,ut.S]),t.UHJ],decls:53,vars:21,consts:()=>{let e,o,r,C,B,w,k,V,q,Z,Q,st,rt,_t,F,St,pt,X,zt,Vt,Ht,Ft,Xt,Qt,Kt;return e="Se attivata, il men\xF9 sar\xE0 visibile nella pagina pubblica.",o="Programma visibilit\xE0 assoluta",r="Programma visibilit\xE0 giornaliera",C="\n           Se attivata, solo gli utenti che conoscono il link potranno\n          visualizzare la pagina. \n        ",B="Conferma",w="Annulla",k="Attivata",V="Disattivata",q="\n           \xC8 possibile mostrare o nascondere il me\xF9 nella pagina pubblica in\n          modo programmatico da una certa data fino ad un altra. Se queste date\n          non vengono inserite, il men\xF9 sar\xE0 sempre visibile. \n        ",Z="Men\xF9 visibile dal giorno:",Q="Giorno",st="Ora",rt="Formato 24 ore.",_t="Fino al giorno:",F="Giorno",St="Ora",pt="Formato 24 ore.",X="\n           \xC8 possibile mostrare il men\xF9 nella pagina pubblica solo in\n          determinate fasce orarie. Se non vengono specificate fasce orarie, il\n          men\xF9 sar\xE0 sempre visibile. \n        ",zt="Orari:",Vt="Dalle ore",Ht="Formato 24 ore.",Ft="fino alle ore",Xt="Formato 24 ore.",Qt="Attivata",Kt="Disattivata",[[3,"formGroup","ngSubmit"],[3,"overlay","showLoader"],[1,"text-sm","text-slate-400"],e,[1,"mb-3"],[1,"flex","items-center"],[1,"me-1",3,"formControlName"],[1,"cursor-pointer",3,"click"],["class","text-green-700"],[3,"errors"],[3,"expanded"],[3,"data"],[1,"flex","items-center","mb-3"],["target","_blank","tuiLink","",1,"me-2","text-xs",3,"href"],[3,"content"],[3,"open"],[1,"text-lg"],o,["tuiAccordionItemContent",""],r,[1,"my-3"],C,["tuiButton","","type","submit","size","l",1,"me-1"],B,["tuiButton","","appearance","outline","type","button","size","l",3,"click"],w,[1,"text-green-700"],k,[1,"text-slate-700"],V,q,Z,[1,"flex","items-top"],[1,"flex","grow","flex-col"],["formControlName","public_from_date",1,"me-2","mb-1"],Q,[1,"grow","flex","flex-col",3,"ngClass"],["formControlName","public_from_time",1,"mb-1"],st,rt,_t,["formControlName","public_to_date",1,"me-2","mb-1"],F,["formControlName","public_to_time",1,"mb-1"],St,pt,X,zt,["formControlName","daily_from",1,"me-2","mb-1"],Vt,Ht,[1,"grow","flex","flex-col"],["formControlName","daily_to",1,"mb-1"],Ft,Xt,Qt,Kt]},template:function(o,r){1&o&&(t.I0R(0,"form",0),t.qCj("ngSubmit",function(){return r.submit()}),t.I0R(1,"tui-loader",1)(2,"h4"),t.OEk(3,"Visibilit\xe0 pubblica"),t.C$Y(),t.I0R(4,"p",2),t.aS0(5,3),t.C$Y(),t.I0R(6,"div",4)(7,"div",5),t.wR5(8,"tui-toggle",6),t.I0R(9,"span",7),t.qCj("click",function(){return r.togglePublicVisible()}),t.yuY(10,ie,2,0,"span",8)(11,ae,2,0),t.C$Y()(),t.wR5(12,"app-errors",9),t.C$Y(),t.I0R(13,"tui-expand",10),t.yuY(14,se,1,1,"app-qr-code",11),t.I0R(15,"div",12)(16,"a",13),t.OEk(17),t.C$Y(),t.wR5(18,"app-copy-content",14),t.C$Y(),t.I0R(19,"tui-accordion")(20,"tui-accordion-item",15)(21,"span",16),t.aS0(22,17),t.C$Y(),t.yuY(23,re,34,10,"ng-template",18),t.C$Y(),t.I0R(24,"tui-accordion-item",15)(25,"span",16),t.aS0(26,19),t.C$Y(),t.yuY(27,_e,20,2,"ng-template",18),t.C$Y()()(),t.wR5(28,"hr",20),t.I0R(29,"h4"),t.OEk(30,"Visibilit\xe0 privata"),t.C$Y(),t.I0R(31,"p",2),t.aS0(32,21),t.C$Y(),t.I0R(33,"div",4)(34,"div",5),t.wR5(35,"tui-toggle",6),t.I0R(36,"span",7),t.qCj("click",function(){return r.togglePrivateVisible()}),t.yuY(37,le,2,0,"span",8)(38,ce,2,0),t.C$Y()(),t.wR5(39,"app-errors",9),t.C$Y(),t.I0R(40,"tui-expand",10),t.yuY(41,ue,1,1,"app-qr-code",11),t.I0R(42,"div",12)(43,"a",13),t.OEk(44),t.C$Y(),t.wR5(45,"app-copy-content",14),t.C$Y()(),t.I0R(46,"div",5)(47,"button",22),t.SAx(48),t.aS0(49,23),t.k70(),t.C$Y(),t.I0R(50,"button",24),t.qCj("click",function(){return r.cancel()}),t.SAx(51),t.aS0(52,25),t.k70(),t.C$Y()()()()),2&o&&(t.E7m("formGroup",r.form),t.yG2(),t.E7m("overlay",!0)("showLoader",r.saving()),t.yG2(7),t.E7m("formControlName","public_visible"),t.yG2(2),t.C0Y(10,r.form.value.public_visible?10:11),t.yG2(2),t.E7m("errors",r.e("public_visible")),t.yG2(),t.E7m("expanded",r.form.value.public_visible),t.yG2(),t.C0Y(14,r.publicUrl?14:-1),t.yG2(2),t._6D("href",r.publicUrl,t.K6U),t.yG2(),t.cNF(r.publicUrl),t.yG2(),t.E7m("content",r.publicUrl),t.yG2(2),t.E7m("open",r.absoluteVisibilityOpen),t.yG2(4),t.E7m("open",r.dailyVisibilityOpen),t.yG2(11),t.E7m("formControlName","private_visible"),t.yG2(2),t.C0Y(37,r.form.value.private_visible?37:38),t.yG2(2),t.E7m("errors",r.e("private_visible")),t.yG2(),t.E7m("expanded",r.form.value.private_visible),t.yG2(),t.C0Y(41,r.privateUrl?41:-1),t.yG2(2),t._6D("href",r.privateUrl,t.K6U),t.yG2(),t.cNF(r.privateUrl),t.yG2(),t.E7m("content",r.privateUrl))},dependencies:[ct,At,mt.g,m.sl,m.sz,m.ue,m.u,m.uW,m.Wo,ht.K6,f.CI,f.Kw,K.iO,K.yc,K.Ml,J.IZ,J.iw,J.gt,Tt.kh,Tt.st,ot.w,ot.C,S.Sk,S.Cb,te,O.QF,W.Ep,W.Ix,W._Q,W.Up,oe],changeDetection:0})}return n})();function ge(n,E){1&n&&(t.I0R(0,"span",14),t.aS0(1,15),t.C$Y())}function Ce(n,E){1&n&&(t.I0R(0,"span",16),t.aS0(1,17),t.C$Y())}function Ee(n,E){if(1&n&&(t.I0R(0,"span",4),t.aS0(1,20),t.C$Y(),t.I0R(2,"span",4),t.OEk(3),t.wVc(4,"date"),t.C$Y()),2&n){const e=t.GaO(3);t.yG2(3),t.cNF(t.g7$(4,1,e.daily_from(),"HH:mm"))}}function me(n,E){if(1&n&&(t.I0R(0,"span",4),t.OEk(1,"fino alle ore"),t.C$Y(),t.I0R(2,"span",4),t.OEk(3),t.wVc(4,"date"),t.C$Y()),2&n){const e=t.GaO(3);t.yG2(3),t.cNF(t.g7$(4,1,e.daily_to(),"HH:mm"))}}function Te(n,E){if(1&n&&(t.I0R(0,"div",3)(1,"span",4),t.aS0(2,19),t.C$Y(),t.yuY(3,Ee,5,4)(4,me,5,4),t.C$Y()),2&n){const e=t.GaO(2);t.yG2(3),t.C0Y(3,e.daily_from()?3:-1),t.yG2(),t.C0Y(4,e.daily_to()?4:-1)}}function fe(n,E){if(1&n&&(t.I0R(0,"span"),t.OEk(1),t.wVc(2,"date"),t.C$Y()),2&n){const e=t.GaO(4);t.yG2(),t.cNF(t.g7$(2,1,e.public_from(),"HH:mm"))}}function Se(n,E){if(1&n&&(t.I0R(0,"div",3)(1,"span",4),t.aS0(2,21),t.C$Y(),t.I0R(3,"span",4),t.OEk(4),t.wVc(5,"date"),t.C$Y(),t.yuY(6,fe,3,4,"span"),t.wVc(7,"date"),t.C$Y()),2&n){const e=t.GaO(3);t.yG2(4),t.cNF(t.g7$(5,2,e.public_from(),"EEEE d MMMM y")),t.yG2(2),t.C0Y(6,"00:00"!=t.g7$(7,5,e.public_from(),"HH:mm")?6:-1)}}function pe(n,E){if(1&n&&(t.I0R(0,"span"),t.OEk(1),t.wVc(2,"date"),t.C$Y()),2&n){const e=t.GaO(4);t.yG2(),t.cNF(t.g7$(2,1,e.public_to(),"HH:mm"))}}function Oe(n,E){if(1&n&&(t.I0R(0,"div",3)(1,"span",4),t.aS0(2,22),t.C$Y(),t.I0R(3,"span",4),t.OEk(4),t.wVc(5,"date"),t.C$Y(),t.yuY(6,pe,3,4,"span"),t.wVc(7,"date"),t.C$Y()),2&n){const e=t.GaO(3);t.yG2(4),t.cNF(t.g7$(5,2,e.public_to(),"EEEE d MMMM y")),t.yG2(2),t.C0Y(6,"00:00"!=t.g7$(7,5,e.public_to(),"HH:mm")?6:-1)}}function Ie(n,E){if(1&n&&(t.I0R(0,"div"),t.yuY(1,Se,8,8,"div",18)(2,Oe,8,8,"div",18),t.C$Y()),2&n){const e=t.GaO(2);t.yG2(),t.C0Y(1,e.public_from()?1:-1),t.yG2(),t.C0Y(2,e.public_to()?2:-1)}}function he(n,E){if(1&n&&(t.yuY(0,Te,5,2,"div",18),t.I0R(1,"div",2),t.yuY(2,Ie,3,2,"div"),t.C$Y()),2&n){const e=t.GaO();t.C0Y(0,e.daily_from()||e.daily_to()?0:-1),t.yG2(2),t.C0Y(2,e.public_from()||e.public_to()?2:-1)}}function Me(n,E){1&n&&(t.I0R(0,"span",14),t.aS0(1,23),t.C$Y())}function Re(n,E){1&n&&(t.I0R(0,"span",16),t.aS0(1,24),t.C$Y())}let ye=(()=>{class n{constructor(){this.dialogs=(0,t.uUt)(N._k),this.injector=(0,t.uUt)(t.zZn),this.item=(0,t.OCB)(null),this.private_visible=(0,t.S6b)(()=>this.item()?.visibility?.private_visible??!1),this.public_from=(0,t.S6b)(()=>this.item()?.visibility?.public_from),this.public_to=(0,t.S6b)(()=>this.item()?.visibility?.public_to),this.daily_from=(0,t.S6b)(()=>this.item()?.visibility?.daily_from),this.daily_to=(0,t.S6b)(()=>this.item()?.visibility?.daily_to),this.public_visible=(0,t.S6b)(()=>this.item()?.visibility?.public_visible??!1),this.categoryChange=new t._w7}set category(e){this.item.set(e??null)}get category(){return this.item()}editTimestamps(){this.dialogs.open(new h.WO(de,this.injector),{data:{category:this.item()},dismissible:!1,closeable:!0,label:"Modifica visibilit\xE0"}).subscribe({next:e=>{e&&(this.item.set(e),this.categoryChange.emit(e))}})}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-eip-category-visibility"]],inputs:{category:"category"},outputs:{categoryChange:"categoryChange"},standalone:!0,features:[t.M5G([_.UF]),t.UHJ],decls:27,vars:3,consts:()=>{let e,o,r,C,B,w,k,V,q,Z,Q,st,rt,_t;return e="Visibilit\xE0",o="Visibilit\xE0",r="pubblica",C="Visibilit\xE0",B="privata",w="Modifica visibilit\xE0",k="Attivata",V="Disattivata",q="Visibile",Z="dalle ore",Q="Da",st="fino a",rt="Attivata",_t="Disattivata",[[1,"mb-1","me-1"],e,[1,"flex","flex-col"],[1,"flex","items-center"],[1,"me-1"],o,[1,"me-2"],r,["class","me-2 text-green-700"],["class","flex flex-col"],C,B,["type","button","tuiButton","","size","m","appearance","flat",3,"click"],w,[1,"me-2","text-green-700"],k,[1,"me-2","text-slate-700"],V,["class","flex items-center"],q,Z,Q,st,rt,_t]},template:function(o,r){1&o&&(t.I0R(0,"h4",0),t.aS0(1,1),t.C$Y(),t.I0R(2,"div",2)(3,"div",3)(4,"span",3)(5,"span",4),t.aS0(6,5),t.C$Y(),t.I0R(7,"b",6),t.aS0(8,7),t.C$Y()(),t.yuY(9,ge,2,0,"span",8)(10,Ce,2,0)(11,he,3,2,"div",9),t.C$Y()(),t.I0R(12,"div",2)(13,"div",3)(14,"span",3)(15,"span",4),t.aS0(16,10),t.C$Y(),t.I0R(17,"b",6),t.aS0(18,11),t.C$Y()(),t.yuY(19,Me,2,0,"span",8)(20,Re,2,0),t.C$Y()(),t.I0R(21,"button",12),t.qCj("click",function(){return r.editTimestamps()}),t.I0R(22,"span",3)(23,"mat-icon"),t.OEk(24,"edit"),t.C$Y(),t.I0R(25,"span"),t.aS0(26,13),t.C$Y()()()),2&o&&(t.yG2(9),t.C0Y(9,r.public_visible()?9:10),t.yG2(2),t.C0Y(11,r.public_visible()?11:-1),t.yG2(8),t.C0Y(19,r.private_visible()?19:20))},dependencies:[ct,m.sl,O.y,f.CI,f.Kw,dt.qL],changeDetection:0})}return n})();var Ae=i(5004),it=i(466),j=i(4336),Ne=i(2904);function Pe(n,E){if(1&n&&t.wR5(0,"i"),2&n){const e=t.GaO();t.uQ9("align-self-center fas fa-fw fa-",e.icon,"")}}function Le(n,E){if(1&n&&(t.I0R(0,"span",3),t.OEk(1),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.oRS(" ",e.humanStatus," ")}}const be=[[["","title",""]]],De=n=>({color:n}),$e=["[title]"];let Ge=(()=>{class n extends Ne.c{constructor(){super(...arguments),this.configs={active:{text:"Attivo",color:"var(--tui-positive, lime)",icon:"check"},deleted:{text:"Eliminato",color:"red",icon:"trash"}}}static#t=this.\u0275fac=(()=>{let e;return function(r){return(e||(e=t.otF(n)))(r||n)}})();static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-menu-category-status"]],inputs:{status:"status"},standalone:!0,features:[t.eg9,t.UHJ],ngContentSelectors:$e,decls:7,vars:5,consts:[[1,"d-flex","flex-column"],[1,"d-flex","flex-row",3,"ngStyle"],[3,"class",4,"ngIf"],[1,"align-self-center"],["customTitle",""],["class","align-self-center",4,"ngIf"]],template:function(o,r){if(1&o&&(t.kPM(be),t.I0R(0,"span",0)(1,"span",1),t.yuY(2,Pe,1,3,"i",2),t.I0R(3,"span",3,4),t._Xx(5),t.C$Y(),t.yuY(6,Le,2,1,"span",5),t.C$Y()()),2&o){const C=t.Gew(4);t.yG2(),t.E7m("ngStyle",t.S45(3,De,r.color)),t.yG2(),t.E7m("ngIf",r.validStatus&&r.validConfig),t.yG2(4),t.E7m("ngIf",!C.hasChildNodes())}},dependencies:[O.Qt,O.u_],encapsulation:2,changeDetection:0})}return n})();function ve(n,E){if(1&n){const e=t.KQA();t.I0R(0,"tui-data-list")(1,"button",2),t.qCj("click",function(){t.usT(e);const r=t.GaO();return t.CGJ(r.delete())}),t.I0R(2,"span",3)(3,"mat-icon",4),t.OEk(4,"delete"),t.C$Y(),t.I0R(5,"span"),t.aS0(6,5),t.C$Y()()()()}}const Ye=n=>({rotate180:n});function we(n,E){if(1&n&&(t.I0R(0,"tui-hosted-dropdown",1,6)(2,"button",7)(3,"span",3),t.wR5(4,"app-menu-category-status",8),t.I0R(5,"mat-icon",9),t.OEk(6,"expand_more"),t.C$Y()()()()),2&n){const e=t.Gew(1),o=t.GaO(),r=t.Gew(1);t.E7m("content",r),t.yG2(4),t.E7m("status",o.category.status),t.yG2(),t.E7m("ngClass",t.S45(3,Ye,e.open))}}let Be=(()=>{class n{constructor(){this.notifications=(0,t.uUt)(c.E),this.destroy$=(0,t.uUt)(_.UF),this.deleteCategory=new t._w7,this.statusChange=new t._w7,this.categoryChange=new t._w7,this.category=null}delete(){this.notifications.confirm("Sei sicuro di voler eliminare la categoria?",{yes:"S\xEC, elimina la categoria",no:"Annulla"}).pipe((0,d.a)(this.destroy$)).subscribe({next:e=>{e&&this.deleteCategory.emit()}})}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-edit-menu-category-status"]],inputs:{category:"category"},outputs:{deleteCategory:"deleteCategory",statusChange:"statusChange",categoryChange:"categoryChange"},standalone:!0,features:[t.M5G([_.UF]),t.UHJ],decls:3,vars:1,consts:()=>{let e;return e="Elimina",[["dropdownContent",""],[3,"content"],["tuiOption","",3,"click"],[1,"flex","items-center"],[1,"me-1"],e,["dropdown",""],["tuiButton","","type","button","appearance","outline","size","l"],[1,"me-1",3,"status"],[1,"animation-speed-2",3,"ngClass"]]},template:function(o,r){1&o&&t.yuY(0,ve,7,0,"ng-template",null,0,t.gJz)(2,we,7,5,"tui-hosted-dropdown",1),2&o&&(t.yG2(2),t.C0Y(2,r.category&&r.category.status?2:-1))},dependencies:[it.GE,it.Qw,j.A$,j.yi,j.sP,dt.qL,Ge,f.CI,f.Kw,O.QF],encapsulation:2})}return n})();var Dt=i(4e3),ke=i(6684),$t=i(2300),gt=i(3797),ft=i(8048);const xe=["*"];let Ue=(()=>{class n{constructor(){this.destroy$=(0,t.uUt)(_.UF),this.notifications=(0,t.uUt)(c.E),this.categoriesService=(0,t.uUt)(s.S),this.removingPrice=(0,t.OCB)(!1),this.searchingDishes=(0,t.OCB)(!1),this.savingPrice=(0,t.OCB)(!1),this.loading=(0,t.S6b)(()=>this.savingPrice()||this.searchingDishes()||this.removingPrice()),this.categoryChanged=new t._w7,this.category=null,this.price=new m.Ku(null)}ngOnInit(){this.price.valueChanges.pipe((0,d.a)(this.destroy$),(0,Dt.a)(),(0,ke.I)(e=>e!=this.category?.price),(0,$t.o)(1500)).subscribe({next:e=>this.updateRemote(e)})}ngOnChanges(e){e.category&&this.price.patchValue(this.category?.price??null)}updateRemote(e){const o=this.category?.id;o&&(this.updateRemoteSub?.unsubscribe(),this.savingPrice.set(!0),this.updateRemoteSub=this.categoriesService.update(o,{price:e}).pipe((0,d.a)(this.destroy$),(0,g.U)(()=>this.savingPrice.set(!1))).subscribe({next:r=>{this.category=r,this.categoryChanged.emit(r),this.notifications.fireSnackBar("Prezzo salvato.")},error:r=>{this.notifications.fireSnackBar((0,T.mk)(r)||"Qualcosa \xE8 andato storto nel salvataggio del prezzo.")}}))}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-category-price"]],inputs:{category:"category"},outputs:{categoryChanged:"categoryChanged"},standalone:!0,features:[t.M5G([_.UF]),t.SYr,t.UHJ],ngContentSelectors:xe,decls:2,vars:1,consts:[["tuiTextfieldSize","l","tuiTextfieldPostfix","\u20ac",3,"formControl"]],template:function(o,r){1&o&&(t.kPM(),t.I0R(0,"tui-input",0),t._Xx(1),t.C$Y()),2&o&&t.E7m("formControl",r.price)},dependencies:[gt.CQ,gt.Oo,gt.cP,ft.aS,ft.rD,ft.We,m.sl,m.ue,m.ug,Tt.kh,f.CI],encapsulation:2,changeDetection:0})}return n})();function ze(n,E){1&n&&(t.SAx(0),t.aS0(1,6),t.k70())}function Ve(n,E){1&n&&(t.SAx(0),t.aS0(1,7),t.k70())}function He(n,E){if(1&n&&(t.I0R(0,"a",20),t.wVc(1,"urlTo"),t.I0R(2,"span",2)(3,"mat-icon",3),t.OEk(4,"link"),t.C$Y(),t.I0R(5,"span"),t.aS0(6,24),t.C$Y()()()),2&n){const e=t.GaO(3);t.E7m("routerLink",t.g7$(1,1,e.category.id,"menuCategory.public"))}}function Fe(n,E){if(1&n&&(t.I0R(0,"a",20),t.wVc(1,"urlTo"),t.I0R(2,"span",2)(3,"mat-icon",3),t.OEk(4,"share"),t.C$Y(),t.I0R(5,"span"),t.aS0(6,25),t.C$Y()()()),2&n){const e=t.GaO(3);t.E7m("routerLink",t.g7$(1,1,e.category.secret,"menuCategory.private"))}}function Xe(n,E){if(1&n){const e=t.KQA();t.I0R(0,"tui-data-list")(1,"button",20)(2,"span",2)(3,"mat-icon",3),t.OEk(4,"content_copy"),t.C$Y(),t.I0R(5,"span"),t.aS0(6,21),t.C$Y()()(),t.yuY(7,He,7,4,"a",20)(8,Fe,7,4,"a",20),t.I0R(9,"button",22),t.qCj("click",function(){t.usT(e);const r=t.GaO(2);return t.CGJ(r.confirmAndDelete())}),t.I0R(10,"span",2)(11,"mat-icon",3),t.OEk(12,"delete"),t.C$Y(),t.I0R(13,"span"),t.aS0(14,23),t.C$Y()()()()}if(2&n){const e=t.GaO(2);t.yG2(),t.E7m("routerLink","duplicate"),t.yG2(6),t.C0Y(7,!0===(null==e.category.visibility?null:e.category.visibility.public_visible)?7:-1),t.yG2(),t.C0Y(8,!0===(null==e.category.visibility?null:e.category.visibility.private_visible)?8:-1)}}function Qe(n,E){if(1&n){const e=t.KQA();t.I0R(0,"h4",9),t.aS0(1,26),t.C$Y(),t.I0R(2,"app-name-desc-eip",27),t.qCj("submittedChanges",function(r){t.usT(e);const C=t.GaO(2);return t.CGJ(C.saveNameDesc(r))}),t.C$Y()}if(2&n){const e=t.GaO(2);t.yG2(2),t.E7m("translations",e.category.translations)}}function Ke(n,E){if(1&n){const e=t.KQA();t.I0R(0,"div",8)(1,"div")(2,"h4",9),t.aS0(3,10),t.C$Y(),t.wR5(4,"app-show-images",11),t.I0R(5,"div",0)(6,"h4",9),t.aS0(7,12),t.C$Y(),t.I0R(8,"app-edit-menu-category-status",13),t.qCj("deleteCategory",function(){t.usT(e);const r=t.GaO();return t.CGJ(r.deleteCategory())})("statusChange",function(r){t.usT(e);const C=t.GaO();return t.CGJ(C.updateStatus(r))}),t.iHE("categoryChange",function(r){t.usT(e);const C=t.GaO();return t.kNx(C.category,r)||(C.category=r),t.CGJ(r)}),t.C$Y()(),t.I0R(9,"div",0)(10,"app-category-price",14),t.qCj("categoryChanged",function(r){t.usT(e);const C=t.GaO();return t.CGJ(C.setCategory(r))}),t.SAx(11),t.aS0(12,15),t.k70(),t.C$Y()()(),t.yuY(13,Xe,15,3,"ng-template",null,16,t.gJz),t.I0R(15,"div")(16,"tui-hosted-dropdown",17)(17,"button",18)(18,"mat-icon"),t.OEk(19,"more_vert"),t.C$Y()()()()(),t.yuY(20,Qe,3,1),t.I0R(21,"app-eip-category-visibility",19),t.iHE("categoryChange",function(r){t.usT(e);const C=t.GaO();return t.kNx(C.category,r)||(C.category=r),t.CGJ(r)}),t.C$Y()}if(2&n){const e=t.Gew(14),o=t.GaO();t.yG2(4),t.E7m("recordType","Menu::Category")("recordId",o.category.id)("images",o.category.images),t.yG2(4),t.OKB("category",o.category),t.yG2(2),t.E7m("category",o.category),t.yG2(6),t.E7m("content",e),t.yG2(4),t.C0Y(20,o.category.translations?20:-1),t.yG2(),t.OKB("category",o.category)}}const Je=[[["","breadcrumb",""]]],je=n=>({rotate180:n}),We=["[breadcrumb]"];let qe=(()=>{class n{constructor(){this.destroy$=(0,t.uUt)(_.UF),this.service=(0,t.uUt)(s.S),this.notifications=(0,t.uUt)(c.E),this.router=(0,t.uUt)(a.E5),this.route=(0,t.uUt)(a.gV),this.categoryChange=new t._w7,this.category=null,this.expanded=!1,this.loading=(0,t.OCB)(!1)}saveNameDesc(e){const o=this.category?.id;o&&(this.loading.set(!0),this.service.update(o,e).pipe((0,d.a)(this.destroy$),(0,g.U)(()=>this.loading.set(!1))).subscribe({next:r=>{this.notifications.fireSnackBar("Traduzioni aggiornate."),this.categoryChange.emit(r),this.category=r},error:r=>{this.notifications.error((0,T.mk)(r)||"Qualcosa \xE8 andato storto.")}}))}updateStatus(e){const o=this.category?.id;!e||!o||(this.loading.set(!0),this.service.update(o,{status:e}).pipe((0,d.a)(this.destroy$),(0,g.U)(()=>this.loading.set(!1))).subscribe({next:r=>{this.notifications.fireSnackBar("Stato aggiornato."),this.categoryChange.emit(r),this.category=r},error:r=>{this.notifications.error((0,T.mk)(r)||"Qualcosa \xE8 andato storto.")}}))}deleteCategory(){const e=this.category?.id;e&&(this.loading.set(!0),this.service.destroy(e).pipe((0,d.a)(this.destroy$),(0,g.U)(()=>this.loading.set(!1))).subscribe({next:()=>{this.notifications.fireSnackBar("Categoria eliminata."),this.router.navigate(["../"],{relativeTo:this.route})},error:o=>{this.notifications.error((0,T.mk)(o)||"Qualcosa \xE8 andato storto.")}}))}confirmAndDelete(){this.notifications.confirm("Sei sicuro di voler eliminare la categoria?",{yes:"S\xEC, elimina la categoria",no:"Annulla"}).pipe((0,d.a)(this.destroy$)).subscribe({next:e=>{this.deleteCategory()}})}setCategory(e){this.category=e,this.categoryChange.emit(e)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-category-details"]],inputs:{category:"category"},outputs:{categoryChange:"categoryChange"},standalone:!0,features:[t.M5G([_.UF]),t.UHJ],ngContentSelectors:We,decls:13,vars:7,consts:()=>{let e,o,r,C,B,w,k,V,q,Z;return e="Chiudi dettagli",o="Dettagli categoria",r="Immagini categoria",C="Stato categoria",B="Prezzo fisso per la categoria",w="Duplica",k="Elimina",V="Anteprima link pubblico",q="Anteprima link privato",Z="Traduzioni",[[1,"mb-3"],["tuiButton","","appearance","flat","size","m",3,"click"],[1,"flex","items-center"],[1,"me-1"],[1,"animation-speed-2",3,"ngClass"],[3,"expanded"],e,o,[1,"flex","justify-between"],[1,"mb-1","me-1"],r,[1,"mb-3",3,"recordType","recordId","images"],C,[1,"mb-3",3,"category","deleteCategory","statusChange","categoryChange"],[3,"category","categoryChanged"],B,["actions",""],[3,"content"],["tuiIconButton","","type","button","appearance","outline","size","m"],[3,"category","categoryChange"],["type","button","tuiOption","",3,"routerLink"],w,["type","button","tuiOption","",3,"click"],k,V,q,Z,[1,"mb-3",3,"translations","submittedChanges"]]},template:function(o,r){1&o&&(t.kPM(Je),t.I0R(0,"h1"),t.OEk(1),t.C$Y(),t._Xx(2),t.I0R(3,"div",0)(4,"button",1),t.qCj("click",function(){return r.expanded=!r.expanded}),t.I0R(5,"span",2)(6,"span",3),t.yuY(7,ze,2,0,"ng-container")(8,Ve,2,0),t.C$Y(),t.I0R(9,"mat-icon",4),t.OEk(10,"expand_more"),t.C$Y()()()(),t.I0R(11,"tui-expand",5),t.yuY(12,Ke,22,8),t.C$Y()),2&o&&(t.yG2(),t.oRS(" ",null==r.category?null:r.category.name,"\n"),t.yG2(6),t.C0Y(7,r.expanded?7:8),t.yG2(2),t.E7m("ngClass",t.S45(5,je,r.expanded)),t.yG2(2),t.E7m("expanded",r.expanded),t.yG2(),t.C0Y(12,r.category?12:-1))},dependencies:[M.g,ye,Ae.O,Tt.kh,Tt.st,f.CI,f.Kw,dt.qL,O.QF,Be,it.GE,it.Qw,j.A$,j.yi,j.sP,a.ER,ut.S,Ue],changeDetection:0})}return n})();var Ze=i(6354),tn=i(5193),en=i(5656),Gt=i(6376),nn=i(1104),vt=i(4856),Yt=i(5e3),on=i(9212),an=i(9052),wt=i(5892),Mt=i(3400),sn=i(8392),rn=i(7936);const _n=(n,E)=>E.id;function ln(n,E){if(1&n&&(t.I0R(0,"span",19),t.OEk(1),t.C$Y()),2&n){const e=t.GaO();let o;t.yG2(),t.oRS("(",null==(o=e.data())||null==o.metadata?null:o.metadata.total_count,")")}}function cn(n,E){if(1&n&&(t.I0R(0,"a",21),t.wVc(1,"urlTo"),t.I0R(2,"span",1)(3,"mat-icon",19),t.OEk(4,"share"),t.C$Y(),t.SAx(5),t.aS0(6,23),t.k70(),t.C$Y()()),2&n){const e=t.GaO(2);t.E7m("routerLink",t.g7$(1,1,e.parentCategoryId,"menuCategory.linkDish"))}}function un(n,E){if(1&n&&(t.I0R(0,"tui-data-list",20)(1,"a",21),t.wVc(2,"urlTo"),t.I0R(3,"span",1)(4,"mat-icon",19),t.OEk(5,"add_circle"),t.C$Y(),t.I0R(6,"span"),t.aS0(7,22),t.C$Y()()(),t.yuY(8,cn,7,4,"a",21),t.C$Y()),2&n){const e=t.GaO();let o;t.yG2(),t.E7m("routerLink",t.g7$(2,2,null!==(o=e.parentCategoryId)&&void 0!==o?o:"","menuCategory.createDish")),t.yG2(7),t.C0Y(8,e.parentCategoryId?8:-1)}}function dn(n,E){1&n&&(t.SAx(0),t.aS0(1,26),t.k70())}function gn(n,E){1&n&&(t.SAx(0),t.aS0(1,27),t.k70())}function Cn(n,E){if(1&n){const e=t.KQA();t.I0R(0,"tui-data-list",20)(1,"button",24),t.qCj("click",function(){t.usT(e);const r=t.GaO();return t.CGJ(r.triggerFiltering())}),t.I0R(2,"span",1)(3,"mat-icon",19),t.OEk(4,"search"),t.C$Y(),t.SAx(5),t.aS0(6,25),t.k70(),t.C$Y()(),t.I0R(7,"button",24),t.qCj("click",function(){t.usT(e);const r=t.GaO();return t.CGJ(r.triggerOrdering())}),t.I0R(8,"span",1)(9,"mat-icon",19),t.OEk(10,"sort_by_alpha"),t.C$Y(),t.yuY(11,dn,2,0,"ng-container")(12,gn,2,0),t.C$Y()()()}if(2&n){const e=t.GaO();t.yG2(11),t.C0Y(11,e.ordering()?11:12)}}function En(n,E){if(1&n){const e=t.KQA();t.I0R(0,"div",28)(1,"form",29),t.qCj("ngSubmit",function(){t.usT(e);const r=t.GaO();return t.CGJ(r.submitFilters())}),t.I0R(2,"button",30)(3,"mat-icon"),t.OEk(4,"search"),t.C$Y()(),t.I0R(5,"tui-input",31),t.SAx(6),t.aS0(7,32),t.k70(),t.wR5(8,"input",33),t.C$Y()()()}if(2&n){const e=t.GaO();t.yG2(),t.E7m("formGroup",e.filters),t.yG2(),t.E7m("showLoader",e.searching()),t.yG2(3),t.E7m("tuiTextfieldSize","m"),t.yG2(3),t.E7m("autocomplete",!1)}}function mn(n,E){if(1&n){const e=t.KQA();t.I0R(0,"button",34),t.qCj("click",function(){t.usT(e);const r=t.GaO();return t.CGJ(r.orderAllBy("name"))}),t.SAx(1),t.aS0(2,35),t.k70(),t.C$Y()}}function Tn(n,E){if(1&n){const e=t.KQA();t.I0R(0,"tui-loader",50)(1,"p"),t.aS0(2,51),t.C$Y(),t.I0R(3,"div",52)(4,"button",53),t.qCj("click",function(){t.usT(e);const r=t.GaO(3).$implicit,C=t.GaO();return t.CGJ(C.deleteDish(r))}),t.SAx(5),t.aS0(6,54),t.k70(),t.C$Y(),t.I0R(7,"button",55),t.qCj("click",function(){t.usT(e);const r=t.GaO(3).$implicit,C=t.GaO();return t.CGJ(C.removeDishFromCategory(r))}),t.SAx(8),t.aS0(9,56),t.k70(),t.C$Y(),t.I0R(10,"button",57),t.qCj("click",function(){t.usT(e);const r=t.GaO(4);return t.CGJ(r.closeModal())}),t.SAx(11),t.aS0(12,58),t.k70(),t.C$Y()()()}if(2&n){const e=t.GaO(4);t.E7m("overlay",!0)("showLoader",e.deleting())}}const fn=n=>["dish",n],Sn=n=>["dish",n,"duplicate"];function pn(n,E){if(1&n){const e=t.KQA();t.I0R(0,"tui-data-list",20)(1,"a",21)(2,"span",1)(3,"mat-icon",19),t.OEk(4,"visibility"),t.C$Y(),t.I0R(5,"span"),t.aS0(6,45),t.C$Y()()(),t.I0R(7,"a",21)(8,"span",1)(9,"mat-icon",19),t.OEk(10,"content_copy"),t.C$Y(),t.I0R(11,"span"),t.aS0(12,46),t.C$Y()()(),t.yuY(13,Tn,13,2,"ng-template",null,47,t.gJz),t.I0R(15,"button",48),t.qCj("click",function(){t.usT(e);const r=t.Gew(14),C=t.GaO(3);return t.CGJ(C.showModal(r))}),t.I0R(16,"span",1)(17,"mat-icon",19),t.OEk(18,"delete"),t.C$Y(),t.I0R(19,"span"),t.aS0(20,49),t.C$Y()()()()}if(2&n){const e=t.GaO(2).$implicit;t.yG2(),t.E7m("routerLink",t.S45(2,fn,e.id)),t.yG2(6),t.E7m("routerLink",t.S45(4,Sn,e.id))}}function On(n,E){if(1&n&&t.yuY(0,pn,21,6,"tui-data-list",44),2&n){const e=t.GaO().$implicit;t.E7m("ngIf",e)}}function In(n,E){if(1&n&&t.wR5(0,"app-show-image",59),2&n){const e=t.GaO().$implicit;t.E7m("image",e.images[0])}}function hn(n,E){1&n&&(t.I0R(0,"button",43)(1,"mat-icon",60),t.OEk(2,"drag_handle"),t.C$Y()())}function Mn(n,E){if(1&n&&(t.I0R(0,"tui-hosted-dropdown",6)(1,"button",43)(2,"mat-icon"),t.OEk(3,"more_vert"),t.C$Y()()()),2&n){t.GaO();const e=t.Gew(1);t.E7m("content",e)}}const Bt=(n,E)=>({categoryId:n,itemId:E});function Rn(n,E){if(1&n&&(t.yuY(0,On,1,1,"ng-template",null,36,t.gJz),t.I0R(2,"tui-island",37)(3,"div",38)(4,"span",1)(5,"a",39),t.wVc(6,"urlTo"),t.yuY(7,In,1,1,"app-show-image",40),t.C$Y(),t.I0R(8,"div")(9,"a",41),t.wVc(10,"urlTo"),t.OEk(11),t.C$Y(),t.I0R(12,"p",42),t.OEk(13),t.C$Y()()(),t.yuY(14,hn,3,0,"button",43)(15,Mn,4,1),t.C$Y()()),2&n){const e=E.$implicit,o=t.GaO();t.yG2(5),t.E7m("routerLink",t.g7$(6,6,t.IBC(12,Bt,o.parentCategoryId,e.id),"dish.show")),t.yG2(2),t.E7m("ngIf",e&&e.images&&e.images.length>0),t.yG2(2),t.E7m("routerLink",t.g7$(10,9,t.IBC(15,Bt,o.parentCategoryId,e.id),"dish.show")),t.yG2(2),t.cNF(e.name),t.yG2(2),t.cNF(e.status),t.yG2(),t.C0Y(14,o.ordering()?14:15)}}function yn(n,E){1&n&&t.wR5(0,"tui-loader",61),2&n&&t.E7m("showLoader",!0)}function An(n,E){1&n&&(t.I0R(0,"p",62),t.SAx(1),t.aS0(2,63),t.k70(),t.C$Y())}function Nn(n,E){if(1&n&&t.yuY(0,yn,1,1,"tui-loader",61)(1,An,3,0),2&n){const e=t.GaO();t.C0Y(0,e.searching()?0:1)}}const Pn=()=>[10,20,50,100];function Ln(n,E){if(1&n){const e=t.KQA();t.I0R(0,"tui-table-pagination",64),t.qCj("paginationChange",function(r){t.usT(e);const C=t.GaO();return t.CGJ(C.paginationChange(r))}),t.C$Y()}if(2&n){const e=t.GaO();let o;t.E7m("items",t.q4q(2,Pn))("total",null!==(o=null==(o=e.data())||null==o.metadata?null:o.metadata.total_count)&&void 0!==o?o:0)}}const bn=n=>({rotate180:n}),Dn=n=>({invisible:n}),$n=n=>({"allow-reorder":n});let Gn=(()=>{class n{constructor(){this.service=(0,t.uUt)(l.k),this.categoriesService=(0,t.uUt)(s.S),this.destroy$=(0,t.uUt)(_.UF),this.notifications=(0,t.uUt)(c.E),this.dialogs=(0,t.uUt)(N._k),this.data=(0,t.OCB)(null),this.items=(0,t.S6b)(()=>this.data()?.items??[]),this.filtering=(0,t.OCB)(!1),this.ordering=(0,t.OCB)(!1),this.searching=(0,t.OCB)(!1),this.deleting=(0,t.OCB)(!1),this.moving=(0,t.OCB)(!1),this.loading=(0,t.S6b)(()=>this.searching()||this.deleting()||this.moving()),this.reorderEnabled=(0,t.OCB)(!0),this.filters=new m.WC({query:new m.Ku(null)}),this.offset=0,this.per_page=10,this.parentCategoryId=null}ngOnInit(){this.search(),this.filters.valueChanges.pipe((0,d.a)(this.destroy$),(0,Dt.a)(),(0,$t.o)(200),(0,on.y)(()=>this.offset=0)).subscribe({next:()=>this.search()})}ngOnChanges(e){e.parentCategoryId&&this.search()}triggerFiltering(){this.filtering.set(!this.filtering()),this.search()}submitFilters(){this.search()}paginationChange(e){this.per_page=e.size,this.offset=e.page,this.search()}search(e=this.parseFilters()){this.searchSub?.unsubscribe(),this.searching.set(!0),this.searchSub=this.service.search(e).pipe((0,d.a)(this.destroy$),(0,g.U)(()=>this.searching.set(!1))).subscribe({next:o=>this.data.set(o),error:o=>{this.data.set(null),this.notifications.error((0,T.mk)(o)||"Qualcosa \xE8 andato storto. Riprova pi\xF9 tardi.")}})}parseFilters(){const e=this.filters.value,o={per_page:this.per_page,offset:this.offset};return this.filtering()&&e.query&&(o.query=e.query),o.category_id=this.parentCategoryId??"",o}deleteDish(e){const o=e?.id;o&&(this.deleting.set(!0),this.service.destroy(o).pipe((0,d.a)(this.destroy$),(0,g.U)(()=>this.deleting.set(!1)),(0,g.U)(()=>this.closeModal())).subscribe({next:()=>{this.notifications.fireSnackBar("Piatto eliminato."),this.search()},error:r=>{this.notifications.error((0,T.mk)(r)||"Qualcosa \xE8 andato storto.")}}))}removeDishFromCategory(e){const o=e?.id;o&&this.parentCategoryId&&(this.deleting.set(!0),this.categoriesService.removeDish(this.parentCategoryId,o).pipe((0,d.a)(this.destroy$),(0,g.U)(()=>this.deleting.set(!1)),(0,g.U)(()=>this.closeModal())).subscribe({next:()=>{this.notifications.fireSnackBar("Piatto rimosso dalla categoria."),this.search()},error:r=>{this.notifications.error((0,T.mk)(r)||sn.a)}}))}drop(e){if(e.previousIndex===e.currentIndex)return;const o=this.items(),r=o[e.previousIndex]?.id;if(!r)return;const C=this.parentCategoryId;(0,Mt.qv)(o,e.previousIndex,e.currentIndex);const B=C?{to_index:e.currentIndex,category_id:C}:{to_index:e.currentIndex};this.moving.set(!0),this.service.move(r,B).pipe((0,d.a)(this.destroy$),(0,g.U)(()=>this.moving.set(!1)),(0,g.U)(()=>this.search())).subscribe({error:w=>this.notifications.error((0,T.mk)(w)||"Qualcosa \xE8 andato storto.")})}triggerOrdering(){this.ordering()||this.notifications.fireSnackBar("\n           Sposta i piatti trascinandoli con il bottone sul lato destro di\n          ciascuna categoria. \n        ","Capito",{duration:5e3}),this.ordering.set(!this.ordering())}orderAllBy(e){const o=this.parentCategoryId;o&&(this.moving.set(!0),this.categoriesService.orderDishes(o,e).pipe((0,d.a)(this.destroy$),(0,g.U)(()=>this.moving.set(!1))).subscribe({next:()=>{this.notifications.fireSnackBar("\n           Tutti i piatti ordinati per \n          " + e + "\n        "),this.ordering.set(!1),this.search()},error:r=>this.notifications.error((0,T.mk)(r)||"Qualcosa \xE8 andato storto.")}))}showModal(e,o={}){this.modalSub=this.dialogs.open(e,{size:"auto"}).subscribe()}closeModal(){this.modalSub?.unsubscribe()}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-list-dishes"]],inputs:{parentCategoryId:"parentCategoryId"},standalone:!0,features:[t.M5G([s.S]),t.SYr,t.UHJ],decls:33,vars:19,consts:()=>{let e,o,r,C,B,w,k,V,q,Z,Q,st,rt,_t,F,St,pt;return e="Piatti",o="Aggiungi",r="Crea nuovo",C="Associa esistente",B="Filtra elementi",w="Fatto.",k="Riordina",V="Filtra per nome o descrizione",q="Ordina tutti per nome",Z="Visualizza",Q="Duplica",st="Rimuovi",rt="\n           Vuoi eliminare definitivamente questo piatto, oppure solo rimuoverlo\n          da questa categoria? \n        ",_t="Elimina definitivamente",F="Rimuovi da questa categoria",St="Annulla",pt="Non ci sono categorie",[[1,"flex","items-center","justify-between"],[1,"flex","items-center"],[1,"me-1",3,"click"],e,["class","me-1"],["addItemDropdownContent",""],[3,"content"],["addDropdown",""],["tuiButton","","appearance","flat","type","button","size","m"],o,[1,"animation-speed-2",3,"ngClass"],["categoriesOptions",""],["tuiIconButton","","size","m","appearance","outline","type","button"],["tuiProgressBar","","max","100",3,"ngClass","size","value"],["class","mt-3"],["type","button","size","l","tuiButton","","appearance","flat"],[1,"text-slate-400","my-3"],["cdkDropList","",1,"items-list",3,"ngClass","cdkDropListDisabled","cdkDropListDropped"],["class","my-2",3,"items","total"],[1,"me-1"],["role","menu"],["tuiOption","",3,"routerLink"],r,C,["tuiOption","",3,"click"],B,w,k,[1,"mt-3"],[1,"flex","items-center",3,"formGroup","ngSubmit"],["type","submit","tuiIconButton","","appearance","flat",1,"me-2",3,"showLoader"],["formControlName","query","tuiAutoFocus","",1,"grow",3,"tuiTextfieldSize"],V,["type","text","tuiTextfield","",3,"autocomplete"],["type","button","size","l","tuiButton","","appearance","flat",3,"click"],q,["actions",""],["cdkDrag","",1,"mb-2"],[1,"flex","justify-between","items-center"],[3,"routerLink"],["style","max-width: 100px;","class","inline-block rounded me-2",3,"image",4,"ngIf"],["tuiLink","",1,"text-lg",3,"routerLink"],[1,"tui-island__category"],["cdkDragHandle","","size","m","appearance","outline","type","button","tuiIconButton",""],["role","menu",4,"ngIf"],Z,Q,["removeDishDropdownTemplate",""],["type","button","tuiOption","",3,"click"],st,["size","l",3,"overlay","showLoader"],rt,[1,"grid","grid-cols-1","md:grid-cols-3","gap-3"],["type","button","tuiButton","","appearance","secondary-destructive",3,"click"],_t,["type","button","tuiButton","","appearance","secondary",3,"click"],F,["type","button","tuiButton","","appearance","outline",3,"click"],St,[1,"inline-block","rounded","me-2",2,"max-width","100px",3,"image"],[1,"drag-shake"],["size","m",3,"showLoader"],[1,"text-center"],pt,[1,"my-2",3,"items","total","paginationChange"]]},template:function(o,r){if(1&o&&(t.I0R(0,"div",0)(1,"div",1)(2,"h2",2),t.qCj("click",function(){return r.search()}),t.SAx(3),t.aS0(4,3),t.k70(),t.C$Y(),t.yuY(5,ln,2,1,"span",4)(6,un,9,5,"ng-template",null,5,t.gJz),t.I0R(8,"tui-hosted-dropdown",6,7)(10,"button",8)(11,"span",1)(12,"mat-icon"),t.OEk(13,"add"),t.C$Y(),t.I0R(14,"span"),t.aS0(15,9),t.C$Y(),t.I0R(16,"mat-icon",10),t.OEk(17,"expand_more"),t.C$Y()()()()(),t.yuY(18,Cn,13,1,"ng-template",null,11,t.gJz),t.I0R(20,"tui-hosted-dropdown",6)(21,"button",12)(22,"mat-icon"),t.OEk(23,"more_vert"),t.C$Y()()()(),t.wR5(24,"progress",13),t.yuY(25,En,9,4,"div",14)(26,mn,3,0,"button",15),t.wR5(27,"hr",16),t.I0R(28,"div",17),t.qCj("cdkDropListDropped",function(B){return r.drop(B)}),t.c53(29,Rn,16,18,null,null,_n,!1,Nn,2,1),t.C$Y(),t.yuY(32,Ln,1,3,"tui-table-pagination",18)),2&o){const C=t.Gew(7),B=t.Gew(9),w=t.Gew(19);let k,V;t.yG2(5),t.C0Y(5,null!=(k=r.data())&&null!=k.metadata&&k.metadata.total_count?5:-1),t.yG2(3),t.E7m("content",C),t.yG2(8),t.E7m("ngClass",t.S45(13,bn,B.open)),t.yG2(4),t.E7m("content",w),t.yG2(4),t.E7m("ngClass",t.S45(15,Dn,!r.loading()))("size","s")("value",void 0),t.yG2(),t.C0Y(25,r.filtering()?25:-1),t.yG2(),t.C0Y(26,r.ordering()?26:-1),t.yG2(2),t.E7m("ngClass",t.S45(17,$n,r.reorderEnabled()))("cdkDropListDisabled",!r.reorderEnabled()),t.yG2(),t.oho(r.items()),t.yG2(3),t.C0Y(32,null!=(V=r.data())&&null!=V.metadata&&V.metadata.next_page||null!=(V=r.data())&&null!=V.metadata&&V.metadata.prev_page?32:-1)}},dependencies:[a.ER,ot.w,ot.C,dt.qL,it.GE,it.Qw,f.CI,f.Kw,Gt.k,Gt.C,nn.t,tn.ms,j.A$,j.yi,j.sP,O.u_,an.y,ut.S,m.sl,m.sz,m.ue,m.u,m.uW,m.Wo,gt.CQ,gt.Oo,gt.cP,rn.b,Yt.m6,Yt.gJ,ft.aS,ft.rD,S.Sk,S.Cb,O.QF,wt.yy,wt.Ws,Mt.Cm,Mt.w5,Mt.A3,en.WY,vt.Gs,vt.qA],styles:["[_nghost-%COMP%]   .items-list.allow-reorder.cdk-drop-list-dragging[_ngcontent-%COMP%]   tui-island[cdkDrag][_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   .items-list.allow-reorder[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .items-list.allow-reorder[_ngcontent-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   [cdkDragHandle][_ngcontent-%COMP%]{cursor:move}"]})}return n})(),vn=(()=>{class n{constructor(){this.parent=null}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-list-items"]],hostAttrs:[1,"grow","flex","flex-col","md:flex-row"],inputs:{parent:"parent"},standalone:!0,features:[t.UHJ],decls:4,vars:2,consts:[[1,"flex","flex-col","grow-0","mb-5","md:me-3","md:grow"],[1,"border-solid","border-slate-200","p-2","rounded-md","border",3,"parentCategoryId"],[1,"flex","flex-col","grow-0","mb-5","md:grow"]],template:function(o,r){1&o&&(t.I0R(0,"div",0),t.wR5(1,"app-list-categories",1),t.C$Y(),t.I0R(2,"div",2),t.wR5(3,"app-list-dishes",1),t.C$Y()),2&o&&(t.yG2(),t.E7m("parentCategoryId",null==r.parent?null:r.parent.id),t.yG2(2),t.E7m("parentCategoryId",null==r.parent?null:r.parent.id))},dependencies:[f.CI,ot.w,it.GE,Ze.M,Gn],encapsulation:2})}return n})();var Yn=i(4392),Pt=i(1588);function wn(n,E){1&n&&t.C_f(0)}function Bn(n,E){if(1&n&&t.wR5(0,"tui-svg",4),2&n){const e=t.GaO(2);t.E7m("src",e.options.icon)}}function kn(n,E){if(1&n&&(t.SAx(0),t.C_f(1,2),t.yuY(2,Bn,1,1,"tui-svg",3),t.k70()),2&n){const e=E.$implicit,o=E.last;t.yG2(),t.E7m("ngTemplateOutlet",e),t.yG2(),t.E7m("ngIf",!o)}}const xt=(0,b.AL)({icon:"tuiIconChevronRight",size:"m",mode:"onLight"});let xn=(()=>{class n extends D.Y{constructor(e){super(),this.options=e,this.size=this.options.size,this.items=Yn.Jh,this.mode=this.options.mode}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(xt))},n.\u0275cmp=t.In1({type:n,selectors:[["tui-breadcrumbs"]],contentQueries:function(e,o,r){if(1&e&&t.szK(r,Pt.S,4,t.Yw2),2&e){let C;t.wto(C=t.Gqi())&&(o.items=C)}},hostVars:1,hostBindings:function(e,o){2&e&&t.e48("data-size",o.size)},inputs:{size:"size"},features:[t.M5G([{provide:D.Y,useExisting:(0,t.wd)(()=>n)}]),t.eg9],decls:3,vars:4,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["class","t-icon",3,"src",4,"ngIf"],[1,"t-icon",3,"src"]],template:function(e,o){1&e&&(t.yuY(0,wn,1,0,"ng-container",0),t.wVc(1,"async"),t.yuY(2,kn,3,2,"ng-container",1)),2&e&&(t.E7m("ngIf",t.kDX(1,2,o.items.changes)),t.yG2(2),t.E7m("ngForOf",o.items))},dependencies:[y.Wu,O.u_,O.ay,O.XV,O.a],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:2.5rem;white-space:nowrap;font:var(--tui-font-text-s);color:var(--tui-text-01)}[data-size=l][_nghost-%COMP%]{font:var(--tui-font-text-m)}.t-icon[_ngcontent-%COMP%]{margin:0 .25rem;opacity:.4}"],changeDetection:0}),n})(),Un=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.a4G({type:n}),n.\u0275inj=t.s3X({imports:[[O.MD,y.Yt,Pt.s]]}),n})();var zn=i(9888),Ut=i(4259);function Vn(n,E){if(1&n&&(t.I0R(0,"a",4),t.OEk(1),t.C$Y()),2&n){const e=E.$implicit,o=t.GaO(4);t._6D("routerLink",o.items[e].url),t.yG2(),t.oRS(" ",o.items[e].name," ")}}function Hn(n,E){if(1&n&&(t.I0R(0,"tui-data-list"),t.yuY(1,Vn,2,2,"a",3),t.C$Y()),2&n){const e=t.GaO(3);t.yG2(),t.E7m("tuiRepeatTimesOf",e.items.length-e.max)}}function Fn(n,E){if(1&n&&(t.I0R(0,"tui-hosted-dropdown",5),t.wR5(1,"button",6),t.C$Y()),2&n){t.GaO();const e=t.Gew(1);t.E7m("content",e)}}function Xn(n,E){1&n&&t.yuY(0,Hn,2,1,"ng-template",null,1,t.gJz)(2,Fn,2,1,"tui-hosted-dropdown",2)}function Qn(n,E){if(1&n&&(t.I0R(0,"a",8),t.OEk(1),t.C$Y()),2&n){const e=t.GaO().$implicit,o=t.GaO(2);t._6D("routerLink",o.items[e+o.items.length-o.max].url),t.yG2(),t.oRS(" ",o.items[e+o.items.length-o.max].name," ")}}function Kn(n,E){1&n&&(t.SAx(0),t.yuY(1,Qn,2,2,"a",7),t.k70())}function Jn(n,E){if(1&n&&(t.I0R(0,"tui-breadcrumbs"),t.yuY(1,Xn,3,0)(2,Kn,2,0,"ng-container",0),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.C0Y(1,e.items.length>e.max?1:-1),t.yG2(),t.E7m("tuiRepeatTimesOf",e.max)}}let jn=(()=>{class n{constructor(){this.urlTo=(0,t.uUt)(ut.S),this.items=[],this.max=1,this.includeRoot=!0}set breadcrumbs(e){this.parseBreadcrumbs(e??[]),this.max=this.items.length}parseBreadcrumbs(e){this.items=[],this.includeRoot&&this.items.push({url:"/admin/menu/",name:"Menu"}),e&&e.forEach(o=>{const r=this.urlTo.transform(o.id,"menuCategory.show");r?this.items.push({url:r,name:o.name??`no-name #${o.id}`}):console.error("Invalid url for category",{item:o,url:r})})}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-category-breadcrumbs"]],inputs:{breadcrumbs:"breadcrumbs",includeRoot:"includeRoot"},standalone:!0,features:[t.M5G([ut.S]),t.UHJ],decls:1,vars:1,consts:[[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["content",""],[3,"content",4,"tuiItem"],["tuiOption","",3,"routerLink",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["tuiOption","",3,"routerLink"],[3,"content"],["appearance","secondary","icon","tuiIconMoreHorizontal","size","xs","title","More","tuiIconButton",""],["tuiLink","",3,"routerLink",4,"tuiItem"],["tuiLink","",3,"routerLink"]],template:function(o,r){1&o&&t.yuY(0,Jn,3,2,"tui-breadcrumbs"),2&o&&t.C0Y(0,r.items.length>0?0:-1)},dependencies:[Un,xn,Pt.S,j.A$,j.yi,j.sP,Ut.U9,Ut._k,a.ER,it.GE,it.Qw,f.CI,f.Kw,ot.w,ot.C,zn.Q7,m.y],changeDetection:0})}return n})();function Wn(n,E){1&n&&t.wR5(0,"tui-loader",0),2&n&&t.E7m("showLoader",!0)("size","xl")}function qn(n,E){if(1&n){const e=t.KQA();t.I0R(0,"app-category-details",1),t.qCj("categoryChange",function(r){t.usT(e);const C=t.GaO();return t.CGJ(C.category.set(r))}),t.wR5(1,"app-category-breadcrumbs",2),t.C$Y(),t.wR5(2,"app-list-items",3)}if(2&n){const e=t.GaO();t.E7m("category",e.category()),t.yG2(),t.E7m("breadcrumbs",e.breadcrumbs()),t.yG2(),t.E7m("parent",e.category())}}function Zn(n,E){if(1&n&&(t.I0R(0,"h1"),t.aS0(1,4),t.C$Y(),t.I0R(2,"a",5)(3,"span"),t.aS0(4,6),t.C$Y()()),2&n){const e=t.GaO();t.yG2(),t.oBb(e.categoryId),t.Ylm(1)}}let to=(()=>{class n{constructor(){this.route=(0,t.uUt)(a.gV),this.router=(0,t.uUt)(a.E5),this.categoriesService=(0,t.uUt)(s.S),this.dishesService=(0,t.uUt)(l.k),this.destroy$=(0,t.uUt)(_.UF),this.notifications=(0,t.uUt)(c.E),this.categoryId=null,this.loadingData=(0,t.OCB)(!1),this.loadingCategory=(0,t.OCB)(!1),this.loading=(0,t.S6b)(()=>this.loadingCategory()||this.loadingData()),this.category=(0,t.OCB)(null),this.data=(0,t.OCB)(null),this.breadcrumbs=(0,t.S6b)(()=>this.data()?.breadcrumbs??[]),this.max=1}ngOnInit(){this.route.params.pipe((0,d.a)(this.destroy$)).subscribe(e=>{this.categoryId=Number(e.category_id),console.assert(!isNaN(this.categoryId)&&this.categoryId>0,"Category id is required"),this.loadCategory(),this.loadData()})}loadCategory(e=this.categoryId){console.assert(!isNaN(e)&&e>0,"Category id is required"),this.loadingCategory.set(!0),this.categoriesService.show(e).pipe((0,d.a)(this.destroy$),(0,g.U)(()=>this.loadingCategory.set(!1))).subscribe({next:o=>this.setCategory(o),error:o=>{this.setCategory(null),this.notifications.error((0,T.mk)(o)||"Qualcosa \xE8 andato storto. Riprova pi\xF9 tardi.")}})}loadData(e=this.categoryId){console.assert(!isNaN(e)&&e>0,"Category id is required"),this.loadingData.set(!0),this.categoriesService.dashboardData(e).pipe((0,d.a)(this.destroy$),(0,g.U)(()=>this.loadingData.set(!1))).subscribe({next:o=>this.data.set(o),error:o=>this.notifications.error((0,T.mk)(o)||"Qualcosa \xE8 andato storto. Riprova pi\xF9 tardi.")})}setCategory(e){this.category.set(e)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-category-dashboard"]],hostAttrs:[1,"grow","flex","flex-col"],standalone:!0,features:[t.M5G([_.UF]),t.UHJ],decls:4,vars:1,consts:()=>{let e,o;return e="\n           Categoria # \n          " + "\ufffd0\ufffd" + "\n           non trovata. \n        ",o="Torna al men\xF9",[[3,"showLoader","size"],[3,"category","categoryChange"],["breadcrumb","",1,"mb-3",3,"breadcrumbs"],[3,"parent"],e,["tuiLink","","routerLink","/admin/menu"],o]},template:function(o,r){1&o&&(t.yuY(0,Wn,1,2,"tui-loader",0)(1,qn,3,3)(2,Zn,5,1),t.wR5(3,"router-outlet")),2&o&&t.C0Y(0,r.loading()?0:r.category()?1:2)},dependencies:[qe,S.Sk,S.Cb,vn,a.cP,jn,ot.w,ot.C,a.ER],changeDetection:0})}return n})()},7656:(v,u,i)=>{"use strict";i.d(u,{W:()=>a,g:()=>_});var t=i(4496);let _=(()=>{class s{constructor(){this.indeterminate=!1,this.checked=!1,this.tuiCheckedChange=new t._w7}get isChecked(){return this.checked}get isIndeterminate(){return this.indeterminate}set tuiChecked(c){this.checked=c||!1,this.indeterminate=null===c}onChange({checked:c}){this.checked=c,this.indeterminate=!1,this.tuiCheckedChange.emit(c)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275dir=t.Sc5({type:s,selectors:[["input","tuiChecked",""],["input","tuiCheckedChange",""]],hostVars:2,hostBindings:function(c,d){1&c&&t.qCj("change",function(T){return d.onChange(T.target)}),2&c&&t.SoX("checked",d.isChecked)("indeterminate",d.isIndeterminate)},inputs:{tuiChecked:"tuiChecked"},outputs:{tuiCheckedChange:"tuiCheckedChange"}}),s})(),a=(()=>{class s{}return s.\u0275fac=function(c){return new(c||s)},s.\u0275mod=t.a4G({type:s}),s.\u0275inj=t.s3X({}),s})()},7176:(v,u,i)=>{"use strict";i.d(u,{S2:()=>H,ie:()=>$,qE:()=>b,qu:()=>f});var t=i(4496),_=i(3656),a=i(5608),s=i(466),l=i(8048),c=i(1040),d=i(2528),g=i(1368);function T(p,x){1&p&&t.wR5(0,"tui-svg",2),2&p&&t.E7m("src",x.polymorpheusOutlet)}function M(p,x){1&p&&t.C_f(0)}const f=(0,d.AL)({iconSmall:"tuiIconChevronDown",iconLarge:"tuiIconChevronDownLarge"}),$=new c.WO((()=>{class p{constructor(U,S,y){this.dropdown=U,this.textfieldSize=S,this.options=y}get rotated(){return this.dropdown.open}get arrowIcon(){return(0,a.yi)(this.textfieldSize.size)?this.options.iconLarge:this.options.iconSmall}}return p.\u0275fac=function(U){return new(U||p)(t.GI1(s.Qw),t.GI1(l.$K),t.GI1(f))},p.\u0275cmp=t.In1({type:p,selectors:[["tui-arrow"]],hostVars:2,hostBindings:function(U,S){2&U&&t.eAK("_rotated",S.rotated)},decls:3,vars:4,consts:[[3,"src",4,"polymorpheusOutlet"],[4,"ngIf"],[3,"src"]],template:function(U,S){1&U&&(t.yuY(0,T,1,1,"tui-svg",0)(1,M,1,0,"ng-container",1),t.wVc(2,"async")),2&U&&(t.E7m("polymorpheusOutlet",S.arrowIcon),t.yG2(),t.E7m("ngIf",t.kDX(2,2,S.dropdown.openChange)))},dependencies:[_.Wu,c.Af,g.u_,g.a],styles:["[_nghost-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;display:block;cursor:pointer;pointer-events:none}._rotated[_nghost-%COMP%]{transform:rotate(180deg)}"],changeDetection:0}),p})());let H=(()=>{class p{}return p.\u0275fac=function(U){return new(U||p)},p.\u0275mod=t.a4G({type:p}),p.\u0275inj=t.s3X({imports:[[g.MD,_.Yt,c.Ux]]}),p})();const b=(0,d.AL)({interactive:$,disabled:$})},4868:v=>{"use strict";var u={single_source_shortest_paths:function(i,t,_){var a={},s={};s[t]=0;var c,d,g,T,M,f,l=u.PriorityQueue.make();for(l.push(t,0);!l.empty();)for(g in T=(c=l.pop()).cost,M=i[d=c.value]||{})M.hasOwnProperty(g)&&(f=T+M[g],(typeof s[g]>"u"||s[g]>f)&&(s[g]=f,l.push(g,f),a[g]=d));if(typeof _<"u"&&typeof s[_]>"u"){var $=["Could not find a path from ",t," to ",_,"."].join("");throw new Error($)}return a},extract_shortest_path_from_predecessor_list:function(i,t){for(var _=[],a=t;a;)_.push(a),a=i[a];return _.reverse(),_},find_path:function(i,t,_){var a=u.single_source_shortest_paths(i,t,_);return u.extract_shortest_path_from_predecessor_list(a,_)},PriorityQueue:{make:function(i){var a,t=u.PriorityQueue,_={};for(a in i=i||{},t)t.hasOwnProperty(a)&&(_[a]=t[a]);return _.queue=[],_.sorter=i.sorter||t.default_sorter,_},default_sorter:function(i,t){return i.cost-t.cost},push:function(i,t){this.queue.push({value:i,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};v.exports=u},8940:v=>{"use strict";v.exports=function(i){for(var t=[],_=i.length,a=0;a<_;a++){var s=i.charCodeAt(a);if(s>=55296&&s<=56319&&_>a+1){var l=i.charCodeAt(a+1);l>=56320&&l<=57343&&(s=1024*(s-55296)+l-56320+65536,a+=1)}s<128?t.push(s):s<2048?(t.push(s>>6|192),t.push(63&s|128)):s<55296||s>=57344&&s<65536?(t.push(s>>12|224),t.push(s>>6&63|128),t.push(63&s|128)):s>=65536&&s<=1114111?(t.push(s>>18|240),t.push(s>>12&63|128),t.push(s>>6&63|128),t.push(63&s|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},1956:(v,u,i)=>{const _=i(8072),a=i(384),s=i(2384),l=i(9944);function c(d,g,T,M,N){const f=[].slice.call(arguments,1),m=f.length,P="function"==typeof f[m-1];if(!P&&!_())throw new Error("Callback required as last argument");if(!P){if(m<1)throw new Error("Too few arguments provided");return 1===m?(T=g,g=M=void 0):2===m&&!g.getContext&&(M=T,T=g,g=void 0),new Promise(function($,H){try{const A=a.create(T,M);$(d(A,g,M))}catch(A){H(A)}})}if(m<2)throw new Error("Too few arguments provided");2===m?(N=T,T=g,g=M=void 0):3===m&&(g.getContext&&typeof N>"u"?(N=M,M=void 0):(N=M,M=T,T=g,g=void 0));try{const $=a.create(T,M);N(null,d($,g,M))}catch($){N($)}}u.gH=c.bind(null,s.render),u.g7=c.bind(null,s.renderToDataURL),u.toString=c.bind(null,function(d,g,T){return l.render(d,T)})},8072:v=>{v.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},4936:(v,u,i)=>{const t=i(8124).getSymbolSize;u.getRowColCoords=function(a){if(1===a)return[];const s=Math.floor(a/7)+2,l=t(a),c=145===l?26:2*Math.ceil((l-13)/(2*s-2)),d=[l-7];for(let g=1;g<s-1;g++)d[g]=d[g-1]-c;return d.push(6),d.reverse()},u.getPositions=function(a){const s=[],l=u.getRowColCoords(a),c=l.length;for(let d=0;d<c;d++)for(let g=0;g<c;g++)0===d&&0===g||0===d&&g===c-1||d===c-1&&0===g||s.push([l[d],l[g]]);return s}},4600:(v,u,i)=>{const t=i(3612),_=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(s){this.mode=t.ALPHANUMERIC,this.data=s}a.getBitsLength=function(l){return 11*Math.floor(l/2)+l%2*6},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(l){let c;for(c=0;c+2<=this.data.length;c+=2){let d=45*_.indexOf(this.data[c]);d+=_.indexOf(this.data[c+1]),l.put(d,11)}this.data.length%2&&l.put(_.indexOf(this.data[c]),6)},v.exports=a},8980:v=>{function u(){this.buffer=[],this.length=0}u.prototype={get:function(i){const t=Math.floor(i/8);return 1==(this.buffer[t]>>>7-i%8&1)},put:function(i,t){for(let _=0;_<t;_++)this.putBit(1==(i>>>t-_-1&1))},getLengthInBits:function(){return this.length},putBit:function(i){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),i&&(this.buffer[t]|=128>>>this.length%8),this.length++}},v.exports=u},664:v=>{function u(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}u.prototype.set=function(i,t,_,a){const s=i*this.size+t;this.data[s]=_,a&&(this.reservedBit[s]=!0)},u.prototype.get=function(i,t){return this.data[i*this.size+t]},u.prototype.xor=function(i,t,_){this.data[i*this.size+t]^=_},u.prototype.isReserved=function(i,t){return this.reservedBit[i*this.size+t]},v.exports=u},4692:(v,u,i)=>{const t=i(8940),_=i(3612);function a(s){this.mode=_.BYTE,"string"==typeof s&&(s=t(s)),this.data=new Uint8Array(s)}a.getBitsLength=function(l){return 8*l},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(s){for(let l=0,c=this.data.length;l<c;l++)s.put(this.data[l],8)},v.exports=a},2136:(v,u,i)=>{const t=i(5120),_=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];u.getBlocksCount=function(l,c){switch(c){case t.L:return _[4*(l-1)+0];case t.M:return _[4*(l-1)+1];case t.Q:return _[4*(l-1)+2];case t.H:return _[4*(l-1)+3];default:return}},u.getTotalCodewordsCount=function(l,c){switch(c){case t.L:return a[4*(l-1)+0];case t.M:return a[4*(l-1)+1];case t.Q:return a[4*(l-1)+2];case t.H:return a[4*(l-1)+3];default:return}}},5120:(v,u)=>{u.L={bit:1},u.M={bit:0},u.Q={bit:3},u.H={bit:2},u.isValid=function(_){return _&&typeof _.bit<"u"&&_.bit>=0&&_.bit<4},u.from=function(_,a){if(u.isValid(_))return _;try{return function i(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return u.L;case"m":case"medium":return u.M;case"q":case"quartile":return u.Q;case"h":case"high":return u.H;default:throw new Error("Unknown EC Level: "+t)}}(_)}catch{return a}}},8984:(v,u,i)=>{const t=i(8124).getSymbolSize;u.getPositions=function(s){const l=t(s);return[[0,0],[l-7,0],[0,l-7]]}},8196:(v,u,i)=>{const t=i(8124),s=t.getBCHDigit(1335);u.getEncodedBits=function(c,d){const g=c.bit<<3|d;let T=g<<10;for(;t.getBCHDigit(T)-s>=0;)T^=1335<<t.getBCHDigit(T)-s;return 21522^(g<<10|T)}},6764:(v,u)=>{const i=new Uint8Array(512),t=new Uint8Array(256);(function(){let a=1;for(let s=0;s<255;s++)i[s]=a,t[a]=s,a<<=1,256&a&&(a^=285);for(let s=255;s<512;s++)i[s]=i[s-255]})(),u.log=function(a){if(a<1)throw new Error("log("+a+")");return t[a]},u.exp=function(a){return i[a]},u.mul=function(a,s){return 0===a||0===s?0:i[t[a]+t[s]]}},6396:(v,u,i)=>{const t=i(3612),_=i(8124);function a(s){this.mode=t.KANJI,this.data=s}a.getBitsLength=function(l){return 13*l},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(s){let l;for(l=0;l<this.data.length;l++){let c=_.toSJIS(this.data[l]);if(c>=33088&&c<=40956)c-=33088;else{if(!(c>=57408&&c<=60351))throw new Error("Invalid SJIS character: "+this.data[l]+"\nMake sure your charset is UTF-8");c-=49472}c=192*(c>>>8&255)+(255&c),s.put(c,13)}},v.exports=a},1920:(v,u)=>{u.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function t(_,a,s){switch(_){case u.Patterns.PATTERN000:return(a+s)%2==0;case u.Patterns.PATTERN001:return a%2==0;case u.Patterns.PATTERN010:return s%3==0;case u.Patterns.PATTERN011:return(a+s)%3==0;case u.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(s/3))%2==0;case u.Patterns.PATTERN101:return a*s%2+a*s%3==0;case u.Patterns.PATTERN110:return(a*s%2+a*s%3)%2==0;case u.Patterns.PATTERN111:return(a*s%3+(a+s)%2)%2==0;default:throw new Error("bad maskPattern:"+_)}}u.isValid=function(a){return null!=a&&""!==a&&!isNaN(a)&&a>=0&&a<=7},u.from=function(a){return u.isValid(a)?parseInt(a,10):void 0},u.getPenaltyN1=function(a){const s=a.size;let l=0,c=0,d=0,g=null,T=null;for(let M=0;M<s;M++){c=d=0,g=T=null;for(let N=0;N<s;N++){let f=a.get(M,N);f===g?c++:(c>=5&&(l+=c-5+3),g=f,c=1),f=a.get(N,M),f===T?d++:(d>=5&&(l+=d-5+3),T=f,d=1)}c>=5&&(l+=c-5+3),d>=5&&(l+=d-5+3)}return l},u.getPenaltyN2=function(a){const s=a.size;let l=0;for(let c=0;c<s-1;c++)for(let d=0;d<s-1;d++){const g=a.get(c,d)+a.get(c,d+1)+a.get(c+1,d)+a.get(c+1,d+1);(4===g||0===g)&&l++}return 3*l},u.getPenaltyN3=function(a){const s=a.size;let l=0,c=0,d=0;for(let g=0;g<s;g++){c=d=0;for(let T=0;T<s;T++)c=c<<1&2047|a.get(g,T),T>=10&&(1488===c||93===c)&&l++,d=d<<1&2047|a.get(T,g),T>=10&&(1488===d||93===d)&&l++}return 40*l},u.getPenaltyN4=function(a){let s=0;const l=a.data.length;for(let d=0;d<l;d++)s+=a.data[d];return 10*Math.abs(Math.ceil(100*s/l/5)-10)},u.applyMask=function(a,s){const l=s.size;for(let c=0;c<l;c++)for(let d=0;d<l;d++)s.isReserved(d,c)||s.xor(d,c,t(a,d,c))},u.getBestMask=function(a,s){const l=Object.keys(u.Patterns).length;let c=0,d=1/0;for(let g=0;g<l;g++){s(g),u.applyMask(g,a);const T=u.getPenaltyN1(a)+u.getPenaltyN2(a)+u.getPenaltyN3(a)+u.getPenaltyN4(a);u.applyMask(g,a),T<d&&(d=T,c=g)}return c}},3612:(v,u,i)=>{const t=i(8656),_=i(8768);u.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},u.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},u.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},u.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},u.MIXED={bit:-1},u.getCharCountIndicator=function(l,c){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!t.isValid(c))throw new Error("Invalid version: "+c);return c>=1&&c<10?l.ccBits[0]:c<27?l.ccBits[1]:l.ccBits[2]},u.getBestModeForData=function(l){return _.testNumeric(l)?u.NUMERIC:_.testAlphanumeric(l)?u.ALPHANUMERIC:_.testKanji(l)?u.KANJI:u.BYTE},u.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},u.isValid=function(l){return l&&l.bit&&l.ccBits},u.from=function(l,c){if(u.isValid(l))return l;try{return function a(s){if("string"!=typeof s)throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return u.NUMERIC;case"alphanumeric":return u.ALPHANUMERIC;case"kanji":return u.KANJI;case"byte":return u.BYTE;default:throw new Error("Unknown mode: "+s)}}(l)}catch{return c}}},4983:(v,u,i)=>{const t=i(3612);function _(a){this.mode=t.NUMERIC,this.data=a.toString()}_.getBitsLength=function(s){return 10*Math.floor(s/3)+(s%3?s%3*3+1:0)},_.prototype.getLength=function(){return this.data.length},_.prototype.getBitsLength=function(){return _.getBitsLength(this.data.length)},_.prototype.write=function(s){let l,c,d;for(l=0;l+3<=this.data.length;l+=3)c=this.data.substr(l,3),d=parseInt(c,10),s.put(d,10);const g=this.data.length-l;g>0&&(c=this.data.substr(l),d=parseInt(c,10),s.put(d,3*g+1))},v.exports=_},7892:(v,u,i)=>{const t=i(6764);u.mul=function(a,s){const l=new Uint8Array(a.length+s.length-1);for(let c=0;c<a.length;c++)for(let d=0;d<s.length;d++)l[c+d]^=t.mul(a[c],s[d]);return l},u.mod=function(a,s){let l=new Uint8Array(a);for(;l.length-s.length>=0;){const c=l[0];for(let g=0;g<s.length;g++)l[g]^=t.mul(s[g],c);let d=0;for(;d<l.length&&0===l[d];)d++;l=l.slice(d)}return l},u.generateECPolynomial=function(a){let s=new Uint8Array([1]);for(let l=0;l<a;l++)s=u.mul(s,new Uint8Array([1,t.exp(l)]));return s}},384:(v,u,i)=>{const t=i(8124),_=i(5120),a=i(8980),s=i(664),l=i(4936),c=i(8984),d=i(1920),g=i(2136),T=i(4176),M=i(6544),N=i(8196),f=i(3612),m=i(4168);function b(S,y,R){const I=S.size,D=N.getEncodedBits(y,R);let O,h;for(O=0;O<15;O++)h=1==(D>>O&1),S.set(O<6?O:O<8?O+1:I-15+O,8,h,!0),S.set(8,O<8?I-O-1:O<9?15-O-1+1:15-O-1,h,!0);S.set(I-8,8,1,!0)}function U(S,y,R,I){let D;if(Array.isArray(S))D=m.fromArray(S);else{if("string"!=typeof S)throw new Error("Invalid data");{let tt=y;if(!tt){const at=m.rawSplit(S);tt=M.getBestVersionForData(at,R)}D=m.fromString(S,tt||40)}}const O=M.getBestVersionForData(D,R);if(!O)throw new Error("The amount of data is too big to be stored in a QR Code");if(y){if(y<O)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+O+".\n")}else y=O;const h=function p(S,y,R){const I=new a;R.forEach(function(G){I.put(G.mode.bit,4),I.put(G.getLength(),f.getCharCountIndicator(G.mode,S)),G.write(I)});const h=8*(t.getSymbolTotalCodewords(S)-g.getTotalCodewordsCount(S,y));for(I.getLengthInBits()+4<=h&&I.put(0,4);I.getLengthInBits()%8!=0;)I.putBit(0);const Y=(h-I.getLengthInBits())/8;for(let G=0;G<Y;G++)I.put(G%2?17:236,8);return function x(S,y,R){const I=t.getSymbolTotalCodewords(y),O=I-g.getTotalCodewordsCount(y,R),h=g.getBlocksCount(y,R),G=h-I%h,tt=Math.floor(I/h),at=Math.floor(O/h),Rt=at+1,Ot=tt-at,yt=new T(Ot);let Ct=0;const lt=new Array(h),Et=new Array(h);let It=0;const At=new Uint8Array(S.buffer);for(let W=0;W<h;W++){const mt=W<G?at:Rt;lt[W]=At.slice(Ct,Ct+mt),Et[W]=yt.encode(lt[W]),Ct+=mt,It=Math.max(It,mt)}const ct=new Uint8Array(I);let K,J,ht=0;for(K=0;K<It;K++)for(J=0;J<h;J++)K<lt[J].length&&(ct[ht++]=lt[J][K]);for(K=0;K<Ot;K++)for(J=0;J<h;J++)ct[ht++]=Et[J][K];return ct}(I,S,y)}(y,R,D),Y=t.getSymbolSize(y),G=new s(Y);return function P(S,y){const R=S.size,I=c.getPositions(y);for(let D=0;D<I.length;D++){const O=I[D][0],h=I[D][1];for(let Y=-1;Y<=7;Y++)if(!(O+Y<=-1||R<=O+Y))for(let G=-1;G<=7;G++)h+G<=-1||R<=h+G||S.set(O+Y,h+G,Y>=0&&Y<=6&&(0===G||6===G)||G>=0&&G<=6&&(0===Y||6===Y)||Y>=2&&Y<=4&&G>=2&&G<=4,!0)}}(G,y),function $(S){const y=S.size;for(let R=8;R<y-8;R++){const I=R%2==0;S.set(R,6,I,!0),S.set(6,R,I,!0)}}(G),function H(S,y){const R=l.getPositions(y);for(let I=0;I<R.length;I++){const D=R[I][0],O=R[I][1];for(let h=-2;h<=2;h++)for(let Y=-2;Y<=2;Y++)S.set(D+h,O+Y,-2===h||2===h||-2===Y||2===Y||0===h&&0===Y,!0)}}(G,y),b(G,R,0),y>=7&&function A(S,y){const R=S.size,I=M.getEncodedBits(y);let D,O,h;for(let Y=0;Y<18;Y++)D=Math.floor(Y/3),O=Y%3+R-8-3,h=1==(I>>Y&1),S.set(D,O,h,!0),S.set(O,D,h,!0)}(G,y),function L(S,y){const R=S.size;let I=-1,D=R-1,O=7,h=0;for(let Y=R-1;Y>0;Y-=2)for(6===Y&&Y--;;){for(let G=0;G<2;G++)if(!S.isReserved(D,Y-G)){let tt=!1;h<y.length&&(tt=1==(y[h]>>>O&1)),S.set(D,Y-G,tt),O--,-1===O&&(h++,O=7)}if(D+=I,D<0||R<=D){D-=I,I=-I;break}}}(G,h),isNaN(I)&&(I=d.getBestMask(G,b.bind(null,G,R))),d.applyMask(I,G),b(G,R,I),{modules:G,version:y,errorCorrectionLevel:R,maskPattern:I,segments:D}}u.create=function(y,R){if(typeof y>"u"||""===y)throw new Error("No input text");let D,O,I=_.M;return typeof R<"u"&&(I=_.from(R.errorCorrectionLevel,_.M),D=M.from(R.version),O=d.from(R.maskPattern),R.toSJISFunc&&t.setToSJISFunction(R.toSJISFunc)),U(y,D,I,O)}},4176:(v,u,i)=>{const t=i(7892);function _(a){this.genPoly=void 0,this.degree=a,this.degree&&this.initialize(this.degree)}_.prototype.initialize=function(s){this.degree=s,this.genPoly=t.generateECPolynomial(this.degree)},_.prototype.encode=function(s){if(!this.genPoly)throw new Error("Encoder not initialized");const l=new Uint8Array(s.length+this.degree);l.set(s);const c=t.mod(l,this.genPoly),d=this.degree-c.length;if(d>0){const g=new Uint8Array(this.degree);return g.set(c,d),g}return c},v.exports=_},8768:(v,u)=>{const i="[0-9]+";let _="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";_=_.replace(/u/g,"\\u");const a="(?:(?![A-Z0-9 $%*+\\-./:]|"+_+")(?:.|[\r\n]))+";u.KANJI=new RegExp(_,"g"),u.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),u.BYTE=new RegExp(a,"g"),u.NUMERIC=new RegExp(i,"g"),u.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const s=new RegExp("^"+_+"$"),l=new RegExp("^"+i+"$"),c=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");u.testKanji=function(g){return s.test(g)},u.testNumeric=function(g){return l.test(g)},u.testAlphanumeric=function(g){return c.test(g)}},4168:(v,u,i)=>{const t=i(3612),_=i(4983),a=i(4600),s=i(4692),l=i(6396),c=i(8768),d=i(8124),g=i(4868);function T(A){return unescape(encodeURIComponent(A)).length}function M(A,b,L){const p=[];let x;for(;null!==(x=A.exec(L));)p.push({data:x[0],index:x.index,mode:b,length:x[0].length});return p}function N(A){const b=M(c.NUMERIC,t.NUMERIC,A),L=M(c.ALPHANUMERIC,t.ALPHANUMERIC,A);let p,x;return d.isKanjiModeEnabled()?(p=M(c.BYTE,t.BYTE,A),x=M(c.KANJI,t.KANJI,A)):(p=M(c.BYTE_KANJI,t.BYTE,A),x=[]),b.concat(L,p,x).sort(function(S,y){return S.index-y.index}).map(function(S){return{data:S.data,mode:S.mode,length:S.length}})}function f(A,b){switch(b){case t.NUMERIC:return _.getBitsLength(A);case t.ALPHANUMERIC:return a.getBitsLength(A);case t.KANJI:return l.getBitsLength(A);case t.BYTE:return s.getBitsLength(A)}}function H(A,b){let L;const p=t.getBestModeForData(A);if(L=t.from(b,p),L!==t.BYTE&&L.bit<p.bit)throw new Error('"'+A+'" cannot be encoded with mode '+t.toString(L)+".\n Suggested mode is: "+t.toString(p));switch(L===t.KANJI&&!d.isKanjiModeEnabled()&&(L=t.BYTE),L){case t.NUMERIC:return new _(A);case t.ALPHANUMERIC:return new a(A);case t.KANJI:return new l(A);case t.BYTE:return new s(A)}}u.fromArray=function(b){return b.reduce(function(L,p){return"string"==typeof p?L.push(H(p,null)):p.data&&L.push(H(p.data,p.mode)),L},[])},u.fromString=function(b,L){const x=function P(A){const b=[];for(let L=0;L<A.length;L++){const p=A[L];switch(p.mode){case t.NUMERIC:b.push([p,{data:p.data,mode:t.ALPHANUMERIC,length:p.length},{data:p.data,mode:t.BYTE,length:p.length}]);break;case t.ALPHANUMERIC:b.push([p,{data:p.data,mode:t.BYTE,length:p.length}]);break;case t.KANJI:b.push([p,{data:p.data,mode:t.BYTE,length:T(p.data)}]);break;case t.BYTE:b.push([{data:p.data,mode:t.BYTE,length:T(p.data)}])}}return b}(N(b,d.isKanjiModeEnabled())),U=function $(A,b){const L={},p={start:{}};let x=["start"];for(let U=0;U<A.length;U++){const S=A[U],y=[];for(let R=0;R<S.length;R++){const I=S[R],D=""+U+R;y.push(D),L[D]={node:I,lastCount:0},p[D]={};for(let O=0;O<x.length;O++){const h=x[O];L[h]&&L[h].node.mode===I.mode?(p[h][D]=f(L[h].lastCount+I.length,I.mode)-f(L[h].lastCount,I.mode),L[h].lastCount+=I.length):(L[h]&&(L[h].lastCount=I.length),p[h][D]=f(I.length,I.mode)+4+t.getCharCountIndicator(I.mode,b))}}x=y}for(let U=0;U<x.length;U++)p[x[U]].end=0;return{map:p,table:L}}(x,L),S=g.find_path(U.map,"start","end"),y=[];for(let R=1;R<S.length-1;R++)y.push(U.table[S[R]].node);return u.fromArray(function m(A){return A.reduce(function(b,L){const p=b.length-1>=0?b[b.length-1]:null;return p&&p.mode===L.mode?(b[b.length-1].data+=L.data,b):(b.push(L),b)},[])}(y))},u.rawSplit=function(b){return u.fromArray(N(b,d.isKanjiModeEnabled()))}},8124:(v,u)=>{let i;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];u.getSymbolSize=function(a){if(!a)throw new Error('"version" cannot be null or undefined');if(a<1||a>40)throw new Error('"version" should be in range from 1 to 40');return 4*a+17},u.getSymbolTotalCodewords=function(a){return t[a]},u.getBCHDigit=function(_){let a=0;for(;0!==_;)a++,_>>>=1;return a},u.setToSJISFunction=function(a){if("function"!=typeof a)throw new Error('"toSJISFunc" is not a valid function.');i=a},u.isKanjiModeEnabled=function(){return typeof i<"u"},u.toSJIS=function(a){return i(a)}},8656:(v,u)=>{u.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}},6544:(v,u,i)=>{const t=i(8124),_=i(2136),a=i(5120),s=i(3612),l=i(8656),d=t.getBCHDigit(7973);function T(f,m){return s.getCharCountIndicator(f,m)+4}function M(f,m){let P=0;return f.forEach(function($){const H=T($.mode,m);P+=H+$.getBitsLength()}),P}u.from=function(m,P){return l.isValid(m)?parseInt(m,10):P},u.getCapacity=function(m,P,$){if(!l.isValid(m))throw new Error("Invalid QR Code version");typeof $>"u"&&($=s.BYTE);const b=8*(t.getSymbolTotalCodewords(m)-_.getTotalCodewordsCount(m,P));if($===s.MIXED)return b;const L=b-T($,m);switch($){case s.NUMERIC:return Math.floor(L/10*3);case s.ALPHANUMERIC:return Math.floor(L/11*2);case s.KANJI:return Math.floor(L/13);default:return Math.floor(L/8)}},u.getBestVersionForData=function(m,P){let $;const H=a.from(P,a.M);if(Array.isArray(m)){if(m.length>1)return function N(f,m){for(let P=1;P<=40;P++)if(M(f,P)<=u.getCapacity(P,m,s.MIXED))return P}(m,H);if(0===m.length)return 1;$=m[0]}else $=m;return function g(f,m,P){for(let $=1;$<=40;$++)if(m<=u.getCapacity($,P,f))return $}($.mode,$.getLength(),H)},u.getEncodedBits=function(m){if(!l.isValid(m)||m<7)throw new Error("Invalid QR Code version");let P=m<<12;for(;t.getBCHDigit(P)-d>=0;)P^=7973<<t.getBCHDigit(P)-d;return m<<12|P}},2384:(v,u,i)=>{const t=i(3848);u.render=function(l,c,d){let g=d,T=c;typeof g>"u"&&(!c||!c.getContext)&&(g=c,c=void 0),c||(T=function a(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}()),g=t.getOptions(g);const M=t.getImageWidth(l.modules.size,g),N=T.getContext("2d"),f=N.createImageData(M,M);return t.qrToImageData(f.data,l,g),function _(s,l,c){s.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=c,l.width=c,l.style.height=c+"px",l.style.width=c+"px"}(N,T,M),N.putImageData(f,0,0),T},u.renderToDataURL=function(l,c,d){let g=d;return typeof g>"u"&&(!c||!c.getContext)&&(g=c,c=void 0),g||(g={}),u.render(l,c,g).toDataURL(g.type||"image/png",(g.rendererOpts||{}).quality)}},9944:(v,u,i)=>{const t=i(3848);function _(l,c){const d=l.a/255,g=c+'="'+l.hex+'"';return d<1?g+" "+c+'-opacity="'+d.toFixed(2).slice(1)+'"':g}function a(l,c,d){let g=l+c;return typeof d<"u"&&(g+=" "+d),g}u.render=function(c,d,g){const T=t.getOptions(d),M=c.modules.size,N=c.modules.data,f=M+2*T.margin,m=T.color.light.a?"<path "+_(T.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",P="<path "+_(T.color.dark,"stroke")+' d="'+function s(l,c,d){let g="",T=0,M=!1,N=0;for(let f=0;f<l.length;f++){const m=Math.floor(f%c),P=Math.floor(f/c);!m&&!M&&(M=!0),l[f]?(N++,f>0&&m>0&&l[f-1]||(g+=M?a("M",m+d,.5+P+d):a("m",T,0),T=0,M=!1),m+1<c&&l[f+1]||(g+=a("h",N),N=0)):T++}return g}(N,M,T.margin)+'"/>',A='<svg xmlns="http://www.w3.org/2000/svg" '+(T.width?'width="'+T.width+'" height="'+T.width+'" ':"")+'viewBox="0 0 '+f+" "+f+'" shape-rendering="crispEdges">'+m+P+"</svg>\n";return"function"==typeof g&&g(null,A),A}},3848:(v,u)=>{function i(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)throw new Error("Color should be defined as hex string");let _=t.slice().replace("#","").split("");if(_.length<3||5===_.length||_.length>8)throw new Error("Invalid hex color: "+t);(3===_.length||4===_.length)&&(_=Array.prototype.concat.apply([],_.map(function(s){return[s,s]}))),6===_.length&&_.push("F","F");const a=parseInt(_.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:255&a,hex:"#"+_.slice(0,6).join("")}}u.getOptions=function(_){_||(_={}),_.color||(_.color={});const s=_.width&&_.width>=21?_.width:void 0;return{width:s,scale:s?4:_.scale||4,margin:typeof _.margin>"u"||null===_.margin||_.margin<0?4:_.margin,color:{dark:i(_.color.dark||"#000000ff"),light:i(_.color.light||"#ffffffff")},type:_.type,rendererOpts:_.rendererOpts||{}}},u.getScale=function(_,a){return a.width&&a.width>=_+2*a.margin?a.width/(_+2*a.margin):a.scale},u.getImageWidth=function(_,a){const s=u.getScale(_,a);return Math.floor((_+2*a.margin)*s)},u.qrToImageData=function(_,a,s){const l=a.modules.size,c=a.modules.data,d=u.getScale(l,s),g=Math.floor((l+2*s.margin)*d),T=s.margin*d,M=[s.color.light,s.color.dark];for(let N=0;N<g;N++)for(let f=0;f<g;f++){let m=4*(N*g+f),P=s.color.light;N>=T&&f>=T&&N<g-T&&f<g-T&&(P=M[c[Math.floor((N-T)/d)*l+Math.floor((f-T)/d)]?1:0]),_[m++]=P.r,_[m++]=P.g,_[m++]=P.b,_[m]=P.a}}}}]);