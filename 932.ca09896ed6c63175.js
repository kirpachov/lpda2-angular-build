"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[932],{6719:(F,v,a)=>{a.r(v),a.d(v,{AdminReservationsHomeComponent:()=>Vo});var t=a(4496),T=a(1368),r=a(6504),N=a(3797),p=a(3480),l=a(5e3),A=a(8016),M=a(8212),G=a(1512),g=a(5656),V=a(7692),b=a(9880),C=a(1560),H=a(1236),Y=a(5892),k=a(1128),m=a(3616),f=a(8824),u=a(8256),S=a(8304),x=a(7556),w=a(580),ct=a(2516),J=a(6096),X=a(6052),Tt=a(9604),z=a(8048),Et=a(7936),c=a(4336),$=a(6732),d=a(1040);function P(n,_){1&n&&(t.SAx(0),t.aS0(1,10),t.k70())}function h(n,_){if(1&n&&(t.SAx(0),t.OEk(1),t.k70()),2&n){const e=_.polymorpheusOutlet;t.yG2(),t.oRS(" ",e," ")}}function U(n,_){if(1&n&&t.yuY(0,h,2,1,"ng-container",11),2&n){const e=t.GaO(2);t.E7m("polymorpheusOutlet",e.optionTemplate$())}}function W(n,_){1&n&&t.C_f(0)}const dt=(n,_)=>({$implicit:n,injector:_});function yt(n,_){if(1&n&&t.yuY(0,W,1,0,"ng-container",12),2&n){const e=t.GaO().$implicit,o=t.GaO();t.E7m("polymorpheusOutlet",o.optionTemplate$())("polymorpheusOutletContext",t.IBC(2,dt,e,o.injector))}}function vt(n,_){1&n&&t.C_f(0)}const Ct=n=>({data:n});function Pt(n,_){if(1&n&&t.yuY(0,vt,1,0,"ng-container",12),2&n){const e=t.GaO().$implicit,o=t.GaO();t.E7m("polymorpheusOutlet",o.optionTemplate$())("polymorpheusOutletContext",t.S45(2,Ct,e))}}function $t(n,_){if(1&n&&t.wR5(0,"div",13),2&n){const e=t.GaO().$implicit,o=t.GaO();t.E7m("innerText",o.stringify(e))}}function Gt(n,_){if(1&n&&t.yuY(0,U,1,1)(1,yt,1,5)(2,Pt,1,4)(3,$t,1,1),2&n){const e=t.GaO();let o;t.C0Y(0,"text"===(o=e.optionTemplateType$())?0:"template"===o?1:"component"===o?2:3)}}function xt(n,_){if(1&n&&(t.SAx(0),t.OEk(1),t.k70()),2&n){const e=_.polymorpheusOutlet;t.yG2(),t.oRS(" ",e," ")}}function Dt(n,_){if(1&n&&t.yuY(0,xt,2,1,"ng-container",11),2&n){const e=t.GaO(2);t.E7m("polymorpheusOutlet",e.nativeOptionTemplate$())}}function Yt(n,_){1&n&&t.C_f(0)}function Lt(n,_){if(1&n&&t.yuY(0,Yt,1,0,"ng-container",12),2&n){const e=t.GaO().$implicit,o=t.GaO();t.E7m("polymorpheusOutlet",o.nativeOptionTemplate$())("polymorpheusOutletContext",t.IBC(2,dt,e,o.injector))}}function Vt(n,_){1&n&&t.C_f(0)}function bt(n,_){if(1&n&&t.yuY(0,Vt,1,0,"ng-container",12),2&n){const e=t.GaO().$implicit,o=t.GaO();t.E7m("polymorpheusOutlet",o.nativeOptionTemplate$())("polymorpheusOutletContext",t.S45(2,Ct,e))}}function kt(n,_){if(1&n&&t.wR5(0,"div",13),2&n){const e=t.GaO().$implicit,o=t.GaO();t.E7m("innerText",o.stringify(e))}}function wt(n,_){if(1&n&&t.yuY(0,Dt,1,1)(1,Lt,1,5)(2,bt,1,4)(3,kt,1,1),2&n){const e=t.GaO();let o;t.C0Y(0,"text"===(o=e.nativeOptionTemplateType$())?0:"template"===o?1:"component"===o?2:3)}}function zt(n,_){if(1&n&&(t.SAx(0),t.OEk(1),t.k70()),2&n){const e=t.GaO(2);t.yG2(),t.oRS(" ",e.placeholder," ")}}function Ft(n,_){if(1&n&&(t.I0R(0,"span",null,14),t._Xx(2),t.C$Y(),t.yuY(3,zt,2,1,"ng-container",15)),2&n){const e=t.Gew(1);t.yG2(3),t.E7m("ngIf",!e.hasChildNodes())}}function Ht(n,_){1&n&&(t.SAx(0),t.aS0(1,19),t.k70())}function Xt(n,_){if(1&n&&(t.I0R(0,"span"),t.OEk(1),t.C$Y()),2&n){const e=t.GaO(2);t.yG2(),t.cNF(e.emptyContentString())}}function Ut(n,_){1&n&&t.C_f(0)}function Kt(n,_){if(1&n&&(t.SAx(0),t.yuY(1,Ut,1,0,"ng-container",8),t.k70()),2&n){const e=t.GaO(4);t.yG2(),t.E7m("ngTemplateOutlet",e.emptyContentTemplate())}}function Bt(n,_){if(1&n&&(t.SAx(0),t.yuY(1,Kt,2,1,"ng-container",20),t.k70()),2&n){t.GaO(2);const e=t.Gew(6),o=t.GaO();t.yG2(),t.E7m("ngIf",o.emptyContentTemplate())("ngIfElse",e)}}function Jt(n,_){if(1&n&&(t.SAx(0),t.yuY(1,Bt,2,2,"ng-container",20),t.k70()),2&n){t.GaO();const e=t.Gew(4),o=t.GaO();t.yG2(),t.E7m("ngIf",o.emptyContent$())("ngIfElse",e)}}function Qt(n,_){if(1&n&&(t.I0R(0,"span",null,16),t._Xx(2,1),t.C$Y(),t.yuY(3,Ht,2,0,"ng-template",null,17,t.gJz)(5,Xt,2,1,"ng-template",null,18,t.gJz)(7,Jt,2,2,"ng-container",15)),2&n){const e=t.Gew(1);t.yG2(7),t.E7m("ngIf",!e.hasChildNodes())}}function Wt(n,_){1&n&&t.wR5(0,"tui-loader")}function jt(n,_){1&n&&t.C_f(0)}function Zt(n,_){if(1&n&&t.yuY(0,jt,1,0,"ng-container",8),2&n){t.GaO(2);const e=t.Gew(9);t.E7m("ngTemplateOutlet",e)}}function qt(n,_){1&n&&t.C_f(0)}function te(n,_){if(1&n&&(t.SAx(0),t.yuY(1,qt,1,0,"ng-container",8),t.k70()),2&n){t.GaO(2);const e=t.Gew(11);t.yG2(),t.E7m("ngTemplateOutlet",e)}}function ee(n,_){if(1&n&&t.yuY(0,Zt,1,1,"ng-template",null,21,t.gJz)(2,te,2,1,"ng-container",20),2&n){const e=t.Gew(1),o=t.GaO();t.yG2(2),t.E7m("ngIf",o.loading())("ngIfElse",e)}}function ne(n,_){1&n&&t.C_f(0)}function oe(n,_){1&n&&t.C_f(0)}function ie(n,_){1&n&&t.C_f(0)}function _e(n,_){if(1&n&&(t.SAx(0),t.yuY(1,ie,1,0,"ng-container",8),t.k70()),2&n){t.GaO(4);const e=t.Gew(11);t.yG2(),t.E7m("ngTemplateOutlet",e)}}function ae(n,_){1&n&&t.C_f(0)}function se(n,_){if(1&n){const e=t.KQA();t.I0R(0,"button",28)(1,"span",29),t.qCj("click",function(){t.usT(e);const i=t.GaO(4);return t.CGJ(i.loadMoreItems())}),t.yuY(2,ae,1,0,"ng-container",20),t.C$Y()()}if(2&n){const e=t.GaO(4),o=t.Gew(1);t.E7m("size",e.optionSize)("disabled",!0),t.yG2(2),t.E7m("ngIf",e.loadMore)("ngIfElse",o)}}function re(n,_){if(1&n&&(t.SAx(0),t.yuY(1,_e,2,1,"ng-container",15)(2,se,3,4,"button",27),t.k70()),2&n){const e=t.GaO(3);t.yG2(),t.E7m("ngIf",e.loading),t.yG2(),t.E7m("ngIf",!e.loading)}}const le=n=>({$implicit:n});function ce(n,_){if(1&n){const e=t.KQA();t.SAx(0),t.I0R(1,"button",25),t.qCj("mouseenter",function(){const i=t.usT(e),s=i.index,E=i.last,O=t.GaO(2);return t.CGJ(O.optionMouseEnter(s,E))})("focus",function(){const i=t.usT(e),s=i.index,E=i.last,O=t.GaO(2);return t.CGJ(O.optionFocus(s,E))}),t.yuY(2,oe,1,0,"ng-container",26),t.C$Y(),t.yuY(3,re,3,2,"ng-container",15),t.k70()}if(2&n){const e=_.$implicit,o=_.last,i=t.GaO(2),s=t.Gew(5);t.yG2(),t.E7m("size",i.optionSize)("value",e)("disabled",i.disabledItemHandler(e)),t.yG2(),t.E7m("ngTemplateOutlet",s)("ngTemplateOutletContext",t.S45(6,le,e)),t.yG2(),t.E7m("ngIf",o&&i.thereAreMoreItems)}}function Ee(n,_){if(1&n){const e=t.KQA();t.I0R(0,"span",33),t.qCj("click",function(){t.usT(e);const i=t.GaO(3);return t.CGJ(i.createNew.emit())}),t.I0R(1,"mat-icon"),t.OEk(2,"add"),t.C$Y(),t.I0R(3,"span"),t.aS0(4,34),t.C$Y()()}}function ue(n,_){if(1&n&&(t.I0R(0,"button",30)(1,"span",null,31),t._Xx(3,2),t.C$Y(),t.yuY(4,Ee,5,0,"span",32),t.C$Y()),2&n){const e=t.Gew(2),o=t.GaO(2);t.E7m("size",o.optionSize)("value",null)("disabled",!0),t.yG2(4),t.E7m("ngIf",!e.hasChildNodes())}}function pe(n,_){if(1&n&&(t.I0R(0,"tui-data-list",22),t.yuY(1,ce,4,8,"ng-container",23)(2,ue,5,4,"button",24),t.C$Y()),2&n){const e=t.GaO(),o=t.Gew(13);t.E7m("emptyContent",o),t.yG2(),t.E7m("ngForOf",e.items()),t.yG2(),t.E7m("ngIf",e.showCreateNew)}}const me=["*",[["","empty-content",""]],[["","create-new",""]]],Te=["*","[empty-content]","[create-new]"];let St=(()=>{class n extends w.m{constructor(){super(),this.weekday=(0,t.uUt)(ct.G),this.stringify=e=>`${e.name} (${e.starts_at} - ${e.ends_at}, ${this.weekday.transform(e.weekday)})`,this.service=(0,t.uUt)(x.K)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-reservation-turn-select"]],inputs:{outputType:"outputType",multiple:"multiple",service:"service",stringify:"stringify",query:"query",autofocus:"autofocus",placeholder:"placeholder",optionTemplate:"optionTemplate",stringifyOption:"stringifyOption",inputSize:"inputSize",page:"page",per_page:"per_page",optionSize:"optionSize",disabledItemHandler:"disabledItemHandler",loadMoreOnLastItem:"loadMoreOnLastItem",emptyContent:"emptyContent",showCreateNew:"showCreateNew",nativeOptionTemplate:"nativeOptionTemplate",filters:"filters",showCleaner:"showCleaner"},outputs:{httpError:"httpError",pageChange:"pageChange",queryChange:"queryChange",per_pageChange:"per_pageChange",createNew:"createNew"},standalone:!0,features:[t.M5G([{provide:r.Y6,useExisting:(0,t.wd)(()=>n),multi:!0},p.UF,ct.G]),t.eg9,t.UHJ],ngContentSelectors:Te,decls:17,vars:6,consts:()=>{let e,o,i;return e="Carica altri",o="Non abbiamo trovato nulla.",i="Crea nuovo",[["loadMoreDefault",""],["valueContent",""],["nativeOptionTemplate",""],["placeholderTemplate",""],["nativeEmptyContentTemplate",""],["loadingTemplate",""],["loadingOrEmptyContent",""],[3,"tuiTextfieldCleaner","stringify","tuiTextfieldSize","formControl","valueContent","searchChange"],[4,"ngTemplateOutlet"],[3,"emptyContent",4,"tuiDataList"],e,[4,"polymorpheusOutlet"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],[3,"innerText"],["customContent",""],[4,"ngIf"],["customEmptyContent",""],["defaultEmptyContent",""],["emptyContentCustomString",""],o,[4,"ngIf","ngIfElse"],["empty",""],[3,"emptyContent"],[4,"ngFor","ngForOf"],["tuiOption","",3,"size","value","disabled",4,"ngIf"],["tuiOption","",3,"size","value","disabled","mouseenter","focus"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tuiOption","",3,"size","disabled",4,"ngIf"],["tuiOption","",3,"size","disabled"],["role","button",3,"click"],["tuiOption","",3,"size","value","disabled"],["createNewCustomTemplate",""],["role","button","class","d-flex align-items-center",3,"click",4,"ngIf"],["role","button",1,"d-flex","align-items-center",3,"click"],i]},template:function(o,i){if(1&o&&(t.kPM(me),t.yuY(0,P,2,0,"ng-template",null,0,t.gJz)(2,Gt,4,1,"ng-template",null,1,t.gJz)(4,wt,4,1,"ng-template",null,2,t.gJz)(6,Ft,4,1,"ng-template",null,3,t.gJz)(8,Qt,8,1,"ng-template",null,4,t.gJz)(10,Wt,1,0,"ng-template",null,5,t.gJz)(12,ee,3,2,"ng-template",null,6,t.gJz),t.I0R(14,"tui-combo-box",7),t.qCj("searchChange",function(E){return i.onSearchChange(E)}),t.yuY(15,ne,1,0,"ng-container",8)(16,pe,3,3,"tui-data-list",9),t.C$Y()),2&o){const s=t.Gew(3),E=t.Gew(7);t.yG2(14),t.E7m("tuiTextfieldCleaner",i.showCleaner)("stringify",i.stringify)("tuiTextfieldSize",i.inputSize)("formControl",i.control)("valueContent",s),t.yG2(),t.E7m("ngTemplateOutlet",E)}},dependencies:[T.MD,T.ay,T.u_,T.XV,J.uk,J.i_,J.qI,z.aS,z.es,z.rD,Et.KA,N.CQ,c.A$,c.yi,c.sP,c.Ux,X.q8,r.sl,r.ue,r.ug,$.kR,Tt.CA,V.Sk,V.Cb,d.Ux,d.Af,C.oB,C.qL],changeDetection:0})}return n})();var j=a(466),Q=a(5188),R=a(400),de=a(3264),ut=a(3984),Rt=a(1338),Ce=a(9160),Nt=a(1673);let Se=(()=>{class n{constructor(){this.datePipe=(0,t.uUt)(T.y),this.today=R.EK.currentLocal(),this.singleDateFormat={default:"cccc d MMMM",differentYear:"d MMMM y"}}transform(e){if(!(e instanceof R.Se))return"";const o=e.from.year==e.to.year&&e.from.year==this.today.year?this.singleDateFormat.default:this.singleDateFormat.differentYear;return e.isSingleDay?e.from.daySame(this.today)?"Oggi":this.datePipe.transform(e.from.toUtcNativeDate(),o)||"":e.from.month==e.to.month?1==e.from.day&&e.to.daySame(e.from.append({month:1}).append({day:-1}))?this.datePipe.transform(e.from.toUtcNativeDate(),"MMMM y")||"":`${e.from.day} - ${e.to.day} ${this.datePipe.transform(e.to.toUtcNativeDate(),"MMMM")||""}`:`${this.datePipe.transform(e.from.toLocalNativeDate(),o)||""} - ${this.datePipe.transform(e.to.toLocalNativeDate(),o)||""}`}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275pipe=t.UTH({name:"stringifyTuiDayRange",type:n,pure:!0,standalone:!0})}return n})();function Re(n,_){if(1&n&&(t.I0R(0,"span",9),t.aS0(1,10),t.C$Y(),t.I0R(2,"span",9),t.OEk(3),t.wVc(4,"date"),t.wVc(5,"fromTuiDay"),t.C$Y(),t.I0R(6,"span",9),t.aS0(7,11),t.C$Y(),t.I0R(8,"span",9),t.OEk(9),t.wVc(10,"date"),t.wVc(11,"fromTuiDay"),t.C$Y()),2&n){const e=t.GaO(2);t.yG2(3),t.cNF(t.g7$(4,2,t.kDX(5,5,e.control.value.from),"fullDate")),t.yG2(6),t.cNF(t.g7$(10,7,t.kDX(11,10,e.control.value.to),"fullDate"))}}function Ne(n,_){if(1&n&&t.yuY(0,Re,12,12),2&n){const e=t.GaO();t.C0Y(0,e.control.value&&e.control.value.from&&e.control.value.to?0:-1)}}function Oe(n,_){if(1&n){const e=t.KQA();t.I0R(0,"tui-calendar-range",20),t.qCj("valueChange",function(i){const E=t.usT(e).$implicit,O=t.GaO().$implicit,D=t.GaO();return t.CGJ(D.selectRangeAndUnsub(i,E,O))}),t.C$Y()}if(2&n){const e=t.GaO(2);t.E7m("min",e.calendarMin)("max",e.calendarMax)("value",e.control.value)}}function ge(n,_){1&n&&(t.I0R(0,"mat-icon"),t.OEk(1,"check"),t.C$Y())}function fe(n,_){if(1&n){const e=t.KQA();t.I0R(0,"button",16),t.qCj("click",function(){const s=t.usT(e).$implicit,E=t.GaO().$implicit,O=t.GaO();return t.CGJ(O.selectRangeAndUnsub(s.range,E))}),t.OEk(1),t.yuY(2,ge,2,0,"mat-icon"),t.C$Y()}if(2&n){const e=_.$implicit,o=t.GaO(2);t.yG2(),t.oRS(" ",e.toString()," "),t.yG2(),t.C0Y(2,o.control.value==e.range?2:-1)}}function Me(n,_){if(1&n&&(t.I0R(0,"p",21)(1,"span",6),t.OEk(2),t.wVc(3,"stringifyTuiDayRange"),t.C$Y()()),2&n){const e=t.GaO(2),o=t.Gew(1);t.yG2(),t.E7m("tuiHint",o),t.yG2(),t.cNF(t.kDX(3,2,e.control.value))}}function Ae(n,_){1&n&&(t.I0R(0,"p",22),t.SAx(1),t.aS0(2,23),t.k70(),t.C$Y())}function Ie(n,_){if(1&n){const e=t.KQA();t.yuY(0,Oe,1,3,"ng-template",null,12,t.gJz),t.I0R(2,"div",13)(3,"tui-calendar",14),t.qCj("dayClick",function(i){const E=t.usT(e).$implicit,O=t.GaO();return t.CGJ(O.selectDayAndUnsub(i,E))}),t.C$Y(),t.I0R(4,"tui-data-list",15),t.c53(5,fe,3,2,"button",24,t.oxv),t.I0R(7,"button",16),t.qCj("click",function(){t.usT(e);const i=t.Gew(1),s=t.GaO();return t.CGJ(s.fireModal(i))}),t.SAx(8),t.aS0(9,17),t.k70(),t.C$Y()()(),t.wR5(10,"hr",18),t.yuY(11,Me,4,4,"p",19)(12,Ae,3,0)}if(2&n){const e=t.GaO();t.yG2(3),t.E7m("value",(null!=e.control.value&&e.control.value.isSingleDay?null==e.control.value?null:e.control.value.from:e.control.value)||null)("min",e.calendarMin)("max",e.calendarMax),t.yG2(2),t.oho(e.periodOptions),t.yG2(6),t.C0Y(11,e.control.value&&e.control.valid?11:12)}}function he(n,_){if(1&n&&(t.I0R(0,"span",6),t.OEk(1),t.wVc(2,"stringifyTuiDayRange"),t.C$Y()),2&n){const e=t.GaO(),o=t.Gew(1);t.E7m("tuiHint",o),t.yG2(),t.cNF(t.kDX(2,2,e.control.value))}}function ye(n,_){1&n&&t._Xx(0)}const ve=["*"];let Pe=(()=>{class n{constructor(){this.cd=(0,t.uUt)(t.kD9),this.dialogs=(0,t.uUt)(A._k),this.destroy$=(0,t.uUt)(p.UF),this.date=(0,t.uUt)(T.y),this.today=R.EK.currentLocal(),this.calendarMin=new R.EK(2019,1,1),this.calendarMax=this.today.append({year:1}),this.control=new r.Ku(new R.Se(this.today,this.today)),this.periodOptions=[new ut.Ib(new R.Se(this.today,this.today),"Oggi"),new ut.Ib(new R.Se(this.today.append({day:-7}),this.today),"Ultima settimana"),...Array.from({length:3},(e,o)=>o).map(e=>{const o=this.today.append({month:-1*e}),i=new R.EK(o.year,o.month,1),s=this.date.transform(i.toUtcNativeDate(),"MMMM")||`Mese ${i.month}`;return new ut.Ib(new R.Se(i,i.append({month:1}).append({day:-1})),s)})]}ngOnInit(){}registerOnChange(e){this.control.valueChanges.pipe((0,m.a)(this.destroy$)).subscribe(e)}registerOnTouched(e){this.control.valueChanges.pipe((0,m.a)(this.destroy$)).subscribe(e)}setDisabledState(e){e?this.control.disable():this.control.enable()}writeValue(e){this.control.patchValue(this.formatToTuiDayRange(e))}fireModal(e){this.dialogs.open(e).subscribe()}selectRangeAndUnsub(e,...o){this.selectRange(e),o.forEach(i=>i.unsubscribe())}selectDayAndUnsub(e,o){this.selectDay(e),o.unsubscribe()}selectDay(e){this.selectRange(e?new R.Se(e,e):null)}selectRange(e){this.control.setValue(e),this.cd.markForCheck()}prevDay(){if(!(this.control.value instanceof R.Se))return void console.warn("control value invalid",this.control.value);const e=this.control.value.from.append({day:-1}),o=this.control.value.to.append({day:-1});this.control.setValue(new R.Se(e,o))}nextDay(){if(!(this.control.value instanceof R.Se))return void console.warn("control value invalid",this.control.value);const e=this.control.value.from.append({day:1}),o=this.control.value.to.append({day:1});this.control.setValue(new R.Se(e,o))}formatToTuiDayRange(e){if(null==e)return null;if(e instanceof R.Se)return e;if(e instanceof Date)return new R.Se(R.EK.fromLocalNativeDate(e),R.EK.fromLocalNativeDate(e));if("string"==typeof e)return new R.Se(R.EK.fromLocalNativeDate(new Date(e)),R.EK.fromLocalNativeDate(new Date(e)));if(Array.isArray(e)&&2==e.length){if(e[0]instanceof Date&&e[1]instanceof Date)return new R.Se(R.EK.fromLocalNativeDate(e[0]),R.EK.fromLocalNativeDate(e[1]));if(e[0]instanceof R.EK&&e[1]instanceof R.EK)return new R.Se(e[0],e[1]);if("string"==typeof e[0]&&"string"==typeof e[1])return new R.Se(R.EK.fromLocalNativeDate(new Date(e[0])),R.EK.fromLocalNativeDate(new Date(e[1])))}return console.warn("Invalid value for reservation date select:",e),null}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-reservation-date-select"]],standalone:!0,features:[t.M5G([{provide:r.Y6,useExisting:(0,t.wd)(()=>n),multi:!0},p.UF]),t.UHJ],ngContentSelectors:ve,decls:18,vars:1,consts:()=>{let e,o,i,s;return e="Dal giorno",o="fino al giorno",i="Altro range",s="Nessuna data selezionata.",[["rangeHint",""],["editDateModal",""],[1,"flex","border","rounded","border-slate-200","items-center","justify-between"],[1,"h-full","border-r","border-slate-200"],["type","button",1,"h-full","flex","items-center","justify-center","p-2",3,"click"],["type","button",1,"flex","items-center","justify-center","grow",3,"click"],[3,"tuiHint"],[1,"ms-1"],[1,"h-full","border-l","border-slate-200"],[1,"me-1"],e,o,["rangeCalendarModal",""],[1,"flex"],[3,"value","min","max","dayClick"],[1,"grow"],["type","button","tuiOption","",3,"click"],i,[1,"block","w-[1px]","my-3"],["class","text-slate-400 block mb-3"],[3,"min","max","value","valueChange"],[1,"text-slate-400","block","mb-3"],[1,"block","text-red-200"],s,["type","button","tuiOption",""]]},template:function(o,i){if(1&o){const s=t.KQA();t.kPM(),t.yuY(0,Ne,1,1,"ng-template",null,0,t.gJz)(2,Ie,13,4,"ng-template",null,1,t.gJz),t.I0R(4,"div",2)(5,"div",3)(6,"button",4),t.qCj("click",function(){return i.prevDay()}),t.I0R(7,"mat-icon"),t.OEk(8,"arrow_back"),t.C$Y()()(),t.I0R(9,"button",5),t.qCj("click",function(){t.usT(s);const O=t.Gew(3);return t.CGJ(i.fireModal(O))}),t.yuY(10,he,3,4,"span",6)(11,ye,1,0),t.I0R(12,"mat-icon",7),t.OEk(13,"event"),t.C$Y()(),t.I0R(14,"div",8)(15,"button",4),t.qCj("click",function(){return i.nextDay()}),t.I0R(16,"mat-icon"),t.OEk(17,"arrow_forward"),t.C$Y()()()()}2&o&&(t.yG2(10),t.C0Y(10,i.control.valid&&i.control.value?10:11))},dependencies:[C.qL,r.sl,T.y,Ce.E,Rt.N,Rt.W,Se,g.WY,g.lh,g.SL,g.i6,g.IT,c.A$,c.yi,c.sP,Nt.y,Nt.I],styles:["[_nghost-%COMP%]{display:block;min-width:250px}"],changeDetection:0})}return n})();var $e=a(7516),Ot=a(4e3),gt=a(6684),Ge=a(2300),ft=a(9772),Mt=a(9368);const xe=["*"];let De=(()=>{class n{constructor(){this.removeClick=new t._w7}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-chip"]],outputs:{removeClick:"removeClick"},standalone:!0,features:[t.UHJ],ngContentSelectors:xe,decls:6,vars:0,consts:[[1,"rounded","border","py-2","px-3","border-slate-200","flex","items-center"],["size","s","tuiIconButton","","type","button","appearance","custom",1,"!flex","ms-1",3,"click"]],template:function(o,i){1&o&&(t.kPM(),t.I0R(0,"div",0)(1,"span"),t._Xx(2),t.C$Y(),t.I0R(3,"button",1),t.qCj("click",function(){return i.removeClick.emit()}),t.I0R(4,"mat-icon"),t.OEk(5,"close"),t.C$Y()()())},dependencies:[C.oB,C.qL],styles:["[_nghost-%COMP%]{display:inline-block}"]})}return n})();function Ye(n,_){if(1&n){const e=t.KQA();t.I0R(0,"form",21),t.qCj("ngSubmit",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.closeFiltersModal())}),t.I0R(1,"div",22)(2,"div",19)(3,"tui-input",23),t.SAx(4),t.aS0(5,24),t.k70(),t.wR5(6,"input",25),t.C$Y()()(),t.I0R(7,"div",22)(8,"app-reservation-status-select",26),t.SAx(9),t.aS0(10,27),t.k70(),t.C$Y()(),t.I0R(11,"button",28),t.SAx(12),t.aS0(13,29),t.k70(),t.C$Y()()}if(2&n){const e=t.GaO();t.E7m("formGroup",e.hiddenFormGroup),t.yG2(3),t.E7m("tuiTextfieldSize","l")("tuiAutoFocus",!0)("formControl",e.query),t.yG2(5),t.E7m("showCleaner",!0)("inputSize","l")("formControl",e.status)}}function Le(n,_){1&n&&t.OEk(0),2&n&&t.oRS(" ",_.$implicit.humanLabel," ")}function Ve(n,_){if(1&n&&(t.I0R(0,"tui-data-list-wrapper",30),t.OEk(1," >"),t.C$Y()),2&n){const e=t.GaO(),o=t.Gew(13);t.E7m("itemContent",o)("items",e.orderByOptions)}}function be(n,_){if(1&n){const e=t.KQA();t.I0R(0,"app-chip",31),t.qCj("removeClick",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.status.patchValue(null))}),t.SAx(1),t.aS0(2,32),t.k70(),t.OEk(3,": "),t.wR5(4,"app-reservation-status",33),t.C$Y()}if(2&n){const e=t.GaO();t.yG2(4),t.E7m("status",e.status.value)}}function ke(n,_){if(1&n){const e=t.KQA();t.I0R(0,"app-chip",31),t.qCj("removeClick",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.query.patchValue(null))}),t.SAx(1),t.aS0(2,34),t.k70(),t.OEk(3),t.C$Y()}if(2&n){const e=t.GaO();t.yG2(3),t.oRS(": ",e.query.value," ")}}const we=n=>({date:n}),ze=()=>[10,100,1e3],Fe=["*"];let He=(()=>{class n{constructor(){this.dialogs=(0,t.uUt)(A._k),this.loading=!1,this.data=null,this.filtersChanged=new t._w7,this.destroy$=(0,t.uUt)(p.UF),this.datePipe=(0,t.uUt)(T.y),this.query=new r.Ku(null),this.turn=new r.Ku(null),this.date=new r.Ku(new R.Se(R.EK.currentLocal(),R.EK.currentLocal())),this.status=new r.Ku("active"),this.orderBy=new r.Ku(null),this.hiddenFormGroup=new r.WC({query:this.query,status:this.status}),this.dateStr=(0,t.OCB)(this.formatDate(this.date.value)),this.offset=0,this.per_page=100,this.orderByOptions=[{field:"created_at",direction:"desc",humanLabel:"Data di creazione (pi\xF9 recenti)"},{field:"created_at",direction:"asc",humanLabel:"Data di creazione (meno recenti)"},{field:"datetime",direction:"desc",humanLabel:"Data e ora (pi\xF9 recenti)"},{field:"datetime",direction:"asc",humanLabel:"Data e ora (meno recenti)"}],this.lastFilters={}}ngOnInit(){this.date.valueChanges.pipe((0,m.a)(this.destroy$)).subscribe({next:e=>{this.turn.setValue(null),e&&e.isSingleDay?this.turn.disabled&&this.turn.enable():this.turn.disable(),this.dateStr.set(this.formatDate(e))},error:e=>console.error(e)}),[this.date,this.turn,this.status,this.orderBy].map(e=>{e.valueChanges.pipe((0,m.a)(this.destroy$),(0,Ot.a)(),(0,gt.I)(()=>e.valid)).subscribe({next:()=>{this.offset=0,this.filtersMayHaveChanged()}})}),[this.query].map(e=>{e.valueChanges.pipe((0,m.a)(this.destroy$),(0,Ot.a)(),(0,Ge.o)(500),(0,gt.I)(()=>e.valid)).subscribe({next:()=>{this.offset=0,this.filtersMayHaveChanged()}})})}ngAfterViewInit(){this.emitCurrentFilters()}submit(){this.emitCurrentFilters()}mergeFilters(e){}setFilters(e){}currentFilters(){const e={offset:this.offset,per_page:this.per_page};if("string"==typeof this.query.value&&this.query.valid&&this.query.value.length>0&&(e.query=this.query.value),this.date.value instanceof R.Se&&this.date.valid){const i=this.datePipe.transform(this.date.value.from.toUtcNativeDate(),"YYYY-MM-dd"),s=this.datePipe.transform(this.date.value.to.toUtcNativeDate(),"YYYY-MM-dd");i&&s&&(e.date_from=`${i}`,e.date_to=`${s}`)}const o=this.turn.value;return this.turn.valid&&o instanceof $e.e&&o.starts_at&&o.ends_at&&(e.time_from=`${(0,ft.ye)(o.starts_at)}`,e.time_to=`${(0,ft.ye)(o.ends_at)}`),"string"==typeof this.status.value&&this.status.valid&&(e.status=this.status.value),this.orderBy.valid&&this.orderBy.value&&(e.order_by_field=this.orderBy.value.field,e.order_by_direction=this.orderBy.value.direction),e}paginationChange(e){this.offset=e.page,this.per_page=e.size,this.filtersMayHaveChanged()}fireModal(e){this.filtersSub?.unsubscribe(),this.filtersSub=this.dialogs.open(e).subscribe()}closeFiltersModal(){this.filtersSub?.unsubscribe()}filtersMayHaveChanged(){const e=this.currentFilters(),o=JSON.stringify(e)!==JSON.stringify(this.lastFilters);return console.log("changed",{changed:o,currentFilters:e}),o&&(this.lastFilters=e,this.emitCurrentFilters()),o}formatDate(e){return e instanceof Date?this.datePipe.transform(e,"YYYY-MM-dd"):e instanceof R.Se?e.isSingleDay?this.datePipe.transform(e.from.toUtcNativeDate(),"YYYY-MM-dd"):`${this.datePipe.transform(e.from.toUtcNativeDate(),"YYYY-MM-dd")} - ${this.datePipe.transform(e.to.toUtcNativeDate(),"YYYY-MM-dd")}`:null}emitCurrentFilters(){this.filtersChanged.emit(this.currentFilters())}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-list-reservations-filters"]],inputs:{loading:"loading",data:"data"},outputs:{filtersChanged:"filtersChanged"},standalone:!0,features:[t.M5G([p.UF]),t.UHJ],ngContentSelectors:Fe,decls:34,vars:18,consts:()=>{let e,o,i,s,E,O,D,K,B;return e="Data",o="Turno",i="Ordina per",s="Esporta prenotazioni",E="Filtra prenotazioni",O="Stato",D="Chiudi",K="Stato",B="Ricerca per",[["additionalFiltersTemplate",""],[1,"flex","flex-wrap","items-center"],[1,"col-12","md:col-4"],[3,"formControl"],e,[1,"col-12","md:col-3","px-1"],[1,"mx-2",2,"min-width","150px",3,"showCleaner","filters","inputSize","formControl"],o,[1,"col-10","md:col-3"],["stringifyOrderBy",""],[3,"valueContent","tuiTextfieldCleaner","tuiTextfieldSize","formControl"],i,[3,"itemContent","items",4,"tuiDataList"],[1,"col-2","md:col-1","overflow-hidden"],["type","button","tuiIconButton","","appearance","flat",3,"showLoader","click"],[1,"col-12"],[1,"my-2",3,"size","items","total","paginationChange"],[1,"flex","items-center","mb-2"],["routerLink","export","tuiLink",""],[1,"flex","items-center"],s,[3,"formGroup","ngSubmit"],[1,"block","mb-3"],[1,"grow","me-2",3,"tuiTextfieldSize","tuiAutoFocus","formControl"],E,["tuiTextfield",""],[3,"showCleaner","inputSize","formControl"],O,["tuiButton","","appearance","primary","type","submit"],D,[3,"itemContent","items"],[3,"removeClick"],K,[3,"status"],B]},template:function(o,i){if(1&o){const s=t.KQA();t.kPM(),t.yuY(0,Ye,14,7,"ng-template",null,0,t.gJz),t.I0R(2,"div",1)(3,"div",2)(4,"app-reservation-date-select",3),t.SAx(5),t.aS0(6,4),t.k70(),t.C$Y()(),t.I0R(7,"div",5)(8,"app-reservation-turn-select",6),t.SAx(9),t.aS0(10,7),t.k70(),t.C$Y()(),t.I0R(11,"div",8),t.yuY(12,Le,1,1,"ng-template",null,9,t.gJz),t.I0R(14,"tui-select",10),t.SAx(15),t.aS0(16,11),t.k70(),t.yuY(17,Ve,2,2,"tui-data-list-wrapper",12),t.C$Y()(),t.I0R(18,"div",13)(19,"button",14),t.qCj("click",function(){t.usT(s);const O=t.Gew(1);return t.CGJ(i.fireModal(O))}),t.I0R(20,"mat-icon"),t.OEk(21,"filter_alt"),t.C$Y()()(),t.I0R(22,"div",15),t.yuY(23,be,5,1,"app-chip")(24,ke,4,1,"app-chip"),t.C$Y()(),t._Xx(25),t.I0R(26,"tui-table-pagination",16),t.qCj("paginationChange",function(O){return i.paginationChange(O)}),t.C$Y(),t.I0R(27,"div",17)(28,"a",18)(29,"span",19)(30,"mat-icon"),t.OEk(31,"download_file"),t.C$Y(),t.SAx(32),t.aS0(33,20),t.k70(),t.C$Y()()()}if(2&o){const s=t.Gew(13);let E;t.yG2(4),t.E7m("formControl",i.date),t.yG2(4),t.E7m("showCleaner",!0)("filters",t.S45(15,we,i.dateStr()))("inputSize","m")("formControl",i.turn),t.yG2(6),t.E7m("valueContent",s)("tuiTextfieldCleaner",!0)("tuiTextfieldSize","m")("formControl",i.orderBy),t.yG2(5),t.E7m("showLoader",i.loading),t.yG2(4),t.C0Y(23,i.status.value?23:-1),t.yG2(),t.C0Y(24,i.query.value?24:-1),t.yG2(2),t.E7m("size",100)("items",t.q4q(17,ze))("total",null!==(E=null==i.data||null==i.data.metadata?null:i.data.metadata.total_count)&&void 0!==E?E:0)}},dependencies:[M.CI,M.Kw,C.qL,N.CQ,N.Oo,N.cP,Et.b,l.m6,l.gJ,G.w,G.C,H.ER,de.Y,St,Pe,Y.yy,Y.Ws,r.sl,r.sz,r.ue,r.u,r.ug,r.uW,j.GE,z.aS,z.es,z.rD,Mt.a,De,X.q8,X.OO,c.Ux,Q.my,Q.cP,Q.uO,c.A$],encapsulation:2,changeDetection:0})}return n})(),Xe=(()=>{class n{constructor(){this.human={email_open:"Email aperta"}}transform(e){return null==e?null:this.human[e]??null}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275pipe=t.UTH({name:"humanizeEventType",type:n,pure:!0,standalone:!0})}return n})();function Ue(n,_){1&n&&(t.SAx(0),t.aS0(1,3),t.k70())}const Ke=(n,_)=>({"text-blue-500":n,"text-slate-500":_}),Be=n=>({rotate180:n});function Je(n,_){if(1&n&&(t.I0R(0,"tui-hosted-dropdown",1,4)(2,"button",5)(3,"span",6)(4,"span",7),t.OEk(5),t.C$Y(),t.I0R(6,"mat-icon",8),t.OEk(7,"mail"),t.C$Y(),t.I0R(8,"mat-icon",9),t.OEk(9,"expand_more"),t.C$Y()()()()),2&n){const e=t.Gew(1),o=t.GaO(),i=t.Gew(4);t.E7m("content",i),t.yG2(5),t.cNF(o.emails().length),t.yG2(),t.E7m("ngClass",t.IBC(4,Ke,o.emailOpenAtLeastOnce(),!o.emailOpenAtLeastOnce())),t.yG2(2),t.E7m("ngClass",t.S45(7,Be,e.open))}}const pt=(n,_)=>_.id;function Qe(n,_){if(1&n&&(t.I0R(0,"span",19),t.OEk(1),t.wVc(2,"json"),t.C$Y()),2&n){const e=t.GaO().$implicit;t.yG2(),t.cNF(t.kDX(2,1,e.event_data))}}function We(n,_){if(1&n&&(t.I0R(0,"li")(1,"span",6)(2,"span",7),t.OEk(3),t.wVc(4,"humanizeEventType"),t.C$Y(),t.I0R(5,"span",7),t.OEk(6),t.wVc(7,"date"),t.C$Y(),t.yuY(8,Qe,3,3,"span",18),t.C$Y()()),2&n){const e=_.$implicit,o=t.GaO().$implicit;t.yG2(3),t.cNF(t.kDX(4,3,o.event_type)),t.yG2(3),t.cNF(t.g7$(7,5,e.event_time,"EEEE d MMMM y, H:m")),t.yG2(2),t.C0Y(8,e.event_data?8:-1)}}function je(n,_){1&n&&t.c53(0,We,9,8,"li",null,pt),2&n&&t.oho(_.$implicit.events)}function Ze(n,_){if(1&n&&(t.I0R(0,"div",14)(1,"div",15)(2,"span",16),t.OEk(3),t.C$Y(),t.I0R(4,"b",7),t.aS0(5,17),t.C$Y(),t.I0R(6,"span"),t.OEk(7),t.wVc(8,"date"),t.C$Y()()(),t.I0R(9,"ul"),t.c53(10,je,2,0,null,null,pt),t.C$Y()),2&n){const e=_.$implicit;t.yG2(3),t.oRS("#",e.id,""),t.yG2(4),t.cNF(t.g7$(8,2,e.created_at,"EEEE d MMMM y, H:m")),t.yG2(3),t.oho(e.image_pixels)}}function qe(n,_){1&n&&(t.SAx(0),t.aS0(1,20),t.k70())}function tn(n,_){1&n&&(t.SAx(0),t.aS0(1,21),t.k70())}function en(n,_){if(1&n){const e=t.KQA();t.I0R(0,"div",11),t.c53(1,Ze,12,5,null,null,pt),t.I0R(3,"button",12),t.qCj("click",function(){t.usT(e);const i=t.GaO(2);return t.CGJ(i.resendEmail())}),t.I0R(4,"span",6)(5,"span",13),t.yuY(6,qe,2,0,"ng-container")(7,tn,2,0),t.C$Y(),t.I0R(8,"mat-icon"),t.OEk(9,"send"),t.C$Y()()()()}if(2&n){const e=t.GaO(2);t.yG2(),t.oho(e.emails()),t.yG2(2),t.E7m("showLoader",e.loading())("appearance","outline")("disabled",!(e.reservation.email&&e.reservation.email.length>0)),t.yG2(3),t.C0Y(6,e.emails().length>0?6:7)}}function nn(n,_){if(1&n&&t.yuY(0,en,10,4,"div",10),2&n){const e=t.GaO();t.C0Y(0,e.reservation?0:-1)}}let on=(()=>{class n{constructor(){this.service=(0,t.uUt)(S.S),this.notifications=(0,t.uUt)(k.E),this.destroy$=(0,t.uUt)(p.UF),this.emails=(0,t.OCB)([]),this.loading=(0,t.OCB)(!1),this.emailOpenAtLeastOnce=(0,t.S6b)(()=>{const e=this.emails();let o=!1;return e.forEach(i=>{i.image_pixels?.forEach(s=>{"email_open"===s.event_type&&s.events&&s.events.length>0&&(o=!0)})}),o})}resendEmail(){const e=this.reservation?.id;e&&(this.loading.set(!0),this.service.deliverConfirmationEmail(e).pipe((0,m.a)(this.destroy$),(0,f.U)(()=>this.loading.set(!1))).subscribe({next:o=>{this.notifications.fireSnackBar("Email inviata"),this.setEmailsByReservation(o)},error:o=>{this.notifications.error((0,u.mk)(o)??"Qualcosa \xE8 andato storto. Riprova pi\xF9 tardi.")}}))}ngOnChanges(e){e.reservation&&this.setEmailsByReservation(e.reservation.currentValue)}setEmailsByReservation(e){this.emails.set(e?.delivered_emails??[])}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-reservation-events"]],inputs:{reservation:"reservation"},standalone:!0,features:[t.SYr,t.UHJ],decls:5,vars:1,consts:()=>{let e,o,i,s;return e="Invia conferma prenotazione",o="Email inviata",i="Rimanda email di conferma",s="Invia email di conferma",[["resendHint",""],[3,"content"],["allEvents",""],e,["dropdown",""],["tuiButton","","appearance","custom","size","s","type","button"],[1,"flex","items-center"],[1,"me-1"],[1,"text-slate-500",3,"ngClass"],[1,"text-slate-500","animation-speed-2",3,"ngClass"],["class","p-3"],[1,"p-3"],["type","button","tuiButton","","size","s",3,"showLoader","appearance","disabled","click"],[1,"me-2"],[1,"flex","flex-col"],[1,"flex"],[1,"text-slate-400","me-1"],o,["class","text-slate-400"],[1,"text-slate-400"],i,s]},template:function(o,i){1&o&&t.yuY(0,Ue,2,0,"ng-template",null,0,t.gJz)(2,Je,10,9,"tui-hosted-dropdown",1)(3,nn,1,1,"ng-template",null,2,t.gJz),2&o&&(t.yG2(2),t.C0Y(2,i.reservation?2:-1))},dependencies:[M.CI,M.Kw,C.qL,g.WY,j.GE,j.Qw,T.y,T.ED,Xe,T.QF],encapsulation:2})}return n})();const _n=["phoneTo",""];function an(n,_){1&n&&(t.I0R(0,"mat-icon",3),t.OEk(1,"chat"),t.C$Y())}function sn(n,_){1&n&&(t.I0R(0,"mat-icon",3),t.OEk(1,"call"),t.C$Y())}const rn=["*"];let ln=(()=>{class n{constructor(){this.whatsapp=!1}ngOnChanges(){this.href=this.whatsapp?`https://wa.me/${this.phoneTo}`:`tel:${this.phoneTo}`}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["","phoneTo",""]],inputs:{phoneTo:"phoneTo",whatsapp:"whatsapp"},standalone:!0,features:[t.SYr,t.UHJ],attrs:_n,ngContentSelectors:rn,decls:5,vars:2,consts:[["target","_blank","tuiLink","",3,"href"],[1,"flex","items-center"],["class","ms-1"],[1,"ms-1"]],template:function(o,i){1&o&&(t.kPM(),t.I0R(0,"a",0)(1,"span",1),t._Xx(2),t.yuY(3,an,2,0,"mat-icon",2)(4,sn,2,0),t.C$Y()()),2&o&&(t._6D("href",i.href,t.K6U),t.yG2(3),t.C0Y(3,i.whatsapp?3:4))},dependencies:[G.w,G.C,C.qL],changeDetection:0})}return n})();const cn=["mailTo",""],En=["*"];let un=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["","mailTo",""]],inputs:{mailTo:"mailTo"},standalone:!0,features:[t.UHJ],attrs:cn,ngContentSelectors:En,decls:3,vars:1,consts:[["target","_blank","tuiLink","",3,"href"],[1,"flex","items-center"]],template:function(o,i){1&o&&(t.kPM(),t.I0R(0,"a",0)(1,"span",1),t._Xx(2),t.C$Y()()),2&o&&t.CI5("href","mailto:",i.mailTo,"",t.K6U)},dependencies:[G.w,G.C],changeDetection:0})}return n})();function pn(n,_){if(1&n&&(t.I0R(0,"p"),t.OEk(1),t.SAx(2),t.aS0(3,2),t.k70(),t.C$Y(),t.I0R(4,"p"),t.OEk(5),t.SAx(6),t.aS0(7,3),t.k70(),t.C$Y()),2&n){const e=t.GaO();let o,i;t.yG2(),t.oRS(" ",null!==(o=e.adults)&&void 0!==o?o:0," "),t.yG2(4),t.oRS(" ",null!==(i=e.children)&&void 0!==i?i:0," ")}}function mn(n,_){if(1&n&&(t.I0R(0,"span"),t.OEk(1),t.C$Y(),t.I0R(2,"mat-icon"),t.OEk(3,"person2"),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.cNF(e.adults)}}function Tn(n,_){if(1&n&&(t.I0R(0,"span"),t.OEk(1),t.C$Y(),t.I0R(2,"mat-icon"),t.OEk(3,"child_care"),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.cNF(e.children)}}function dn(n,_){1&n&&t.OEk(0," ??? ")}let At=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-reservation-people"]],inputs:{adults:"adults",children:"children"},standalone:!0,features:[t.UHJ],decls:6,vars:4,consts:()=>{let e,o;return e="Adulti",o="Bambini",[["hint",""],[1,"flex","items-center",3,"tuiHint"],e,o]},template:function(o,i){if(1&o&&(t.yuY(0,pn,8,2,"ng-template",null,0,t.gJz),t.I0R(2,"div",1),t.yuY(3,mn,4,1)(4,Tn,4,1)(5,dn,1,0),t.C$Y()),2&o){const s=t.Gew(1);t.yG2(2),t.E7m("tuiHint",s),t.yG2(),t.C0Y(3,i.adults&&i.adults>0?3:-1),t.yG2(),t.C0Y(4,i.children&&i.children>0?4:-1),t.yG2(),t.C0Y(5,i.adults&&i.adults>0||i.children&&i.children>0?-1:5)}},dependencies:[C.qL,g.WY,g.lh,g.SL,g.i6,g.IT],encapsulation:2})}return n})();var Cn=a(4476),Sn=a(8640),Rn=a(3040),mt=a(9888),Nn=a(9956);function On(n,_){1&n&&(t.SAx(0),t.aS0(1,0),t.k70())}function gn(n,_){1&n&&(t.SAx(0),t.aS0(1,1),t.k70())}function fn(n,_){if(1&n&&t.OEk(0),2&n){const e=t.GaO();t.oRS(" ",e.value," ")}}let Mn=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-reservation-payment-preorder-type"]],inputs:{value:"value"},standalone:!0,features:[t.UHJ],decls:3,vars:1,consts:()=>{let e,o;return e="Autorizzazione",o="Pagamento",[e,o]},template:function(o,i){if(1&o&&t.yuY(0,On,2,0)(1,gn,2,0)(2,fn,1,1),2&o){let s;t.C0Y(0,"html_nexi_authorization"===(s=i.value)?0:"html_nexi_payment"===s?1:2)}},encapsulation:2})}return n})(),It=(()=>{class n{transform(e){switch(e){case"todo":return"text-danger";case"authorized":return"text-success";case"paid":return"text-success-dark";case"refunded":return"text-warning";default:return null}}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275pipe=t.UTH({name:"paymentStatusColor",type:n,pure:!0,standalone:!0})}return n})();function An(n,_){1&n&&(t.SAx(0),t.aS0(1,4),t.k70())}function In(n,_){1&n&&(t.SAx(0),t.aS0(1,5),t.k70())}function hn(n,_){1&n&&(t.SAx(0),t.aS0(1,6),t.k70())}function yn(n,_){1&n&&(t.SAx(0),t.aS0(1,7),t.k70())}function vn(n,_){if(1&n&&t.OEk(0),2&n){const e=t.GaO(3);t.oRS(" ",e.status()," ")}}function Pn(n,_){if(1&n&&(t.I0R(0,"span"),t.wVc(1,"paymentStatusColor"),t.yuY(2,An,2,0)(3,In,2,0)(4,hn,2,0)(5,yn,2,0)(6,vn,1,1),t.C$Y()),2&n){const e=t.GaO(2);let o;t.uQ9("text-center ",t.kDX(1,4,e.status())," text-nowrap"),t.yG2(2),t.C0Y(2,"paid"===(o=e.status())?2:"authorized"===o?3:"todo"===o?4:"refunded"===o?5:6)}}function $n(n,_){if(1&n&&(t.I0R(0,"div",18),t.OEk(1),t.wVc(2,"currency"),t.C$Y()),2&n){const e=t.GaO(3);let o;t.yG2(),t.oRS(" ",t.kDX(2,1,null==(o=e.payment())?null:o.value)," ")}}function Gn(n,_){if(1&n&&(t.I0R(0,"p",19),t.SAx(1),t.aS0(2,20),t.k70(),t.I0R(3,"app-copy-content",21),t.OEk(4),t.C$Y()()),2&n){const e=t.GaO(3);let o,i;t.yG2(3),t.E7m("content",null==(o=e.payment())?null:o.external_id),t.yG2(),t.cNF(null==(i=e.payment())?null:i.external_id)}}function xn(n,_){1&n&&t.C_f(0)}function Dn(n,_){1&n&&(t.SAx(0),t.aS0(1,22),t.k70())}function Yn(n,_){if(1&n){const e=t.KQA();t.I0R(0,"p",23),t.aS0(1,24),t.C$Y(),t.I0R(2,"button",25),t.qCj("click",function(){t.usT(e);const i=t.GaO(3);return t.CGJ(i.cancelPayment())}),t.SAx(3),t.aS0(4,26),t.k70(),t.C$Y()}if(2&n){const e=t.GaO(3);t.yG2(2),t.E7m("showLoader",e.loading())}}function Ln(n,_){if(1&n){const e=t.KQA();t.I0R(0,"p",23),t.aS0(1,27),t.C$Y(),t.I0R(2,"button",28),t.qCj("click",function(){t.usT(e);const i=t.GaO(3);return t.CGJ(i.confirmPayment())}),t.SAx(3),t.aS0(4,29),t.k70(),t.C$Y(),t.I0R(5,"button",25),t.qCj("click",function(){t.usT(e);const i=t.GaO(3);return t.CGJ(i.cancelPayment())}),t.SAx(6),t.aS0(7,30),t.k70(),t.C$Y()}if(2&n){const e=t.GaO(3);t.yG2(2),t.E7m("showLoader",e.loading()),t.yG2(3),t.E7m("showLoader",e.loading())}}function Vn(n,_){if(1&n&&(t.I0R(0,"p"),t.aS0(1,31),t.C$Y(),t.I0R(2,"div",32)(3,"a",33),t.OEk(4),t.C$Y(),t.wR5(5,"app-copy-content",21),t.C$Y()),2&n){const e=t.GaO(3);let o,i,s;t.yG2(3),t._6D("href",null==(o=e.payment())?null:o.hpp_url,t.K6U),t.yG2(),t.cNF(null==(i=e.payment())?null:i.hpp_url),t.yG2(),t.E7m("content",null==(s=e.payment())?null:s.hpp_url)}}function bn(n,_){1&n&&(t.I0R(0,"p"),t.aS0(1,34),t.C$Y())}function kn(n,_){1&n&&t.OEk(0," error ")}function wn(n,_){if(1&n){const e=t.KQA();t.I0R(0,"h2",8),t.aS0(1,9),t.C$Y(),t.yuY(2,$n,3,3,"div",10)(3,Gn,5,2,"p",11),t.I0R(4,"div"),t.SAx(5),t.aS0(6,12),t.k70(),t.OEk(7," : "),t.wR5(8,"app-reservation-payment-preorder-type",13),t.C$Y(),t.I0R(9,"div",14)(10,"div",15),t.yuY(11,xn,1,0,"ng-container",3),t.C$Y(),t.yuY(12,Dn,2,0,"ng-template",null,16,t.gJz),t.I0R(14,"button",17),t.qCj("click",function(){t.usT(e);const i=t.GaO(2);return t.CGJ(i.fetchPaymentStatus())}),t.I0R(15,"mat-icon"),t.OEk(16,"refresh"),t.C$Y()()(),t.yuY(17,Yn,5,1)(18,Ln,8,2)(19,Vn,6,3)(20,bn,2,0)(21,kn,1,0)}if(2&n){const e=t.Gew(13);t.GaO();const o=t.Gew(1),i=t.GaO();let s,E,O,D;t.yG2(2),t.C0Y(2,null!=(s=i.payment())&&s.value?2:-1),t.yG2(),t.C0Y(3,null!=(E=i.payment())&&E.external_id?3:-1),t.yG2(5),t.E7m("value",null==(O=i.payment())?null:O.preorder_type),t.yG2(3),t.E7m("ngTemplateOutlet",o),t.yG2(3),t.E7m("tuiHint",e)("showLoader",i.loading()),t.yG2(3),t.C0Y(17,"paid"===(D=i.status())?17:"authorized"===D?18:"todo"===D?19:"refunded"===D?20:21)}}function zn(n,_){1&n&&t.C_f(0)}function Fn(n,_){if(1&n){const e=t.KQA();t.yuY(0,Pn,7,6,"ng-template",null,0,t.gJz)(2,wn,22,7,"ng-template",null,1,t.gJz),t.I0R(4,"button",2),t.qCj("click",function(){t.usT(e);const i=t.Gew(3),s=t.GaO();return t.CGJ(s.showDialog(i))}),t.yuY(5,zn,1,0,"ng-container",3),t.C$Y()}if(2&n){const e=t.Gew(1);t.yG2(5),t.E7m("ngTemplateOutlet",e)}}function Hn(n,_){1&n&&(t.SAx(0),t.aS0(1,55),t.k70())}function Xn(n,_){1&n&&(t.SAx(0),t.aS0(1,56),t.k70())}function Un(n,_){1&n&&t.yuY(0,Hn,2,0,"ng-container")(1,Xn,2,0),2&n&&t.C0Y(0,_.$implicit?0:1)}const Kn=()=>[!0,!1];function Bn(n,_){if(1&n&&t.wR5(0,"tui-data-list-wrapper",57),2&n){t.GaO();const e=t.Gew(16);t.E7m("itemContent",e)("items",t.q4q(2,Kn))}}function Jn(n,_){if(1&n){const e=t.KQA();t.I0R(0,"h2",8),t.aS0(1,37),t.C$Y(),t.I0R(2,"p",38),t.OEk(3),t.wVc(4,"date"),t.wR5(5,"app-reservation-people",39),t.C$Y(),t.I0R(6,"form",40),t.qCj("ngSubmit",function(){const s=t.usT(e).$implicit,E=t.GaO(2);return t.CGJ(E.createPayment(s))}),t.I0R(7,"div",41)(8,"tui-input-number",42),t.SAx(9),t.aS0(10,43),t.k70(),t.C$Y(),t.I0R(11,"p",44),t.aS0(12,45),t.C$Y(),t.wR5(13,"app-errors",46),t.C$Y(),t.I0R(14,"div",41),t.yuY(15,Un,2,1,"ng-template",null,47,t.gJz),t.I0R(17,"tui-select",48),t.SAx(18),t.aS0(19,49),t.k70(),t.yuY(20,Bn,1,3,"tui-data-list-wrapper",50),t.C$Y(),t.wR5(21,"app-errors",46),t.C$Y(),t.wR5(22,"app-errors",46),t.I0R(23,"button",51),t.SAx(24),t.aS0(25,52),t.k70(),t.C$Y(),t.I0R(26,"button",53),t.SAx(27),t.aS0(28,54),t.k70(),t.C$Y()()}if(2&n){const e=t.Gew(16),o=t.GaO(2);let i,s,E;t.yG2(3),t.CAO(" ",null==(i=o.reservation())?null:i.fullname," - ",t.g7$(4,13,null==(i=o.reservation())?null:i.datetime,"full")," - "),t.yG2(2),t.E7m("adults",null==(s=o.reservation())?null:s.adults)("children",null==(E=o.reservation())?null:E.children),t.yG2(),t.E7m("formGroup",o.newPaymentForm),t.yG2(2),t.E7m("tuiAutoFocus",!0)("tuiTextfieldPostfix","\u20ac")("formControl",o.newPaymentForm.controls.amount),t.yG2(5),t.E7m("errors",o.newPaymentForm.controls.amount.errors),t.yG2(4),t.E7m("valueContent",e)("formControl",o.newPaymentForm.controls.deferred),t.yG2(4),t.E7m("errors",o.newPaymentForm.controls.deferred.errors),t.yG2(),t.E7m("errors",o.newPaymentForm.errors)}}function Qn(n,_){if(1&n){const e=t.KQA();t.yuY(0,Jn,29,16,"ng-template",null,35,t.gJz),t.I0R(2,"button",2),t.qCj("click",function(){t.usT(e);const i=t.Gew(1),s=t.GaO();return t.CGJ(s.showDialog(i))}),t.SAx(3),t.aS0(4,36),t.k70(),t.C$Y()}}let Wn=(()=>{class n{constructor(){this.destroy=(0,t.uUt)(p.UF),this.dialogs=(0,t.uUt)(A._k),this.reservations=(0,t.uUt)(S.S),this.notifications=(0,t.uUt)(k.E),this.reservationChange=new t._w7,this.reservation=(0,t.OCB)(null),this.payment=(0,t.OCB)(null),this.status=(0,t.S6b)(()=>this.payment()?.status||null),this.loading=(0,t.OCB)(!1),this.newPaymentForm=new r.WC({amount:new r.Ku(null,[r.AQ.required]),deferred:new r.Ku(null,[r.AQ.required])})}set reservationValue(e){this.reservation.set(e),this.payment.set(e?.payment||null)}createPayment(e){const o=this.newPaymentForm.controls.amount.value,i=this.newPaymentForm.controls.deferred.value,s=this.reservation()?.id;s&&!this.newPaymentForm.invalid&&o?this.reservations.createPayment(s,{amount:o,deferred:i}).pipe((0,m.a)(this.destroy)).subscribe({next:E=>{this.reservationValue=E,this.reservationChange.emit(E),this.notifications.fireSnackBar("Pagamento creato."),e.complete()}}):this.notifications.fireSnackBar("Verifica i dati inseriti e riprova.")}showDialog(e){this.dialogs.open(e).subscribe()}fetchPaymentStatus(){const e=this.reservation()?.id;e?(this.loading.set(!0),this.reservations.refreshPaymentStatus(e).pipe((0,m.a)(this.destroy),(0,f.U)(()=>this.loading.set(!1))).subscribe(o=>{this.reservationValue=o},o=>{this.notifications.error((0,u.mk)(o))})):this.notifications.error()}cancelPayment(){const e=this.reservation()?.id;e?this.notifications.confirm("I soldi della prenotazione verranno ritornati al cliente. Sei sicuro?").subscribe({next:o=>{o&&(this.loading.set(!0),this.reservations.refoundPayment(e).pipe((0,m.a)(this.destroy),(0,f.U)(()=>this.loading.set(!1))).subscribe(i=>{this.reservationValue=i},i=>{this.notifications.error((0,u.mk)(i))}))}}):this.notifications.error()}confirmPayment(){const e=this.reservation()?.id;e?this.notifications.confirm("La transazione verr\xE0 confermata. Sei sicuro?").subscribe({next:o=>{o&&(this.loading.set(!0),this.reservations.confirmPayment(e).pipe((0,m.a)(this.destroy),(0,f.U)(()=>this.loading.set(!1))).subscribe(i=>{this.reservationValue=i},i=>{this.notifications.error((0,u.mk)(i))}))}}):this.notifications.error()}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-admin-reservation-payment"]],inputs:{reservationValue:[t.Wk5.None,"reservation","reservationValue"]},outputs:{reservationChange:"reservationChange"},standalone:!0,features:[t.M5G([p.UF]),t.UHJ],decls:2,vars:1,consts:()=>{let e,o,i,s,E,O,D,K,B,L,Z,q,tt,et,nt,ot,it,_t,at,st,rt,lt,I,ht;return e="Pagata",o="Autorizzata",i="Non pagata",s="Rimborsata",E="Stato pagamento",O="Tipologia ordine",D="Id pagamento:",K="Aggiorna stato (scarica ultima versione dal gateway di pagamento)",B="Il pagamento \xE8 stato completato con successo.",L="Storna pagamento",Z="Il pagamento \xE8 stato autorizzato.",q="CONFERMA pagamento",tt="Storna pagamento",et="Link per completare il pagamento:",nt="Il pagamento \xE8 stato rimborsato.",ot="Crea pagamento",it="Crea pagamento",_t=" Valore pagamento (assoluto) ",at="Il valore che inserisci non verr\xE0 moltiplicato per il numero di persone.",st="Tipologia di addebito",rt=" Conferma ",lt=" Annulla ",I="Autorizzazione",ht="Pagamento",[["paymentStatus",""],["modalTemplate",""],["type","button","tuiButton","","size","m","appearance","outline",3,"click"],[4,"ngTemplateOutlet"],e,o,i,s,[1,"text-xl","bold","mb-3"],E,["class","w-fit border font-bold rounded-md border-success-dark text-success-dark flex items-center p-2"],["class","mt-3"],O,[3,"value"],[1,"flex","items-center"],[1,"me-2"],["hintForRefresh",""],["size","m","type","button","tuiIconButton","",3,"tuiHint","showLoader","click"],[1,"w-fit","border","font-bold","rounded-md","border-success-dark","text-success-dark","flex","items-center","p-2"],[1,"mt-3"],D,[3,"content"],K,[1,"my-3"],B,["tuiButton","","type","button","size","m","appearance","secondary-destructive",3,"showLoader","click"],L,Z,["tuiButton","","type","button","size","m","appearance","outline",1,"me-2",3,"showLoader","click"],q,tt,et,[1,"flex","items-center","justify-center"],["tuiLink","",1,"me-2",3,"href"],nt,["createPaymentTemplate",""],ot,it,[1,"block","text-slate-400","mb-2"],[3,"adults","children"],[3,"formGroup","ngSubmit"],[1,"block","mb-3"],[3,"tuiAutoFocus","tuiTextfieldPostfix","formControl"],_t,[1,"block","my-2"],at,[3,"errors"],["deferredValue",""],[3,"valueContent","formControl"],st,[3,"itemContent","items",4,"tuiDataList"],["tuiButton","","appearance","primary","type","submit",1,"me-2"],rt,["tuiButton","","appearance","outline","type","button"],lt,I,ht,[3,"itemContent","items"]]},template:function(o,i){1&o&&t.yuY(0,Fn,6,1)(1,Qn,5,0),2&o&&t.C0Y(0,i.payment()?0:i.reservation()?1:-1)},dependencies:[M.CI,M.Kw,Rn.M,G.w,G.C,T.cf,T.XV,C.oB,C.qL,g.WY,g.lh,g.SL,g.i6,g.IT,T.y,r.sl,r.sz,r.ue,r.u,r.ug,r.uW,N.CQ,mt.Q7,mt.mi,mt.Qj,z.aS,z.We,l.m6,l.gJ,Nn.g,At,Q.my,Q.cP,Q.uO,c.A$,c.Ux,X.q8,X.OO,Mn,It],changeDetection:0})}return n})();function jn(n,_){if(1&n){const e=t.KQA();t.I0R(0,"button",8),t.qCj("click",function(){t.usT(e);const i=t.GaO().$implicit,s=t.GaO(2);return t.CGJ(s.emit(i))}),t.wR5(1,"app-reservation-status",5),t.C$Y()}if(2&n){const e=t.GaO().$implicit;t.yG2(),t.E7m("status",e)}}function Zn(n,_){if(1&n&&t.yuY(0,jn,2,1,"button",7),2&n){const e=_.$implicit,o=t.GaO(2);t.C0Y(0,e!=o.status()?0:-1)}}function qn(n,_){if(1&n&&(t.I0R(0,"tui-data-list"),t.c53(1,Zn,1,1,null,null,t.oxv),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.oho(e.options)}}const to=n=>({rotate180:n});let eo=(()=>{class n{constructor(){this.destroy$=(0,t.uUt)(p.UF),this.service=(0,t.uUt)(S.S),this.statusChange=new t._w7,this.itemId=(0,t.OCB)(null),this.loading=(0,t.OCB)(!1),this.status=(0,t.OCB)(null),this.options=["arrived","noshow","cancelled","deleted"],this.buttonAppearance="outline"}set reservation(e){this.itemId.set(e.id||null),this.loading.set(!1),this.status.set(e.status||null)}emit(e){this.statusChange.emit(e)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-eip-reservation-status"]],inputs:{buttonAppearance:"buttonAppearance",reservation:"reservation"},outputs:{statusChange:"statusChange"},standalone:!0,features:[t.M5G([p.UF]),t.UHJ],decls:9,vars:6,consts:[["dropdownContent",""],[3,"content"],["dropdown",""],["type","button","size","m","tuiButton","",3,"appearance"],[1,"flex","items-center"],[3,"status"],[1,"animation-speed-2",3,"ngClass"],["type","button","tuiOption",""],["type","button","tuiOption","",3,"click"]],template:function(o,i){if(1&o&&(t.yuY(0,qn,3,0,"ng-template",null,0,t.gJz),t.I0R(2,"tui-hosted-dropdown",1,2)(4,"button",3)(5,"span",4),t.wR5(6,"app-reservation-status",5),t.I0R(7,"mat-icon",6),t.OEk(8,"expand_more"),t.C$Y()()()()),2&o){const s=t.Gew(1),E=t.Gew(3);t.yG2(2),t.E7m("content",s),t.yG2(2),t.E7m("appearance",i.buttonAppearance),t.yG2(2),t.E7m("status",i.status()),t.yG2(),t.E7m("ngClass",t.S45(4,to,E.open))}},dependencies:[M.CI,M.Kw,j.GE,j.Qw,c.A$,c.yi,c.sP,V.Sk,Mt.a,C.oB,C.qL,T.QF],changeDetection:0})}return n})();var no=a(1183),oo=a(4208),io=a(5180);let _o=(()=>{class n{constructor(e){this.context=e,this.control=new r.Ku(null),this.form=new r.WC({control:this.control});let o=null;e.data&&"object"==typeof e.data&&e.data.item instanceof io.C?o=e.data.item.table||null:e.data&&"string"==typeof e.data.table&&(o=e.data.table),this.control.patchValue(o)}submit(){this.context.completeWith(this.control.value)}cancel(){this.context.completeWith(!1)}static#t=this.\u0275fac=function(o){return new(o||n)(t.GI1(d.C0))};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-edit-reservation-table-modal"]],standalone:!0,features:[t.UHJ],decls:10,vars:3,consts:()=>{let e;return e="Tavolo numero",[[1,"m-3","p-3",3,"formGroup","ngSubmit"],[1,"mb-3"],[3,"tuiAutoFocus","formControl"],e,[1,"flex","items-center"],["type","submit","tuiButton",""],["type","button","tuiButton","","appearance","icon",3,"click"]]},template:function(o,i){1&o&&(t.I0R(0,"form",0),t.qCj("ngSubmit",function(){return i.submit()}),t.I0R(1,"div",1)(2,"tui-input",2),t.SAx(3),t.aS0(4,3),t.k70(),t.C$Y()(),t.I0R(5,"div",4)(6,"button",5),t.OEk(7," Conferma "),t.C$Y(),t.I0R(8,"button",6),t.qCj("click",function(){return i.cancel()}),t.OEk(9," Annulla "),t.C$Y()()()),2&o&&(t.E7m("formGroup",i.form),t.yG2(2),t.E7m("tuiAutoFocus",!0)("formControl",i.control))},dependencies:[r.sl,r.sz,r.ue,r.u,r.ug,r.uW,M.CI,M.Kw,z.aS,N.CQ,N.Oo,N.cP,l.m6,l.gJ],encapsulation:2,changeDetection:0})}return n})();const ao=(n,_)=>_.id;function so(n,_){1&n&&(t.SAx(0),t.aS0(1,13),t.k70())}function ro(n,_){1&n&&(t.SAx(0),t.aS0(1,14),t.k70())}function lo(n,_){1&n&&(t.SAx(0),t.aS0(1,15),t.k70())}function co(n,_){1&n&&(t.SAx(0),t.aS0(1,16),t.k70())}function Eo(n,_){1&n&&(t.SAx(0),t.aS0(1,17),t.k70())}function uo(n,_){1&n&&(t.SAx(0),t.aS0(1,18),t.k70())}function po(n,_){1&n&&(t.SAx(0),t.aS0(1,19),t.k70())}function mo(n,_){1&n&&(t.SAx(0),t.aS0(1,20),t.k70())}function To(n,_){1&n&&(t.I0R(0,"app-no-items",21)(1,"h4"),t.aS0(2,22),t.C$Y(),t.I0R(3,"span"),t.aS0(4,23),t.C$Y()()),2&n&&t.E7m("showLoader",!1)}function Co(n,_){if(1&n&&(t.OEk(0),t.wVc(1,"date")),2&n){const e=t.GaO().$implicit;t.oRS(" ",t.g7$(1,1,e.datetime,"full")," ")}}function So(n,_){if(1&n&&(t.I0R(0,"p"),t.SAx(1),t.aS0(2,51),t.k70(),t.OEk(3),t.C$Y()),2&n){const e=t.GaO(2).$implicit;t.yG2(3),t.CAO(" ",e.table_type.name," (id=",e.table_type_id,"). ")}}function Ro(n,_){if(1&n&&(t.yuY(0,So,4,2,"ng-template",null,49,t.gJz),t.I0R(2,"span",50)(3,"mat-icon",39),t.OEk(4,"table_restaurant"),t.C$Y(),t.I0R(5,"span"),t.OEk(6),t.C$Y()()),2&n){const e=t.Gew(1),o=t.GaO().$implicit;t.yG2(2),t.E7m("tuiHint",e),t.yG2(4),t.cNF(o.table_type.name)}}function No(n,_){if(1&n&&(t.I0R(0,"span",52)(1,"span",44)(2,"span",39),t.aS0(3,53),t.C$Y(),t.I0R(4,"span",39),t.OEk(5),t.C$Y()()()),2&n){const e=t.GaO().$implicit;t.yG2(5),t.cNF(e.table)}}function Oo(n,_){1&n&&(t.SAx(0),t.aS0(1,56),t.k70())}function go(n,_){1&n&&(t.SAx(0),t.aS0(1,57),t.k70())}function fo(n,_){1&n&&(t.SAx(0),t.aS0(1,58),t.k70())}function Mo(n,_){1&n&&(t.SAx(0),t.aS0(1,59),t.k70())}function Ao(n,_){if(1&n&&t.yuY(0,Oo,2,0)(1,go,2,0)(2,fo,2,0)(3,Mo,2,0),2&n){const e=t.GaO(2).$implicit;let o;t.C0Y(0,"todo"===(o=e.payment.status)?0:"authorized"===o?1:"paid"===o?2:"refunded"===o?3:-1)}}function Io(n,_){if(1&n&&(t.yuY(0,Ao,4,1,"ng-template",null,54,t.gJz),t.I0R(2,"mat-icon",55),t.wVc(3,"paymentStatusColor"),t.OEk(4,"attach_money"),t.C$Y()),2&n){const e=t.Gew(1),o=t.GaO().$implicit;t.yG2(2),t.E7m("tuiHint",e)("ngClass",t.kDX(3,2,o.payment.status))}}function ho(n,_){if(1&n&&(t.I0R(0,"p",60),t.OEk(1),t.C$Y()),2&n){const e=t.GaO().$implicit;t.yG2(),t.oRS(" ",e.notes," ")}}function yo(n,_){if(1&n&&(t.I0R(0,"p",61),t.OEk(1),t.C$Y()),2&n){const e=t.GaO().$implicit;t.E7m("phoneTo",e.phone)("whatsapp",!0),t.yG2(),t.cNF(e.phone)}}function vo(n,_){if(1&n&&(t.I0R(0,"p",62),t.OEk(1),t.C$Y()),2&n){const e=t.GaO().$implicit;t.E7m("mailTo",e.email),t.yG2(),t.cNF(e.email)}}function Po(n,_){1&n&&(t.I0R(0,"span"),t.aS0(1,63),t.C$Y())}function $o(n,_){1&n&&(t.I0R(0,"span"),t.aS0(1,64),t.C$Y())}function Go(n,_){if(1&n){const e=t.KQA();t.I0R(0,"a",65),t.qCj("click",function(){t.usT(e);const i=t.GaO().$implicit,s=t.GaO();return t.CGJ(s.editTable(i))}),t.SAx(1),t.aS0(2,66),t.k70(),t.C$Y()}}const xo=n=>({rotate180:n});function Do(n,_){if(1&n){const e=t.KQA();t.I0R(0,"div",24)(1,"div")(2,"span",25),t.yuY(3,Co,2,4,"ng-template",null,26,t.gJz),t.I0R(5,"span",27),t.OEk(6),t.wVc(7,"date"),t.C$Y(),t.I0R(8,"span",28),t.OEk(9),t.C$Y(),t.wR5(10,"app-reservation-people",29),t.yuY(11,Ro,7,2)(12,No,6,1,"span",30)(13,Io,5,4),t.C$Y(),t.yuY(14,ho,2,1,"p",31),t.I0R(15,"tui-expand",null,32),t.yuY(17,yo,2,3,"p",33)(18,vo,2,2,"p",34),t.I0R(19,"div",35)(20,"a",36),t.SAx(21),t.aS0(22,37),t.k70(),t.C$Y()(),t.I0R(23,"div",35)(24,"span",38)(25,"span",39),t.aS0(26,40),t.C$Y(),t.I0R(27,"span"),t.OEk(28),t.wVc(29,"date"),t.C$Y()()(),t.I0R(30,"div",35),t.wR5(31,"app-admin-reservation-payment",41),t.C$Y(),t.wR5(32,"app-reservation-events",42),t.C$Y(),t.I0R(33,"button",43),t.qCj("click",function(){t.usT(e);const i=t.Gew(16);return t.CGJ(i.expanded=!i.expanded)}),t.I0R(34,"span",44),t.yuY(35,Po,2,0,"span")(36,$o,2,0),t.I0R(37,"mat-icon",45),t.OEk(38,"expand_more"),t.C$Y()()()(),t.I0R(39,"div",46)(40,"app-eip-reservation-status",47),t.qCj("statusChange",function(i){const E=t.usT(e).$implicit,O=t.GaO();return t.CGJ(O.updateStatus(E,i))}),t.C$Y(),t.yuY(41,Go,3,0,"a",48),t.C$Y()()}if(2&n){const e=_.$implicit,o=t.Gew(4),i=t.Gew(16);t.yG2(5),t.E7m("tuiHint",o),t.yG2(),t.oRS(" ",t.g7$(7,20,e.datetime,"HH:mm")," "),t.yG2(3),t.cNF(e.fullname),t.yG2(),t.E7m("adults",e.adults)("children",e.children),t.yG2(),t.C0Y(11,e.table_type?11:-1),t.yG2(),t.C0Y(12,e.table?12:-1),t.yG2(),t.C0Y(13,e.payment?13:-1),t.yG2(),t.C0Y(14,e.notes&&e.notes.length>0?14:-1),t.yG2(3),t.C0Y(17,e.phone&&e.phone.length>0?17:-1),t.yG2(),t.C0Y(18,e.email&&e.email.length>0?18:-1),t.yG2(2),t._6D("routerLink",e.id),t.yG2(8),t.cNF(t.g7$(29,23,e.created_at,"medium")),t.yG2(3),t.E7m("reservation",e),t.yG2(),t.E7m("reservation",e),t.yG2(3),t.C0Y(35,i.expanded?35:36),t.yG2(2),t.E7m("ngClass",t.S45(26,xo,i.expanded)),t.yG2(3),t.E7m("buttonAppearance","flat")("reservation",e),t.yG2(),t.C0Y(41,e.table?-1:41)}}function Yo(n,_){1&n&&t.C_f(0)}function Lo(n,_){if(1&n&&t.yuY(0,Yo,1,0,"ng-container",67),2&n){t.GaO();const e=t.Gew(20);t.E7m("ngTemplateOutlet",e)}}let Vo=(()=>{class n{constructor(){this.loading=(0,t.OCB)(!1),this.data=(0,t.OCB)(null),this.items=(0,t.S6b)(()=>this.data()?.items||[]),this.dialogs=(0,t.uUt)(A._k),this.injector=(0,t.uUt)(t.zZn),this.service=(0,t.uUt)(S.S),this.router=(0,t.uUt)(H.E5),this.notifications=(0,t.uUt)(k.E),this.date=(0,t.uUt)(T.y),this.destroy$=(0,t.uUt)(p.UF),this._=(0,t.uUt)(Cn.OY).setTitle("Prenotazioni | La Porta D'Acqua"),this.inputSize="m",this.filters={}}ngOnInit(){this.router.events.pipe((0,m.a)(this.destroy$)).subscribe({next:e=>{e instanceof H.MT&&this.search()}})}updateStatus(e,o){const i=e.id;i&&o?this.notifications.confirm("La prenotazione verr\xe0 aggiornata.",{title:"Prenotazione " + e.fullname + " x " + ((e.adults || 0) + (e.children || 0)) + " in stato " + no.au[o].title + ""}).subscribe({next:s=>{s&&this.confirmedUpdateStatus(i,o)}}):this.notifications.error()}delete(e){e&&this.notifications.confirm("Sei sicuro di voler cancellare questa prenotazione?").subscribe({next:o=>{o&&this.confirmedDelete(e)}})}filtersChanged(e){this.filters=e,this.search(e)}editTable(e){this.dialogs.open(new d.WO(_o,this.injector),{data:{item:e}}).pipe((0,m.a)(this.destroy$)).subscribe({next:o=>{0!=o&&e.id&&(this.loading.set(!0),this.service.update(e.id,{table:o}).pipe((0,m.a)(this.destroy$),(0,f.U)(()=>this.loading.set(!1)),(0,f.U)(()=>this.search())).subscribe())},error:o=>console.error(o)})}confirmedUpdateStatus(e,o){this.loading.set(!0),("deleted"==o?this.service.destroy(e):this.service.updateStatus(e,o)).pipe((0,m.a)(this.destroy$),(0,f.U)(()=>this.loading.set(!1))).subscribe({next:()=>{this.notifications.fireSnackBar("Stato aggiornato con successo."),this.search()},error:s=>{this.notifications.error((0,u.mk)(s)||"Qualcosa \xE8 andato storto nell'aggiornamento dello stato.")}})}confirmedDelete(e){this.loading.set(!0),this.service.destroy(e).pipe((0,m.a)(this.destroy$),(0,f.U)(()=>{this.loading.set(!1),this.search()})).subscribe({error:o=>{this.notifications.error((0,u.mk)(o)||"Qualcosa \xE8 andato storto nella cancellazione.")}})}search(e=this.filters){e||={},e={...e},this.loading.set(!0),this.service.search(e).pipe((0,m.a)(this.destroy$),(0,f.U)(()=>this.loading.set(!1))).subscribe({next:o=>{this.data.set(o)},error:o=>{this.notifications.error((0,u.mk)(o)||"Qualcosa \xE8 andato storto nella ricerca."),console.error(o)}})}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-admin-reservations-home"]],viewQuery:function(o,i){if(1&o&&t.CC$(St,7),2&o){let s;t.wto(s=t.Gqi())&&(i.turnSelect=s.first)}},standalone:!0,features:[t.M5G([p.UF]),t.UHJ],decls:28,vars:7,consts:()=>{let e,o,i,s,E,O,D,K,B,L,Z,q,tt,et,nt,ot,it,_t,at,st,rt,lt;return e="Prenotazioni",o="Orario",i="Nome",s="Email",E="N\xB0",O="Stato",D="Tavolo",K="Note",B="Contatti",L="Nessuna prenotazione",Z="Prova a modificare i filtri di ricerca",q="Modifica prenotazione",tt="Creazione:",et="\xC8 stato selezionato il tavolo di tipo",nt="Tavolo",ot="Il pagamento \xE8 in attesa di essere completato",it="Il pagamento \xE8 stato autorizzato",_t="Il pagamento \xE8 stato completato con successo",at="Il pagamento \xE8 stato rimborsato",st="Nascondi dettagli",rt="Mostra dettagli",lt="Assegna tavolo",[e,["datetimeCol",""],["nameCol",""],["emailCol",""],["peopleCol",""],["statusCol",""],["tableCol",""],["detailsCol",""],["contactsCol",""],["noItems",""],[3,"loading","data","filtersChanged"],[3,"overlay","showLoader"],[3,"showLoader","filters"],o,i,s,E,O,D,K,B,[3,"showLoader"],L,Z,[1,"p-3","m-2","flex","items-center","justify-between","border","rounded-md","border-slate-400"],[1,"flex","items-center","text-lg","mb-2","flex-wrap"],["detailDatetime",""],[1,"me-2",3,"tuiHint"],[1,"me-2"],[1,"me-2",3,"adults","children"],["class","text-danger font-bold"],["class","block mb-2 text-danger font-bold overflow-wrap-anywhere"],["expand",""],["class","block mb-2 overflow-wrap-anywhere",3,"phoneTo","whatsapp"],["class","block mb-2 overflow-wrap-anywhere",3,"mailTo"],[1,"block","mb-2"],["tuiLink","",3,"routerLink"],q,[1,"text-slate-400"],[1,"me-1"],tt,[3,"reservation"],[1,"my-auto",3,"reservation"],["type","button","size","s","tuiButton","","appearance","outline",3,"click"],[1,"flex","items-center"],[1,"animation-speed-2",3,"ngClass"],[1,"flex","flex-col","justify-center","items-around"],[1,"mb-3",3,"buttonAppearance","reservation","statusChange"],["class","flex flex-col items-center justify-center","tuiLink",""],["tableTypeHint",""],[1,"flex","items-center","border","rounded-md","border-slate-400","p-1","me-2",3,"tuiHint"],et,[1,"text-danger","font-bold"],nt,["paymentStatusHint",""],[3,"tuiHint","ngClass"],ot,it,_t,at,[1,"block","mb-2","text-danger","font-bold","overflow-wrap-anywhere"],[1,"block","mb-2","overflow-wrap-anywhere",3,"phoneTo","whatsapp"],[1,"block","mb-2","overflow-wrap-anywhere",3,"mailTo"],st,rt,["tuiLink","",1,"flex","flex-col","items-center","justify-center",3,"click"],lt,[4,"ngTemplateOutlet"],["class","p-3 m-2 flex items-center justify-between border rounded-md border-slate-400"]]},template:function(o,i){1&o&&(t.I0R(0,"h1"),t.SAx(1),t.aS0(2,0),t.k70(),t.C$Y(),t.yuY(3,so,2,0,"ng-template",null,1,t.gJz)(5,ro,2,0,"ng-template",null,2,t.gJz)(7,lo,2,0,"ng-template",null,3,t.gJz)(9,co,2,0,"ng-template",null,4,t.gJz)(11,Eo,2,0,"ng-template",null,5,t.gJz)(13,uo,2,0,"ng-template",null,6,t.gJz)(15,po,2,0,"ng-template",null,7,t.gJz)(17,mo,2,0,"ng-template",null,8,t.gJz)(19,To,5,1,"ng-template",null,9,t.gJz),t.I0R(21,"app-list-reservations-filters",10),t.qCj("filtersChanged",function(E){return i.filtersChanged(E)}),t.I0R(22,"tui-loader",11),t.c53(23,Do,42,28,"div",68,ao,!1,Lo,1,1,"ng-container"),t.C$Y()(),t.wR5(26,"app-reservation-tables-summary",12)(27,"router-outlet")),2&o&&(t.yG2(21),t.E7m("loading",i.loading())("data",i.data()),t.yG2(),t.E7m("overlay",!0)("showLoader",i.loading()),t.yG2(),t.oho(i.items()),t.yG2(3),t.E7m("showLoader",i.loading())("filters",i.filters))},dependencies:[T.MD,T.QF,T.XV,T.y,r.sl,N.CQ,l.m6,M.CI,M.Kw,C.qL,H.ER,G.w,G.C,H.cP,Y.yy,g.WY,g.lh,g.SL,g.i6,g.IT,He,on,ln,un,At,Sn.O,V.Sk,V.Cb,Wn,r.y,eo,b.kh,b.st,oo.u,It],encapsulation:2,changeDetection:0})}return n})()},9772:(F,v,a)=>{a.d(v,{CU:()=>r,MJ:()=>T,ye:()=>N}),(new Date).getTimezoneOffset();const T=1;function r(p,l=T){if(!("string"==typeof p&&p.length>0&&p.match(/\d{1,2}:\d{1,2}/)))return console.error("Invalid string provided to strTimeTimezone",{string:p}),"";const M=Number(p.split(":")[0])+l;return`${M<10?"0":""}${M}:${p.split(":")[1]}`}function N(p,l=T){return r(p,-1*l)}},1960:(F,v,a)=>{a.d(v,{u:()=>N});var t=a(8400),T=a(7516);class r extends t.w{constructor(l){super(l),this.date=l.date?new Date(l.date):void 0,this.reservation_turn_id=l.reservation_turn_id,this.group_id=l.group_id,this.reservation_turn=l.reservation_turn?new T.e(l.reservation_turn):void 0}}class N extends t.w{constructor(l){super(l),this.turns=[],this.dates=[],this.title=l.title,this.status=l.status,this.preorder_type=l.preorder_type,this.payment_value=l.payment_value,this.message=l.message,this.turns=(l.turns||[]).map(A=>new T.e(A)),this.dates=(l.dates||[]).map(A=>new r(A)),this.translations=l.translations||{},this.table_type_to_preorder_reservation_groups=l.table_type_to_preorder_reservation_groups}}},7516:(F,v,a)=>{a.d(v,{e:()=>N});var t=a(8400),T=a(9772),r=a(1960);class N extends t.w{constructor(l){super(l),this.messages=[],this.name=l.name,this.weekday=l.weekday,this.step=l.step,this.valid_times=l.valid_times,this.starts_at=l.starts_at?(0,T.CU)(l.starts_at):void 0,this.ends_at=l.ends_at?(0,T.CU)(l.ends_at):void 0,this.preorder_reservation_group=l.preorder_reservation_group?new r.u(l.preorder_reservation_group):void 0,this.messages=l.messages}}},9160:(F,v,a)=>{a.d(v,{E:()=>r});var t=a(400),T=a(4496);let r=(()=>{class N{transform(l){return l instanceof Date?l:l instanceof t.EK?l.toUtcNativeDate():null}static#t=this.\u0275fac=function(A){return new(A||N)};static#e=this.\u0275pipe=T.UTH({name:"fromTuiDay",type:N,pure:!0,standalone:!0})}return N})()},2516:(F,v,a)=>{a.d(v,{G:()=>T});var t=a(4496);let T=(()=>{class r{constructor(){this.weekdays=["Domenica","Luned\xEC","Marted\xEC","Mercoled\xEC","Gioved\xEC","Venerd\xEC","Sabato"]}transform(p){return"number"!=typeof p&&"string"==typeof p&&(p=parseInt(p)),"number"==typeof p&&p>=0&&p<=6?this.weekdays[p]:null}static#t=this.\u0275fac=function(l){return new(l||r)};static#e=this.\u0275pipe=t.UTH({name:"weekday",type:r,pure:!0,standalone:!0})}return r})()},7556:(F,v,a)=>{a.d(v,{K:()=>N});var t=a(6012),T=a(7516),r=a(4496);let N=(()=>{class p extends t.s{constructor(){super(T.e,"admin/reservation_turns")}static#t=this.\u0275fac=function(M){return new(M||p)};static#e=this.\u0275prov=r.wxM({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},5892:(F,v,a)=>{a.d(v,{Ws:()=>z,yy:()=>Et});var t=a(4496),T=a(2528),r=a(4472);(0,T.W0)((0,r.u)("showHideText"));const p=(0,T.W0)((0,r.u)("paginationTexts"));var l=a(466),A=a(1512),M=a(4336),G=a(3656),g=a(8212),V=a(5944),b=a(1368),C=a(1040);function H(c,$){if(1&c&&(t.SAx(0),t.OEk(1),t.I0R(2,"strong",6),t.OEk(3),t.C$Y(),t.k70()),2&c){const d=t.GaO().ngIf,P=t.GaO();t.yG2(),t.oRS(" ",d.pages," "),t.yG2(2),t.cNF(P.pages)}}function Y(c,$){if(1&c&&(t.SAx(0),t.OEk(1),t.k70()),2&c){const d=$.polymorpheusOutlet;t.yG2(),t.oRS(" ",d," ")}}function k(c,$){if(1&c&&t.wR5(0,"tui-svg",13),2&c){const d=t.GaO(4);t.E7m("src",d.commonIcons.check)}}function m(c,$){1&c&&t.wR5(0,"span",14)}const f=(c,$)=>({$implicit:c,total:$});function u(c,$){if(1&c){const d=t.KQA();t.SAx(0),t.I0R(1,"button",9),t.qCj("click",function(){const U=t.usT(d).$implicit,W=t.GaO(3);return t.CGJ(W.onItem(U))}),t.yuY(2,Y,2,1,"ng-container",10)(3,k,1,1,"tui-svg",11)(4,m,1,0,"ng-template",null,12,t.gJz),t.C$Y(),t.k70()}if(2&c){const d=$.$implicit,P=t.Gew(5),h=t.GaO(3);t.yG2(2),t.E7m("polymorpheusOutlet",h.options.sizeOptionContent)("polymorpheusOutletContext",t.IBC(4,f,d,h.total)),t.yG2(),t.E7m("ngIf",d===h.size)("ngIfElse",P)}}function S(c,$){if(1&c&&(t.I0R(0,"tui-data-list",7),t.yuY(1,u,6,7,"ng-container",8),t.C$Y()),2&c){const d=t.GaO(2);t.yG2(),t.E7m("ngForOf",d.items)}}function x(c,$){if(1&c){const d=t.KQA();t.SAx(0),t.I0R(1,"button",15),t.qCj("click",function(){t.usT(d);const h=t.GaO(2);return t.CGJ(h.back())}),t.C$Y(),t.I0R(2,"button",16),t.qCj("click",function(){t.usT(d);const h=t.GaO(2);return t.CGJ(h.forth())}),t.C$Y(),t.k70()}if(2&c){const d=$.ngIf,P=t.GaO(2);t.yG2(),t.E7m("disabled",P.leftDisabled)("icon",P.icons.decrement)("title",d[0]),t.yG2(),t.E7m("disabled",P.rightDisabled)("icon",P.icons.increment)("title",d[1])}}function w(c,$){if(1&c){const d=t.KQA();t.SAx(0),t.I0R(1,"span",1),t.yuY(2,H,4,2,"ng-container",0),t.C$Y(),t.I0R(3,"span",2),t.OEk(4),t.I0R(5,"tui-hosted-dropdown",3),t.iHE("openChange",function(h){t.usT(d);const U=t.GaO();return t.kNx(U.open,h)||(U.open=h),t.CGJ(h)}),t.I0R(6,"button",4)(7,"strong"),t.OEk(8),t.C$Y()(),t.yuY(9,S,2,1,"ng-template",null,5,t.gJz),t.C$Y(),t.OEk(11),t.I0R(12,"strong",6),t.OEk(13),t.C$Y()(),t.yuY(14,x,3,6,"ng-container",0),t.wVc(15,"async"),t.k70()}if(2&c){const d=$.ngIf,P=t.Gew(10),h=t.GaO();t.yG2(2),t.E7m("ngIf",h.options.showPages),t.yG2(2),t.oRS(" ",d.linesPerPage," "),t.yG2(),t.E7m("content",P),t.OKB("open",h.open),t.yG2(3),t.CAO("",h.start+1,"\u2013",h.end,""),t.yG2(3),t.oRS(" ",d.of," "),t.yG2(2),t.cNF(h.total),t.yG2(),t.E7m("ngIf",t.kDX(15,9,h.spinTexts$))}}const X=(0,T.AL)({sizeOptionContent:function ct({$implicit:c}){return`${c}`},showPages:!0,items:[10,20,50,100],size:10});let z=(()=>{class c{constructor(d,P,h,U,W){this.icons=d,this.spinTexts$=P,this.texts$=h,this.options=U,this.commonIcons=W,this.items=this.options.items,this.total=0,this.page=0,this.size=this.options.size,this.pageChange=new t._w7,this.sizeChange=new t._w7,this.paginationChange=new t._w7,this.open=!1}get pages(){return Math.ceil(this.total/this.size)}get start(){return this.page*this.size}get end(){return Math.min(this.start+this.size,this.total)}get leftDisabled(){return!this.start}get rightDisabled(){return this.end===this.total}get pagination(){return{page:this.page,size:this.size}}onItem(d){const{start:P}=this;this.size=d,this.sizeChange.emit(d),this.open=!1,this.page=Math.floor(P/this.size),this.pageChange.emit(this.page),this.paginationChange.emit(this.pagination)}back(){this.page--,this.pageChange.emit(this.page),this.paginationChange.emit(this.pagination)}forth(){this.page++,this.pageChange.emit(this.page),this.paginationChange.emit(this.pagination)}}return c.\u0275fac=function(d){return new(d||c)(t.GI1(V.KY),t.GI1(V.s1),t.GI1(p),t.GI1(X),t.GI1(V.QJ))},c.\u0275cmp=t.In1({type:c,selectors:[["tui-table-pagination"]],inputs:{items:"items",total:"total",page:"page",size:"size"},outputs:{pageChange:"pageChange",sizeChange:"sizeChange",paginationChange:"paginationChange"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"t-pages"],["automation-id","tui-table-pagination__lines-per-page-wrapper"],[3,"content","open","openChange"],["tuiLink","","type","button"],["content",""],[1,"t-strong"],["size","s"],[4,"ngFor","ngForOf"],["tuiOption","",1,"t-item",3,"click"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],["class","t-checkmark",3,"src",4,"ngIf","ngIfElse"],["fakeIcon",""],[1,"t-checkmark",3,"src"],[1,"t-checkmark"],["appearance","icon","size","xs","tuiIconButton","","type","button",1,"t-back",3,"disabled","icon","title","click"],["appearance","icon","size","xs","tuiIconButton","","type","button",3,"disabled","icon","title","click"]],template:function(d,P){1&d&&(t.yuY(0,w,16,11,"ng-container",0),t.wVc(1,"async")),2&d&&t.E7m("ngIf",t.kDX(1,1,P.texts$))},dependencies:[l.Qw,A.C,M.yi,M.sP,G.Wu,g.Kw,b.u_,b.ay,C.Af,b.a],styles:["[_nghost-%COMP%]{display:flex;font:var(--tui-font-text-s);align-items:center;color:var(--tui-text-03)}.t-strong[_ngcontent-%COMP%]{color:var(--tui-text-01)}.t-pages[_ngcontent-%COMP%]{margin-right:auto}.t-item[_ngcontent-%COMP%]{min-width:5.5rem;box-sizing:border-box}.t-checkmark[_ngcontent-%COMP%]{min-width:1.5rem;border-left:5px solid transparent}.t-back[_ngcontent-%COMP%]{margin:0 .25rem 0 1.5rem}"],changeDetection:0}),c})(),Et=(()=>{class c{}return c.\u0275fac=function(d){return new(d||c)},c.\u0275mod=t.a4G({type:c}),c.\u0275inj=t.s3X({imports:[[b.MD,g.CI,A.w,l.GE,M.A$,G.Yt,C.Ux]]}),c})()},9880:(F,v,a)=>{a.d(v,{kP:()=>b,kh:()=>k,st:()=>Y});var t=a(4496),T=a(3480),r=a(4392),N=a(3120),p=a(3616),l=a(7692),A=a(1368);const M=["wrapper"];function G(m,f){if(1&m&&(t.I0R(0,"tui-loader",4),t.C_f(1,5),t.C$Y()),2&m){const u=t.GaO(2);t.E7m("overlay",!0)("showLoader",u.loading),t.yG2(),t.E7m("ngTemplateOutlet",u.content)}}function g(m,f){if(1&m&&(t.SAx(0),t._Xx(1),t.yuY(2,G,2,3,"tui-loader",3),t.k70()),2&m){const u=t.GaO();t.yG2(2),t.E7m("ngIf",u.async)("ngIfElse",u.content)}}const V=["*"];let b=(()=>{class m{}return m.\u0275fac=function(u){return new(u||m)},m.\u0275dir=t.Sc5({type:m,selectors:[["","tuiExpandContent",""]]}),m})();let Y=(()=>{class m{constructor(u,S){this.cdr=u,this.destroy$=S,this.state=0,this.async=!1,this.content=null,this.expanded=null}set expandedSetter(u){if(null!==this.expanded)return 0!==this.state?(this.expanded=u,void(this.state=3)):(this.expanded=u,void this.retrigger(this.async&&u?1:3));this.expanded=u}get overflow(){return 0!==this.state}get loading(){return!!this.expanded&&this.async&&1===this.state}get height(){const{expanded:u,state:S,contentWrapper:x}=this;return u&&2===S||!u&&3===S?0:x&&(!u&&2===S||u&&3===S)?x.nativeElement.offsetHeight:x&&u&&1===S?Math.max(x.nativeElement.offsetHeight,48):null}get contentVisible(){return this.expanded||0!==this.state}onTransitionEnd({propertyName:u}){"opacity"===u&&3===this.state&&(this.state=0)}onExpandLoaded(u){u.stopPropagation(),1===this.state&&this.retrigger(3)}retrigger(u){this.state=2,(0,N.k)(0).pipe((0,p.a)(this.destroy$)).subscribe(()=>{2===this.state&&(this.state=u,this.cdr.markForCheck())})}}return m.\u0275fac=function(u){return new(u||m)(t.GI1(t.kD9),t.GI1(T.UF,2))},m.\u0275cmp=t.In1({type:m,selectors:[["tui-expand"]],contentQueries:function(u,S,x){if(1&u&&t.szK(x,b,5,t.Yw2),2&u){let w;t.wto(w=t.Gqi())&&(S.content=w.first)}},viewQuery:function(u,S){if(1&u&&t.CC$(M,5),2&u){let x;t.wto(x=t.Gqi())&&(S.contentWrapper=x.first)}},hostVars:9,hostBindings:function(u,S){1&u&&t.qCj("transitionend.self",function(w){return S.onTransitionEnd(w)})("tui-expand-loaded",function(w){return S.onExpandLoaded(w)}),2&u&&(t.e48("aria-expanded",S.expanded),t.m4B("height",S.height,"px"),t.eAK("_expanded",S.expanded)("_overflow",S.overflow)("_loading",S.loading))},inputs:{async:"async",expandedSetter:[t.Wk5.None,"expanded","expandedSetter"]},features:[t.M5G([T.UF])],ngContentSelectors:V,decls:3,vars:3,consts:[[1,"t-wrapper"],["wrapper",""],[4,"ngIf"],["size","l",3,"overlay","showLoader",4,"ngIf","ngIfElse"],["size","l",3,"overlay","showLoader"],[3,"ngTemplateOutlet"]],template:function(u,S){1&u&&(t.kPM(),t.I0R(0,"div",0,1),t.yuY(2,g,3,2,"ng-container",2),t.C$Y()),2&u&&(t.E7m("@tuiParentAnimation",void 0)("@.disabled",S.overflow),t.yG2(2),t.E7m("ngIf",S.contentVisible))},dependencies:[l.Cb,A.u_,A.XV],styles:['[_nghost-%COMP%]{transition-property:opacity,height,visibility;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;display:block;opacity:0;transition-delay:1ms}._overflow[_nghost-%COMP%]{overflow:hidden}._expanded[_nghost-%COMP%]{opacity:1;transform:translate(0)}._loading[_nghost-%COMP%]{opacity:.99}.t-wrapper[_ngcontent-%COMP%]:before, .t-wrapper[_ngcontent-%COMP%]:after{content:"";display:table}'],data:{animation:[r.cI]},changeDetection:0}),m})(),k=(()=>{class m{}return m.\u0275fac=function(u){return new(u||m)},m.\u0275mod=t.a4G({type:m}),m.\u0275inj=t.s3X({imports:[[A.MD,l.Sk]]}),m})()},3984:(F,v,a)=>{a.d(v,{AF:()=>r,Ib:()=>t});class t{constructor(p,l,A){this.range=p,this.name=l,this.content=A}toString(){return this.name}}class r{constructor(p,l){this.item=p,this.stringify=l}toString(){return this.stringify(this.item)}}},812:(F,v,a)=>{a.d(v,{m2:()=>b,mU:()=>M,qS:()=>N,w3:()=>C}),a(4392);var T=a(2528);a(3840);const N={DMY:"dd/mm/yyyy",MDY:"mm/dd/yyyy",YMD:"yyyy/mm/dd"},M=/\([#]+\)|[#\- ]/g,b=(Y,k,m,f)=>{if(!k?.isSingleDay||!m)return Y;const u=(0,T.Kw)(Object.entries(m).map(([x,w])=>[x,-w])),S=k.from.append(f?u:m).append({day:f?1:-1});return f?S.dayBefore(Y)?Y:S:Y&&S.dayAfter(Y)?Y:S},C={HH:23,MM:59,SS:59,MS:999}}}]);