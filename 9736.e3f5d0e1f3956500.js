"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[9736],{5704:(N,f,i)=>{i.r(f),i.d(f,{AdminReservationsHomeComponent:()=>pn});var t=i(4496),d=i(3480),C=i(7692),T=i(1236),u=i(8016),_=i(8212),l=i(1512),R=i(466),m=i(8048),g=i(4336),S=i(1560),I=i(3797),v=i(6052),y=i(5188),dt=i(5140),G=i(2204),$=i(9888),p=i(400),V=i(5e3),c=i(6504),mt=i(1183),L=i(3616),F=i(4e3),P=i(6684),M=i(1368),Y=i(9368);function St(n,r){1&n&&t.wR5(0,"app-reservation-status",3),2&n&&t.E7m("status",r.$implicit)}function Et(n,r){if(1&n&&(t.SAx(0),t.I0R(1,"button",5),t.wR5(2,"app-reservation-status",3),t.C$Y(),t.k70()),2&n){const e=r.$implicit;t.yG2(),t.E7m("value",e),t.yG2(),t.E7m("status",e)}}function gt(n,r){if(1&n&&(t.I0R(0,"tui-data-list"),t.yuY(1,Et,3,2,"ng-container",4),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.E7m("ngForOf",e.statuses)}}const Tt=["*"];let Ct=(()=>{class n{constructor(){this.destroy$=(0,t.uUt)(d.UF),this.control=new c.Ku(null),this.statuses=[...mt.I5],this.inputSize="m",this.valueChanges$=this.control.valueChanges.pipe((0,L.a)(this.destroy$),(0,F.a)(),(0,P.I)(()=>this.control.valid)),this.showCleaner=!0}ngOnInit(){}registerOnChange(e){this.valueChanges$.subscribe(e)}registerOnTouched(e){this.valueChanges$.subscribe(e)}setDisabledState(e){e?this.control.disable():this.control.enable()}writeValue(e){if(null==e||"string"==typeof e)return this.control.setValue(e);console.warn("Invalid value for reservation status select:",e)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-reservation-status-select"]],inputs:{inputSize:"inputSize",showCleaner:"showCleaner"},standalone:!0,features:[t.M5G([{provide:c.Y6,useExisting:(0,t.wd)(()=>n),multi:!0},d.UF]),t.UHJ],ngContentSelectors:Tt,decls:5,vars:4,consts:[["valueContent",""],[3,"valueContent","tuiTextfieldCleaner","tuiTextfieldSize","formControl"],[4,"tuiDataList"],[3,"status"],[4,"ngFor","ngForOf"],["tuiOption","",3,"value"]],template:function(o,a){if(1&o&&(t.kPM(),t.yuY(0,St,1,1,"ng-template",null,0,t.gJz),t.I0R(2,"tui-select",1),t._Xx(3),t.yuY(4,gt,2,1,"tui-data-list",2),t.C$Y()),2&o){const s=t.Gew(1);t.yG2(2),t.E7m("valueContent",s)("tuiTextfieldCleaner",a.showCleaner)("tuiTextfieldSize",a.inputSize)("formControl",a.control)}},dependencies:[c.sl,c.ue,c.ug,y.my,y.cP,y.uO,g.A$,g.yi,g.sP,g.Ux,M.ay,m.aS,m.es,m.rD,Y.a],styles:["[_nghost-%COMP%]{display:block;min-width:150px}"],changeDetection:0})}return n})();var Rt=i(7556),ft=i(580),w=i(2516),D=i(6096),ht=i(9604),z=i(7936),Ot=i(6732),U=i(1040);function vt(n,r){1&n&&(t.SAx(0),t.aS0(1,10),t.k70())}function It(n,r){if(1&n&&(t.SAx(0),t.OEk(1),t.k70()),2&n){const e=r.polymorpheusOutlet;t.yG2(),t.oRS(" ",e," ")}}function yt(n,r){if(1&n&&t.yuY(0,It,2,1,"ng-container",11),2&n){const e=t.GaO(2);t.E7m("polymorpheusOutlet",e.optionTemplate$())}}function Nt(n,r){1&n&&t.C_f(0)}const k=(n,r)=>({$implicit:n,injector:r});function Mt(n,r){if(1&n&&t.yuY(0,Nt,1,0,"ng-container",12),2&n){const e=t.GaO().$implicit,o=t.GaO();t.E7m("polymorpheusOutlet",o.optionTemplate$())("polymorpheusOutletContext",t.IBC(2,k,e,o.injector))}}function Lt(n,r){1&n&&t.C_f(0)}const K=n=>({data:n});function At(n,r){if(1&n&&t.yuY(0,Lt,1,0,"ng-container",12),2&n){const e=t.GaO().$implicit,o=t.GaO();t.E7m("polymorpheusOutlet",o.optionTemplate$())("polymorpheusOutletContext",t.S45(2,K,e))}}function Gt(n,r){if(1&n&&t.wR5(0,"div",13),2&n){const e=t.GaO().$implicit,o=t.GaO();t.E7m("innerText",o.stringify(e))}}function xt(n,r){if(1&n&&t.yuY(0,yt,1,1)(1,Mt,1,5)(2,At,1,4)(3,Gt,1,1),2&n){const e=t.GaO();let o;t.C0Y(0,"text"===(o=e.optionTemplateType$())?0:"template"===o?1:"component"===o?2:3)}}function $t(n,r){if(1&n&&(t.SAx(0),t.OEk(1),t.k70()),2&n){const e=r.polymorpheusOutlet;t.yG2(),t.oRS(" ",e," ")}}function Ft(n,r){if(1&n&&t.yuY(0,$t,2,1,"ng-container",11),2&n){const e=t.GaO(2);t.E7m("polymorpheusOutlet",e.nativeOptionTemplate$())}}function Pt(n,r){1&n&&t.C_f(0)}function Dt(n,r){if(1&n&&t.yuY(0,Pt,1,0,"ng-container",12),2&n){const e=t.GaO().$implicit,o=t.GaO();t.E7m("polymorpheusOutlet",o.nativeOptionTemplate$())("polymorpheusOutletContext",t.IBC(2,k,e,o.injector))}}function bt(n,r){1&n&&t.C_f(0)}function Vt(n,r){if(1&n&&t.yuY(0,bt,1,0,"ng-container",12),2&n){const e=t.GaO().$implicit,o=t.GaO();t.E7m("polymorpheusOutlet",o.nativeOptionTemplate$())("polymorpheusOutletContext",t.S45(2,K,e))}}function Yt(n,r){if(1&n&&t.wR5(0,"div",13),2&n){const e=t.GaO().$implicit,o=t.GaO();t.E7m("innerText",o.stringify(e))}}function wt(n,r){if(1&n&&t.yuY(0,Ft,1,1)(1,Dt,1,5)(2,Vt,1,4)(3,Yt,1,1),2&n){const e=t.GaO();let o;t.C0Y(0,"text"===(o=e.nativeOptionTemplateType$())?0:"template"===o?1:"component"===o?2:3)}}function zt(n,r){if(1&n&&(t.SAx(0),t.OEk(1),t.k70()),2&n){const e=t.GaO(2);t.yG2(),t.oRS(" ",e.placeholder," ")}}function Ut(n,r){if(1&n&&(t.I0R(0,"span",null,14),t._Xx(2),t.C$Y(),t.yuY(3,zt,2,1,"ng-container",15)),2&n){const e=t.Gew(1);t.yG2(3),t.E7m("ngIf",!e.hasChildNodes())}}function kt(n,r){1&n&&(t.SAx(0),t.aS0(1,19),t.k70())}function Kt(n,r){if(1&n&&(t.I0R(0,"span"),t.OEk(1),t.C$Y()),2&n){const e=t.GaO(2);t.yG2(),t.cNF(e.emptyContentString())}}function Xt(n,r){1&n&&t.C_f(0)}function Bt(n,r){if(1&n&&(t.SAx(0),t.yuY(1,Xt,1,0,"ng-container",8),t.k70()),2&n){const e=t.GaO(4);t.yG2(),t.E7m("ngTemplateOutlet",e.emptyContentTemplate())}}function Jt(n,r){if(1&n&&(t.SAx(0),t.yuY(1,Bt,2,1,"ng-container",20),t.k70()),2&n){t.GaO(2);const e=t.Gew(6),o=t.GaO();t.yG2(),t.E7m("ngIf",o.emptyContentTemplate())("ngIfElse",e)}}function Wt(n,r){if(1&n&&(t.SAx(0),t.yuY(1,Jt,2,2,"ng-container",20),t.k70()),2&n){t.GaO();const e=t.Gew(4),o=t.GaO();t.yG2(),t.E7m("ngIf",o.emptyContent$())("ngIfElse",e)}}function Ht(n,r){if(1&n&&(t.I0R(0,"span",null,16),t._Xx(2,1),t.C$Y(),t.yuY(3,kt,2,0,"ng-template",null,17,t.gJz)(5,Kt,2,1,"ng-template",null,18,t.gJz)(7,Wt,2,2,"ng-container",15)),2&n){const e=t.Gew(1);t.yG2(7),t.E7m("ngIf",!e.hasChildNodes())}}function Qt(n,r){1&n&&t.wR5(0,"tui-loader")}function jt(n,r){1&n&&t.C_f(0)}function Zt(n,r){if(1&n&&t.yuY(0,jt,1,0,"ng-container",8),2&n){t.GaO(2);const e=t.Gew(9);t.E7m("ngTemplateOutlet",e)}}function qt(n,r){1&n&&t.C_f(0)}function te(n,r){if(1&n&&(t.SAx(0),t.yuY(1,qt,1,0,"ng-container",8),t.k70()),2&n){t.GaO(2);const e=t.Gew(11);t.yG2(),t.E7m("ngTemplateOutlet",e)}}function ee(n,r){if(1&n&&t.yuY(0,Zt,1,1,"ng-template",null,21,t.gJz)(2,te,2,1,"ng-container",20),2&n){const e=t.Gew(1),o=t.GaO();t.yG2(2),t.E7m("ngIf",o.loading())("ngIfElse",e)}}function ne(n,r){1&n&&t.C_f(0)}function oe(n,r){1&n&&t.C_f(0)}function ie(n,r){1&n&&t.C_f(0)}function ae(n,r){if(1&n&&(t.SAx(0),t.yuY(1,ie,1,0,"ng-container",8),t.k70()),2&n){t.GaO(4);const e=t.Gew(11);t.yG2(),t.E7m("ngTemplateOutlet",e)}}function re(n,r){1&n&&t.C_f(0)}function _e(n,r){if(1&n){const e=t.KQA();t.I0R(0,"button",28)(1,"span",29),t.qCj("click",function(){t.usT(e);const a=t.GaO(4);return t.CGJ(a.loadMoreItems())}),t.yuY(2,re,1,0,"ng-container",20),t.C$Y()()}if(2&n){const e=t.GaO(4),o=t.Gew(1);t.E7m("size",e.optionSize)("disabled",!0),t.yG2(2),t.E7m("ngIf",e.loadMore)("ngIfElse",o)}}function se(n,r){if(1&n&&(t.SAx(0),t.yuY(1,ae,2,1,"ng-container",15)(2,_e,3,4,"button",27),t.k70()),2&n){const e=t.GaO(3);t.yG2(),t.E7m("ngIf",e.loading),t.yG2(),t.E7m("ngIf",!e.loading)}}const le=n=>({$implicit:n});function ue(n,r){if(1&n){const e=t.KQA();t.SAx(0),t.I0R(1,"button",25),t.qCj("mouseenter",function(){const a=t.usT(e),s=a.index,E=a.last,O=t.GaO(2);return t.CGJ(O.optionMouseEnter(s,E))})("focus",function(){const a=t.usT(e),s=a.index,E=a.last,O=t.GaO(2);return t.CGJ(O.optionFocus(s,E))}),t.yuY(2,oe,1,0,"ng-container",26),t.C$Y(),t.yuY(3,se,3,2,"ng-container",15),t.k70()}if(2&n){const e=r.$implicit,o=r.last,a=t.GaO(2),s=t.Gew(5);t.yG2(),t.E7m("size",a.optionSize)("value",e)("disabled",a.disabledItemHandler(e)),t.yG2(),t.E7m("ngTemplateOutlet",s)("ngTemplateOutletContext",t.S45(6,le,e)),t.yG2(),t.E7m("ngIf",o&&a.thereAreMoreItems)}}function ce(n,r){if(1&n){const e=t.KQA();t.I0R(0,"span",33),t.qCj("click",function(){t.usT(e);const a=t.GaO(3);return t.CGJ(a.createNew.emit())}),t.I0R(1,"mat-icon"),t.OEk(2,"add"),t.C$Y(),t.I0R(3,"span"),t.aS0(4,34),t.C$Y()()}}function pe(n,r){if(1&n&&(t.I0R(0,"button",30)(1,"span",null,31),t._Xx(3,2),t.C$Y(),t.yuY(4,ce,5,0,"span",32),t.C$Y()),2&n){const e=t.Gew(2),o=t.GaO(2);t.E7m("size",o.optionSize)("value",null)("disabled",!0),t.yG2(4),t.E7m("ngIf",!e.hasChildNodes())}}function de(n,r){if(1&n&&(t.I0R(0,"tui-data-list",22),t.yuY(1,ue,4,8,"ng-container",23)(2,pe,5,4,"button",24),t.C$Y()),2&n){const e=t.GaO(),o=t.Gew(13);t.E7m("emptyContent",o),t.yG2(),t.E7m("ngForOf",e.items()),t.yG2(),t.E7m("ngIf",e.showCreateNew)}}const me=["*",[["","empty-content",""]],[["","create-new",""]]],Se=["*","[empty-content]","[create-new]"];let Ee=(()=>{class n extends ft.m{constructor(){super(),this.weekday=(0,t.uUt)(w.G),this.stringify=e=>`${e.name} (${e.starts_at} - ${e.ends_at}, ${this.weekday.transform(e.weekday)})`,this.service=(0,t.uUt)(Rt.K)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-reservation-turn-select"]],inputs:{outputType:"outputType",service:"service",stringify:"stringify",query:"query",autofocus:"autofocus",placeholder:"placeholder",optionTemplate:"optionTemplate",stringifyOption:"stringifyOption",inputSize:"inputSize",page:"page",per_page:"per_page",optionSize:"optionSize",disabledItemHandler:"disabledItemHandler",loadMoreOnLastItem:"loadMoreOnLastItem",emptyContent:"emptyContent",showCreateNew:"showCreateNew",nativeOptionTemplate:"nativeOptionTemplate",filters:"filters",showCleaner:"showCleaner"},outputs:{httpError:"httpError",pageChange:"pageChange",queryChange:"queryChange",per_pageChange:"per_pageChange",createNew:"createNew"},standalone:!0,features:[t.M5G([{provide:c.Y6,useExisting:(0,t.wd)(()=>n),multi:!0},d.UF,w.G]),t.eg9,t.UHJ],ngContentSelectors:Se,decls:17,vars:6,consts:()=>{let e,o,a;return e="Carica altri",o="Non abbiamo trovato nulla.",a="Crea nuovo",[["loadMoreDefault",""],["valueContent",""],["nativeOptionTemplate",""],["placeholderTemplate",""],["nativeEmptyContentTemplate",""],["loadingTemplate",""],["loadingOrEmptyContent",""],[3,"tuiTextfieldCleaner","stringify","tuiTextfieldSize","formControl","valueContent","searchChange"],[4,"ngTemplateOutlet"],[3,"emptyContent",4,"tuiDataList"],e,[4,"polymorpheusOutlet"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],[3,"innerText"],["customContent",""],[4,"ngIf"],["customEmptyContent",""],["defaultEmptyContent",""],["emptyContentCustomString",""],o,[4,"ngIf","ngIfElse"],["empty",""],[3,"emptyContent"],[4,"ngFor","ngForOf"],["tuiOption","",3,"size","value","disabled",4,"ngIf"],["tuiOption","",3,"size","value","disabled","mouseenter","focus"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tuiOption","",3,"size","disabled",4,"ngIf"],["tuiOption","",3,"size","disabled"],["role","button",3,"click"],["tuiOption","",3,"size","value","disabled"],["createNewCustomTemplate",""],["role","button","class","d-flex align-items-center",3,"click",4,"ngIf"],["role","button",1,"d-flex","align-items-center",3,"click"],a]},template:function(o,a){if(1&o&&(t.kPM(me),t.yuY(0,vt,2,0,"ng-template",null,0,t.gJz)(2,xt,4,1,"ng-template",null,1,t.gJz)(4,wt,4,1,"ng-template",null,2,t.gJz)(6,Ut,4,1,"ng-template",null,3,t.gJz)(8,Ht,8,1,"ng-template",null,4,t.gJz)(10,Qt,1,0,"ng-template",null,5,t.gJz)(12,ee,3,2,"ng-template",null,6,t.gJz),t.I0R(14,"tui-combo-box",7),t.qCj("searchChange",function(E){return a.onSearchChange(E)}),t.yuY(15,ne,1,0,"ng-container",8)(16,de,3,3,"tui-data-list",9),t.C$Y()),2&o){const s=t.Gew(3),E=t.Gew(7);t.yG2(14),t.E7m("tuiTextfieldCleaner",a.showCleaner)("stringify",a.stringify)("tuiTextfieldSize",a.inputSize)("formControl",a.control)("valueContent",s),t.yG2(),t.E7m("ngTemplateOutlet",E)}},dependencies:[M.MD,M.ay,M.u_,M.XV,D.uk,D.i_,D.qI,m.aS,m.es,m.rD,z.KA,I.CQ,g.A$,g.yi,g.sP,g.Ux,v.q8,c.sl,c.ue,c.ug,Ot.kR,ht.CA,C.Sk,C.Cb,U.Ux,U.Af,S.oB,S.qL],changeDetection:0})}return n})();var b=i(3984),X=i(1338),ge=i(9160),A=i(5656),B=i(1673);let Te=(()=>{class n{constructor(){this.datePipe=(0,t.uUt)(M.y),this.today=p.EK.currentLocal(),this.singleDateFormat={default:"cccc d MMMM",differentYear:"d MMMM y"}}transform(e){if(!(e instanceof p.Se))return"";const o=e.from.year==e.to.year&&e.from.year==this.today.year?this.singleDateFormat.default:this.singleDateFormat.differentYear;return e.isSingleDay?e.from.daySame(this.today)?"Oggi":this.datePipe.transform(e.from.toUtcNativeDate(),o)||"":e.from.month==e.to.month?1==e.from.day&&e.to.daySame(e.from.append({month:1}).append({day:-1}))?this.datePipe.transform(e.from.toUtcNativeDate(),"MMMM y")||"":`${e.from.day} - ${e.to.day} ${this.datePipe.transform(e.to.toUtcNativeDate(),"MMMM")||""}`:`${this.datePipe.transform(e.from.toLocalNativeDate(),o)||""} - ${this.datePipe.transform(e.to.toLocalNativeDate(),o)||""}`}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275pipe=t.UTH({name:"stringifyTuiDayRange",type:n,pure:!0,standalone:!0})}return n})();function Ce(n,r){if(1&n&&(t.I0R(0,"span",9),t.aS0(1,10),t.C$Y(),t.I0R(2,"span",9),t.OEk(3),t.wVc(4,"date"),t.wVc(5,"fromTuiDay"),t.C$Y(),t.I0R(6,"span",9),t.aS0(7,11),t.C$Y(),t.I0R(8,"span",9),t.OEk(9),t.wVc(10,"date"),t.wVc(11,"fromTuiDay"),t.C$Y()),2&n){const e=t.GaO(2);t.yG2(3),t.cNF(t.g7$(4,2,t.kDX(5,5,e.control.value.from),"fullDate")),t.yG2(6),t.cNF(t.g7$(10,7,t.kDX(11,10,e.control.value.to),"fullDate"))}}function Re(n,r){if(1&n&&t.yuY(0,Ce,12,12),2&n){const e=t.GaO();t.C0Y(0,e.control.value&&e.control.value.from&&e.control.value.to?0:-1)}}function fe(n,r){if(1&n){const e=t.KQA();t.I0R(0,"tui-calendar-range",20),t.qCj("valueChange",function(a){const E=t.usT(e).$implicit,O=t.GaO().$implicit,x=t.GaO();return t.CGJ(x.selectRangeAndUnsub(a,E,O))}),t.C$Y()}if(2&n){const e=t.GaO(2);t.E7m("min",e.calendarMin)("max",e.calendarMax)("value",e.control.value)}}function he(n,r){1&n&&(t.I0R(0,"mat-icon"),t.OEk(1,"check"),t.C$Y())}function Oe(n,r){if(1&n){const e=t.KQA();t.I0R(0,"button",16),t.qCj("click",function(){const s=t.usT(e).$implicit,E=t.GaO().$implicit,O=t.GaO();return t.CGJ(O.selectRangeAndUnsub(s.range,E))}),t.OEk(1),t.yuY(2,he,2,0,"mat-icon"),t.C$Y()}if(2&n){const e=r.$implicit,o=t.GaO(2);t.yG2(),t.oRS(" ",e.toString()," "),t.yG2(),t.C0Y(2,o.control.value==e.range?2:-1)}}function ve(n,r){if(1&n&&(t.I0R(0,"p",21)(1,"span",6),t.OEk(2),t.wVc(3,"stringifyTuiDayRange"),t.C$Y()()),2&n){const e=t.GaO(2),o=t.Gew(1);t.yG2(),t.E7m("tuiHint",o),t.yG2(),t.cNF(t.kDX(3,2,e.control.value))}}function Ie(n,r){1&n&&(t.I0R(0,"p",22),t.SAx(1),t.aS0(2,23),t.k70(),t.C$Y())}function ye(n,r){if(1&n){const e=t.KQA();t.yuY(0,fe,1,3,"ng-template",null,12,t.gJz),t.I0R(2,"div",13)(3,"tui-calendar",14),t.qCj("dayClick",function(a){const E=t.usT(e).$implicit,O=t.GaO();return t.CGJ(O.selectDayAndUnsub(a,E))}),t.C$Y(),t.I0R(4,"tui-data-list",15),t.c53(5,Oe,3,2,"button",24,t.oxv),t.I0R(7,"button",16),t.qCj("click",function(){t.usT(e);const a=t.Gew(1),s=t.GaO();return t.CGJ(s.fireModal(a))}),t.SAx(8),t.aS0(9,17),t.k70(),t.C$Y()()(),t.wR5(10,"hr",18),t.yuY(11,ve,4,4,"p",19)(12,Ie,3,0)}if(2&n){const e=t.GaO();t.yG2(3),t.E7m("value",(null!=e.control.value&&e.control.value.isSingleDay?null==e.control.value?null:e.control.value.from:e.control.value)||null)("min",e.calendarMin)("max",e.calendarMax),t.yG2(2),t.oho(e.periodOptions),t.yG2(6),t.C0Y(11,e.control.value&&e.control.valid?11:12)}}function Ne(n,r){if(1&n&&(t.I0R(0,"span",6),t.OEk(1),t.wVc(2,"stringifyTuiDayRange"),t.C$Y()),2&n){const e=t.GaO(),o=t.Gew(1);t.E7m("tuiHint",o),t.yG2(),t.cNF(t.kDX(2,2,e.control.value))}}function Me(n,r){1&n&&t._Xx(0)}const Le=["*"];let Ae=(()=>{class n{constructor(){this.cd=(0,t.uUt)(t.kD9),this.dialogs=(0,t.uUt)(u._k),this.destroy$=(0,t.uUt)(d.UF),this.date=(0,t.uUt)(M.y),this.today=p.EK.currentLocal(),this.calendarMin=new p.EK(2019,1,1),this.calendarMax=this.today.append({year:1}),this.control=new c.Ku(new p.Se(this.today,this.today)),this.periodOptions=[new b.Ib(new p.Se(this.today,this.today),"Oggi"),new b.Ib(new p.Se(this.today.append({day:-7}),this.today),"Ultima settimana"),...Array.from({length:3},(e,o)=>o).map(e=>{const o=this.today.append({month:-1*e}),a=new p.EK(o.year,o.month,1),s=this.date.transform(a.toUtcNativeDate(),"MMMM")||`Mese ${a.month}`;return new b.Ib(new p.Se(a,a.append({month:1}).append({day:-1})),s)})]}ngOnInit(){}registerOnChange(e){this.control.valueChanges.pipe((0,L.a)(this.destroy$)).subscribe(e)}registerOnTouched(e){this.control.valueChanges.pipe((0,L.a)(this.destroy$)).subscribe(e)}setDisabledState(e){e?this.control.disable():this.control.enable()}writeValue(e){this.control.patchValue(this.formatToTuiDayRange(e))}fireModal(e){this.dialogs.open(e).subscribe()}selectRangeAndUnsub(e,...o){this.selectRange(e),o.forEach(a=>a.unsubscribe())}selectDayAndUnsub(e,o){this.selectDay(e),o.unsubscribe()}selectDay(e){this.selectRange(e?new p.Se(e,e):null)}selectRange(e){this.control.setValue(e),this.cd.markForCheck()}prevDay(){if(!(this.control.value instanceof p.Se))return void console.warn("control value invalid",this.control.value);const e=this.control.value.from.append({day:-1}),o=this.control.value.to.append({day:-1});this.control.setValue(new p.Se(e,o))}nextDay(){if(!(this.control.value instanceof p.Se))return void console.warn("control value invalid",this.control.value);const e=this.control.value.from.append({day:1}),o=this.control.value.to.append({day:1});this.control.setValue(new p.Se(e,o))}formatToTuiDayRange(e){if(null==e)return null;if(e instanceof p.Se)return e;if(e instanceof Date)return new p.Se(p.EK.fromLocalNativeDate(e),p.EK.fromLocalNativeDate(e));if("string"==typeof e)return new p.Se(p.EK.fromLocalNativeDate(new Date(e)),p.EK.fromLocalNativeDate(new Date(e)));if(Array.isArray(e)&&2==e.length){if(e[0]instanceof Date&&e[1]instanceof Date)return new p.Se(p.EK.fromLocalNativeDate(e[0]),p.EK.fromLocalNativeDate(e[1]));if(e[0]instanceof p.EK&&e[1]instanceof p.EK)return new p.Se(e[0],e[1]);if("string"==typeof e[0]&&"string"==typeof e[1])return new p.Se(p.EK.fromLocalNativeDate(new Date(e[0])),p.EK.fromLocalNativeDate(new Date(e[1])))}return console.warn("Invalid value for reservation date select:",e),null}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-reservation-date-select"]],standalone:!0,features:[t.M5G([{provide:c.Y6,useExisting:(0,t.wd)(()=>n),multi:!0},d.UF]),t.UHJ],ngContentSelectors:Le,decls:18,vars:1,consts:()=>{let e,o,a,s;return e="Dal giorno",o="fino al giorno",a="Altro range",s="Nessuna data selezionata.",[["rangeHint",""],["editDateModal",""],[1,"flex","border","rounded","border-slate-200","items-center","justify-between"],[1,"h-full","border-r","border-slate-200"],["type","button",1,"h-full","flex","items-center","justify-center","p-2",3,"click"],["type","button",1,"flex","items-center","justify-center","grow",3,"click"],[3,"tuiHint"],[1,"ms-1"],[1,"h-full","border-l","border-slate-200"],[1,"me-1"],e,o,["rangeCalendarModal",""],[1,"flex"],[3,"value","min","max","dayClick"],[1,"grow"],["type","button","tuiOption","",3,"click"],a,[1,"block","w-[1px]","my-3"],["class","text-slate-400 block mb-3"],[3,"min","max","value","valueChange"],[1,"text-slate-400","block","mb-3"],[1,"block","text-red-200"],s,["type","button","tuiOption",""]]},template:function(o,a){if(1&o){const s=t.KQA();t.kPM(),t.yuY(0,Re,1,1,"ng-template",null,0,t.gJz)(2,ye,13,4,"ng-template",null,1,t.gJz),t.I0R(4,"div",2)(5,"div",3)(6,"button",4),t.qCj("click",function(){return a.prevDay()}),t.I0R(7,"mat-icon"),t.OEk(8,"arrow_back"),t.C$Y()()(),t.I0R(9,"button",5),t.qCj("click",function(){t.usT(s);const O=t.Gew(3);return t.CGJ(a.fireModal(O))}),t.yuY(10,Ne,3,4,"span",6)(11,Me,1,0),t.I0R(12,"mat-icon",7),t.OEk(13,"event"),t.C$Y()(),t.I0R(14,"div",8)(15,"button",4),t.qCj("click",function(){return a.nextDay()}),t.I0R(16,"mat-icon"),t.OEk(17,"arrow_forward"),t.C$Y()()()()}2&o&&(t.yG2(10),t.C0Y(10,a.control.valid&&a.control.value?10:11))},dependencies:[S.qL,c.sl,M.y,ge.E,X.N,X.W,Te,A.WY,A.lh,A.SL,A.i6,A.IT,g.A$,g.yi,g.sP,B.y,B.I],styles:["[_nghost-%COMP%]{display:block;min-width:250px}"],changeDetection:0})}return n})();var J=i(5892),Ge=i(5136),xe=i(2300),W=i(9772);const $e=["*"];let Fe=(()=>{class n{constructor(){this.removeClick=new t._w7}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-chip"]],outputs:{removeClick:"removeClick"},standalone:!0,features:[t.UHJ],ngContentSelectors:$e,decls:6,vars:0,consts:[[1,"rounded","border","py-2","px-3","border-slate-200","flex","items-center"],["size","s","tuiIconButton","","type","button","appearance","custom",1,"!flex","ms-1",3,"click"]],template:function(o,a){1&o&&(t.kPM(),t.I0R(0,"div",0)(1,"span"),t._Xx(2),t.C$Y(),t.I0R(3,"button",1),t.qCj("click",function(){return a.removeClick.emit()}),t.I0R(4,"mat-icon"),t.OEk(5,"close"),t.C$Y()()())},dependencies:[S.oB,S.qL],styles:["[_nghost-%COMP%]{display:inline-block}"]})}return n})();var Pe=i(5324);const De=["todo","authorized","paid","refunded"],be=["html_nexi_payment","html_nexi_authorization"];var H=i(3584);function Ve(n,r){if(1&n&&t.wR5(0,"tui-data-list-wrapper",3),2&n){const e=t.GaO(),o=t.Gew(4);t.E7m("itemContent",o)("items",e.ReservationPaymentStatusOptions)}}function Ye(n,r){1&n&&t.wR5(0,"app-payment-status",4),2&n&&t.E7m("status",r.$implicit)}const we=["*"];let ze=(()=>{class n{constructor(){this.control=new c.Ku(null),this.ReservationPaymentStatusOptions=[...De]}writeValue(e){this.control.setValue(e)}registerOnChange(e){this.control.valueChanges.subscribe(e)}registerOnTouched(e){this.control.valueChanges.subscribe(e)}setDisabledState(e){e?this.control.disable():this.control.enable()}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-select-payment-status"]],standalone:!0,features:[t.M5G([{provide:c.Y6,useExisting:n,multi:!0}]),t.UHJ],ngContentSelectors:we,decls:5,vars:2,consts:[[3,"formControl","valueContent"],[3,"itemContent","items",4,"tuiDataList"],["cardContent",""],[3,"itemContent","items"],[3,"status"]],template:function(o,a){if(1&o&&(t.kPM(),t.I0R(0,"tui-select",0),t._Xx(1),t.yuY(2,Ve,1,2,"tui-data-list-wrapper",1),t.C$Y(),t.yuY(3,Ye,1,1,"ng-template",null,2,t.gJz)),2&o){const s=t.Gew(4);t.E7m("formControl",a.control)("valueContent",s)}},dependencies:[c.sl,c.ue,c.ug,y.my,y.cP,y.uO,I.CQ,g.A$,g.Ux,v.q8,v.OO,m.aS,H.Q],encapsulation:2,changeDetection:0})}return n})();var Q=i(3968);function Ue(n,r){if(1&n&&t.wR5(0,"tui-data-list-wrapper",3),2&n){const e=t.GaO(),o=t.Gew(4);t.E7m("itemContent",o)("items",e.ReservationPaymentPreorderTypeOptions)}}function ke(n,r){1&n&&t.wR5(0,"app-reservation-payment-preorder-type",4),2&n&&t.E7m("value",r.$implicit)}const Ke=["*"];let Xe=(()=>{class n{constructor(){this.ReservationPaymentPreorderTypeOptions=[...be],this.control=new c.Ku(null)}writeValue(e){this.control.setValue(e)}registerOnChange(e){this.control.valueChanges.subscribe(e)}registerOnTouched(e){this.control.valueChanges.subscribe(e)}setDisabledState(e){e?this.control.disable():this.control.enable()}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-select-reservation-payment-preorder-type"]],standalone:!0,features:[t.M5G([{provide:c.Y6,useExisting:n,multi:!0}]),t.UHJ],ngContentSelectors:Ke,decls:5,vars:2,consts:[[3,"formControl","valueContent"],[3,"itemContent","items",4,"tuiDataList"],["cardContent",""],[3,"itemContent","items"],[3,"value"]],template:function(o,a){if(1&o&&(t.kPM(),t.I0R(0,"tui-select",0),t._Xx(1),t.yuY(2,Ue,1,2,"tui-data-list-wrapper",1),t.C$Y(),t.yuY(3,ke,1,1,"ng-template",null,2,t.gJz)),2&o){const s=t.Gew(4);t.E7m("formControl",a.control)("valueContent",s)}},dependencies:[c.sl,c.ue,c.ug,y.my,y.cP,y.uO,I.CQ,g.A$,g.Ux,v.q8,v.OO,m.aS,Q.a],encapsulation:2,changeDetection:0})}return n})();function Be(n,r){if(1&n&&(t.I0R(0,"div",19)(1,"app-table-type-select",30),t.SAx(2),t.aS0(3,31),t.k70(),t.C$Y()(),t.I0R(4,"div",19)(5,"app-select-payment-status",3),t.SAx(6),t.aS0(7,32),t.k70(),t.C$Y()(),t.I0R(8,"div",19)(9,"app-select-reservation-payment-preorder-type",3),t.SAx(10),t.aS0(11,33),t.k70(),t.C$Y()(),t.I0R(12,"div",19)(13,"div",20)(14,"tui-input",34),t.SAx(15),t.aS0(16,35),t.k70(),t.wR5(17,"input",23),t.C$Y()()(),t.I0R(18,"div",19)(19,"div",20)(20,"tui-input-number",34),t.SAx(21),t.aS0(22,36),t.k70(),t.wR5(23,"input",23),t.C$Y()()(),t.I0R(24,"div",19)(25,"div",20)(26,"tui-input-number",34),t.SAx(27),t.aS0(28,37),t.k70(),t.wR5(29,"input",23),t.C$Y()()()),2&n){const e=t.GaO(2);t.yG2(),t.E7m("inputSize","l")("formControl",e.hiddenFormGroup.controls.table_type),t.yG2(4),t.E7m("formControl",e.hiddenFormGroup.controls.payment_status),t.yG2(4),t.E7m("formControl",e.hiddenFormGroup.controls.preorder_type),t.yG2(5),t.E7m("tuiTextfieldSize","l")("formControl",e.hiddenFormGroup.controls.payment_external_id),t.yG2(6),t.E7m("tuiTextfieldSize","l")("formControl",e.hiddenFormGroup.controls.people_more_than),t.yG2(6),t.E7m("tuiTextfieldSize","l")("formControl",e.hiddenFormGroup.controls.people_less_than)}}function Je(n,r){if(1&n){const e=t.KQA();t.I0R(0,"form",18),t.qCj("ngSubmit",function(){t.usT(e);const a=t.GaO();return t.CGJ(a.closeFiltersModal())}),t.I0R(1,"div",19)(2,"div",20)(3,"tui-input",21),t.SAx(4),t.aS0(5,22),t.k70(),t.wR5(6,"input",23),t.C$Y()()(),t.I0R(7,"div",19)(8,"app-reservation-status-select",24),t.SAx(9),t.aS0(10,25),t.k70(),t.C$Y()(),t.I0R(11,"tui-accordion",19)(12,"tui-accordion-item"),t.SAx(13),t.aS0(14,26),t.k70(),t.yuY(15,Be,30,10,"ng-template",27),t.C$Y()(),t.I0R(16,"button",28),t.SAx(17),t.aS0(18,29),t.k70(),t.C$Y()()}if(2&n){const e=t.GaO();t.E7m("formGroup",e.hiddenFormGroup),t.yG2(3),t.E7m("tuiTextfieldSize","l")("tuiAutoFocus",!0)("formControl",e.query),t.yG2(5),t.E7m("showCleaner",!0)("inputSize","l")("formControl",e.status)}}function We(n,r){1&n&&t.OEk(0),2&n&&t.oRS(" ",r.$implicit.humanLabel," ")}function He(n,r){if(1&n&&(t.I0R(0,"tui-data-list-wrapper",38),t.OEk(1," >"),t.C$Y()),2&n){const e=t.GaO(),o=t.Gew(13);t.E7m("itemContent",o)("items",e.orderByOptions)}}function Qe(n,r){if(1&n){const e=t.KQA();t.I0R(0,"app-chip",39),t.qCj("removeClick",function(){t.usT(e);const a=t.GaO();return t.CGJ(a.status.patchValue(null))}),t.SAx(1),t.aS0(2,40),t.k70(),t.OEk(3,": "),t.wR5(4,"app-reservation-status",41),t.C$Y()}if(2&n){const e=t.GaO();t.yG2(4),t.E7m("status",e.status.value)}}function je(n,r){if(1&n){const e=t.KQA();t.I0R(0,"app-chip",39),t.qCj("removeClick",function(){t.usT(e);const a=t.GaO();return t.CGJ(a.query.patchValue(null))}),t.SAx(1),t.aS0(2,42),t.k70(),t.OEk(3),t.C$Y()}if(2&n){const e=t.GaO();t.yG2(3),t.oRS(": ",e.query.value," ")}}function Ze(n,r){if(1&n){const e=t.KQA();t.I0R(0,"app-chip",39),t.qCj("removeClick",function(){t.usT(e);const a=t.GaO();return t.CGJ(a.hiddenFormGroup.controls.table_type.patchValue(null))}),t.SAx(1),t.aS0(2,43),t.k70(),t.OEk(3),t.C$Y()}if(2&n){const e=t.GaO();t.yG2(3),t.oRS(": ",e.hiddenFormGroup.controls.table_type.value.name," ")}}function qe(n,r){if(1&n){const e=t.KQA();t.I0R(0,"app-chip",39),t.qCj("removeClick",function(){t.usT(e);const a=t.GaO();return t.CGJ(a.hiddenFormGroup.controls.payment_status.patchValue(null))}),t.SAx(1),t.aS0(2,44),t.k70(),t.OEk(3,": "),t.wR5(4,"app-payment-status",41),t.C$Y()}if(2&n){const e=t.GaO();t.yG2(4),t.E7m("status",e.hiddenFormGroup.controls.payment_status.value)}}function tn(n,r){if(1&n){const e=t.KQA();t.I0R(0,"app-chip",39),t.qCj("removeClick",function(){t.usT(e);const a=t.GaO();return t.CGJ(a.hiddenFormGroup.controls.preorder_type.patchValue(null))}),t.SAx(1),t.aS0(2,45),t.k70(),t.OEk(3,": "),t.wR5(4,"app-reservation-payment-preorder-type",46),t.C$Y()}if(2&n){const e=t.GaO();t.yG2(4),t.E7m("value",e.hiddenFormGroup.controls.preorder_type.value)}}function en(n,r){if(1&n){const e=t.KQA();t.I0R(0,"app-chip",39),t.qCj("removeClick",function(){t.usT(e);const a=t.GaO();return t.CGJ(a.hiddenFormGroup.controls.payment_external_id.patchValue(null))}),t.SAx(1),t.aS0(2,47),t.k70(),t.OEk(3),t.C$Y()}if(2&n){const e=t.GaO();t.yG2(3),t.oRS(": ",e.hiddenFormGroup.controls.payment_external_id.value," ")}}function nn(n,r){if(1&n){const e=t.KQA();t.I0R(0,"app-chip",39),t.qCj("removeClick",function(){t.usT(e);const a=t.GaO();return t.CGJ(a.hiddenFormGroup.controls.people_more_than.patchValue(null))}),t.SAx(1),t.aS0(2,48),t.k70(),t.I0R(3,"b"),t.OEk(4),t.C$Y(),t.SAx(5),t.aS0(6,49),t.k70(),t.C$Y()}if(2&n){const e=t.GaO();t.yG2(4),t.oRS(" ",e.hiddenFormGroup.controls.people_more_than.value," ")}}function on(n,r){if(1&n){const e=t.KQA();t.I0R(0,"app-chip",39),t.qCj("removeClick",function(){t.usT(e);const a=t.GaO();return t.CGJ(a.hiddenFormGroup.controls.people_less_than.patchValue(null))}),t.SAx(1),t.aS0(2,50),t.k70(),t.I0R(3,"b"),t.OEk(4),t.C$Y(),t.SAx(5),t.aS0(6,51),t.k70(),t.C$Y()}if(2&n){const e=t.GaO();t.yG2(4),t.oRS(" ",e.hiddenFormGroup.controls.people_less_than.value," ")}}const an=n=>({date:n}),rn=()=>[10,100,1e3],_n=["*"];let sn=(()=>{class n{constructor(){this.dialogs=(0,t.uUt)(u._k),this.loading=!1,this.data=null,this.filtersChanged=new t._w7,this.destroy$=(0,t.uUt)(d.UF),this.datePipe=(0,t.uUt)(M.y),this.query=new c.Ku(null),this.turn=new c.Ku(null),this.date=new c.Ku(new p.Se(p.EK.currentLocal(),p.EK.currentLocal())),this.status=new c.Ku("active"),this.orderBy=new c.Ku(null),this.hiddenFormGroup=new c.WC({query:this.query,status:this.status,payment_status:new c.Ku(null),preorder_type:new c.Ku(null),payment_external_id:new c.Ku(null),table_type:new c.Ku(null),people_more_than:new c.Ku(null),people_less_than:new c.Ku(null)}),this.dateStr=(0,t.OCB)(this.formatDate(this.date.value)),this.offset=0,this.per_page=100,this.orderByOptions=[{field:"created_at",direction:"desc",humanLabel:"Data di creazione (pi\xF9 recenti)"},{field:"created_at",direction:"asc",humanLabel:"Data di creazione (meno recenti)"},{field:"datetime",direction:"desc",humanLabel:"Data e ora (pi\xF9 recenti)"},{field:"datetime",direction:"asc",humanLabel:"Data e ora (meno recenti)"}],this.lastFilters={}}ngOnInit(){this.date.valueChanges.pipe((0,L.a)(this.destroy$)).subscribe({next:e=>{this.turn.setValue(null),e&&e.isSingleDay?this.turn.disabled&&this.turn.enable():this.turn.disable(),this.dateStr.set(this.formatDate(e))},error:e=>console.error(e)}),[this.date,this.turn,this.status,this.orderBy,this.hiddenFormGroup.controls.table_type,this.hiddenFormGroup.controls.payment_status,this.hiddenFormGroup.controls.preorder_type].map(e=>{e.valueChanges.pipe((0,L.a)(this.destroy$),(0,F.a)(),(0,P.I)(()=>e.valid)).subscribe({next:()=>{this.offset=0,this.filtersMayHaveChanged()}})}),[this.query,this.hiddenFormGroup.controls.payment_external_id,this.hiddenFormGroup.controls.people_more_than,this.hiddenFormGroup.controls.people_less_than].map(e=>{e.valueChanges.pipe((0,L.a)(this.destroy$),(0,F.a)(),(0,xe.o)(500),(0,P.I)(()=>e.valid)).subscribe({next:()=>{this.offset=0,this.filtersMayHaveChanged()}})})}ngAfterViewInit(){this.emitCurrentFilters()}submit(){this.emitCurrentFilters()}mergeFilters(e){}setFilters(e){}currentFilters(){const e={offset:this.offset,per_page:this.per_page};if(this.hiddenFormGroup.controls.table_type.value&&this.hiddenFormGroup.controls.table_type.value.id&&(e.table_types=this.hiddenFormGroup.controls.table_type.value.id.toString()),this.hiddenFormGroup.controls.payment_status.value&&this.hiddenFormGroup.controls.payment_status.value&&(e.payment_status=this.hiddenFormGroup.controls.payment_status.value),this.hiddenFormGroup.controls.preorder_type.value&&this.hiddenFormGroup.controls.preorder_type.value&&(e.preorder_type=this.hiddenFormGroup.controls.preorder_type.value),this.hiddenFormGroup.controls.payment_external_id.value&&this.hiddenFormGroup.controls.payment_external_id.value&&(e.payment_external_id=this.hiddenFormGroup.controls.payment_external_id.value),this.hiddenFormGroup.controls.people_more_than.value&&this.hiddenFormGroup.controls.people_more_than.value&&(e.people_more_than=Number(this.hiddenFormGroup.controls.people_more_than.value)),this.hiddenFormGroup.controls.people_less_than.value&&this.hiddenFormGroup.controls.people_less_than.value&&(e.people_less_than=Number(this.hiddenFormGroup.controls.people_less_than.value)),"string"==typeof this.query.value&&this.query.valid&&this.query.value.length>0&&(e.query=this.query.value),this.date.value instanceof p.Se&&this.date.valid){const a=this.datePipe.transform(this.date.value.from.toUtcNativeDate(),"YYYY-MM-dd"),s=this.datePipe.transform(this.date.value.to.toUtcNativeDate(),"YYYY-MM-dd");a&&s&&(e.date_from=`${a}`,e.date_to=`${s}`)}const o=this.turn.value;return this.turn.valid&&o instanceof Ge.e&&o.starts_at&&o.ends_at&&(e.time_from=`${(0,W.ye)(o.starts_at)}`,e.time_to=`${(0,W.ye)(o.ends_at)}`),"string"==typeof this.status.value&&this.status.valid&&(e.status=this.status.value),this.orderBy.valid&&this.orderBy.value&&(e.order_by_field=this.orderBy.value.field,e.order_by_direction=this.orderBy.value.direction),e}paginationChange(e){this.offset=e.page,this.per_page=e.size,this.filtersMayHaveChanged()}fireModal(e){this.filtersSub?.unsubscribe(),this.filtersSub=this.dialogs.open(e).subscribe()}closeFiltersModal(){this.filtersSub?.unsubscribe()}filtersMayHaveChanged(){const e=this.currentFilters(),o=JSON.stringify(e)!==JSON.stringify(this.lastFilters);return console.log("changed",{changed:o,currentFilters:e}),o&&(this.lastFilters=e,this.emitCurrentFilters()),o}formatDate(e){return e instanceof Date?this.datePipe.transform(e,"YYYY-MM-dd"):e instanceof p.Se?e.isSingleDay?this.datePipe.transform(e.from.toUtcNativeDate(),"YYYY-MM-dd"):`${this.datePipe.transform(e.from.toUtcNativeDate(),"YYYY-MM-dd")} - ${this.datePipe.transform(e.to.toUtcNativeDate(),"YYYY-MM-dd")}`:null}emitCurrentFilters(){this.filtersChanged.emit(this.currentFilters())}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-list-reservations-filters"]],inputs:{loading:"loading",data:"data"},outputs:{filtersChanged:"filtersChanged"},standalone:!0,features:[t.M5G([d.UF]),t.UHJ],ngContentSelectors:_n,decls:33,vars:24,consts:()=>{let e,o,a,s,E,O,x,j,Z,q,tt,et,nt,ot,it,at,rt,_t,st,lt,ut,ct,pt;return e="Data",o="Turno",a="Ordina per",s="Filtra prenotazioni",E="Stato prenotazione",O="Filtri aggiuntivi",x="Chiudi",j="Tipologia di tavolo associata",Z="Stato del pagamento",q="Tipologia di pagamento",tt="ID esterno pagamento (N. ordine nexi)",et="Numero minimo di persone",nt="Numero massimo di persone",ot="Stato",it="Ricerca per",at="Tipologia di tavolo",rt="Stato pagamento",_t="Tipologia pagamento",st="N. Ordine nexi",lt="Almeno",ut="persone",ct="Massimo",pt="persone",[["additionalFiltersTemplate",""],[1,"flex","flex-wrap","items-center"],[1,"col-12","md:col-4"],[3,"formControl"],e,[1,"col-12","md:col-3","px-1"],[1,"mx-2",2,"min-width","150px",3,"showCleaner","filters","inputSize","formControl"],o,[1,"col-10","md:col-3"],["stringifyOrderBy",""],[3,"valueContent","tuiTextfieldCleaner","tuiTextfieldSize","formControl"],a,[3,"itemContent","items",4,"tuiDataList"],[1,"col-2","md:col-1","overflow-hidden"],["type","button","tuiIconButton","","appearance","flat",3,"showLoader","click"],[1,"col-12"],["class","me-1"],[1,"my-2",3,"size","items","total","paginationChange"],[3,"formGroup","ngSubmit"],[1,"block","mb-3"],[1,"flex","items-center"],[1,"grow","me-2",3,"tuiTextfieldSize","tuiAutoFocus","formControl"],s,["tuiTextfield",""],[3,"showCleaner","inputSize","formControl"],E,O,["tuiAccordionItemContent",""],["tuiButton","","appearance","primary","type","submit"],x,[3,"inputSize","formControl"],j,Z,q,[1,"grow","me-2",3,"tuiTextfieldSize","formControl"],tt,et,nt,[3,"itemContent","items"],[1,"me-1",3,"removeClick"],ot,[3,"status"],it,at,rt,_t,[3,"value"],st,lt,ut,ct,pt]},template:function(o,a){if(1&o){const s=t.KQA();t.kPM(),t.yuY(0,Je,19,7,"ng-template",null,0,t.gJz),t.I0R(2,"div",1)(3,"div",2)(4,"app-reservation-date-select",3),t.SAx(5),t.aS0(6,4),t.k70(),t.C$Y()(),t.I0R(7,"div",5)(8,"app-reservation-turn-select",6),t.SAx(9),t.aS0(10,7),t.k70(),t.C$Y()(),t.I0R(11,"div",8),t.yuY(12,We,1,1,"ng-template",null,9,t.gJz),t.I0R(14,"tui-select",10),t.SAx(15),t.aS0(16,11),t.k70(),t.yuY(17,He,2,2,"tui-data-list-wrapper",12),t.C$Y()(),t.I0R(18,"div",13)(19,"button",14),t.qCj("click",function(){t.usT(s);const O=t.Gew(1);return t.CGJ(a.fireModal(O))}),t.I0R(20,"mat-icon"),t.OEk(21,"filter_alt"),t.C$Y()()(),t.I0R(22,"div",15),t.yuY(23,Qe,5,1,"app-chip",16)(24,je,4,1,"app-chip",16)(25,Ze,4,1,"app-chip",16)(26,qe,5,1,"app-chip",16)(27,tn,5,1,"app-chip",16)(28,en,4,1,"app-chip",16)(29,nn,7,1,"app-chip",16)(30,on,7,1,"app-chip",16),t.C$Y()(),t._Xx(31),t.I0R(32,"tui-table-pagination",17),t.qCj("paginationChange",function(O){return a.paginationChange(O)}),t.C$Y()}if(2&o){const s=t.Gew(13);let E;t.yG2(4),t.E7m("formControl",a.date),t.yG2(4),t.E7m("showCleaner",!0)("filters",t.S45(21,an,a.dateStr()))("inputSize","m")("formControl",a.turn),t.yG2(6),t.E7m("valueContent",s)("tuiTextfieldCleaner",!0)("tuiTextfieldSize","m")("formControl",a.orderBy),t.yG2(5),t.E7m("showLoader",a.loading),t.yG2(4),t.C0Y(23,a.status.value?23:-1),t.yG2(),t.C0Y(24,a.query.value?24:-1),t.yG2(),t.C0Y(25,a.hiddenFormGroup.controls.table_type.value?25:-1),t.yG2(),t.C0Y(26,a.hiddenFormGroup.controls.payment_status.value?26:-1),t.yG2(),t.C0Y(27,a.hiddenFormGroup.controls.preorder_type.value?27:-1),t.yG2(),t.C0Y(28,a.hiddenFormGroup.controls.payment_external_id.value?28:-1),t.yG2(),t.C0Y(29,a.hiddenFormGroup.controls.people_more_than.value?29:-1),t.yG2(),t.C0Y(30,a.hiddenFormGroup.controls.people_less_than.value?30:-1),t.yG2(2),t.E7m("size",100)("items",t.q4q(23,rn))("total",null!==(E=null==a.data||null==a.data.metadata?null:a.data.metadata.total_count)&&void 0!==E?E:0)}},dependencies:[_.CI,_.Kw,S.qL,I.CQ,I.Oo,I.cP,z.b,V.m6,V.gJ,l.w,Ct,Ee,Ae,J.yy,J.Ws,c.sl,c.sz,c.ue,c.u,c.ug,c.uW,R.GE,m.aS,m.es,m.rD,Y.a,Fe,v.q8,v.OO,g.Ux,y.my,y.cP,y.uO,g.A$,dt.BZ,Pe.Y,ze,H.Q,G.Ep,G.Ix,G._Q,G.Up,Q.a,Xe,$.Q7,$.mi,$.Qj],encapsulation:2,changeDetection:0})}return n})();var ln=i(4476),un=i(4208),cn=i(6580);let pn=(()=>{class n{constructor(){this._=(0,t.uUt)(ln.OY).setTitle("Prenotazioni | La Porta D'Acqua"),this.filters={}}filtersChanged(e){this.filters={...e}}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-admin-reservations-home"]],standalone:!0,features:[t.M5G([d.UF]),t.UHJ],decls:9,vars:7,consts:()=>{let e;return e="Prenotazioni",[e,[3,"loading","data","filtersChanged"],[3,"overlay","showLoader"],[3,"filters"],["list",""],[3,"showLoader","filters"]]},template:function(o,a){if(1&o&&(t.I0R(0,"h1"),t.SAx(1),t.aS0(2,0),t.k70(),t.C$Y(),t.I0R(3,"app-list-reservations-filters",1),t.qCj("filtersChanged",function(E){return a.filtersChanged(E)}),t.I0R(4,"tui-loader",2),t.wR5(5,"app-admin-list-reservations",3,4),t.C$Y()(),t.wR5(7,"app-reservation-tables-summary",5)(8,"router-outlet")),2&o){const s=t.Gew(6);t.yG2(3),t.E7m("loading",s.loading())("data",s.data()),t.yG2(),t.E7m("overlay",!0)("showLoader",s.loading()),t.yG2(),t.E7m("filters",a.filters),t.yG2(2),t.E7m("showLoader",s.loading())("filters",a.filters)}},dependencies:[sn,cn.k,un.u,T.qQ,T.cP,C.Sk,C.Cb],encapsulation:2,changeDetection:0})}return n})()},9052:(N,f,i)=>{i.d(f,{y:()=>R});var t=i(4496),d=i(7760),C=i(6700),T=i(7368),u=i(2700),_=i(1368);function l(m,g){if(1&m&&(t.wR5(0,"img",1),t.wVc(1,"async")),2&m){const S=t.GaO();t.uQ9("max-w-[100%] h-auto min-h-[50px] md:min-h-[100px] ",S.imgClass,""),t._6D("src",t.kDX(1,5,S.imageSrc$),t.K6U),t.E7m("draggable",!1)}}let R=(()=>{class m{constructor(){this.noImage="/assets/img/no-image.jpg",this.imagesService=(0,t.uUt)(d.U),this.imgClass="block rounded",this.image$=new C.g(null),this.imageSrc$=this.image$.pipe((0,T.G)(S=>S instanceof Blob?(0,u.of)(URL.createObjectURL(S)):S&&S.id?this.imagesService.downloadUrl(S.id):(0,u.of)(this.noImage)))}set image(S){this.image$.next(S??null)}static#t=this.\u0275fac=function(I){return new(I||m)};static#e=this.\u0275cmp=t.In1({type:m,selectors:[["app-show-image"]],inputs:{imgClass:"imgClass",image:"image"},standalone:!0,features:[t.UHJ],decls:2,vars:3,consts:[[3,"draggable","class","src"],[3,"draggable","src"]],template:function(I,v){1&I&&(t.yuY(0,l,2,7,"img",0),t.wVc(1,"async")),2&I&&t.C0Y(0,t.kDX(1,1,v.imageSrc$)?0:-1)},dependencies:[_.a],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center}"],changeDetection:0})}return m})()},1960:(N,f,i)=>{i.d(f,{u:()=>T});var t=i(8400),d=i(5136);class C extends t.w{constructor(_){super(_),this.date=_.date?new Date(_.date):void 0,this.reservation_turn_id=_.reservation_turn_id,this.group_id=_.group_id,this.reservation_turn=_.reservation_turn?new d.e(_.reservation_turn):void 0}}class T extends t.w{constructor(_){super(_),this.turns=[],this.dates=[],this.title=_.title,this.status=_.status,this.preorder_type=_.preorder_type,this.payment_value=_.payment_value,this.min_people=_.min_people,this.message=_.message,this.turns=(_.turns||[]).map(l=>new d.e(l)),this.dates=(_.dates||[]).map(l=>new C(l)),this.translations=_.translations||{},this.table_type_to_preorder_reservation_groups=_.table_type_to_preorder_reservation_groups}}},5136:(N,f,i)=>{i.d(f,{e:()=>T});var t=i(8400),d=i(9772),C=i(1960);class T extends t.w{constructor(_){super(_),this.messages=[],this.name=_.name,this.weekday=_.weekday,this.step=_.step,this.valid_times=_.valid_times,this.starts_at=_.starts_at?(0,d.CU)(_.starts_at):void 0,this.ends_at=_.ends_at?(0,d.CU)(_.ends_at):void 0,this.preorder_reservation_group=_.preorder_reservation_group?new C.u(_.preorder_reservation_group):void 0,this.messages=_.messages}}},9160:(N,f,i)=>{i.d(f,{E:()=>C});var t=i(400),d=i(4496);let C=(()=>{class T{transform(_){return _ instanceof Date?_:_ instanceof t.EK?_.toUtcNativeDate():null}static#t=this.\u0275fac=function(l){return new(l||T)};static#e=this.\u0275pipe=d.UTH({name:"fromTuiDay",type:T,pure:!0,standalone:!0})}return T})()},7760:(N,f,i)=>{i.d(f,{U:()=>T});var t=i(6012),d=i(2264),C=i(4496);let T=(()=>{class u extends t.s{constructor(){super(d.W,"images")}removeFromRecord(l,R){return this.patch(`${l}/remove_from_record`,{record_type:R.record_type,record_id:R.record_id})}updateRecord(l,R){return this.patch("record",{image_ids:R,record_type:l.record_type,record_id:l.record_id})}downloadUrl(l){return this.url(`${l}/download`)}static#t=this.\u0275fac=function(R){return new(R||u)};static#e=this.\u0275prov=C.wxM({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()},7556:(N,f,i)=>{i.d(f,{K:()=>T});var t=i(6012),d=i(5136),C=i(4496);let T=(()=>{class u extends t.s{constructor(){super(d.e,"admin/reservation_turns")}static#t=this.\u0275fac=function(R){return new(R||u)};static#e=this.\u0275prov=C.wxM({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()},7492:(N,f,i)=>{i.d(f,{W:()=>T});var t=i(6012),d=i(9064),C=i(4496);let T=(()=>{class u extends t.s{constructor(){super(d.g,"admin/table_types")}static#t=this.\u0275fac=function(R){return new(R||u)};static#e=this.\u0275prov=C.wxM({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()},832:(N,f,i)=>{i.d(f,{I:()=>T,w:()=>C});var t=i(4496),d=i(3480);let C=(()=>{class u{constructor(l){this.tuiFocusVisibleChange=l}}return u.\u0275fac=function(l){return new(l||u)(t.GI1(d.MF))},u.\u0275dir=t.Sc5({type:u,selectors:[["","tuiFocusVisibleChange",""]],outputs:{tuiFocusVisibleChange:"tuiFocusVisibleChange"},features:[t.M5G([d.UF,d.MF])]}),u})(),T=(()=>{class u{}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=t.a4G({type:u}),u.\u0275inj=t.s3X({}),u})()},1096:(N,f,i)=>{i.d(f,{O:()=>g,h:()=>m});var t=i(4496),d=i(900),C=i(4164),T=i(3412),u=i(4704),_=i(5568),l=i(4e3),R=i(2644);let m=(()=>{class S{constructor({nativeElement:v},y){this.tuiFocusedChange=(0,T.U)((0,d.Ax)(v,"focusin"),(0,d.Ax)(v,"focusout")).pipe((0,u.k)(()=>(0,C.ER)(v)),(0,_.W)(!1),(0,l.a)(),(0,R.s)(1),(0,d.OA)(y))}}return S.\u0275fac=function(v){return new(v||S)(t.GI1(t.GMv),t.GI1(t.WW2))},S.\u0275dir=t.Sc5({type:S,selectors:[["","tuiFocusedChange",""]],outputs:{tuiFocusedChange:"tuiFocusedChange"}}),S})(),g=(()=>{class S{}return S.\u0275fac=function(v){return new(v||S)},S.\u0275mod=t.a4G({type:S}),S.\u0275inj=t.s3X({}),S})()},8976:(N,f,i)=>{i.d(f,{Gy:()=>_,Ko:()=>u});var t=i(4496),d=i(3480),C=i(1368);let T=(()=>{class l{}return l.\u0275fac=function(m){return new(m||l)},l.\u0275cmp=t.In1({type:l,selectors:[["ng-component"]],hostAttrs:[1,"tui-group-styles"],decls:0,vars:0,template:function(m,g){},styles:[".tui-group{position:relative;display:flex;isolation:isolate}.tui-group>*{flex:1 1 0;min-width:0}.tui-group>*:not(:last-child){margin-right:.125rem}.tui-group.tui-group>*:nth-child(n){border-radius:0}.tui-group_collapsed>*{z-index:1}.tui-group_collapsed>*:not(:last-child){margin-right:-1px}.tui-group_collapsed>*._readonly,.tui-group_collapsed>*._disabled,.tui-group_collapsed>*._readonly:hover,.tui-group_collapsed>*._disabled:hover{z-index:0}.tui-group_collapsed>*:hover,.tui-group_collapsed>*._hovered,.tui-group_collapsed>*._pressed{z-index:3}.tui-group_collapsed>*._invalid{z-index:2}.tui-group_collapsed>*._invalid:hover,.tui-group_collapsed>*._invalid._hovered,.tui-group_collapsed>*._invalid._pressed{z-index:4}.tui-group_collapsed>*._hosted_dropdown_focused,.tui-group_collapsed>*._focus-visible,.tui-group_collapsed>*._focused.ng-touched,.tui-group_collapsed>*._focused.ng-untouched{z-index:5}.tui-group_collapsed>*._active,.tui-group_collapsed>*[data-appearance=whiteblock-active]{z-index:6}.tui-group_collapsed>*._focus-visible._focused,.tui-group_collapsed>*._focus-visible._active,.tui-group_collapsed>*._focus-visible[data-appearance=whiteblock-active]{z-index:7}.tui-group_orientation_vertical{display:inline-flex;flex-direction:column}.tui-group_orientation_vertical>*{min-height:auto;flex:0 0 auto}.tui-group_orientation_vertical>*:not(:last-child){margin-right:0;margin-bottom:.125rem}.tui-group_orientation_vertical.tui-group_collapsed>*:not(:last-child){margin-right:0;margin-bottom:-1px}.tui-group_rounded.tui-group_orientation_horizontal>*:first-child{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_horizontal>*:last-child{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_horizontal.tui-group_radius_large>*:first-child{border-top-left-radius:var(--tui-radius-l);border-bottom-left-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_horizontal.tui-group_radius_large>*:last-child{border-top-right-radius:var(--tui-radius-l);border-bottom-right-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_vertical>*:first-child{border-top-left-radius:var(--tui-radius-m);border-top-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_vertical>*:last-child{border-bottom-left-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_vertical.tui-group_radius_large>*:first-child{border-top-left-radius:var(--tui-radius-l);border-top-right-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_vertical.tui-group_radius_large>*:last-child{border-bottom-left-radius:var(--tui-radius-l);border-bottom-right-radius:var(--tui-radius-l)}@media screen and (max-width: 47.9625em){.tui-group_rounded.tui-group_adaptive.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_horizontal>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:last-child:not(:first-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_horizontal>*:last-child:not(:first-child){border-radius:var(--tui-radius-m)}}@media screen and (max-width: 47.9625em){.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:last-child:not(:first-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:last-child:not(:first-child){border-radius:var(--tui-radius-l)}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_orientation_vertical{width:100%}.tui-group_adaptive.tui-group_orientation_vertical>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_vertical>*:not(:last-child){margin-bottom:1rem}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-m) var(--tui-radius-m) 0 0}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-m) var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:not(:last-child){margin-bottom:-1px}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_orientation_horizontal{flex-direction:column;width:100%}.tui-group_adaptive.tui-group_orientation_horizontal>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_horizontal>*:not(:last-child){margin-right:0;margin-bottom:1rem}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-m) var(--tui-radius-m) 0 0}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-m) var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:not(:last-child){margin-right:0;margin-bottom:-1px}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-l)}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-l) var(--tui-radius-l)}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-l)}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-l) var(--tui-radius-l)}}.tui-group__auto-width-item{min-width:auto;flex:0 0 auto}.tui-group .tui-group__inherit-item{border-radius:inherit}\n"],encapsulation:2,changeDetection:0}),l})(),u=(()=>{class l{constructor(m){this.orientation="horizontal",this.adaptive=!1,this.collapsed=!1,this.rounded=!0,this.size="m",m.addComponent(T)}get orientationHorizontal(){return"horizontal"===this.orientation}get orientationVertical(){return"vertical"===this.orientation}get sizeLarge(){return"l"===this.size}}return l.\u0275fac=function(m){return new(m||l)(t.GI1(d.WS))},l.\u0275dir=t.Sc5({type:l,selectors:[["","tuiGroup","",5,"ng-container"]],hostAttrs:["role","group",1,"tui-group"],hostVars:12,hostBindings:function(m,g){2&m&&t.eAK("tui-group_adaptive",g.adaptive)("tui-group_collapsed",g.collapsed)("tui-group_rounded",g.rounded)("tui-group_orientation_horizontal",g.orientationHorizontal)("tui-group_orientation_vertical",g.orientationVertical)("tui-group_radius_large",g.sizeLarge)},inputs:{orientation:"orientation",adaptive:"adaptive",collapsed:"collapsed",rounded:"rounded",size:"size"}}),l})(),_=(()=>{class l{}return l.\u0275fac=function(m){return new(m||l)},l.\u0275mod=t.a4G({type:l}),l.\u0275inj=t.s3X({imports:[[C.MD]]}),l})()}}]);