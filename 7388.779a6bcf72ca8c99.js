(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[7388],{17388:(le,L,s)=>{"use strict";s.r(L),s.d(L,{ListSettingsComponent:()=>re});var e=s(54496),I=s(83480),N=s(68824),B=s(53616),K=s(1128),P=s(38256),A=s(48392),J=s(25140),m=s(66052),S=s(6504),V=s(61292),E=s(77364),H=s(55193),W=s(7728),k=s(86772);let Z=(()=>{class _ extends k.A{constructor(){super("/admin/settings")}search(t={}){return this.http.get("/")}show(t){return this.http.get(`/${t}`)}value(t){return this.http.get(`/${t}/value`)}update(t,i){return"object"==typeof i&&null!=i&&(i=JSON.stringify(i)),this.http.patch(`/${t}`,{value:i})}static#e=this.\u0275fac=function(i){return new(i||_)};static#n=this.\u0275prov=e.wxM({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})();var p=s(8048),g=s(47568),c=s(91688),d=s(7372),f=s(37936),q=s(94336);function ee(_,M){if(1&_&&e.wR5(0,"tui-data-list-wrapper",4),2&_){const t=e.GaO();e.E7m("emptyContent",t.noItemsContent)("itemContent",t.itemContent)("items",t.shownItems)}}const ne=["*"];let te=(()=>{class _ extends c.A{constructor(){super(...arguments),this.items=[],this.shownItems=[],this.itemContent=t=>this.stringifyFn(t.$implicit),this.noItemsContent="Nessun elemento trovato",this.search="",this.stringifyFn=t=>t}ngOnChanges(t){super.ngOnChanges(t),t.items&&(this.shownItems=this.items),t.search&&this.onSearchChange(this.search)}onSearchChange(t){this.search=t,this.shownItems=this.items.filter(i=>i.toLowerCase().includes((this.search??"").toLowerCase()))}static#e=this.\u0275fac=(()=>{let t;return function(n){return(t||(t=e.otF(_)))(n||_)}})();static#n=this.\u0275cmp=e.In1({type:_,selectors:[["app-preferences-select"]],inputs:{items:"items",itemContent:"itemContent",noItemsContent:"noItemsContent",stringifyFn:"stringifyFn"},standalone:!0,features:[e.M5G([I.UF,{provide:S.Y6,useExisting:(0,e.wd)(()=>_),multi:!0}]),e.eg9,e.SYr,e.UHJ],ngContentSelectors:ne,decls:5,vars:5,consts:[[1,"mb-2",3,"tuiTextfieldSize","formControl","stringify"],["tuiTextfield","",3,"placeholder"],[3,"emptyContent","itemContent","items",4,"tuiDataList"],[3,"expanded","submit","cancel"],[3,"emptyContent","itemContent","items"]],template:function(i,n){1&i&&(e.kPM(),e.I0R(0,"tui-select",0),e._Xx(1),e.wR5(2,"input",1),e.yuY(3,ee,1,3,"tui-data-list-wrapper",2),e.C$Y(),e.I0R(4,"app-submit-expand",3),e.qCj("submit",function(){return n.emitSubmit()})("cancel",function(){return n.resetInitialValue()}),e.C$Y()),2&i&&(e.E7m("tuiTextfieldSize",n.inputSize)("formControl",n.control)("stringify",n.stringifyFn),e.yG2(2),e.E7m("placeholder",n.placeholder),e.yG2(2),e.E7m("expanded",n.somethingChanged()))},dependencies:[p.aS,p.rD,S.sl,S.ue,S.ug,g.my,g.cP,g.uO,f.b,m.q8,m.OO,q.Ux,d.Q],encapsulation:2})}return _})();var C=s(39888);const ie=["*"];let oe=(()=>{class _ extends c.A{constructor(){super(...arguments),this.postfix=""}static#e=this.\u0275fac=(()=>{let t;return function(n){return(t||(t=e.otF(_)))(n||_)}})();static#n=this.\u0275cmp=e.In1({type:_,selectors:[["app-preferences-number-input"]],inputs:{mandatory:"mandatory",inputSize:"inputSize",placeholder:"placeholder",postfix:"postfix"},outputs:{submit:"submit",valueChange:"valueChange"},standalone:!0,features:[e.M5G([I.UF,{provide:S.Y6,useExisting:(0,e.wd)(()=>_),multi:!0}]),e.eg9,e.UHJ],ngContentSelectors:ie,decls:4,vars:4,consts:[[1,"mb-2",3,"tuiTextfieldPostfix","formControl","tuiTextfieldSize"],["tuiTextfield",""],[3,"expanded","submit","cancel"]],template:function(i,n){1&i&&(e.kPM(),e.I0R(0,"tui-input-number",0),e._Xx(1),e.wR5(2,"input",1),e.C$Y(),e.I0R(3,"app-submit-expand",2),e.qCj("submit",function(){return n.emitSubmit()})("cancel",function(){return n.resetInitialValue()}),e.C$Y()),2&i&&(e.E7m("tuiTextfieldPostfix",n.postfix)("formControl",n.control)("tuiTextfieldSize",n.inputSize),e.yG2(3),e.E7m("expanded",n.somethingChanged()))},dependencies:[C.Q7,C.mi,C.Qj,f.b,S.sl,S.ue,S.ug,p.aS,p.rD,p.We,d.Q],encapsulation:2})}return _})();var G=s(53797);const _e=["*"];let se=(()=>{class _ extends c.A{static#e=this.\u0275fac=(()=>{let t;return function(n){return(t||(t=e.otF(_)))(n||_)}})();static#n=this.\u0275cmp=e.In1({type:_,selectors:[["app-preferences-text-input"]],inputs:{mandatory:"mandatory",inputSize:"inputSize",placeholder:"placeholder"},outputs:{submit:"submit",valueChange:"valueChange"},standalone:!0,features:[e.M5G([I.UF,{provide:S.Y6,useExisting:(0,e.wd)(()=>_),multi:!0}]),e.eg9,e.UHJ],ngContentSelectors:_e,decls:4,vars:3,consts:[[1,"mb-2",3,"formControl","tuiTextfieldSize"],["tuiTextfield",""],[3,"expanded","submit","cancel"]],template:function(i,n){1&i&&(e.kPM(),e.I0R(0,"tui-input",0),e._Xx(1),e.wR5(2,"input",1),e.C$Y(),e.I0R(3,"app-submit-expand",2),e.qCj("submit",function(){return n.emitSubmit()})("cancel",function(){return n.resetInitialValue()}),e.C$Y()),2&i&&(e.E7m("formControl",n.control)("tuiTextfieldSize",n.inputSize),e.yG2(3),e.E7m("expanded",n.somethingChanged()))},dependencies:[G.CQ,G.Oo,G.cP,f.b,p.aS,p.rD,S.sl,S.ue,S.ug,d.Q],encapsulation:2})}return _})();var Se=s(14476),T=s(52208);function ae(_,M){1&_&&(e.SAx(0),e.aS0(1,33),e.k70())}function Te(_,M){1&_&&(e.OEk(0),e.wVc(1,"language")),2&_&&e.cNF(e.kDX(1,1,M.$implicit))}let re=(()=>{class _{constructor(){this.service=(0,e.uUt)(Z),this.destroy$=(0,e.uUt)(I.UF),this.notifications=(0,e.uUt)(K.E),this._=(0,e.uUt)(Se.OY).setTitle(T.$localize`Impostazioni di Sistema | La Porta D'Acqua`),this.languagePipe=(0,e.uUt)(E.e),this.allLanguages=Object.keys(V.S),this.form=new S.WC({available_locales:new S.Ku([]),default_language:new S.Ku(null),max_people_per_reservation:new S.Ku(null),email_contacts:new S.Ku({}),reservation_max_days_in_advance:new S.Ku(null),reservation_min_hours_in_advance:new S.Ku(null),cover_price:new S.Ku(null),instagram_landing_page_url:new S.Ku(null)}),this.saving=(0,e.OCB)(!1),this.searching=(0,e.OCB)(!1),this.loading=(0,e.S6b)(()=>this.saving()||this.searching()),this.inputSize="l"}ngOnInit(){this.reload()}save(t,i){this.saving.set(!0),Array.isArray(i)&&(i=i.join(",")),this.service.update(t,i).pipe((0,N.U)(()=>this.saving.set(!1)),(0,N.U)(()=>this.reload())).subscribe({error:n=>{this.notifications.error((0,P.mk)(n)||A.a)}})}applyPipeFunction(t){return t.transform}reload(){this.searching.set(!0),this.service.search().pipe((0,B.a)(this.destroy$),(0,N.U)(()=>this.searching.set(!1))).subscribe({next:t=>{this.updateFormByData(t.items)},error:t=>{this.notifications.error((0,P.mk)(t)||A.a)}})}updateFormByData(t){const i={};["available_locales"].forEach(o=>{const a=t.find(u=>u.key===o);a&&Array.isArray(a.value)?i[o]=a.value:a&&"string"==typeof a.value?i[o]=a.value.split(","):a?console.warn(`Setting ${o} not found or invalid`,a.value):console.warn(`Setting ${o} not found`)}),["default_language","instagram_landing_page_url"].forEach(o=>{const a=t.find(u=>u.key===o);a&&"string"==typeof a.value?i[o]=a.value:a?console.warn(`Setting ${o} not found or invalid`,a.value):console.warn(`Setting ${o} not found`)}),["max_people_per_reservation","reservation_max_days_in_advance","reservation_min_hours_in_advance","cover_price"].forEach(o=>{const a=t.find(u=>u.key===o);a&&"string"==typeof a.value&&a.value.length>0?i[o]=Number(a.value):a&&"number"==typeof a.value?i[o]=a.value:a?console.warn(`Setting ${o} not found or invalid`,a.value):console.warn(`Setting ${o} not found`)});const n=[],r=t.filter(o=>!i.hasOwnProperty(o.key)&&!n.includes(o.key));r.length>0&&((0,e.sPQ)()&&this.notifications.error(`Unmanaged settings: ${r.map(o=>o.key).join(", ")}`),console.warn(`Unmanaged settings: ${r.map(o=>o.key).join(", ")}`,r)),this.form.patchValue(i)}static#e=this.\u0275fac=function(i){return new(i||_)};static#n=this.\u0275cmp=e.In1({type:_,selectors:[["app-list-settings"]],standalone:!0,features:[e.M5G([I.UF,E.e]),e.UHJ],decls:65,vars:26,consts:()=>{let t,i,n,r,o,a,u,$,v,R,h,O,z,y,b,D,F,X,x,Y,w,U,j,Q;return t=T.$localize`Impostazioni di sistema`,i=T.$localize`Queste impostazioni verranno applicate a tutto il sito ed i suoi iscritti.`,n=T.$localize`Lingua di default`,r=T.$localize`Qual'è la lingua di default del sistema?`,o=T.$localize`Seleziona la lingua di default`,a=T.$localize`Lingue di sistema`,u=T.$localize`Quali lingue vuoi supportare? Le parti "statiche" come le pagine web non verranno tradotte in ulteriori lingue in automatico, ma le parti "dinamiche" come nomi e descrizioni del menù potranno essere tradotti in qualunque momento dallo staff.`,$=T.$localize`Seleziona molte lingue`,v=T.$localize`Massimo persone per prenotazione`,R=T.$localize`Quando un utente crea una prenotazione, quante persone al massimo può selezionare?`,h=T.$localize`Inserisci il numero massimo di persone per singola prenotazione.`,O=T.$localize`Anticipo massimo prenotazione`,z=T.$localize`Si potranno creare prenotazioni fino ad un limite di ${"\ufffd0\ufffd"}:INTERPOLATION: giorni da oggi.`,y=T.$localize`Giorni massimi di anticipo per nuove prenotazioni.`,b=T.$localize`Anticipo minimo nuove prenotazioni`,D=T.$localize`Se impostato a zero le persone potranno prenotare in tempo reale per la stessa ora, altrimenti almeno ${"\ufffd0\ufffd"}:INTERPOLATION: ore dopo l'orario attuale.`,F=T.$localize`Ore di anticipo minime per creare nuove prenotazioni.`,X=T.$localize`Costo coperto`,x=T.$localize`Se impostato ad un numero maggiore di zero, verrà mostrato dove necessario. Altrimenti sarà nascosto.`,Y=T.$localize`Ore di anticipo minime per creare nuove prenotazioni.`,w=T.$localize`Link condiviso al post Instagram`,U=T.$localize`Il post in questione sarà visibile nella homepage, se impostato. Se assente, non verrà mostrata la sezione Instagram nella pagina web.`,j=T.$localize`Link di condivisione post Instagram.`,Q=T.$localize`Nessun elemento`,[["noItems",""],t,[1,"text-slate-400","mb-3"],i,[3,"formGroup"],[1,"mb-4"],[1,"text-lg","font-bold"],n,[1,"text-slate-400"],r,[3,"formControlName","items","itemContent","stringifyFn","inputSize","submit"],o,a,u,["languageItemContent",""],$,v,R,[3,"formControlName","inputSize","submit"],h,O,z,[3,"formControlName","inputSize","postfix","submit"],y,b,D,F,X,x,Y,w,U,j,Q]},template:function(i,n){if(1&i&&(e.yuY(0,ae,2,0,"ng-template",null,0,e.gJz),e.I0R(2,"h1"),e.aS0(3,1),e.C$Y(),e.I0R(4,"p",2),e.aS0(5,3),e.C$Y(),e.I0R(6,"form",4)(7,"div",5)(8,"p",6),e.aS0(9,7),e.C$Y(),e.I0R(10,"p",8),e.aS0(11,9),e.C$Y(),e.I0R(12,"app-preferences-select",10),e.qCj("submit",function(o){return n.save("default_language",o)}),e.SAx(13),e.aS0(14,11),e.k70(),e.C$Y()(),e.I0R(15,"div",5)(16,"p",6),e.aS0(17,12),e.C$Y(),e.I0R(18,"p",8),e.aS0(19,13),e.C$Y(),e.yuY(20,Te,2,3,"ng-template",null,14,e.gJz),e.I0R(22,"app-preferences-multiple-select",10),e.qCj("submit",function(o){return n.save("available_locales",o)}),e.SAx(23),e.aS0(24,15),e.k70(),e.C$Y()(),e.I0R(25,"div",5)(26,"p",6),e.aS0(27,16),e.C$Y(),e.I0R(28,"p",8),e.aS0(29,17),e.C$Y(),e.I0R(30,"app-preferences-number-input",18),e.qCj("submit",function(o){return n.save("max_people_per_reservation",o)}),e.SAx(31),e.aS0(32,19),e.k70(),e.C$Y()(),e.I0R(33,"div",5)(34,"p",6),e.aS0(35,20),e.C$Y(),e.I0R(36,"p",8),e.aS0(37,21),e.C$Y(),e.I0R(38,"app-preferences-number-input",22),e.qCj("submit",function(o){return n.save("reservation_max_days_in_advance",o)}),e.SAx(39),e.aS0(40,23),e.k70(),e.C$Y()(),e.I0R(41,"div",5)(42,"p",6),e.aS0(43,24),e.C$Y(),e.I0R(44,"p",8),e.aS0(45,25),e.C$Y(),e.I0R(46,"app-preferences-number-input",22),e.qCj("submit",function(o){return n.save("reservation_min_hours_in_advance",o)}),e.SAx(47),e.aS0(48,26),e.k70(),e.C$Y()(),e.I0R(49,"div",5)(50,"p",6),e.aS0(51,27),e.C$Y(),e.I0R(52,"p",8),e.aS0(53,28),e.C$Y(),e.I0R(54,"app-preferences-number-input",22),e.qCj("submit",function(o){return n.save("cover_price",o)}),e.SAx(55),e.aS0(56,29),e.k70(),e.C$Y()(),e.I0R(57,"div",5)(58,"p",6),e.aS0(59,30),e.C$Y(),e.I0R(60,"p",8),e.aS0(61,31),e.C$Y(),e.I0R(62,"app-preferences-text-input",18),e.qCj("submit",function(o){return n.save("instagram_landing_page_url",o)}),e.SAx(63),e.aS0(64,32),e.k70(),e.C$Y()()()),2&i){const r=e.Gew(21);e.yG2(6),e.E7m("formGroup",n.form),e.yG2(6),e.E7m("formControlName","default_language")("items",n.allLanguages)("itemContent",r)("stringifyFn",n.applyPipeFunction(n.languagePipe))("inputSize",n.inputSize),e.yG2(10),e.E7m("formControlName","available_locales")("items",n.allLanguages)("itemContent",r)("stringifyFn",n.applyPipeFunction(n.languagePipe))("inputSize",n.inputSize),e.yG2(8),e.E7m("formControlName","max_people_per_reservation")("inputSize",n.inputSize),e.yG2(7),e.oBb(n.form.value.reservation_max_days_in_advance),e.Ylm(37),e.yG2(),e.E7m("formControlName","reservation_max_days_in_advance")("inputSize",n.inputSize)("postfix","giorni"),e.yG2(7),e.oBb(n.form.value.reservation_min_hours_in_advance),e.Ylm(45),e.yG2(),e.E7m("formControlName","reservation_min_hours_in_advance")("inputSize",n.inputSize)("postfix","ore"),e.yG2(8),e.E7m("formControlName","cover_price")("inputSize",n.inputSize)("postfix","\u20ac"),e.yG2(8),e.E7m("formControlName","instagram_landing_page_url")("inputSize",n.inputSize)}},dependencies:[J.BZ,S.sl,S.sz,S.ue,S.u,S.uW,S.Wo,m.q8,E.e,H.ms,W.M,te,oe,se],encapsulation:2,changeDetection:0})}return _})()},52208:()=>{}}]);