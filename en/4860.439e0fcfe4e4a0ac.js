"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[4860],{5948:(N,f,t)=>{t.r(f),t.d(f,{ListPreferencesComponent:()=>L});var e=t(4496),m=t(6772);let C=(()=>{class a extends m.A{constructor(){super("/admin/preferences")}search(n={}){return this.http.get("/")}show(n){return this.http.get(`/${n}`)}value(n){return this.http.get(`/${n}/value`)}update(n,i){return this.http.patch(`/${n}`,{value:i})}static#e=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275prov=e.wxM({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var s=t(3480),u=t(8824),_=t(3616),P=t(1128),c=t(8256),d=t(8392),l=t(6532),g=t(5140),p=t(6052),E=t(6504),T=t(1292),R=t(7364),v=t(5193),I=t(7728),M=t(4476);function y(a,h){1&a&&(e.SAx(0),e.aS0(1,11),e.k70())}function A(a,h){1&a&&(e.OEk(0),e.wVc(1,"language")),2&a&&e.cNF(e.kDX(1,1,h.$implicit))}let L=(()=>{class a{constructor(){this.service=(0,e.uUt)(C),this.destroy$=(0,e.uUt)(s.UF),this.notifications=(0,e.uUt)(P.E),this._=(0,e.uUt)(M.OY).setTitle("Preferences | La Porta D'Acqua"),this.inputSize="l",this.languagePipe=(0,e.uUt)(R.e),this.allLanguages=Object.keys(T.S),this.form=new E.WC({known_languages:new E.Ku([])}),this.saving=(0,e.OCB)(!1),this.searching=(0,e.OCB)(!1),this.loading=(0,e.S6b)(()=>this.saving()||this.searching())}ngOnInit(){this.reload()}save(n,i){this.saving.set(!0),Array.isArray(i)&&(i=i.join(",")),this.service.update(n,i).pipe((0,u.U)(()=>this.saving.set(!1)),(0,u.U)(()=>this.reload())).subscribe({error:o=>{this.notifications.error((0,c.mk)(o)||d.a)}})}applyPipeFunction(n){return n.transform}reload(){this.searching.set(!0),this.service.search().pipe((0,_.a)(this.destroy$),(0,u.U)(()=>this.searching.set(!1))).subscribe({next:n=>{this.updateFormByData(n.items)},error:n=>{this.notifications.error((0,c.mk)(n)||d.a)}})}updateFormByData(n){const i={};["known_languages"].forEach(o=>{const r=n.find(S=>S.key===o);r&&Array.isArray(r.value)?i[o]=r.value:r&&"string"==typeof r.value?i[o]=r.value.split(","):r?console.warn(`Preference ${o} not found or invalid`,r.value):console.warn(`Preference ${o} not found`)}),this.form.patchValue(i)}static#e=this.\u0275fac=function(i){return new(i||a)};static#t=this.\u0275cmp=e.In1({type:a,selectors:[["app-list-preferences"]],standalone:!0,features:[e.M5G([s.UF,R.e]),e.UHJ],decls:23,vars:6,consts:()=>{let n,i,o,r;return n="Personal preferences",i="These settings will only be applied to your account.",o="Select many languages.",r="No element",[["noItems",""],n,[1,"text-slate-400","mb-3"],i,[3,"formGroup"],[1,"mb-4"],[1,"text-lg","font-bold"],[1,"text-slate-400"],["knownLanguagesItemContent",""],[3,"formControlName","items","itemContent","stringifyFn","inputSize","submit"],o,r]},template:function(i,o){if(1&i&&(e.yuY(0,y,2,0,"ng-template",null,0,e.gJz),e.I0R(2,"h1"),e.aS0(3,1),e.C$Y(),e.I0R(4,"p",2),e.aS0(5,3),e.C$Y(),e.I0R(6,"form",4)(7,"div",5)(8,"p",6),e.OEk(9,"Lingua preferita"),e.C$Y(),e.I0R(10,"p",7),e.OEk(11,"Seleziona la lingua che preferisci utilizzare."),e.C$Y(),e.wR5(12,"app-admin-language-switcher"),e.C$Y(),e.I0R(13,"div",5)(14,"p",6),e.OEk(15,"Lingue conosciute"),e.C$Y(),e.I0R(16,"p",7),e.OEk(17,"Quali lingue conosci? Questa informazione ci serve per capire quali lingue mostrarti quando crei o modifichi elementi con nomi in diverse lingue."),e.C$Y(),e.yuY(18,A,2,3,"ng-template",null,8,e.gJz),e.I0R(20,"app-preferences-multiple-select",9),e.qCj("submit",function(S){return o.save("known_languages",S)}),e.SAx(21),e.aS0(22,10),e.k70(),e.C$Y()()()),2&i){const r=e.Gew(19);e.yG2(6),e.E7m("formGroup",o.form),e.yG2(14),e.E7m("formControlName","known_languages")("items",o.allLanguages)("itemContent",r)("stringifyFn",o.applyPipeFunction(o.languagePipe))("inputSize",o.inputSize)}},dependencies:[l.y,g.BZ,E.sl,E.sz,E.ue,E.u,E.uW,E.Wo,p.q8,R.e,v.ms,I.M],encapsulation:2,changeDetection:0})}return a})()},7020:(N,f,t)=>{t.d(f,{q:()=>P});var e=t(4496),m=t(1800),C=t(3480),s=t(5944),u=t(4336),_=t(3012);let P=(()=>{class c{constructor(l,g,p,E,T){this.host=l,this.control=g,this.el=p,this.idService=E,this.itemsHandlers=T,this.disabledItemHandler=null,this.datalist=null}get id(){return this.el.nativeElement.id||this.idService.generate()}}return c.\u0275fac=function(l){return new(l||c)(e.GI1(s.Mn),e.GI1(m._y),e.GI1(e.GMv),e.GI1(C.y2),e.GI1(_.qc))},c.\u0275dir=e.Sc5({type:c,viewQuery:function(l,g){if(1&l&&e.CC$(u.Ux,7,e.Yw2),2&l){let p;e.wto(p=e.Gqi())&&(g.datalist=p.first)}},hostVars:1,hostBindings:function(l,g){2&l&&e.SoX("id",g.id)},inputs:{disabledItemHandler:"disabledItemHandler"}}),c})()},9612:(N,f,t)=>{t.d(f,{M:()=>m,W:()=>C});var e=t(4496);let m=(()=>{class s{transform(_){return({$implicit:P})=>_(P)}}return s.\u0275fac=function(_){return new(_||s)},s.\u0275pipe=e.UTH({name:"tuiStringifyContent",type:s,pure:!0}),s})(),C=(()=>{class s{}return s.\u0275fac=function(_){return new(_||s)},s.\u0275mod=e.a4G({type:s}),s.\u0275inj=e.s3X({}),s})()}}]);