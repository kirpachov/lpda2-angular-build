"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[5016],{7320:(Y,M,s)=>{s.r(M),s.d(M,{ViewDishModule:()=>lo});var p=s(1236),E=s(7552),e=s(4496),R=s(1264),c=s(3480),C=s(8676),m=s(1128),u=s(3616),T=s(4704),D=s(6684),h=s(4e3),z=s(9212),d=s(8824),f=s(8256),G=s(7692),x=s(8212),ie=s(4436),v=s(1560),P=s(466),O=s(4336),N=s(1368),de=s(5891),pe=s(9640);function me(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",3),e.qCj("click",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.updateStatus("active"))}),e.wR5(1,"app-dish-status",7),e.C$Y()}2&t&&(e.yG2(),e.E7m("status","active"))}function Ce(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",3),e.qCj("click",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.updateStatus("inactive"))}),e.wR5(1,"app-dish-status",7),e.C$Y()}2&t&&(e.yG2(),e.E7m("status","inactive"))}function Se(t,_){if(1&t){const n=e.KQA();e.I0R(0,"tui-data-list"),e.yuY(1,me,2,1,"button",2)(2,Ce,2,1,"button",2),e.I0R(3,"button",3),e.qCj("click",function(){e.usT(n);const o=e.GaO();return e.CGJ(o.delete())}),e.I0R(4,"span",4)(5,"mat-icon",5),e.OEk(6,"delete"),e.C$Y(),e.I0R(7,"span"),e.aS0(8,6),e.C$Y()()()()}if(2&t){const n=e.GaO();e.yG2(),e.C0Y(1,"active"!=(null==n.dish?null:n.dish.status)?1:-1),e.yG2(),e.C0Y(2,"inactive"!=(null==n.dish?null:n.dish.status)?2:-1)}}const Ee=t=>({rotate180:t});function Te(t,_){if(1&t&&(e.I0R(0,"tui-hosted-dropdown",1,8)(2,"button",9)(3,"span",4),e.wR5(4,"app-dish-status",10),e.I0R(5,"mat-icon",11),e.OEk(6,"expand_more"),e.C$Y()()()()),2&t){const n=e.Gew(1),i=e.GaO(),o=e.Gew(1);e.E7m("content",o),e.yG2(4),e.E7m("status",i.dish.status),e.yG2(),e.E7m("ngClass",e.S45(3,Ee,n.open))}}let he=(()=>{class t{constructor(){this.notifications=(0,e.uUt)(m.E),this.destroy$=(0,e.uUt)(c.UF),this.deleteDish=new e._w7,this.statusChange=new e._w7,this.dishChange=new e._w7,this.dish=null}delete(){this.notifications.confirm("Are you sure you want to delete the dish?",{yes:"Yes, remove the dish.",no:"Cancel"}).pipe((0,u.a)(this.destroy$)).subscribe({next:n=>{n&&this.deleteDish.emit()}})}updateStatus(n){this.dish instanceof de.S&&(this.dish.status=n,this.dishChange.emit(this.dish)),this.statusChange.emit(n)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-edit-dish-status"]],inputs:{dish:"dish"},outputs:{deleteDish:"deleteDish",statusChange:"statusChange",dishChange:"dishChange"},standalone:!0,features:[e.M5G([c.UF]),e.UHJ],decls:3,vars:1,consts:()=>{let n;return n="Delete",[["dropdownContent",""],[3,"content"],["tuiOption",""],["tuiOption","",3,"click"],[1,"flex","items-center"],[1,"me-1"],n,[3,"status"],["dropdown",""],["tuiButton","","type","button","appearance","outline","size","l"],[1,"me-1",3,"status"],[1,"animation-speed-2",3,"ngClass"]]},template:function(i,o){1&i&&e.yuY(0,Se,9,2,"ng-template",null,0,e.gJz)(2,Te,7,5,"tui-hosted-dropdown",1),2&i&&(e.yG2(2),e.C0Y(2,o.dish&&o.dish.status?2:-1))},dependencies:[P.GE,P.Qw,O.A$,O.yi,O.sP,v.qL,x.CI,x.Kw,N.QF,pe.o],encapsulation:2})}return t})();var fe=s(5004),W=s(5e3),oe=s(8432),F=s(8016),B=s(1512),V=s(5193),A=s(8048),y=s(5656),U=s(6376),j=s(1104),b=s(3797),K=s(4856),X=s(9052),r=s(6504),Q=s(5892),L=s(3400),q=s(580),H=s(6096),Z=s(6052),ee=s(9604),te=s(7936),ne=s(6732),w=s(1040);function Oe(t,_){1&t&&(e.SAx(0),e.aS0(1,10),e.k70())}function Ie(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=_.polymorpheusOutlet;e.yG2(),e.oRS(" ",n," ")}}function Ne(t,_){if(1&t&&e.yuY(0,Ie,2,1,"ng-container",11),2&t){const n=e.GaO(2);e.E7m("polymorpheusOutlet",n.optionTemplate$())}}function Me(t,_){1&t&&e.C_f(0)}const _e=(t,_)=>({$implicit:t,injector:_});function Ge(t,_){if(1&t&&e.yuY(0,Me,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.optionTemplate$())("polymorpheusOutletContext",e.IBC(2,_e,n,i.injector))}}function Re(t,_){1&t&&e.C_f(0)}const se=t=>({data:t});function De(t,_){if(1&t&&e.yuY(0,Re,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.optionTemplate$())("polymorpheusOutletContext",e.S45(2,se,n))}}function Ae(t,_){if(1&t&&e.wR5(0,"div",13),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("innerText",i.stringify(n))}}function ye(t,_){if(1&t&&e.yuY(0,Ne,1,1)(1,Ge,1,5)(2,De,1,4)(3,Ae,1,1),2&t){const n=e.GaO();let i;e.C0Y(0,"text"===(i=n.optionTemplateType$())?0:"template"===i?1:"component"===i?2:3)}}function $e(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=_.polymorpheusOutlet;e.yG2(),e.oRS(" ",n," ")}}function xe(t,_){if(1&t&&e.yuY(0,$e,2,1,"ng-container",11),2&t){const n=e.GaO(2);e.E7m("polymorpheusOutlet",n.nativeOptionTemplate$())}}function ve(t,_){1&t&&e.C_f(0)}function Le(t,_){if(1&t&&e.yuY(0,ve,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.nativeOptionTemplate$())("polymorpheusOutletContext",e.IBC(2,_e,n,i.injector))}}function Pe(t,_){1&t&&e.C_f(0)}function be(t,_){if(1&t&&e.yuY(0,Pe,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.nativeOptionTemplate$())("polymorpheusOutletContext",e.S45(2,se,n))}}function He(t,_){if(1&t&&e.wR5(0,"div",13),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("innerText",i.stringify(n))}}function Ue(t,_){if(1&t&&e.yuY(0,xe,1,1)(1,Le,1,5)(2,be,1,4)(3,He,1,1),2&t){const n=e.GaO();let i;e.C0Y(0,"text"===(i=n.nativeOptionTemplateType$())?0:"template"===i?1:"component"===i?2:3)}}function ke(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=e.GaO(2);e.yG2(),e.oRS(" ",n.placeholder," ")}}function Ye(t,_){if(1&t&&(e.I0R(0,"span",null,14),e._Xx(2),e.C$Y(),e.yuY(3,ke,2,1,"ng-container",15)),2&t){const n=e.Gew(1);e.yG2(3),e.E7m("ngIf",!n.hasChildNodes())}}function we(t,_){1&t&&(e.SAx(0),e.aS0(1,19),e.k70())}function ze(t,_){if(1&t&&(e.I0R(0,"span"),e.OEk(1),e.C$Y()),2&t){const n=e.GaO(2);e.yG2(),e.cNF(n.emptyContentString())}}function Be(t,_){1&t&&e.C_f(0)}function Fe(t,_){if(1&t&&(e.SAx(0),e.yuY(1,Be,1,0,"ng-container",8),e.k70()),2&t){const n=e.GaO(4);e.yG2(),e.E7m("ngTemplateOutlet",n.emptyContentTemplate())}}function Xe(t,_){if(1&t&&(e.SAx(0),e.yuY(1,Fe,2,1,"ng-container",20),e.k70()),2&t){e.GaO(2);const n=e.Gew(6),i=e.GaO();e.yG2(),e.E7m("ngIf",i.emptyContentTemplate())("ngIfElse",n)}}function Je(t,_){if(1&t&&(e.SAx(0),e.yuY(1,Xe,2,2,"ng-container",20),e.k70()),2&t){e.GaO();const n=e.Gew(4),i=e.GaO();e.yG2(),e.E7m("ngIf",i.emptyContent$())("ngIfElse",n)}}function We(t,_){if(1&t&&(e.I0R(0,"span",null,16),e._Xx(2,1),e.C$Y(),e.yuY(3,we,2,0,"ng-template",null,17,e.gJz)(5,ze,2,1,"ng-template",null,18,e.gJz)(7,Je,2,2,"ng-container",15)),2&t){const n=e.Gew(1);e.yG2(7),e.E7m("ngIf",!n.hasChildNodes())}}function Ve(t,_){1&t&&e.wR5(0,"tui-loader")}function je(t,_){1&t&&e.C_f(0)}function Ke(t,_){if(1&t&&e.yuY(0,je,1,0,"ng-container",8),2&t){e.GaO(2);const n=e.Gew(9);e.E7m("ngTemplateOutlet",n)}}function Qe(t,_){1&t&&e.C_f(0)}function qe(t,_){if(1&t&&(e.SAx(0),e.yuY(1,Qe,1,0,"ng-container",8),e.k70()),2&t){e.GaO(2);const n=e.Gew(11);e.yG2(),e.E7m("ngTemplateOutlet",n)}}function Ze(t,_){if(1&t&&e.yuY(0,Ke,1,1,"ng-template",null,21,e.gJz)(2,qe,2,1,"ng-container",20),2&t){const n=e.Gew(1),i=e.GaO();e.yG2(2),e.E7m("ngIf",i.loading())("ngIfElse",n)}}function et(t,_){1&t&&e.C_f(0)}function tt(t,_){1&t&&e.C_f(0)}function nt(t,_){1&t&&e.C_f(0)}function it(t,_){if(1&t&&(e.SAx(0),e.yuY(1,nt,1,0,"ng-container",8),e.k70()),2&t){e.GaO(4);const n=e.Gew(11);e.yG2(),e.E7m("ngTemplateOutlet",n)}}function ot(t,_){1&t&&e.C_f(0)}function _t(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",28)(1,"span",29),e.qCj("click",function(){e.usT(n);const o=e.GaO(4);return e.CGJ(o.loadMoreItems())}),e.yuY(2,ot,1,0,"ng-container",20),e.C$Y()()}if(2&t){const n=e.GaO(4),i=e.Gew(1);e.E7m("size",n.optionSize)("disabled",!0),e.yG2(2),e.E7m("ngIf",n.loadMore)("ngIfElse",i)}}function st(t,_){if(1&t&&(e.SAx(0),e.yuY(1,it,2,1,"ng-container",15)(2,_t,3,4,"button",27),e.k70()),2&t){const n=e.GaO(3);e.yG2(),e.E7m("ngIf",n.loading),e.yG2(),e.E7m("ngIf",!n.loading)}}const at=t=>({$implicit:t});function lt(t,_){if(1&t){const n=e.KQA();e.SAx(0),e.I0R(1,"button",25),e.qCj("mouseenter",function(){const o=e.usT(n),a=o.index,l=o.last,g=e.GaO(2);return e.CGJ(g.optionMouseEnter(a,l))})("focus",function(){const o=e.usT(n),a=o.index,l=o.last,g=e.GaO(2);return e.CGJ(g.optionFocus(a,l))}),e.yuY(2,tt,1,0,"ng-container",26),e.C$Y(),e.yuY(3,st,3,2,"ng-container",15),e.k70()}if(2&t){const n=_.$implicit,i=_.last,o=e.GaO(2),a=e.Gew(5);e.yG2(),e.E7m("size",o.optionSize)("value",n)("disabled",o.disabledItemHandler(n)),e.yG2(),e.E7m("ngTemplateOutlet",a)("ngTemplateOutletContext",e.S45(6,at,n)),e.yG2(),e.E7m("ngIf",i&&o.thereAreMoreItems)}}function ct(t,_){if(1&t){const n=e.KQA();e.I0R(0,"span",33),e.qCj("click",function(){e.usT(n);const o=e.GaO(3);return e.CGJ(o.createNew.emit())}),e.I0R(1,"mat-icon"),e.OEk(2,"add"),e.C$Y(),e.I0R(3,"span"),e.aS0(4,34),e.C$Y()()}}function rt(t,_){if(1&t&&(e.I0R(0,"button",30)(1,"span",null,31),e._Xx(3,2),e.C$Y(),e.yuY(4,ct,5,0,"span",32),e.C$Y()),2&t){const n=e.Gew(2),i=e.GaO(2);e.E7m("size",i.optionSize)("value",null)("disabled",!0),e.yG2(4),e.E7m("ngIf",!n.hasChildNodes())}}function ut(t,_){if(1&t&&(e.I0R(0,"tui-data-list",22),e.yuY(1,lt,4,8,"ng-container",23)(2,rt,5,4,"button",24),e.C$Y()),2&t){const n=e.GaO(),i=e.Gew(13);e.E7m("emptyContent",i),e.yG2(),e.E7m("ngForOf",n.items()),e.yG2(),e.E7m("ngIf",n.showCreateNew)}}const gt=["*",[["","empty-content",""]],[["","create-new",""]]],dt=["*","[empty-content]","[create-new]"];let pt=(()=>{class t extends q.m{constructor(){super(),this.stringify=n=>n.name??"",this.service=(0,e.uUt)(oe.K)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-ingredient-select"]],inputs:{outputType:"outputType",multiple:"multiple",service:"service",stringify:"stringify",query:"query",autofocus:"autofocus",placeholder:"placeholder",optionTemplate:"optionTemplate",stringifyOption:"stringifyOption",inputSize:"inputSize",page:"page",per_page:"per_page",optionSize:"optionSize",disabledItemHandler:"disabledItemHandler",loadMoreOnLastItem:"loadMoreOnLastItem",emptyContent:"emptyContent",showCreateNew:"showCreateNew",nativeOptionTemplate:"nativeOptionTemplate",filters:"filters",showCleaner:"showCleaner"},outputs:{httpError:"httpError",pageChange:"pageChange",queryChange:"queryChange",per_pageChange:"per_pageChange",createNew:"createNew"},standalone:!0,features:[e.M5G([{provide:r.Y6,useExisting:(0,e.wd)(()=>t),multi:!0},c.UF]),e.eg9,e.UHJ],ngContentSelectors:dt,decls:17,vars:6,consts:()=>{let n,i,o;return n="Load more",i="We found nothing.",o="Create new",[["loadMoreDefault",""],["valueContent",""],["nativeOptionTemplate",""],["placeholderTemplate",""],["nativeEmptyContentTemplate",""],["loadingTemplate",""],["loadingOrEmptyContent",""],[3,"tuiTextfieldCleaner","stringify","tuiTextfieldSize","formControl","valueContent","searchChange"],[4,"ngTemplateOutlet"],[3,"emptyContent",4,"tuiDataList"],n,[4,"polymorpheusOutlet"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],[3,"innerText"],["customContent",""],[4,"ngIf"],["customEmptyContent",""],["defaultEmptyContent",""],["emptyContentCustomString",""],i,[4,"ngIf","ngIfElse"],["empty",""],[3,"emptyContent"],[4,"ngFor","ngForOf"],["tuiOption","",3,"size","value","disabled",4,"ngIf"],["tuiOption","",3,"size","value","disabled","mouseenter","focus"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tuiOption","",3,"size","disabled",4,"ngIf"],["tuiOption","",3,"size","disabled"],["role","button",3,"click"],["tuiOption","",3,"size","value","disabled"],["createNewCustomTemplate",""],["role","button","class","d-flex align-items-center",3,"click",4,"ngIf"],["role","button",1,"d-flex","align-items-center",3,"click"],o]},template:function(i,o){if(1&i&&(e.kPM(gt),e.yuY(0,Oe,2,0,"ng-template",null,0,e.gJz)(2,ye,4,1,"ng-template",null,1,e.gJz)(4,Ue,4,1,"ng-template",null,2,e.gJz)(6,Ye,4,1,"ng-template",null,3,e.gJz)(8,We,8,1,"ng-template",null,4,e.gJz)(10,Ve,1,0,"ng-template",null,5,e.gJz)(12,Ze,3,2,"ng-template",null,6,e.gJz),e.I0R(14,"tui-combo-box",7),e.qCj("searchChange",function(l){return o.onSearchChange(l)}),e.yuY(15,et,1,0,"ng-container",8)(16,ut,3,3,"tui-data-list",9),e.C$Y()),2&i){const a=e.Gew(3),l=e.Gew(7);e.yG2(14),e.E7m("tuiTextfieldCleaner",o.showCleaner)("stringify",o.stringify)("tuiTextfieldSize",o.inputSize)("formControl",o.control)("valueContent",a),e.yG2(),e.E7m("ngTemplateOutlet",l)}},dependencies:[N.MD,N.ay,N.u_,N.XV,H.uk,H.i_,H.qI,A.aS,A.es,A.rD,te.KA,b.CQ,O.A$,O.yi,O.sP,O.Ux,Z.q8,r.sl,r.ue,r.ug,ne.kR,ee.CA,G.Sk,G.Cb,w.Ux,w.Af,v.oB,v.qL],changeDetection:0})}return t})();var J=s(1343);const mt=(t,_)=>_.id;function Ct(t,_){if(1&t&&e.wR5(0,"app-show-image",16),2&t){const n=e.GaO().$implicit;e.E7m("image",n.image)}}function St(t,_){1&t&&(e.SAx(0),e.aS0(1,17),e.k70())}function Et(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",18),e.qCj("click",function(){e.usT(n);const o=e.GaO().$implicit,a=e.GaO();return e.CGJ(a.remove(o))}),e.SAx(1),e.aS0(2,19),e.k70(),e.C$Y()}}function Tt(t,_){if(1&t&&(e.I0R(0,"tui-island",8)(1,"div",9)(2,"span",5),e.yuY(3,Ct,1,1,"app-show-image",10),e.I0R(4,"div"),e.OEk(5),e.C$Y()(),e.I0R(6,"div",5),e.yuY(7,St,2,0,"ng-template",null,11,e.gJz),e.I0R(9,"button",12)(10,"mat-icon"),e.OEk(11,"drag_handle"),e.C$Y()(),e.yuY(12,Et,3,0,"ng-template",null,13,e.gJz),e.I0R(14,"tui-hosted-dropdown",14)(15,"button",15)(16,"mat-icon"),e.OEk(17,"delete"),e.C$Y()()()()()()),2&t){const n=_.$implicit,i=e.Gew(8),o=e.Gew(13);e.yG2(3),e.E7m("ngIf",n&&n.image),e.yG2(2),e.oRS(" ",n.name," "),e.yG2(4),e.E7m("tuiHint",i),e.yG2(5),e.E7m("content",o)}}function ht(t,_){1&t&&(e.I0R(0,"p"),e.SAx(1),e.aS0(2,20),e.k70(),e.C$Y())}const ft=t=>({avoid_associated_dish_id:t});function Ot(t,_){if(1&t){const n=e.KQA();e.I0R(0,"tui-loader",21)(1,"form",22),e.qCj("ngSubmit",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.addIngredient())}),e.I0R(2,"div",23)(3,"app-ingredient-select",24),e.SAx(4),e.aS0(5,25),e.k70(),e.C$Y()(),e.I0R(6,"div",5)(7,"button",26),e.SAx(8),e.aS0(9,27),e.k70(),e.C$Y(),e.I0R(10,"button",28),e.qCj("click",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.dismissAddIngredient())}),e.SAx(11),e.aS0(12,29),e.k70(),e.C$Y()()()()}if(2&t){const n=e.GaO(2);e.E7m("overlay",!0)("showLoader",n.associatingIngredient()),e.yG2(),e.E7m("formGroup",n.newIngredientForm),e.yG2(2),e.E7m("autofocus",!0)("filters",e.S45(6,ft,n.dish.id))("formControlName","ingredient")}}function It(t,_){1&t&&e.OEk(0," no dish or dish.id ")}function Nt(t,_){if(1&t&&e.yuY(0,Ot,13,8,"tui-loader",21)(1,It,1,0),2&t){const n=e.GaO();e.C0Y(0,n.dish&&n.dish.id?0:1)}}let Mt=(()=>{class t{constructor(){this.ingredientsService=(0,e.uUt)(oe.K),this.dishesService=(0,e.uUt)(C.k),this.destroy$=(0,e.uUt)(c.UF),this.notifications=(0,e.uUt)(m.E),this.dialogs=(0,e.uUt)(F._k),this.dishChange=new e._w7,this.dish=null,this.searching=(0,e.OCB)(!1),this.deleting=(0,e.OCB)(!1),this.moving=(0,e.OCB)(!1),this.associatingIngredient=(0,e.OCB)(!1),this.removingIngredient=(0,e.OCB)(!1),this.loading=(0,e.S6b)(()=>this.searching()||this.deleting()||this.moving()||this.associatingIngredient()||this.removingIngredient()),this.ordering=(0,e.OCB)(!1),this.data=(0,e.OCB)(null),this.items=(0,e.S6b)(()=>this.data()?.items??[]),this.newIngredientForm=new r.WC({ingredient:new r.Ku(null,r.AQ.required)})}ngOnChanges(n){n.dish&&this.search()}search(n=this.defaultFilters()){this.searchSub?.unsubscribe(),this.searching.set(!0),this.searchSub=this.ingredientsService.search(n).pipe((0,u.a)(this.destroy$),(0,d.U)(()=>this.searching.set(!1))).subscribe({next:i=>this.data.set(i),error:i=>{this.data.set(null),this.notifications.error((0,f.mk)(i)||"Something went wrong. Please try again later.")}})}drop(n){if(n.previousIndex===n.currentIndex)return;const i=this.items(),o=i[n.previousIndex]?.id,a=this.dish?.id;o&&a&&((0,L.qv)(i,n.previousIndex,n.currentIndex),this.moving.set(!0),this.dishesService.moveIngredient(a,o,n.currentIndex).pipe((0,u.a)(this.destroy$),(0,d.U)(()=>this.moving.set(!1)),(0,d.U)(()=>this.search())).subscribe({error:l=>this.notifications.error((0,f.mk)(l)||"Something went wrong.")}))}remove(n){const i=this.dish?.id,o=n.id;i&&o&&(this.removingIngredient.set(!0),this.dishesService.removeIngredient(i,o).pipe((0,u.a)(this.destroy$),(0,d.U)(()=>this.removingIngredient.set(!1)),(0,d.U)(()=>this.search())).subscribe((0,J.I)()))}triggerOrdering(){this.ordering()||this.notifications.fireSnackBar("\n           Move the dishes by dragging them with the button on the right side of\n          each category. \n        ","Understood.",{duration:5e3}),this.ordering.set(!this.ordering())}dismissAddIngredient(){this.addIngredientModal?.unsubscribe(),this.newIngredientForm.reset()}showAddIngredient(n){this.addIngredientModal=this.dialogs.open(n).subscribe()}addIngredient(){const n=this.dish?.id,i=this.newIngredientForm.get("ingredient")?.value?.id;this.newIngredientForm.valid&&i&&n&&(this.associatingIngredient.set(!0),this.dishesService.addIngredient(n,i).pipe((0,u.a)(this.destroy$),(0,d.U)(()=>this.dismissAddIngredient()),(0,d.U)(()=>this.search()),(0,d.U)(()=>this.associatingIngredient.set(!1))).subscribe({error:o=>this.notifications.error((0,f.mk)(o)||"Something went wrong.")}))}defaultFilters(){const n={};return this.dish&&this.dish.id&&(n.associated_dish_id=this.dish.id),n}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-dish-ingredients"]],inputs:{dish:"dish"},outputs:{dishChange:"dishChange"},standalone:!0,features:[e.M5G([c.UF]),e.SYr,e.UHJ],decls:15,vars:1,consts:()=>{let n,i,o,a,l,g,$,I;return n="Ingredients",i="Add ingredient",o="Drag to sort.",a="Remove ingredient from the dish.",l="There are no ingredients.",g="Search ingredient",$="Add to the dish.",I="Cancel",[[3,"click"],n,["cdkDropList","",1,"items-list",3,"cdkDropListDropped"],["addModal",""],["type","button","size","m","appearance","flat","tuiButton","",3,"click"],[1,"flex","items-center"],[1,"me-1"],i,["cdkDrag","",1,"mb-2"],[1,"flex","justify-between","items-center"],["style","max-width: 100px;","class","inline-block rounded me-2",3,"image",4,"ngIf"],["dragHint",""],["size","m","cdkDragHandle","","tuiIconButton","","type","button","appearance","outline",1,"me-2",3,"tuiHint"],["deleteDropdown",""],[3,"content"],["size","m","tuiIconButton","","type","button","appearance","outline"],[1,"inline-block","rounded","me-2",2,"max-width","100px",3,"image"],o,["tuiButton","","appearance","secondary-destructive","type","button",1,"m-4",3,"click"],a,l,[3,"overlay","showLoader"],[3,"formGroup","ngSubmit"],[1,"mb-4"],[3,"autofocus","filters","formControlName"],g,["tuiButton","","size","m","type","submit",1,"me-2"],$,["type","button","appearance","outline","tuiButton","","size","m",3,"click"],I,["cdkDrag","","class","mb-2"]]},template:function(i,o){if(1&i){const a=e.KQA();e.I0R(0,"h4",0),e.qCj("click",function(){return o.search()}),e.SAx(1),e.aS0(2,1),e.k70(),e.C$Y(),e.I0R(3,"div",2),e.qCj("cdkDropListDropped",function(g){return o.drop(g)}),e.c53(4,Tt,18,4,"tui-island",30,mt,!1,ht,3,0,"p"),e.C$Y(),e.yuY(7,Nt,2,1,"ng-template",null,3,e.gJz),e.I0R(9,"button",4),e.qCj("click",function(){e.usT(a);const g=e.Gew(8);return e.CGJ(o.showAddIngredient(g))}),e.I0R(10,"span",5)(11,"mat-icon",6),e.OEk(12,"add"),e.C$Y(),e.I0R(13,"span"),e.aS0(14,7),e.C$Y()()()}2&i&&(e.yG2(4),e.oho(o.items()))},dependencies:[B.w,v.qL,P.GE,P.Qw,x.CI,x.Kw,U.k,U.C,j.t,V.ms,O.A$,N.u_,X.y,r.sl,r.sz,r.ue,r.u,r.uW,r.Wo,b.CQ,W.m6,A.aS,G.Sk,G.Cb,Q.yy,L.Cm,L.w5,L.A3,y.WY,y.lh,y.SL,y.i6,y.IT,K.Gs,pt],styles:["[_nghost-%COMP%]   .items-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   tui-island[cdkDrag][_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   .items-list[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .items-list[_ngcontent-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   [cdkDragHandle][_ngcontent-%COMP%]{cursor:move}"],changeDetection:0})}return t})();var ae=s(7307);function Gt(t,_){1&t&&(e.SAx(0),e.aS0(1,10),e.k70())}function Rt(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=_.polymorpheusOutlet;e.yG2(),e.oRS(" ",n," ")}}function Dt(t,_){if(1&t&&e.yuY(0,Rt,2,1,"ng-container",11),2&t){const n=e.GaO(2);e.E7m("polymorpheusOutlet",n.optionTemplate$())}}function At(t,_){1&t&&e.C_f(0)}const le=(t,_)=>({$implicit:t,injector:_});function yt(t,_){if(1&t&&e.yuY(0,At,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.optionTemplate$())("polymorpheusOutletContext",e.IBC(2,le,n,i.injector))}}function $t(t,_){1&t&&e.C_f(0)}const ce=t=>({data:t});function xt(t,_){if(1&t&&e.yuY(0,$t,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.optionTemplate$())("polymorpheusOutletContext",e.S45(2,ce,n))}}function vt(t,_){if(1&t&&e.wR5(0,"div",13),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("innerText",i.stringify(n))}}function Lt(t,_){if(1&t&&e.yuY(0,Dt,1,1)(1,yt,1,5)(2,xt,1,4)(3,vt,1,1),2&t){const n=e.GaO();let i;e.C0Y(0,"text"===(i=n.optionTemplateType$())?0:"template"===i?1:"component"===i?2:3)}}function Pt(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=_.polymorpheusOutlet;e.yG2(),e.oRS(" ",n," ")}}function bt(t,_){if(1&t&&e.yuY(0,Pt,2,1,"ng-container",11),2&t){const n=e.GaO(2);e.E7m("polymorpheusOutlet",n.nativeOptionTemplate$())}}function Ht(t,_){1&t&&e.C_f(0)}function Ut(t,_){if(1&t&&e.yuY(0,Ht,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.nativeOptionTemplate$())("polymorpheusOutletContext",e.IBC(2,le,n,i.injector))}}function kt(t,_){1&t&&e.C_f(0)}function Yt(t,_){if(1&t&&e.yuY(0,kt,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.nativeOptionTemplate$())("polymorpheusOutletContext",e.S45(2,ce,n))}}function wt(t,_){if(1&t&&e.wR5(0,"div",13),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("innerText",i.stringify(n))}}function zt(t,_){if(1&t&&e.yuY(0,bt,1,1)(1,Ut,1,5)(2,Yt,1,4)(3,wt,1,1),2&t){const n=e.GaO();let i;e.C0Y(0,"text"===(i=n.nativeOptionTemplateType$())?0:"template"===i?1:"component"===i?2:3)}}function Bt(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=e.GaO(2);e.yG2(),e.oRS(" ",n.placeholder," ")}}function Ft(t,_){if(1&t&&(e.I0R(0,"span",null,14),e._Xx(2),e.C$Y(),e.yuY(3,Bt,2,1,"ng-container",15)),2&t){const n=e.Gew(1);e.yG2(3),e.E7m("ngIf",!n.hasChildNodes())}}function Xt(t,_){1&t&&(e.SAx(0),e.aS0(1,19),e.k70())}function Jt(t,_){if(1&t&&(e.I0R(0,"span"),e.OEk(1),e.C$Y()),2&t){const n=e.GaO(2);e.yG2(),e.cNF(n.emptyContentString())}}function Wt(t,_){1&t&&e.C_f(0)}function Vt(t,_){if(1&t&&(e.SAx(0),e.yuY(1,Wt,1,0,"ng-container",8),e.k70()),2&t){const n=e.GaO(4);e.yG2(),e.E7m("ngTemplateOutlet",n.emptyContentTemplate())}}function jt(t,_){if(1&t&&(e.SAx(0),e.yuY(1,Vt,2,1,"ng-container",20),e.k70()),2&t){e.GaO(2);const n=e.Gew(6),i=e.GaO();e.yG2(),e.E7m("ngIf",i.emptyContentTemplate())("ngIfElse",n)}}function Kt(t,_){if(1&t&&(e.SAx(0),e.yuY(1,jt,2,2,"ng-container",20),e.k70()),2&t){e.GaO();const n=e.Gew(4),i=e.GaO();e.yG2(),e.E7m("ngIf",i.emptyContent$())("ngIfElse",n)}}function Qt(t,_){if(1&t&&(e.I0R(0,"span",null,16),e._Xx(2,1),e.C$Y(),e.yuY(3,Xt,2,0,"ng-template",null,17,e.gJz)(5,Jt,2,1,"ng-template",null,18,e.gJz)(7,Kt,2,2,"ng-container",15)),2&t){const n=e.Gew(1);e.yG2(7),e.E7m("ngIf",!n.hasChildNodes())}}function qt(t,_){1&t&&e.wR5(0,"tui-loader")}function Zt(t,_){1&t&&e.C_f(0)}function en(t,_){if(1&t&&e.yuY(0,Zt,1,0,"ng-container",8),2&t){e.GaO(2);const n=e.Gew(9);e.E7m("ngTemplateOutlet",n)}}function tn(t,_){1&t&&e.C_f(0)}function nn(t,_){if(1&t&&(e.SAx(0),e.yuY(1,tn,1,0,"ng-container",8),e.k70()),2&t){e.GaO(2);const n=e.Gew(11);e.yG2(),e.E7m("ngTemplateOutlet",n)}}function on(t,_){if(1&t&&e.yuY(0,en,1,1,"ng-template",null,21,e.gJz)(2,nn,2,1,"ng-container",20),2&t){const n=e.Gew(1),i=e.GaO();e.yG2(2),e.E7m("ngIf",i.loading())("ngIfElse",n)}}function _n(t,_){1&t&&e.C_f(0)}function sn(t,_){1&t&&e.C_f(0)}function an(t,_){1&t&&e.C_f(0)}function ln(t,_){if(1&t&&(e.SAx(0),e.yuY(1,an,1,0,"ng-container",8),e.k70()),2&t){e.GaO(4);const n=e.Gew(11);e.yG2(),e.E7m("ngTemplateOutlet",n)}}function cn(t,_){1&t&&e.C_f(0)}function rn(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",28)(1,"span",29),e.qCj("click",function(){e.usT(n);const o=e.GaO(4);return e.CGJ(o.loadMoreItems())}),e.yuY(2,cn,1,0,"ng-container",20),e.C$Y()()}if(2&t){const n=e.GaO(4),i=e.Gew(1);e.E7m("size",n.optionSize)("disabled",!0),e.yG2(2),e.E7m("ngIf",n.loadMore)("ngIfElse",i)}}function un(t,_){if(1&t&&(e.SAx(0),e.yuY(1,ln,2,1,"ng-container",15)(2,rn,3,4,"button",27),e.k70()),2&t){const n=e.GaO(3);e.yG2(),e.E7m("ngIf",n.loading),e.yG2(),e.E7m("ngIf",!n.loading)}}const gn=t=>({$implicit:t});function dn(t,_){if(1&t){const n=e.KQA();e.SAx(0),e.I0R(1,"button",25),e.qCj("mouseenter",function(){const o=e.usT(n),a=o.index,l=o.last,g=e.GaO(2);return e.CGJ(g.optionMouseEnter(a,l))})("focus",function(){const o=e.usT(n),a=o.index,l=o.last,g=e.GaO(2);return e.CGJ(g.optionFocus(a,l))}),e.yuY(2,sn,1,0,"ng-container",26),e.C$Y(),e.yuY(3,un,3,2,"ng-container",15),e.k70()}if(2&t){const n=_.$implicit,i=_.last,o=e.GaO(2),a=e.Gew(5);e.yG2(),e.E7m("size",o.optionSize)("value",n)("disabled",o.disabledItemHandler(n)),e.yG2(),e.E7m("ngTemplateOutlet",a)("ngTemplateOutletContext",e.S45(6,gn,n)),e.yG2(),e.E7m("ngIf",i&&o.thereAreMoreItems)}}function pn(t,_){if(1&t){const n=e.KQA();e.I0R(0,"span",33),e.qCj("click",function(){e.usT(n);const o=e.GaO(3);return e.CGJ(o.createNew.emit())}),e.I0R(1,"mat-icon"),e.OEk(2,"add"),e.C$Y(),e.I0R(3,"span"),e.aS0(4,34),e.C$Y()()}}function mn(t,_){if(1&t&&(e.I0R(0,"button",30)(1,"span",null,31),e._Xx(3,2),e.C$Y(),e.yuY(4,pn,5,0,"span",32),e.C$Y()),2&t){const n=e.Gew(2),i=e.GaO(2);e.E7m("size",i.optionSize)("value",null)("disabled",!0),e.yG2(4),e.E7m("ngIf",!n.hasChildNodes())}}function Cn(t,_){if(1&t&&(e.I0R(0,"tui-data-list",22),e.yuY(1,dn,4,8,"ng-container",23)(2,mn,5,4,"button",24),e.C$Y()),2&t){const n=e.GaO(),i=e.Gew(13);e.E7m("emptyContent",i),e.yG2(),e.E7m("ngForOf",n.items()),e.yG2(),e.E7m("ngIf",n.showCreateNew)}}const Sn=["*",[["","empty-content",""]],[["","create-new",""]]],En=["*","[empty-content]","[create-new]"];let Tn=(()=>{class t extends q.m{constructor(){super(),this.stringify=n=>n.name??"",this.service=(0,e.uUt)(ae._)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-allergen-select"]],inputs:{outputType:"outputType",multiple:"multiple",service:"service",stringify:"stringify",query:"query",autofocus:"autofocus",placeholder:"placeholder",optionTemplate:"optionTemplate",stringifyOption:"stringifyOption",inputSize:"inputSize",page:"page",per_page:"per_page",optionSize:"optionSize",disabledItemHandler:"disabledItemHandler",loadMoreOnLastItem:"loadMoreOnLastItem",emptyContent:"emptyContent",showCreateNew:"showCreateNew",nativeOptionTemplate:"nativeOptionTemplate",filters:"filters",showCleaner:"showCleaner"},outputs:{httpError:"httpError",pageChange:"pageChange",queryChange:"queryChange",per_pageChange:"per_pageChange",createNew:"createNew"},standalone:!0,features:[e.M5G([{provide:r.Y6,useExisting:(0,e.wd)(()=>t),multi:!0},c.UF]),e.eg9,e.UHJ],ngContentSelectors:En,decls:17,vars:6,consts:()=>{let n,i,o;return n="Load more",i="We found nothing.",o="Create new",[["loadMoreDefault",""],["valueContent",""],["nativeOptionTemplate",""],["placeholderTemplate",""],["nativeEmptyContentTemplate",""],["loadingTemplate",""],["loadingOrEmptyContent",""],[3,"tuiTextfieldCleaner","stringify","tuiTextfieldSize","formControl","valueContent","searchChange"],[4,"ngTemplateOutlet"],[3,"emptyContent",4,"tuiDataList"],n,[4,"polymorpheusOutlet"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],[3,"innerText"],["customContent",""],[4,"ngIf"],["customEmptyContent",""],["defaultEmptyContent",""],["emptyContentCustomString",""],i,[4,"ngIf","ngIfElse"],["empty",""],[3,"emptyContent"],[4,"ngFor","ngForOf"],["tuiOption","",3,"size","value","disabled",4,"ngIf"],["tuiOption","",3,"size","value","disabled","mouseenter","focus"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tuiOption","",3,"size","disabled",4,"ngIf"],["tuiOption","",3,"size","disabled"],["role","button",3,"click"],["tuiOption","",3,"size","value","disabled"],["createNewCustomTemplate",""],["role","button","class","d-flex align-items-center",3,"click",4,"ngIf"],["role","button",1,"d-flex","align-items-center",3,"click"],o]},template:function(i,o){if(1&i&&(e.kPM(Sn),e.yuY(0,Gt,2,0,"ng-template",null,0,e.gJz)(2,Lt,4,1,"ng-template",null,1,e.gJz)(4,zt,4,1,"ng-template",null,2,e.gJz)(6,Ft,4,1,"ng-template",null,3,e.gJz)(8,Qt,8,1,"ng-template",null,4,e.gJz)(10,qt,1,0,"ng-template",null,5,e.gJz)(12,on,3,2,"ng-template",null,6,e.gJz),e.I0R(14,"tui-combo-box",7),e.qCj("searchChange",function(l){return o.onSearchChange(l)}),e.yuY(15,_n,1,0,"ng-container",8)(16,Cn,3,3,"tui-data-list",9),e.C$Y()),2&i){const a=e.Gew(3),l=e.Gew(7);e.yG2(14),e.E7m("tuiTextfieldCleaner",o.showCleaner)("stringify",o.stringify)("tuiTextfieldSize",o.inputSize)("formControl",o.control)("valueContent",a),e.yG2(),e.E7m("ngTemplateOutlet",l)}},dependencies:[N.MD,N.ay,N.u_,N.XV,H.uk,H.i_,H.qI,A.aS,A.es,A.rD,te.KA,b.CQ,O.A$,O.yi,O.sP,O.Ux,Z.q8,r.sl,r.ue,r.ug,ne.kR,ee.CA,G.Sk,G.Cb,w.Ux,w.Af,v.oB,v.qL],changeDetection:0})}return t})();const hn=(t,_)=>_.id;function fn(t,_){if(1&t&&e.wR5(0,"app-show-image",16),2&t){const n=e.GaO().$implicit;e.E7m("image",n.image)}}function On(t,_){1&t&&(e.SAx(0),e.aS0(1,17),e.k70())}function In(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",18),e.qCj("click",function(){e.usT(n);const o=e.GaO().$implicit,a=e.GaO();return e.CGJ(a.remove(o))}),e.SAx(1),e.aS0(2,19),e.k70(),e.C$Y()}}function Nn(t,_){if(1&t&&(e.I0R(0,"tui-island",8)(1,"div",9)(2,"span",5),e.yuY(3,fn,1,1,"app-show-image",10),e.I0R(4,"div"),e.OEk(5),e.C$Y()(),e.I0R(6,"div",5),e.yuY(7,On,2,0,"ng-template",null,11,e.gJz),e.I0R(9,"button",12)(10,"mat-icon"),e.OEk(11,"drag_handle"),e.C$Y()(),e.yuY(12,In,3,0,"ng-template",null,13,e.gJz),e.I0R(14,"tui-hosted-dropdown",14)(15,"button",15)(16,"mat-icon"),e.OEk(17,"delete"),e.C$Y()()()()()()),2&t){const n=_.$implicit,i=e.Gew(8),o=e.Gew(13);e.yG2(3),e.E7m("ngIf",n&&n.image),e.yG2(2),e.oRS(" ",n.name," "),e.yG2(4),e.E7m("tuiHint",i),e.yG2(5),e.E7m("content",o)}}function Mn(t,_){1&t&&(e.I0R(0,"p"),e.SAx(1),e.aS0(2,20),e.k70(),e.C$Y())}const Gn=t=>({avoid_associated_dish_id:t});function Rn(t,_){if(1&t){const n=e.KQA();e.I0R(0,"tui-loader",21)(1,"form",22),e.qCj("ngSubmit",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.addAllergen())}),e.I0R(2,"div",23)(3,"app-allergen-select",24),e.SAx(4),e.aS0(5,25),e.k70(),e.C$Y()(),e.I0R(6,"div",5)(7,"button",26),e.SAx(8),e.aS0(9,27),e.k70(),e.C$Y(),e.I0R(10,"button",28),e.qCj("click",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.dismissAddAllergen())}),e.SAx(11),e.aS0(12,29),e.k70(),e.C$Y()()()()}if(2&t){const n=e.GaO(2);e.E7m("overlay",!0)("showLoader",n.addingAllergen()),e.yG2(),e.E7m("formGroup",n.newAllergenForm),e.yG2(2),e.E7m("autofocus",!0)("filters",e.S45(6,Gn,n.dish.id))("formControlName","allergen")}}function Dn(t,_){1&t&&e.OEk(0," no dish or dish.id ")}function An(t,_){if(1&t&&e.yuY(0,Rn,13,8,"tui-loader",21)(1,Dn,1,0),2&t){const n=e.GaO();e.C0Y(0,n.dish&&n.dish.id?0:1)}}let yn=(()=>{class t{constructor(){this.allergensService=(0,e.uUt)(ae._),this.dishesService=(0,e.uUt)(C.k),this.destroy$=(0,e.uUt)(c.UF),this.notifications=(0,e.uUt)(m.E),this.dialogs=(0,e.uUt)(F._k),this.dishChange=new e._w7,this.dish=null,this.searching=(0,e.OCB)(!1),this.deleting=(0,e.OCB)(!1),this.moving=(0,e.OCB)(!1),this.addingAllergen=(0,e.OCB)(!1),this.removingAllergen=(0,e.OCB)(!1),this.loading=(0,e.S6b)(()=>this.searching()||this.deleting()||this.moving()||this.addingAllergen()||this.removingAllergen()),this.ordering=(0,e.OCB)(!1),this.data=(0,e.OCB)(null),this.items=(0,e.S6b)(()=>this.data()?.items??[]),this.newAllergenForm=new r.WC({allergen:new r.Ku(null,r.AQ.required)})}ngOnChanges(n){n.dish&&this.search()}search(n=this.defaultFilters()){this.searchSub?.unsubscribe(),this.searching.set(!0),this.searchSub=this.allergensService.search(n).pipe((0,u.a)(this.destroy$),(0,d.U)(()=>this.searching.set(!1))).subscribe({next:i=>this.data.set(i),error:i=>{this.data.set(null),this.notifications.error((0,f.mk)(i)||"Something went wrong. Please try again later.")}})}drop(n){if(n.previousIndex===n.currentIndex)return;const i=this.items(),o=i[n.previousIndex]?.id,a=this.dish?.id;o&&a&&((0,L.qv)(i,n.previousIndex,n.currentIndex),this.moving.set(!0),this.dishesService.moveAllergen(a,o,n.currentIndex).pipe((0,u.a)(this.destroy$),(0,d.U)(()=>this.moving.set(!1)),(0,d.U)(()=>this.search())).subscribe({error:l=>this.notifications.error((0,f.mk)(l)||"Something went wrong.")}))}remove(n){const i=this.dish?.id,o=n.id;i&&o&&(this.removingAllergen.set(!0),this.dishesService.removeAllergen(i,o).pipe((0,u.a)(this.destroy$),(0,d.U)(()=>this.removingAllergen.set(!1)),(0,d.U)(()=>this.search())).subscribe((0,J.I)()))}triggerOrdering(){this.ordering()||this.notifications.fireSnackBar("\n           Move the dishes by dragging them with the button on the right side of\n          each category. \n        ","Understood.",{duration:5e3}),this.ordering.set(!this.ordering())}dismissAddAllergen(){this.addAllergenModal?.unsubscribe(),this.newAllergenForm.reset()}showAddAllergen(n){this.addAllergenModal=this.dialogs.open(n).subscribe()}addAllergen(){const n=this.dish?.id,i=this.newAllergenForm.get("allergen")?.value?.id;this.newAllergenForm.valid&&i&&n&&(this.addingAllergen.set(!0),this.dishesService.addAllergen(n,i).pipe((0,u.a)(this.destroy$),(0,d.U)(()=>this.dismissAddAllergen()),(0,d.U)(()=>this.search()),(0,d.U)(()=>this.addingAllergen.set(!1))).subscribe({error:o=>this.notifications.error((0,f.mk)(o)||"Something went wrong.")}))}defaultFilters(){const n={};return this.dish&&this.dish.id&&(n.associated_dish_id=this.dish.id),n}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-dish-allergens"]],inputs:{dish:"dish"},outputs:{dishChange:"dishChange"},standalone:!0,features:[e.M5G([c.UF]),e.SYr,e.UHJ],decls:15,vars:1,consts:()=>{let n,i,o,a,l,g,$,I;return n="Allergens",i="Add allergen",o="Drag to sort.",a="Remove allergen from the dish.",l="There are no allergens.",g="Look for allergen",$="Add to the dish.",I="Cancel",[[3,"click"],n,["cdkDropList","",1,"items-list",3,"cdkDropListDropped"],["addModal",""],["type","button","size","m","appearance","flat","tuiButton","",3,"click"],[1,"flex","items-center"],[1,"me-1"],i,["cdkDrag","",1,"mb-2"],[1,"flex","justify-between","items-center"],["style","max-width: 100px;","class","inline-block rounded me-2",3,"image",4,"ngIf"],["dragHint",""],["size","m","cdkDragHandle","","tuiIconButton","","type","button","appearance","outline",1,"me-2",3,"tuiHint"],["deleteDropdown",""],[3,"content"],["size","m","tuiIconButton","","type","button","appearance","outline"],[1,"inline-block","rounded","me-2",2,"max-width","100px",3,"image"],o,["tuiButton","","appearance","secondary-destructive","type","button",1,"m-4",3,"click"],a,l,[3,"overlay","showLoader"],[3,"formGroup","ngSubmit"],[1,"mb-4"],[3,"autofocus","filters","formControlName"],g,["tuiButton","","size","m","type","submit",1,"me-2"],$,["type","button","appearance","outline","tuiButton","","size","m",3,"click"],I,["cdkDrag","","class","mb-2"]]},template:function(i,o){if(1&i){const a=e.KQA();e.I0R(0,"h4",0),e.qCj("click",function(){return o.search()}),e.SAx(1),e.aS0(2,1),e.k70(),e.C$Y(),e.I0R(3,"div",2),e.qCj("cdkDropListDropped",function(g){return o.drop(g)}),e.c53(4,Nn,18,4,"tui-island",30,hn,!1,Mn,3,0,"p"),e.C$Y(),e.yuY(7,An,2,1,"ng-template",null,3,e.gJz),e.I0R(9,"button",4),e.qCj("click",function(){e.usT(a);const g=e.Gew(8);return e.CGJ(o.showAddAllergen(g))}),e.I0R(10,"span",5)(11,"mat-icon",6),e.OEk(12,"add"),e.C$Y(),e.I0R(13,"span"),e.aS0(14,7),e.C$Y()()()}2&i&&(e.yG2(4),e.oho(o.items()))},dependencies:[B.w,v.qL,P.GE,P.Qw,x.CI,x.Kw,U.k,U.C,j.t,V.ms,O.A$,N.u_,X.y,r.sl,r.sz,r.ue,r.u,r.uW,r.Wo,b.CQ,W.m6,A.aS,G.Sk,G.Cb,Q.yy,L.Cm,L.w5,L.A3,y.WY,y.lh,y.SL,y.i6,y.IT,K.Gs,Tn],styles:["[_nghost-%COMP%]   .items-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   tui-island[cdkDrag][_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   .items-list[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .items-list[_ngcontent-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   [cdkDragHandle][_ngcontent-%COMP%]{cursor:move}"],changeDetection:0})}return t})();var re=s(9116);function $n(t,_){1&t&&(e.SAx(0),e.aS0(1,10),e.k70())}function xn(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=_.polymorpheusOutlet;e.yG2(),e.oRS(" ",n," ")}}function vn(t,_){if(1&t&&e.yuY(0,xn,2,1,"ng-container",11),2&t){const n=e.GaO(2);e.E7m("polymorpheusOutlet",n.optionTemplate$())}}function Ln(t,_){1&t&&e.C_f(0)}const ue=(t,_)=>({$implicit:t,injector:_});function Pn(t,_){if(1&t&&e.yuY(0,Ln,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.optionTemplate$())("polymorpheusOutletContext",e.IBC(2,ue,n,i.injector))}}function bn(t,_){1&t&&e.C_f(0)}const ge=t=>({data:t});function Hn(t,_){if(1&t&&e.yuY(0,bn,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.optionTemplate$())("polymorpheusOutletContext",e.S45(2,ge,n))}}function Un(t,_){if(1&t&&e.wR5(0,"div",13),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("innerText",i.stringify(n))}}function kn(t,_){if(1&t&&e.yuY(0,vn,1,1)(1,Pn,1,5)(2,Hn,1,4)(3,Un,1,1),2&t){const n=e.GaO();let i;e.C0Y(0,"text"===(i=n.optionTemplateType$())?0:"template"===i?1:"component"===i?2:3)}}function Yn(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=_.polymorpheusOutlet;e.yG2(),e.oRS(" ",n," ")}}function wn(t,_){if(1&t&&e.yuY(0,Yn,2,1,"ng-container",11),2&t){const n=e.GaO(2);e.E7m("polymorpheusOutlet",n.nativeOptionTemplate$())}}function zn(t,_){1&t&&e.C_f(0)}function Bn(t,_){if(1&t&&e.yuY(0,zn,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.nativeOptionTemplate$())("polymorpheusOutletContext",e.IBC(2,ue,n,i.injector))}}function Fn(t,_){1&t&&e.C_f(0)}function Xn(t,_){if(1&t&&e.yuY(0,Fn,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.nativeOptionTemplate$())("polymorpheusOutletContext",e.S45(2,ge,n))}}function Jn(t,_){if(1&t&&e.wR5(0,"div",13),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("innerText",i.stringify(n))}}function Wn(t,_){if(1&t&&e.yuY(0,wn,1,1)(1,Bn,1,5)(2,Xn,1,4)(3,Jn,1,1),2&t){const n=e.GaO();let i;e.C0Y(0,"text"===(i=n.nativeOptionTemplateType$())?0:"template"===i?1:"component"===i?2:3)}}function Vn(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=e.GaO(2);e.yG2(),e.oRS(" ",n.placeholder," ")}}function jn(t,_){if(1&t&&(e.I0R(0,"span",null,14),e._Xx(2),e.C$Y(),e.yuY(3,Vn,2,1,"ng-container",15)),2&t){const n=e.Gew(1);e.yG2(3),e.E7m("ngIf",!n.hasChildNodes())}}function Kn(t,_){1&t&&(e.SAx(0),e.aS0(1,19),e.k70())}function Qn(t,_){if(1&t&&(e.I0R(0,"span"),e.OEk(1),e.C$Y()),2&t){const n=e.GaO(2);e.yG2(),e.cNF(n.emptyContentString())}}function qn(t,_){1&t&&e.C_f(0)}function Zn(t,_){if(1&t&&(e.SAx(0),e.yuY(1,qn,1,0,"ng-container",8),e.k70()),2&t){const n=e.GaO(4);e.yG2(),e.E7m("ngTemplateOutlet",n.emptyContentTemplate())}}function ei(t,_){if(1&t&&(e.SAx(0),e.yuY(1,Zn,2,1,"ng-container",20),e.k70()),2&t){e.GaO(2);const n=e.Gew(6),i=e.GaO();e.yG2(),e.E7m("ngIf",i.emptyContentTemplate())("ngIfElse",n)}}function ti(t,_){if(1&t&&(e.SAx(0),e.yuY(1,ei,2,2,"ng-container",20),e.k70()),2&t){e.GaO();const n=e.Gew(4),i=e.GaO();e.yG2(),e.E7m("ngIf",i.emptyContent$())("ngIfElse",n)}}function ni(t,_){if(1&t&&(e.I0R(0,"span",null,16),e._Xx(2,1),e.C$Y(),e.yuY(3,Kn,2,0,"ng-template",null,17,e.gJz)(5,Qn,2,1,"ng-template",null,18,e.gJz)(7,ti,2,2,"ng-container",15)),2&t){const n=e.Gew(1);e.yG2(7),e.E7m("ngIf",!n.hasChildNodes())}}function ii(t,_){1&t&&e.wR5(0,"tui-loader")}function oi(t,_){1&t&&e.C_f(0)}function _i(t,_){if(1&t&&e.yuY(0,oi,1,0,"ng-container",8),2&t){e.GaO(2);const n=e.Gew(9);e.E7m("ngTemplateOutlet",n)}}function si(t,_){1&t&&e.C_f(0)}function ai(t,_){if(1&t&&(e.SAx(0),e.yuY(1,si,1,0,"ng-container",8),e.k70()),2&t){e.GaO(2);const n=e.Gew(11);e.yG2(),e.E7m("ngTemplateOutlet",n)}}function li(t,_){if(1&t&&e.yuY(0,_i,1,1,"ng-template",null,21,e.gJz)(2,ai,2,1,"ng-container",20),2&t){const n=e.Gew(1),i=e.GaO();e.yG2(2),e.E7m("ngIf",i.loading())("ngIfElse",n)}}function ci(t,_){1&t&&e.C_f(0)}function ri(t,_){1&t&&e.C_f(0)}function ui(t,_){1&t&&e.C_f(0)}function gi(t,_){if(1&t&&(e.SAx(0),e.yuY(1,ui,1,0,"ng-container",8),e.k70()),2&t){e.GaO(4);const n=e.Gew(11);e.yG2(),e.E7m("ngTemplateOutlet",n)}}function di(t,_){1&t&&e.C_f(0)}function pi(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",28)(1,"span",29),e.qCj("click",function(){e.usT(n);const o=e.GaO(4);return e.CGJ(o.loadMoreItems())}),e.yuY(2,di,1,0,"ng-container",20),e.C$Y()()}if(2&t){const n=e.GaO(4),i=e.Gew(1);e.E7m("size",n.optionSize)("disabled",!0),e.yG2(2),e.E7m("ngIf",n.loadMore)("ngIfElse",i)}}function mi(t,_){if(1&t&&(e.SAx(0),e.yuY(1,gi,2,1,"ng-container",15)(2,pi,3,4,"button",27),e.k70()),2&t){const n=e.GaO(3);e.yG2(),e.E7m("ngIf",n.loading),e.yG2(),e.E7m("ngIf",!n.loading)}}const Ci=t=>({$implicit:t});function Si(t,_){if(1&t){const n=e.KQA();e.SAx(0),e.I0R(1,"button",25),e.qCj("mouseenter",function(){const o=e.usT(n),a=o.index,l=o.last,g=e.GaO(2);return e.CGJ(g.optionMouseEnter(a,l))})("focus",function(){const o=e.usT(n),a=o.index,l=o.last,g=e.GaO(2);return e.CGJ(g.optionFocus(a,l))}),e.yuY(2,ri,1,0,"ng-container",26),e.C$Y(),e.yuY(3,mi,3,2,"ng-container",15),e.k70()}if(2&t){const n=_.$implicit,i=_.last,o=e.GaO(2),a=e.Gew(5);e.yG2(),e.E7m("size",o.optionSize)("value",n)("disabled",o.disabledItemHandler(n)),e.yG2(),e.E7m("ngTemplateOutlet",a)("ngTemplateOutletContext",e.S45(6,Ci,n)),e.yG2(),e.E7m("ngIf",i&&o.thereAreMoreItems)}}function Ei(t,_){if(1&t){const n=e.KQA();e.I0R(0,"span",33),e.qCj("click",function(){e.usT(n);const o=e.GaO(3);return e.CGJ(o.createNew.emit())}),e.I0R(1,"mat-icon"),e.OEk(2,"add"),e.C$Y(),e.I0R(3,"span"),e.aS0(4,34),e.C$Y()()}}function Ti(t,_){if(1&t&&(e.I0R(0,"button",30)(1,"span",null,31),e._Xx(3,2),e.C$Y(),e.yuY(4,Ei,5,0,"span",32),e.C$Y()),2&t){const n=e.Gew(2),i=e.GaO(2);e.E7m("size",i.optionSize)("value",null)("disabled",!0),e.yG2(4),e.E7m("ngIf",!n.hasChildNodes())}}function hi(t,_){if(1&t&&(e.I0R(0,"tui-data-list",22),e.yuY(1,Si,4,8,"ng-container",23)(2,Ti,5,4,"button",24),e.C$Y()),2&t){const n=e.GaO(),i=e.Gew(13);e.E7m("emptyContent",i),e.yG2(),e.E7m("ngForOf",n.items()),e.yG2(),e.E7m("ngIf",n.showCreateNew)}}const fi=["*",[["","empty-content",""]],[["","create-new",""]]],Oi=["*","[empty-content]","[create-new]"];let Ii=(()=>{class t extends q.m{constructor(){super(),this.stringify=n=>n.name??"",this.service=(0,e.uUt)(re.w)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-menu-tag-select"]],inputs:{outputType:"outputType",multiple:"multiple",service:"service",stringify:"stringify",query:"query",autofocus:"autofocus",placeholder:"placeholder",optionTemplate:"optionTemplate",stringifyOption:"stringifyOption",inputSize:"inputSize",page:"page",per_page:"per_page",optionSize:"optionSize",disabledItemHandler:"disabledItemHandler",loadMoreOnLastItem:"loadMoreOnLastItem",emptyContent:"emptyContent",showCreateNew:"showCreateNew",nativeOptionTemplate:"nativeOptionTemplate",filters:"filters",showCleaner:"showCleaner"},outputs:{httpError:"httpError",pageChange:"pageChange",queryChange:"queryChange",per_pageChange:"per_pageChange",createNew:"createNew"},standalone:!0,features:[e.M5G([{provide:r.Y6,useExisting:(0,e.wd)(()=>t),multi:!0},c.UF]),e.eg9,e.UHJ],ngContentSelectors:Oi,decls:17,vars:6,consts:()=>{let n,i,o;return n="Load more",i="We found nothing.",o="Create new",[["loadMoreDefault",""],["valueContent",""],["nativeOptionTemplate",""],["placeholderTemplate",""],["nativeEmptyContentTemplate",""],["loadingTemplate",""],["loadingOrEmptyContent",""],[3,"tuiTextfieldCleaner","stringify","tuiTextfieldSize","formControl","valueContent","searchChange"],[4,"ngTemplateOutlet"],[3,"emptyContent",4,"tuiDataList"],n,[4,"polymorpheusOutlet"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],[3,"innerText"],["customContent",""],[4,"ngIf"],["customEmptyContent",""],["defaultEmptyContent",""],["emptyContentCustomString",""],i,[4,"ngIf","ngIfElse"],["empty",""],[3,"emptyContent"],[4,"ngFor","ngForOf"],["tuiOption","",3,"size","value","disabled",4,"ngIf"],["tuiOption","",3,"size","value","disabled","mouseenter","focus"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tuiOption","",3,"size","disabled",4,"ngIf"],["tuiOption","",3,"size","disabled"],["role","button",3,"click"],["tuiOption","",3,"size","value","disabled"],["createNewCustomTemplate",""],["role","button","class","d-flex align-items-center",3,"click",4,"ngIf"],["role","button",1,"d-flex","align-items-center",3,"click"],o]},template:function(i,o){if(1&i&&(e.kPM(fi),e.yuY(0,$n,2,0,"ng-template",null,0,e.gJz)(2,kn,4,1,"ng-template",null,1,e.gJz)(4,Wn,4,1,"ng-template",null,2,e.gJz)(6,jn,4,1,"ng-template",null,3,e.gJz)(8,ni,8,1,"ng-template",null,4,e.gJz)(10,ii,1,0,"ng-template",null,5,e.gJz)(12,li,3,2,"ng-template",null,6,e.gJz),e.I0R(14,"tui-combo-box",7),e.qCj("searchChange",function(l){return o.onSearchChange(l)}),e.yuY(15,ci,1,0,"ng-container",8)(16,hi,3,3,"tui-data-list",9),e.C$Y()),2&i){const a=e.Gew(3),l=e.Gew(7);e.yG2(14),e.E7m("tuiTextfieldCleaner",o.showCleaner)("stringify",o.stringify)("tuiTextfieldSize",o.inputSize)("formControl",o.control)("valueContent",a),e.yG2(),e.E7m("ngTemplateOutlet",l)}},dependencies:[N.MD,N.ay,N.u_,N.XV,H.uk,H.i_,H.qI,A.aS,A.es,A.rD,te.KA,b.CQ,O.A$,O.yi,O.sP,O.Ux,Z.q8,r.sl,r.ue,r.ug,ne.kR,ee.CA,G.Sk,G.Cb,w.Ux,w.Af,v.oB,v.qL],changeDetection:0})}return t})();const Ni=(t,_)=>_.id;function Mi(t,_){if(1&t&&e.wR5(0,"app-show-image",16),2&t){const n=e.GaO().$implicit;e.E7m("image",n.image)}}function Gi(t,_){1&t&&(e.SAx(0),e.aS0(1,17),e.k70())}function Ri(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",18),e.qCj("click",function(){e.usT(n);const o=e.GaO().$implicit,a=e.GaO();return e.CGJ(a.remove(o))}),e.SAx(1),e.aS0(2,19),e.k70(),e.C$Y()}}function Di(t,_){if(1&t&&(e.I0R(0,"tui-island",8)(1,"div",9)(2,"span",5),e.yuY(3,Mi,1,1,"app-show-image",10),e.I0R(4,"div"),e.OEk(5),e.C$Y()(),e.I0R(6,"div",5),e.yuY(7,Gi,2,0,"ng-template",null,11,e.gJz),e.I0R(9,"button",12)(10,"mat-icon"),e.OEk(11,"drag_handle"),e.C$Y()(),e.yuY(12,Ri,3,0,"ng-template",null,13,e.gJz),e.I0R(14,"tui-hosted-dropdown",14)(15,"button",15)(16,"mat-icon"),e.OEk(17,"delete"),e.C$Y()()()()()()),2&t){const n=_.$implicit,i=e.Gew(8),o=e.Gew(13);e.yG2(3),e.E7m("ngIf",n&&n.image),e.yG2(2),e.oRS(" ",n.name," "),e.yG2(4),e.E7m("tuiHint",i),e.yG2(5),e.E7m("content",o)}}function Ai(t,_){1&t&&(e.I0R(0,"p"),e.SAx(1),e.aS0(2,20),e.k70(),e.C$Y())}const yi=t=>({avoid_associated_dish_id:t});function $i(t,_){if(1&t){const n=e.KQA();e.I0R(0,"tui-loader",21)(1,"form",22),e.qCj("ngSubmit",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.addTag())}),e.I0R(2,"div",23)(3,"app-menu-tag-select",24),e.SAx(4),e.aS0(5,25),e.k70(),e.C$Y()(),e.I0R(6,"div",5)(7,"button",26),e.SAx(8),e.aS0(9,27),e.k70(),e.C$Y(),e.I0R(10,"button",28),e.qCj("click",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.dismissAddTag())}),e.SAx(11),e.aS0(12,29),e.k70(),e.C$Y()()()()}if(2&t){const n=e.GaO(2);e.E7m("overlay",!0)("showLoader",n.addingTag()),e.yG2(),e.E7m("formGroup",n.newTagForm),e.yG2(2),e.E7m("autofocus",!0)("filters",e.S45(6,yi,n.dish.id))("formControlName","tag")}}function xi(t,_){1&t&&e.OEk(0," no dish or dish.id ")}function vi(t,_){if(1&t&&e.yuY(0,$i,13,8,"tui-loader",21)(1,xi,1,0),2&t){const n=e.GaO();e.C0Y(0,n.dish&&n.dish.id?0:1)}}let Li=(()=>{class t{constructor(){this.tagsService=(0,e.uUt)(re.w),this.dishesService=(0,e.uUt)(C.k),this.destroy$=(0,e.uUt)(c.UF),this.notifications=(0,e.uUt)(m.E),this.dialogs=(0,e.uUt)(F._k),this.dishChange=new e._w7,this.dish=null,this.searching=(0,e.OCB)(!1),this.deleting=(0,e.OCB)(!1),this.moving=(0,e.OCB)(!1),this.addingTag=(0,e.OCB)(!1),this.removingTag=(0,e.OCB)(!1),this.loading=(0,e.S6b)(()=>this.searching()||this.deleting()||this.moving()||this.addingTag()||this.removingTag()),this.ordering=(0,e.OCB)(!1),this.data=(0,e.OCB)(null),this.items=(0,e.S6b)(()=>this.data()?.items??[]),this.newTagForm=new r.WC({tag:new r.Ku(null,r.AQ.required)})}ngOnChanges(n){n.dish&&this.search()}search(n=this.defaultFilters()){this.searchSub?.unsubscribe(),this.searching.set(!0),this.searchSub=this.tagsService.search(n).pipe((0,u.a)(this.destroy$),(0,d.U)(()=>this.searching.set(!1))).subscribe({next:i=>this.data.set(i),error:i=>{this.data.set(null),this.notifications.error((0,f.mk)(i)||"Something went wrong. Please try again later.")}})}drop(n){if(n.previousIndex===n.currentIndex)return;const i=this.items(),o=i[n.previousIndex]?.id,a=this.dish?.id;o&&a&&((0,L.qv)(i,n.previousIndex,n.currentIndex),this.moving.set(!0),this.dishesService.moveTag(a,o,n.currentIndex).pipe((0,u.a)(this.destroy$),(0,d.U)(()=>this.moving.set(!1)),(0,d.U)(()=>this.search())).subscribe({error:l=>this.notifications.error((0,f.mk)(l)||"Something went wrong.")}))}remove(n){const i=this.dish?.id,o=n.id;i&&o&&(this.removingTag.set(!0),this.dishesService.removeTag(i,o).pipe((0,u.a)(this.destroy$),(0,d.U)(()=>this.removingTag.set(!1)),(0,d.U)(()=>this.search())).subscribe((0,J.I)()))}triggerOrdering(){this.ordering()||this.notifications.fireSnackBar("\n           Move the dishes by dragging them with the button on the right side of\n          each category. \n        ","Understood.",{duration:5e3}),this.ordering.set(!this.ordering())}dismissAddTag(){this.addTagModal?.unsubscribe(),this.newTagForm.reset()}showAddTag(n){this.addTagModal=this.dialogs.open(n).subscribe()}addTag(){const n=this.dish?.id,i=this.newTagForm.get("tag")?.value?.id;this.newTagForm.valid&&i&&n&&(this.addingTag.set(!0),this.dishesService.addTag(n,i).pipe((0,u.a)(this.destroy$),(0,d.U)(()=>this.dismissAddTag()),(0,d.U)(()=>this.search()),(0,d.U)(()=>this.addingTag.set(!1))).subscribe({error:o=>this.notifications.error((0,f.mk)(o)||"Something went wrong.")}))}defaultFilters(){const n={};return this.dish&&this.dish.id&&(n.associated_dish_id=this.dish.id),n}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-dish-tags"]],inputs:{dish:"dish"},outputs:{dishChange:"dishChange"},standalone:!0,features:[e.M5G([c.UF]),e.SYr,e.UHJ],decls:15,vars:1,consts:()=>{let n,i,o,a,l,g,$,I;return n="Tag",i="Add tags",o="Drag to sort.",a="Remove tags from the dish.",l="There are no tags.",g="Search tags",$="Add to the dish.",I="Cancel",[[3,"click"],n,["cdkDropList","",1,"items-list",3,"cdkDropListDropped"],["addModal",""],["type","button","size","m","appearance","flat","tuiButton","",3,"click"],[1,"flex","items-center"],[1,"me-1"],i,["cdkDrag","",1,"mb-2"],[1,"flex","justify-between","items-center"],["style","max-width: 100px;","class","inline-block rounded me-2",3,"image",4,"ngIf"],["dragHint",""],["size","m","cdkDragHandle","","tuiIconButton","","type","button","appearance","outline",1,"me-2",3,"tuiHint"],["deleteDropdown",""],[3,"content"],["size","m","tuiIconButton","","type","button","appearance","outline"],[1,"inline-block","rounded","me-2",2,"max-width","100px",3,"image"],o,["tuiButton","","appearance","secondary-destructive","type","button",1,"m-4",3,"click"],a,l,[3,"overlay","showLoader"],[3,"formGroup","ngSubmit"],[1,"mb-4"],[3,"autofocus","filters","formControlName"],g,["tuiButton","","size","m","type","submit",1,"me-2"],$,["type","button","appearance","outline","tuiButton","","size","m",3,"click"],I,["cdkDrag","","class","mb-2"]]},template:function(i,o){if(1&i){const a=e.KQA();e.I0R(0,"h4",0),e.qCj("click",function(){return o.search()}),e.SAx(1),e.aS0(2,1),e.k70(),e.C$Y(),e.I0R(3,"div",2),e.qCj("cdkDropListDropped",function(g){return o.drop(g)}),e.c53(4,Di,18,4,"tui-island",30,Ni,!1,Ai,3,0,"p"),e.C$Y(),e.yuY(7,vi,2,1,"ng-template",null,3,e.gJz),e.I0R(9,"button",4),e.qCj("click",function(){e.usT(a);const g=e.Gew(8);return e.CGJ(o.showAddTag(g))}),e.I0R(10,"span",5)(11,"mat-icon",6),e.OEk(12,"add"),e.C$Y(),e.I0R(13,"span"),e.aS0(14,7),e.C$Y()()()}2&i&&(e.yG2(4),e.oho(o.items()))},dependencies:[B.w,v.qL,P.GE,P.Qw,x.CI,x.Kw,U.k,U.C,j.t,V.ms,O.A$,N.u_,X.y,r.sl,r.sz,r.ue,r.u,r.uW,r.Wo,b.CQ,W.m6,A.aS,G.Sk,G.Cb,Q.yy,L.Cm,L.w5,L.A3,y.WY,y.lh,y.SL,y.i6,y.IT,K.Gs,Ii],styles:["[_nghost-%COMP%]   .items-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   tui-island[cdkDrag][_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   .items-list[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .items-list[_ngcontent-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   [cdkDragHandle][_ngcontent-%COMP%]{cursor:move}"],changeDetection:0})}return t})();var Pi=s(2300),bi=s(9880);const Hi=["*"];let Ui=(()=>{class t{constructor(){this.dishChanged=new e._w7,this.dish=null,this.destroy$=(0,e.uUt)(c.UF),this.notifications=(0,e.uUt)(m.E),this.dishesService=(0,e.uUt)(C.k),this.removingPrice=(0,e.OCB)(!1),this.searchingDishes=(0,e.OCB)(!1),this.savingPrice=(0,e.OCB)(!1),this.loading=(0,e.S6b)(()=>this.savingPrice()||this.searchingDishes()||this.removingPrice()),this.price=new r.Ku(null)}ngOnInit(){this.price.valueChanges.pipe((0,u.a)(this.destroy$),(0,h.a)(),(0,D.I)(n=>n!=this.dish?.price),(0,Pi.o)(1500)).subscribe({next:n=>this.updateRemote(n)})}ngOnChanges(n){n.dish&&this.price.patchValue(this.dish?.price??null)}updateRemote(n){const i=this.dish?.id;i&&(this.updateRemoteSub?.unsubscribe(),this.savingPrice.set(!0),this.updateRemoteSub=this.dishesService.update(i,{price:n}).pipe((0,u.a)(this.destroy$),(0,d.U)(()=>this.savingPrice.set(!1))).subscribe({next:o=>{this.dish=o,this.dishChanged.emit(o),this.notifications.fireSnackBar("Price saved.")},error:o=>{this.notifications.fireSnackBar((0,f.mk)(o)||"Something went wrong in saving the price.")}}))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-dish-price"]],inputs:{dish:"dish"},outputs:{dishChanged:"dishChanged"},standalone:!0,features:[e.M5G([c.UF]),e.SYr,e.UHJ],ngContentSelectors:Hi,decls:2,vars:1,consts:[["tuiTextfieldSize","l","tuiTextfieldPostfix","\u20ac",3,"formControl"]],template:function(i,o){1&i&&(e.kPM(),e.I0R(0,"tui-input",0),e._Xx(1),e.C$Y()),2&i&&e.E7m("formControl",o.price)},dependencies:[b.CQ,b.Oo,b.cP,A.aS,A.rD,A.We,r.sl,r.ue,r.ug,bi.kh,x.CI],encapsulation:2,changeDetection:0})}return t})();var ki=s(9088);const Yi=(t,_)=>_.id;function wi(t,_){if(1&t&&(e.I0R(0,"li",2)(1,"a",3),e.wVc(2,"urlTo"),e.OEk(3),e.C$Y()()),2&t){const n=_.$implicit;e.yG2(),e._6D("routerLink",e.g7$(2,2,n.id,"menuCategory.show")),e.yG2(2),e.oRS(" ",n.name," ")}}function zi(t,_){if(1&t&&(e._Xx(0),e.I0R(1,"ul",1),e.c53(2,wi,4,5,"li",4,Yi),e.C$Y()),2&t){const n=e.GaO();e.yG2(2),e.oho(n.references().categories)}}const Bi=["*"];let Fi=(()=>{class t{constructor(){this.destroy$=(0,e.uUt)(c.UF),this.service=(0,e.uUt)(C.k),this.notifications=(0,e.uUt)(m.E),this.item=(0,e.OCB)(null),this.references=(0,e.OCB)(null),this.searching=(0,e.OCB)(!1)}set dish(n){this.item.set(n??null),this.searchReferences()}searchReferences(){this.references.set(null);const n=this.item()?.id;n&&(this.searching.set(!0),this.service.references(n).pipe((0,u.a)(this.destroy$),(0,d.U)(()=>this.searching.set(!1))).subscribe({next:i=>this.references.set(i),error:i=>this.notifications.error((0,f.mk)(i)||"Something went wrong.")}))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-dish-references"]],inputs:{dish:"dish"},standalone:!0,features:[e.M5G([c.UF]),e.UHJ],ngContentSelectors:Bi,decls:1,vars:1,consts:[["class","tui-list tui-list_small"],[1,"tui-list","tui-list_small"],[1,"tui-list__item"],["tuiLink","",1,"mb-2",3,"routerLink"],["class","tui-list__item"]],template:function(i,o){1&i&&(e.kPM(),e.yuY(0,zi,4,0,"ul",0)),2&i&&e.C0Y(0,o.item()&&o.references()?0:-1)},dependencies:[ki.S,p.ER,B.w,B.C],changeDetection:0})}return t})();var Xi=s(8392),Ji=s(7660);const Wi=(t,_)=>_.id;function Vi(t,_){if(1&t&&e.wR5(0,"app-show-image",13),2&t){const n=e.GaO().$implicit;e.E7m("image",n.images[0])}}function ji(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",14),e.qCj("click",function(){e.usT(n);const o=e.GaO().$implicit,a=e.GaO();return e.CGJ(a.remove(o))}),e.SAx(1),e.aS0(2,15),e.k70(),e.C$Y()}}function Ki(t,_){if(1&t&&(e.I0R(0,"tui-island",7)(1,"div",8)(2,"span",4),e.yuY(3,Vi,1,1,"app-show-image",9),e.I0R(4,"div"),e.OEk(5),e.C$Y()(),e.I0R(6,"div",4),e.yuY(7,ji,3,0,"ng-template",null,10,e.gJz),e.I0R(9,"tui-hosted-dropdown",11)(10,"button",12)(11,"mat-icon"),e.OEk(12,"delete"),e.C$Y()()()()()()),2&t){const n=_.$implicit,i=e.Gew(8);e.yG2(3),e.E7m("ngIf",n&&n.images&&n.images[0]),e.yG2(2),e.oRS(" ",n.name," "),e.yG2(4),e.E7m("content",i)}}function Qi(t,_){1&t&&(e.I0R(0,"p"),e.SAx(1),e.aS0(2,16),e.k70(),e.C$Y())}const qi=t=>({can_suggest:t});function Zi(t,_){if(1&t){const n=e.KQA();e.I0R(0,"tui-loader",17)(1,"form",18),e.qCj("ngSubmit",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.addDish())}),e.I0R(2,"div",19)(3,"app-dish-select",20),e.SAx(4),e.aS0(5,21),e.k70(),e.C$Y()(),e.I0R(6,"div",4)(7,"button",22),e.SAx(8),e.aS0(9,23),e.k70(),e.C$Y(),e.I0R(10,"button",24),e.qCj("click",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.dismissAddDish())}),e.SAx(11),e.aS0(12,25),e.k70(),e.C$Y()()()()}if(2&t){const n=e.GaO(2);e.E7m("overlay",!0)("showLoader",n.addingDish()),e.yG2(),e.E7m("formGroup",n.newDishForm),e.yG2(2),e.E7m("autofocus",!0)("filters",e.S45(6,qi,n.dish.id))("formControlName","dish")}}function eo(t,_){1&t&&e.OEk(0," no dish or dish.id ")}function to(t,_){if(1&t&&e.yuY(0,Zi,13,8,"tui-loader",17)(1,eo,1,0),2&t){const n=e.GaO();e.C0Y(0,n.dish&&n.dish.id?0:1)}}let no=(()=>{class t{constructor(){this.dishesService=(0,e.uUt)(C.k),this.destroy$=(0,e.uUt)(c.UF),this.notifications=(0,e.uUt)(m.E),this.dialogs=(0,e.uUt)(F._k),this.dishChange=new e._w7,this.dish$=(0,e.OCB)(null),this.deleting=(0,e.OCB)(!1),this.moving=(0,e.OCB)(!1),this.addingDish=(0,e.OCB)(!1),this.removingDish=(0,e.OCB)(!1),this.loading=(0,e.S6b)(()=>this.deleting()||this.moving()||this.addingDish()||this.removingDish()),this.ordering=(0,e.OCB)(!1),this.items=(0,e.OCB)([]),this.newDishForm=new r.WC({dish:new r.Ku(null,r.AQ.required)})}set dish(n){this.dish$.set(n??null),this.items.set(n?.suggestions??[])}get dish(){return this.dish$()}remove(n){const i=this.dish$()?.id;i&&n.id&&(this.removingDish.set(!0),this.dishesService.removeSuggestion(i,n.id).pipe((0,u.a)(this.destroy$),(0,d.U)(()=>{this.removingDish.set(!1),this.dishChange.emit()})).subscribe((0,J.I)()))}dismissAddDish(){this.addDishModal?.unsubscribe(),this.newDishForm.reset(),this.dishChange.emit()}showAddDish(n){this.addDishModal=this.dialogs.open(n).subscribe()}addDish(){const n=this.dish?.id,i=this.newDishForm.get("dish")?.value?.id;this.newDishForm.valid&&i&&n&&(this.addingDish.set(!0),this.dishesService.addSuggestion(n,i).pipe((0,u.a)(this.destroy$),(0,d.U)(()=>this.dismissAddDish()),(0,d.U)(()=>this.addingDish.set(!1))).subscribe({error:o=>this.notifications.error((0,f.mk)(o)||Xi.a)}))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-dish-suggestions"]],inputs:{dish:"dish"},outputs:{dishChange:"dishChange"},standalone:!0,features:[e.UHJ],decls:15,vars:1,consts:()=>{let n,i,o,a,l,g,$;return n="Suggested dishes/drinks to pair.",i="Add suggestion",o="Remove suggestion",a="There are no suggestions for this dish.",l="Search dish",g="Add",$="Cancel",[n,[1,"items-list"],["addModal",""],["type","button","size","m","appearance","flat","tuiButton","",3,"click"],[1,"flex","items-center"],[1,"me-1"],i,[1,"mb-2"],[1,"flex","justify-between","items-center"],["style","max-width: 100px;","class","inline-block rounded me-2",3,"image",4,"ngIf"],["deleteDropdown",""],[3,"content"],["size","m","tuiIconButton","","type","button","appearance","outline"],[1,"inline-block","rounded","me-2",2,"max-width","100px",3,"image"],["tuiButton","","appearance","secondary-destructive","type","button",1,"m-4",3,"click"],o,a,[3,"overlay","showLoader"],[3,"formGroup","ngSubmit"],[1,"mb-4"],[3,"autofocus","filters","formControlName"],l,["tuiButton","","size","m","type","submit",1,"me-2"],g,["type","button","appearance","outline","tuiButton","","size","m",3,"click"],$,["class","mb-2"]]},template:function(i,o){if(1&i){const a=e.KQA();e.I0R(0,"h4"),e.SAx(1),e.aS0(2,0),e.k70(),e.C$Y(),e.I0R(3,"div",1),e.c53(4,Ki,13,3,"tui-island",26,Wi,!1,Qi,3,0,"p"),e.C$Y(),e.yuY(7,to,2,1,"ng-template",null,2,e.gJz),e.I0R(9,"button",3),e.qCj("click",function(){e.usT(a);const g=e.Gew(8);return e.CGJ(o.showAddDish(g))}),e.I0R(10,"span",4)(11,"mat-icon",5),e.OEk(12,"add"),e.C$Y(),e.I0R(13,"span"),e.aS0(14,6),e.C$Y()()()}2&i&&(e.yG2(4),e.oho(o.items()))},dependencies:[U.k,U.C,X.y,N.u_,x.CI,x.Kw,P.GE,P.Qw,v.qL,G.Sk,G.Cb,r.sl,r.sz,r.ue,r.u,r.uW,r.Wo,Ji.i],encapsulation:2})}return t})();function io(t,_){1&t&&(e.I0R(0,"p"),e.aS0(1,22),e.C$Y(),e.I0R(2,"p"),e.aS0(3,23),e.C$Y())}function oo(t,_){if(1&t){const n=e.KQA();e.I0R(0,"div",2)(1,"h4",3),e.aS0(2,24),e.C$Y(),e.I0R(3,"app-name-desc-eip",25),e.qCj("submittedChanges",function(o){e.usT(n);const a=e.GaO(2);return e.CGJ(a.saveNameDesc(o))}),e.C$Y()()}if(2&t){const n=e.GaO(2);let i;e.yG2(3),e.E7m("translations",null==(i=n.dish())?null:i.translations)}}function _o(t,_){if(1&t){const n=e.KQA();e.I0R(0,"div")(1,"div",0)(2,"div",1)(3,"h1"),e.OEk(4),e.C$Y()()(),e.I0R(5,"div",2)(6,"h4",3),e.aS0(7,4),e.C$Y(),e.wR5(8,"app-show-images",5),e.C$Y(),e.I0R(9,"div",2)(10,"h4",3),e.aS0(11,6),e.C$Y(),e.I0R(12,"app-edit-dish-status",7),e.qCj("deleteDish",function(){e.usT(n);const o=e.GaO();return e.CGJ(o.delete())})("statusChange",function(o){e.usT(n);const a=e.GaO();return e.CGJ(a.updateStatus(o))})("dishChange",function(o){e.usT(n);const a=e.GaO();return e.CGJ(a.dish.set(o))}),e.C$Y()(),e.yuY(13,io,4,0,"ng-template",null,8,e.gJz),e.I0R(15,"div",2)(16,"div",9)(17,"mat-icon",10),e.OEk(18,"link"),e.C$Y(),e.I0R(19,"h4",11),e.aS0(20,12),e.C$Y(),e.wR5(21,"tui-tooltip",13),e.C$Y(),e.wR5(22,"app-dish-references",14),e.C$Y(),e.I0R(23,"div",2)(24,"h4",3),e.aS0(25,15),e.C$Y(),e.I0R(26,"app-dish-price",16),e.qCj("dishChanged",function(o){e.usT(n);const a=e.GaO();return e.CGJ(a.dish.set(o))}),e.SAx(27),e.aS0(28,17),e.k70(),e.C$Y()(),e.yuY(29,oo,4,1,"div",18),e.I0R(30,"div",2)(31,"app-dish-ingredients",19),e.qCj("dishChange",function(o){e.usT(n);const a=e.GaO();return e.CGJ(a.dish.set(o))}),e.C$Y()(),e.I0R(32,"div",2)(33,"app-dish-allergens",19),e.qCj("dishChange",function(o){e.usT(n);const a=e.GaO();return e.CGJ(a.dish.set(o))}),e.C$Y()(),e.I0R(34,"div",2)(35,"app-dish-tags",19),e.qCj("dishChange",function(o){e.usT(n);const a=e.GaO();return e.CGJ(a.dish.set(o))}),e.C$Y()(),e.I0R(36,"div",2)(37,"app-dish-suggestions",19),e.qCj("dishChange",function(){e.usT(n);const o=e.GaO();return e.CGJ(o.reload())}),e.C$Y()(),e.I0R(38,"button",20),e.qCj("click",function(){e.usT(n);const o=e.GaO();return e.CGJ(o.confirmAndDelete())}),e.SAx(39),e.aS0(40,21),e.k70(),e.C$Y()()}if(2&t){const n=e.Gew(14),i=e.GaO();let o,a,l,g;e.yG2(4),e.cNF(null==(o=i.dish())?null:o.name),e.yG2(4),e.E7m("recordType","Menu::Dish")("recordId",null==(a=i.dish())?null:a.id)("images",null==(l=i.dish())?null:l.images),e.yG2(4),e.E7m("dish",i.dish()),e.yG2(9),e.E7m("content",n),e.yG2(),e.E7m("dish",i.dish()),e.yG2(4),e.E7m("dish",i.dish()),e.yG2(3),e.C0Y(29,null!=(g=i.dish())&&g.translations?29:-1),e.yG2(2),e.E7m("dish",i.dish()),e.yG2(2),e.E7m("dish",i.dish()),e.yG2(2),e.E7m("dish",i.dish()),e.yG2(2),e.E7m("dish",i.dish()),e.yG2(),e.E7m("appearance","secondary-destructive")}}function so(t,_){1&t&&e.wR5(0,"tui-loader",26),2&t&&e.E7m("showLoader",!0)("size","l")}let ao=(()=>{class t{constructor(){this.destroy$=(0,e.uUt)(c.UF),this.service=(0,e.uUt)(C.k),this.notifications=(0,e.uUt)(m.E),this.router=(0,e.uUt)(p.E5),this.route=(0,e.uUt)(p.gV),this.loading=(0,e.OCB)(!1),this.dish=(0,e.OCB)(null),this.dishId=(0,e.OCB)(null)}ngOnInit(){this.route.params.pipe((0,u.a)(this.destroy$),(0,T.k)(n=>Number(n.dish_id)),(0,D.I)(n=>"number"==typeof n&&!isNaN(n)&&n>0),(0,h.a)(),(0,z.y)(n=>this.dishId.set(n))).subscribe({next:n=>this.reload(),error:n=>{this.dishId.set(null),this.dish.set(null)}})}reload(){const n=this.dishId();n&&this.loadDish(n)}delete(){const n=this.dish()?.id;n&&(this.loading.set(!0),this.service.destroy(n).pipe((0,u.a)(this.destroy$),(0,d.U)(()=>this.loading.set(!1))).subscribe({next:()=>{this.notifications.fireSnackBar("Dish was deleted."),this.router.navigate(["../.."],{relativeTo:this.route})},error:i=>{this.notifications.error((0,f.mk)(i)||"Something went wrong.")}}))}updateStatus(n){const i=this.dish()?.id;!n||!i||(this.loading.set(!0),this.service.updateStatus(i,n).pipe((0,u.a)(this.destroy$),(0,d.U)(()=>this.loading.set(!1))).subscribe({next:o=>{this.notifications.fireSnackBar("Updated state."),this.dish.set(o)},error:o=>{this.notifications.error((0,f.mk)(o)||"Something went wrong.")}}))}loadDish(n){this.dishId.set(n),this.loading.set(!0),this.service.show(n).pipe((0,u.a)(this.destroy$),(0,d.U)(()=>this.loading.set(!1))).subscribe({next:i=>this.dish.set(i),error:i=>{this.dish.set(null),this.notifications.error((0,f.mk)(i)||"Something went wrong.")}})}saveNameDesc(n){const i=this.dish()?.id;i&&(this.loading.set(!0),this.service.update(i,n).pipe((0,u.a)(this.destroy$),(0,d.U)(()=>this.loading.set(!1))).subscribe({next:o=>{this.notifications.fireSnackBar("Updated translations."),this.dish.set(o)},error:o=>{this.notifications.error((0,f.mk)(o)||"Something went wrong.")}}))}confirmAndDelete(){this.notifications.confirm("Are you sure you want to delete this dish?").subscribe({next:n=>{n&&this.delete()}})}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["__app-view-dish"]],standalone:!0,features:[e.M5G([c.UF]),e.UHJ],decls:2,vars:1,consts:()=>{let n,i,o,a,l,g,$,I,S;return n="Flat images",i="Flat state",o="Dish also present in:",a="Price",l="Price",g="Delete dish",$="The same dish can be present in multiple categories.",I="\n           The categories listed below are all the categories in which this dish\n          can be seen. \n        ",S="Translations",[[1,"flex","items-center","justify-between"],[1,"flex","flex-items"],[1,"mb-3"],[1,"mb-1","me-1"],n,[1,"mb-3",3,"recordType","recordId","images"],i,[3,"dish","deleteDish","statusChange","dishChange"],["referencesHelp",""],[1,"flex","items-center","mb-2"],[1,"me-1"],[1,"me-1","my-0"],o,["direction","right",3,"content"],[3,"dish"],a,[3,"dish","dishChanged"],l,["class","mb-3"],[3,"dish","dishChange"],["tuiButton","","type","button",3,"appearance","click"],g,$,I,S,[1,"mb-3",3,"translations","submittedChanges"],[3,"showLoader","size"]]},template:function(i,o){1&i&&e.yuY(0,_o,41,14,"div")(1,so,1,2),2&i&&e.C0Y(0,o.dish()?0:o.loading()?1:-1)},dependencies:[R.g,G.Sk,G.Cb,x.CI,x.Kw,v.qL,he,fe.O,Mt,yn,Li,Ui,Fi,ie.a,ie.i,no],changeDetection:0})}return t})(),lo=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=e.a4G({type:t});static#n=this.\u0275inj=e.s3X({imports:[p.qQ.forChild([(0,E.VV)(ao,{path:"",closeable:!0,dismissible:!1,size:"l"})])]})}return t})()},7307:(Y,M,s)=>{s.d(M,{_:()=>R});var p=s(6012),E=s(4824),e=s(4496);let R=(()=>{class c extends p.s{constructor(){super(E.o,"admin/menu/allergens")}static#e=this.\u0275fac=function(u){return new(u||c)};static#t=this.\u0275prov=e.wxM({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},8432:(Y,M,s)=>{s.d(M,{K:()=>R});var p=s(6012),E=s(532),e=s(4496);let R=(()=>{class c extends p.s{constructor(){super(E.e,"admin/menu/ingredients")}static#e=this.\u0275fac=function(u){return new(u||c)};static#t=this.\u0275prov=e.wxM({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},9116:(Y,M,s)=>{s.d(M,{w:()=>R});var p=s(6012),E=s(355),e=s(4496);let R=(()=>{class c extends p.s{constructor(){super(E.E,"admin/menu/tags")}static#e=this.\u0275fac=function(u){return new(u||c)};static#t=this.\u0275prov=e.wxM({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},832:(Y,M,s)=>{s.d(M,{I:()=>R,w:()=>e});var p=s(4496),E=s(3480);let e=(()=>{class c{constructor(m){this.tuiFocusVisibleChange=m}}return c.\u0275fac=function(m){return new(m||c)(p.GI1(E.MF))},c.\u0275dir=p.Sc5({type:c,selectors:[["","tuiFocusVisibleChange",""]],outputs:{tuiFocusVisibleChange:"tuiFocusVisibleChange"},features:[p.M5G([E.UF,E.MF])]}),c})(),R=(()=>{class c{}return c.\u0275fac=function(m){return new(m||c)},c.\u0275mod=p.a4G({type:c}),c.\u0275inj=p.s3X({}),c})()},1096:(Y,M,s)=>{s.d(M,{O:()=>D,h:()=>T});var p=s(4496),E=s(900),e=s(4164),R=s(3412),c=s(4704),C=s(5568),m=s(4e3),u=s(2644);let T=(()=>{class h{constructor({nativeElement:d},f){this.tuiFocusedChange=(0,R.U)((0,E.Ax)(d,"focusin"),(0,E.Ax)(d,"focusout")).pipe((0,c.k)(()=>(0,e.ER)(d)),(0,C.W)(!1),(0,m.a)(),(0,u.s)(1),(0,E.OA)(f))}}return h.\u0275fac=function(d){return new(d||h)(p.GI1(p.GMv),p.GI1(p.WW2))},h.\u0275dir=p.Sc5({type:h,selectors:[["","tuiFocusedChange",""]],outputs:{tuiFocusedChange:"tuiFocusedChange"}}),h})(),D=(()=>{class h{}return h.\u0275fac=function(d){return new(d||h)},h.\u0275mod=p.a4G({type:h}),h.\u0275inj=p.s3X({}),h})()},1632:(Y,M,s)=>{s.d(M,{k:()=>R,u:()=>c});var p=s(4496),E=s(900),e=s(4680);let R=(()=>{class C{constructor(u,T){this.el=u,this.takeOnlyTrustedEvents=T,this.tuiPressedChange=(0,E.Y7)(this.el.nativeElement,{onlyTrusted:this.takeOnlyTrustedEvents})}}return C.\u0275fac=function(u){return new(u||C)(p.GI1(p.GMv),p.GI1(e.mm))},C.\u0275dir=p.Sc5({type:C,selectors:[["","tuiPressedChange",""]],outputs:{tuiPressedChange:"tuiPressedChange"}}),C})(),c=(()=>{class C{}return C.\u0275fac=function(u){return new(u||C)},C.\u0275mod=p.a4G({type:C}),C.\u0275inj=p.s3X({}),C})()},4259:(Y,M,s)=>{s.d(M,{U9:()=>C,_k:()=>c});var p=s(4496),E=s(7232);class R{constructor(u){this.$implicit=u}}let c=(()=>{class m{constructor(T,D){this.viewContainer=T,this.templateRef=D}set tuiRepeatTimesOf(T){const D=Math.floor((0,E.K6)(T,0,65536)),{length:h}=this.viewContainer;T<h?this.removeContainers(h-T):this.addContainers(D)}addContainers(T){for(let D=this.viewContainer.length;D<T;D++)this.viewContainer.createEmbeddedView(this.templateRef,new R(D))}removeContainers(T){for(let D=0;D<T;D++)this.viewContainer.remove()}}return m.\u0275fac=function(T){return new(T||m)(p.GI1(p.y8U),p.GI1(p.Yw2))},m.\u0275dir=p.Sc5({type:m,selectors:[["","tuiRepeatTimes","","tuiRepeatTimesOf",""]],inputs:{tuiRepeatTimesOf:"tuiRepeatTimesOf"}}),m})(),C=(()=>{class m{}return m.\u0275fac=function(T){return new(T||m)},m.\u0275mod=p.a4G({type:m}),m.\u0275inj=p.s3X({}),m})()}}]);