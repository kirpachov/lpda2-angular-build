"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[2040],{2040:(G,c,o)=>{o.r(c),o.d(c,{EditPublicMessageModule:()=>k});var e=o(2100),S=o(7552),t=o(4496),p=o(6500),T=o(3480),I=o(3616),m=o(6684),d=o(7368),P=o(4704),f=o(9212),O=o(8824),_=o(6504),h=o(7048),$=o(4388),v=o(9938),L=o(8392),N=o(8256),l=o(9064),g=o(9956),n=o(8212),i=o(5488),u=o(5188),D=o(6052),y=o(9860),B=o(1480),z=o(1368),x=o(3724),b=o(7936),Y=o(4336);function F(a,A){1&a&&(t.OEk(0),t.wVc(1,"publicMessageKey")),2&a&&t.cNF(t.kDX(1,1,A.$implicit))}function K(a,A){if(1&a&&t.wR5(0,"tui-data-list-wrapper",20),2&a){const s=t.GaO(),r=t.Gew(9);t.E7m("itemContent",r)("items",s.keys)}}function W(a,A){1&a&&t.C_f(0)}const X=a=>({$implicit:a});function V(a,A){if(1&a&&(t.I0R(0,"div",5),t.OEk(1," Il testo verr\xe0 mostrato nella seguente posizione:"),t.wR5(2,"br"),t.I0R(3,"b"),t.yuY(4,W,1,0,"ng-container",21),t.C$Y()()),2&a){const s=t.GaO(),r=t.Gew(9);t.yG2(4),t.E7m("ngTemplateOutlet",r)("ngTemplateOutletContext",t.S45(2,X,s.form.value.key))}}let j=(()=>{class a{constructor(){this.service=(0,t.uUt)(p.o),this.destroy$=(0,t.uUt)(T.UF),this.route=(0,t.uUt)(e.gV),this.router=(0,t.uUt)(e.E5),this.notifications=(0,t.uUt)($.E),this.loading=(0,t.OCB)(!1),this.keys=[...y.EF],this.submitted=(0,t.OCB)(!1),this.form=new _.WC({key:new _.Ku(null,[_.AQ.required]),text:new _.Ku(null)}),this.e=this.errorsFor}ngOnInit(){this.form.get("key")?.valueChanges?.pipe((0,I.a)(this.destroy$),(0,m.I)(s=>(0,y.Qn)(s)),(0,d.G)(s=>this.service.show(s))).subscribe({next:s=>{this.form.patchValue({text:s.translations?.text})},error:s=>{console.warn(s)}}),this.route.params.pipe((0,I.a)(this.destroy$),(0,P.k)(s=>s.key),(0,m.I)(s=>(0,y.Qn)(s)),(0,f.y)(s=>this.form.patchValue({key:s})),(0,f.y)(()=>this.form.controls.key.disable())).subscribe((0,x.I)())}submit(){this.submitted.set(!0),!this.form.invalid&&(this.loading.set(!0),this.service.create(this.formVal()).pipe((0,I.a)(this.destroy$),(0,O.U)(()=>this.loading.set(!1))).subscribe({next:()=>{this.notifications.fireSnackBar("Saved")},error:s=>{s instanceof h.gj&&422==s.status?v.y.assignErrorsToForm(this.form,s):this.notifications.error(s instanceof h.gj?(0,N.mk)(s):L.a)}}))}cancel(){this.router.navigate(["../"],{relativeTo:this.route})}errorsFor(s){const r=this.form.get(s);return r&&(r.dirty||r.touched||this.submitted())?r.errors:null}formVal(){return{key:this.form.controls.key.value,text:this.form.value.text}}static#t=this.\u0275fac=function(r){return new(r||a)};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["app-edit-public-message"]],standalone:!0,features:[t.M5G([T.UF]),t.UHJ],decls:29,vars:8,consts:()=>{let s,r,E,C,U,R;return s="Set message",r="You can display personalized messages on public pages. For each position, you can put exactly one translated message in multiple languages.",E="Select the position of the text to display.",C="Translation",U="Confirm",R="Cancel",[[1,"flex","items-center"],s,[1,"text-slate-400"],r,[3,"formGroup","ngSubmit"],[1,"mb-3"],["keySelectContent",""],["tuiTextfieldSize","l",3,"formControlName","valueContent"],E,["tuiTextfield",""],[3,"itemContent","items",4,"tuiDataList"],["class","mb-3"],[3,"errors"],["formControlName","text"],C,[1,"flex"],["tuiButton","","type","submit","size","l",1,"me-2",3,"showLoader"],U,["tuiButton","","type","button","appearance","icon","size","l",3,"showLoader","click"],R,[3,"itemContent","items"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]]},template:function(r,E){if(1&r&&(t.I0R(0,"h1",0)(1,"span"),t.aS0(2,1),t.C$Y()(),t.I0R(3,"p",2),t.SAx(4),t.aS0(5,3),t.k70(),t.C$Y(),t.I0R(6,"form",4),t.qCj("ngSubmit",function(){return E.submit()}),t.I0R(7,"div",5),t.yuY(8,F,2,3,"ng-template",null,6,t.gJz),t.I0R(10,"tui-select",7),t.SAx(11),t.aS0(12,8),t.k70(),t.wR5(13,"input",9),t.yuY(14,K,1,2,"tui-data-list-wrapper",10),t.C$Y(),t.yuY(15,V,5,4,"div",11),t.wR5(16,"app-errors",12),t.C$Y(),t.I0R(17,"div",5)(18,"app-i18n-input",13),t.SAx(19),t.aS0(20,14),t.k70(),t.C$Y(),t.wR5(21,"app-errors",12),t.C$Y(),t.I0R(22,"div",15)(23,"button",16),t.SAx(24),t.aS0(25,17),t.k70(),t.C$Y(),t.I0R(26,"button",18),t.qCj("click",function(){return E.cancel()}),t.SAx(27),t.aS0(28,19),t.k70(),t.C$Y()()()),2&r){const C=t.Gew(9);t.yG2(6),t.E7m("formGroup",E.form),t.yG2(4),t.E7m("formControlName","key")("valueContent",C),t.yG2(5),t.C0Y(15,E.form.value.key?15:-1),t.yG2(),t.E7m("errors",E.e("text")),t.yG2(5),t.E7m("errors",E.e("text")),t.yG2(2),t.E7m("showLoader",E.loading()),t.yG2(3),t.E7m("showLoader",E.loading())}},dependencies:[_.sl,_.sz,_.ue,_.u,_.uW,_.Wo,l.w,g.g,n.CI,n.Kw,u.my,u.cP,u.uO,b.b,i.aS,i.rD,D.q8,D.OO,Y.Ux,B.s,z.XV],encapsulation:2,changeDetection:0})}return a})(),k=(()=>{class a{static#t=this.\u0275fac=function(r){return new(r||a)};static#e=this.\u0275mod=t.a4G({type:a});static#o=this.\u0275inj=t.s3X({imports:[e.qQ.forChild([(0,S.VV)(j,{path:"",closeable:!0,dismissible:!0,size:"m"})])]})}return a})()},9064:(G,c,o)=>{o.d(c,{w:()=>N});var e=o(4496),S=o(6504),t=o(3480),p=o(6700),T=o(3616),I=o(6684),m=o(3797),d=o(8588),P=o(1368),f=o(9956),O=o(1292);function _(l,g){if(1&l&&(e.I0R(0,"tui-textarea",2),e.OEk(1),e.C$Y()),2&l){const n=e.GaO().$implicit,i=e.GaO();e.E7m("formControl",n.control),e.yG2(),e.oRS(" ",i.getFullLang(n.lang)," ")}}function h(l,g){if(1&l&&(e.I0R(0,"tui-input",2),e.OEk(1),e.C$Y()),2&l){const n=e.GaO().$implicit,i=e.GaO();e.E7m("formControl",n.control),e.yG2(),e.oRS(" ",i.getFullLang(n.lang)," ")}}const $=l=>({"mb-3":l});function v(l,g){if(1&l&&(e.SAx(0),e.I0R(1,"div",1),e.yuY(2,_,2,2,"tui-textarea",2)(3,h,2,2),e.wR5(4,"app-errors",3),e.C$Y(),e.k70()),2&l){const n=g.$implicit,i=g.last,u=e.GaO();e.yG2(),e.E7m("ngClass",e.S45(3,$,!i)),e.yG2(),e.C0Y(2,u.long?2:3),e.yG2(2),e.E7m("errors",n.control.errors)}}const L=["*"];let N=(()=>{class l{constructor(){this.destroy$=new t.UF,this.long=!1,this.controls=(0,e.OCB)({}),this.controlsArr=(0,e.S6b)(()=>{const n=this.controls();return Object.keys(n).map(i=>({lang:i,control:n[i]}))}),this.touched$=new p.g(!1),this.value$=new p.g({})}ngAfterViewInit(){this.addLang("it"),this.addLang("en")}ngOnInit(){}registerOnChange(n){this.value$.pipe((0,T.a)(this.destroy$)).subscribe({next:i=>n(i)})}registerOnTouched(n){this.touched$.pipe((0,I.I)(i=>!0===i)).subscribe({next:()=>n()})}writeValue(n){this.patchValue(n??{}),this.touched$.next(!1)}wasTouched(){this.touched$.next(!0)}getFullLang(n){return O.S[n]??n}controlChanged(n){this.value$.next({...this.value$.value,[n]:this.controls()[n].value})}patchValue(n){Object.keys(n).forEach(i=>this.addLang(i)),Object.keys(this.controls()).forEach(i=>{this.controls()[i].patchValue(n[i]??null)})}addLang(n){if(this.controls()[n])return;const i=new S.Ku;i.valueChanges.subscribe({next:()=>this.controlChanged(n)}),this.controls.set({...this.controls(),[n]:i})}static#t=this.\u0275fac=function(i){return new(i||l)};static#e=this.\u0275cmp=e.In1({type:l,selectors:[["app-i18n-input"]],inputs:{long:"long"},standalone:!0,features:[e.M5G([{provide:S.Y6,useExisting:(0,e.wd)(()=>l),multi:!0},t.UF]),e.UHJ],ngContentSelectors:L,decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"ngClass"],[3,"formControl"],[3,"errors"]],template:function(i,u){1&i&&(e.kPM(),e._Xx(0),e.yuY(1,v,5,5,"ng-container",0)),2&i&&(e.yG2(),e.E7m("ngForOf",u.controlsArr()))},dependencies:[S.sl,S.ue,S.ug,m.CQ,m.Oo,m.cP,P.Iw,f.g,P.QF,d.Y3,d.wp,d.kd],changeDetection:0})}return l})()},1292:(G,c,o)=>{o.d(c,{S:()=>e});const e={it:"English",en:"English",es:"Spanish",fr:"French",de:"German",pt:"Portuguese",ru:"Russian",zh:"Chinese",ja:"Japanese",ar:"Arabic",hi:"Hindi",bn:"Bengali",pa:"Punjabi",ms:"Malay"}},8392:(G,c,o)=>{o.d(c,{a:()=>e});const e="Something went wrong."}}]);