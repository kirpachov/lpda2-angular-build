"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[5692],{9064:(f,M,t)=>{t.d(M,{w:()=>$});var e=t(4496),c=t(6504),d=t(3480),R=t(6700),_=t(3616),s=t(6684),i=t(3797),r=t(8588),m=t(1368),E=t(9956),S=t(1292);function N(g,C){if(1&g&&(e.I0R(0,"tui-textarea",2),e.OEk(1),e.C$Y()),2&g){const a=e.GaO().$implicit,u=e.GaO();e.E7m("formControl",a.control),e.yG2(),e.oRS(" ",u.getFullLang(a.lang)," ")}}function I(g,C){if(1&g&&(e.I0R(0,"tui-input",2),e.OEk(1),e.C$Y()),2&g){const a=e.GaO().$implicit,u=e.GaO();e.E7m("formControl",a.control),e.yG2(),e.oRS(" ",u.getFullLang(a.lang)," ")}}const y=g=>({"mb-3":g});function A(g,C){if(1&g&&(e.SAx(0),e.I0R(1,"div",1),e.yuY(2,N,2,2,"tui-textarea",2)(3,I,2,2),e.wR5(4,"app-errors",3),e.C$Y(),e.k70()),2&g){const a=C.$implicit,u=C.last,T=e.GaO();e.yG2(),e.E7m("ngClass",e.S45(3,y,!u)),e.yG2(),e.C0Y(2,T.long?2:3),e.yG2(2),e.E7m("errors",a.control.errors)}}const P=["*"];let $=(()=>{class g{constructor(){this.destroy$=new d.UF,this.long=!1,this.controls=(0,e.OCB)({}),this.controlsArr=(0,e.S6b)(()=>{const a=this.controls();return Object.keys(a).map(u=>({lang:u,control:a[u]}))}),this.touched$=new R.g(!1),this.value$=new R.g({})}ngAfterViewInit(){this.addLang("it"),this.addLang("en")}ngOnInit(){}registerOnChange(a){this.value$.pipe((0,_.a)(this.destroy$)).subscribe({next:u=>a(u)})}registerOnTouched(a){this.touched$.pipe((0,s.I)(u=>!0===u)).subscribe({next:()=>a()})}writeValue(a){this.patchValue(a??{}),this.touched$.next(!1)}wasTouched(){this.touched$.next(!0)}getFullLang(a){return S.S[a]??a}controlChanged(a){this.value$.next({...this.value$.value,[a]:this.controls()[a].value})}patchValue(a){Object.keys(a).forEach(u=>this.addLang(u)),Object.keys(this.controls()).forEach(u=>{this.controls()[u].patchValue(a[u]??null)})}addLang(a){if(this.controls()[a])return;const u=new c.Ku;u.valueChanges.subscribe({next:()=>this.controlChanged(a)}),this.controls.set({...this.controls(),[a]:u})}static#e=this.\u0275fac=function(u){return new(u||g)};static#t=this.\u0275cmp=e.In1({type:g,selectors:[["app-i18n-input"]],inputs:{long:"long"},standalone:!0,features:[e.M5G([{provide:c.Y6,useExisting:(0,e.wd)(()=>g),multi:!0},d.UF]),e.UHJ],ngContentSelectors:P,decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"ngClass"],[3,"formControl"],[3,"errors"]],template:function(u,T){1&u&&(e.kPM(),e._Xx(0),e.yuY(1,A,5,5,"ng-container",0)),2&u&&(e.yG2(),e.E7m("ngForOf",T.controlsArr()))},dependencies:[c.sl,c.ue,c.ug,i.CQ,i.Oo,i.cP,m.Iw,E.g,m.QF,r.Y3,r.wp,r.kd],changeDetection:0})}return g})()},2192:(f,M,t)=>{t.d(M,{c:()=>K});var e=t(4496),c=t(1128),d=t(3480),R=t(7692),_=t(8212),s=t(9064),i=t(6504),r=t(1560),m=t(964),E=t(6380),S=t(9956),N=t(1368),I=t(5136),y=t(2516),A=t(7556),P=t(6732),$=t(466),g=t(5193),C=t(1673),a=t(6528),u=t(3616),T=t(8824),F=t(4704),L=t(9144),b=t(2700);const x=(O,h)=>h.id;function V(O,h){if(1&O){const n=e.KQA();e.I0R(0,"div",7)(1,"tui-checkbox-block",8),e.qCj("ngModelChange",function(){e.usT(n);const o=e.GaO().$implicit,p=e.GaO(2);return e.CGJ(p.triggerSelection(o.id))}),e.OEk(2),e.C$Y()()}if(2&O){const n=e.GaO().$implicit,l=e.GaO(2);e.yG2(),e.E7m("readOnly",l.disabled())("ngModel",l.selections().includes(n.id)),e.yG2(),e.oRS(" ",n.name," ")}}function w(O,h){1&O&&e.yuY(0,V,3,3,"div",6),2&O&&e.C0Y(0,h.$implicit.id?0:-1)}function B(O,h){if(1&O&&(e.I0R(0,"tr",2)(1,"td",3)(2,"p",4),e.OEk(3),e.wVc(4,"weekday"),e.C$Y()(),e.I0R(5,"td",3)(6,"div",5),e.c53(7,w,1,1,null,null,x),e.C$Y()()()),2&O){const n=h.$implicit,l=e.GaO();e.yG2(3),e.cNF(e.kDX(4,1,n)),e.yG2(4),e.oho(l.turnsPerDay()[n])}}let z=(()=>{class O{constructor(){this.turnsService=(0,e.uUt)(A.K),this.destroy$=(0,e.uUt)(d.UF),this.date=(0,e.uUt)(N.y),this.selectionsChanges=new e._w7,this.loading=(0,e.OCB)(!1),this.selections=(0,e.OCB)([]),this.disabled=(0,e.OCB)(!1),this.allTurns=(0,e.OCB)([]),this.turnsPerDay=(0,e.S6b)(()=>{const n=this.allTurns().filter(o=>null!=o.weekday),l={};for(const o of n){if(null==o.weekday||null==o.weekday)throw new Error("Turns must have a weekday");l[o.weekday]||=[],l[o.weekday].push(o)}return l}),this.weekdays=(0,e.S6b)(()=>Object.keys(this.turnsPerDay()).map(Number))}ngOnInit(){this.searchTurns()}writeValue(n){Array.isArray(n)||(n=[n]),n=n.filter(o=>null!=o&&null!=o);const l=[];n.forEach(o=>{o instanceof I.e&&o.id?l.push(o.id):"number"==typeof o?l.push(o):"object"==typeof o&&null!=o&&Object.keys(o).includes("id")&&"number"==typeof o.id?l.push(o.id):console.warn("invalid object provided to SelectTurnsComponent",n)}),this.selections.set(l)}registerOnChange(n){this.selectionsChanges.subscribe(n)}registerOnTouched(n){this.selectionsChanges.subscribe(n)}setDisabledState(n){this.disabled.set(n)}triggerSelection(n){this.selections.update(l=>{const o=l.indexOf(n);return-1!=o?l.splice(o,1):l.push(n),l}),this.emitChanges()}searchTurns(){this.loading.set(!0),this.turnsService.search({per_page:1e3}).pipe((0,u.a)(this.destroy$),(0,T.U)(()=>this.loading.set(!1)),(0,F.k)(n=>n.items),(0,L.a)(n=>(console.error(n),(0,b.of)([])))).subscribe({next:n=>{this.allTurns.set(n)}})}emitChanges(){this.selectionsChanges.emit(this.allTurns().filter(n=>"number"==typeof n.id&&this.selections().includes(n.id)))}static#e=this.\u0275fac=function(l){return new(l||O)};static#t=this.\u0275cmp=e.In1({type:O,selectors:[["app-select-turns"]],outputs:{selectionsChanges:"selectionsChanges"},standalone:!0,features:[e.M5G([{provide:i.Y6,multi:!0,useExisting:(0,e.wd)(()=>O)},d.UF]),e.UHJ],decls:5,vars:2,consts:[["size","xl",3,"overlay","showLoader"],[1,"tui-table"],[1,"tui-table__tr","tui-table__tr_border_none"],[1,"tui-table__td"],[1,"text-xl"],[1,"flex","flex-col"],["class","flex flex-row items-center mb-5"],[1,"flex","flex-row","items-center","mb-5"],[1,"me-1",3,"readOnly","ngModel","ngModelChange"],["class","tui-table__tr tui-table__tr_border_none"]],template:function(l,o){1&l&&(e.I0R(0,"tui-loader",0)(1,"table",1)(2,"tbody"),e.c53(3,B,9,3,"tr",9,e.oxv),e.C$Y()()()),2&l&&(e.E7m("overlay",!0)("showLoader",o.loading()),e.yG2(3),e.oho(o.weekdays()))},dependencies:[y.G,a.i,a.I,i.y,i.ue,i._G,R.Sk,R.Cb,$.GE,g.ms,C.y,_.CI,P.kR],encapsulation:2,changeDetection:0})}return O})(),K=(()=>{class O{constructor(){this.notifications=(0,e.uUt)(c.E),this.onSubmit=new e._w7,this.onCancel=new e._w7,this.loading=!1,this.submitted=(0,e.OCB)(!1),this.form=new i.WC({from_date:new i.Ku(null),to_date:new i.Ku(null),message:new i.Ku(null),turns:new i.Ku([])})}set data(n){null!=n&&null!=n?this.form.patchValue({from_date:"string"==typeof n.from_date?(0,m.yc)(n.from_date):n.from_date,to_date:"string"==typeof n.to_date?(0,m.yc)(n.to_date):n.to_date,message:n.translations?.message||{},turns:n.turns}):this.form.reset()}submitForm(){this.submitted.set(!0),!this.form.invalid&&this.onSubmit.emit(this.formatOutput())}cancelForm(){this.onCancel.emit()}formatOutput(){if(this.form.invalid)throw new Error("Form is invalid");return{from_date:this.form.value.from_date||null,to_date:this.form.value.to_date||null,translations:this.form.value.message||{},turns:this.form.value.turns??[]}}static#e=this.\u0275fac=function(l){return new(l||O)};static#t=this.\u0275cmp=e.In1({type:O,selectors:[["app-reservation-turn-message-form"]],inputs:{loading:"loading",data:"data"},outputs:{onSubmit:"onSubmit",onCancel:"onCancel"},standalone:!0,features:[e.M5G([d.UF]),e.UHJ],decls:32,vars:9,consts:()=>{let n,l,o,p,G,D,U;return n="Message to display",l="Visible from the day",o="visible until the day",p="\n           The first and last day in question are both included. So, if you want\n          to display a message for just one day, select the same day in both\n          fields. \n        ",G="For which shifts to show the message?",D="Confirm",U="Cancel",[[1,"block","mb-3",3,"formGroup","ngSubmit"],[1,"block","mb-3"],[3,"formControl"],n,[3,"errors"],[1,"block","mb-1"],[1,"flex","items-center"],[1,"grow","me-1"],l,[1,"grow","ms-1"],o,[1,"block","mb-3","text-slate-400"],p,[1,"text-2xl"],G,["tuiButton","","type","submit",1,"inline-block"],D,["tuiButton","","type","button","appearance","icon",1,"inline-block",3,"click"],U]},template:function(l,o){1&l&&(e.I0R(0,"form",0),e.qCj("ngSubmit",function(){return o.submitForm()}),e.I0R(1,"div",1)(2,"app-i18n-input",2),e.SAx(3),e.aS0(4,3),e.k70(),e.C$Y(),e.wR5(5,"app-errors",4),e.C$Y(),e.I0R(6,"div",5)(7,"div",6)(8,"div",7)(9,"tui-input-date",2),e.SAx(10),e.aS0(11,8),e.k70(),e.C$Y(),e.wR5(12,"app-errors",4),e.C$Y(),e.I0R(13,"div",9)(14,"tui-input-date",2),e.SAx(15),e.aS0(16,10),e.k70(),e.C$Y(),e.wR5(17,"app-errors",4),e.C$Y()()(),e.I0R(18,"span",11),e.aS0(19,12),e.C$Y(),e.I0R(20,"div",1)(21,"h3",13),e.aS0(22,14),e.C$Y(),e.wR5(23,"app-select-turns",2)(24,"app-errors",4),e.C$Y(),e.I0R(25,"div",1)(26,"button",15),e.SAx(27),e.aS0(28,16),e.k70(),e.C$Y(),e.I0R(29,"button",17),e.qCj("click",function(){return o.cancelForm()}),e.SAx(30),e.aS0(31,18),e.k70(),e.C$Y()()()),2&l&&(e.E7m("formGroup",o.form),e.yG2(2),e.E7m("formControl",o.form.controls.message),e.yG2(3),e.E7m("errors",o.form.controls.message.errors),e.yG2(4),e.E7m("formControl",o.form.controls.from_date),e.yG2(3),e.E7m("errors",o.form.controls.from_date.errors),e.yG2(2),e.E7m("formControl",o.form.controls.to_date),e.yG2(3),e.E7m("errors",o.form.controls.to_date.errors),e.yG2(6),e.E7m("formControl",o.form.controls.turns),e.yG2(),e.E7m("errors",o.form.controls.turns.errors))},dependencies:[R.Sk,s.w,i.y,i.sz,i.ue,i.u,r.oB,_.CI,_.Kw,i.sl,i.ug,i.uW,E.iO,E.yc,E.Ml,S.g,z],encapsulation:2,changeDetection:0})}return O})()},1292:(f,M,t)=>{t.d(M,{S:()=>e});const e={it:"Italian",en:"English",es:"Spanish",fr:"French",de:"German",pt:"Portuguese",ru:"Russian",zh:"Chinese",ja:"Japanese",ar:"Arabic",hi:"Hindi",bn:"Bengali",pa:"Punjabi",ms:"Malaysian"}},1960:(f,M,t)=>{t.d(M,{u:()=>R});var e=t(8400),c=t(5136);class d extends e.w{constructor(s){super(s),this.date=s.date?new Date(s.date):void 0,this.reservation_turn_id=s.reservation_turn_id,this.group_id=s.group_id,this.reservation_turn=s.reservation_turn?new c.e(s.reservation_turn):void 0}}class R extends e.w{constructor(s){super(s),this.turns=[],this.dates=[],this.title=s.title,this.status=s.status,this.preorder_type=s.preorder_type,this.payment_value=s.payment_value,this.message=s.message,this.turns=(s.turns||[]).map(i=>new c.e(i)),this.dates=(s.dates||[]).map(i=>new d(i)),this.translations=s.translations||{}}}},5136:(f,M,t)=>{t.d(M,{e:()=>R});var e=t(8400),c=t(9772),d=t(1960);class R extends e.w{constructor(s){super(s),this.messages=[],this.name=s.name,this.weekday=s.weekday,this.step=s.step,this.valid_times=s.valid_times,this.starts_at=s.starts_at?(0,c.CU)(s.starts_at):void 0,this.ends_at=s.ends_at?(0,c.CU)(s.ends_at):void 0,this.preorder_reservation_group=s.preorder_reservation_group?new d.u(s.preorder_reservation_group):void 0,this.messages=s.messages}}},2516:(f,M,t)=>{t.d(M,{G:()=>c});var e=t(4496);let c=(()=>{class d{constructor(){this.weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}transform(_){return"number"!=typeof _&&"string"==typeof _&&(_=parseInt(_)),"number"==typeof _&&_>=0&&_<=6?this.weekdays[_]:null}static#e=this.\u0275fac=function(s){return new(s||d)};static#t=this.\u0275pipe=e.UTH({name:"weekday",type:d,pure:!0,standalone:!0})}return d})()},1260:(f,M,t)=>{t.d(M,{U:()=>s});var e=t(6012),c=t(8400),d=t(5136);class R extends c.w{constructor(r){super(r),this.message=r.message,this.from_date=r.from_date,this.to_date=r.to_date,this.translations=r.translations,this.turns=r.turns?r.turns.map(m=>new d.e(m)):[]}}var _=t(4496);let s=(()=>{class i extends e.s{constructor(){super(R,"admin/reservation_turn_messages")}create(m){return super.create(m)}update(m,E){return super.update(m,E)}static#e=this.\u0275fac=function(E){return new(E||i)};static#t=this.\u0275prov=_.wxM({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},7556:(f,M,t)=>{t.d(M,{K:()=>R});var e=t(6012),c=t(5136),d=t(4496);let R=(()=>{class _ extends e.s{constructor(){super(c.e,"admin/reservation_turns")}static#e=this.\u0275fac=function(r){return new(r||_)};static#t=this.\u0275prov=d.wxM({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},1200:(f,M,t)=>{t.d(M,{A:()=>s,m:()=>i});var e=t(4496),c=t(900),d=t(3480),R=t(800),_=t(3616);let s=(()=>{class r{constructor(E,S,N){this.el=E,this.zone=S,this.destroy$=N,this.eventName=""}ngOnInit(){(0,R.w)(this.el.nativeElement,this.eventName,{passive:!1}).pipe((0,c.Uv)(this.zone),(0,c.uy)(),(0,_.a)(this.destroy$)).subscribe()}}return r.\u0275fac=function(E){return new(E||r)(e.GI1(e.GMv),e.GI1(e.WW2),e.GI1(d.UF,2))},r.\u0275dir=e.Sc5({type:r,selectors:[["","tuiPreventDefault",""]],inputs:{eventName:[e.Wk5.None,"tuiPreventDefault","eventName"]},features:[e.M5G([d.UF])]}),r})(),i=(()=>{class r{}return r.\u0275fac=function(E){return new(E||r)},r.\u0275mod=e.a4G({type:r}),r.\u0275inj=e.s3X({}),r})()},6988:(f,M,t)=>{t.d(M,{E:()=>s,Q:()=>i});var e=t(4496),c=t(3480),d=t(3840),R=t(3120),_=t(3616);let s=(()=>{class r{constructor(E,S){this.el=E,this.destroy$=S}set tuiScrollIntoView(E){E&&(0,R.k)(0).pipe((0,_.a)(this.destroy$)).subscribe(()=>{this.el.nativeElement.dispatchEvent(new CustomEvent(d.dG,{bubbles:!0,detail:this.el.nativeElement}))})}}return r.\u0275fac=function(E){return new(E||r)(e.GI1(e.GMv),e.GI1(c.UF,2))},r.\u0275dir=e.Sc5({type:r,selectors:[["","tuiScrollIntoView",""]],inputs:{tuiScrollIntoView:"tuiScrollIntoView"},features:[e.M5G([c.UF])]}),r})(),i=(()=>{class r{}return r.\u0275fac=function(E){return new(E||r)},r.\u0275mod=e.a4G({type:r}),r.\u0275inj=e.s3X({}),r})()}}]);