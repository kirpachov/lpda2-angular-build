"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[9116],{1524:(L,y,r)=>{r.d(y,{s:()=>sn});var t=r(4496),f=r(8212),P=r(1512),l=r(1316),u=r(6504),O=r(9852),C=r(4392),m=r(900),g=r(2528),T=r(8987),c=r(4164),p=r(3480),F=r(9392),k=r(3656),G=r(5944),Y=r(696),z=r(528),H=r(1192),M=r(3616),d=r(6684),h=r(1368);function I(n,i){1&n&&t.C_f(0)}const A=["*"],ut=["tuiStep",""];function Kt(n,i){if(1&n&&t.wR5(0,"tui-svg",4),2&n){const e=t.GaO();t.E7m("src",e.icon)}}let Et=(()=>{class n{constructor(e,o,s,a,_,E){this.cdr=e,this.el=o,this.scrollService=s,this.duration=_,this.destroy$=E,this.steps=C.Jh,this.orientation="horizontal",this.activeItemIndexChange=new t._w7,this.activeItemIndex=0,a.subscribe(()=>this.scrollIntoView(this.activeItemIndex))}set activeIndex(e){this.activeItemIndex=e,this.scrollIntoView(e)}get changes$(){return(0,m.jv)(this.steps).pipe((0,H.o)(0))}onHorizontal(e,o){"horizontal"!==this.orientation||!e.target||(e.preventDefault(),this.moveFocus(e.target,o))}onVertical(e,o){"vertical"!==this.orientation||!e.target||(e.preventDefault(),this.moveFocus(e.target,o))}indexOf(e){return(0,g.SQ)(this.steps).findIndex(({nativeElement:o})=>o===e)}isActive(e){return e===this.activeItemIndex}activate(e){this.activeItemIndex!==e&&(this.activeItemIndex=e,this.activeItemIndexChange.emit(e),this.cdr.markForCheck(),this.scrollIntoView(e))}getNativeElements(e){return e.map(({nativeElement:o})=>o)}moveFocus(e,o){if(!(0,T.CK)(e))return;const s=this.getNativeElements(this.steps),a=s.findIndex(_=>_===e);(0,c.uO)(a,s,o)}scrollIntoView(e){const o=this.getNativeElements(this.steps)[e];if(!o)return;const{nativeElement:s}=this.el,{clientHeight:a,clientWidth:_,offsetTop:E,offsetLeft:R}=s,{offsetHeight:N,offsetWidth:$,offsetTop:it,offsetLeft:st}=o,at=st-R-_/2+$/2;this.scrollService.scroll$(s,Math.max(0,it-E-a/2+N/2),Math.max(0,at),this.duration/3).pipe((0,M.a)(this.destroy$)).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(t.kD9),t.GI1(t.GMv),t.GI1(p.IL),t.GI1(p.I$),t.GI1(G._u),t.GI1(p.UF,2))},n.\u0275cmp=t.In1({type:n,selectors:[["tui-stepper"],["nav","tuiStepper",""]],contentQueries:function(e,o,s){if(1&e&&t.szK(s,Ot,4,t.GMv),2&e){let a;t.wto(a=t.Gqi())&&(o.steps=a)}},hostVars:1,hostBindings:function(e,o){1&e&&t.qCj("keydown.arrowRight",function(a){return o.onHorizontal(a,1)})("keydown.arrowLeft",function(a){return o.onHorizontal(a,-1)})("keydown.arrowDown",function(a){return o.onVertical(a,1)})("keydown.arrowUp",function(a){return o.onVertical(a,-1)}),2&e&&t.e48("data-orientation",o.orientation)},inputs:{orientation:"orientation",activeIndex:[t.Wk5.None,"activeItemIndex","activeIndex"]},outputs:{activeItemIndexChange:"activeItemIndexChange"},features:[t.M5G([p.I$,p.UF])],ngContentSelectors:A,decls:3,vars:3,consts:[[4,"ngIf"]],template:function(e,o){1&e&&(t.kPM(),t.yuY(0,I,1,0,"ng-container",0),t.wVc(1,"async"),t._Xx(2)),2&e&&t.E7m("ngIf",t.kDX(1,1,o.changes$))},dependencies:[h.u_,h.a],styles:["[_nghost-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;scroll-behavior:smooth;display:flex;overflow:auto;counter-reset:steps}[_nghost-%COMP%]::-webkit-scrollbar, [_nghost-%COMP%]::-webkit-scrollbar-thumb{display:none}tui-root._reduced-motion   [_nghost-%COMP%]{scroll-behavior:auto}[data-orientation=vertical][_nghost-%COMP%]{flex-direction:column}"],changeDetection:0}),(0,l.UN)([F.w7],n.prototype,"changes$",null),(0,l.UN)([F.w7],n.prototype,"getNativeElements",null),n})(),Ot=(()=>{class n{constructor(e,o,s,a,_){this.stepper=s,this.el=a,this.icons=_,this.stepState="normal",this.icon="",this.focusVisible=!1,o.pipe((0,d.I)(z.Z)).subscribe(()=>{this.activate()}),e.subscribe(E=>{this.focusVisible=E})}get isActive(){return this.stepper.isActive(this.index)}get isVertical(){return"vertical"===this.stepper.orientation}get tabIndex(){return this.isActive?0:-1}get index(){return this.stepper.indexOf(this.el.nativeElement)}activate(){this.stepper.activate(this.index)}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(p.MF),t.GI1(Y.oj),t.GI1(Et),t.GI1(t.GMv),t.GI1(G.QJ))},n.\u0275cmp=t.In1({type:n,selectors:[["button","tuiStep",""],["a","tuiStep","",3,"routerLink",""],["a","tuiStep","","routerLink","","routerLinkActive",""]],hostAttrs:["type","button"],hostVars:8,hostBindings:function(e,o){1&e&&t.qCj("click",function(){return o.activate()}),2&e&&(t.SoX("tabIndex",o.tabIndex),t.e48("data-state",o.stepState),t.eAK("_focus-visible",o.focusVisible)("_active",o.isActive)("_vertical",o.isVertical))},inputs:{stepState:"stepState",icon:"icon"},features:[t.M5G([p.UF,Y.oj,p.MF])],attrs:ut,ngContentSelectors:A,decls:5,vars:3,consts:[["class","t-marker t-marker_custom",3,"src",4,"ngIf"],[1,"t-marker","t-marker_error",3,"src"],[1,"t-marker","t-marker_pass",3,"src"],[1,"t-marker","t-marker_index"],[1,"t-marker","t-marker_custom",3,"src"]],template:function(e,o){1&e&&(t.kPM(),t.yuY(0,Kt,1,1,"tui-svg",0),t.wR5(1,"tui-svg",1)(2,"tui-svg",2)(3,"div",3),t._Xx(4)),2&e&&(t.E7m("ngIf",o.icon),t.yG2(),t.E7m("src",o.icons.error),t.yG2(),t.E7m("src",o.icons.check))},dependencies:[k.Wu,h.u_],styles:['[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;text-decoration:none;position:relative;display:flex;align-items:center;flex-shrink:0;color:var(--tui-link);margin-right:1.5rem;outline:none;cursor:pointer;counter-increment:steps}[_nghost-%COMP%]:disabled{pointer-events:none;color:var(--tui-base-07)}[_nghost-%COMP%]:hover{color:var(--tui-link-hover)}[_nghost-%COMP%]:not(:last-of-type)._vertical{margin-bottom:1.25rem}._active[_nghost-%COMP%], ._active[_nghost-%COMP%]:hover{color:var(--tui-text-01);cursor:default}._focus-visible[_nghost-%COMP%]:before{content:"";position:absolute;left:2.75rem;right:0;top:50%;height:1.5rem;margin-top:-.75rem;background:var(--tui-selection)}.t-marker[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;display:flex;width:2rem;height:2rem;border-radius:100%;margin-right:.75rem;flex-shrink:0;align-items:center;justify-content:center;background:var(--tui-secondary);color:var(--tui-link)}[_nghost-%COMP%]:disabled   .t-marker[_ngcontent-%COMP%]{background:var(--tui-base-03);color:var(--tui-base-07)}.t-marker_index[_ngcontent-%COMP%]:before{content:counter(steps)}[_nghost-%COMP%]:hover   .t-marker_index[_ngcontent-%COMP%]{color:var(--tui-link-hover);background:var(--tui-secondary-hover)}._active[_nghost-%COMP%]   .t-marker_index[_ngcontent-%COMP%]{color:var(--tui-primary-text);background:var(--tui-primary)}[_nghost-%COMP%]:not([data-state="normal"]):not(._active)   .t-marker_index[_ngcontent-%COMP%], [_nghost-%COMP%]:not(._active)   .t-marker_custom[_ngcontent-%COMP%] ~ .t-marker_index[_ngcontent-%COMP%]{display:none}.t-marker_error[_ngcontent-%COMP%]{background:var(--tui-error-bg);color:var(--tui-error-fill)}[_nghost-%COMP%]:hover   .t-marker_error[_ngcontent-%COMP%]{background:var(--tui-error-bg-hover);color:var(--tui-error-fill)}[_nghost-%COMP%]:not([data-state="error"])   .t-marker_error[_ngcontent-%COMP%], ._active[_nghost-%COMP%]   .t-marker_error[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:not([data-state="pass"])   .t-marker_pass[_ngcontent-%COMP%], ._active[_nghost-%COMP%]   .t-marker_pass[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:not([data-state="normal"])   .t-marker_custom[_ngcontent-%COMP%], ._active[_nghost-%COMP%]   .t-marker_custom[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:hover   .t-marker_custom[_ngcontent-%COMP%]{color:var(--tui-link-hover);background:var(--tui-secondary-hover)}'],changeDetection:0}),n})(),Xt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.a4G({type:n}),n.\u0275inj=t.s3X({imports:[[h.MD,k.Yt]]}),n})();var lt=r(668),ct=r(3797),K=r(3044),vt=r(9104),X=r(1800),Tt=r(4680),Qt=r(6732),V=r(466),x=r(7936),Q=r(4336),It=r(8976),Mt=r(5656),S=r(8048),Rt=r(4108),W=r(2500),j=r(3840),b=r(1343),Pt=r(7176),B=r(4532),yt=r(6572),Wt=r(9371),St=r(796),Nt=r(5900),xt=r(5620);const jt=["*",[["input"]]],Jt=["*","input"],Ft=(0,g.AL)({phoneMaskAfterCountryCode:"### ###-##-##",allowText:!1,countryCode:"+7"}),Gt=n=>n.replace(/\D/g,"").length;function Zt(n,i){const e=(n+i).replace(/[^#\d]+/g,"").length,o=s=>s.replace("+7"===n?/^(\+?7?\s?8?)\s?/:new RegExp(`^(\\+?${n.replace("+","")}?)\\s?`),"");return({elementState:s,data:a})=>{const{value:_,selection:E}=s;return{elementState:{selection:E,value:Gt(_)>e?o(_):_},data:Gt(a)>=e?o(a):a}}}function J(n){return Number.isNaN(parseInt(n.replace(j.mM,""),10))}let bt=(()=>{class n extends X._y{constructor(e,o,s,a,_){super(e,o),this.textfieldCleaner=s,this.options=a,this.textfieldSize=_,this.phoneMaskAfterCountryCode=this.options.phoneMaskAfterCountryCode,this.allowText=this.options.allowText,this.search="",this.searchChange=new t._w7,this.countryCode=this.options.countryCode,this.open=!1}set countryCodeSetter(e){const o=this.countryCode;this.countryCode=e,this.updateValueWithNewCountryCode(o,e)}get size(){return this.textfieldSize.size}get nativeFocusableElement(){return!this.textfield||this.computedDisabled?null:this.textfield.nativeFocusableElement}get focused(){return(0,c.ER)(this.nativeFocusableElement)||!!this.dropdown&&this.dropdown.focused}get nativeValue(){var e;return(null===(e=this.nativeFocusableElement)||void 0===e?void 0:e.value)||(0,B.qq)(this.value,this.maskOptions)}set nativeValue(e){this.nativeFocusableElement&&(this.nativeFocusableElement.value=e)}get inputMode(){return this.allowText?"text":"numeric"}get canOpen(){return this.interactive&&!!this.datalist}get canClean(){return this.nativeValue!==this.nonRemovablePrefix&&this.textfieldCleaner.cleaner}get maskOptions(){return this.calculateMask(this.countryCode,this.phoneMaskAfterCountryCode,this.nonRemovablePrefix,this.allowText)}onActiveZone(e){return this.updateFocused(e),!e||this.nativeValue||this.readOnly||this.allowText?this.nativeValue===this.nonRemovablePrefix||this.isTextValue?(this.updateSearch(""),void(this.nativeValue="")):void(!e&&!this.allowText&&this.nativeFocusableElement&&(this.nativeValue=this.nativeValue.replace(/\D$/,""))):(this.updateSearch(this.nonRemovablePrefix),void(this.nativeValue=this.nonRemovablePrefix))}onValueChange(e){const o=J(e)?e:e.replace(j.mM,"").slice(0,this.maxPhoneLength);this.updateSearch(o),this.value=o===this.countryCode||J(o)?"":o,this.open=!0,!this.value&&!this.allowText&&(this.nativeValue=this.nonRemovablePrefix)}handleOption(e){this.focusInput(),this.value=e,this.nativeValue=(0,B.qq)(this.value,this.maskOptions),this.updateSearch(""),this.open=!1}setDisabledState(){super.setDisabledState(),this.open=!1}writeValue(e){super.writeValue(e),this.nativeValue=(0,B.qq)(e||"",this.maskOptions),this.updateSearch("")}getFallbackValue(){return""}get nonRemovablePrefix(){return`${this.countryCode} `}get maxPhoneLength(){return this.countryCode.length+this.phoneMaskAfterCountryCode.replace(/[^#]+/g,"").length}get isTextValue(){return!!this.search&&J(this.search)}calculateMask(e,o,s,a){const _=function qt(n,i){return[...n.split("")," ",...i.replace(/[^#\- ()]+/g,"").split("").map(e=>"#"===e?/\d/:e)]}(e,o),E=[Zt(e,o)];return a?{mask:({value:R})=>J(R)&&"+"!==R?B.Se.mask:_,preprocessors:E}:{mask:_,preprocessors:E,postprocessors:[(0,yt.G)(s)],plugins:[(0,yt.yu)((R,[N,$])=>[N===$?s.length:0,R.length])]}}focusInput(){this.nativeFocusableElement&&this.nativeFocusableElement.focus({preventScroll:!0})}updateSearch(e){this.search!==e&&(this.search=e,this.searchChange.emit(e))}updateValueWithNewCountryCode(e,o){this.isTextValue||(this.value=this.value.replace(e,o),this.nativeValue=(0,B.qq)(this.value,this.maskOptions))}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(u.eq,10),t.GI1(t.kD9),t.GI1(S.CU),t.GI1(Ft),t.GI1(S.$K))},n.\u0275cmp=t.In1({type:n,selectors:[["tui-input-phone"]],contentQueries:function(e,o,s){if(1&e&&t.szK(s,Q.Ux,5,t.Yw2),2&e){let a;t.wto(a=t.Gqi())&&(o.datalist=a.first)}},viewQuery:function(e,o){if(1&e&&(t.CC$(V.Qw,5),t.CC$(x.y_,5)),2&e){let s;t.wto(s=t.Gqi())&&(o.dropdown=s.first),t.wto(s=t.Gqi())&&(o.textfield=s.first)}},hostVars:1,hostBindings:function(e,o){2&e&&t.e48("data-size",o.size)},inputs:{countryCodeSetter:[t.Wk5.None,"countryCode","countryCodeSetter"],phoneMaskAfterCountryCode:"phoneMaskAfterCountryCode",allowText:"allowText",search:"search"},outputs:{searchChange:"searchChange"},features:[t.M5G([(0,Tt.NK)(n),(0,X.q4)(n),(0,G.UH)(n)],[St.YL]),t.eg9],ngContentSelectors:Jt,decls:4,vars:13,consts:[[1,"t-hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["tuiValueAccessor","",1,"t-textfield",3,"disabled","focusable","invalid","maskito","nativeId","pseudoFocus","pseudoHover","readOnly","tuiTextfieldCleaner","value","valueChange"]],template:function(e,o){1&e&&(t.kPM(jt),t.I0R(0,"tui-hosted-dropdown",0),t.iHE("openChange",function(a){return t.kNx(o.open,a)||(o.open=a),a}),t.qCj("tuiActiveZoneChange",function(a){return o.onActiveZone(a)}),t.I0R(1,"tui-primitive-textfield",1),t.iHE("valueChange",function(a){return t.kNx(o.nativeValue,a)||(o.nativeValue=a),a}),t.qCj("valueChange",function(a){return o.onValueChange(a)}),t._Xx(2),t._Xx(3,1,["ngProjectAs","input",5,["input"]]),t.C$Y()()),2&e&&(t.E7m("canOpen",o.canOpen)("content",o.datalist||""),t.OKB("open",o.open),t.yG2(),t.E7m("disabled",o.computedDisabled)("focusable",o.focusable)("invalid",o.computedInvalid)("maskito",o.maskOptions)("nativeId",o.nativeId)("pseudoFocus",o.computedFocused)("pseudoHover",o.pseudoHover)("readOnly",o.readOnly)("tuiTextfieldCleaner",o.canClean),t.OKB("value",o.nativeValue))},dependencies:[V.Qw,x.y_,K.M,x.KQ,Nt.a,xt.sD,S.es],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}"],changeDetection:0}),(0,l.UN)([F.w7],n.prototype,"calculateMask",null),n})(),te=(()=>{class n extends Wt.Cm{get value(){return this.host.nativeValue}onValueChange(e){this.host.onValueChange(e)}process(e){this.input=e}ngDoCheck(){this.input&&(this.input.type="tel",this.input.inputMode=this.host.inputMode)}}return n.\u0275fac=(()=>{let i;return function(o){return(i||(i=t.otF(n)))(o||n)}})(),n.\u0275dir=t.Sc5({type:n,selectors:[["tui-input-phone"]],features:[t.M5G([(0,G.iu)(n)]),t.eg9]}),n})(),ee=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.a4G({type:n}),n.\u0275inj=t.s3X({imports:[[xt.S,x.KA,V.GE,S.aS,K.L,Nt.i]]}),n})();var _t=r(3012),ne=r(812);function Z(n,i){return n[i].replace(/[()\- ]/g,"").length}function q(n,i){return n[i].replace(ne.mU,"")}function $t(n){const i=Number(n.slice(1,4));return i<600||i>799}let Ut=(()=>{class n{constructor(e){this.countriesMasks=e}transform(e,o){return o.find(s=>{if(s===b.q.RU&&/^[78]/.test(e)&&/^(?!880[1-9 ])/.test(e)&&e.length+1===Z(this.countriesMasks,b.q.RU)||e.startsWith(q(this.countriesMasks,s).replace(C.qs,""))&&e.length+1===Z(this.countriesMasks,s))switch(s){case b.q.RU:return $t(e);case b.q.KZ:return!$t(e);default:return!0}return!1})}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(_t.gu,16))},n.\u0275pipe=t.UTH({name:"tuiToCountryCode",type:n,pure:!0}),n})();var Dt=r(1040);function oe(n,i){if(1&n){const e=t.KQA();t.I0R(0,"button",10),t.qCj("click",function(){const a=t.usT(e).$implicit,_=t.GaO(3);return t.CGJ(_.onItemClick(a))}),t.wR5(1,"img",11),t.wVc(2,"tuiFlag"),t.I0R(3,"span",12),t.OEk(4),t.C$Y(),t.I0R(5,"span",13),t.OEk(6),t.wVc(7,"tuiMapper"),t.C$Y()()}if(2&n){const e=i.$implicit,o=t.GaO(2).ngIf,s=t.GaO();t.yG2(),t.E7m("src",t.kDX(2,3,e),t.K6U),t.yG2(3),t.oRS(" ",o[e]," "),t.yG2(2),t.oRS(" ",t.g7$(7,5,e,s.isoToCountryCodeMapper)," ")}}function ie(n,i){if(1&n&&(t.I0R(0,"tui-data-list"),t.yuY(1,oe,8,8,"button",9),t.C$Y()),2&n){const e=t.GaO(2);t.yG2(),t.E7m("ngForOf",e.countries)}}function se(n,i){if(1&n&&(t.wR5(0,"img",14),t.wVc(1,"tuiFlag")),2&n){const e=t.GaO().ngIf,o=t.GaO();t.E7m("alt",e[o.countryIsoCode])("src",t.kDX(1,2,o.countryIsoCode),t.K6U)}}function re(n,i){1&n&&t.C_f(0)}function ae(n,i){if(1&n&&(t.I0R(0,"div",15),t.yuY(1,re,1,0,"ng-container",16),t.C$Y()),2&n){const e=t.GaO(2);t.yG2(),t.E7m("polymorpheusOutlet",e.arrow)}}function ue(n,i){if(1&n){const e=t.KQA();t.I0R(0,"tui-hosted-dropdown",1),t.iHE("openChange",function(s){t.usT(e);const a=t.GaO();return t.kNx(a.open,s)||(a.open=s),t.CGJ(s)}),t.qCj("tuiActiveZoneChange",function(s){t.usT(e);const a=t.GaO();return t.CGJ(a.onActiveZone(s))}),t.I0R(1,"div",2),t.wR5(2,"tui-primitive-textfield",3),t.I0R(3,"tui-input-phone",4),t.iHE("ngModelChange",function(s){t.usT(e);const a=t.GaO();return t.kNx(a.value,s)||(a.value=s),t.CGJ(s)}),t._Xx(4),t.wR5(5,"input",5),t.C$Y()(),t.yuY(6,ie,2,1,"ng-template",null,6,t.gJz)(8,se,2,4,"ng-template",null,7,t.gJz)(10,ae,2,1,"ng-template",null,8,t.gJz),t.C$Y()}if(2&n){const e=t.Gew(7),o=t.Gew(9),s=t.Gew(11),a=t.GaO();t.E7m("canOpen",!a.readOnly)("content",e),t.OKB("open",a.open),t.yG2(2),t.E7m("disabled",a.disabled)("editable",!1)("focusable",a.focusable)("pseudoFocus",a.open||null)("readOnly",a.readOnly)("tuiTextfieldCustomContent",o)("tuiTextfieldIcon",s)("tuiTextfieldLabelOutside",!0),t.yG2(),t.E7m("countryCode",a.inputPhoneCountryCode)("disabled",a.disabled)("focusable",a.focusable)("phoneMaskAfterCountryCode",a.phoneMaskAfterCountryCode)("pseudoFocus",a.pseudoFocus)("pseudoHover",a.pseudoHover)("pseudoInvalid",a.computedInvalid)("readOnly",a.readOnly),t.OKB("ngModel",a.value)}}const le=["*"],Lt=(0,g.AL)({countries:[],countryIsoCode:b.q.RU});let _e=(()=>{class n extends X._y{constructor(e,o,s,a,_,E,R,N){super(e,o),this.countriesNames$=s,this.countriesMasks=a,this.options=_,this.flagPipe=E,this.extractCountryCodePipe=R,this.textfieldSize=N,this.countries=this.options.countries,this.countryIsoCodeChange=new t._w7,this.countryIsoCode=this.options.countryIsoCode,this.open=!1,this.arrow=Pt.ie,this.isoToCountryCodeMapper=$=>q(this.countriesMasks,$)}set isoCode(e){var o;this.countryIsoCode!==e&&(null===(o=this.inputPhoneComponent)||void 0===o||o.writeValue(this.value),this.countryIsoCode=e)}get size(){return this.textfieldSize.size}get nativeFocusableElement(){return this.inputPhoneComponent&&!this.computedDisabled?this.inputPhoneComponent.nativeFocusableElement:null}get focused(){return!!this.primitiveTextfield&&this.primitiveTextfield.focused||!!this.inputPhoneComponent&&this.inputPhoneComponent.focused}get inputPhoneCountryCode(){return q(this.countriesMasks,this.countryIsoCode)}get phoneMaskAfterCountryCode(){return this.calculateMaskAfterCountryCode(this.countriesMasks[this.countryIsoCode],this.inputPhoneCountryCode)}get countryFlagPath(){return this.getFlagPath(this.countryIsoCode)}onPaste(e){let o=function ce(n){var i;return"dataTransfer"in n?(null===(i=n.dataTransfer)||void 0===i?void 0:i.getData("text/plain"))||"":(0,T.WM)(n)}(e).replace(j.Go,"");const s=this.extractCountryCodePipe.transform(o,this.countries);s?(s===b.q.RU&&(o=o.replace(/^8/,"7")),this.updateCountryIsoCode(s),this.value=`${C.qs}${o}`):this.value=`${this.inputPhoneCountryCode}${o}`.replace(j.mM,"").slice(0,Z(this.countriesMasks,this.countryIsoCode))}getFlagPath(e){return this.flagPipe.transform(e)}onItemClick(e){this.open=!1,this.updateCountryIsoCode(e),this.cdr.detectChanges();const o=Z(this.countriesMasks,e);this.value.length>o&&(this.value=this.value.slice(0,o)),this.nativeFocusableElement&&this.nativeFocusableElement.focus()}setDisabledState(){super.setDisabledState(),this.close()}isoToCountryCode(e){return q(this.countriesMasks,e)}onModelChange(e){this.value=e}onActiveZone(e){this.updateFocused(e)}getFallbackValue(){return""}calculateMaskAfterCountryCode(e,o){return e.replace(o,"").trim()}close(){this.open=!1}updateCountryIsoCode(e){this.countryIsoCode=e,this.countryIsoCodeChange.emit(e)}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(u.eq,10),t.GI1(t.kD9),t.GI1(_t.cV),t.GI1(_t.gu),t.GI1(Lt),t.GI1(W.i),t.GI1(Ut),t.GI1(S.$K))},n.\u0275cmp=t.In1({type:n,selectors:[["tui-input-phone-international"]],viewQuery:function(e,o){if(1&e&&(t.CC$(bt,5),t.CC$(x.y_,5)),2&e){let s;t.wto(s=t.Gqi())&&(o.inputPhoneComponent=s.first),t.wto(s=t.Gqi())&&(o.primitiveTextfield=s.first)}},hostVars:1,hostBindings:function(e,o){1&e&&t.qCj("paste.capture.prevent.stop",function(a){return o.onPaste(a)})("drop.capture.prevent.stop",function(a){return o.onPaste(a)}),2&e&&t.e48("data-size",o.size)},inputs:{isoCode:[t.Wk5.None,"countryIsoCode","isoCode"],countries:"countries"},outputs:{countryIsoCodeChange:"countryIsoCodeChange"},features:[t.M5G([(0,Tt.NK)(n),(0,X.q4)(n),W.i,Ut],[St.YL]),t.eg9],ngContentSelectors:le,decls:2,vars:3,consts:[["class","t-hosted-dropdown",3,"canOpen","content","open","openChange","tuiActiveZoneChange",4,"ngIf"],[1,"t-hosted-dropdown",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["tuiGroup",""],["tuiHintContent","","tuiTextfieldPostfix","","tuiTextfieldPrefix","",1,"t-country-select","tui-group__auto-width-item",3,"disabled","editable","focusable","pseudoFocus","readOnly","tuiTextfieldCustomContent","tuiTextfieldIcon","tuiTextfieldLabelOutside"],[1,"t-input-phone","tui-group__auto-width-item",3,"countryCode","disabled","focusable","phoneMaskAfterCountryCode","pseudoFocus","pseudoHover","pseudoInvalid","readOnly","ngModel","ngModelChange"],["autocomplete","new-password","tuiTextfield",""],["dropdown",""],["countryValueContent",""],["icon",""],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"],["alt","",1,"t-country-item-flag",3,"src"],[1,"t-country-item-name"],[1,"t-country-item-code"],[1,"t-flag",3,"alt","src"],["appearance","icon","tuiWrapper",""],[4,"polymorpheusOutlet"]],template:function(e,o){1&e&&(t.kPM(),t.yuY(0,ue,12,20,"tui-hosted-dropdown",0),t.wVc(1,"async")),2&e&&t.E7m("ngIf",t.kDX(1,1,o.countriesNames$))},dependencies:[V.Qw,x.y_,bt,x.b,Q.yi,Q.sP,h.u_,K.M,It.Ko,x.KQ,Mt.cb,S.We,S.Id,S.a4,S.uU,S.E9,te,u.ue,u._G,h.ay,Rt.S,Dt.Af,h.a,W.i,vt.M],styles:["[_nghost-%COMP%]{display:block}._disabled[_nghost-%COMP%]{pointer-events:none}.t-hosted-dropdown[_ngcontent-%COMP%]{display:block}.t-country-select[_ngcontent-%COMP%]{width:5.625rem}.t-country-select[_ngcontent-%COMP%]:not(._readonly)     input:not(:disabled){cursor:pointer}.t-country-select._readonly[_ngcontent-%COMP%]     input{cursor:default}.t-country-select[data-size=m][_ngcontent-%COMP%]{width:5.5rem}.t-country-select[data-size=s][_ngcontent-%COMP%]{width:2rem}.t-country-select[data-size=s][_ngcontent-%COMP%]   .t-flag[_ngcontent-%COMP%]{margin-left:-1rem}.t-arrow-icon[_ngcontent-%COMP%]{position:relative;display:flex;width:1.5rem;height:1.5rem;align-items:center;justify-content:center;box-sizing:border-box;cursor:pointer;pointer-events:none;pointer-events:auto}._readonly[_nghost-%COMP%]   .t-arrow-icon[_ngcontent-%COMP%], ._disabled[_nghost-%COMP%]   .t-arrow-icon[_ngcontent-%COMP%]{pointer-events:none}.t-arrow-icon_open[_ngcontent-%COMP%]{transform:rotate(180deg)}.t-input-phone[_ngcontent-%COMP%]{flex:1}.t-flag[_ngcontent-%COMP%]{width:1.75rem;height:1.25rem;margin-left:-.5rem}.t-country-item-flag[_ngcontent-%COMP%]{width:1.75rem;height:1.25rem}.t-country-item-name[_ngcontent-%COMP%]{margin-left:.75rem;margin-right:auto}.t-country-item-code[_ngcontent-%COMP%]{color:var(--tui-text-02);margin-right:.25rem}"],changeDetection:0}),(0,l.UN)([F.w7],n.prototype,"calculateMaskAfterCountryCode",null),n})(),de=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.a4G({type:n}),n.\u0275inj=t.s3X({imports:[[h.MD,u.y,Dt.Ux,k.Yt,ee,It.Gy,x.KA,S.aS,Mt.WY,V.GE,Q.A$,Pt.S2,Rt.g,Qt.kR,vt.E,K.L,W.y]]}),n})();var dt=r(8588),pt=r(9888),tt=r(6528),kt=r(5e3),pe=r(908);const me=(n,i,e)=>({"bg-primary text-bold text-white":n,"border-t":i,"border-s":e});function Ce(n,i){if(1&n){const e=t.KQA();t.I0R(0,"div",5),t.qCj("click",function(){const a=t.usT(e).$implicit,_=t.GaO();return t.CGJ(_.control.setValue(a))}),t.OEk(1),t.C$Y()}if(2&n){const e=i.$implicit,o=t.GaO();t.E7m("ngClass",t.uAc(2,me,o.control.value===e,e<o.perRow+1,(e-1)%o.perRow==0)),t.yG2(),t.oRS(" ",e," ")}}const he=(n,i)=>({"grid-template-rows":n,"grid-template-columns":i}),ge=["*"];let fe=(()=>{class n{constructor(){this.cd=(0,t.uUt)(t.kD9),this.control=new u.Ku(null),this.maxPeople=10,this.perRow=2,this.options=[]}ngOnInit(){this.recalculatePerRow(),this.recalculateOptions()}ngOnChanges(){this.recalculatePerRow(),this.recalculateOptions()}writeValue(e){if("string"==typeof e&&e.length>0&&e.match(/^\d+$/)&&(e=Number(e)),null==typeof e&&(e=null),null===e||"number"==typeof e)return this.control.setValue(e),void this.cd.detectChanges();console.warn(`PeopleCountInputComponent: invalid value ${e}`)}registerOnChange(e){this.control.valueChanges.subscribe(e)}registerOnTouched(e){this.control.valueChanges.subscribe(e)}setDisabledState(e){e?this.control.disable():this.control.enable()}recalculatePerRow(){let e=5;for(;e>2;){if(this.maxPeople%e==0)return void(this.perRow=e);e--}this.perRow=e}recalculateOptions(){this.options=Array.from({length:this.maxPeople},(e,o)=>o+1)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-people-count-input"]],inputs:{maxPeople:"maxPeople"},standalone:!0,features:[t.M5G([p.UF,{provide:u.Y6,useExisting:n,multi:!0}]),t.SYr,t.UHJ],ngContentSelectors:ge,decls:8,vars:5,consts:()=>{let e;return e="\n           For larger bookings of \n          " + "\ufffd0\ufffd" + "\n           people, \n          " + "\ufffd#7\ufffd" + "\n           contact us \n          " + "\ufffd/#7\ufffd" + "\n           . \n        ",[[1,"flex","items-center","justify-center","mb-5"],[1,"grid","border-primary","text-2xl",3,"ngStyle"],[1,"text-center","text-lg"],e,[1,"ms-1"],[1,"cursor-pointer","flex","items-center","justify-center","border-primary","border-e","border-b",3,"ngClass","click"],["class","cursor-pointer flex items-center justify-center border-primary border-e border-b",3,"ngClass"]]},template:function(o,s){1&o&&(t.kPM(),t._Xx(0),t.I0R(1,"div",0)(2,"div",1),t.c53(3,Ce,2,6,"div",6,t.oxv),t.C$Y()(),t.I0R(5,"p",2),t.Mff(6,3),t.wR5(7,"app-contact-us",4),t.U7j(),t.C$Y()),2&o&&(t.yG2(2),t.E7m("ngStyle",t.IBC(2,he,"repeat("+s.options.length/s.perRow+", 5rem)","repeat("+s.options.length/(s.options.length/s.perRow)+", 5rem)")),t.yG2(),t.oho(s.options),t.yG2(4),t.oBb(s.maxPeople),t.Ylm(6))},dependencies:[h.QF,h.Qt,P.w,pe.Q],changeDetection:0})}return n})();var mt=r(8824),Ct=r(400),et=r(9880),Vt=r(1673),Bt=r(7692),Ee=r(3412),Oe=r(9212),ve=r(7368),nt=r(964),Yt=r(9772),Te=r(1560),ht=r(1128),ot=r(7048),gt=r(8256),U=r(8392),ft=r(4820);function Ie(n,i){if(1&n){const e=t.KQA();t.I0R(0,"p",7),t.SAx(1),t.aS0(2,8),t.k70(),t.I0R(3,"span",9),t.qCj("click",function(){t.usT(e);const s=t.GaO();return t.CGJ(s.date.reset())}),t.OEk(4),t.wVc(5,"date"),t.I0R(6,"mat-icon",10),t.OEk(7,"edit"),t.C$Y()()()}if(2&n){const e=t.GaO();t.yG2(4),t.oRS(" ",t.g7$(5,1,e.date.value.toLocalNativeDate(),"EEEE d MMMM y")," ")}}function Me(n,i){1&n&&t.wR5(0,"tui-loader",6),2&n&&t.E7m("showLoader",!0)}const Re=(n,i)=>({"btn-primary":n,"btn-primary-outline":i});function Pe(n,i){if(1&n){const e=t.KQA();t.I0R(0,"button",13),t.qCj("click",function(){const a=t.usT(e).$implicit,_=t.GaO(3);return t.CGJ(_.onTimeClick(a))}),t.OEk(1),t.C$Y()}if(2&n){const e=i.$implicit,o=t.GaO(3);t.E7m("ngClass",t.IBC(2,Re,o.time.value&&o.time.value.hours==e.hours&&o.time.value.minutes==e.minutes,!(o.time.value&&o.time.value.hours==e.hours&&o.time.value.minutes==e.minutes))),t.yG2(),t.oRS(" ",e," ")}}function ye(n,i){if(1&n&&(t.I0R(0,"tui-checkbox-block",14)(1,"div",15),t.OEk(2),t.C$Y()()),2&n){const e=t.GaO(3);let o;t.E7m("formControl",e.paymentAccepted),t.yG2(2),t.cNF((null==(o=e.group())?null:o.message)||e.defaultMessage)}}function Se(n,i){if(1&n&&(t.I0R(0,"div",11),t.c53(1,Pe,2,5,"button",16,t.oxv),t.C$Y(),t.yuY(3,ye,3,2,"tui-checkbox-block",12)),2&n){const e=t.GaO(2);t.yG2(),t.oho(e.validTimes()),t.yG2(2),t.C0Y(3,e.group()?3:-1)}}function Ne(n,i){1&n&&(t.I0R(0,"div")(1,"p",17),t.aS0(2,18),t.C$Y()())}function xe(n,i){if(1&n&&t.yuY(0,Se,4,1)(1,Ne,3,0),2&n){const e=t.GaO();t.C0Y(0,e.validTimes().length>0?0:1)}}let Ae=(()=>{class n{constructor(){this.cd=(0,t.uUt)(t.kD9),this.reservationsService=(0,t.uUt)(ft.G),this.notifications=(0,t.uUt)(ht.E),this.destroy$=(0,t.uUt)(p.UF),this.valueChanged=new t._w7,this.inputTouch=new t._w7,this.lastEmitted=null,this.date=new u.Ku(null,[u.AQ.required]),this.time=new u.Ku(null,[u.AQ.required]),this.group=(0,t.OCB)(null),this.paymentAccepted=new u.Ku(!1),this.groups=(0,t.OCB)({}),this.validTimes=(0,t.OCB)([]),this.loadingTimes=(0,t.OCB)(!1),this.today=(0,t.OCB)(Ct.EK.currentLocal()),this.disabledDates=e=>!(!e.dayBefore(this.today())&&!e.dayAfter(this.today().append({day:this.maxDaysInAdvance}))),this.maxDaysInAdvance=300,this.defaultMessage="\n           To secure one of our tables, a payment will be required that will be\n          deducted from the final bill at the restaurant. \n        "}ngOnInit(){this.time.valueChanges.pipe((0,M.a)(this.destroy$)).subscribe({next:e=>{this.paymentAccepted.setValue(!1);const o={...this.groups()};if(e){const s=o[e.toString()];this.group.set(s)}else this.group.set(null)}}),(0,Ee.U)(this.date.valueChanges.pipe((0,M.a)(this.destroy$),(0,d.I)(()=>this.date.valid)),this.time.valueChanges.pipe((0,M.a)(this.destroy$),(0,d.I)(()=>this.time.valid)),this.paymentAccepted.valueChanges.pipe((0,M.a)(this.destroy$),(0,d.I)(()=>!0===this.paymentAccepted.value))).subscribe({next:()=>{this.touched();const e=this.date.value,o=this.time.value;e&&o&&(!this.group()||this.paymentAccepted.value)&&this.emit((0,nt.Qx)(e,o))}}),this.date.valueChanges.pipe((0,M.a)(this.destroy$),(0,d.I)(e=>e instanceof Ct.EK),(0,Oe.y)(()=>this.loadingTimes.set(!0)),(0,ve.G)(e=>this.reservationsService.getValidTimes(e).pipe((0,mt.U)(()=>this.loadingTimes.set(!1))))).subscribe({next:e=>{const o=e.map(s=>s.valid_times).filter(s=>Array.isArray(s)&&s.length>0).flat();this.validTimes.set(o.map(s=>Ct.uc.fromString((0,Yt.CU)(s)))),this.groups.set(e.reduce((s,a)=>(a.valid_times?.forEach(_=>{a.preorder_reservation_group&&(s[(0,Yt.CU)(_)]=a.preorder_reservation_group)}),s),{}))},error:e=>{this.notifications.error(e instanceof ot.gj?(0,gt.mk)(e):U.a)}})}writeValue(e){return null==e?(this.date.reset(),void this.time.reset()):"string"==typeof e?(this.date.setValue((0,nt.ay)(e)),this.time.setValue((0,nt.QX)(e)),void setTimeout(()=>this.cd.detectChanges())):void console.warn("Invalid parameter provided to writeValue",{obj:e})}registerOnChange(e){this.valueChanged.subscribe(e)}registerOnTouched(e){this.inputTouch.subscribe(e)}setDisabledState(e){e?(this.date.disable(),this.time.disable()):(this.date.enable(),this.time.enable())}onDayClick(e){this.date.setValue(e)}touched(){this.inputTouch.emit()}emit(e){this.lastEmitted=e,this.valueChanged.emit(e)}onTimeClick(e){this.time.setValue(e)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-datetime-input"]],inputs:{maxDaysInAdvance:"maxDaysInAdvance"},outputs:{valueChanged:"valueChanged",inputTouch:"inputTouch"},standalone:!0,features:[t.M5G([p.UF,{provide:u.Y6,useExisting:n,multi:!0}]),t.UHJ],decls:10,vars:6,consts:()=>{let e,o,s;return e="Choose the date.",o="Select the time for the day.",s="\n           We are sorry, there are no available times for the selected date.\n          Please change the date and try again. \n        ",[[3,"expanded"],[1,"text-xl","text-center","mb-3"],e,[1,"flex","items-center","justify-center"],[3,"disabledItemHandler","value","touchend","dayClick"],["class","text-xl"],[3,"showLoader"],[1,"text-xl"],o,[1,"cursor-pointer","inline-flex","items-center","ms-2","underline",3,"click"],[1,"ms-1"],[1,"grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","gap-3"],["class","w-full my-5",3,"formControl"],["type","button","size","m","tuiButton","","appearance","custom",3,"ngClass","click"],[1,"w-full","my-5",3,"formControl"],[1,"w-full","text-pretty","my-3"],["type","button","size","m","tuiButton","","appearance","custom",3,"ngClass"],[1,"text-xl","text-danger"],s]},template:function(o,s){1&o&&(t.I0R(0,"tui-expand",0)(1,"p",1),t.SAx(2),t.aS0(3,2),t.k70(),t.C$Y(),t.I0R(4,"div",3)(5,"tui-calendar",4),t.qCj("touchend",function(){return s.touched()})("dayClick",function(_){return s.onDayClick(_)}),t.C$Y()()(),t.I0R(6,"tui-expand",0),t.yuY(7,Ie,8,4,"p",5)(8,Me,1,1,"tui-loader",6)(9,xe,2,1),t.C$Y()),2&o&&(t.E7m("expanded",s.date.invalid),t.yG2(5),t.E7m("disabledItemHandler",s.disabledDates)("value",s.today()),t.yG2(),t.E7m("expanded",s.date.valid),t.yG2(),t.C0Y(7,s.date.value?7:-1),t.yG2(),t.C0Y(8,s.loadingTimes()?8:9))},dependencies:[et.kh,et.st,Vt.y,Vt.I,f.CI,f.Kw,h.QF,h.y,Te.qL,Bt.Sk,Bt.Cb,tt.i,tt.I,u.sl,u.ue,u.ug],changeDetection:0})}return n})();var Ge=r(1676),D=r(9938),be=r(9956),$e=r(3468),Ue=r(1588);function De(n,i){if(1&n&&(t.OEk(0),t.SAx(1),t.aS0(2,7),t.k70()),2&n){const e=t.GaO();t.oRS(" ",e.people.value," ")}}function we(n,i){1&n&&(t.SAx(0),t.aS0(1,8),t.k70())}function Le(n,i){if(1&n&&(t.OEk(0),t.wVc(1,"date")),2&n){const e=t.GaO();t.oRS(" ",t.g7$(1,1,e.datetime.value,"EEEE d MMMM y HH:mm")," ")}}function ke(n,i){1&n&&(t.SAx(0),t.aS0(1,9),t.k70())}function Ve(n,i){if(1&n&&t.wR5(0,"app-errors",15),2&n){const e=t.GaO(2);t.E7m("errors",e.people.errors)}}function Be(n,i){if(1&n){const e=t.KQA();t.I0R(0,"div",10)(1,"div",11)(2,"app-people-count-input",12)(3,"span",13),t.aS0(4,14),t.C$Y()(),t.yuY(5,Ve,1,1,"app-errors",15),t.I0R(6,"tui-expand",16)(7,"button",17),t.qCj("click",function(){t.usT(e);const s=t.GaO();return t.CGJ(s.nextStep())}),t.SAx(8),t.aS0(9,18),t.k70(),t.C$Y()()()()}if(2&n){const e=t.GaO();t.yG2(2),t.E7m("maxPeople",e.maxPeople())("formControl",e.people),t.yG2(3),t.C0Y(5,e.showErrorsFor(0)?5:-1),t.yG2(),t.E7m("expanded",e.people.valid||e.maxIndex()>0)}}function Ye(n,i){if(1&n&&t.wR5(0,"app-errors",15),2&n){const e=t.GaO(2);t.E7m("errors",e.datetime.errors)}}function ze(n,i){if(1&n){const e=t.KQA();t.I0R(0,"div",10)(1,"div",11),t.wR5(2,"app-datetime-input",19),t.yuY(3,Ye,1,1,"app-errors",15),t.I0R(4,"tui-expand",16)(5,"button",17),t.qCj("click",function(){t.usT(e);const s=t.GaO();return t.CGJ(s.nextStep())}),t.SAx(6),t.aS0(7,20),t.k70(),t.C$Y()()()()}if(2&n){const e=t.GaO();t.yG2(2),t.E7m("maxDaysInAdvance",e.maxDaysInAdvance())("formControl",e.datetime),t.yG2(),t.C0Y(3,e.showErrorsFor(1)?3:-1),t.yG2(),t.E7m("expanded",e.datetime.valid||e.maxIndex()>1)}}function He(n,i){if(1&n&&t.wR5(0,"app-errors",15),2&n){const e=t.GaO(2);t.E7m("errors",e.contacts.controls.firstName.errors)}}function Ke(n,i){if(1&n&&t.wR5(0,"app-errors",15),2&n){const e=t.GaO(2);t.E7m("errors",e.contacts.controls.lastName.errors)}}function Xe(n,i){if(1&n&&t.wR5(0,"app-errors",15),2&n){const e=t.GaO(2);t.E7m("errors",e.contacts.controls.email.errors)}}function Qe(n,i){if(1&n&&t.wR5(0,"app-errors",15),2&n){const e=t.GaO(2);t.E7m("errors",e.contacts.controls.phone.errors)}}function We(n,i){if(1&n){const e=t.KQA();t.I0R(0,"div",21)(1,"form",22),t.qCj("ngSubmit",function(){t.usT(e);const s=t.GaO();return t.CGJ(s.nextStep())}),t.I0R(2,"div",23)(3,"div",24)(4,"tui-input",25),t.SAx(5),t.aS0(6,26),t.k70(),t.wR5(7,"input",27),t.C$Y(),t.yuY(8,He,1,1,"app-errors",15),t.C$Y(),t.I0R(9,"div",24)(10,"tui-input",28),t.SAx(11),t.aS0(12,29),t.k70(),t.wR5(13,"input",30),t.C$Y(),t.yuY(14,Ke,1,1,"app-errors",15),t.C$Y()(),t.I0R(15,"div",31)(16,"tui-input",25),t.SAx(17),t.aS0(18,32),t.k70(),t.wR5(19,"input",33),t.C$Y(),t.yuY(20,Xe,1,1,"app-errors",15),t.C$Y(),t.I0R(21,"div",31)(22,"tui-input-phone-international",34),t.iHE("countryIsoCodeChange",function(s){t.usT(e);const a=t.GaO();return t.kNx(a.countryIsoCode,s)||(a.countryIsoCode=s),t.CGJ(s)}),t.SAx(23),t.aS0(24,35),t.k70(),t.C$Y(),t.yuY(25,Qe,1,1,"app-errors",15),t.C$Y(),t.I0R(26,"tui-expand",16)(27,"button",36),t.SAx(28),t.aS0(29,37),t.k70(),t.C$Y()()()()}if(2&n){const e=t.GaO();t.yG2(),t.E7m("formGroup",e.contacts),t.yG2(3),t.E7m("tuiAutoFocus",!0)("formControlName","firstName"),t.yG2(4),t.C0Y(8,e.showErrorsFor(2)?8:-1),t.yG2(2),t.E7m("formControlName","lastName"),t.yG2(4),t.C0Y(14,e.showErrorsFor(2)?14:-1),t.yG2(2),t.E7m("tuiAutoFocus",!0)("formControlName","email"),t.yG2(4),t.C0Y(20,e.showErrorsFor(2)?20:-1),t.yG2(2),t.E7m("countries",e.countries),t.OKB("countryIsoCode",e.countryIsoCode),t.E7m("formControlName","phone"),t.yG2(3),t.C0Y(25,e.showErrorsFor(2)?25:-1),t.yG2(),t.E7m("expanded",e.contacts.valid)}}function je(n,i){if(1&n){const e=t.KQA();t.I0R(0,"div",21)(1,"form",22),t.qCj("ngSubmit",function(){t.usT(e);const s=t.GaO();return t.CGJ(s.nextStep())}),t.I0R(2,"div",31)(3,"tui-input-number",38),t.OEk(4," Quanti bambini ci saranno con voi? "),t.C$Y()(),t.I0R(5,"div",31)(6,"tui-textarea",39),t.SAx(7),t.aS0(8,40),t.k70(),t.C$Y()(),t.I0R(9,"div",31)(10,"tui-checkbox-block",41),t.SAx(11),t.aS0(12,42),t.k70(),t.C$Y()(),t.I0R(13,"button",43),t.SAx(14),t.aS0(15,44),t.k70(),t.C$Y()()()}if(2&n){const e=t.GaO();t.yG2(),t.E7m("formGroup",e.notesForm),t.yG2(2),t.E7m("decimal","never")("min",0)("step",1)("max",e.people.value),t.yG2(10),t.E7m("showLoader",e.submitting())("disabled",e.notesForm.invalid)}}class w{constructor(){this.destroy$=(0,t.uUt)(p.UF),this.reservations=(0,t.uUt)(ft.G),this.notifications=(0,t.uUt)(ht.E),this.publicDataService=(0,t.uUt)(Ge.s),this.cd=(0,t.uUt)(t.kD9),this.createdReservation=new t._w7,this.currentIndex=(0,t.OCB)(0),this.lastMaxIndex=0,this.maxIndex=(0,t.S6b)(()=>{const i=this.currentIndex();return this.lastMaxIndex<i&&(this.lastMaxIndex=i),this.lastMaxIndex}),this.maxPeople=(0,t.OCB)(10),this.maxDaysInAdvance=(0,t.OCB)(300),this.submitting=(0,t.OCB)(!1),this.submitted=(0,t.OCB)(!1),this.people=new u.Ku(null,[u.AQ.required,O.S.min(0)]),this.datetime=new u.Ku(null,[u.AQ.required,O.S.pattern(nt.e6)]),this.contacts=new u.WC({firstName:new u.Ku(null,[u.AQ.required,u.AQ.minLength(2)]),lastName:new u.Ku(null,[u.AQ.required,u.AQ.minLength(2)]),email:new u.Ku(null,[u.AQ.required,u.AQ.email]),phone:new u.Ku(null,[u.AQ.required,u.AQ.minLength(6)])}),this.notesForm=new u.WC({notes:new u.Ku(null),children:new u.Ku(0,[u.AQ.required,O.S.min(0)]),acceptTerms:new u.Ku(!1,[u.AQ.requiredTrue])}),this.countries=Object.values(b.q),this.configs=(0,t.uUt)($e.m),this.countryIsoCode=b.q.IT,this.locale="en",this.steps={0:{form:this.people,submitted:!1,viewed:!1},1:{form:this.datetime,submitted:!1,viewed:!1},2:{form:this.contacts,submitted:!1,viewed:!1},3:{form:this.notesForm,submitted:!1,viewed:!1}}}ngOnInit(){this.configs.locale$.pipe((0,M.a)(this.destroy$)).subscribe(i=>{this.locale=i?i.split("-")[0]:"en"}),this.people.valueChanges.pipe((0,M.a)(this.destroy$),(0,d.I)(i=>"number"==typeof i&&i>0),(0,d.I)(()=>0===this.currentIndex())).subscribe({next:()=>{setTimeout(()=>this.nextStep(),10)}}),this.datetime.valueChanges.pipe((0,M.a)(this.destroy$),(0,d.I)(i=>this.datetime.valid),(0,d.I)(()=>1===this.currentIndex())).subscribe({next:()=>{setTimeout(()=>this.nextStep(),10)}}),this.publicDataService.data$.pipe((0,M.a)(this.destroy$),(0,d.I)(i=>null!==i)).subscribe({next:i=>{const e=i.settings.max_people_per_reservation??null;this.maxPeople.set(e?Number(e):this.maxPeople());const o=i.settings.reservation_max_days_in_advance??null;this.maxDaysInAdvance.set(o?Number(o):this.maxDaysInAdvance())}})}nextStep(){this.currentStep().submitted=!0,!this.currentStep().form.invalid&&(this.steps[this.currentIndex()+1]?(this.currentIndex.update(i=>i+1),this.currentStep().viewed=!0):this.submitForm())}setState(i){this.currentIndex.set(i)}getState(i){const e=this.steps[i];if(!e)return"normal";const o=e.form;return!o||i>this.currentIndex()?"normal":o.invalid&&o.dirty?"error":o.valid?"pass":"normal"}showErrorsFor(i){if(this.submitted())return!0;const e=this.steps[i];return!e||e.submitted}currentStep(){return this.steps[this.currentIndex()]}loadPrevious(i){let e=0;i.adults&&(e+=i.adults),i.children&&(e+=i.children),this.people.setValue(e||null),this.datetime.setValue(i.datetime?i.datetime:null),i.firstName&&this.contacts.get("firstName")?.setValue(i.firstName),i.lastName&&this.contacts.get("lastName")?.setValue(i.lastName),i.email&&this.contacts.get("email")?.setValue(i.email),i.phone&&this.contacts.get("phone")?.setValue(i.phone),i.phoneCountry&&(this.countryIsoCode=i.phoneCountry),i.notes&&this.notesForm.patchValue({notes:i.notes}),i.children&&this.notesForm.patchValue({children:i.children})}formatOutput(){const i=this.contacts.get("email")?.value,e=this.contacts.get("phone")?.value,o=this.contacts.get("firstName")?.value,s=this.contacts.get("lastName")?.value,a=this.datetime.value,_=this.notesForm.get("children")?.value,E=this.people.value,R=this.notesForm.get("notes")?.value;let N=E||0;return _&&(N-=_),function Fe(n){const i=(e,o)=>(console.warn(`Invalid field ${e}`,o),null);return"string"==typeof n.lang&&n.lang.length>0?"string"==typeof n.email&&n.email.length>0?"string"==typeof n.phone&&n.phone.length>0?"string"==typeof n.firstName&&n.firstName.length>0?"string"==typeof n.lastName&&n.lastName.length>0?"string"==typeof n.datetime&&n.datetime.length>0?null===n.notes||"string"==typeof n.notes&&n.notes.length>0?"number"==typeof n.children&&n.children>=0?"number"==typeof n.adults&&n.adults>0?{lang:n.lang,email:n.email,phone:n.phone,datetime:n.datetime,children:n.children,notes:n.notes,adults:n.adults,first_name:n.firstName,last_name:n.lastName}:i("adults",n.adults):i("children",n.children):i("notes",n.notes):i("datetime",n.datetime):i("lastName",n.lastName):i("firstName",n.firstName):i("phone",n.phone):i("email",n.email):i("lang",n.lang)}({email:i,phone:e,datetime:a,children:_,notes:R,adults:N,lang:this.locale,firstName:o,lastName:s})}reset(){this.currentIndex.set(0),Object.values(this.steps).forEach(i=>i.form.reset())}submitForm(){this.submitted.set(!0);const i=this.formatOutput();if(!i)return void this.notifications.error(U.a);let e=setTimeout(()=>this.submitting.set(!0),500);this.reservations.create(i).pipe((0,M.a)(this.destroy$),(0,mt.U)(()=>clearTimeout(e)),(0,mt.U)(()=>this.submitting.set(!1))).subscribe({next:o=>{o.payment?.hpp_url?window.location.href=o.payment.hpp_url:(this.createdReservation.emit(o),this.notifications.success("\n           Your reservation has been created. We will send you a confirmation\n          email shortly. \n        "),this.reset())},error:o=>{o instanceof ot.gj&&422===o.status?this.manageUnprocessableEntity(o):this.notifications.error(o instanceof ot.gj?(0,gt.mk)(o):U.a)}})}manageUnprocessableEntity(i){if(!(i instanceof ot.gj))return void this.notifications.error(U.a);if(!(422==i.status&&"object"==typeof i.error&&null!==i.error&&"object"==typeof i.error&&Object.keys(i.error.details).length>0))return console.warn("expected response to have status 422 and error { details: { <field>: <error> } } but did not ",i),void this.notifications.error(U.a);const e=i.error.details;console.warn("manageUnprocessableEntity()",{error:e,response:i}),e.people&&(D.y.assignErrorsToFormFromArray(this.people,e.people),delete e.adults,delete e.children,delete e.people),e.datetime&&(D.y.assignErrorsToFormFromArray(this.datetime,e.datetime),delete e.datetime),e.first_name&&(D.y.assignErrorsToFormFromArray(this.contacts.controls.firstName,e.first_name),delete e.first_name),e.last_name&&(D.y.assignErrorsToFormFromArray(this.contacts.controls.lastName,e.last_name),delete e.last_name),e.phone&&(D.y.assignErrorsToFormFromArray(this.contacts.controls.phone,e.phone),delete e.phone),e.email&&(D.y.assignErrorsToFormFromArray(this.contacts.controls.email,e.email),delete e.email),Object.keys(e).length>0&&this.notifications.error((0,gt.Yj)(Object.values(e).flat())??U.a);const o=Object.keys(this.steps).find(s=>this.steps[Number(s)].form.invalid);o&&!isNaN(Number(o))&&Number(o)>=0&&this.currentIndex.set(Number(o)),this.cd.detectChanges()}static#t=this.\u0275fac=function(e){return new(e||w)};static#e=this.\u0275cmp=t.In1({type:w,selectors:[["app-public-reservation-form"]],outputs:{createdReservation:"createdReservation"},standalone:!0,features:[t.M5G([p.UF]),t.UHJ],decls:18,vars:9,consts:()=>{let i,e,o,s,a,_,E,R,N,$,it,st,rt,at,zt,Ht;return i="Contacts",e="Summary",o="guests",s="How many people?",a="When?",_="Select the number of guests.",E="Continue",R="Continue",N="Name",$="Surname",it="Email",st="Cell phone",rt="Continue",at="Additional information, if necessary, should be added here!",zt="I accept the terms and conditions.",Ht="Booking confirmation",[[1,"justify-around",3,"activeItemIndex"],["tuiStep","",3,"stepState","click"],i,e,[1,"w-full","h-full",3,"draggable","index","indexChange"],["class","p-3 flex items-center justify-center",4,"tuiItem"],["class","p-3",4,"tuiItem"],o,s,a,[1,"p-3","flex","items-center","justify-center"],[1,"max-w-[500px]"],[3,"maxPeople","formControl"],[1,"text-xl","text-center"],_,[3,"errors"],[3,"expanded"],["tuiButton","","appearance","custom","type","button",1,"btn-primary",3,"click"],E,[1,"block","mb-3",3,"maxDaysInAdvance","formControl"],R,[1,"p-3"],[1,"mx-auto","max-w-[500px]",3,"formGroup","ngSubmit"],[1,"flex","items-center","mb-3"],[1,"grow"],[1,"grow","me-2",3,"tuiAutoFocus","formControlName"],N,["tuiTextfield","","autocomplete","first_name"],[1,"grow","ms-2",3,"formControlName"],$,["tuiTextfield","","autocomplete","last_name"],[1,"mb-3"],it,["tuiTextfield","","autocomplete","email"],[3,"countries","countryIsoCode","formControlName","countryIsoCodeChange"],st,["tuiButton","","appearance","custom","type","submit",1,"btn-primary"],rt,["formControlName","children",3,"decimal","min","step","max"],["formControlName","notes"],at,["formControlName","acceptTerms"],zt,["tuiButton","","appearance","custom","type","submit",1,"btn-primary",3,"showLoader","disabled"],Ht]},template:function(e,o){1&e&&(t.I0R(0,"tui-stepper",0)(1,"button",1),t.qCj("click",function(){return o.setState(0)}),t.yuY(2,De,3,1,"ng-container")(3,we,2,0),t.C$Y(),t.I0R(4,"button",1),t.qCj("click",function(){return o.setState(1)}),t.yuY(5,Le,2,4)(6,ke,2,0),t.C$Y(),t.I0R(7,"button",1),t.qCj("click",function(){return o.setState(2)}),t.SAx(8),t.aS0(9,2),t.k70(),t.C$Y(),t.I0R(10,"button",1),t.qCj("click",function(){return o.setState(3)}),t.SAx(11),t.aS0(12,3),t.k70(),t.C$Y()(),t.I0R(13,"tui-carousel",4),t.iHE("indexChange",function(a){return t.kNx(o.currentIndex,a)||(o.currentIndex=a),a}),t.yuY(14,Be,10,4,"div",5)(15,ze,8,4,"div",5)(16,We,30,14,"div",6)(17,je,16,7,"div",6),t.C$Y()),2&e&&(t.E7m("activeItemIndex",o.currentIndex()),t.yG2(),t.E7m("stepState",o.getState(0)),t.yG2(),t.C0Y(2,o.people.value&&o.people.valid&&o.currentIndex()>0?2:3),t.yG2(2),t.E7m("stepState",o.getState(1)),t.yG2(),t.C0Y(5,o.datetime.value&&o.datetime.valid&&o.currentIndex()>1?5:6),t.yG2(2),t.E7m("stepState",o.getState(2)),t.yG2(3),t.E7m("stepState",o.getState(3)),t.yG2(3),t.E7m("draggable",!1),t.OKB("index",o.currentIndex))},dependencies:[Xt,Et,Ot,fe,u.sl,u.sz,u.ue,u.u,u.ug,u.uW,u.Wo,lt.uG,lt.iy,lt.Ep,Ue.S,Ae,ct.CQ,ct.Oo,ct.cP,x.b,f.CI,f.Kw,h.y,kt.m6,kt.gJ,de,_e,dt.Y3,dt.wp,dt.kd,pt.Q7,pt.mi,pt.Qj,tt.i,tt.I,et.kh,et.st,be.g],styles:["[_nghost-%COMP%]     tui-stepper{--tui-primary: var(--first-color);--tui-link: var(--first-color);--tui-secondary: var(--second-color);--tui-link-hover: var(--second-color);--tui-secondary-hover: var(--first-color)}"],changeDetection:0})}(0,l.UN)([F.w7],w.prototype,"getState",null),(0,l.UN)([F.w7],w.prototype,"showErrorsFor",null);var Je=r(6616),Ze=r(7296),qe=r(1680);function tn(n,i){1&n&&(t.SAx(0),t.aS0(1,4),t.k70())}function en(n,i){1&n&&(t.SAx(0),t.aS0(1,5),t.k70())}function nn(n,i){if(1&n&&t.wR5(0,"app-public-reservation-confirmation",3),2&n){const e=t.GaO();t.E7m("reservation",e.createdReservation())}}function on(n,i){1&n&&(t.I0R(0,"p",6),t.SAx(1),t.aS0(2,7),t.k70(),t.C$Y(),t.wR5(3,"app-public-message",8)(4,"app-public-reservation-form")),2&n&&(t.yG2(3),t.E7m("location","new-reservation-form"))}let sn=(()=>{class n{constructor(){this.notifications=(0,t.uUt)(ht.E),this.reservations=(0,t.uUt)(ft.G),this.destroy$=(0,t.uUt)(p.UF),this.localStorage=(0,t.uUt)(Je.s),this.createdReservation=(0,t.OCB)(null),this.resendingConfirmation=(0,t.OCB)(!1)}ngOnInit(){this.reservations.created.pipe((0,M.a)(this.destroy$)).subscribe({next:e=>{this.createdReservation.set(e)}})}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-public-home-reserve"]],standalone:!0,features:[t.M5G([p.UF]),t.UHJ],decls:7,vars:2,consts:()=>{let e,o,s;return e="Booking confirmed!",o="Book now",s="Reserve your spot at one of our tables and secure our exclusive experience.",[[1,"mx-4","md:mx-8","lg:mx-12"],[1,"text-5xl","text-center","text-primary","mb-2"],[1,"bg-primary","w-3/4","mx-auto","h-[1px]","mb-5"],[3,"reservation"],e,o,[1,"text-xl","text-center","mb-3"],s,[1,"block","mb-3","text-center","text-xl",3,"location"]]},template:function(o,s){1&o&&(t.I0R(0,"div",0)(1,"h2",1),t.yuY(2,tn,2,0,"ng-container")(3,en,2,0),t.C$Y(),t.wR5(4,"hr",2),t.yuY(5,nn,1,1,"app-public-reservation-confirmation",3)(6,on,5,1),t.C$Y()),2&o&&(t.yG2(2),t.C0Y(2,s.createdReservation()?2:3),t.yG2(3),t.C0Y(5,s.createdReservation()?5:6))},dependencies:[f.CI,w,Ze.K,P.w,qe.I],styles:["[_nghost-%COMP%]{background-color:var(--sixth-color)}"],changeDetection:0})}return n})()},964:(L,y,r)=>{r.d(y,{Ez:()=>m,Q1:()=>T,QX:()=>u,Qx:()=>P,_0:()=>g,ay:()=>l,e6:()=>f});var t=r(400);const f=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/;function P(c,p){return new Date(`${c.formattedYear}-${c.formattedMonthPart}-${c.formattedDayPart} ${p.toString()}`).toISOString()}function l(c){if(!("string"==typeof c&&c.length>0&&c.match(f)))return console.error("Invalid string provided to isoStringToTuiDay",{isoString:c}),null;const p=new Date(c);return new t.EK(p.getFullYear(),p.getMonth()+1,p.getDate())}function u(c){if(!("string"==typeof c&&c.length>0&&c.match(f)))return console.error("Invalid string provided to isoStringToTuiTime",{isoString:c}),null;const p=new Date(c);return new t.uc(p.getHours(),p.getMinutes())}function m(c){return new Date(`1970-01-01 ${c.toString()}`).toISOString()}function g(c){return new t.EK(c.getFullYear(),c.getMonth(),c.getDate())}function T(c){return new t.uc(c.getHours(),c.getMinutes())}},1588:(L,y,r)=>{r.d(y,{S:()=>f,s:()=>P});var t=r(4496);let f=(()=>{class l{}return l.\u0275fac=function(O){return new(O||l)},l.\u0275dir=t.Sc5({type:l,selectors:[["","tuiItem",""]]}),l})(),P=(()=>{class l{}return l.\u0275fac=function(O){return new(O||l)},l.\u0275mod=t.a4G({type:l}),l.\u0275inj=t.s3X({}),l})()},6988:(L,y,r)=>{r.d(y,{E:()=>O,Q:()=>C});var t=r(4496),f=r(3480),P=r(3840),l=r(3120),u=r(3616);let O=(()=>{class m{constructor(T,c){this.el=T,this.destroy$=c}set tuiScrollIntoView(T){T&&(0,l.k)(0).pipe((0,u.a)(this.destroy$)).subscribe(()=>{this.el.nativeElement.dispatchEvent(new CustomEvent(P.dG,{bubbles:!0,detail:this.el.nativeElement}))})}}return m.\u0275fac=function(T){return new(T||m)(t.GI1(t.GMv),t.GI1(f.UF,2))},m.\u0275dir=t.Sc5({type:m,selectors:[["","tuiScrollIntoView",""]],inputs:{tuiScrollIntoView:"tuiScrollIntoView"},features:[t.M5G([f.UF])]}),m})(),C=(()=>{class m{}return m.\u0275fac=function(T){return new(T||m)},m.\u0275mod=t.a4G({type:m}),m.\u0275inj=t.s3X({}),m})()},2500:(L,y,r)=>{r.d(y,{i:()=>u,y:()=>O});var t=r(4496),f=r(3656),P=r(3840),l=r(1343);let u=(()=>{class C{constructor(g){this.svgOptions=g,this.staticPath=this.svgOptions.path("tuiIcon").replace("tuiIcon.svg#tuiIcon","").replace(`tuiIcon.svg${P._m}#tuiIcon`,"")}transform(g){if(!g)return null;switch(g){case l.q.BL:case l.q.BQ:case l.q.CW:case l.q.GF:case l.q.GP:case l.q.MF:case l.q.MQ:case l.q.NC:case l.q.RE:case l.q.YT:return`${this.staticPath}${l.q.FR}.png`;case l.q.SX:return`${this.staticPath}${l.q.NL}.png`;default:return`${this.staticPath}${g}.png`}}}return C.\u0275fac=function(g){return new(g||C)(t.GI1(f.iY,16))},C.\u0275pipe=t.UTH({name:"tuiFlag",type:C,pure:!0}),C})(),O=(()=>{class C{}return C.\u0275fac=function(g){return new(g||C)},C.\u0275mod=t.a4G({type:C}),C.\u0275inj=t.s3X({}),C})()},7176:(L,y,r)=>{r.d(y,{S2:()=>Y,ie:()=>G,qE:()=>H,qu:()=>p});var t=r(4496),f=r(3656),P=r(5608),l=r(466),u=r(8048),O=r(1040),C=r(2528),m=r(1368);function g(d,h){1&d&&t.wR5(0,"tui-svg",2),2&d&&t.E7m("src",h.polymorpheusOutlet)}function T(d,h){1&d&&t.C_f(0)}const p=(0,C.AL)({iconSmall:"tuiIconChevronDown",iconLarge:"tuiIconChevronDownLarge"}),G=new O.WO((()=>{class d{constructor(I,A,ut){this.dropdown=I,this.textfieldSize=A,this.options=ut}get rotated(){return this.dropdown.open}get arrowIcon(){return(0,P.yi)(this.textfieldSize.size)?this.options.iconLarge:this.options.iconSmall}}return d.\u0275fac=function(I){return new(I||d)(t.GI1(l.Qw),t.GI1(u.$K),t.GI1(p))},d.\u0275cmp=t.In1({type:d,selectors:[["tui-arrow"]],hostVars:2,hostBindings:function(I,A){2&I&&t.eAK("_rotated",A.rotated)},decls:3,vars:4,consts:[[3,"src",4,"polymorpheusOutlet"],[4,"ngIf"],[3,"src"]],template:function(I,A){1&I&&(t.yuY(0,g,1,1,"tui-svg",0)(1,T,1,0,"ng-container",1),t.wVc(2,"async")),2&I&&(t.E7m("polymorpheusOutlet",A.arrowIcon),t.yG2(),t.E7m("ngIf",t.kDX(2,2,A.dropdown.openChange)))},dependencies:[f.Wu,O.Af,m.u_,m.a],styles:["[_nghost-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;display:block;cursor:pointer;pointer-events:none}._rotated[_nghost-%COMP%]{transform:rotate(180deg)}"],changeDetection:0}),d})());let Y=(()=>{class d{}return d.\u0275fac=function(I){return new(I||d)},d.\u0275mod=t.a4G({type:d}),d.\u0275inj=t.s3X({imports:[[m.MD,f.Yt,O.Ux]]}),d})();const H=(0,C.AL)({interactive:G,disabled:G})}}]);