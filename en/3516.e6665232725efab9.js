"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[3516],{3516:(P,E,n)=>{n.r(E),n.d(E,{LinkCategoryModule:()=>K});var c=n(2992),S=n(7552),t=n(4496),O=n(3480),f=n(1712),r=n(6504),u=n(3616),m=n(4704),M=n(4e3),A=n(8824),I=n(1128),g=n(8256),h=n(6524),N=n(8212),R=n(4436),p=n(1512),G=n(9088);function L(a,T){if(1&a&&(t.I0R(0,"p"),t.OEk(1," La categoria attuale \xe8 "),t.I0R(2,"b"),t.OEk(3),t.C$Y()()),2&a){const e=t.GaO(2);let o;t.yG2(3),t.cNF(null==(o=e.parent())?null:o.name)}}function $(a,T){if(1&a&&(t.I0R(0,"p"),t.aS0(1,10),t.C$Y(),t.yuY(2,L,4,1,"p"),t.I0R(3,"p"),t.aS0(4,11),t.C$Y()),2&a){const e=t.GaO();t.yG2(2),t.C0Y(2,e.parent()?2:-1)}}const v=a=>({except:a});function y(a,T){if(1&a){const e=t.KQA();t.I0R(0,"form",12),t.qCj("ngSubmit",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.submit())}),t.I0R(1,"app-menu-category-select",13),t.SAx(2),t.aS0(3,14),t.k70(),t.C$Y(),t.I0R(4,"div",0)(5,"button",15),t.SAx(6),t.aS0(7,16),t.k70(),t.C$Y(),t.I0R(8,"button",17),t.qCj("click",function(){t.usT(e);const i=t.GaO();return t.CGJ(i.cancel())}),t.SAx(9),t.aS0(10,18),t.k70(),t.C$Y()()()}if(2&a){const e=t.GaO();t.E7m("formGroup",e.form),t.yG2(),t.E7m("filters",t.S45(3,v,e.parentId))("formControlName","category")}}let Y=(()=>{class a{constructor(){this.service=(0,t.uUt)(f.S),this.destroy$=(0,t.uUt)(O.UF),this.route=(0,t.uUt)(c.gV),this.router=(0,t.uUt)(c.E5),this.notifications=(0,t.uUt)(I.E),this.loading=(0,t.OCB)(!1),this.parent=(0,t.OCB)(null),this.parentId=null,this.form=new r.WC({category:new r.Ku(null)})}ngOnInit(){this.route.parent?.parent?.params.pipe((0,u.a)(this.destroy$),(0,m.k)(e=>e.category_id),(0,M.a)()).subscribe({next:e=>{this.parentId=e,this.loadParent()}})}submit(){const e=this.parentId,o=this.form.value?.category?.id;e&&o?this.form.invalid||(this.loading.set(!0),this.service.addCategory(e,o).pipe((0,u.a)(this.destroy$),(0,A.U)(()=>this.loading.set(!1))).subscribe({next:()=>{this.navigateBack(),this.notifications.fireSnackBar("Duplicate category and associated.","Done",{duration:3e3})},error:i=>{this.notifications.error((0,g.mk)(i)||"Something went wrong in the association between the records.")}})):console.error("something invalid.",{parentId:e,childId:o})}cancel(){confirm("Are you sure you want to cancel this action?")&&this.navigateBack()}navigateBack(){const e=this.route.snapshot.queryParams.afterUrl;e?this.router.navigateByUrl(e):this.router.navigate([".."],{relativeTo:this.route})}loadParent(){this.parent.set(null),this.parentId&&this.service.show(this.parentId).pipe((0,u.a)(this.destroy$)).subscribe({next:e=>{this.parent.set(e)},error:e=>{this.notifications.error((0,g.mk)(e)||"Something went wrong while loading the parent category.")}})}static#t=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["app-link-category"]],standalone:!0,features:[t.M5G([O.UF]),t.UHJ],decls:15,vars:7,consts:()=>{let e,o,i,C,l,_,d;return e="Associate existing category",o="The selected category will be added to the category.",i="\n           The category you choose will be duplicated along with all the dishes\n          and categories it contains. The newly created item will then be\n          associated with the current category. \n        ",C="\n           This means that any changes made to the newly created category will\n          not affect the original category and vice versa. \n        ",l="Category to associate",_="Confirm",d="Cancel",[[1,"flex","items-center"],[1,"me-2"],e,[3,"content"],[1,"mb-3"],[1,"me-2","text-slate-400"],o,["tuiLink","",3,"routerLink"],["helpMsg",""],[3,"formGroup"],i,C,[3,"formGroup","ngSubmit"],[1,"block","mb-3",3,"filters","formControlName"],l,["tuiButton","","type","submit","size","l","appearance","primary",1,"me-2"],_,["tuiButton","","type","button","size","l","appearance","outline",3,"click"],d]},template:function(o,i){if(1&o&&(t.I0R(0,"span",0)(1,"h1",1),t.SAx(2),t.aS0(3,2),t.k70(),t.C$Y(),t.wR5(4,"tui-tooltip",3),t.C$Y(),t.I0R(5,"div",4)(6,"span",5),t.SAx(7),t.aS0(8,6),t.k70(),t.C$Y(),t.I0R(9,"a",7),t.wVc(10,"urlTo"),t.OEk(11),t.C$Y()(),t.yuY(12,$,5,1,"ng-template",null,8,t.gJz)(14,y,11,5,"form",9)),2&o){const C=t.Gew(13);let l,_;t.yG2(4),t.E7m("content",C),t.yG2(5),t.E7m("routerLink",t.g7$(10,4,null==(l=i.parent())?null:l.id,"menuCategory.show")),t.yG2(2),t.cNF(null==(_=i.parent())?null:_.name),t.yG2(3),t.C0Y(14,i.parentId?14:-1)}},dependencies:[h.a,r.sl,r.sz,r.ue,r.u,r.uW,r.Wo,N.CI,N.Kw,R.a,R.i,p.w,p.C,c.ER,G.S]})}return a})(),K=(()=>{class a{static#t=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275mod=t.a4G({type:a});static#a=this.\u0275inj=t.s3X({imports:[c.qQ.forChild([(0,S.VV)(Y,{path:"",closeable:!0,dismissible:!1,size:"l"})])]})}return a})()}}]);