"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[2040],{2040:(Q,C,i)=>{i.r(C),i.d(C,{EditPublicMessageModule:()=>K});var S=i(1236),A=i(7552),t=i(4496),G=i(6500),I=i(3480),_=i(3616),c=i(6684),h=i(7368),N=i(4704),g=i(9212),v=i(8824),a=i(6504),M=i(7048),L=i(1128),y=i(9938),U=i(8392),$=i(8256),B=i(1920),D=i(9956),T=i(8212),d=i(8048),u=i(5188),f=i(6052),m=i(9860),R=i(1480),O=i(1368),z=i(1343),x=i(7936),b=i(4336);function X(o,E){1&o&&(t.OEk(0),t.wVc(1,"publicMessageKey")),2&o&&t.cNF(t.kDX(1,1,E.$implicit))}function Y(o,E){if(1&o&&t.wR5(0,"tui-data-list-wrapper",20),2&o){const e=t.GaO(),n=t.Gew(9);t.E7m("itemContent",n)("items",e.keys)}}function F(o,E){1&o&&t.C_f(0)}const V=o=>({$implicit:o});function k(o,E){if(1&o&&(t.I0R(0,"div",5),t.OEk(1," Il testo verr\xe0 mostrato nella seguente posizione:"),t.wR5(2,"br"),t.I0R(3,"b"),t.yuY(4,F,1,0,"ng-container",21),t.C$Y()()),2&o){const e=t.GaO(),n=t.Gew(9);t.yG2(4),t.E7m("ngTemplateOutlet",n)("ngTemplateOutletContext",t.S45(2,V,e.form.value.key))}}let j=(()=>{class o{constructor(){this.service=(0,t.uUt)(G.o),this.destroy$=(0,t.uUt)(I.UF),this.route=(0,t.uUt)(S.gV),this.router=(0,t.uUt)(S.E5),this.notifications=(0,t.uUt)(L.E),this.loading=(0,t.OCB)(!1),this.keys=[...m.EF],this.submitted=(0,t.OCB)(!1),this.form=new a.WC({key:new a.Ku(null,[a.AQ.required]),text:new a.Ku(null)}),this.e=this.errorsFor}ngOnInit(){this.form.get("key")?.valueChanges?.pipe((0,_.a)(this.destroy$),(0,c.I)(e=>(0,m.Qn)(e)),(0,h.G)(e=>this.service.show(e))).subscribe({next:e=>{this.form.patchValue({text:e.translations?.text})},error:e=>{console.warn(e)}}),this.route.params.pipe((0,_.a)(this.destroy$),(0,N.k)(e=>e.key),(0,c.I)(e=>(0,m.Qn)(e)),(0,g.y)(e=>this.form.patchValue({key:e})),(0,g.y)(()=>this.form.controls.key.disable())).subscribe((0,z.I)())}submit(){this.submitted.set(!0),!this.form.invalid&&(this.loading.set(!0),this.service.create(this.formVal()).pipe((0,_.a)(this.destroy$),(0,v.U)(()=>this.loading.set(!1))).subscribe({next:()=>{this.notifications.fireSnackBar("Saved"),this.router.navigate(["../"],{relativeTo:this.route})},error:e=>{e instanceof M.gj&&422==e.status?y.y.assignErrorsToForm(this.form,e):this.notifications.error(e instanceof M.gj?(0,$.mk)(e):U.a)}}))}cancel(){this.router.navigate(["../"],{relativeTo:this.route})}errorsFor(e){const n=this.form.get(e);return n&&(n.dirty||n.touched||this.submitted())?n.errors:null}formVal(){return{key:this.form.controls.key.value,text:this.form.value.text}}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.In1({type:o,selectors:[["app-edit-public-message"]],standalone:!0,features:[t.M5G([I.UF]),t.UHJ],decls:29,vars:8,consts:()=>{let e,n,s,l,P,p;return e="Set message",n="\n           You can display customized messages on public pages. For each\n          position, you can put exactly one message translated into multiple\n          languages. \n        ",s="Select the position of the text to display.",l="Translation",P="Confirm",p="Cancel",[[1,"flex","items-center"],e,[1,"text-slate-400"],n,[3,"formGroup","ngSubmit"],[1,"mb-3"],["keySelectContent",""],["tuiTextfieldSize","l",3,"formControlName","valueContent"],s,["tuiTextfield",""],[3,"itemContent","items",4,"tuiDataList"],["class","mb-3"],[3,"errors"],["formControlName","text"],l,[1,"flex"],["tuiButton","","type","submit","size","l",1,"me-2",3,"showLoader"],P,["tuiButton","","type","button","appearance","icon","size","l",3,"showLoader","click"],p,[3,"itemContent","items"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]]},template:function(n,s){if(1&n&&(t.I0R(0,"h1",0)(1,"span"),t.aS0(2,1),t.C$Y()(),t.I0R(3,"p",2),t.SAx(4),t.aS0(5,3),t.k70(),t.C$Y(),t.I0R(6,"form",4),t.qCj("ngSubmit",function(){return s.submit()}),t.I0R(7,"div",5),t.yuY(8,X,2,3,"ng-template",null,6,t.gJz),t.I0R(10,"tui-select",7),t.SAx(11),t.aS0(12,8),t.k70(),t.wR5(13,"input",9),t.yuY(14,Y,1,2,"tui-data-list-wrapper",10),t.C$Y(),t.yuY(15,k,5,4,"div",11),t.wR5(16,"app-errors",12),t.C$Y(),t.I0R(17,"div",5)(18,"app-i18n-input",13),t.SAx(19),t.aS0(20,14),t.k70(),t.C$Y(),t.wR5(21,"app-errors",12),t.C$Y(),t.I0R(22,"div",15)(23,"button",16),t.SAx(24),t.aS0(25,17),t.k70(),t.C$Y(),t.I0R(26,"button",18),t.qCj("click",function(){return s.cancel()}),t.SAx(27),t.aS0(28,19),t.k70(),t.C$Y()()()),2&n){const l=t.Gew(9);t.yG2(6),t.E7m("formGroup",s.form),t.yG2(4),t.E7m("formControlName","key")("valueContent",l),t.yG2(5),t.C0Y(15,s.form.value.key?15:-1),t.yG2(),t.E7m("errors",s.e("text")),t.yG2(5),t.E7m("errors",s.e("text")),t.yG2(2),t.E7m("showLoader",s.loading()),t.yG2(3),t.E7m("showLoader",s.loading())}},dependencies:[a.sl,a.sz,a.ue,a.u,a.uW,a.Wo,B.w,D.g,T.CI,T.Kw,u.my,u.cP,u.uO,x.b,d.aS,d.rD,f.q8,f.OO,b.Ux,R.s,O.XV],encapsulation:2,changeDetection:0})}return o})(),K=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.a4G({type:o});static#i=this.\u0275inj=t.s3X({imports:[S.qQ.forChild([(0,A.VV)(j,{path:"",closeable:!0,dismissible:!0,size:"m"})])]})}return o})()}}]);