"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[9168],{9168:(I,l,s)=>{s.r(l),s.d(l,{EditModule:()=>v});var o=s(1236),m=s(7552),t=s(4496),c=s(4476),h=s(2192),f=s(8256),g=s(1260),p=s(1128),u=s(3480),a=s(3616),d=s(8824);let E=(()=>{class n{constructor(){this.service=(0,t.uUt)(g.U),this.destroy$=(0,t.uUt)(u.UF),this.router=(0,t.uUt)(o.E5),this.route=(0,t.uUt)(o.gV),this.notifications=(0,t.uUt)(p.E),this._=(0,t.uUt)(c.OY).setTitle("Modify message for the reservation | La Porta D'Acqua"),this.item=(0,t.OCB)(null),this.loading=(0,t.OCB)(!1),this.itemId=null}ngOnInit(){this.route.params.pipe((0,a.a)(this.destroy$)).subscribe({next:i=>{this.itemId=Number(i.id),isNaN(this.itemId)?this.item.set(null):this.load(this.itemId)}})}submit(i){this.itemId&&(this.loading()||(this.loading.set(!0),this.service.update(this.itemId,{from_date:i.from_date?i.from_date.toString("YMD"):void 0,to_date:i.to_date?i.to_date.toString("YMD"):void 0,message:i.translations,turn_ids:(i.turns||[]).map(e=>e.id).filter(e=>"number"==typeof e&&e>0)}).pipe((0,a.a)(this.destroy$),(0,d.U)(()=>this.loading.set(!1))).subscribe({next:e=>{this.notifications.fireSnackBar("Updated."),this.router.navigate([".."],{relativeTo:this.route})},error:e=>{this.notifications.error((0,f.mk)(e))}})))}close(){this.router.navigate(["../"],{relativeTo:this.route})}load(i){this.loading.set(!0),this.service.show(i).pipe((0,a.a)(this.destroy$),(0,d.U)(()=>this.loading.set(!1))).subscribe({next:e=>this.item.set(e)})}static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-edit"]],standalone:!0,features:[t.M5G([u.UF]),t.UHJ],decls:3,vars:1,consts:()=>{let i;return i="Modify message to reservation.",[i,[3,"data","onSubmit","onCancel"]]},template:function(e,r){1&e&&(t.I0R(0,"h1"),t.aS0(1,0),t.C$Y(),t.I0R(2,"app-reservation-turn-message-form",1),t.qCj("onSubmit",function(T){return r.submit(T)})("onCancel",function(){return r.close()}),t.C$Y()),2&e&&(t.yG2(2),t.E7m("data",r.item()))},dependencies:[h.c],encapsulation:2,changeDetection:0})}return n})(),v=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275mod=t.a4G({type:n});static#i=this.\u0275inj=t.s3X({imports:[o.qQ.forChild([(0,m.VV)(E,{path:"",closeable:!0,dismissible:!0,size:"l"})])]})}return n})()}}]);