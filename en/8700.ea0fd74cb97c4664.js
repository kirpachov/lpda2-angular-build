"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[8700],{6120:(U,A,a)=>{a.r(A),a.d(A,{ViewDishModule:()=>mo});var C=a(1236),x=a(7552),e=a(4496),v=a(1264),g=a(3480),S=a(8676),d=a(1128),u=a(3616),f=a(4704),G=a(6684),w=a(4e3),ge=a(9212),p=a(8824),O=a(8256),I=a(7692),R=a(8212),ne=a(4436),D=a(1560),L=a(466),h=a(4336),E=a(1368),pe=a(5891),de=a(2904);function me(t,_){if(1&t&&e.wR5(0,"i"),2&t){const n=e.GaO();e.uQ9("align-self-center fas fa-fw fa-",n.icon,"")}}function Ce(t,_){if(1&t&&(e.I0R(0,"span",3),e.OEk(1),e.C$Y()),2&t){const n=e.GaO();e.yG2(),e.oRS(" ",n.humanStatus," ")}}const Se=[[["","title",""]]],Ee=t=>({color:t}),he=["[title]"];let Te=(()=>{class t extends de.c{constructor(){super(...arguments),this.configs={active:{text:"Active",color:"var(--tui-positive, lime)",icon:"check"},inactive:{text:"Inactive",color:"var(--tui-negative, red)",icon:"close"},deleted:{text:"Deleted",color:"red",icon:"trash"}}}static#e=this.\u0275fac=(()=>{let n;return function(o){return(n||(n=e.otF(t)))(o||t)}})();static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-dish-status"]],inputs:{status:"status"},standalone:!0,features:[e.eg9,e.UHJ],ngContentSelectors:he,decls:7,vars:5,consts:[[1,"d-flex","flex-column"],[1,"d-flex","flex-row",3,"ngStyle"],[3,"class",4,"ngIf"],[1,"align-self-center"],["customTitle",""],["class","align-self-center",4,"ngIf"]],template:function(i,o){if(1&i&&(e.kPM(Se),e.I0R(0,"span",0)(1,"span",1),e.yuY(2,me,1,3,"i",2),e.I0R(3,"span",3,4),e._Xx(5),e.C$Y(),e.yuY(6,Ce,2,1,"span",5),e.C$Y()()),2&i){const s=e.Gew(4);e.yG2(),e.E7m("ngStyle",e.S45(3,Ee,o.color)),e.yG2(),e.E7m("ngIf",o.validStatus&&o.validConfig),e.yG2(4),e.E7m("ngIf",!s.hasChildNodes())}},dependencies:[E.Qt,E.u_],encapsulation:2,changeDetection:0})}return t})();function fe(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",3),e.qCj("click",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.updateStatus("active"))}),e.wR5(1,"app-dish-status",7),e.C$Y()}2&t&&(e.yG2(),e.E7m("status","active"))}function Oe(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",3),e.qCj("click",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.updateStatus("inactive"))}),e.wR5(1,"app-dish-status",7),e.C$Y()}2&t&&(e.yG2(),e.E7m("status","inactive"))}function Ie(t,_){if(1&t){const n=e.KQA();e.I0R(0,"tui-data-list"),e.yuY(1,fe,2,1,"button",2)(2,Oe,2,1,"button",2),e.I0R(3,"button",3),e.qCj("click",function(){e.usT(n);const o=e.GaO();return e.CGJ(o.delete())}),e.I0R(4,"span",4)(5,"mat-icon",5),e.OEk(6,"delete"),e.C$Y(),e.I0R(7,"span"),e.aS0(8,6),e.C$Y()()()()}if(2&t){const n=e.GaO();e.yG2(),e.C0Y(1,"active"!=(null==n.dish?null:n.dish.status)?1:-1),e.yG2(),e.C0Y(2,"inactive"!=(null==n.dish?null:n.dish.status)?2:-1)}}const Ne=t=>({rotate180:t});function Me(t,_){if(1&t&&(e.I0R(0,"tui-hosted-dropdown",1,8)(2,"button",9)(3,"span",4),e.wR5(4,"app-dish-status",10),e.I0R(5,"mat-icon",11),e.OEk(6,"expand_more"),e.C$Y()()()()),2&t){const n=e.Gew(1),i=e.GaO(),o=e.Gew(1);e.E7m("content",o),e.yG2(4),e.E7m("status",i.dish.status),e.yG2(),e.E7m("ngClass",e.S45(3,Ne,n.open))}}let Ge=(()=>{class t{constructor(){this.notifications=(0,e.uUt)(d.E),this.destroy$=(0,e.uUt)(g.UF),this.deleteDish=new e._w7,this.statusChange=new e._w7,this.dishChange=new e._w7,this.dish=null}delete(){this.notifications.confirm("Are you sure you want to delete the dish?",{yes:"Yes, remove the dish.",no:"Cancel"}).pipe((0,u.a)(this.destroy$)).subscribe({next:n=>{n&&this.deleteDish.emit()}})}updateStatus(n){this.dish instanceof pe.S&&(this.dish.status=n,this.dishChange.emit(this.dish)),this.statusChange.emit(n)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-edit-dish-status"]],inputs:{dish:"dish"},outputs:{deleteDish:"deleteDish",statusChange:"statusChange",dishChange:"dishChange"},standalone:!0,features:[e.M5G([g.UF]),e.UHJ],decls:3,vars:1,consts:()=>{let n;return n="Delete",[["dropdownContent",""],[3,"content"],["tuiOption",""],["tuiOption","",3,"click"],[1,"flex","items-center"],[1,"me-1"],n,[3,"status"],["dropdown",""],["tuiButton","","type","button","appearance","outline","size","l"],[1,"me-1",3,"status"],[1,"animation-speed-2",3,"ngClass"]]},template:function(i,o){1&i&&e.yuY(0,Ie,9,2,"ng-template",null,0,e.gJz)(2,Me,7,5,"tui-hosted-dropdown",1),2&i&&(e.yG2(2),e.C0Y(2,o.dish&&o.dish.status?2:-1))},dependencies:[L.GE,L.Qw,h.A$,h.yi,h.sP,D.qL,R.CI,R.Kw,E.QF,Te],encapsulation:2})}return t})();var Re=a(5004),J=a(5e3),ie=a(8432),B=a(8016),z=a(1512),W=a(5193),y=a(8048),N=a(5656),H=a(6376),V=a(1104),P=a(3797),j=a(4856),X=a(9052),c=a(6504),Q=a(5892),$=a(3400),K=a(580),b=a(6096),q=a(6052),Z=a(9604),ee=a(7936),te=a(6732),Y=a(1040);function Ae(t,_){1&t&&(e.SAx(0),e.aS0(1,10),e.k70())}function De(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=_.polymorpheusOutlet;e.yG2(),e.oRS(" ",n," ")}}function ye(t,_){if(1&t&&e.yuY(0,De,2,1,"ng-container",11),2&t){const n=e.GaO(2);e.E7m("polymorpheusOutlet",n.optionTemplate$())}}function $e(t,_){1&t&&e.C_f(0)}const oe=(t,_)=>({$implicit:t,injector:_});function xe(t,_){if(1&t&&e.yuY(0,$e,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.optionTemplate$())("polymorpheusOutletContext",e.IBC(2,oe,n,i.injector))}}function ve(t,_){1&t&&e.C_f(0)}const _e=t=>({data:t});function Le(t,_){if(1&t&&e.yuY(0,ve,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.optionTemplate$())("polymorpheusOutletContext",e.S45(2,_e,n))}}function Pe(t,_){if(1&t&&e.wR5(0,"div",13),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("innerText",i.stringify(n))}}function be(t,_){if(1&t&&e.yuY(0,ye,1,1)(1,xe,1,5)(2,Le,1,4)(3,Pe,1,1),2&t){const n=e.GaO();let i;e.C0Y(0,"text"===(i=n.optionTemplateType$())?0:"template"===i?1:"component"===i?2:3)}}function He(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=_.polymorpheusOutlet;e.yG2(),e.oRS(" ",n," ")}}function ke(t,_){if(1&t&&e.yuY(0,He,2,1,"ng-container",11),2&t){const n=e.GaO(2);e.E7m("polymorpheusOutlet",n.nativeOptionTemplate$())}}function Ye(t,_){1&t&&e.C_f(0)}function Ue(t,_){if(1&t&&e.yuY(0,Ye,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.nativeOptionTemplate$())("polymorpheusOutletContext",e.IBC(2,oe,n,i.injector))}}function we(t,_){1&t&&e.C_f(0)}function ze(t,_){if(1&t&&e.yuY(0,we,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.nativeOptionTemplate$())("polymorpheusOutletContext",e.S45(2,_e,n))}}function Be(t,_){if(1&t&&e.wR5(0,"div",13),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("innerText",i.stringify(n))}}function Xe(t,_){if(1&t&&e.yuY(0,ke,1,1)(1,Ue,1,5)(2,ze,1,4)(3,Be,1,1),2&t){const n=e.GaO();let i;e.C0Y(0,"text"===(i=n.nativeOptionTemplateType$())?0:"template"===i?1:"component"===i?2:3)}}function Fe(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=e.GaO(2);e.yG2(),e.oRS(" ",n.placeholder," ")}}function Je(t,_){if(1&t&&(e.I0R(0,"span",null,14),e._Xx(2),e.C$Y(),e.yuY(3,Fe,2,1,"ng-container",15)),2&t){const n=e.Gew(1);e.yG2(3),e.E7m("ngIf",!n.hasChildNodes())}}function We(t,_){1&t&&(e.SAx(0),e.aS0(1,19),e.k70())}function Ve(t,_){if(1&t&&(e.I0R(0,"span"),e.OEk(1),e.C$Y()),2&t){const n=e.GaO(2);e.yG2(),e.cNF(n.emptyContentString())}}function je(t,_){1&t&&e.C_f(0)}function Qe(t,_){if(1&t&&(e.SAx(0),e.yuY(1,je,1,0,"ng-container",8),e.k70()),2&t){const n=e.GaO(4);e.yG2(),e.E7m("ngTemplateOutlet",n.emptyContentTemplate())}}function Ke(t,_){if(1&t&&(e.SAx(0),e.yuY(1,Qe,2,1,"ng-container",20),e.k70()),2&t){e.GaO(2);const n=e.Gew(6),i=e.GaO();e.yG2(),e.E7m("ngIf",i.emptyContentTemplate())("ngIfElse",n)}}function qe(t,_){if(1&t&&(e.SAx(0),e.yuY(1,Ke,2,2,"ng-container",20),e.k70()),2&t){e.GaO();const n=e.Gew(4),i=e.GaO();e.yG2(),e.E7m("ngIf",i.emptyContent$())("ngIfElse",n)}}function Ze(t,_){if(1&t&&(e.I0R(0,"span",null,16),e._Xx(2,1),e.C$Y(),e.yuY(3,We,2,0,"ng-template",null,17,e.gJz)(5,Ve,2,1,"ng-template",null,18,e.gJz)(7,qe,2,2,"ng-container",15)),2&t){const n=e.Gew(1);e.yG2(7),e.E7m("ngIf",!n.hasChildNodes())}}function et(t,_){1&t&&e.wR5(0,"tui-loader")}function tt(t,_){1&t&&e.C_f(0)}function nt(t,_){if(1&t&&e.yuY(0,tt,1,0,"ng-container",8),2&t){e.GaO(2);const n=e.Gew(9);e.E7m("ngTemplateOutlet",n)}}function it(t,_){1&t&&e.C_f(0)}function ot(t,_){if(1&t&&(e.SAx(0),e.yuY(1,it,1,0,"ng-container",8),e.k70()),2&t){e.GaO(2);const n=e.Gew(11);e.yG2(),e.E7m("ngTemplateOutlet",n)}}function _t(t,_){if(1&t&&e.yuY(0,nt,1,1,"ng-template",null,21,e.gJz)(2,ot,2,1,"ng-container",20),2&t){const n=e.Gew(1),i=e.GaO();e.yG2(2),e.E7m("ngIf",i.loading())("ngIfElse",n)}}function st(t,_){1&t&&e.C_f(0)}function at(t,_){1&t&&e.C_f(0)}function lt(t,_){1&t&&e.C_f(0)}function ct(t,_){if(1&t&&(e.SAx(0),e.yuY(1,lt,1,0,"ng-container",8),e.k70()),2&t){e.GaO(4);const n=e.Gew(11);e.yG2(),e.E7m("ngTemplateOutlet",n)}}function rt(t,_){1&t&&e.C_f(0)}function ut(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",28)(1,"span",29),e.qCj("click",function(){e.usT(n);const o=e.GaO(4);return e.CGJ(o.loadMoreItems())}),e.yuY(2,rt,1,0,"ng-container",20),e.C$Y()()}if(2&t){const n=e.GaO(4),i=e.Gew(1);e.E7m("size",n.optionSize)("disabled",!0),e.yG2(2),e.E7m("ngIf",n.loadMore)("ngIfElse",i)}}function gt(t,_){if(1&t&&(e.SAx(0),e.yuY(1,ct,2,1,"ng-container",15)(2,ut,3,4,"button",27),e.k70()),2&t){const n=e.GaO(3);e.yG2(),e.E7m("ngIf",n.loading),e.yG2(),e.E7m("ngIf",!n.loading)}}const pt=t=>({$implicit:t});function dt(t,_){if(1&t){const n=e.KQA();e.SAx(0),e.I0R(1,"button",25),e.qCj("mouseenter",function(){const o=e.usT(n),s=o.index,l=o.last,r=e.GaO(2);return e.CGJ(r.optionMouseEnter(s,l))})("focus",function(){const o=e.usT(n),s=o.index,l=o.last,r=e.GaO(2);return e.CGJ(r.optionFocus(s,l))}),e.yuY(2,at,1,0,"ng-container",26),e.C$Y(),e.yuY(3,gt,3,2,"ng-container",15),e.k70()}if(2&t){const n=_.$implicit,i=_.last,o=e.GaO(2),s=e.Gew(5);e.yG2(),e.E7m("size",o.optionSize)("value",n)("disabled",o.disabledItemHandler(n)),e.yG2(),e.E7m("ngTemplateOutlet",s)("ngTemplateOutletContext",e.S45(6,pt,n)),e.yG2(),e.E7m("ngIf",i&&o.thereAreMoreItems)}}function mt(t,_){if(1&t){const n=e.KQA();e.I0R(0,"span",33),e.qCj("click",function(){e.usT(n);const o=e.GaO(3);return e.CGJ(o.createNew.emit())}),e.I0R(1,"mat-icon"),e.OEk(2,"add"),e.C$Y(),e.I0R(3,"span"),e.aS0(4,34),e.C$Y()()}}function Ct(t,_){if(1&t&&(e.I0R(0,"button",30)(1,"span",null,31),e._Xx(3,2),e.C$Y(),e.yuY(4,mt,5,0,"span",32),e.C$Y()),2&t){const n=e.Gew(2),i=e.GaO(2);e.E7m("size",i.optionSize)("value",null)("disabled",!0),e.yG2(4),e.E7m("ngIf",!n.hasChildNodes())}}function St(t,_){if(1&t&&(e.I0R(0,"tui-data-list",22),e.yuY(1,dt,4,8,"ng-container",23)(2,Ct,5,4,"button",24),e.C$Y()),2&t){const n=e.GaO(),i=e.Gew(13);e.E7m("emptyContent",i),e.yG2(),e.E7m("ngForOf",n.items()),e.yG2(),e.E7m("ngIf",n.showCreateNew)}}const Et=["*",[["","empty-content",""]],[["","create-new",""]]],ht=["*","[empty-content]","[create-new]"];let Tt=(()=>{class t extends K.m{constructor(){super(),this.stringify=n=>n.name??"",this.service=(0,e.uUt)(ie.K)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-ingredient-select"]],inputs:{outputType:"outputType",multiple:"multiple",service:"service",stringify:"stringify",query:"query",autofocus:"autofocus",placeholder:"placeholder",optionTemplate:"optionTemplate",stringifyOption:"stringifyOption",inputSize:"inputSize",page:"page",per_page:"per_page",optionSize:"optionSize",disabledItemHandler:"disabledItemHandler",loadMoreOnLastItem:"loadMoreOnLastItem",emptyContent:"emptyContent",showCreateNew:"showCreateNew",nativeOptionTemplate:"nativeOptionTemplate",filters:"filters"},outputs:{httpError:"httpError",pageChange:"pageChange",queryChange:"queryChange",per_pageChange:"per_pageChange",createNew:"createNew"},standalone:!0,features:[e.M5G([{provide:c.Y6,useExisting:(0,e.wd)(()=>t),multi:!0},g.UF]),e.eg9,e.UHJ],ngContentSelectors:ht,decls:17,vars:5,consts:()=>{let n,i,o;return n="Load more",i="We found nothing.",o="Create new",[["loadMoreDefault",""],["valueContent",""],["nativeOptionTemplate",""],["placeholderTemplate",""],["nativeEmptyContentTemplate",""],["loadingTemplate",""],["loadingOrEmptyContent",""],[3,"stringify","tuiTextfieldSize","formControl","valueContent","searchChange"],[4,"ngTemplateOutlet"],[3,"emptyContent",4,"tuiDataList"],n,[4,"polymorpheusOutlet"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],[3,"innerText"],["customContent",""],[4,"ngIf"],["customEmptyContent",""],["defaultEmptyContent",""],["emptyContentCustomString",""],i,[4,"ngIf","ngIfElse"],["empty",""],[3,"emptyContent"],[4,"ngFor","ngForOf"],["tuiOption","",3,"size","value","disabled",4,"ngIf"],["tuiOption","",3,"size","value","disabled","mouseenter","focus"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tuiOption","",3,"size","disabled",4,"ngIf"],["tuiOption","",3,"size","disabled"],["role","button",3,"click"],["tuiOption","",3,"size","value","disabled"],["createNewCustomTemplate",""],["role","button","class","d-flex align-items-center",3,"click",4,"ngIf"],["role","button",1,"d-flex","align-items-center",3,"click"],o]},template:function(i,o){if(1&i&&(e.kPM(Et),e.yuY(0,Ae,2,0,"ng-template",null,0,e.gJz)(2,be,4,1,"ng-template",null,1,e.gJz)(4,Xe,4,1,"ng-template",null,2,e.gJz)(6,Je,4,1,"ng-template",null,3,e.gJz)(8,Ze,8,1,"ng-template",null,4,e.gJz)(10,et,1,0,"ng-template",null,5,e.gJz)(12,_t,3,2,"ng-template",null,6,e.gJz),e.I0R(14,"tui-combo-box",7),e.qCj("searchChange",function(l){return o.onSearchChange(l)}),e.yuY(15,st,1,0,"ng-container",8)(16,St,3,3,"tui-data-list",9),e.C$Y()),2&i){const s=e.Gew(3),l=e.Gew(7);e.yG2(14),e.E7m("stringify",o.stringify)("tuiTextfieldSize",o.inputSize)("formControl",o.control)("valueContent",s),e.yG2(),e.E7m("ngTemplateOutlet",l)}},dependencies:[E.MD,E.ay,E.u_,E.XV,b.uk,b.i_,b.qI,y.aS,y.rD,ee.KA,P.CQ,h.A$,h.yi,h.sP,h.Ux,q.q8,c.sl,c.ue,c.ug,te.kR,Z.CA,I.Sk,I.Cb,Y.Ux,Y.Af,D.oB,D.qL],changeDetection:0})}return t})();var F=a(1343);const ft=(t,_)=>_.id;function Ot(t,_){if(1&t&&e.wR5(0,"app-show-image",16),2&t){const n=e.GaO().$implicit;e.E7m("image",n.image)}}function It(t,_){1&t&&(e.SAx(0),e.aS0(1,17),e.k70())}function Nt(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",18),e.qCj("click",function(){e.usT(n);const o=e.GaO().$implicit,s=e.GaO();return e.CGJ(s.remove(o))}),e.SAx(1),e.aS0(2,19),e.k70(),e.C$Y()}}function Mt(t,_){if(1&t&&(e.I0R(0,"tui-island",8)(1,"div",9)(2,"span",5),e.yuY(3,Ot,1,1,"app-show-image",10),e.I0R(4,"div"),e.OEk(5),e.C$Y()(),e.I0R(6,"div",5),e.yuY(7,It,2,0,"ng-template",null,11,e.gJz),e.I0R(9,"button",12)(10,"mat-icon"),e.OEk(11,"drag_handle"),e.C$Y()(),e.yuY(12,Nt,3,0,"ng-template",null,13,e.gJz),e.I0R(14,"tui-hosted-dropdown",14)(15,"button",15)(16,"mat-icon"),e.OEk(17,"delete"),e.C$Y()()()()()()),2&t){const n=_.$implicit,i=e.Gew(8),o=e.Gew(13);e.yG2(3),e.E7m("ngIf",n&&n.image),e.yG2(2),e.oRS(" ",n.name," "),e.yG2(4),e.E7m("tuiHint",i),e.yG2(5),e.E7m("content",o)}}function Gt(t,_){1&t&&(e.I0R(0,"p"),e.SAx(1),e.aS0(2,20),e.k70(),e.C$Y())}const Rt=t=>({avoid_associated_dish_id:t});function At(t,_){if(1&t){const n=e.KQA();e.I0R(0,"tui-loader",21)(1,"form",22),e.qCj("ngSubmit",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.addIngredient())}),e.I0R(2,"div",23)(3,"app-ingredient-select",24),e.SAx(4),e.aS0(5,25),e.k70(),e.C$Y()(),e.I0R(6,"div",5)(7,"button",26),e.SAx(8),e.aS0(9,27),e.k70(),e.C$Y(),e.I0R(10,"button",28),e.qCj("click",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.dismissAddIngredient())}),e.SAx(11),e.aS0(12,29),e.k70(),e.C$Y()()()()}if(2&t){const n=e.GaO(2);e.E7m("overlay",!0)("showLoader",n.associatingIngredient()),e.yG2(),e.E7m("formGroup",n.newIngredientForm),e.yG2(2),e.E7m("filters",e.S45(5,Rt,n.dish.id))("formControlName","ingredient")}}function Dt(t,_){1&t&&e.OEk(0," no dish or dish.id ")}function yt(t,_){if(1&t&&e.yuY(0,At,13,7,"tui-loader",21)(1,Dt,1,0),2&t){const n=e.GaO();e.C0Y(0,n.dish&&n.dish.id?0:1)}}let $t=(()=>{class t{constructor(){this.ingredientsService=(0,e.uUt)(ie.K),this.dishesService=(0,e.uUt)(S.k),this.destroy$=(0,e.uUt)(g.UF),this.notifications=(0,e.uUt)(d.E),this.dialogs=(0,e.uUt)(B._k),this.dishChange=new e._w7,this.dish=null,this.searching=(0,e.OCB)(!1),this.deleting=(0,e.OCB)(!1),this.moving=(0,e.OCB)(!1),this.associatingIngredient=(0,e.OCB)(!1),this.removingIngredient=(0,e.OCB)(!1),this.loading=(0,e.S6b)(()=>this.searching()||this.deleting()||this.moving()||this.associatingIngredient()||this.removingIngredient()),this.ordering=(0,e.OCB)(!1),this.data=(0,e.OCB)(null),this.items=(0,e.S6b)(()=>this.data()?.items??[]),this.newIngredientForm=new c.WC({ingredient:new c.Ku(null,c.AQ.required)})}ngOnChanges(n){n.dish&&this.search()}search(n=this.defaultFilters()){this.searchSub?.unsubscribe(),this.searching.set(!0),this.searchSub=this.ingredientsService.search(n).pipe((0,u.a)(this.destroy$),(0,p.U)(()=>this.searching.set(!1))).subscribe({next:i=>this.data.set(i),error:i=>{this.data.set(null),this.notifications.error((0,O.mk)(i)||"Something went wrong. Please try again later.")}})}drop(n){if(n.previousIndex===n.currentIndex)return;const i=this.items(),o=i[n.previousIndex]?.id,s=this.dish?.id;o&&s&&((0,$.qv)(i,n.previousIndex,n.currentIndex),this.moving.set(!0),this.dishesService.moveIngredient(s,o,n.currentIndex).pipe((0,u.a)(this.destroy$),(0,p.U)(()=>this.moving.set(!1)),(0,p.U)(()=>this.search())).subscribe({error:l=>this.notifications.error((0,O.mk)(l)||"Something went wrong.")}))}remove(n){const i=this.dish?.id,o=n.id;i&&o&&(this.removingIngredient.set(!0),this.dishesService.removeIngredient(i,o).pipe((0,u.a)(this.destroy$),(0,p.U)(()=>this.removingIngredient.set(!1)),(0,p.U)(()=>this.search())).subscribe((0,F.I)()))}triggerOrdering(){this.ordering()||this.notifications.fireSnackBar("\n           Move the dishes by dragging them with the button on the right side of\n          each category. \n        ","Understood.",{duration:5e3}),this.ordering.set(!this.ordering())}dismissAddIngredient(){this.addIngredientModal?.unsubscribe(),this.newIngredientForm.reset()}showAddIngredient(n){this.addIngredientModal=this.dialogs.open(n).subscribe()}addIngredient(){const n=this.dish?.id,i=this.newIngredientForm.get("ingredient")?.value?.id;this.newIngredientForm.valid&&i&&n&&(this.associatingIngredient.set(!0),this.dishesService.addIngredient(n,i).pipe((0,u.a)(this.destroy$),(0,p.U)(()=>this.dismissAddIngredient()),(0,p.U)(()=>this.search()),(0,p.U)(()=>this.associatingIngredient.set(!1))).subscribe({error:o=>this.notifications.error((0,O.mk)(o)||"Something went wrong.")}))}defaultFilters(){const n={};return this.dish&&this.dish.id&&(n.associated_dish_id=this.dish.id),n}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-dish-ingredients"]],inputs:{dish:"dish"},outputs:{dishChange:"dishChange"},standalone:!0,features:[e.M5G([g.UF]),e.SYr,e.UHJ],decls:15,vars:1,consts:()=>{let n,i,o,s,l,r,M,T;return n="Ingredients",i="Add ingredient",o="Drag to sort.",s="Remove ingredient from the dish.",l="There are no ingredients.",r="Search ingredient",M="Add to the dish.",T="Cancel",[[3,"click"],n,["cdkDropList","",1,"items-list",3,"cdkDropListDropped"],["addModal",""],["type","button","size","m","appearance","flat","tuiButton","",3,"click"],[1,"flex","items-center"],[1,"me-1"],i,["cdkDrag","",1,"mb-2"],[1,"flex","justify-between","items-center"],["style","max-width: 100px;","class","inline-block rounded me-2",3,"image",4,"ngIf"],["dragHint",""],["size","m","cdkDragHandle","","tuiIconButton","","type","button","appearance","outline",1,"me-2",3,"tuiHint"],["deleteDropdown",""],[3,"content"],["size","m","tuiIconButton","","type","button","appearance","outline"],[1,"inline-block","rounded","me-2",2,"max-width","100px",3,"image"],o,["tuiButton","","appearance","secondary-destructive","type","button",1,"m-4",3,"click"],s,l,[3,"overlay","showLoader"],[3,"formGroup","ngSubmit"],[1,"mb-4"],[3,"filters","formControlName"],r,["tuiButton","","size","m","type","submit",1,"me-2"],M,["type","button","appearance","outline","tuiButton","","size","m",3,"click"],T,["cdkDrag","","class","mb-2"]]},template:function(i,o){if(1&i){const s=e.KQA();e.I0R(0,"h4",0),e.qCj("click",function(){return o.search()}),e.SAx(1),e.aS0(2,1),e.k70(),e.C$Y(),e.I0R(3,"div",2),e.qCj("cdkDropListDropped",function(r){return o.drop(r)}),e.c53(4,Mt,18,4,"tui-island",30,ft,!1,Gt,3,0,"p"),e.C$Y(),e.yuY(7,yt,2,1,"ng-template",null,3,e.gJz),e.I0R(9,"button",4),e.qCj("click",function(){e.usT(s);const r=e.Gew(8);return e.CGJ(o.showAddIngredient(r))}),e.I0R(10,"span",5)(11,"mat-icon",6),e.OEk(12,"add"),e.C$Y(),e.I0R(13,"span"),e.aS0(14,7),e.C$Y()()()}2&i&&(e.yG2(4),e.oho(o.items()))},dependencies:[z.w,D.qL,L.GE,L.Qw,R.CI,R.Kw,H.k,H.C,V.t,W.ms,h.A$,E.u_,X.y,c.sl,c.sz,c.ue,c.u,c.uW,c.Wo,P.CQ,J.m6,y.aS,I.Sk,I.Cb,Q.yy,$.Cm,$.w5,$.A3,N.WY,N.lh,N.SL,N.i6,N.IT,j.Gs,Tt],styles:["[_nghost-%COMP%]   .items-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   tui-island[cdkDrag][_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   .items-list[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .items-list[_ngcontent-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   [cdkDragHandle][_ngcontent-%COMP%]{cursor:move}"],changeDetection:0})}return t})();var se=a(7307);function xt(t,_){1&t&&(e.SAx(0),e.aS0(1,10),e.k70())}function vt(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=_.polymorpheusOutlet;e.yG2(),e.oRS(" ",n," ")}}function Lt(t,_){if(1&t&&e.yuY(0,vt,2,1,"ng-container",11),2&t){const n=e.GaO(2);e.E7m("polymorpheusOutlet",n.optionTemplate$())}}function Pt(t,_){1&t&&e.C_f(0)}const ae=(t,_)=>({$implicit:t,injector:_});function bt(t,_){if(1&t&&e.yuY(0,Pt,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.optionTemplate$())("polymorpheusOutletContext",e.IBC(2,ae,n,i.injector))}}function Ht(t,_){1&t&&e.C_f(0)}const le=t=>({data:t});function kt(t,_){if(1&t&&e.yuY(0,Ht,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.optionTemplate$())("polymorpheusOutletContext",e.S45(2,le,n))}}function Yt(t,_){if(1&t&&e.wR5(0,"div",13),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("innerText",i.stringify(n))}}function Ut(t,_){if(1&t&&e.yuY(0,Lt,1,1)(1,bt,1,5)(2,kt,1,4)(3,Yt,1,1),2&t){const n=e.GaO();let i;e.C0Y(0,"text"===(i=n.optionTemplateType$())?0:"template"===i?1:"component"===i?2:3)}}function wt(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=_.polymorpheusOutlet;e.yG2(),e.oRS(" ",n," ")}}function zt(t,_){if(1&t&&e.yuY(0,wt,2,1,"ng-container",11),2&t){const n=e.GaO(2);e.E7m("polymorpheusOutlet",n.nativeOptionTemplate$())}}function Bt(t,_){1&t&&e.C_f(0)}function Xt(t,_){if(1&t&&e.yuY(0,Bt,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.nativeOptionTemplate$())("polymorpheusOutletContext",e.IBC(2,ae,n,i.injector))}}function Ft(t,_){1&t&&e.C_f(0)}function Jt(t,_){if(1&t&&e.yuY(0,Ft,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.nativeOptionTemplate$())("polymorpheusOutletContext",e.S45(2,le,n))}}function Wt(t,_){if(1&t&&e.wR5(0,"div",13),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("innerText",i.stringify(n))}}function Vt(t,_){if(1&t&&e.yuY(0,zt,1,1)(1,Xt,1,5)(2,Jt,1,4)(3,Wt,1,1),2&t){const n=e.GaO();let i;e.C0Y(0,"text"===(i=n.nativeOptionTemplateType$())?0:"template"===i?1:"component"===i?2:3)}}function jt(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=e.GaO(2);e.yG2(),e.oRS(" ",n.placeholder," ")}}function Qt(t,_){if(1&t&&(e.I0R(0,"span",null,14),e._Xx(2),e.C$Y(),e.yuY(3,jt,2,1,"ng-container",15)),2&t){const n=e.Gew(1);e.yG2(3),e.E7m("ngIf",!n.hasChildNodes())}}function Kt(t,_){1&t&&(e.SAx(0),e.aS0(1,19),e.k70())}function qt(t,_){if(1&t&&(e.I0R(0,"span"),e.OEk(1),e.C$Y()),2&t){const n=e.GaO(2);e.yG2(),e.cNF(n.emptyContentString())}}function Zt(t,_){1&t&&e.C_f(0)}function en(t,_){if(1&t&&(e.SAx(0),e.yuY(1,Zt,1,0,"ng-container",8),e.k70()),2&t){const n=e.GaO(4);e.yG2(),e.E7m("ngTemplateOutlet",n.emptyContentTemplate())}}function tn(t,_){if(1&t&&(e.SAx(0),e.yuY(1,en,2,1,"ng-container",20),e.k70()),2&t){e.GaO(2);const n=e.Gew(6),i=e.GaO();e.yG2(),e.E7m("ngIf",i.emptyContentTemplate())("ngIfElse",n)}}function nn(t,_){if(1&t&&(e.SAx(0),e.yuY(1,tn,2,2,"ng-container",20),e.k70()),2&t){e.GaO();const n=e.Gew(4),i=e.GaO();e.yG2(),e.E7m("ngIf",i.emptyContent$())("ngIfElse",n)}}function on(t,_){if(1&t&&(e.I0R(0,"span",null,16),e._Xx(2,1),e.C$Y(),e.yuY(3,Kt,2,0,"ng-template",null,17,e.gJz)(5,qt,2,1,"ng-template",null,18,e.gJz)(7,nn,2,2,"ng-container",15)),2&t){const n=e.Gew(1);e.yG2(7),e.E7m("ngIf",!n.hasChildNodes())}}function _n(t,_){1&t&&e.wR5(0,"tui-loader")}function sn(t,_){1&t&&e.C_f(0)}function an(t,_){if(1&t&&e.yuY(0,sn,1,0,"ng-container",8),2&t){e.GaO(2);const n=e.Gew(9);e.E7m("ngTemplateOutlet",n)}}function ln(t,_){1&t&&e.C_f(0)}function cn(t,_){if(1&t&&(e.SAx(0),e.yuY(1,ln,1,0,"ng-container",8),e.k70()),2&t){e.GaO(2);const n=e.Gew(11);e.yG2(),e.E7m("ngTemplateOutlet",n)}}function rn(t,_){if(1&t&&e.yuY(0,an,1,1,"ng-template",null,21,e.gJz)(2,cn,2,1,"ng-container",20),2&t){const n=e.Gew(1),i=e.GaO();e.yG2(2),e.E7m("ngIf",i.loading())("ngIfElse",n)}}function un(t,_){1&t&&e.C_f(0)}function gn(t,_){1&t&&e.C_f(0)}function pn(t,_){1&t&&e.C_f(0)}function dn(t,_){if(1&t&&(e.SAx(0),e.yuY(1,pn,1,0,"ng-container",8),e.k70()),2&t){e.GaO(4);const n=e.Gew(11);e.yG2(),e.E7m("ngTemplateOutlet",n)}}function mn(t,_){1&t&&e.C_f(0)}function Cn(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",28)(1,"span",29),e.qCj("click",function(){e.usT(n);const o=e.GaO(4);return e.CGJ(o.loadMoreItems())}),e.yuY(2,mn,1,0,"ng-container",20),e.C$Y()()}if(2&t){const n=e.GaO(4),i=e.Gew(1);e.E7m("size",n.optionSize)("disabled",!0),e.yG2(2),e.E7m("ngIf",n.loadMore)("ngIfElse",i)}}function Sn(t,_){if(1&t&&(e.SAx(0),e.yuY(1,dn,2,1,"ng-container",15)(2,Cn,3,4,"button",27),e.k70()),2&t){const n=e.GaO(3);e.yG2(),e.E7m("ngIf",n.loading),e.yG2(),e.E7m("ngIf",!n.loading)}}const En=t=>({$implicit:t});function hn(t,_){if(1&t){const n=e.KQA();e.SAx(0),e.I0R(1,"button",25),e.qCj("mouseenter",function(){const o=e.usT(n),s=o.index,l=o.last,r=e.GaO(2);return e.CGJ(r.optionMouseEnter(s,l))})("focus",function(){const o=e.usT(n),s=o.index,l=o.last,r=e.GaO(2);return e.CGJ(r.optionFocus(s,l))}),e.yuY(2,gn,1,0,"ng-container",26),e.C$Y(),e.yuY(3,Sn,3,2,"ng-container",15),e.k70()}if(2&t){const n=_.$implicit,i=_.last,o=e.GaO(2),s=e.Gew(5);e.yG2(),e.E7m("size",o.optionSize)("value",n)("disabled",o.disabledItemHandler(n)),e.yG2(),e.E7m("ngTemplateOutlet",s)("ngTemplateOutletContext",e.S45(6,En,n)),e.yG2(),e.E7m("ngIf",i&&o.thereAreMoreItems)}}function Tn(t,_){if(1&t){const n=e.KQA();e.I0R(0,"span",33),e.qCj("click",function(){e.usT(n);const o=e.GaO(3);return e.CGJ(o.createNew.emit())}),e.I0R(1,"mat-icon"),e.OEk(2,"add"),e.C$Y(),e.I0R(3,"span"),e.aS0(4,34),e.C$Y()()}}function fn(t,_){if(1&t&&(e.I0R(0,"button",30)(1,"span",null,31),e._Xx(3,2),e.C$Y(),e.yuY(4,Tn,5,0,"span",32),e.C$Y()),2&t){const n=e.Gew(2),i=e.GaO(2);e.E7m("size",i.optionSize)("value",null)("disabled",!0),e.yG2(4),e.E7m("ngIf",!n.hasChildNodes())}}function On(t,_){if(1&t&&(e.I0R(0,"tui-data-list",22),e.yuY(1,hn,4,8,"ng-container",23)(2,fn,5,4,"button",24),e.C$Y()),2&t){const n=e.GaO(),i=e.Gew(13);e.E7m("emptyContent",i),e.yG2(),e.E7m("ngForOf",n.items()),e.yG2(),e.E7m("ngIf",n.showCreateNew)}}const In=["*",[["","empty-content",""]],[["","create-new",""]]],Nn=["*","[empty-content]","[create-new]"];let Mn=(()=>{class t extends K.m{constructor(){super(),this.stringify=n=>n.name??"",this.service=(0,e.uUt)(se._)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-allergen-select"]],inputs:{outputType:"outputType",multiple:"multiple",service:"service",stringify:"stringify",query:"query",autofocus:"autofocus",placeholder:"placeholder",optionTemplate:"optionTemplate",stringifyOption:"stringifyOption",inputSize:"inputSize",page:"page",per_page:"per_page",optionSize:"optionSize",disabledItemHandler:"disabledItemHandler",loadMoreOnLastItem:"loadMoreOnLastItem",emptyContent:"emptyContent",showCreateNew:"showCreateNew",nativeOptionTemplate:"nativeOptionTemplate",filters:"filters"},outputs:{httpError:"httpError",pageChange:"pageChange",queryChange:"queryChange",per_pageChange:"per_pageChange",createNew:"createNew"},standalone:!0,features:[e.M5G([{provide:c.Y6,useExisting:(0,e.wd)(()=>t),multi:!0},g.UF]),e.eg9,e.UHJ],ngContentSelectors:Nn,decls:17,vars:5,consts:()=>{let n,i,o;return n="Load more",i="We found nothing.",o="Create new",[["loadMoreDefault",""],["valueContent",""],["nativeOptionTemplate",""],["placeholderTemplate",""],["nativeEmptyContentTemplate",""],["loadingTemplate",""],["loadingOrEmptyContent",""],[3,"stringify","tuiTextfieldSize","formControl","valueContent","searchChange"],[4,"ngTemplateOutlet"],[3,"emptyContent",4,"tuiDataList"],n,[4,"polymorpheusOutlet"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],[3,"innerText"],["customContent",""],[4,"ngIf"],["customEmptyContent",""],["defaultEmptyContent",""],["emptyContentCustomString",""],i,[4,"ngIf","ngIfElse"],["empty",""],[3,"emptyContent"],[4,"ngFor","ngForOf"],["tuiOption","",3,"size","value","disabled",4,"ngIf"],["tuiOption","",3,"size","value","disabled","mouseenter","focus"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tuiOption","",3,"size","disabled",4,"ngIf"],["tuiOption","",3,"size","disabled"],["role","button",3,"click"],["tuiOption","",3,"size","value","disabled"],["createNewCustomTemplate",""],["role","button","class","d-flex align-items-center",3,"click",4,"ngIf"],["role","button",1,"d-flex","align-items-center",3,"click"],o]},template:function(i,o){if(1&i&&(e.kPM(In),e.yuY(0,xt,2,0,"ng-template",null,0,e.gJz)(2,Ut,4,1,"ng-template",null,1,e.gJz)(4,Vt,4,1,"ng-template",null,2,e.gJz)(6,Qt,4,1,"ng-template",null,3,e.gJz)(8,on,8,1,"ng-template",null,4,e.gJz)(10,_n,1,0,"ng-template",null,5,e.gJz)(12,rn,3,2,"ng-template",null,6,e.gJz),e.I0R(14,"tui-combo-box",7),e.qCj("searchChange",function(l){return o.onSearchChange(l)}),e.yuY(15,un,1,0,"ng-container",8)(16,On,3,3,"tui-data-list",9),e.C$Y()),2&i){const s=e.Gew(3),l=e.Gew(7);e.yG2(14),e.E7m("stringify",o.stringify)("tuiTextfieldSize",o.inputSize)("formControl",o.control)("valueContent",s),e.yG2(),e.E7m("ngTemplateOutlet",l)}},dependencies:[E.MD,E.ay,E.u_,E.XV,b.uk,b.i_,b.qI,y.aS,y.rD,ee.KA,P.CQ,h.A$,h.yi,h.sP,h.Ux,q.q8,c.sl,c.ue,c.ug,te.kR,Z.CA,I.Sk,I.Cb,Y.Ux,Y.Af,D.oB,D.qL],changeDetection:0})}return t})();const Gn=(t,_)=>_.id;function Rn(t,_){if(1&t&&e.wR5(0,"app-show-image",16),2&t){const n=e.GaO().$implicit;e.E7m("image",n.image)}}function An(t,_){1&t&&(e.SAx(0),e.aS0(1,17),e.k70())}function Dn(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",18),e.qCj("click",function(){e.usT(n);const o=e.GaO().$implicit,s=e.GaO();return e.CGJ(s.remove(o))}),e.SAx(1),e.aS0(2,19),e.k70(),e.C$Y()}}function yn(t,_){if(1&t&&(e.I0R(0,"tui-island",8)(1,"div",9)(2,"span",5),e.yuY(3,Rn,1,1,"app-show-image",10),e.I0R(4,"div"),e.OEk(5),e.C$Y()(),e.I0R(6,"div",5),e.yuY(7,An,2,0,"ng-template",null,11,e.gJz),e.I0R(9,"button",12)(10,"mat-icon"),e.OEk(11,"drag_handle"),e.C$Y()(),e.yuY(12,Dn,3,0,"ng-template",null,13,e.gJz),e.I0R(14,"tui-hosted-dropdown",14)(15,"button",15)(16,"mat-icon"),e.OEk(17,"delete"),e.C$Y()()()()()()),2&t){const n=_.$implicit,i=e.Gew(8),o=e.Gew(13);e.yG2(3),e.E7m("ngIf",n&&n.image),e.yG2(2),e.oRS(" ",n.name," "),e.yG2(4),e.E7m("tuiHint",i),e.yG2(5),e.E7m("content",o)}}function $n(t,_){1&t&&(e.I0R(0,"p"),e.SAx(1),e.aS0(2,20),e.k70(),e.C$Y())}const xn=t=>({avoid_associated_dish_id:t});function vn(t,_){if(1&t){const n=e.KQA();e.I0R(0,"tui-loader",21)(1,"form",22),e.qCj("ngSubmit",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.addAllergen())}),e.I0R(2,"div",23)(3,"app-allergen-select",24),e.SAx(4),e.aS0(5,25),e.k70(),e.C$Y()(),e.I0R(6,"div",5)(7,"button",26),e.SAx(8),e.aS0(9,27),e.k70(),e.C$Y(),e.I0R(10,"button",28),e.qCj("click",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.dismissAddAllergen())}),e.SAx(11),e.aS0(12,29),e.k70(),e.C$Y()()()()}if(2&t){const n=e.GaO(2);e.E7m("overlay",!0)("showLoader",n.addingAllergen()),e.yG2(),e.E7m("formGroup",n.newAllergenForm),e.yG2(2),e.E7m("filters",e.S45(5,xn,n.dish.id))("formControlName","allergen")}}function Ln(t,_){1&t&&e.OEk(0," no dish or dish.id ")}function Pn(t,_){if(1&t&&e.yuY(0,vn,13,7,"tui-loader",21)(1,Ln,1,0),2&t){const n=e.GaO();e.C0Y(0,n.dish&&n.dish.id?0:1)}}let bn=(()=>{class t{constructor(){this.allergensService=(0,e.uUt)(se._),this.dishesService=(0,e.uUt)(S.k),this.destroy$=(0,e.uUt)(g.UF),this.notifications=(0,e.uUt)(d.E),this.dialogs=(0,e.uUt)(B._k),this.dishChange=new e._w7,this.dish=null,this.searching=(0,e.OCB)(!1),this.deleting=(0,e.OCB)(!1),this.moving=(0,e.OCB)(!1),this.addingAllergen=(0,e.OCB)(!1),this.removingAllergen=(0,e.OCB)(!1),this.loading=(0,e.S6b)(()=>this.searching()||this.deleting()||this.moving()||this.addingAllergen()||this.removingAllergen()),this.ordering=(0,e.OCB)(!1),this.data=(0,e.OCB)(null),this.items=(0,e.S6b)(()=>this.data()?.items??[]),this.newAllergenForm=new c.WC({allergen:new c.Ku(null,c.AQ.required)})}ngOnChanges(n){n.dish&&this.search()}search(n=this.defaultFilters()){this.searchSub?.unsubscribe(),this.searching.set(!0),this.searchSub=this.allergensService.search(n).pipe((0,u.a)(this.destroy$),(0,p.U)(()=>this.searching.set(!1))).subscribe({next:i=>this.data.set(i),error:i=>{this.data.set(null),this.notifications.error((0,O.mk)(i)||"Something went wrong. Please try again later.")}})}drop(n){if(n.previousIndex===n.currentIndex)return;const i=this.items(),o=i[n.previousIndex]?.id,s=this.dish?.id;o&&s&&((0,$.qv)(i,n.previousIndex,n.currentIndex),this.moving.set(!0),this.dishesService.moveAllergen(s,o,n.currentIndex).pipe((0,u.a)(this.destroy$),(0,p.U)(()=>this.moving.set(!1)),(0,p.U)(()=>this.search())).subscribe({error:l=>this.notifications.error((0,O.mk)(l)||"Something went wrong.")}))}remove(n){const i=this.dish?.id,o=n.id;i&&o&&(this.removingAllergen.set(!0),this.dishesService.removeAllergen(i,o).pipe((0,u.a)(this.destroy$),(0,p.U)(()=>this.removingAllergen.set(!1)),(0,p.U)(()=>this.search())).subscribe((0,F.I)()))}triggerOrdering(){this.ordering()||this.notifications.fireSnackBar("\n           Move the dishes by dragging them with the button on the right side of\n          each category. \n        ","Understood.",{duration:5e3}),this.ordering.set(!this.ordering())}dismissAddAllergen(){this.addAllergenModal?.unsubscribe(),this.newAllergenForm.reset()}showAddAllergen(n){this.addAllergenModal=this.dialogs.open(n).subscribe()}addAllergen(){const n=this.dish?.id,i=this.newAllergenForm.get("allergen")?.value?.id;this.newAllergenForm.valid&&i&&n&&(this.addingAllergen.set(!0),this.dishesService.addAllergen(n,i).pipe((0,u.a)(this.destroy$),(0,p.U)(()=>this.dismissAddAllergen()),(0,p.U)(()=>this.search()),(0,p.U)(()=>this.addingAllergen.set(!1))).subscribe({error:o=>this.notifications.error((0,O.mk)(o)||"Something went wrong.")}))}defaultFilters(){const n={};return this.dish&&this.dish.id&&(n.associated_dish_id=this.dish.id),n}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-dish-allergens"]],inputs:{dish:"dish"},outputs:{dishChange:"dishChange"},standalone:!0,features:[e.M5G([g.UF]),e.SYr,e.UHJ],decls:15,vars:1,consts:()=>{let n,i,o,s,l,r,M,T;return n="Allergens",i="Add allergen",o="Drag to sort.",s="Remove allergen from the dish.",l="There are no allergens.",r="Look for allergen",M="Add to the dish.",T="Cancel",[[3,"click"],n,["cdkDropList","",1,"items-list",3,"cdkDropListDropped"],["addModal",""],["type","button","size","m","appearance","flat","tuiButton","",3,"click"],[1,"flex","items-center"],[1,"me-1"],i,["cdkDrag","",1,"mb-2"],[1,"flex","justify-between","items-center"],["style","max-width: 100px;","class","inline-block rounded me-2",3,"image",4,"ngIf"],["dragHint",""],["size","m","cdkDragHandle","","tuiIconButton","","type","button","appearance","outline",1,"me-2",3,"tuiHint"],["deleteDropdown",""],[3,"content"],["size","m","tuiIconButton","","type","button","appearance","outline"],[1,"inline-block","rounded","me-2",2,"max-width","100px",3,"image"],o,["tuiButton","","appearance","secondary-destructive","type","button",1,"m-4",3,"click"],s,l,[3,"overlay","showLoader"],[3,"formGroup","ngSubmit"],[1,"mb-4"],[3,"filters","formControlName"],r,["tuiButton","","size","m","type","submit",1,"me-2"],M,["type","button","appearance","outline","tuiButton","","size","m",3,"click"],T,["cdkDrag","","class","mb-2"]]},template:function(i,o){if(1&i){const s=e.KQA();e.I0R(0,"h4",0),e.qCj("click",function(){return o.search()}),e.SAx(1),e.aS0(2,1),e.k70(),e.C$Y(),e.I0R(3,"div",2),e.qCj("cdkDropListDropped",function(r){return o.drop(r)}),e.c53(4,yn,18,4,"tui-island",30,Gn,!1,$n,3,0,"p"),e.C$Y(),e.yuY(7,Pn,2,1,"ng-template",null,3,e.gJz),e.I0R(9,"button",4),e.qCj("click",function(){e.usT(s);const r=e.Gew(8);return e.CGJ(o.showAddAllergen(r))}),e.I0R(10,"span",5)(11,"mat-icon",6),e.OEk(12,"add"),e.C$Y(),e.I0R(13,"span"),e.aS0(14,7),e.C$Y()()()}2&i&&(e.yG2(4),e.oho(o.items()))},dependencies:[z.w,D.qL,L.GE,L.Qw,R.CI,R.Kw,H.k,H.C,V.t,W.ms,h.A$,E.u_,X.y,c.sl,c.sz,c.ue,c.u,c.uW,c.Wo,P.CQ,J.m6,y.aS,I.Sk,I.Cb,Q.yy,$.Cm,$.w5,$.A3,N.WY,N.lh,N.SL,N.i6,N.IT,j.Gs,Mn],styles:["[_nghost-%COMP%]   .items-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   tui-island[cdkDrag][_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   .items-list[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .items-list[_ngcontent-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   [cdkDragHandle][_ngcontent-%COMP%]{cursor:move}"],changeDetection:0})}return t})();var ce=a(9116);function Hn(t,_){1&t&&(e.SAx(0),e.aS0(1,10),e.k70())}function kn(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=_.polymorpheusOutlet;e.yG2(),e.oRS(" ",n," ")}}function Yn(t,_){if(1&t&&e.yuY(0,kn,2,1,"ng-container",11),2&t){const n=e.GaO(2);e.E7m("polymorpheusOutlet",n.optionTemplate$())}}function Un(t,_){1&t&&e.C_f(0)}const re=(t,_)=>({$implicit:t,injector:_});function wn(t,_){if(1&t&&e.yuY(0,Un,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.optionTemplate$())("polymorpheusOutletContext",e.IBC(2,re,n,i.injector))}}function zn(t,_){1&t&&e.C_f(0)}const ue=t=>({data:t});function Bn(t,_){if(1&t&&e.yuY(0,zn,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.optionTemplate$())("polymorpheusOutletContext",e.S45(2,ue,n))}}function Xn(t,_){if(1&t&&e.wR5(0,"div",13),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("innerText",i.stringify(n))}}function Fn(t,_){if(1&t&&e.yuY(0,Yn,1,1)(1,wn,1,5)(2,Bn,1,4)(3,Xn,1,1),2&t){const n=e.GaO();let i;e.C0Y(0,"text"===(i=n.optionTemplateType$())?0:"template"===i?1:"component"===i?2:3)}}function Jn(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=_.polymorpheusOutlet;e.yG2(),e.oRS(" ",n," ")}}function Wn(t,_){if(1&t&&e.yuY(0,Jn,2,1,"ng-container",11),2&t){const n=e.GaO(2);e.E7m("polymorpheusOutlet",n.nativeOptionTemplate$())}}function Vn(t,_){1&t&&e.C_f(0)}function jn(t,_){if(1&t&&e.yuY(0,Vn,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.nativeOptionTemplate$())("polymorpheusOutletContext",e.IBC(2,re,n,i.injector))}}function Qn(t,_){1&t&&e.C_f(0)}function Kn(t,_){if(1&t&&e.yuY(0,Qn,1,0,"ng-container",12),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("polymorpheusOutlet",i.nativeOptionTemplate$())("polymorpheusOutletContext",e.S45(2,ue,n))}}function qn(t,_){if(1&t&&e.wR5(0,"div",13),2&t){const n=e.GaO().$implicit,i=e.GaO();e.E7m("innerText",i.stringify(n))}}function Zn(t,_){if(1&t&&e.yuY(0,Wn,1,1)(1,jn,1,5)(2,Kn,1,4)(3,qn,1,1),2&t){const n=e.GaO();let i;e.C0Y(0,"text"===(i=n.nativeOptionTemplateType$())?0:"template"===i?1:"component"===i?2:3)}}function ei(t,_){if(1&t&&(e.SAx(0),e.OEk(1),e.k70()),2&t){const n=e.GaO(2);e.yG2(),e.oRS(" ",n.placeholder," ")}}function ti(t,_){if(1&t&&(e.I0R(0,"span",null,14),e._Xx(2),e.C$Y(),e.yuY(3,ei,2,1,"ng-container",15)),2&t){const n=e.Gew(1);e.yG2(3),e.E7m("ngIf",!n.hasChildNodes())}}function ni(t,_){1&t&&(e.SAx(0),e.aS0(1,19),e.k70())}function ii(t,_){if(1&t&&(e.I0R(0,"span"),e.OEk(1),e.C$Y()),2&t){const n=e.GaO(2);e.yG2(),e.cNF(n.emptyContentString())}}function oi(t,_){1&t&&e.C_f(0)}function _i(t,_){if(1&t&&(e.SAx(0),e.yuY(1,oi,1,0,"ng-container",8),e.k70()),2&t){const n=e.GaO(4);e.yG2(),e.E7m("ngTemplateOutlet",n.emptyContentTemplate())}}function si(t,_){if(1&t&&(e.SAx(0),e.yuY(1,_i,2,1,"ng-container",20),e.k70()),2&t){e.GaO(2);const n=e.Gew(6),i=e.GaO();e.yG2(),e.E7m("ngIf",i.emptyContentTemplate())("ngIfElse",n)}}function ai(t,_){if(1&t&&(e.SAx(0),e.yuY(1,si,2,2,"ng-container",20),e.k70()),2&t){e.GaO();const n=e.Gew(4),i=e.GaO();e.yG2(),e.E7m("ngIf",i.emptyContent$())("ngIfElse",n)}}function li(t,_){if(1&t&&(e.I0R(0,"span",null,16),e._Xx(2,1),e.C$Y(),e.yuY(3,ni,2,0,"ng-template",null,17,e.gJz)(5,ii,2,1,"ng-template",null,18,e.gJz)(7,ai,2,2,"ng-container",15)),2&t){const n=e.Gew(1);e.yG2(7),e.E7m("ngIf",!n.hasChildNodes())}}function ci(t,_){1&t&&e.wR5(0,"tui-loader")}function ri(t,_){1&t&&e.C_f(0)}function ui(t,_){if(1&t&&e.yuY(0,ri,1,0,"ng-container",8),2&t){e.GaO(2);const n=e.Gew(9);e.E7m("ngTemplateOutlet",n)}}function gi(t,_){1&t&&e.C_f(0)}function pi(t,_){if(1&t&&(e.SAx(0),e.yuY(1,gi,1,0,"ng-container",8),e.k70()),2&t){e.GaO(2);const n=e.Gew(11);e.yG2(),e.E7m("ngTemplateOutlet",n)}}function di(t,_){if(1&t&&e.yuY(0,ui,1,1,"ng-template",null,21,e.gJz)(2,pi,2,1,"ng-container",20),2&t){const n=e.Gew(1),i=e.GaO();e.yG2(2),e.E7m("ngIf",i.loading())("ngIfElse",n)}}function mi(t,_){1&t&&e.C_f(0)}function Ci(t,_){1&t&&e.C_f(0)}function Si(t,_){1&t&&e.C_f(0)}function Ei(t,_){if(1&t&&(e.SAx(0),e.yuY(1,Si,1,0,"ng-container",8),e.k70()),2&t){e.GaO(4);const n=e.Gew(11);e.yG2(),e.E7m("ngTemplateOutlet",n)}}function hi(t,_){1&t&&e.C_f(0)}function Ti(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",28)(1,"span",29),e.qCj("click",function(){e.usT(n);const o=e.GaO(4);return e.CGJ(o.loadMoreItems())}),e.yuY(2,hi,1,0,"ng-container",20),e.C$Y()()}if(2&t){const n=e.GaO(4),i=e.Gew(1);e.E7m("size",n.optionSize)("disabled",!0),e.yG2(2),e.E7m("ngIf",n.loadMore)("ngIfElse",i)}}function fi(t,_){if(1&t&&(e.SAx(0),e.yuY(1,Ei,2,1,"ng-container",15)(2,Ti,3,4,"button",27),e.k70()),2&t){const n=e.GaO(3);e.yG2(),e.E7m("ngIf",n.loading),e.yG2(),e.E7m("ngIf",!n.loading)}}const Oi=t=>({$implicit:t});function Ii(t,_){if(1&t){const n=e.KQA();e.SAx(0),e.I0R(1,"button",25),e.qCj("mouseenter",function(){const o=e.usT(n),s=o.index,l=o.last,r=e.GaO(2);return e.CGJ(r.optionMouseEnter(s,l))})("focus",function(){const o=e.usT(n),s=o.index,l=o.last,r=e.GaO(2);return e.CGJ(r.optionFocus(s,l))}),e.yuY(2,Ci,1,0,"ng-container",26),e.C$Y(),e.yuY(3,fi,3,2,"ng-container",15),e.k70()}if(2&t){const n=_.$implicit,i=_.last,o=e.GaO(2),s=e.Gew(5);e.yG2(),e.E7m("size",o.optionSize)("value",n)("disabled",o.disabledItemHandler(n)),e.yG2(),e.E7m("ngTemplateOutlet",s)("ngTemplateOutletContext",e.S45(6,Oi,n)),e.yG2(),e.E7m("ngIf",i&&o.thereAreMoreItems)}}function Ni(t,_){if(1&t){const n=e.KQA();e.I0R(0,"span",33),e.qCj("click",function(){e.usT(n);const o=e.GaO(3);return e.CGJ(o.createNew.emit())}),e.I0R(1,"mat-icon"),e.OEk(2,"add"),e.C$Y(),e.I0R(3,"span"),e.aS0(4,34),e.C$Y()()}}function Mi(t,_){if(1&t&&(e.I0R(0,"button",30)(1,"span",null,31),e._Xx(3,2),e.C$Y(),e.yuY(4,Ni,5,0,"span",32),e.C$Y()),2&t){const n=e.Gew(2),i=e.GaO(2);e.E7m("size",i.optionSize)("value",null)("disabled",!0),e.yG2(4),e.E7m("ngIf",!n.hasChildNodes())}}function Gi(t,_){if(1&t&&(e.I0R(0,"tui-data-list",22),e.yuY(1,Ii,4,8,"ng-container",23)(2,Mi,5,4,"button",24),e.C$Y()),2&t){const n=e.GaO(),i=e.Gew(13);e.E7m("emptyContent",i),e.yG2(),e.E7m("ngForOf",n.items()),e.yG2(),e.E7m("ngIf",n.showCreateNew)}}const Ri=["*",[["","empty-content",""]],[["","create-new",""]]],Ai=["*","[empty-content]","[create-new]"];let Di=(()=>{class t extends K.m{constructor(){super(),this.stringify=n=>n.name??"",this.service=(0,e.uUt)(ce.w)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-menu-tag-select"]],inputs:{outputType:"outputType",multiple:"multiple",service:"service",stringify:"stringify",query:"query",autofocus:"autofocus",placeholder:"placeholder",optionTemplate:"optionTemplate",stringifyOption:"stringifyOption",inputSize:"inputSize",page:"page",per_page:"per_page",optionSize:"optionSize",disabledItemHandler:"disabledItemHandler",loadMoreOnLastItem:"loadMoreOnLastItem",emptyContent:"emptyContent",showCreateNew:"showCreateNew",nativeOptionTemplate:"nativeOptionTemplate",filters:"filters"},outputs:{httpError:"httpError",pageChange:"pageChange",queryChange:"queryChange",per_pageChange:"per_pageChange",createNew:"createNew"},standalone:!0,features:[e.M5G([{provide:c.Y6,useExisting:(0,e.wd)(()=>t),multi:!0},g.UF]),e.eg9,e.UHJ],ngContentSelectors:Ai,decls:17,vars:5,consts:()=>{let n,i,o;return n="Load more",i="We found nothing.",o="Create new",[["loadMoreDefault",""],["valueContent",""],["nativeOptionTemplate",""],["placeholderTemplate",""],["nativeEmptyContentTemplate",""],["loadingTemplate",""],["loadingOrEmptyContent",""],[3,"stringify","tuiTextfieldSize","formControl","valueContent","searchChange"],[4,"ngTemplateOutlet"],[3,"emptyContent",4,"tuiDataList"],n,[4,"polymorpheusOutlet"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],[3,"innerText"],["customContent",""],[4,"ngIf"],["customEmptyContent",""],["defaultEmptyContent",""],["emptyContentCustomString",""],i,[4,"ngIf","ngIfElse"],["empty",""],[3,"emptyContent"],[4,"ngFor","ngForOf"],["tuiOption","",3,"size","value","disabled",4,"ngIf"],["tuiOption","",3,"size","value","disabled","mouseenter","focus"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tuiOption","",3,"size","disabled",4,"ngIf"],["tuiOption","",3,"size","disabled"],["role","button",3,"click"],["tuiOption","",3,"size","value","disabled"],["createNewCustomTemplate",""],["role","button","class","d-flex align-items-center",3,"click",4,"ngIf"],["role","button",1,"d-flex","align-items-center",3,"click"],o]},template:function(i,o){if(1&i&&(e.kPM(Ri),e.yuY(0,Hn,2,0,"ng-template",null,0,e.gJz)(2,Fn,4,1,"ng-template",null,1,e.gJz)(4,Zn,4,1,"ng-template",null,2,e.gJz)(6,ti,4,1,"ng-template",null,3,e.gJz)(8,li,8,1,"ng-template",null,4,e.gJz)(10,ci,1,0,"ng-template",null,5,e.gJz)(12,di,3,2,"ng-template",null,6,e.gJz),e.I0R(14,"tui-combo-box",7),e.qCj("searchChange",function(l){return o.onSearchChange(l)}),e.yuY(15,mi,1,0,"ng-container",8)(16,Gi,3,3,"tui-data-list",9),e.C$Y()),2&i){const s=e.Gew(3),l=e.Gew(7);e.yG2(14),e.E7m("stringify",o.stringify)("tuiTextfieldSize",o.inputSize)("formControl",o.control)("valueContent",s),e.yG2(),e.E7m("ngTemplateOutlet",l)}},dependencies:[E.MD,E.ay,E.u_,E.XV,b.uk,b.i_,b.qI,y.aS,y.rD,ee.KA,P.CQ,h.A$,h.yi,h.sP,h.Ux,q.q8,c.sl,c.ue,c.ug,te.kR,Z.CA,I.Sk,I.Cb,Y.Ux,Y.Af,D.oB,D.qL],changeDetection:0})}return t})();const yi=(t,_)=>_.id;function $i(t,_){if(1&t&&e.wR5(0,"app-show-image",16),2&t){const n=e.GaO().$implicit;e.E7m("image",n.image)}}function xi(t,_){1&t&&(e.SAx(0),e.aS0(1,17),e.k70())}function vi(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",18),e.qCj("click",function(){e.usT(n);const o=e.GaO().$implicit,s=e.GaO();return e.CGJ(s.remove(o))}),e.SAx(1),e.aS0(2,19),e.k70(),e.C$Y()}}function Li(t,_){if(1&t&&(e.I0R(0,"tui-island",8)(1,"div",9)(2,"span",5),e.yuY(3,$i,1,1,"app-show-image",10),e.I0R(4,"div"),e.OEk(5),e.C$Y()(),e.I0R(6,"div",5),e.yuY(7,xi,2,0,"ng-template",null,11,e.gJz),e.I0R(9,"button",12)(10,"mat-icon"),e.OEk(11,"drag_handle"),e.C$Y()(),e.yuY(12,vi,3,0,"ng-template",null,13,e.gJz),e.I0R(14,"tui-hosted-dropdown",14)(15,"button",15)(16,"mat-icon"),e.OEk(17,"delete"),e.C$Y()()()()()()),2&t){const n=_.$implicit,i=e.Gew(8),o=e.Gew(13);e.yG2(3),e.E7m("ngIf",n&&n.image),e.yG2(2),e.oRS(" ",n.name," "),e.yG2(4),e.E7m("tuiHint",i),e.yG2(5),e.E7m("content",o)}}function Pi(t,_){1&t&&(e.I0R(0,"p"),e.SAx(1),e.aS0(2,20),e.k70(),e.C$Y())}const bi=t=>({avoid_associated_dish_id:t});function Hi(t,_){if(1&t){const n=e.KQA();e.I0R(0,"tui-loader",21)(1,"form",22),e.qCj("ngSubmit",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.addTag())}),e.I0R(2,"div",23)(3,"app-menu-tag-select",24),e.SAx(4),e.aS0(5,25),e.k70(),e.C$Y()(),e.I0R(6,"div",5)(7,"button",26),e.SAx(8),e.aS0(9,27),e.k70(),e.C$Y(),e.I0R(10,"button",28),e.qCj("click",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.dismissAddTag())}),e.SAx(11),e.aS0(12,29),e.k70(),e.C$Y()()()()}if(2&t){const n=e.GaO(2);e.E7m("overlay",!0)("showLoader",n.addingTag()),e.yG2(),e.E7m("formGroup",n.newTagForm),e.yG2(2),e.E7m("filters",e.S45(5,bi,n.dish.id))("formControlName","tag")}}function ki(t,_){1&t&&e.OEk(0," no dish or dish.id ")}function Yi(t,_){if(1&t&&e.yuY(0,Hi,13,7,"tui-loader",21)(1,ki,1,0),2&t){const n=e.GaO();e.C0Y(0,n.dish&&n.dish.id?0:1)}}let Ui=(()=>{class t{constructor(){this.tagsService=(0,e.uUt)(ce.w),this.dishesService=(0,e.uUt)(S.k),this.destroy$=(0,e.uUt)(g.UF),this.notifications=(0,e.uUt)(d.E),this.dialogs=(0,e.uUt)(B._k),this.dishChange=new e._w7,this.dish=null,this.searching=(0,e.OCB)(!1),this.deleting=(0,e.OCB)(!1),this.moving=(0,e.OCB)(!1),this.addingTag=(0,e.OCB)(!1),this.removingTag=(0,e.OCB)(!1),this.loading=(0,e.S6b)(()=>this.searching()||this.deleting()||this.moving()||this.addingTag()||this.removingTag()),this.ordering=(0,e.OCB)(!1),this.data=(0,e.OCB)(null),this.items=(0,e.S6b)(()=>this.data()?.items??[]),this.newTagForm=new c.WC({tag:new c.Ku(null,c.AQ.required)})}ngOnChanges(n){n.dish&&this.search()}search(n=this.defaultFilters()){this.searchSub?.unsubscribe(),this.searching.set(!0),this.searchSub=this.tagsService.search(n).pipe((0,u.a)(this.destroy$),(0,p.U)(()=>this.searching.set(!1))).subscribe({next:i=>this.data.set(i),error:i=>{this.data.set(null),this.notifications.error((0,O.mk)(i)||"Something went wrong. Please try again later.")}})}drop(n){if(n.previousIndex===n.currentIndex)return;const i=this.items(),o=i[n.previousIndex]?.id,s=this.dish?.id;o&&s&&((0,$.qv)(i,n.previousIndex,n.currentIndex),this.moving.set(!0),this.dishesService.moveTag(s,o,n.currentIndex).pipe((0,u.a)(this.destroy$),(0,p.U)(()=>this.moving.set(!1)),(0,p.U)(()=>this.search())).subscribe({error:l=>this.notifications.error((0,O.mk)(l)||"Something went wrong.")}))}remove(n){const i=this.dish?.id,o=n.id;i&&o&&(this.removingTag.set(!0),this.dishesService.removeTag(i,o).pipe((0,u.a)(this.destroy$),(0,p.U)(()=>this.removingTag.set(!1)),(0,p.U)(()=>this.search())).subscribe((0,F.I)()))}triggerOrdering(){this.ordering()||this.notifications.fireSnackBar("\n           Move the dishes by dragging them with the button on the right side of\n          each category. \n        ","Understood.",{duration:5e3}),this.ordering.set(!this.ordering())}dismissAddTag(){this.addTagModal?.unsubscribe(),this.newTagForm.reset()}showAddTag(n){this.addTagModal=this.dialogs.open(n).subscribe()}addTag(){const n=this.dish?.id,i=this.newTagForm.get("tag")?.value?.id;this.newTagForm.valid&&i&&n&&(this.addingTag.set(!0),this.dishesService.addTag(n,i).pipe((0,u.a)(this.destroy$),(0,p.U)(()=>this.dismissAddTag()),(0,p.U)(()=>this.search()),(0,p.U)(()=>this.addingTag.set(!1))).subscribe({error:o=>this.notifications.error((0,O.mk)(o)||"Something went wrong.")}))}defaultFilters(){const n={};return this.dish&&this.dish.id&&(n.associated_dish_id=this.dish.id),n}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-dish-tags"]],inputs:{dish:"dish"},outputs:{dishChange:"dishChange"},standalone:!0,features:[e.M5G([g.UF]),e.SYr,e.UHJ],decls:15,vars:1,consts:()=>{let n,i,o,s,l,r,M,T;return n="Tag",i="Add tags",o="Drag to sort.",s="Remove tags from the plate.",l="There are no tags.",r="Search tags",M="Add to the dish.",T="Cancel",[[3,"click"],n,["cdkDropList","",1,"items-list",3,"cdkDropListDropped"],["addModal",""],["type","button","size","m","appearance","flat","tuiButton","",3,"click"],[1,"flex","items-center"],[1,"me-1"],i,["cdkDrag","",1,"mb-2"],[1,"flex","justify-between","items-center"],["style","max-width: 100px;","class","inline-block rounded me-2",3,"image",4,"ngIf"],["dragHint",""],["size","m","cdkDragHandle","","tuiIconButton","","type","button","appearance","outline",1,"me-2",3,"tuiHint"],["deleteDropdown",""],[3,"content"],["size","m","tuiIconButton","","type","button","appearance","outline"],[1,"inline-block","rounded","me-2",2,"max-width","100px",3,"image"],o,["tuiButton","","appearance","secondary-destructive","type","button",1,"m-4",3,"click"],s,l,[3,"overlay","showLoader"],[3,"formGroup","ngSubmit"],[1,"mb-4"],[3,"filters","formControlName"],r,["tuiButton","","size","m","type","submit",1,"me-2"],M,["type","button","appearance","outline","tuiButton","","size","m",3,"click"],T,["cdkDrag","","class","mb-2"]]},template:function(i,o){if(1&i){const s=e.KQA();e.I0R(0,"h4",0),e.qCj("click",function(){return o.search()}),e.SAx(1),e.aS0(2,1),e.k70(),e.C$Y(),e.I0R(3,"div",2),e.qCj("cdkDropListDropped",function(r){return o.drop(r)}),e.c53(4,Li,18,4,"tui-island",30,yi,!1,Pi,3,0,"p"),e.C$Y(),e.yuY(7,Yi,2,1,"ng-template",null,3,e.gJz),e.I0R(9,"button",4),e.qCj("click",function(){e.usT(s);const r=e.Gew(8);return e.CGJ(o.showAddTag(r))}),e.I0R(10,"span",5)(11,"mat-icon",6),e.OEk(12,"add"),e.C$Y(),e.I0R(13,"span"),e.aS0(14,7),e.C$Y()()()}2&i&&(e.yG2(4),e.oho(o.items()))},dependencies:[z.w,D.qL,L.GE,L.Qw,R.CI,R.Kw,H.k,H.C,V.t,W.ms,h.A$,E.u_,X.y,c.sl,c.sz,c.ue,c.u,c.uW,c.Wo,P.CQ,J.m6,y.aS,I.Sk,I.Cb,Q.yy,$.Cm,$.w5,$.A3,N.WY,N.lh,N.SL,N.i6,N.IT,j.Gs,Di],styles:["[_nghost-%COMP%]   .items-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   tui-island[cdkDrag][_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   .items-list[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .items-list[_ngcontent-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   [cdkDragHandle][_ngcontent-%COMP%]{cursor:move}"],changeDetection:0})}return t})();var wi=a(2300),zi=a(9880);const Bi=["*"];let Xi=(()=>{class t{constructor(){this.dishChanged=new e._w7,this.dish=null,this.destroy$=(0,e.uUt)(g.UF),this.notifications=(0,e.uUt)(d.E),this.dishesService=(0,e.uUt)(S.k),this.removingPrice=(0,e.OCB)(!1),this.searchingDishes=(0,e.OCB)(!1),this.savingPrice=(0,e.OCB)(!1),this.loading=(0,e.S6b)(()=>this.savingPrice()||this.searchingDishes()||this.removingPrice()),this.price=new c.Ku(null)}ngOnInit(){this.price.valueChanges.pipe((0,u.a)(this.destroy$),(0,w.a)(),(0,G.I)(n=>n!=this.dish?.price),(0,wi.o)(1500)).subscribe({next:n=>this.updateRemote(n)})}ngOnChanges(n){n.dish&&this.price.patchValue(this.dish?.price??null)}updateRemote(n){const i=this.dish?.id;i&&(this.updateRemoteSub?.unsubscribe(),this.savingPrice.set(!0),this.updateRemoteSub=this.dishesService.update(i,{price:n}).pipe((0,u.a)(this.destroy$),(0,p.U)(()=>this.savingPrice.set(!1))).subscribe({next:o=>{this.dish=o,this.dishChanged.emit(o),this.notifications.fireSnackBar("Price saved.")},error:o=>{this.notifications.fireSnackBar((0,O.mk)(o)||"Something went wrong in saving the price.")}}))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-dish-price"]],inputs:{dish:"dish"},outputs:{dishChanged:"dishChanged"},standalone:!0,features:[e.M5G([g.UF]),e.SYr,e.UHJ],ngContentSelectors:Bi,decls:2,vars:1,consts:[["tuiTextfieldSize","l","tuiTextfieldPostfix","\u20ac",3,"formControl"]],template:function(i,o){1&i&&(e.kPM(),e.I0R(0,"tui-input",0),e._Xx(1),e.C$Y()),2&i&&e.E7m("formControl",o.price)},dependencies:[P.CQ,P.Oo,P.cP,y.aS,y.rD,y.We,c.sl,c.ue,c.ug,zi.kh,R.CI],encapsulation:2,changeDetection:0})}return t})();var Fi=a(9088);const Ji=(t,_)=>_.id;function Wi(t,_){if(1&t&&(e.I0R(0,"li",2)(1,"a",3),e.wVc(2,"urlTo"),e.OEk(3),e.C$Y()()),2&t){const n=_.$implicit;e.yG2(),e._6D("routerLink",e.g7$(2,2,n.id,"menuCategory.show")),e.yG2(2),e.oRS(" ",n.name," ")}}function Vi(t,_){if(1&t&&(e._Xx(0),e.I0R(1,"ul",1),e.c53(2,Wi,4,5,"li",4,Ji),e.C$Y()),2&t){const n=e.GaO();e.yG2(2),e.oho(n.references().categories)}}const ji=["*"];let Qi=(()=>{class t{constructor(){this.destroy$=(0,e.uUt)(g.UF),this.service=(0,e.uUt)(S.k),this.notifications=(0,e.uUt)(d.E),this.item=(0,e.OCB)(null),this.references=(0,e.OCB)(null),this.searching=(0,e.OCB)(!1)}set dish(n){this.item.set(n??null),this.searchReferences()}searchReferences(){this.references.set(null);const n=this.item()?.id;n&&(this.searching.set(!0),this.service.references(n).pipe((0,u.a)(this.destroy$),(0,p.U)(()=>this.searching.set(!1))).subscribe({next:i=>this.references.set(i),error:i=>this.notifications.error((0,O.mk)(i)||"Something went wrong.")}))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-dish-references"]],inputs:{dish:"dish"},standalone:!0,features:[e.M5G([g.UF]),e.UHJ],ngContentSelectors:ji,decls:1,vars:1,consts:[["class","tui-list tui-list_small"],[1,"tui-list","tui-list_small"],[1,"tui-list__item"],["tuiLink","",1,"mb-2",3,"routerLink"],["class","tui-list__item"]],template:function(i,o){1&i&&(e.kPM(),e.yuY(0,Vi,4,0,"ul",0)),2&i&&e.C0Y(0,o.item()&&o.references()?0:-1)},dependencies:[Fi.S,C.ER,z.w,z.C],changeDetection:0})}return t})();var Ki=a(8392),qi=a(3716);const Zi=(t,_)=>_.id;function eo(t,_){if(1&t&&e.wR5(0,"app-show-image",13),2&t){const n=e.GaO().$implicit;e.E7m("image",n.images[0])}}function to(t,_){if(1&t){const n=e.KQA();e.I0R(0,"button",14),e.qCj("click",function(){e.usT(n);const o=e.GaO().$implicit,s=e.GaO();return e.CGJ(s.remove(o))}),e.SAx(1),e.aS0(2,15),e.k70(),e.C$Y()}}function no(t,_){if(1&t&&(e.I0R(0,"tui-island",7)(1,"div",8)(2,"span",4),e.yuY(3,eo,1,1,"app-show-image",9),e.I0R(4,"div"),e.OEk(5),e.C$Y()(),e.I0R(6,"div",4),e.yuY(7,to,3,0,"ng-template",null,10,e.gJz),e.I0R(9,"tui-hosted-dropdown",11)(10,"button",12)(11,"mat-icon"),e.OEk(12,"delete"),e.C$Y()()()()()()),2&t){const n=_.$implicit,i=e.Gew(8);e.yG2(3),e.E7m("ngIf",n&&n.images&&n.images[0]),e.yG2(2),e.oRS(" ",n.name," "),e.yG2(4),e.E7m("content",i)}}function io(t,_){1&t&&(e.I0R(0,"p"),e.SAx(1),e.aS0(2,16),e.k70(),e.C$Y())}const oo=t=>({can_suggest:t});function _o(t,_){if(1&t){const n=e.KQA();e.I0R(0,"tui-loader",17)(1,"form",18),e.qCj("ngSubmit",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.addDish())}),e.I0R(2,"div",19)(3,"app-dish-select",20),e.SAx(4),e.aS0(5,21),e.k70(),e.C$Y()(),e.I0R(6,"div",4)(7,"button",22),e.SAx(8),e.aS0(9,23),e.k70(),e.C$Y(),e.I0R(10,"button",24),e.qCj("click",function(){e.usT(n);const o=e.GaO(2);return e.CGJ(o.dismissAddDish())}),e.SAx(11),e.aS0(12,25),e.k70(),e.C$Y()()()()}if(2&t){const n=e.GaO(2);e.E7m("overlay",!0)("showLoader",n.addingDish()),e.yG2(),e.E7m("formGroup",n.newDishForm),e.yG2(2),e.E7m("filters",e.S45(5,oo,n.dish.id))("formControlName","dish")}}function so(t,_){1&t&&e.OEk(0," no dish or dish.id ")}function ao(t,_){if(1&t&&e.yuY(0,_o,13,7,"tui-loader",17)(1,so,1,0),2&t){const n=e.GaO();e.C0Y(0,n.dish&&n.dish.id?0:1)}}let lo=(()=>{class t{constructor(){this.dishesService=(0,e.uUt)(S.k),this.destroy$=(0,e.uUt)(g.UF),this.notifications=(0,e.uUt)(d.E),this.dialogs=(0,e.uUt)(B._k),this.dishChange=new e._w7,this.dish$=(0,e.OCB)(null),this.deleting=(0,e.OCB)(!1),this.moving=(0,e.OCB)(!1),this.addingDish=(0,e.OCB)(!1),this.removingDish=(0,e.OCB)(!1),this.loading=(0,e.S6b)(()=>this.deleting()||this.moving()||this.addingDish()||this.removingDish()),this.ordering=(0,e.OCB)(!1),this.items=(0,e.OCB)([]),this.newDishForm=new c.WC({dish:new c.Ku(null,c.AQ.required)})}set dish(n){this.dish$.set(n??null),this.items.set(n?.suggestions??[])}get dish(){return this.dish$()}remove(n){const i=this.dish$()?.id;i&&n.id&&(this.removingDish.set(!0),this.dishesService.removeSuggestion(i,n.id).pipe((0,u.a)(this.destroy$),(0,p.U)(()=>this.removingDish.set(!1))).subscribe((0,F.I)()))}dismissAddDish(){this.addDishModal?.unsubscribe(),this.newDishForm.reset()}showAddDish(n){this.addDishModal=this.dialogs.open(n).subscribe()}addDish(){const n=this.dish?.id,i=this.newDishForm.get("dish")?.value?.id;this.newDishForm.valid&&i&&n&&(this.addingDish.set(!0),this.dishesService.addSuggestion(n,i).pipe((0,u.a)(this.destroy$),(0,p.U)(()=>this.dismissAddDish()),(0,p.U)(()=>this.addingDish.set(!1))).subscribe({error:o=>this.notifications.error((0,O.mk)(o)||Ki.a)}))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-dish-suggestions"]],inputs:{dish:"dish"},outputs:{dishChange:"dishChange"},standalone:!0,features:[e.UHJ],decls:15,vars:1,consts:()=>{let n,i,o,s,l,r,M;return n="Suggested dishes/drinks to pair.",i="Add suggestion",o="Remove suggestion",s="There are no suggestions for this dish.",l="Search dish",r="Add",M="Cancel",[n,[1,"items-list"],["addModal",""],["type","button","size","m","appearance","flat","tuiButton","",3,"click"],[1,"flex","items-center"],[1,"me-1"],i,[1,"mb-2"],[1,"flex","justify-between","items-center"],["style","max-width: 100px;","class","inline-block rounded me-2",3,"image",4,"ngIf"],["deleteDropdown",""],[3,"content"],["size","m","tuiIconButton","","type","button","appearance","outline"],[1,"inline-block","rounded","me-2",2,"max-width","100px",3,"image"],["tuiButton","","appearance","secondary-destructive","type","button",1,"m-4",3,"click"],o,s,[3,"overlay","showLoader"],[3,"formGroup","ngSubmit"],[1,"mb-4"],[3,"filters","formControlName"],l,["tuiButton","","size","m","type","submit",1,"me-2"],r,["type","button","appearance","outline","tuiButton","","size","m",3,"click"],M,["class","mb-2"]]},template:function(i,o){if(1&i){const s=e.KQA();e.I0R(0,"h4"),e.SAx(1),e.aS0(2,0),e.k70(),e.C$Y(),e.I0R(3,"div",1),e.c53(4,no,13,3,"tui-island",26,Zi,!1,io,3,0,"p"),e.C$Y(),e.yuY(7,ao,2,1,"ng-template",null,2,e.gJz),e.I0R(9,"button",3),e.qCj("click",function(){e.usT(s);const r=e.Gew(8);return e.CGJ(o.showAddDish(r))}),e.I0R(10,"span",4)(11,"mat-icon",5),e.OEk(12,"add"),e.C$Y(),e.I0R(13,"span"),e.aS0(14,6),e.C$Y()()()}2&i&&(e.yG2(4),e.oho(o.items()))},dependencies:[H.k,H.C,X.y,E.u_,R.CI,R.Kw,L.GE,L.Qw,D.qL,I.Sk,I.Cb,c.sl,c.sz,c.ue,c.u,c.uW,c.Wo,qi.i],encapsulation:2})}return t})();function co(t,_){1&t&&(e.I0R(0,"p"),e.aS0(1,22),e.C$Y(),e.I0R(2,"p"),e.aS0(3,23),e.C$Y())}function ro(t,_){if(1&t){const n=e.KQA();e.I0R(0,"div",2)(1,"h4",3),e.aS0(2,24),e.C$Y(),e.I0R(3,"app-name-desc-eip",25),e.qCj("submittedChanges",function(o){e.usT(n);const s=e.GaO(2);return e.CGJ(s.saveNameDesc(o))}),e.C$Y()()}if(2&t){const n=e.GaO(2);let i;e.yG2(3),e.E7m("translations",null==(i=n.dish())?null:i.translations)}}function uo(t,_){if(1&t){const n=e.KQA();e.I0R(0,"div")(1,"div",0)(2,"div",1)(3,"h1"),e.OEk(4),e.C$Y()()(),e.I0R(5,"div",2)(6,"h4",3),e.aS0(7,4),e.C$Y(),e.wR5(8,"app-show-images",5),e.C$Y(),e.I0R(9,"div",2)(10,"h4",3),e.aS0(11,6),e.C$Y(),e.I0R(12,"app-edit-dish-status",7),e.qCj("deleteDish",function(){e.usT(n);const o=e.GaO();return e.CGJ(o.delete())})("statusChange",function(o){e.usT(n);const s=e.GaO();return e.CGJ(s.updateStatus(o))})("dishChange",function(o){e.usT(n);const s=e.GaO();return e.CGJ(s.dish.set(o))}),e.C$Y()(),e.yuY(13,co,4,0,"ng-template",null,8,e.gJz),e.I0R(15,"div",2)(16,"div",9)(17,"mat-icon",10),e.OEk(18,"link"),e.C$Y(),e.I0R(19,"h4",11),e.aS0(20,12),e.C$Y(),e.wR5(21,"tui-tooltip",13),e.C$Y(),e.wR5(22,"app-dish-references",14),e.C$Y(),e.I0R(23,"div",2)(24,"h4",3),e.aS0(25,15),e.C$Y(),e.I0R(26,"app-dish-price",16),e.qCj("dishChanged",function(o){e.usT(n);const s=e.GaO();return e.CGJ(s.dish.set(o))}),e.SAx(27),e.aS0(28,17),e.k70(),e.C$Y()(),e.yuY(29,ro,4,1,"div",18),e.I0R(30,"div",2)(31,"app-dish-ingredients",19),e.qCj("dishChange",function(o){e.usT(n);const s=e.GaO();return e.CGJ(s.dish.set(o))}),e.C$Y()(),e.I0R(32,"div",2)(33,"app-dish-allergens",19),e.qCj("dishChange",function(o){e.usT(n);const s=e.GaO();return e.CGJ(s.dish.set(o))}),e.C$Y()(),e.I0R(34,"div",2)(35,"app-dish-tags",19),e.qCj("dishChange",function(o){e.usT(n);const s=e.GaO();return e.CGJ(s.dish.set(o))}),e.C$Y()(),e.I0R(36,"div",2)(37,"app-dish-suggestions",19),e.qCj("dishChange",function(o){e.usT(n);const s=e.GaO();return e.CGJ(s.dish.set(o))}),e.C$Y()(),e.I0R(38,"button",20),e.qCj("click",function(){e.usT(n);const o=e.GaO();return e.CGJ(o.confirmAndDelete())}),e.SAx(39),e.aS0(40,21),e.k70(),e.C$Y()()}if(2&t){const n=e.Gew(14),i=e.GaO();let o,s,l,r;e.yG2(4),e.cNF(null==(o=i.dish())?null:o.name),e.yG2(4),e.E7m("recordType","Menu::Dish")("recordId",null==(s=i.dish())?null:s.id)("images",null==(l=i.dish())?null:l.images),e.yG2(4),e.E7m("dish",i.dish()),e.yG2(9),e.E7m("content",n),e.yG2(),e.E7m("dish",i.dish()),e.yG2(4),e.E7m("dish",i.dish()),e.yG2(3),e.C0Y(29,null!=(r=i.dish())&&r.translations?29:-1),e.yG2(2),e.E7m("dish",i.dish()),e.yG2(2),e.E7m("dish",i.dish()),e.yG2(2),e.E7m("dish",i.dish()),e.yG2(2),e.E7m("dish",i.dish()),e.yG2(),e.E7m("appearance","secondary-destructive")}}function go(t,_){1&t&&e.wR5(0,"tui-loader",26),2&t&&e.E7m("showLoader",!0)("size","l")}let po=(()=>{class t{constructor(){this.destroy$=(0,e.uUt)(g.UF),this.service=(0,e.uUt)(S.k),this.notifications=(0,e.uUt)(d.E),this.router=(0,e.uUt)(C.E5),this.route=(0,e.uUt)(C.gV),this.loading=(0,e.OCB)(!1),this.dish=(0,e.OCB)(null),this.dishId=(0,e.OCB)(null)}ngOnInit(){this.route.params.pipe((0,u.a)(this.destroy$),(0,f.k)(n=>Number(n.dish_id)),(0,G.I)(n=>"number"==typeof n&&!isNaN(n)&&n>0),(0,w.a)(),(0,ge.y)(n=>this.dishId.set(n))).subscribe({next:n=>this.loadDish(n),error:n=>{this.dishId.set(null),this.dish.set(null)}})}delete(){const n=this.dish()?.id;n&&(this.loading.set(!0),this.service.destroy(n).pipe((0,u.a)(this.destroy$),(0,p.U)(()=>this.loading.set(!1))).subscribe({next:()=>{this.notifications.fireSnackBar("Dish removed."),this.router.navigate(["../.."],{relativeTo:this.route})},error:i=>{this.notifications.error((0,O.mk)(i)||"Something went wrong.")}}))}updateStatus(n){const i=this.dish()?.id;!n||!i||(this.loading.set(!0),this.service.updateStatus(i,n).pipe((0,u.a)(this.destroy$),(0,p.U)(()=>this.loading.set(!1))).subscribe({next:o=>{this.notifications.fireSnackBar("Updated state."),this.dish.set(o)},error:o=>{this.notifications.error((0,O.mk)(o)||"Something went wrong.")}}))}loadDish(n){this.dishId.set(n),this.loading.set(!0),this.service.show(n).pipe((0,u.a)(this.destroy$),(0,p.U)(()=>this.loading.set(!1))).subscribe({next:i=>this.dish.set(i),error:i=>{this.dish.set(null),this.notifications.error((0,O.mk)(i)||"Something went wrong.")}})}saveNameDesc(n){const i=this.dish()?.id;i&&(this.loading.set(!0),this.service.update(i,n).pipe((0,u.a)(this.destroy$),(0,p.U)(()=>this.loading.set(!1))).subscribe({next:o=>{this.notifications.fireSnackBar("Updated translations."),this.dish.set(o)},error:o=>{this.notifications.error((0,O.mk)(o)||"Something went wrong.")}}))}confirmAndDelete(){this.notifications.confirm("Are you sure you want to delete this dish?").subscribe({next:n=>{n&&this.delete()}})}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["__app-view-dish"]],standalone:!0,features:[e.M5G([g.UF]),e.UHJ],decls:2,vars:1,consts:()=>{let n,i,o,s,l,r,M,T,m;return n="Flat images",i="Flat state",o="Dish also present in:",s="Price",l="Price",r="Remove plate",M="The same dish can be present in multiple categories.",T="\n           The categories listed below are all the categories in which this dish\n          can be seen. \n        ",m="Translations",[[1,"flex","items-center","justify-between"],[1,"flex","flex-items"],[1,"mb-3"],[1,"mb-1","me-1"],n,[1,"mb-3",3,"recordType","recordId","images"],i,[3,"dish","deleteDish","statusChange","dishChange"],["referencesHelp",""],[1,"flex","items-center","mb-2"],[1,"me-1"],[1,"me-1","my-0"],o,["direction","right",3,"content"],[3,"dish"],s,[3,"dish","dishChanged"],l,["class","mb-3"],[3,"dish","dishChange"],["tuiButton","","type","button",3,"appearance","click"],r,M,T,m,[1,"mb-3",3,"translations","submittedChanges"],[3,"showLoader","size"]]},template:function(i,o){1&i&&e.yuY(0,uo,41,14,"div")(1,go,1,2),2&i&&e.C0Y(0,o.dish()?0:o.loading()?1:-1)},dependencies:[v.g,I.Sk,I.Cb,R.CI,R.Kw,D.qL,Ge,Re.O,$t,bn,Ui,Xi,Qi,ne.a,ne.i,lo],changeDetection:0})}return t})(),mo=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=e.a4G({type:t});static#n=this.\u0275inj=e.s3X({imports:[C.qQ.forChild([(0,x.VV)(po,{path:"",closeable:!0,dismissible:!1,size:"l"})])]})}return t})()},7307:(U,A,a)=>{a.d(A,{_:()=>v});var C=a(6012),x=a(4824),e=a(4496);let v=(()=>{class g extends C.s{constructor(){super(x.o,"admin/menu/allergens")}static#e=this.\u0275fac=function(u){return new(u||g)};static#t=this.\u0275prov=e.wxM({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},8432:(U,A,a)=>{a.d(A,{K:()=>v});var C=a(6012),x=a(532),e=a(4496);let v=(()=>{class g extends C.s{constructor(){super(x.e,"admin/menu/ingredients")}static#e=this.\u0275fac=function(u){return new(u||g)};static#t=this.\u0275prov=e.wxM({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},9116:(U,A,a)=>{a.d(A,{w:()=>v});var C=a(6012),x=a(355),e=a(4496);let v=(()=>{class g extends C.s{constructor(){super(x.E,"admin/menu/tags")}static#e=this.\u0275fac=function(u){return new(u||g)};static#t=this.\u0275prov=e.wxM({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},1632:(U,A,a)=>{a.d(A,{k:()=>v,u:()=>g});var C=a(4496),x=a(900),e=a(4680);let v=(()=>{class S{constructor(u,f){this.el=u,this.takeOnlyTrustedEvents=f,this.tuiPressedChange=(0,x.Y7)(this.el.nativeElement,{onlyTrusted:this.takeOnlyTrustedEvents})}}return S.\u0275fac=function(u){return new(u||S)(C.GI1(C.GMv),C.GI1(e.mm))},S.\u0275dir=C.Sc5({type:S,selectors:[["","tuiPressedChange",""]],outputs:{tuiPressedChange:"tuiPressedChange"}}),S})(),g=(()=>{class S{}return S.\u0275fac=function(u){return new(u||S)},S.\u0275mod=C.a4G({type:S}),S.\u0275inj=C.s3X({}),S})()},4259:(U,A,a)=>{a.d(A,{U9:()=>S,_k:()=>g});var C=a(4496),x=a(7232);class v{constructor(u){this.$implicit=u}}let g=(()=>{class d{constructor(f,G){this.viewContainer=f,this.templateRef=G}set tuiRepeatTimesOf(f){const G=Math.floor((0,x.K6)(f,0,65536)),{length:w}=this.viewContainer;f<w?this.removeContainers(w-f):this.addContainers(G)}addContainers(f){for(let G=this.viewContainer.length;G<f;G++)this.viewContainer.createEmbeddedView(this.templateRef,new v(G))}removeContainers(f){for(let G=0;G<f;G++)this.viewContainer.remove()}}return d.\u0275fac=function(f){return new(f||d)(C.GI1(C.y8U),C.GI1(C.Yw2))},d.\u0275dir=C.Sc5({type:d,selectors:[["","tuiRepeatTimes","","tuiRepeatTimesOf",""]],inputs:{tuiRepeatTimesOf:"tuiRepeatTimesOf"}}),d})(),S=(()=>{class d{}return d.\u0275fac=function(f){return new(f||d)},d.\u0275mod=C.a4G({type:d}),d.\u0275inj=C.s3X({}),d})()}}]);