"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[2208],{9956:($,I,n)=>{n.d(I,{g:()=>P});var e=n(1368),o=n(4496),l=n(9938),f=n(2528),E=n(7308),r=n(7012),a=n(3972),u=n(5944),m=n(1040);function O(_,T){if(1&_&&(o.SAx(0),o.OEk(1),o.k70()),2&_){const i=T.polymorpheusOutlet;o.yG2(),o.oRS(" ",i," ")}}const N=()=>({});function d(_,T){if(1&_&&(o.I0R(0,"div",1),o.wVc(1,"async"),o.yuY(2,O,2,1,"ng-container",2),o.wVc(3,"async"),o.C$Y()),2&_){const i=o.GaO();o.eAK("t-message-text_light","onDark"===o.kDX(1,6,i.mode$)),o.E7m("@tuiFadeIn",i.animation)("@tuiHeightCollapse",i.animation),o.yG2(2),o.E7m("polymorpheusOutlet",i.error.message||o.kDX(3,8,i.defaultErrorMessage$))("polymorpheusOutletContext",i.error.context||o.q4q(10,N))}}let g=(()=>{class _{constructor(i,M,A){this.animation=i,this.mode$=M,this.defaultErrorMessage$=A,this.error=null,this.visible=!0}set errorSetter(i){this.error=(0,f.gT)(i)?new E.E(i):i}onAnimation(i){this.visible=i}}return _.\u0275fac=function(i){return new(i||_)(o.GI1(u.kp),o.GI1(u.Yx),o.GI1(u.cX))},_.\u0275cmp=o.In1({type:_,selectors:[["tui-error"]],hostBindings:function(i,M){1&i&&o.qCj("animationcancel.self",function(){return M.onAnimation(!1)})("animationstart.self",function(){return M.onAnimation(!0)})},inputs:{errorSetter:[o.Wk5.None,"error","errorSetter"]},features:[o.M5G([a.Ir])],decls:1,vars:1,consts:[["automation-id","tui-error__text","class","t-message-text",3,"t-message-text_light",4,"ngIf"],["automation-id","tui-error__text",1,"t-message-text"],[4,"polymorpheusOutlet","polymorpheusOutletContext"]],template:function(i,M){1&i&&o.yuY(0,d,4,11,"div",0),2&i&&o.E7m("ngIf",M.error&&M.visible)},dependencies:[e.u_,m.Af,e.a],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);display:block;color:var(--tui-negative);word-wrap:break-word;animation:tuiPresent 1s infinite}.t-message-text[_ngcontent-%COMP%]{margin-top:.25rem;white-space:pre-line}.t-message-text_light[_ngcontent-%COMP%]{color:var(--tui-negative-night)}"],data:{animation:[r.iY,r.K2]},changeDetection:0}),_})(),D=(()=>{class _{}return _.\u0275fac=function(i){return new(i||_)},_.\u0275mod=o.a4G({type:_}),_.\u0275inj=o.s3X({imports:[[e.MD,m.Ux]]}),_})();function c(_,T){1&_&&o.wR5(0,"tui-error",0),2&_&&o.E7m("error",T.$implicit)}function v(_,T){1&_&&o.C_f(0)}function p(_,T){1&_&&o.yuY(0,v,1,0,"ng-container",1),2&_&&o.E7m("ngTemplateOutlet",T.$implicit)}let P=(()=>{class _{constructor(){this._errors=null}get errors(){return this._errors}set errors(i){this._errors=i}allErrors(){return this.errors||null}errorsToTemplates(){return l.y.formatErrors(this.errors||null).filter(i=>i&&i instanceof o.Yw2)}errorsToStr(){return l.y.formatErrors(this.errors||null).filter(i=>i&&"string"==typeof i)}static#e=this.\u0275fac=function(M){return new(M||_)};static#t=this.\u0275cmp=o.In1({type:_,selectors:[["app-errors"]],inputs:{errors:"errors"},standalone:!0,features:[o.UHJ],decls:4,vars:0,consts:[[3,"error"],[4,"ngTemplateOutlet"]],template:function(M,A){1&M&&(o.c53(0,c,1,1,"tui-error",0,o.oxv),o.c53(2,p,1,1,"ng-container",null,o.oxv)),2&M&&(o.oho(A.errorsToStr()),o.yG2(2),o.oho(A.errorsToTemplates()))},dependencies:[e.MD,e.XV,D,g]})}return _})()},2208:($,I,n)=>{n.d(I,{G:()=>H});var e=n(4496),o=n(9956),l=n(6504),f=n(8212),E=n(5488),r=n(5193),a=n(3797),u=n(9888),m=n(3320),O=n(6380),N=n(2740),d=n(400),g=n(3480),D=n(4680),c=n(5e3),v=n(8304),p=n(3616),P=n(6684),_=n(9212),T=n(7368),i=n(8824),M=n(3724),A=n(1560),F=n(1368),V=n(9772),w=n(964),W=n(4592),Y=n(7936);const X=(C,y)=>({date:C,time:y});function j(C,y){if(1&C&&(e.I0R(0,"app-reservation-tables-summary",26)(1,"p"),e.OEk(2,"Situazione tavoli per l'orario selezionato:"),e.C$Y()()),2&C){const t=e.GaO();let R;e.E7m("filters",e.IBC(1,X,t.form.value.date,null!==(R=t.utcTime())&&void 0!==R?R:""))}}function Q(C,y){if(1&C){const t=e.KQA();e.I0R(0,"button",27),e.qCj("click",function(){e.usT(t);const s=e.GaO();return s.dateOpen.set(!0),e.CGJ(s.timeOpen.set(!1))}),e.I0R(1,"span",3)(2,"span",28),e.aS0(3,29),e.C$Y(),e.I0R(4,"mat-icon"),e.OEk(5,"calendar_today"),e.C$Y()()()}}let H=(()=>{class C{set item(t){t?this.form.patchValue({date:t.datetime?new d.EK(t.datetime?.getFullYear(),t.datetime?.getMonth(),t.datetime?.getDate()):null,time:t.datetime?new d.uc(t.datetime?.getHours(),t.datetime?.getMinutes()):null,fullname:t.fullname,adults:t.adults,children:t.children,email:t.email,table:t.table,notes:t.notes,phone:t.phone}):this.form.reset()}constructor(t){this.isMobile=t,this.reservationsService=(0,e.uUt)(v.S),this.destroy$=(0,e.uUt)(g.UF),this.datePipe=(0,e.uUt)(F.y),this.formSubmit=new e._w7,this.cancelled=new e._w7,this.validTimes=(0,e.OCB)([]),this.utcTime=(0,e.OCB)(null),this.today=d.EK.currentLocal(),this.inputSize="l",this.form=new l.WC({date:new l.Ku(null,[l.AQ.required]),time:new l.Ku(null,[l.AQ.required]),fullname:new l.Ku(null,[l.AQ.required]),adults:new l.Ku(null,[l.AQ.required,l.AQ.min(0)]),children:new l.Ku(null,[l.AQ.required,l.AQ.min(0)]),email:new l.Ku(null,[l.AQ.email]),table:new l.Ku(null),notes:new l.Ku(null),phone:new l.Ku(null)}),this.loading=!1,this.dateOpen=(0,e.OCB)(!1),this.timeOpen=(0,e.OCB)(!1),this.loadingTimes=(0,e.OCB)(!1),this.submitted=!1,this.e=this.errorsFor}ngOnInit(){this.dateOpen.set(!0),this.timeOpen.set(!1),this.form.get("date").valueChanges.pipe((0,p.a)(this.destroy$),(0,P.I)(t=>t instanceof d.EK),(0,_.y)(()=>this.dateOpen.set(!1)),(0,_.y)(()=>this.timeOpen.set(!0)),(0,_.y)(()=>this.loadingTimes.set(!0)),(0,T.G)(t=>this.reservationsService.getValidTimes(t.toLocalNativeDate())),(0,i.U)(()=>this.loadingTimes.set(!1))).subscribe({next:t=>{const R=t.map(s=>s.valid_times).filter(s=>Array.isArray(s)&&s.length>0).flat();this.validTimes.set(R.map(s=>d.uc.fromString((0,V.CU)(s))))}}),this.form.get("time").valueChanges.pipe((0,p.a)(this.destroy$),(0,_.y)(()=>this.timeOpen.set(!1)),(0,_.y)(t=>this.utcTime.set(t?(0,V.ye)(t.toString("HH:MM")):null))).subscribe((0,M.I)())}submit(){this.submitted=!0,!this.form.invalid&&this.formSubmit.emit(this.formVal())}formVal(){const t=this.form.value;return t.datetime=(0,w.Qx)(t.date,t.time),delete t.date,delete t.time,t.table&&t.table.length>0||delete t.table,t.notes&&t.notes.length>0||delete t.notes,t.email&&t.email.length>0||delete t.notes,t}errorsFor(t){const R=this.form.get(t);return R&&(R.dirty||R.touched||this.submitted)?R.errors:null}cancel(){this.cancelled.emit()}static#e=this.\u0275fac=function(R){return new(R||C)(e.GI1(D.Mv))};static#t=this.\u0275cmp=e.In1({type:C,selectors:[["app-admin-reservation-form"]],inputs:{item:"item",loading:"loading"},outputs:{formSubmit:"formSubmit",cancelled:"cancelled"},standalone:!0,features:[e.M5G([g.UF,F.y]),e.UHJ],decls:59,vars:41,consts:()=>{let t,R,s,h,L,G,z,b,K,B,x,U;return t="Date",R="Now",s="Name",h="No. of adults",L="No. of children",G="Email",z="Table",b="Cell phone",K="Notes",B="Confirm",x="Cancel",U="Set date",[[3,"autocomplete","formGroup","ngSubmit"],["class","block mb-3",3,"filters"],[1,"mb-3"],[1,"flex","items-center"],[1,"me-2","grow",3,"tuiDropdownOpen","tuiAutoFocus","tuiTextfieldSize","min","formControlName"],t,["formControlName","time",1,"grow",3,"tuiDropdownOpen","tuiTextfieldSize","items"],R,["tuiButton","","appearance","icon","type","button","size","s"],[3,"errors"],[3,"tuiTextfieldSize","formControlName"],s,["tuiTextfield","","type","text",3,"autocomplete"],[1,"me-2","grow",3,"tuiTextfieldSize","formControlName"],h,[1,"ms-2","grow",3,"tuiTextfieldSize","formControlName"],L,G,z,b,K,[1,"flex"],["tuiButton","","type","submit","size","l",1,"me-2",3,"showLoader"],B,["tuiButton","","type","button","appearance","icon","size","l",3,"showLoader","click"],x,[1,"block","mb-3",3,"filters"],["tuiButton","","appearance","icon","type","button","size","s",3,"click"],[1,"me-1"],U]},template:function(R,s){1&R&&(e.I0R(0,"form",0),e.qCj("ngSubmit",function(){return s.submit()}),e.yuY(1,j,3,4,"app-reservation-tables-summary",1),e.I0R(2,"div",2)(3,"div",3)(4,"tui-input-date",4),e.SAx(5),e.aS0(6,5),e.k70(),e.C$Y(),e.I0R(7,"tui-input-time",6),e.SAx(8),e.aS0(9,7),e.k70(),e.C$Y()(),e.yuY(10,Q,6,0,"button",8),e.wR5(11,"app-errors",9),e.C$Y(),e.I0R(12,"div",2)(13,"tui-input",10),e.SAx(14),e.aS0(15,11),e.k70(),e.wR5(16,"input",12),e.C$Y(),e.wR5(17,"app-errors",9),e.C$Y(),e.I0R(18,"div",2)(19,"div",3)(20,"tui-input-number",13),e.SAx(21),e.aS0(22,14),e.k70(),e.wR5(23,"input",12),e.C$Y(),e.I0R(24,"tui-input-number",15),e.SAx(25),e.aS0(26,16),e.k70(),e.wR5(27,"input",12),e.C$Y()()(),e.I0R(28,"div",2)(29,"tui-input",10),e.SAx(30),e.aS0(31,17),e.k70(),e.wR5(32,"input",12),e.C$Y(),e.wR5(33,"app-errors",9),e.C$Y(),e.I0R(34,"div",2)(35,"tui-input",10),e.SAx(36),e.aS0(37,18),e.k70(),e.wR5(38,"input",12),e.C$Y(),e.wR5(39,"app-errors",9),e.C$Y(),e.I0R(40,"div",2)(41,"tui-input",10),e.SAx(42),e.aS0(43,19),e.k70(),e.wR5(44,"input",12),e.C$Y(),e.wR5(45,"app-errors",9),e.C$Y(),e.I0R(46,"div",2)(47,"tui-input",10),e.SAx(48),e.aS0(49,20),e.k70(),e.wR5(50,"input",12),e.C$Y(),e.wR5(51,"app-errors",9),e.C$Y(),e.I0R(52,"div",21)(53,"button",22),e.SAx(54),e.aS0(55,23),e.k70(),e.C$Y(),e.I0R(56,"button",24),e.qCj("click",function(){return s.cancel()}),e.SAx(57),e.aS0(58,25),e.k70(),e.C$Y()()()),2&R&&(e.E7m("autocomplete","off")("formGroup",s.form),e.yG2(),e.C0Y(1,s.form.value.date&&s.utcTime()?1:-1),e.yG2(3),e.E7m("tuiDropdownOpen",s.dateOpen())("tuiAutoFocus",!0)("tuiTextfieldSize",s.inputSize)("min",s.today)("formControlName","date"),e.yG2(3),e.E7m("tuiDropdownOpen",s.timeOpen())("tuiTextfieldSize",s.inputSize)("items",s.validTimes()),e.yG2(3),e.C0Y(10,s.isMobile?10:-1),e.yG2(),e.E7m("errors",s.e("datetime")),e.yG2(2),e.E7m("tuiTextfieldSize",s.inputSize)("formControlName","fullname"),e.yG2(3),e.E7m("autocomplete","off"),e.yG2(),e.E7m("errors",s.e("fullname")),e.yG2(3),e.E7m("tuiTextfieldSize",s.inputSize)("formControlName","adults"),e.yG2(3),e.E7m("autocomplete","off"),e.yG2(),e.E7m("tuiTextfieldSize",s.inputSize)("formControlName","children"),e.yG2(3),e.E7m("autocomplete","off"),e.yG2(2),e.E7m("tuiTextfieldSize",s.inputSize)("formControlName","email"),e.yG2(3),e.E7m("autocomplete","off"),e.yG2(),e.E7m("errors",s.e("email")),e.yG2(2),e.E7m("tuiTextfieldSize",s.inputSize)("formControlName","table"),e.yG2(3),e.E7m("autocomplete","off"),e.yG2(),e.E7m("errors",s.e("table")),e.yG2(2),e.E7m("tuiTextfieldSize",s.inputSize)("formControlName","phone"),e.yG2(3),e.E7m("autocomplete","off"),e.yG2(),e.E7m("errors",s.e("phone")),e.yG2(2),e.E7m("tuiTextfieldSize",s.inputSize)("formControlName","notes"),e.yG2(3),e.E7m("autocomplete","off"),e.yG2(),e.E7m("errors",s.e("notes")),e.yG2(2),e.E7m("showLoader",s.loading),e.yG2(3),e.E7m("showLoader",s.loading))},dependencies:[o.g,l.sl,l.sz,l.ue,l.u,l.uW,l.Wo,f.CI,f.Kw,a.CQ,a.Oo,a.cP,Y.b,E.aS,E.rD,u.Q7,u.mi,u.Qj,m.K6,O.iO,O.yc,O.Ml,N.IZ,N.iw,N.gt,c.m6,c.gJ,r.ms,r.oL,A.qL,W.u],encapsulation:2})}return C})()},9938:($,I,n)=>{n.d(I,{y:()=>f});var e=n(6504);const o={required:"Questo campo non pu\xf2 essere vuoto!",email:"Questa email non \xe8 valida!",numbersOnly:"Solo numeri ammessi!",numberOnly:"Solo numeri ammessi!",numerical:"Solo numeri ammessi!",invalid_http_url:"Collegamento http non valido",minlength:E=>`Testo troppo corto: Lunghezza minima: ${E.requiredLength}, lunghezza attuale: ${E.actualLength}`,InvalidFormat:E=>`"${E.value}" non \xe8 un formato valido. Esempio valido: "${E.validExample}"`,pattern:E=>`"${E.actualValue}" non \xe8 un formato valido. Il formato deve rispettare la seguente espressione regolare (RegExp): "${E.requiredPattern}"`,max:E=>`Il valore inserito \xe8 troppo grande! Valore massimo: ${E.max}, valore attuale: ${E.actual}`,min:E=>`Il valore inserito \xe8 troppo piccolo! Valore minimo: ${E.min}, valore attuale: ${E.actual}`,maxlength:E=>`Il valore inserito \xe8 troppo lungo! Lunghezza massima: ${E.requiredLength}, Lunghezza attuale: ${E.actualLength}`,phoneIT:"Questo non sembra essere un numero di telefono italiano valido. Esempio: +39 123 456 7890",inclusion:E=>"Il valore inserito non \xe8 valido. "+(Array.isArray(E)?`I valori ammessi sono: ${E.join(", ")}.`:""),arrayMinLength:E=>`Devi inserire almeno ${E.requiredLength} elementi.`,passwordConfirmation:"Le password non coincidono!"},l={assignToFormUnlessControl:!0};class f{static formatErrors(r,a){return null==r||null==r?[]:new f(r,a).formatErrors()}static assignErrorsToForm(r,a,u={}){const m=a.error?.details;if(!m||!Array.isArray(m))return"object"==typeof m&&Object.keys(m).length>0?this.assignErrorsToFormFromJson(r,m,u):void console.warn("invalid errors provided to assignErrorsToForm",m);this.assignErrorsToFormFromArray(r,m,u)}static assignErrorsToFormFromJson(r,a,u={}){const m={...l,...u};Object.keys(a).forEach(O=>{const N=a[O];N&&Array.isArray(N)?N.forEach(d=>{const g=r.controls[O];g?g.setErrors({[d.attribute]:d.message}):m.assignToFormUnlessControl&&r.setErrors({[d.attribute]:d.message})}):console.warn("assignErrorsToFormFromJson expected an array of ActiveError, but got:",N)})}static assignErrorsToFormFromArray(r,a,u={}){const m={...l,...u};a.forEach(O=>{const N=r instanceof e.WC?r.controls[O.attribute]:r;N?N.setErrors({[O.attribute]:O.message}):m.assignToFormUnlessControl&&r.setErrors({[O.attribute]:O.message})})}constructor(r,a=o){this.defaultMessages=o,this.messages={},this.enableLogging=!1,this.errors=r,a?this.mergeMessages(a):this.assignDefaults()}assignDefaults(){this.messages={},Object.keys(this.defaultMessages).forEach(r=>{this.messages[r]=this.defaultMessages[r]})}mergeMessages(r){[...Object.keys(this.defaultMessages),...Object.keys(r)].forEach(u=>{this.messages[u]=r[u]?r[u]:this.defaultMessages[u]})}formatErrors(){return[...this.errorMsgFromControl()]}warn(...r){this.enableLogging&&console.warn(...r)}errorMsgFromControl(){if(null==this.errors||null==this.errors)return[];var r=[];return Object.keys(this.errors).filter(a=>{if("string"==typeof this.errors[a]&&this.errors[a].length>0)return r.push(this.errors[a]);if(this.messages.hasOwnProperty(a)&&this.messages[a]&&null!=this.messages[a]){const O=this.messages[a];switch(typeof O){case"string":default:r.push(O);break;case"function":r.push(O(this.errors[a]))}}else if(this.warn(`ReactiveFormsErrors missing error message of "${a}". Parser error with your custom logic.`),[!0,!1].includes(this.errors[a])){var m={};m[a]=this.errors[a],"string"!=typeof m&&(m=JSON.stringify(m)),r.push(m)}else r.push(this.errors[a])}),r}}}}]);