"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[9212],{1592:(C,g,e)=>{e.r(g),e.d(g,{RequireResetPasswordComponent:()=>s});var t=e(4496),D=e(1368),c=e(2992),_=e(6504),r=e(4872),a=e(9212),n=e(2300),i=e(3616),l=e(3480),M=e(5e3),m=e(8016),f=e(8212),d=e(7692),v=e(8048),p=e(3797),R=e(7568),T=e(4964),y=e(1128),A=e(8256),u=e(8392),O=e(4476),o=e(7936);let s=(()=>{class E{constructor(){this.route=(0,t.uUt)(c.gV),this.auth=(0,t.uUt)(T.o),this.dialogs=(0,t.uUt)(m._k),this.router=(0,t.uUt)(c.E5),this.destroy$=(0,t.uUt)(l.UF),this.notifications=(0,t.uUt)(y.E),this._=(0,t.uUt)(O.OY).setTitle("Forgot password | La Porta D'Acqua"),this.form=new _.WC({email:new _.Ku(null,[_.AQ.required,_.AQ.email])}),this.submitted=!1,this.loading=!1,this.typing=!1,this.type$=this.form.valueChanges.pipe((0,r.ay)(),(0,a.y)(()=>this.typing=!0),(0,n.o)(1e3),(0,a.y)(()=>this.typing=!1)).subscribe()}ngOnInit(){this.updateEmailFromQueryParams()}submit(){this.submitted=!0,!this.form.invalid&&(this.loading=!0,this.auth.requireResetPassword(this.form.value.email).pipe((0,i.a)(this.destroy$)).subscribe({next:()=>{this.loading=!1,this.showEmailDialog()},error:P=>{this.loading=!1,this.notifications.error((0,A.mk)(P)||u.a)}}))}updateEmailFromQueryParams(){const P=this.route.snapshot.queryParams.email;P&&this.form.patchValue({email:P})}showEmailDialog(){this.dialogs.open("We have sent you an email with details on how to reset your password.",{label:"Email sent",size:"l",data:{button:"Grazie"}}).subscribe({error:P=>console.error("Dialog closed",P),complete:()=>this.router.navigate(["/auth"],{queryParams:{email:this.form.value.email}})})}static#t=this.\u0275fac=function(I){return new(I||E)};static#e=this.\u0275cmp=t.In1({type:E,selectors:[["app-require-reset-password"]],standalone:!0,features:[t.M5G([l.UF]),t.UHJ],decls:19,vars:4,consts:()=>{let P;return P="Email",[[1,"flex","justify-center","h-full"],[1,"flex","flex-col","justify-center"],[1,"flex","flex-col",3,"formGroup","ngSubmit"],[1,"mb-1"],[1,"text-slate-400"],[1,"text-slate-400","mb-3"],[1,"mb-2"],["formControlName","email",3,"tuiAutoFocus","tuiTextfieldSize"],P,["tuiTextfield","","autocomplete","email","type","text"],[1,"flex","justify-between"],["routerLink","/auth","tuiButton","","appearance","secondary","type","button",1,"me-2"],["tuiButton","","type","submit",1,"ms-2",3,"showLoader"]]},template:function(I,U){1&I&&(t.I0R(0,"div",0)(1,"div",1)(2,"form",2),t.qCj("ngSubmit",function(){return U.submit()}),t.I0R(3,"h2",3),t.OEk(4,"Reimposta la password."),t.C$Y(),t.I0R(5,"span",4),t.OEk(6,"Inserisci l'indirizzo email dell'account."),t.C$Y(),t.I0R(7,"span",5),t.OEk(8,"Ti invieremo un'email da cui potrai resettare la password."),t.C$Y(),t.I0R(9,"div",6)(10,"tui-input",7),t.SAx(11),t.aS0(12,8),t.k70(),t.wR5(13,"input",9),t.C$Y()(),t.I0R(14,"div",10)(15,"button",11),t.OEk(16,"Annulla"),t.C$Y(),t.I0R(17,"button",12),t.OEk(18,"Conferma"),t.C$Y()()()()()),2&I&&(t.yG2(2),t.E7m("formGroup",U.form),t.yG2(8),t.E7m("tuiAutoFocus",!0)("tuiTextfieldSize","l"),t.yG2(7),t.E7m("showLoader",U.loading))},dependencies:[D.MD,_.sl,_.sz,_.ue,_.u,_.uW,_.Wo,f.CI,f.Kw,p.CQ,p.Oo,p.cP,o.b,M.m6,M.gJ,d.Sk,R.eW,v.aS,v.rD,c.qQ,c.ER],styles:["[_nghost-%COMP%]{display:block;height:100%}"]})}return E})()},8256:(C,g,e)=>{function t(r,a){return r.error?.message?r.error.message:500==r.status?`${r.error.error} ${r.error.exception}`.replace(/\</gm,"").replace(/\>+/gm,""):504==r.status?"Server unreachable, check your connection and try again.":D(function _(r){if("object"==typeof r.error&&"object"==typeof r.error.details&&Array.isArray(r.error.details)&&r.error.details.length>0){const a=r.error.details.filter(n=>"object"==typeof n&&null!=n&&n instanceof Object&&Object.keys(n).length>0).filter(n=>"string"==typeof n.attribute&&n.attribute.length>0&&("string"==typeof n.message&&n.message.length>0||Array.isArray(n.message)&&n.message.length>0));if(a.length>0)return a}return[]}(r),a)}function D(r,a){if(0==r.length)return null;const n=a?.joinChar??", ",i=r.map(l=>`${l.attribute} ${l.message}`);return i.length?function c(r){return[...new Set(r)]}(i).join(n):null}e.d(g,{Yj:()=>D,mk:()=>t})},8392:(C,g,e)=>{e.d(g,{a:()=>t});const t="Something went wrong."},4736:(C,g,e)=>{e.d(g,{M:()=>_,O:()=>r});var t=e(4496),D=e(5944),c=e(4704);let _=(()=>{class a{constructor(i){this.months$=i}transform({month:i}){return this.months$.pipe((0,c.k)(l=>l[i]))}}return a.\u0275fac=function(i){return new(i||a)(t.GI1(D.GU,16))},a.\u0275pipe=t.UTH({name:"tuiMonth",type:a,pure:!0}),a})(),r=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=t.a4G({type:a}),a.\u0275inj=t.s3X({}),a})()},3797:(C,g,e)=>{e.d(g,{CQ:()=>A,Oo:()=>T,cP:()=>y});var t=e(4496),D=e(6504),c=e(3044),_=e(1800),r=e(4164),a=e(4680),n=e(466),i=e(7936),l=e(8048),M=e(4336),m=e(5944),f=e(9371),d=e(796),v=e(1368);const p=["*",[["input"]]],R=["*","input"];let T=(()=>{class u extends _._y{constructor(o,s,E,h){super(o,s,h),this.textfieldSize=E,this.open=!1}get size(){return this.textfieldSize.size}get nativeFocusableElement(){return this.computedDisabled||!this.textfield?null:this.textfield.nativeFocusableElement}get focused(){return(0,r.ER)(this.nativeFocusableElement)||!!this.hostedDropdown&&this.hostedDropdown.focused}get canOpen(){return this.interactive&&!!this.datalist}onValueChange(o){this.value=o,this.open=!0}onActiveZone(o){this.updateFocused(o)}handleOption(o){this.setNativeValue(String(o)),this.focusInput(),this.value=String(o),this.open=!1}getFallbackValue(){return""}focusInput(o=!1){this.nativeFocusableElement&&this.nativeFocusableElement.focus({preventScroll:o})}setNativeValue(o){this.nativeFocusableElement&&(this.nativeFocusableElement.value=o)}}return u.\u0275fac=function(o){return new(o||u)(t.GI1(D.eq,10),t.GI1(t.kD9),t.GI1(l.$K),t.GI1(_.cn,8))},u.\u0275cmp=t.In1({type:u,selectors:[["tui-input"]],contentQueries:function(o,s,E){if(1&o&&t.szK(E,M.Ux,5,t.Yw2),2&o){let h;t.wto(h=t.Gqi())&&(s.datalist=h.first)}},viewQuery:function(o,s){if(1&o&&(t.CC$(n.Qw,5),t.CC$(i.y_,5)),2&o){let E;t.wto(E=t.Gqi())&&(s.hostedDropdown=E.first),t.wto(E=t.Gqi())&&(s.textfield=E.first)}},hostVars:1,hostBindings:function(o,s){2&o&&t.e48("data-size",s.size)},features:[t.M5G([d.g3,(0,a.NK)(u),(0,m.UH)(u),(0,_.q4)(u)],[d.YL]),t.eg9],ngContentSelectors:R,decls:4,vars:11,consts:[[1,"t-hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-input__textfield",1,"t-textfield",3,"disabled","focusable","invalid","nativeId","pseudoFocus","pseudoHover","readOnly","value","valueChange"]],template:function(o,s){1&o&&(t.kPM(p),t.I0R(0,"tui-hosted-dropdown",0),t.iHE("openChange",function(h){return t.kNx(s.open,h)||(s.open=h),h}),t.qCj("tuiActiveZoneChange",function(h){return s.onActiveZone(h)}),t.I0R(1,"tui-primitive-textfield",1),t.qCj("valueChange",function(h){return s.onValueChange(h)}),t._Xx(2),t._Xx(3,1,["ngProjectAs","input",5,["input"]]),t.C$Y()()),2&o&&(t.E7m("canOpen",s.canOpen)("content",s.datalist||""),t.OKB("open",s.open),t.yG2(),t.E7m("disabled",s.computedDisabled)("focusable",s.computedFocusable)("invalid",s.computedInvalid)("nativeId",s.nativeId)("pseudoFocus",s.computedFocused)("pseudoHover",s.pseudoHover)("readOnly",s.readOnly)("value",s.value))},dependencies:[n.Qw,i.y_,c.M,i.KQ],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}"],changeDetection:0}),u})(),y=(()=>{class u extends f.Cm{onValueChange(o){this.host.onValueChange(o)}}return u.\u0275fac=(()=>{let O;return function(s){return(O||(O=t.otF(u)))(s||u)}})(),u.\u0275dir=t.Sc5({type:u,selectors:[["tui-input"]],features:[t.M5G([(0,m.iu)(u)]),t.eg9]}),u})(),A=(()=>{class u{}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=t.a4G({type:u}),u.\u0275inj=t.s3X({imports:[[v.MD,c.L,i.KA,n.GE]]}),u})()},796:(C,g,e)=>{e.d(g,{YL:()=>m,g3:()=>f}),e(4736);var D=e(5193),c=e(5944),a=(e(3012),e(2700),e(528)),i=(e(4704),e(4496)),l=e(6504);const m=(0,D.Sk)({limitWidth:"fixed",align:"right"}),f={provide:c.Y9,deps:[[new i.T7N,new i.Yiy,l.Y6]],useFactory:a.Z}},4872:(C,g,e)=>{e.d(g,{ay:()=>_});var t=e(4496),D=e(3252),c=e(3616);function _(n){n||((0,t.yAg)(_),n=(0,t.uUt)(t.eM9));const i=new D._(l=>n.onDestroy(l.next.bind(l)));return l=>l.pipe((0,c.a)(i))}}}]);