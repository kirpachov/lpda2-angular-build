"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[1272],{4592:(f,g,e)=>{e.d(g,{u:()=>E});var t=e(4496),d=e(3480),l=e(8304),c=e(3616),a=e(8824),r=e(7692),n=e(5656);let s=(()=>{class o{transform(_){return null==_||"object"!=typeof _||Array.isArray(_)?[]:Object.keys(_).map(p=>[p,_[p]])}static#t=this.\u0275fac=function(p){return new(p||o)};static#e=this.\u0275pipe=t.UTH({name:"objectToArray",type:o,pure:!0,standalone:!0})}return o})();function m(o,O){if(1&o&&t.wR5(0,"tui-loader",0),2&o){const _=t.GaO();t.E7m("showLoader",_.showLoader)("size","s")}}const v=(o,O)=>O.turn.id;function C(o,O){1&o&&t._Xx(0)}const h=(o,O)=>O[0];function M(o,O){1&o&&t.OEk(0,"Quante persone ci sono al tavolo in questione")}function i(o,O){if(1&o&&(t.I0R(0,"th",4),t.OEk(1),t.I0R(2,"span"),t.aS0(3,11),t.C$Y()()),2&o){const _=O.$implicit;t.yG2(),t.oRS(" ",_[0]," ")}}function P(o,O){1&o&&t.OEk(0,"Quanti tavoli con lo stesso numero di persone")}function D(o,O){if(1&o&&(t.I0R(0,"td",8)(1,"span"),t.OEk(2),t.C$Y()()),2&o){const _=O.$implicit;t.yG2(2),t.cNF(_[1])}}function y(o,O){if(1&o&&(t.I0R(0,"p",1)(1,"b"),t.OEk(2),t.C$Y()(),t.I0R(3,"table",2)(4,"thead")(5,"tr",3)(6,"th",4),t.yuY(7,M,1,0,"ng-template",null,5,t.gJz),t.I0R(9,"span",6),t.aS0(10,7),t.C$Y()(),t.c53(11,i,4,1,"th",12,h),t.wVc(13,"objectToArray"),t.C$Y()(),t.I0R(14,"tbody")(15,"tr",3)(16,"td",8),t.yuY(17,P,1,0,"ng-template",null,9,t.gJz),t.I0R(19,"span",6),t.aS0(20,10),t.C$Y()(),t.c53(21,D,3,1,"td",13,h),t.wVc(23,"objectToArray"),t.C$Y()()()),2&o){const _=O.$implicit,p=t.Gew(8),R=t.Gew(18);t.yG2(2),t.cNF(_.turn.name),t.yG2(7),t.E7m("tuiHint",p),t.yG2(2),t.oho(t.kDX(13,3,_.summary)),t.yG2(8),t.E7m("tuiHint",R),t.yG2(2),t.oho(t.kDX(23,5,_.summary))}}const A=()=>[];function u(o,O){if(1&o&&(t.yuY(0,C,1,0),t.c53(1,y,24,7,null,null,v)),2&o){const _=t.GaO();t.C0Y(0,(_.data()||t.q4q(1,A)).length>0?0:-1),t.yG2(),t.oho(_.data())}}const T=["*"];let E=(()=>{class o{constructor(){this.destroy$=(0,t.uUt)(d.UF),this.service=(0,t.uUt)(l.S),this.data=(0,t.OCB)(null),this.loading=(0,t.OCB)(!1),this.showLoader=!0,this.filters=null}ngOnChanges(){this.query()}query(){this.loading.set(!0),this.service.tablesSummary(this.filters??{}).pipe((0,c.a)(this.destroy$),(0,a.U)(()=>this.loading.set(!1))).subscribe({next:_=>{this.data.set(_)}})}static#t=this.\u0275fac=function(p){return new(p||o)};static#e=this.\u0275cmp=t.In1({type:o,selectors:[["app-reservation-tables-summary"]],inputs:{showLoader:"showLoader",filters:"filters"},standalone:!0,features:[t.M5G([d.UF]),t.SYr,t.UHJ],ngContentSelectors:T,decls:2,vars:1,consts:()=>{let _,p,R;return _="Type:",p="Quantity:",R="people",[[3,"showLoader","size"],[1,"font-xl"],[1,"tui-table"],[1,"tui-table__tr","tui-table__tr_border_none"],[1,"tui-table__th"],["headerExplain",""],[3,"tuiHint"],_,[1,"tui-table__td"],["valueExplain",""],p,R,["class","tui-table__th"],["class","tui-table__td"]]},template:function(p,R){1&p&&(t.kPM(),t.yuY(0,m,1,2,"tui-loader",0)(1,u,3,2)),2&p&&t.C0Y(0,R.loading()?0:1)},dependencies:[r.Sk,r.Cb,s,n.WY,n.lh,n.SL,n.i6,n.IT],styles:["td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid var(--tui-base-04)}table[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-size:.9rem}table[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]   .tui-table__td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]   .tui-table__th[_ngcontent-%COMP%]{padding:.5rem;height:inherit}"],changeDetection:0})}return o})()},9772:(f,g,e)=>{e.d(g,{CU:()=>d,ye:()=>l});const t=(new Date).getTimezoneOffset()/60;function d(c,a=t){return"string"==typeof c&&c.length>0&&c.match(/\d{2}:\d{2}/)?`${Number(c.split(":")[0])-a}:${c.split(":")[1]}`:(console.error("Invalid string provided to strTimeTimezone",{string:c}),"")}function l(c,a=t){return d(c,-1*a)}},5136:(f,g,e)=>{e.d(g,{e:()=>l});var t=e(8400),d=e(9772);class l extends t.w{constructor(a){super(a),this.name=a.name,this.weekday=a.weekday,this.step=a.step,this.valid_times=a.valid_times,this.starts_at=a.starts_at?(0,d.CU)(a.starts_at):void 0,this.ends_at=a.ends_at?(0,d.CU)(a.ends_at):void 0}}},6579:(f,g,e)=>{e.d(g,{C:()=>a});var t=e(8400);class d extends t.w{constructor(n){super(n),this.image_pixel_id=n.image_pixel_id,this.event_data=n.event_data,this.event_time=n.event_time?new Date(n.event_time):void 0}}class l extends t.w{constructor(n){super(n),this.image_id=n.image_id,this.delivered_email_id=n.delivered_email_id,this.record_type=n.record_type,this.record_id=n.record_id,this.event_type=n.event_type,this.secret=n.secret,this.events=n.events?n.events.map(s=>new d(s)):[]}}class c extends t.w{constructor(n){super(n),this.record_id=n.record_id,this.record_type=n.record_type,this.text=n.text,this.html=n.html,this.subject=n.subject,this.headers=n.headers,this.raw=n.raw,this.image_pixels=n.image_pixels?n.image_pixels.map(s=>new l(s)):[]}}class a extends t.w{constructor(n){super(n),this.fullname=n.fullname,this.datetime=n.datetime?new Date(n.datetime):void 0,this.status=n.status,this.secret=n.secret,this.adults=n.adults,this.children=n.children,this.table=n.table,this.notes=n.notes,this.email=n.email,this.phone=n.phone,this.delivered_emails=n.delivered_emails?n.delivered_emails.map(s=>new c(s)):[]}}},1676:(f,g,e)=>{e.d(g,{s:()=>C});var t=e(4496),d=e(6772),l=e(4388),c=e(7048),a=e(8256),r=e(8392),n=e(6700),s=e(4704),m=e(9212);function v(h){if(null==h)return null;if("object"==typeof h)return h;if(!("string"==typeof h&&h.length>0))return null;try{return JSON.parse(h)}catch{}return null}let C=(()=>{class h extends d.A{constructor(){super("public_data"),this.notifications=(0,t.uUt)(l.E),this.data$=new n.g(null),this.messages=(0,t.OCB)(null),this.messages$=this.data$.pipe((0,s.k)(i=>"object"==typeof i&&null!==i?v(i.public_messages):null),(0,m.y)(i=>this.messages.set(i))),this.contacts=(0,t.OCB)(null),this.contacts$=this.data$.pipe((0,s.k)(i=>"object"==typeof i&&null!==i?v(i.settings.email_contacts):null),(0,m.y)(i=>this.contacts.set(i))),this.load(),[this.contacts$,this.messages$].forEach(i=>{i.subscribe({error:P=>{console.warn("unexpected error",P)}})})}load(){this.http.get("").subscribe({next:i=>{this.data$.next(i)},error:i=>{this.notifications.error(i instanceof c.gj?(0,a.mk)(i):r.a)}})}static#t=this.\u0275fac=function(P){return new(P||h)};static#e=this.\u0275prov=t.wxM({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},4820:(f,g,e)=>{e.d(g,{G:()=>v});var t=e(4496),d=e(6579),l=e(6700),c=e(4704),a=e(9212),r=e(9144),n=e(6772),s=e(1676),m=e(5136);let v=(()=>{class C extends n.A{constructor(){super("reservations"),this.publicData=(0,t.uUt)(s.s),this.created=new l.g(null),this.publicData.data$.subscribe({next:M=>{this.created.next(M?.reservation?new d.C(M.reservation):null)}})}getValidTimes(M){return this.get("valid_times",{params:{date:M.toISOString()}}).pipe((0,c.k)(i=>i.map(P=>new m.e(P))))}load(M){return this.get(`${M}`).pipe((0,c.k)(i=>new d.C(i)))}create(M){return this.post("",M).pipe((0,c.k)(i=>new d.C(i.item)),(0,a.y)(i=>this.created.next(i)),(0,r.a)(i=>{throw this.created.next(null),i}))}resendConfirmation(M){return this.post(`${M}/resend_confirmation_email`,{})}cancel(M){return this.post(`${M}/cancel`,{})}static#t=this.\u0275fac=function(i){return new(i||C)};static#e=this.\u0275prov=t.wxM({token:C,factory:C.\u0275fac,providedIn:"root"})}return C})()},8304:(f,g,e)=>{e.d(g,{S:()=>r});var t=e(4496),d=e(6012),l=e(6579),c=e(4704),a=e(4820);let r=(()=>{class n extends d.s{constructor(){super(l.C,"admin/reservations"),this.publicReservations=(0,t.uUt)(a.G),this.getValidTimes=this.publicReservations.getValidTimes}tablesSummary(m={}){return this.get("tables_summary",{params:m})}deliverConfirmationEmail(m){return this.post(`${m}/deliver_confirmation_email`,{}).pipe((0,c.k)(v=>this.mapItem(v)))}static#t=this.\u0275fac=function(v){return new(v||n)};static#e=this.\u0275prov=t.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()},1632:(f,g,e)=>{e.d(g,{k:()=>c,u:()=>a});var t=e(4496),d=e(900),l=e(4680);let c=(()=>{class r{constructor(s,m){this.el=s,this.takeOnlyTrustedEvents=m,this.tuiPressedChange=(0,d.Y7)(this.el.nativeElement,{onlyTrusted:this.takeOnlyTrustedEvents})}}return r.\u0275fac=function(s){return new(s||r)(t.GI1(t.GMv),t.GI1(l.mm))},r.\u0275dir=t.Sc5({type:r,selectors:[["","tuiPressedChange",""]],outputs:{tuiPressedChange:"tuiPressedChange"}}),r})(),a=(()=>{class r{}return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=t.a4G({type:r}),r.\u0275inj=t.s3X({}),r})()},1200:(f,g,e)=>{e.d(g,{A:()=>r,m:()=>n});var t=e(4496),d=e(900),l=e(3480),c=e(800),a=e(3616);let r=(()=>{class s{constructor(v,C,h){this.el=v,this.zone=C,this.destroy$=h,this.eventName=""}ngOnInit(){(0,c.w)(this.el.nativeElement,this.eventName,{passive:!1}).pipe((0,d.Uv)(this.zone),(0,d.uy)(),(0,a.a)(this.destroy$)).subscribe()}}return s.\u0275fac=function(v){return new(v||s)(t.GI1(t.GMv),t.GI1(t.WW2),t.GI1(l.UF,2))},s.\u0275dir=t.Sc5({type:s,selectors:[["","tuiPreventDefault",""]],inputs:{eventName:[t.Wk5.None,"tuiPreventDefault","eventName"]},features:[t.M5G([l.UF])]}),s})(),n=(()=>{class s{}return s.\u0275fac=function(v){return new(v||s)},s.\u0275mod=t.a4G({type:s}),s.\u0275inj=t.s3X({}),s})()},1512:(f,g,e)=>{e.d(g,{C:()=>y,w:()=>A});var t=e(4496),d=e(900),l=e(4392),c=e(4164),a=e(3480),r=e(4680),n=e(3972),s=e(5944),m=e(3412),v=e(4704),C=e(3656),h=e(1368);const M=["tuiLink",""];function i(u,T){if(1&u&&t.wR5(0,"tui-svg",3),2&u){const E=t.GaO();t.E7m("src",E.icon||"")}}function P(u,T){if(1&u&&t.wR5(0,"tui-svg",4),2&u){const E=t.GaO();t.E7m("src",E.icon||"")}}const D=["*"];let y=(()=>{class u{constructor(E,o,O){this.el=E,this.mode$=o,this.pseudo=!1,this.icon="",this.iconAlign="right",this.iconRotated=!1,this.mode=null,this.focusVisible=!1,this.focusedChange=(0,m.U)((0,d.Ax)(this.el.nativeElement,"focusin").pipe((0,v.k)(l.Ml)),(0,d.Ax)(this.el.nativeElement,"focusout").pipe((0,v.k)(l.so))),O.subscribe(_=>{this.focusVisible=_})}get nativeFocusableElement(){return this.el.nativeElement}get focused(){return(0,c.ER)(this.nativeFocusableElement)}get hasIcon(){return!!this.icon}get iconAlignLeft(){return this.hasIcon&&"left"===this.iconAlign}get iconAlignRight(){return this.hasIcon&&"right"===this.iconAlign}}return u.\u0275fac=function(E){return new(E||u)(t.GI1(t.GMv),t.GI1(s.Yx),t.GI1(a.MF))},u.\u0275cmp=t.In1({type:u,selectors:[["a","tuiLink",""],["button","tuiLink",""]],hostVars:7,hostBindings:function(E,o){1&E&&t.qCj("$.data-mode.attr",function(){return o.mode$}),2&E&&(t.e48("data-host-mode",o.mode),t.eAK("_pseudo",o.pseudo)("_icon-rotated",o.iconRotated)("_focus-visible",o.focusVisible))},inputs:{pseudo:"pseudo",icon:"icon",iconAlign:"iconAlign",iconRotated:"iconRotated",mode:"mode"},exportAs:["tuiLink"],features:[t.M5G([(0,r.NK)(u),a.MF,a.UF,n.Ir])],attrs:M,ngContentSelectors:D,decls:4,vars:2,consts:[["class","t-icon t-icon_left",3,"src",4,"ngIf"],[1,"t-content"],["class","t-icon t-icon_right",3,"src",4,"ngIf"],[1,"t-icon","t-icon_left",3,"src"],[1,"t-icon","t-icon_right",3,"src"]],template:function(E,o){1&E&&(t.kPM(),t.yuY(0,i,1,1,"tui-svg",0),t.I0R(1,"span",1),t._Xx(2),t.C$Y(),t.yuY(3,P,1,1,"tui-svg",2)),2&E&&(t.E7m("ngIf",o.iconAlignLeft),t.yG2(3),t.E7m("ngIf",o.iconAlignRight))},dependencies:[C.Wu,h.u_],styles:["[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;text-decoration:none;transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;color:var(--tui-link);text-align:left;text-transform:inherit;font-weight:inherit;cursor:pointer;outline:none}[_nghost-%COMP%]:hover{color:var(--tui-link-hover)}[_nghost-%COMP%]:disabled{opacity:var(--tui-disabled-opacity);cursor:default}[data-mode=onLight][_nghost-%COMP%]{color:var(--tui-text-02)}[data-mode=onLight][_nghost-%COMP%]:hover, [data-mode=onLight]._active[_nghost-%COMP%]{color:var(--tui-text-01)}[data-mode=onLight]._pseudo[_nghost-%COMP%]{color:var(--tui-text-01)}[data-mode=onLight]._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{-webkit-text-decoration-color:rgba(0,0,0,.48);text-decoration-color:#0000007a}[data-mode=onLight]._pseudo[_nghost-%COMP%]:hover, [data-mode=onLight]._pseudo._active[_nghost-%COMP%]{color:var(--tui-text-03)}[data-mode=onLight][data-host-mode=negative][_nghost-%COMP%]{color:var(--tui-negative-night)}[data-mode=onLight][data-host-mode=negative][_nghost-%COMP%]:hover, [data-mode=onLight][data-host-mode=negative][_nghost-%COMP%]:active, [data-mode=onLight][data-host-mode=negative]._active[_nghost-%COMP%]{color:var(--tui-negative-night-hover)}[data-mode=onDark][_nghost-%COMP%]{color:var(--tui-text-03-night)}[data-mode=onDark][_nghost-%COMP%]:hover, [data-mode=onDark][_nghost-%COMP%]:active, [data-mode=onDark]._active[_nghost-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onDark]._pseudo[_nghost-%COMP%]{color:var(--tui-text-01-night)}[data-mode=onDark]._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{-webkit-text-decoration-color:rgba(255,255,255,.48);text-decoration-color:#ffffff7a}[data-mode=onDark]._pseudo[_nghost-%COMP%]:hover, [data-mode=onDark]._pseudo[_nghost-%COMP%]:active, [data-mode=onDark]._pseudo._active[_nghost-%COMP%]{color:var(--tui-text-03-night)}[data-mode=onDark][data-host-mode=positive][_nghost-%COMP%]{color:var(--tui-positive-night)}[data-mode=onDark][data-host-mode=positive][_nghost-%COMP%]:hover, [data-mode=onDark][data-host-mode=positive][_nghost-%COMP%]:active, [data-mode=onDark][data-host-mode=positive]._active[_nghost-%COMP%]{color:var(--tui-positive-night-hover)}[data-host-mode=negative][_nghost-%COMP%]{color:var(--tui-negative)}[data-host-mode=negative][_nghost-%COMP%]:hover{color:var(--tui-negative-hover)}[data-host-mode=negative]._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{-webkit-text-decoration-color:rgba(222,76,30,.48);text-decoration-color:#de4c1e7a}[data-host-mode=positive][_nghost-%COMP%]{color:var(--tui-positive)}[data-host-mode=positive][_nghost-%COMP%]:hover{color:var(--tui-positive-hover)}[data-host-mode=positive]._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{-webkit-text-decoration-color:rgba(58,169,129,.48);text-decoration-color:#3aa9817a}._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-selection)}[data-mode=onLight]._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-clear);color:var(--tui-text-01)}[data-mode=onDark]._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-clear-inverse);color:var(--tui-text-01-night)}[data-host-mode=positive]._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-success-bg)}[data-host-mode=negative]._focus-visible[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{background:var(--tui-error-bg)}._pseudo[_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{padding-bottom:.15em;-webkit-text-decoration:underline dashed rgba(51,111,238,.48);text-decoration:underline dashed rgba(51,111,238,.48);text-underline-offset:.2em;text-decoration-thickness:.7px}.t-icon[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;width:var(--tui-link-icon-size, 1.5rem);height:var(--tui-link-icon-size, 1.5rem);margin-top:-.125rem}.t-icon_left[_ngcontent-%COMP%]{margin-right:.25rem}.t-icon_right[_ngcontent-%COMP%]{margin-left:.25rem}._icon-rotated[_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}"],changeDetection:0}),u})(),A=(()=>{class u{}return u.\u0275fac=function(E){return new(E||u)},u.\u0275mod=t.a4G({type:u}),u.\u0275inj=t.s3X({imports:[[h.MD,C.Yt]]}),u})()}}]);