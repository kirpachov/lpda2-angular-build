"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[9388],{9128:(b,g,a)=>{a.r(g),a.d(g,{AdminReservationsHomeComponent:()=>t_});var e=a(4496),p=a(1368),r=a(6504),C=a(3797),E=a(3480),u=a(5e3),d=a(8016),S=a(8212),f=a(1512),O=a(5656),M=a(7692),L=a(9880),P=a(1560),j=a(1236),ee=a(5892),te=a(1128),$=a(3616),V=a(8824),k=a(8256),Z=a(8304),re=a(7556),le=a(580),ae=a(2516),q=a(6096),D=a(6052),Te=a(9604),x=a(8048),se=a(7936),l=a(4336),v=a(6732),m=a(1040);function I(n,i){1&n&&(e.SAx(0),e.aS0(1,10),e.k70())}function N(n,i){if(1&n&&(e.SAx(0),e.OEk(1),e.k70()),2&n){const t=i.polymorpheusOutlet;e.yG2(),e.oRS(" ",t," ")}}function w(n,i){if(1&n&&e.yuY(0,N,2,1,"ng-container",11),2&n){const t=e.GaO(2);e.E7m("polymorpheusOutlet",t.optionTemplate$())}}function ne(n,i){1&n&&e.C_f(0)}const Se=(n,i)=>({$implicit:n,injector:i});function ve(n,i){if(1&n&&e.yuY(0,ne,1,0,"ng-container",12),2&n){const t=e.GaO().$implicit,o=e.GaO();e.E7m("polymorpheusOutlet",o.optionTemplate$())("polymorpheusOutletContext",e.IBC(2,Se,t,o.injector))}}function Pe(n,i){1&n&&e.C_f(0)}const Ce=n=>({data:n});function $e(n,i){if(1&n&&e.yuY(0,Pe,1,0,"ng-container",12),2&n){const t=e.GaO().$implicit,o=e.GaO();e.E7m("polymorpheusOutlet",o.optionTemplate$())("polymorpheusOutletContext",e.S45(2,Ce,t))}}function Ge(n,i){if(1&n&&e.wR5(0,"div",13),2&n){const t=e.GaO().$implicit,o=e.GaO();e.E7m("innerText",o.stringify(t))}}function xe(n,i){if(1&n&&e.yuY(0,w,1,1)(1,ve,1,5)(2,$e,1,4)(3,Ge,1,1),2&n){const t=e.GaO();let o;e.C0Y(0,"text"===(o=t.optionTemplateType$())?0:"template"===o?1:"component"===o?2:3)}}function Le(n,i){if(1&n&&(e.SAx(0),e.OEk(1),e.k70()),2&n){const t=i.polymorpheusOutlet;e.yG2(),e.oRS(" ",t," ")}}function De(n,i){if(1&n&&e.yuY(0,Le,2,1,"ng-container",11),2&n){const t=e.GaO(2);e.E7m("polymorpheusOutlet",t.nativeOptionTemplate$())}}function Ye(n,i){1&n&&e.C_f(0)}function Ve(n,i){if(1&n&&e.yuY(0,Ye,1,0,"ng-container",12),2&n){const t=e.GaO().$implicit,o=e.GaO();e.E7m("polymorpheusOutlet",o.nativeOptionTemplate$())("polymorpheusOutletContext",e.IBC(2,Se,t,o.injector))}}function be(n,i){1&n&&e.C_f(0)}function ke(n,i){if(1&n&&e.yuY(0,be,1,0,"ng-container",12),2&n){const t=e.GaO().$implicit,o=e.GaO();e.E7m("polymorpheusOutlet",o.nativeOptionTemplate$())("polymorpheusOutletContext",e.S45(2,Ce,t))}}function we(n,i){if(1&n&&e.wR5(0,"div",13),2&n){const t=e.GaO().$implicit,o=e.GaO();e.E7m("innerText",o.stringify(t))}}function ze(n,i){if(1&n&&e.yuY(0,De,1,1)(1,Ve,1,5)(2,ke,1,4)(3,we,1,1),2&n){const t=e.GaO();let o;e.C0Y(0,"text"===(o=t.nativeOptionTemplateType$())?0:"template"===o?1:"component"===o?2:3)}}function Fe(n,i){if(1&n&&(e.SAx(0),e.OEk(1),e.k70()),2&n){const t=e.GaO(2);e.yG2(),e.oRS(" ",t.placeholder," ")}}function He(n,i){if(1&n&&(e.I0R(0,"span",null,14),e._Xx(2),e.C$Y(),e.yuY(3,Fe,2,1,"ng-container",15)),2&n){const t=e.Gew(1);e.yG2(3),e.E7m("ngIf",!t.hasChildNodes())}}function Xe(n,i){1&n&&(e.SAx(0),e.aS0(1,19),e.k70())}function Ue(n,i){if(1&n&&(e.I0R(0,"span"),e.OEk(1),e.C$Y()),2&n){const t=e.GaO(2);e.yG2(),e.cNF(t.emptyContentString())}}function Je(n,i){1&n&&e.C_f(0)}function Ke(n,i){if(1&n&&(e.SAx(0),e.yuY(1,Je,1,0,"ng-container",8),e.k70()),2&n){const t=e.GaO(4);e.yG2(),e.E7m("ngTemplateOutlet",t.emptyContentTemplate())}}function Be(n,i){if(1&n&&(e.SAx(0),e.yuY(1,Ke,2,1,"ng-container",20),e.k70()),2&n){e.GaO(2);const t=e.Gew(6),o=e.GaO();e.yG2(),e.E7m("ngIf",o.emptyContentTemplate())("ngIfElse",t)}}function Qe(n,i){if(1&n&&(e.SAx(0),e.yuY(1,Be,2,2,"ng-container",20),e.k70()),2&n){e.GaO();const t=e.Gew(4),o=e.GaO();e.yG2(),e.E7m("ngIf",o.emptyContent$())("ngIfElse",t)}}function We(n,i){if(1&n&&(e.I0R(0,"span",null,16),e._Xx(2,1),e.C$Y(),e.yuY(3,Xe,2,0,"ng-template",null,17,e.gJz)(5,Ue,2,1,"ng-template",null,18,e.gJz)(7,Qe,2,2,"ng-container",15)),2&n){const t=e.Gew(1);e.yG2(7),e.E7m("ngIf",!t.hasChildNodes())}}function je(n,i){1&n&&e.wR5(0,"tui-loader")}function Ze(n,i){1&n&&e.C_f(0)}function qe(n,i){if(1&n&&e.yuY(0,Ze,1,0,"ng-container",8),2&n){e.GaO(2);const t=e.Gew(9);e.E7m("ngTemplateOutlet",t)}}function et(n,i){1&n&&e.C_f(0)}function tt(n,i){if(1&n&&(e.SAx(0),e.yuY(1,et,1,0,"ng-container",8),e.k70()),2&n){e.GaO(2);const t=e.Gew(11);e.yG2(),e.E7m("ngTemplateOutlet",t)}}function nt(n,i){if(1&n&&e.yuY(0,qe,1,1,"ng-template",null,21,e.gJz)(2,tt,2,1,"ng-container",20),2&n){const t=e.Gew(1),o=e.GaO();e.yG2(2),e.E7m("ngIf",o.loading())("ngIfElse",t)}}function ot(n,i){1&n&&e.C_f(0)}function _t(n,i){1&n&&e.C_f(0)}function it(n,i){1&n&&e.C_f(0)}function at(n,i){if(1&n&&(e.SAx(0),e.yuY(1,it,1,0,"ng-container",8),e.k70()),2&n){e.GaO(4);const t=e.Gew(11);e.yG2(),e.E7m("ngTemplateOutlet",t)}}function st(n,i){1&n&&e.C_f(0)}function rt(n,i){if(1&n){const t=e.KQA();e.I0R(0,"button",28)(1,"span",29),e.qCj("click",function(){e.usT(t);const _=e.GaO(4);return e.CGJ(_.loadMoreItems())}),e.yuY(2,st,1,0,"ng-container",20),e.C$Y()()}if(2&n){const t=e.GaO(4),o=e.Gew(1);e.E7m("size",t.optionSize)("disabled",!0),e.yG2(2),e.E7m("ngIf",t.loadMore)("ngIfElse",o)}}function lt(n,i){if(1&n&&(e.SAx(0),e.yuY(1,at,2,1,"ng-container",15)(2,rt,3,4,"button",27),e.k70()),2&n){const t=e.GaO(3);e.yG2(),e.E7m("ngIf",t.loading),e.yG2(),e.E7m("ngIf",!t.loading)}}const ct=n=>({$implicit:n});function Et(n,i){if(1&n){const t=e.KQA();e.SAx(0),e.I0R(1,"button",25),e.qCj("mouseenter",function(){const _=e.usT(t),s=_.index,c=_.last,R=e.GaO(2);return e.CGJ(R.optionMouseEnter(s,c))})("focus",function(){const _=e.usT(t),s=_.index,c=_.last,R=e.GaO(2);return e.CGJ(R.optionFocus(s,c))}),e.yuY(2,_t,1,0,"ng-container",26),e.C$Y(),e.yuY(3,lt,3,2,"ng-container",15),e.k70()}if(2&n){const t=i.$implicit,o=i.last,_=e.GaO(2),s=e.Gew(5);e.yG2(),e.E7m("size",_.optionSize)("value",t)("disabled",_.disabledItemHandler(t)),e.yG2(),e.E7m("ngTemplateOutlet",s)("ngTemplateOutletContext",e.S45(6,ct,t)),e.yG2(),e.E7m("ngIf",o&&_.thereAreMoreItems)}}function ut(n,i){if(1&n){const t=e.KQA();e.I0R(0,"span",33),e.qCj("click",function(){e.usT(t);const _=e.GaO(3);return e.CGJ(_.createNew.emit())}),e.I0R(1,"mat-icon"),e.OEk(2,"add"),e.C$Y(),e.I0R(3,"span"),e.aS0(4,34),e.C$Y()()}}function pt(n,i){if(1&n&&(e.I0R(0,"button",30)(1,"span",null,31),e._Xx(3,2),e.C$Y(),e.yuY(4,ut,5,0,"span",32),e.C$Y()),2&n){const t=e.Gew(2),o=e.GaO(2);e.E7m("size",o.optionSize)("value",null)("disabled",!0),e.yG2(4),e.E7m("ngIf",!t.hasChildNodes())}}function mt(n,i){if(1&n&&(e.I0R(0,"tui-data-list",22),e.yuY(1,Et,4,8,"ng-container",23)(2,pt,5,4,"button",24),e.C$Y()),2&n){const t=e.GaO(),o=e.Gew(13);e.E7m("emptyContent",o),e.yG2(),e.E7m("ngForOf",t.items()),e.yG2(),e.E7m("ngIf",t.showCreateNew)}}const Tt=["*",[["","empty-content",""]],[["","create-new",""]]],St=["*","[empty-content]","[create-new]"];let Re=(()=>{class n extends le.m{constructor(){super(),this.weekday=(0,e.uUt)(ae.G),this.stringify=t=>`${t.name} (${t.starts_at} - ${t.ends_at}, ${this.weekday.transform(t.weekday)})`,this.service=(0,e.uUt)(re.K)}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-reservation-turn-select"]],inputs:{outputType:"outputType",service:"service",stringify:"stringify",query:"query",autofocus:"autofocus",placeholder:"placeholder",optionTemplate:"optionTemplate",stringifyOption:"stringifyOption",inputSize:"inputSize",page:"page",per_page:"per_page",optionSize:"optionSize",disabledItemHandler:"disabledItemHandler",loadMoreOnLastItem:"loadMoreOnLastItem",emptyContent:"emptyContent",showCreateNew:"showCreateNew",nativeOptionTemplate:"nativeOptionTemplate",filters:"filters",showCleaner:"showCleaner"},outputs:{httpError:"httpError",pageChange:"pageChange",queryChange:"queryChange",per_pageChange:"per_pageChange",createNew:"createNew"},standalone:!0,features:[e.M5G([{provide:r.Y6,useExisting:(0,e.wd)(()=>n),multi:!0},E.UF,ae.G]),e.eg9,e.UHJ],ngContentSelectors:St,decls:17,vars:6,consts:()=>{let t,o,_;return t="Load more",o="We found nothing.",_="Create new",[["loadMoreDefault",""],["valueContent",""],["nativeOptionTemplate",""],["placeholderTemplate",""],["nativeEmptyContentTemplate",""],["loadingTemplate",""],["loadingOrEmptyContent",""],[3,"tuiTextfieldCleaner","stringify","tuiTextfieldSize","formControl","valueContent","searchChange"],[4,"ngTemplateOutlet"],[3,"emptyContent",4,"tuiDataList"],t,[4,"polymorpheusOutlet"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],[3,"innerText"],["customContent",""],[4,"ngIf"],["customEmptyContent",""],["defaultEmptyContent",""],["emptyContentCustomString",""],o,[4,"ngIf","ngIfElse"],["empty",""],[3,"emptyContent"],[4,"ngFor","ngForOf"],["tuiOption","",3,"size","value","disabled",4,"ngIf"],["tuiOption","",3,"size","value","disabled","mouseenter","focus"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tuiOption","",3,"size","disabled",4,"ngIf"],["tuiOption","",3,"size","disabled"],["role","button",3,"click"],["tuiOption","",3,"size","value","disabled"],["createNewCustomTemplate",""],["role","button","class","d-flex align-items-center",3,"click",4,"ngIf"],["role","button",1,"d-flex","align-items-center",3,"click"],_]},template:function(o,_){if(1&o&&(e.kPM(Tt),e.yuY(0,I,2,0,"ng-template",null,0,e.gJz)(2,xe,4,1,"ng-template",null,1,e.gJz)(4,ze,4,1,"ng-template",null,2,e.gJz)(6,He,4,1,"ng-template",null,3,e.gJz)(8,We,8,1,"ng-template",null,4,e.gJz)(10,je,1,0,"ng-template",null,5,e.gJz)(12,nt,3,2,"ng-template",null,6,e.gJz),e.I0R(14,"tui-combo-box",7),e.qCj("searchChange",function(c){return _.onSearchChange(c)}),e.yuY(15,ot,1,0,"ng-container",8)(16,mt,3,3,"tui-data-list",9),e.C$Y()),2&o){const s=e.Gew(3),c=e.Gew(7);e.yG2(14),e.E7m("tuiTextfieldCleaner",_.showCleaner)("stringify",_.stringify)("tuiTextfieldSize",_.inputSize)("formControl",_.control)("valueContent",s),e.yG2(),e.E7m("ngTemplateOutlet",c)}},dependencies:[p.MD,p.ay,p.u_,p.XV,q.uk,q.i_,q.qI,x.aS,x.es,x.rD,se.KA,C.CQ,l.A$,l.yi,l.sP,l.Ux,D.q8,r.sl,r.ue,r.ug,v.kR,Te.CA,M.Sk,M.Cb,m.Ux,m.Af,P.oB,P.qL],changeDetection:0})}return n})();var oe=a(466),Y=a(5188),Ct=a(5140),T=a(400),Rt=a(3264),ce=a(3984),de=a(1338),dt=a(9160),Oe=a(1673);let Ot=(()=>{class n{constructor(){this.datePipe=(0,e.uUt)(p.y),this.today=T.EK.currentLocal(),this.singleDateFormat={default:"cccc d MMMM",differentYear:"d MMMM y"}}transform(t){if(!(t instanceof T.Se))return"";const o=t.from.year==t.to.year&&t.from.year==this.today.year?this.singleDateFormat.default:this.singleDateFormat.differentYear;return t.isSingleDay?t.from.daySame(this.today)?"Today":this.datePipe.transform(t.from.toUtcNativeDate(),o)||"":t.from.month==t.to.month?1==t.from.day&&t.to.daySame(t.from.append({month:1}).append({day:-1}))?this.datePipe.transform(t.from.toUtcNativeDate(),"MMMM y")||"":`${t.from.day} - ${t.to.day} ${this.datePipe.transform(t.to.toUtcNativeDate(),"MMMM")||""}`:`${this.datePipe.transform(t.from.toLocalNativeDate(),o)||""} - ${this.datePipe.transform(t.to.toLocalNativeDate(),o)||""}`}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275pipe=e.UTH({name:"stringifyTuiDayRange",type:n,pure:!0,standalone:!0})}return n})();function Nt(n,i){if(1&n&&(e.I0R(0,"span",9),e.aS0(1,10),e.C$Y(),e.I0R(2,"span",9),e.OEk(3),e.wVc(4,"date"),e.wVc(5,"fromTuiDay"),e.C$Y(),e.I0R(6,"span",9),e.aS0(7,11),e.C$Y(),e.I0R(8,"span",9),e.OEk(9),e.wVc(10,"date"),e.wVc(11,"fromTuiDay"),e.C$Y()),2&n){const t=e.GaO(2);e.yG2(3),e.cNF(e.g7$(4,2,e.kDX(5,5,t.control.value.from),"fullDate")),e.yG2(6),e.cNF(e.g7$(10,7,e.kDX(11,10,t.control.value.to),"fullDate"))}}function gt(n,i){if(1&n&&e.yuY(0,Nt,12,12),2&n){const t=e.GaO();e.C0Y(0,t.control.value&&t.control.value.from&&t.control.value.to?0:-1)}}function ft(n,i){if(1&n){const t=e.KQA();e.I0R(0,"tui-calendar-range",20),e.qCj("valueChange",function(_){const c=e.usT(t).$implicit,R=e.GaO().$implicit,G=e.GaO();return e.CGJ(G.selectRangeAndUnsub(_,c,R))}),e.C$Y()}if(2&n){const t=e.GaO(2);e.E7m("min",t.calendarMin)("max",t.calendarMax)("value",t.control.value)}}function Mt(n,i){1&n&&(e.I0R(0,"mat-icon"),e.OEk(1,"check"),e.C$Y())}function It(n,i){if(1&n){const t=e.KQA();e.I0R(0,"button",16),e.qCj("click",function(){const s=e.usT(t).$implicit,c=e.GaO().$implicit,R=e.GaO();return e.CGJ(R.selectRangeAndUnsub(s.range,c))}),e.OEk(1),e.yuY(2,Mt,2,0,"mat-icon"),e.C$Y()}if(2&n){const t=i.$implicit,o=e.GaO(2);e.yG2(),e.oRS(" ",t.toString()," "),e.yG2(),e.C0Y(2,o.control.value==t.range?2:-1)}}function At(n,i){if(1&n&&(e.I0R(0,"p",21)(1,"span",6),e.OEk(2),e.wVc(3,"stringifyTuiDayRange"),e.C$Y()()),2&n){const t=e.GaO(2),o=e.Gew(1);e.yG2(),e.E7m("tuiHint",o),e.yG2(),e.cNF(e.kDX(3,2,t.control.value))}}function yt(n,i){1&n&&(e.I0R(0,"p",22),e.SAx(1),e.aS0(2,23),e.k70(),e.C$Y())}function ht(n,i){if(1&n){const t=e.KQA();e.yuY(0,ft,1,3,"ng-template",null,12,e.gJz),e.I0R(2,"div",13)(3,"tui-calendar",14),e.qCj("dayClick",function(_){const c=e.usT(t).$implicit,R=e.GaO();return e.CGJ(R.selectDayAndUnsub(_,c))}),e.C$Y(),e.I0R(4,"tui-data-list",15),e.c53(5,It,3,2,"button",24,e.oxv),e.I0R(7,"button",16),e.qCj("click",function(){e.usT(t);const _=e.Gew(1),s=e.GaO();return e.CGJ(s.fireModal(_))}),e.SAx(8),e.aS0(9,17),e.k70(),e.C$Y()()(),e.wR5(10,"hr",18),e.yuY(11,At,4,4,"p",19)(12,yt,3,0)}if(2&n){const t=e.GaO();e.yG2(3),e.E7m("value",(null!=t.control.value&&t.control.value.isSingleDay?null==t.control.value?null:t.control.value.from:t.control.value)||null)("min",t.calendarMin)("max",t.calendarMax),e.yG2(2),e.oho(t.periodOptions),e.yG2(6),e.C0Y(11,t.control.value&&t.control.valid?11:12)}}function vt(n,i){if(1&n&&(e.I0R(0,"span",6),e.OEk(1),e.wVc(2,"stringifyTuiDayRange"),e.C$Y()),2&n){const t=e.GaO(),o=e.Gew(1);e.E7m("tuiHint",o),e.yG2(),e.cNF(e.kDX(2,2,t.control.value))}}function Pt(n,i){1&n&&e._Xx(0)}const $t=["*"];let Gt=(()=>{class n{constructor(){this.cd=(0,e.uUt)(e.kD9),this.dialogs=(0,e.uUt)(d._k),this.destroy$=(0,e.uUt)(E.UF),this.date=(0,e.uUt)(p.y),this.today=T.EK.currentLocal(),this.calendarMin=new T.EK(2019,1,1),this.calendarMax=this.today.append({year:1}),this.control=new r.Ku(new T.Se(this.today,this.today)),this.periodOptions=[new ce.Ib(new T.Se(this.today,this.today),"Today"),new ce.Ib(new T.Se(this.today.append({day:-7}),this.today),"Last week"),...Array.from({length:3},(t,o)=>o).map(t=>{const o=this.today.append({month:-1*t}),_=new T.EK(o.year,o.month,1),s=this.date.transform(_.toUtcNativeDate(),"MMMM")||`Mese ${_.month}`;return new ce.Ib(new T.Se(_,_.append({month:1}).append({day:-1})),s)})]}ngOnInit(){}registerOnChange(t){this.control.valueChanges.pipe((0,$.a)(this.destroy$)).subscribe(t)}registerOnTouched(t){this.control.valueChanges.pipe((0,$.a)(this.destroy$)).subscribe(t)}setDisabledState(t){t?this.control.disable():this.control.enable()}writeValue(t){this.control.patchValue(this.formatToTuiDayRange(t))}fireModal(t){this.dialogs.open(t).subscribe()}selectRangeAndUnsub(t,...o){this.selectRange(t),o.forEach(_=>_.unsubscribe())}selectDayAndUnsub(t,o){this.selectDay(t),o.unsubscribe()}selectDay(t){this.selectRange(t?new T.Se(t,t):null)}selectRange(t){this.control.setValue(t),this.cd.markForCheck()}prevDay(){if(!(this.control.value instanceof T.Se))return void console.warn("control value invalid",this.control.value);const t=this.control.value.from.append({day:-1}),o=this.control.value.to.append({day:-1});this.control.setValue(new T.Se(t,o))}nextDay(){if(!(this.control.value instanceof T.Se))return void console.warn("control value invalid",this.control.value);const t=this.control.value.from.append({day:1}),o=this.control.value.to.append({day:1});this.control.setValue(new T.Se(t,o))}formatToTuiDayRange(t){if(null==t)return null;if(t instanceof T.Se)return t;if(t instanceof Date)return new T.Se(T.EK.fromLocalNativeDate(t),T.EK.fromLocalNativeDate(t));if("string"==typeof t)return new T.Se(T.EK.fromLocalNativeDate(new Date(t)),T.EK.fromLocalNativeDate(new Date(t)));if(Array.isArray(t)&&2==t.length){if(t[0]instanceof Date&&t[1]instanceof Date)return new T.Se(T.EK.fromLocalNativeDate(t[0]),T.EK.fromLocalNativeDate(t[1]));if(t[0]instanceof T.EK&&t[1]instanceof T.EK)return new T.Se(t[0],t[1]);if("string"==typeof t[0]&&"string"==typeof t[1])return new T.Se(T.EK.fromLocalNativeDate(new Date(t[0])),T.EK.fromLocalNativeDate(new Date(t[1])))}return console.warn("Invalid value for reservation date select:",t),null}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-reservation-date-select"]],standalone:!0,features:[e.M5G([{provide:r.Y6,useExisting:(0,e.wd)(()=>n),multi:!0},E.UF]),e.UHJ],ngContentSelectors:$t,decls:18,vars:1,consts:()=>{let t,o,_,s;return t="From the day",o="until the day",_="Another range",s="No date selected.",[["rangeHint",""],["editDateModal",""],[1,"flex","border","rounded","border-slate-200","items-center","justify-between"],[1,"h-full","border-r","border-slate-200"],["type","button",1,"h-full","flex","items-center","justify-center","p-2",3,"click"],["type","button",1,"flex","items-center","justify-center","grow",3,"click"],[3,"tuiHint"],[1,"ms-1"],[1,"h-full","border-l","border-slate-200"],[1,"me-1"],t,o,["rangeCalendarModal",""],[1,"flex"],[3,"value","min","max","dayClick"],[1,"grow"],["type","button","tuiOption","",3,"click"],_,[1,"block","w-[1px]","my-3"],["class","text-slate-400 block mb-3"],[3,"min","max","value","valueChange"],[1,"text-slate-400","block","mb-3"],[1,"block","text-red-200"],s,["type","button","tuiOption",""]]},template:function(o,_){if(1&o){const s=e.KQA();e.kPM(),e.yuY(0,gt,1,1,"ng-template",null,0,e.gJz)(2,ht,13,4,"ng-template",null,1,e.gJz),e.I0R(4,"div",2)(5,"div",3)(6,"button",4),e.qCj("click",function(){return _.prevDay()}),e.I0R(7,"mat-icon"),e.OEk(8,"arrow_back"),e.C$Y()()(),e.I0R(9,"button",5),e.qCj("click",function(){e.usT(s);const R=e.Gew(3);return e.CGJ(_.fireModal(R))}),e.yuY(10,vt,3,4,"span",6)(11,Pt,1,0),e.I0R(12,"mat-icon",7),e.OEk(13,"event"),e.C$Y()(),e.I0R(14,"div",8)(15,"button",4),e.qCj("click",function(){return _.nextDay()}),e.I0R(16,"mat-icon"),e.OEk(17,"arrow_forward"),e.C$Y()()()()}2&o&&(e.yG2(10),e.C0Y(10,_.control.valid&&_.control.value?10:11))},dependencies:[P.qL,r.sl,p.y,dt.E,de.N,de.W,Ot,O.WY,O.lh,O.SL,O.i6,O.IT,l.A$,l.yi,l.sP,Oe.y,Oe.I],styles:["[_nghost-%COMP%]{display:block;min-width:250px}"],changeDetection:0})}return n})();var xt=a(7516),Ne=a(4e3),ge=a(6684),Lt=a(2300),fe=a(9772),Me=a(9368);const Dt=["*"];let Yt=(()=>{class n{constructor(){this.removeClick=new e._w7}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-chip"]],outputs:{removeClick:"removeClick"},standalone:!0,features:[e.UHJ],ngContentSelectors:Dt,decls:6,vars:0,consts:[[1,"rounded","border","py-2","px-3","border-slate-200","flex","items-center"],["size","s","tuiIconButton","","type","button","appearance","custom",1,"!flex","ms-1",3,"click"]],template:function(o,_){1&o&&(e.kPM(),e.I0R(0,"div",0)(1,"span"),e._Xx(2),e.C$Y(),e.I0R(3,"button",1),e.qCj("click",function(){return _.removeClick.emit()}),e.I0R(4,"mat-icon"),e.OEk(5,"close"),e.C$Y()()())},dependencies:[P.oB,P.qL],styles:["[_nghost-%COMP%]{display:inline-block}"]})}return n})();var Vt=a(5324);const bt=["todo","authorized","paid","refunded"],kt=["html_nexi_payment","html_nexi_authorization"];let Ie=(()=>{class n{transform(t){switch(t){case"todo":return"text-danger";case"authorized":return"text-success";case"paid":return"text-success-dark";case"refunded":return"text-warning";default:return null}}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275pipe=e.UTH({name:"paymentStatusColor",type:n,pure:!0,standalone:!0})}return n})();function wt(n,i){1&n&&(e.SAx(0),e.aS0(1,0),e.k70())}function zt(n,i){1&n&&(e.SAx(0),e.aS0(1,1),e.k70())}function Ft(n,i){1&n&&(e.SAx(0),e.aS0(1,2),e.k70())}function Ht(n,i){1&n&&(e.SAx(0),e.aS0(1,3),e.k70())}function Xt(n,i){if(1&n&&e.OEk(0),2&n){const t=e.GaO();e.oRS(" ",t.status," ")}}let Ee=(()=>{class n{constructor(){this.status=null}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-payment-status"]],inputs:{status:"status"},standalone:!0,features:[e.UHJ],decls:7,vars:6,consts:()=>{let t,o,_,s;return t="Paid",o="Authorized",_="Unpaid",s="Refunded",[t,o,_,s]},template:function(o,_){if(1&o&&(e.I0R(0,"span"),e.wVc(1,"paymentStatusColor"),e.yuY(2,wt,2,0)(3,zt,2,0)(4,Ft,2,0)(5,Ht,2,0)(6,Xt,1,1),e.C$Y()),2&o){let s;e.m8U(e.kDX(1,4,_.status)),e.yG2(2),e.C0Y(2,"paid"===(s=_.status)?2:"authorized"===s?3:"todo"===s?4:"refunded"===s?5:6)}},dependencies:[Ie],encapsulation:2,changeDetection:0})}return n})();function Ut(n,i){if(1&n&&e.wR5(0,"tui-data-list-wrapper",3),2&n){const t=e.GaO(),o=e.Gew(4);e.E7m("itemContent",o)("items",t.ReservationPaymentStatusOptions)}}function Jt(n,i){1&n&&e.wR5(0,"app-payment-status",4),2&n&&e.E7m("status",i.$implicit)}const Kt=["*"];let Bt=(()=>{class n{constructor(){this.control=new r.Ku(null),this.ReservationPaymentStatusOptions=[...bt]}writeValue(t){this.control.setValue(t)}registerOnChange(t){this.control.valueChanges.subscribe(t)}registerOnTouched(t){this.control.valueChanges.subscribe(t)}setDisabledState(t){t?this.control.disable():this.control.enable()}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-select-payment-status"]],standalone:!0,features:[e.M5G([{provide:r.Y6,useExisting:n,multi:!0}]),e.UHJ],ngContentSelectors:Kt,decls:5,vars:2,consts:[[3,"formControl","valueContent"],[3,"itemContent","items",4,"tuiDataList"],["cardContent",""],[3,"itemContent","items"],[3,"status"]],template:function(o,_){if(1&o&&(e.kPM(),e.I0R(0,"tui-select",0),e._Xx(1),e.yuY(2,Ut,1,2,"tui-data-list-wrapper",1),e.C$Y(),e.yuY(3,Jt,1,1,"ng-template",null,2,e.gJz)),2&o){const s=e.Gew(4);e.E7m("formControl",_.control)("valueContent",s)}},dependencies:[r.sl,r.ue,r.ug,Y.my,Y.cP,Y.uO,C.CQ,l.A$,l.Ux,D.q8,D.OO,x.aS,Ee],encapsulation:2,changeDetection:0})}return n})();function Qt(n,i){1&n&&(e.SAx(0),e.aS0(1,0),e.k70())}function Wt(n,i){1&n&&(e.SAx(0),e.aS0(1,1),e.k70())}function jt(n,i){if(1&n&&e.OEk(0),2&n){const t=e.GaO();e.oRS(" ",t.value," ")}}let ue=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-reservation-payment-preorder-type"]],inputs:{value:"value"},standalone:!0,features:[e.UHJ],decls:3,vars:1,consts:()=>{let t,o;return t="Authorization",o="Payment",[t,o]},template:function(o,_){if(1&o&&e.yuY(0,Qt,2,0)(1,Wt,2,0)(2,jt,1,1),2&o){let s;e.C0Y(0,"html_nexi_authorization"===(s=_.value)?0:"html_nexi_payment"===s?1:2)}},encapsulation:2})}return n})();function Zt(n,i){if(1&n&&e.wR5(0,"tui-data-list-wrapper",3),2&n){const t=e.GaO(),o=e.Gew(4);e.E7m("itemContent",o)("items",t.ReservationPaymentPreorderTypeOptions)}}function qt(n,i){1&n&&e.wR5(0,"app-reservation-payment-preorder-type",4),2&n&&e.E7m("value",i.$implicit)}const en=["*"];let tn=(()=>{class n{constructor(){this.ReservationPaymentPreorderTypeOptions=[...kt],this.control=new r.Ku(null)}writeValue(t){this.control.setValue(t)}registerOnChange(t){this.control.valueChanges.subscribe(t)}registerOnTouched(t){this.control.valueChanges.subscribe(t)}setDisabledState(t){t?this.control.disable():this.control.enable()}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-select-reservation-payment-preorder-type"]],standalone:!0,features:[e.M5G([{provide:r.Y6,useExisting:n,multi:!0}]),e.UHJ],ngContentSelectors:en,decls:5,vars:2,consts:[[3,"formControl","valueContent"],[3,"itemContent","items",4,"tuiDataList"],["cardContent",""],[3,"itemContent","items"],[3,"value"]],template:function(o,_){if(1&o&&(e.kPM(),e.I0R(0,"tui-select",0),e._Xx(1),e.yuY(2,Zt,1,2,"tui-data-list-wrapper",1),e.C$Y(),e.yuY(3,qt,1,1,"ng-template",null,2,e.gJz)),2&o){const s=e.Gew(4);e.E7m("formControl",_.control)("valueContent",s)}},dependencies:[r.sl,r.ue,r.ug,Y.my,Y.cP,Y.uO,C.CQ,l.A$,l.Ux,D.q8,D.OO,x.aS,ue],encapsulation:2,changeDetection:0})}return n})();function nn(n,i){if(1&n){const t=e.KQA();e.I0R(0,"form",21),e.qCj("ngSubmit",function(){e.usT(t);const _=e.GaO();return e.CGJ(_.closeFiltersModal())}),e.I0R(1,"div",22)(2,"div",19)(3,"tui-input",23),e.SAx(4),e.aS0(5,24),e.k70(),e.wR5(6,"input",25),e.C$Y()()(),e.I0R(7,"div",22)(8,"app-table-type-select",26),e.SAx(9),e.aS0(10,27),e.k70(),e.C$Y()(),e.I0R(11,"div",22)(12,"app-select-payment-status",26),e.SAx(13),e.aS0(14,28),e.k70(),e.C$Y()(),e.I0R(15,"div",22)(16,"app-select-reservation-payment-preorder-type",26),e.SAx(17),e.aS0(18,29),e.k70(),e.C$Y()(),e.I0R(19,"div",22)(20,"app-reservation-status-select",30),e.SAx(21),e.aS0(22,31),e.k70(),e.C$Y()(),e.I0R(23,"div",22)(24,"div",19)(25,"tui-input",32),e.SAx(26),e.aS0(27,33),e.k70(),e.wR5(28,"input",25),e.C$Y()()(),e.I0R(29,"button",34),e.SAx(30),e.aS0(31,35),e.k70(),e.C$Y()()}if(2&n){const t=e.GaO();e.E7m("formGroup",t.hiddenFormGroup),e.yG2(3),e.E7m("tuiTextfieldSize","l")("tuiAutoFocus",!0)("formControl",t.query),e.yG2(5),e.E7m("formControlName","table_type"),e.yG2(4),e.E7m("formControlName","payment_status"),e.yG2(4),e.E7m("formControlName","preorder_type"),e.yG2(4),e.E7m("showCleaner",!0)("inputSize","l")("formControl",t.status),e.yG2(5),e.E7m("tuiTextfieldSize","l")("formControlName","payment_external_id")}}function on(n,i){1&n&&e.OEk(0),2&n&&e.oRS(" ",i.$implicit.humanLabel," ")}function _n(n,i){if(1&n&&(e.I0R(0,"tui-data-list-wrapper",36),e.OEk(1," >"),e.C$Y()),2&n){const t=e.GaO(),o=e.Gew(13);e.E7m("itemContent",o)("items",t.orderByOptions)}}function an(n,i){if(1&n){const t=e.KQA();e.I0R(0,"app-chip",37),e.qCj("removeClick",function(){e.usT(t);const _=e.GaO();return e.CGJ(_.status.patchValue(null))}),e.SAx(1),e.aS0(2,38),e.k70(),e.OEk(3,": "),e.wR5(4,"app-reservation-status",39),e.C$Y()}if(2&n){const t=e.GaO();e.yG2(4),e.E7m("status",t.status.value)}}function sn(n,i){if(1&n){const t=e.KQA();e.I0R(0,"app-chip",37),e.qCj("removeClick",function(){e.usT(t);const _=e.GaO();return e.CGJ(_.query.patchValue(null))}),e.SAx(1),e.aS0(2,40),e.k70(),e.OEk(3),e.C$Y()}if(2&n){const t=e.GaO();e.yG2(3),e.oRS(": ",t.query.value," ")}}function rn(n,i){if(1&n){const t=e.KQA();e.I0R(0,"app-chip",37),e.qCj("removeClick",function(){e.usT(t);const _=e.GaO();return e.CGJ(_.hiddenFormGroup.controls.table_type.patchValue(null))}),e.SAx(1),e.aS0(2,41),e.k70(),e.OEk(3),e.C$Y()}if(2&n){const t=e.GaO();e.yG2(3),e.oRS(": ",t.hiddenFormGroup.controls.table_type.value.name," ")}}function ln(n,i){if(1&n){const t=e.KQA();e.I0R(0,"app-chip",37),e.qCj("removeClick",function(){e.usT(t);const _=e.GaO();return e.CGJ(_.hiddenFormGroup.controls.payment_status.patchValue(null))}),e.SAx(1),e.aS0(2,42),e.k70(),e.OEk(3,": "),e.wR5(4,"app-payment-status",39),e.C$Y()}if(2&n){const t=e.GaO();e.yG2(4),e.E7m("status",t.hiddenFormGroup.controls.payment_status.value)}}function cn(n,i){if(1&n){const t=e.KQA();e.I0R(0,"app-chip",37),e.qCj("removeClick",function(){e.usT(t);const _=e.GaO();return e.CGJ(_.hiddenFormGroup.controls.preorder_type.patchValue(null))}),e.SAx(1),e.aS0(2,43),e.k70(),e.OEk(3,": "),e.wR5(4,"app-reservation-payment-preorder-type",44),e.C$Y()}if(2&n){const t=e.GaO();e.yG2(4),e.E7m("value",t.hiddenFormGroup.controls.preorder_type.value)}}function En(n,i){if(1&n){const t=e.KQA();e.I0R(0,"app-chip",37),e.qCj("removeClick",function(){e.usT(t);const _=e.GaO();return e.CGJ(_.hiddenFormGroup.controls.payment_external_id.patchValue(null))}),e.SAx(1),e.aS0(2,45),e.k70(),e.OEk(3),e.C$Y()}if(2&n){const t=e.GaO();e.yG2(3),e.oRS(": ",t.hiddenFormGroup.controls.payment_external_id.value," ")}}const un=n=>({date:n}),pn=()=>[10,100,1e3],mn=["*"];let Tn=(()=>{class n{constructor(){this.dialogs=(0,e.uUt)(d._k),this.loading=!1,this.data=null,this.filtersChanged=new e._w7,this.destroy$=(0,e.uUt)(E.UF),this.datePipe=(0,e.uUt)(p.y),this.query=new r.Ku(null),this.turn=new r.Ku(null),this.date=new r.Ku(new T.Se(T.EK.currentLocal(),T.EK.currentLocal())),this.status=new r.Ku("active"),this.orderBy=new r.Ku(null),this.hiddenFormGroup=new r.WC({query:this.query,status:this.status,payment_status:new r.Ku(null),preorder_type:new r.Ku(null),payment_external_id:new r.Ku(null),table_type:new r.Ku(null)}),this.dateStr=(0,e.OCB)(this.formatDate(this.date.value)),this.offset=0,this.per_page=100,this.orderByOptions=[{field:"created_at",direction:"desc",humanLabel:"Creation date (most recent)"},{field:"created_at",direction:"asc",humanLabel:"Creation date (less recent)"},{field:"datetime",direction:"desc",humanLabel:"Date and time (most recent)"},{field:"datetime",direction:"asc",humanLabel:"Date and time (less recent)"}],this.lastFilters={}}ngOnInit(){this.date.valueChanges.pipe((0,$.a)(this.destroy$)).subscribe({next:t=>{this.turn.setValue(null),t&&t.isSingleDay?this.turn.disabled&&this.turn.enable():this.turn.disable(),this.dateStr.set(this.formatDate(t))},error:t=>console.error(t)}),[this.date,this.turn,this.status,this.orderBy,this.hiddenFormGroup.controls.table_type,this.hiddenFormGroup.controls.payment_status,this.hiddenFormGroup.controls.preorder_type].map(t=>{t.valueChanges.pipe((0,$.a)(this.destroy$),(0,Ne.a)(),(0,ge.I)(()=>t.valid)).subscribe({next:()=>{this.offset=0,this.filtersMayHaveChanged()}})}),[this.query,this.hiddenFormGroup.controls.payment_external_id].map(t=>{t.valueChanges.pipe((0,$.a)(this.destroy$),(0,Ne.a)(),(0,Lt.o)(500),(0,ge.I)(()=>t.valid)).subscribe({next:()=>{this.offset=0,this.filtersMayHaveChanged()}})})}ngAfterViewInit(){this.emitCurrentFilters()}submit(){this.emitCurrentFilters()}mergeFilters(t){}setFilters(t){}currentFilters(){const t={offset:this.offset,per_page:this.per_page};if(this.hiddenFormGroup.controls.table_type.value&&this.hiddenFormGroup.controls.table_type.value.id&&(t.table_types=this.hiddenFormGroup.controls.table_type.value.id.toString()),this.hiddenFormGroup.controls.payment_status.value&&this.hiddenFormGroup.controls.payment_status.value&&(t.payment_status=this.hiddenFormGroup.controls.payment_status.value),this.hiddenFormGroup.controls.preorder_type.value&&this.hiddenFormGroup.controls.preorder_type.value&&(t.preorder_type=this.hiddenFormGroup.controls.preorder_type.value),this.hiddenFormGroup.controls.payment_external_id.value&&this.hiddenFormGroup.controls.payment_external_id.value&&(t.payment_external_id=this.hiddenFormGroup.controls.payment_external_id.value),"string"==typeof this.query.value&&this.query.valid&&this.query.value.length>0&&(t.query=this.query.value),this.date.value instanceof T.Se&&this.date.valid){const _=this.datePipe.transform(this.date.value.from.toUtcNativeDate(),"YYYY-MM-dd"),s=this.datePipe.transform(this.date.value.to.toUtcNativeDate(),"YYYY-MM-dd");_&&s&&(t.date_from=`${_}`,t.date_to=`${s}`)}const o=this.turn.value;return this.turn.valid&&o instanceof xt.e&&o.starts_at&&o.ends_at&&(t.time_from=`${(0,fe.ye)(o.starts_at)}`,t.time_to=`${(0,fe.ye)(o.ends_at)}`),"string"==typeof this.status.value&&this.status.valid&&(t.status=this.status.value),this.orderBy.valid&&this.orderBy.value&&(t.order_by_field=this.orderBy.value.field,t.order_by_direction=this.orderBy.value.direction),t}paginationChange(t){this.offset=t.page,this.per_page=t.size,this.filtersMayHaveChanged()}fireModal(t){this.filtersSub?.unsubscribe(),this.filtersSub=this.dialogs.open(t).subscribe()}closeFiltersModal(){this.filtersSub?.unsubscribe()}filtersMayHaveChanged(){const t=this.currentFilters(),o=JSON.stringify(t)!==JSON.stringify(this.lastFilters);return console.log("changed",{changed:o,currentFilters:t}),o&&(this.lastFilters=t,this.emitCurrentFilters()),o}formatDate(t){return t instanceof Date?this.datePipe.transform(t,"YYYY-MM-dd"):t instanceof T.Se?t.isSingleDay?this.datePipe.transform(t.from.toUtcNativeDate(),"YYYY-MM-dd"):`${this.datePipe.transform(t.from.toUtcNativeDate(),"YYYY-MM-dd")} - ${this.datePipe.transform(t.to.toUtcNativeDate(),"YYYY-MM-dd")}`:null}emitCurrentFilters(){this.filtersChanged.emit(this.currentFilters())}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-list-reservations-filters"]],inputs:{loading:"loading",data:"data"},outputs:{filtersChanged:"filtersChanged"},standalone:!0,features:[e.M5G([E.UF]),e.UHJ],ngContentSelectors:mn,decls:38,vars:22,consts:()=>{let t,o,_,s,c,R,G,z,F,H,X,U,J,K,B,Q,W;return t="Data",o="Shift",_="Sort by",s="Export reservations",c="Filter bookings",R="Associated table type",G="Payment status",z="Payment method",F="State",H="External payment ID (N. nexi order)",X="Close",U="State",J="Search for",K="Table type",B="Payment status",Q="Payment type",W="N. Order nexi",[["additionalFiltersTemplate",""],[1,"flex","flex-wrap","items-center"],[1,"col-12","md:col-4"],[3,"formControl"],t,[1,"col-12","md:col-3","px-1"],[1,"mx-2",2,"min-width","150px",3,"showCleaner","filters","inputSize","formControl"],o,[1,"col-10","md:col-3"],["stringifyOrderBy",""],[3,"valueContent","tuiTextfieldCleaner","tuiTextfieldSize","formControl"],_,[3,"itemContent","items",4,"tuiDataList"],[1,"col-2","md:col-1","overflow-hidden"],["type","button","tuiIconButton","","appearance","flat",3,"showLoader","click"],[1,"col-12"],[1,"my-2",3,"size","items","total","paginationChange"],[1,"flex","items-center","mb-2"],["routerLink","export","tuiLink",""],[1,"flex","items-center"],s,[3,"formGroup","ngSubmit"],[1,"block","mb-3"],[1,"grow","me-2",3,"tuiTextfieldSize","tuiAutoFocus","formControl"],c,["tuiTextfield",""],[3,"formControlName"],R,G,z,[3,"showCleaner","inputSize","formControl"],F,[1,"grow","me-2",3,"tuiTextfieldSize","formControlName"],H,["tuiButton","","appearance","primary","type","submit"],X,[3,"itemContent","items"],[3,"removeClick"],U,[3,"status"],J,K,B,Q,[3,"value"],W]},template:function(o,_){if(1&o){const s=e.KQA();e.kPM(),e.yuY(0,nn,32,12,"ng-template",null,0,e.gJz),e.I0R(2,"div",1)(3,"div",2)(4,"app-reservation-date-select",3),e.SAx(5),e.aS0(6,4),e.k70(),e.C$Y()(),e.I0R(7,"div",5)(8,"app-reservation-turn-select",6),e.SAx(9),e.aS0(10,7),e.k70(),e.C$Y()(),e.I0R(11,"div",8),e.yuY(12,on,1,1,"ng-template",null,9,e.gJz),e.I0R(14,"tui-select",10),e.SAx(15),e.aS0(16,11),e.k70(),e.yuY(17,_n,2,2,"tui-data-list-wrapper",12),e.C$Y()(),e.I0R(18,"div",13)(19,"button",14),e.qCj("click",function(){e.usT(s);const R=e.Gew(1);return e.CGJ(_.fireModal(R))}),e.I0R(20,"mat-icon"),e.OEk(21,"filter_alt"),e.C$Y()()(),e.I0R(22,"div",15),e.yuY(23,an,5,1,"app-chip")(24,sn,4,1,"app-chip")(25,rn,4,1,"app-chip")(26,ln,5,1,"app-chip")(27,cn,5,1,"app-chip")(28,En,4,1,"app-chip"),e.C$Y()(),e._Xx(29),e.I0R(30,"tui-table-pagination",16),e.qCj("paginationChange",function(R){return _.paginationChange(R)}),e.C$Y(),e.I0R(31,"div",17)(32,"a",18)(33,"span",19)(34,"mat-icon"),e.OEk(35,"download_file"),e.C$Y(),e.SAx(36),e.aS0(37,20),e.k70(),e.C$Y()()()}if(2&o){const s=e.Gew(13);let c;e.yG2(4),e.E7m("formControl",_.date),e.yG2(4),e.E7m("showCleaner",!0)("filters",e.S45(19,un,_.dateStr()))("inputSize","m")("formControl",_.turn),e.yG2(6),e.E7m("valueContent",s)("tuiTextfieldCleaner",!0)("tuiTextfieldSize","m")("formControl",_.orderBy),e.yG2(5),e.E7m("showLoader",_.loading),e.yG2(4),e.C0Y(23,_.status.value?23:-1),e.yG2(),e.C0Y(24,_.query.value?24:-1),e.yG2(),e.C0Y(25,_.hiddenFormGroup.controls.table_type.value?25:-1),e.yG2(),e.C0Y(26,_.hiddenFormGroup.controls.payment_status.value?26:-1),e.yG2(),e.C0Y(27,_.hiddenFormGroup.controls.preorder_type.value?27:-1),e.yG2(),e.C0Y(28,_.hiddenFormGroup.controls.payment_external_id.value?28:-1),e.yG2(2),e.E7m("size",100)("items",e.q4q(21,pn))("total",null!==(c=null==_.data||null==_.data.metadata?null:_.data.metadata.total_count)&&void 0!==c?c:0)}},dependencies:[S.CI,S.Kw,P.qL,C.CQ,C.Oo,C.cP,se.b,u.m6,u.gJ,f.w,f.C,j.ER,Rt.Y,Re,Gt,ee.yy,ee.Ws,r.sl,r.sz,r.ue,r.u,r.ug,r.uW,r.Wo,oe.GE,x.aS,x.es,x.rD,Me.a,Yt,D.q8,D.OO,l.Ux,Y.my,Y.cP,Y.uO,l.A$,Ct.BZ,Vt.Y,Bt,Ee,ue,tn],encapsulation:2,changeDetection:0})}return n})(),Sn=(()=>{class n{constructor(){this.human={email_open:"Open email"}}transform(t){return null==t?null:this.human[t]??null}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275pipe=e.UTH({name:"humanizeEventType",type:n,pure:!0,standalone:!0})}return n})();function Cn(n,i){1&n&&(e.SAx(0),e.aS0(1,3),e.k70())}const Rn=(n,i)=>({"text-blue-500":n,"text-slate-500":i}),dn=n=>({rotate180:n});function On(n,i){if(1&n&&(e.I0R(0,"tui-hosted-dropdown",1,4)(2,"button",5)(3,"span",6)(4,"span",7),e.OEk(5),e.C$Y(),e.I0R(6,"mat-icon",8),e.OEk(7,"mail"),e.C$Y(),e.I0R(8,"mat-icon",9),e.OEk(9,"expand_more"),e.C$Y()()()()),2&n){const t=e.Gew(1),o=e.GaO(),_=e.Gew(4);e.E7m("content",_),e.yG2(5),e.cNF(o.emails().length),e.yG2(),e.E7m("ngClass",e.IBC(4,Rn,o.emailOpenAtLeastOnce(),!o.emailOpenAtLeastOnce())),e.yG2(2),e.E7m("ngClass",e.S45(7,dn,t.open))}}const pe=(n,i)=>i.id;function Nn(n,i){if(1&n&&(e.I0R(0,"span",19),e.OEk(1),e.wVc(2,"json"),e.C$Y()),2&n){const t=e.GaO().$implicit;e.yG2(),e.cNF(e.kDX(2,1,t.event_data))}}function gn(n,i){if(1&n&&(e.I0R(0,"li")(1,"span",6)(2,"span",7),e.OEk(3),e.wVc(4,"humanizeEventType"),e.C$Y(),e.I0R(5,"span",7),e.OEk(6),e.wVc(7,"date"),e.C$Y(),e.yuY(8,Nn,3,3,"span",18),e.C$Y()()),2&n){const t=i.$implicit,o=e.GaO().$implicit;e.yG2(3),e.cNF(e.kDX(4,3,o.event_type)),e.yG2(3),e.cNF(e.g7$(7,5,t.event_time,"EEEE d MMMM y, H:m")),e.yG2(2),e.C0Y(8,t.event_data?8:-1)}}function fn(n,i){1&n&&e.c53(0,gn,9,8,"li",null,pe),2&n&&e.oho(i.$implicit.events)}function Mn(n,i){if(1&n&&(e.I0R(0,"div",14)(1,"div",15)(2,"span",16),e.OEk(3),e.C$Y(),e.I0R(4,"b",7),e.aS0(5,17),e.C$Y(),e.I0R(6,"span"),e.OEk(7),e.wVc(8,"date"),e.C$Y()()(),e.I0R(9,"ul"),e.c53(10,fn,2,0,null,null,pe),e.C$Y()),2&n){const t=i.$implicit;e.yG2(3),e.oRS("#",t.id,""),e.yG2(4),e.cNF(e.g7$(8,2,t.created_at,"EEEE d MMMM y, H:m")),e.yG2(3),e.oho(t.image_pixels)}}function In(n,i){1&n&&(e.SAx(0),e.aS0(1,20),e.k70())}function An(n,i){1&n&&(e.SAx(0),e.aS0(1,21),e.k70())}function yn(n,i){if(1&n){const t=e.KQA();e.I0R(0,"div",11),e.c53(1,Mn,12,5,null,null,pe),e.I0R(3,"button",12),e.qCj("click",function(){e.usT(t);const _=e.GaO(2);return e.CGJ(_.resendEmail())}),e.I0R(4,"span",6)(5,"span",13),e.yuY(6,In,2,0,"ng-container")(7,An,2,0),e.C$Y(),e.I0R(8,"mat-icon"),e.OEk(9,"send"),e.C$Y()()()()}if(2&n){const t=e.GaO(2);e.yG2(),e.oho(t.emails()),e.yG2(2),e.E7m("showLoader",t.loading())("appearance","outline")("disabled",!(t.reservation.email&&t.reservation.email.length>0)),e.yG2(3),e.C0Y(6,t.emails().length>0?6:7)}}function hn(n,i){if(1&n&&e.yuY(0,yn,10,4,"div",10),2&n){const t=e.GaO();e.C0Y(0,t.reservation?0:-1)}}let vn=(()=>{class n{constructor(){this.service=(0,e.uUt)(Z.S),this.notifications=(0,e.uUt)(te.E),this.destroy$=(0,e.uUt)(E.UF),this.emails=(0,e.OCB)([]),this.loading=(0,e.OCB)(!1),this.emailOpenAtLeastOnce=(0,e.S6b)(()=>{const t=this.emails();let o=!1;return t.forEach(_=>{_.image_pixels?.forEach(s=>{"email_open"===s.event_type&&s.events&&s.events.length>0&&(o=!0)})}),o})}resendEmail(){const t=this.reservation?.id;t&&(this.loading.set(!0),this.service.deliverConfirmationEmail(t).pipe((0,$.a)(this.destroy$),(0,V.U)(()=>this.loading.set(!1))).subscribe({next:o=>{this.notifications.fireSnackBar("Email sent"),this.setEmailsByReservation(o)},error:o=>{this.notifications.error((0,k.mk)(o)??"Something went wrong. Please try again later.")}}))}ngOnChanges(t){t.reservation&&this.setEmailsByReservation(t.reservation.currentValue)}setEmailsByReservation(t){this.emails.set(t?.delivered_emails??[])}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-reservation-events"]],inputs:{reservation:"reservation"},standalone:!0,features:[e.SYr,e.UHJ],decls:5,vars:1,consts:()=>{let t,o,_,s;return t="Send booking confirmation.",o="Email sent",_="Resend confirmation email.",s="Send confirmation email.",[["resendHint",""],[3,"content"],["allEvents",""],t,["dropdown",""],["tuiButton","","appearance","custom","size","s","type","button"],[1,"flex","items-center"],[1,"me-1"],[1,"text-slate-500",3,"ngClass"],[1,"text-slate-500","animation-speed-2",3,"ngClass"],["class","p-3"],[1,"p-3"],["type","button","tuiButton","","size","s",3,"showLoader","appearance","disabled","click"],[1,"me-2"],[1,"flex","flex-col"],[1,"flex"],[1,"text-slate-400","me-1"],o,["class","text-slate-400"],[1,"text-slate-400"],_,s]},template:function(o,_){1&o&&e.yuY(0,Cn,2,0,"ng-template",null,0,e.gJz)(2,On,10,9,"tui-hosted-dropdown",1)(3,hn,1,1,"ng-template",null,2,e.gJz),2&o&&(e.yG2(2),e.C0Y(2,_.reservation?2:-1))},dependencies:[S.CI,S.Kw,P.qL,O.WY,oe.GE,oe.Qw,p.y,p.ED,Sn,p.QF],encapsulation:2})}return n})();const Pn=["phoneTo",""];function $n(n,i){1&n&&(e.I0R(0,"mat-icon",3),e.OEk(1,"chat"),e.C$Y())}function Gn(n,i){1&n&&(e.I0R(0,"mat-icon",3),e.OEk(1,"call"),e.C$Y())}const xn=["*"];let Ln=(()=>{class n{constructor(){this.whatsapp=!1}ngOnChanges(){this.href=this.whatsapp?`https://wa.me/${this.phoneTo}`:`tel:${this.phoneTo}`}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["","phoneTo",""]],inputs:{phoneTo:"phoneTo",whatsapp:"whatsapp"},standalone:!0,features:[e.SYr,e.UHJ],attrs:Pn,ngContentSelectors:xn,decls:5,vars:2,consts:[["target","_blank","tuiLink","",3,"href"],[1,"flex","items-center"],["class","ms-1"],[1,"ms-1"]],template:function(o,_){1&o&&(e.kPM(),e.I0R(0,"a",0)(1,"span",1),e._Xx(2),e.yuY(3,$n,2,0,"mat-icon",2)(4,Gn,2,0),e.C$Y()()),2&o&&(e._6D("href",_.href,e.K6U),e.yG2(3),e.C0Y(3,_.whatsapp?3:4))},dependencies:[f.w,f.C,P.qL],changeDetection:0})}return n})();const Dn=["mailTo",""],Yn=["*"];let Vn=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["","mailTo",""]],inputs:{mailTo:"mailTo"},standalone:!0,features:[e.UHJ],attrs:Dn,ngContentSelectors:Yn,decls:3,vars:1,consts:[["target","_blank","tuiLink","",3,"href"],[1,"flex","items-center"]],template:function(o,_){1&o&&(e.kPM(),e.I0R(0,"a",0)(1,"span",1),e._Xx(2),e.C$Y()()),2&o&&e.CI5("href","mailto:",_.mailTo,"",e.K6U)},dependencies:[f.w,f.C],changeDetection:0})}return n})();function bn(n,i){if(1&n&&(e.I0R(0,"p"),e.OEk(1),e.SAx(2),e.aS0(3,2),e.k70(),e.C$Y(),e.I0R(4,"p"),e.OEk(5),e.SAx(6),e.aS0(7,3),e.k70(),e.C$Y()),2&n){const t=e.GaO();let o,_;e.yG2(),e.oRS(" ",null!==(o=t.adults)&&void 0!==o?o:0," "),e.yG2(4),e.oRS(" ",null!==(_=t.children)&&void 0!==_?_:0," ")}}function kn(n,i){if(1&n&&(e.I0R(0,"span"),e.OEk(1),e.C$Y(),e.I0R(2,"mat-icon"),e.OEk(3,"person2"),e.C$Y()),2&n){const t=e.GaO();e.yG2(),e.cNF(t.adults)}}function wn(n,i){if(1&n&&(e.I0R(0,"span"),e.OEk(1),e.C$Y(),e.I0R(2,"mat-icon"),e.OEk(3,"child_care"),e.C$Y()),2&n){const t=e.GaO();e.yG2(),e.cNF(t.children)}}function zn(n,i){1&n&&e.OEk(0," ??? ")}let Ae=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-reservation-people"]],inputs:{adults:"adults",children:"children"},standalone:!0,features:[e.UHJ],decls:6,vars:4,consts:()=>{let t,o;return t="Adults",o="Children",[["hint",""],[1,"flex","items-center",3,"tuiHint"],t,o]},template:function(o,_){if(1&o&&(e.yuY(0,bn,8,2,"ng-template",null,0,e.gJz),e.I0R(2,"div",1),e.yuY(3,kn,4,1)(4,wn,4,1)(5,zn,1,0),e.C$Y()),2&o){const s=e.Gew(1);e.yG2(2),e.E7m("tuiHint",s),e.yG2(),e.C0Y(3,_.adults&&_.adults>0?3:-1),e.yG2(),e.C0Y(4,_.children&&_.children>0?4:-1),e.yG2(),e.C0Y(5,_.adults&&_.adults>0||_.children&&_.children>0?-1:5)}},dependencies:[P.qL,O.WY,O.lh,O.SL,O.i6,O.IT],encapsulation:2})}return n})();var Fn=a(4476),Hn=a(8640),Xn=a(3040),me=a(9888),Un=a(9956);function Jn(n,i){if(1&n&&(e.I0R(0,"span",4),e.wR5(1,"app-payment-status",5),e.C$Y()),2&n){const t=e.GaO(2);e.yG2(),e.E7m("status",t.status())}}function Kn(n,i){if(1&n&&(e.I0R(0,"div",16),e.OEk(1),e.wVc(2,"currency"),e.C$Y()),2&n){const t=e.GaO(3);let o;e.yG2(),e.oRS(" ",e.kDX(2,1,null==(o=t.payment())?null:o.value)," ")}}function Bn(n,i){if(1&n&&(e.I0R(0,"p",17),e.SAx(1),e.aS0(2,18),e.k70(),e.I0R(3,"app-copy-content",19),e.OEk(4),e.C$Y()()),2&n){const t=e.GaO(3);let o,_;e.yG2(3),e.E7m("content",null==(o=t.payment())?null:o.external_id),e.yG2(),e.cNF(null==(_=t.payment())?null:_.external_id)}}function Qn(n,i){1&n&&e.C_f(0)}function Wn(n,i){1&n&&(e.SAx(0),e.aS0(1,20),e.k70())}function jn(n,i){if(1&n){const t=e.KQA();e.I0R(0,"p",21),e.aS0(1,22),e.C$Y(),e.I0R(2,"button",23),e.qCj("click",function(){e.usT(t);const _=e.GaO(3);return e.CGJ(_.cancelPayment())}),e.SAx(3),e.aS0(4,24),e.k70(),e.C$Y()}if(2&n){const t=e.GaO(3);e.yG2(2),e.E7m("showLoader",t.loading())}}function Zn(n,i){if(1&n){const t=e.KQA();e.I0R(0,"p",21),e.aS0(1,25),e.C$Y(),e.I0R(2,"button",26),e.qCj("click",function(){e.usT(t);const _=e.GaO(3);return e.CGJ(_.confirmPayment())}),e.SAx(3),e.aS0(4,27),e.k70(),e.C$Y(),e.I0R(5,"button",23),e.qCj("click",function(){e.usT(t);const _=e.GaO(3);return e.CGJ(_.cancelPayment())}),e.SAx(6),e.aS0(7,28),e.k70(),e.C$Y()}if(2&n){const t=e.GaO(3);e.yG2(2),e.E7m("showLoader",t.loading()),e.yG2(3),e.E7m("showLoader",t.loading())}}function qn(n,i){if(1&n&&(e.I0R(0,"p"),e.aS0(1,29),e.C$Y(),e.I0R(2,"div",30)(3,"a",31),e.OEk(4),e.C$Y(),e.wR5(5,"app-copy-content",19),e.C$Y()),2&n){const t=e.GaO(3);let o,_,s;e.yG2(3),e._6D("href",null==(o=t.payment())?null:o.hpp_url,e.K6U),e.yG2(),e.cNF(null==(_=t.payment())?null:_.hpp_url),e.yG2(),e.E7m("content",null==(s=t.payment())?null:s.hpp_url)}}function eo(n,i){1&n&&(e.I0R(0,"p"),e.aS0(1,32),e.C$Y())}function to(n,i){1&n&&e.OEk(0," error ")}function no(n,i){if(1&n){const t=e.KQA();e.I0R(0,"h2",6),e.aS0(1,7),e.C$Y(),e.yuY(2,Kn,3,3,"div",8)(3,Bn,5,2,"p",9),e.I0R(4,"div"),e.SAx(5),e.aS0(6,10),e.k70(),e.OEk(7," : "),e.wR5(8,"app-reservation-payment-preorder-type",11),e.C$Y(),e.I0R(9,"div",12)(10,"div",13),e.yuY(11,Qn,1,0,"ng-container",3),e.C$Y(),e.yuY(12,Wn,2,0,"ng-template",null,14,e.gJz),e.I0R(14,"button",15),e.qCj("click",function(){e.usT(t);const _=e.GaO(2);return e.CGJ(_.fetchPaymentStatus())}),e.I0R(15,"mat-icon"),e.OEk(16,"refresh"),e.C$Y()()(),e.yuY(17,jn,5,1)(18,Zn,8,2)(19,qn,6,3)(20,eo,2,0)(21,to,1,0)}if(2&n){const t=e.Gew(13);e.GaO();const o=e.Gew(1),_=e.GaO();let s,c,R,G;e.yG2(2),e.C0Y(2,null!=(s=_.payment())&&s.value?2:-1),e.yG2(),e.C0Y(3,null!=(c=_.payment())&&c.external_id?3:-1),e.yG2(5),e.E7m("value",null==(R=_.payment())?null:R.preorder_type),e.yG2(3),e.E7m("ngTemplateOutlet",o),e.yG2(3),e.E7m("tuiHint",t)("showLoader",_.loading()),e.yG2(3),e.C0Y(17,"paid"===(G=_.status())?17:"authorized"===G?18:"todo"===G?19:"refunded"===G?20:21)}}function oo(n,i){1&n&&e.C_f(0)}function _o(n,i){if(1&n){const t=e.KQA();e.yuY(0,Jn,2,1,"ng-template",null,0,e.gJz)(2,no,22,7,"ng-template",null,1,e.gJz),e.I0R(4,"button",2),e.qCj("click",function(){e.usT(t);const _=e.Gew(3),s=e.GaO();return e.CGJ(s.showDialog(_))}),e.yuY(5,oo,1,0,"ng-container",3),e.C$Y()}if(2&n){const t=e.Gew(1);e.yG2(5),e.E7m("ngTemplateOutlet",t)}}function io(n,i){1&n&&(e.SAx(0),e.aS0(1,53),e.k70())}function ao(n,i){1&n&&(e.SAx(0),e.aS0(1,54),e.k70())}function so(n,i){1&n&&e.yuY(0,io,2,0,"ng-container")(1,ao,2,0),2&n&&e.C0Y(0,i.$implicit?0:1)}const ro=()=>[!0,!1];function lo(n,i){if(1&n&&e.wR5(0,"tui-data-list-wrapper",55),2&n){e.GaO();const t=e.Gew(16);e.E7m("itemContent",t)("items",e.q4q(2,ro))}}function co(n,i){if(1&n){const t=e.KQA();e.I0R(0,"h2",6),e.aS0(1,35),e.C$Y(),e.I0R(2,"p",36),e.OEk(3),e.wVc(4,"date"),e.wR5(5,"app-reservation-people",37),e.C$Y(),e.I0R(6,"form",38),e.qCj("ngSubmit",function(){const s=e.usT(t).$implicit,c=e.GaO(2);return e.CGJ(c.createPayment(s))}),e.I0R(7,"div",39)(8,"tui-input-number",40),e.SAx(9),e.aS0(10,41),e.k70(),e.C$Y(),e.I0R(11,"p",42),e.aS0(12,43),e.C$Y(),e.wR5(13,"app-errors",44),e.C$Y(),e.I0R(14,"div",39),e.yuY(15,so,2,1,"ng-template",null,45,e.gJz),e.I0R(17,"tui-select",46),e.SAx(18),e.aS0(19,47),e.k70(),e.yuY(20,lo,1,3,"tui-data-list-wrapper",48),e.C$Y(),e.wR5(21,"app-errors",44),e.C$Y(),e.wR5(22,"app-errors",44),e.I0R(23,"button",49),e.SAx(24),e.aS0(25,50),e.k70(),e.C$Y(),e.I0R(26,"button",51),e.SAx(27),e.aS0(28,52),e.k70(),e.C$Y()()}if(2&n){const t=e.Gew(16),o=e.GaO(2);let _,s,c;e.yG2(3),e.CAO(" ",null==(_=o.reservation())?null:_.fullname," - ",e.g7$(4,13,null==(_=o.reservation())?null:_.datetime,"full")," - "),e.yG2(2),e.E7m("adults",null==(s=o.reservation())?null:s.adults)("children",null==(c=o.reservation())?null:c.children),e.yG2(),e.E7m("formGroup",o.newPaymentForm),e.yG2(2),e.E7m("tuiAutoFocus",!0)("tuiTextfieldPostfix","\u20ac")("formControl",o.newPaymentForm.controls.amount),e.yG2(5),e.E7m("errors",o.newPaymentForm.controls.amount.errors),e.yG2(4),e.E7m("valueContent",t)("formControl",o.newPaymentForm.controls.deferred),e.yG2(4),e.E7m("errors",o.newPaymentForm.controls.deferred.errors),e.yG2(),e.E7m("errors",o.newPaymentForm.errors)}}function Eo(n,i){if(1&n){const t=e.KQA();e.yuY(0,co,29,16,"ng-template",null,33,e.gJz),e.I0R(2,"button",2),e.qCj("click",function(){e.usT(t);const _=e.Gew(1),s=e.GaO();return e.CGJ(s.showDialog(_))}),e.SAx(3),e.aS0(4,34),e.k70(),e.C$Y()}}let uo=(()=>{class n{constructor(){this.destroy=(0,e.uUt)(E.UF),this.dialogs=(0,e.uUt)(d._k),this.reservations=(0,e.uUt)(Z.S),this.notifications=(0,e.uUt)(te.E),this.reservationChange=new e._w7,this.reservation=(0,e.OCB)(null),this.payment=(0,e.OCB)(null),this.status=(0,e.S6b)(()=>this.payment()?.status||null),this.loading=(0,e.OCB)(!1),this.newPaymentForm=new r.WC({amount:new r.Ku(null,[r.AQ.required]),deferred:new r.Ku(null,[r.AQ.required])})}set reservationValue(t){this.reservation.set(t),this.payment.set(t?.payment||null)}createPayment(t){const o=this.newPaymentForm.controls.amount.value,_=this.newPaymentForm.controls.deferred.value,s=this.reservation()?.id;s&&!this.newPaymentForm.invalid&&o?this.reservations.createPayment(s,{amount:o,deferred:_}).pipe((0,$.a)(this.destroy)).subscribe({next:c=>{this.reservationValue=c,this.reservationChange.emit(c),this.notifications.fireSnackBar("Payment created."),t.complete()}}):this.notifications.fireSnackBar("Check the entered data and try again.")}showDialog(t){this.dialogs.open(t).subscribe()}fetchPaymentStatus(){const t=this.reservation()?.id;t?(this.loading.set(!0),this.reservations.refreshPaymentStatus(t).pipe((0,$.a)(this.destroy),(0,V.U)(()=>this.loading.set(!1))).subscribe(o=>{this.reservationValue=o},o=>{this.notifications.error((0,k.mk)(o))})):this.notifications.error()}cancelPayment(){const t=this.reservation()?.id;t?this.notifications.confirm("The money from the reservation will be returned to the customer. Are you sure?").subscribe({next:o=>{o&&(this.loading.set(!0),this.reservations.refoundPayment(t).pipe((0,$.a)(this.destroy),(0,V.U)(()=>this.loading.set(!1))).subscribe(_=>{this.reservationValue=_},_=>{this.notifications.error((0,k.mk)(_))}))}}):this.notifications.error()}confirmPayment(){const t=this.reservation()?.id;t?this.notifications.confirm("The transaction will be confirmed. Are you sure?").subscribe({next:o=>{o&&(this.loading.set(!0),this.reservations.confirmPayment(t).pipe((0,$.a)(this.destroy),(0,V.U)(()=>this.loading.set(!1))).subscribe(_=>{this.reservationValue=_},_=>{this.notifications.error((0,k.mk)(_))}))}}):this.notifications.error()}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-admin-reservation-payment"]],inputs:{reservationValue:[e.Wk5.None,"reservation","reservationValue"]},outputs:{reservationChange:"reservationChange"},standalone:!0,features:[e.M5G([E.UF]),e.UHJ],decls:2,vars:1,consts:()=>{let t,o,_,s,c,R,G,z,F,H,X,U,J,K,B,Q,W,A,_e,ie;return t="Payment status",o="Order type",_="Payment ID:",s="Update status (download the latest version from the payment gateway)",c="The payment has been successfully completed.",R="Refund payment",G="The payment has been authorized.",z="CONFIRM payment",F="Refund payment",H="Link to complete the payment:",X="The payment has been refunded.",U="Create payment",J="Create payment",K="Payment value (absolute)",B="The value you enter will not be multiplied by the number of people.",Q="Type of charge",W="Confirm",A="Cancel",_e="Authorization",ie="Payment",[["paymentStatus",""],["modalTemplate",""],["type","button","tuiButton","","size","m","appearance","outline",3,"click"],[4,"ngTemplateOutlet"],[1,"text-center","text-nowrap"],[3,"status"],[1,"text-xl","bold","mb-3"],t,["class","w-fit border font-bold rounded-md border-success-dark text-success-dark flex items-center p-2"],["class","mt-3"],o,[3,"value"],[1,"flex","items-center"],[1,"me-2"],["hintForRefresh",""],["size","m","type","button","tuiIconButton","",3,"tuiHint","showLoader","click"],[1,"w-fit","border","font-bold","rounded-md","border-success-dark","text-success-dark","flex","items-center","p-2"],[1,"mt-3"],_,[3,"content"],s,[1,"my-3"],c,["tuiButton","","type","button","size","m","appearance","secondary-destructive",3,"showLoader","click"],R,G,["tuiButton","","type","button","size","m","appearance","outline",1,"me-2",3,"showLoader","click"],z,F,H,[1,"flex","items-center","justify-center"],["tuiLink","",1,"me-2",3,"href"],X,["createPaymentTemplate",""],U,J,[1,"block","text-slate-400","mb-2"],[3,"adults","children"],[3,"formGroup","ngSubmit"],[1,"block","mb-3"],[3,"tuiAutoFocus","tuiTextfieldPostfix","formControl"],K,[1,"block","my-2"],B,[3,"errors"],["deferredValue",""],[3,"valueContent","formControl"],Q,[3,"itemContent","items",4,"tuiDataList"],["tuiButton","","appearance","primary","type","submit",1,"me-2"],W,["tuiButton","","appearance","outline","type","button"],A,_e,ie,[3,"itemContent","items"]]},template:function(o,_){1&o&&e.yuY(0,_o,6,1)(1,Eo,5,0),2&o&&e.C0Y(0,_.payment()?0:_.reservation()?1:-1)},dependencies:[S.CI,S.Kw,Xn.M,f.w,f.C,p.cf,p.XV,P.oB,P.qL,O.WY,O.lh,O.SL,O.i6,O.IT,p.y,r.sl,r.sz,r.ue,r.u,r.ug,r.uW,C.CQ,me.Q7,me.mi,me.Qj,x.aS,x.We,u.m6,u.gJ,Un.g,Ae,Y.my,Y.cP,Y.uO,l.A$,l.Ux,D.q8,D.OO,ue,Ee],changeDetection:0})}return n})();function po(n,i){if(1&n){const t=e.KQA();e.I0R(0,"button",8),e.qCj("click",function(){e.usT(t);const _=e.GaO().$implicit,s=e.GaO(2);return e.CGJ(s.emit(_))}),e.wR5(1,"app-reservation-status",5),e.C$Y()}if(2&n){const t=e.GaO().$implicit;e.yG2(),e.E7m("status",t)}}function mo(n,i){if(1&n&&e.yuY(0,po,2,1,"button",7),2&n){const t=i.$implicit,o=e.GaO(2);e.C0Y(0,t!=o.status()?0:-1)}}function To(n,i){if(1&n&&(e.I0R(0,"tui-data-list"),e.c53(1,mo,1,1,null,null,e.oxv),e.C$Y()),2&n){const t=e.GaO();e.yG2(),e.oho(t.options)}}const So=n=>({rotate180:n});let Co=(()=>{class n{constructor(){this.destroy$=(0,e.uUt)(E.UF),this.service=(0,e.uUt)(Z.S),this.statusChange=new e._w7,this.itemId=(0,e.OCB)(null),this.loading=(0,e.OCB)(!1),this.status=(0,e.OCB)(null),this.options=["arrived","noshow","cancelled","deleted"],this.buttonAppearance="outline"}set reservation(t){this.itemId.set(t.id||null),this.loading.set(!1),this.status.set(t.status||null)}emit(t){this.statusChange.emit(t)}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-eip-reservation-status"]],inputs:{buttonAppearance:"buttonAppearance",reservation:"reservation"},outputs:{statusChange:"statusChange"},standalone:!0,features:[e.M5G([E.UF]),e.UHJ],decls:9,vars:6,consts:[["dropdownContent",""],[3,"content"],["dropdown",""],["type","button","size","m","tuiButton","",3,"appearance"],[1,"flex","items-center"],[3,"status"],[1,"animation-speed-2",3,"ngClass"],["type","button","tuiOption",""],["type","button","tuiOption","",3,"click"]],template:function(o,_){if(1&o&&(e.yuY(0,To,3,0,"ng-template",null,0,e.gJz),e.I0R(2,"tui-hosted-dropdown",1,2)(4,"button",3)(5,"span",4),e.wR5(6,"app-reservation-status",5),e.I0R(7,"mat-icon",6),e.OEk(8,"expand_more"),e.C$Y()()()()),2&o){const s=e.Gew(1),c=e.Gew(3);e.yG2(2),e.E7m("content",s),e.yG2(2),e.E7m("appearance",_.buttonAppearance),e.yG2(2),e.E7m("status",_.status()),e.yG2(),e.E7m("ngClass",e.S45(4,So,c.open))}},dependencies:[S.CI,S.Kw,oe.GE,oe.Qw,l.A$,l.yi,l.sP,M.Sk,Me.a,P.oB,P.qL,p.QF],changeDetection:0})}return n})();var Ro=a(1183),Oo=a(4208),No=a(5180);let go=(()=>{class n{constructor(t){this.context=t,this.control=new r.Ku(null),this.form=new r.WC({control:this.control});let o=null;t.data&&"object"==typeof t.data&&t.data.item instanceof No.C?o=t.data.item.table||null:t.data&&"string"==typeof t.data.table&&(o=t.data.table),this.control.patchValue(o)}submit(){this.context.completeWith(this.control.value)}cancel(){this.context.completeWith(!1)}static#e=this.\u0275fac=function(o){return new(o||n)(e.GI1(m.C0))};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-edit-reservation-table-modal"]],standalone:!0,features:[e.UHJ],decls:10,vars:3,consts:()=>{let t;return t="Table number",[[1,"m-3","p-3",3,"formGroup","ngSubmit"],[1,"mb-3"],[3,"tuiAutoFocus","formControl"],t,[1,"flex","items-center"],["type","submit","tuiButton",""],["type","button","tuiButton","","appearance","icon",3,"click"]]},template:function(o,_){1&o&&(e.I0R(0,"form",0),e.qCj("ngSubmit",function(){return _.submit()}),e.I0R(1,"div",1)(2,"tui-input",2),e.SAx(3),e.aS0(4,3),e.k70(),e.C$Y()(),e.I0R(5,"div",4)(6,"button",5),e.OEk(7," Conferma "),e.C$Y(),e.I0R(8,"button",6),e.qCj("click",function(){return _.cancel()}),e.OEk(9," Annulla "),e.C$Y()()()),2&o&&(e.E7m("formGroup",_.form),e.yG2(2),e.E7m("tuiAutoFocus",!0)("formControl",_.control))},dependencies:[r.sl,r.sz,r.ue,r.u,r.ug,r.uW,S.CI,S.Kw,x.aS,C.CQ,C.Oo,C.cP,u.m6,u.gJ],encapsulation:2,changeDetection:0})}return n})();var fo=a(2920);const Mo=(n,i)=>i.id;function Io(n,i){1&n&&(e.SAx(0),e.aS0(1,13),e.k70())}function Ao(n,i){1&n&&(e.SAx(0),e.aS0(1,14),e.k70())}function yo(n,i){1&n&&(e.SAx(0),e.aS0(1,15),e.k70())}function ho(n,i){1&n&&(e.SAx(0),e.aS0(1,16),e.k70())}function vo(n,i){1&n&&(e.SAx(0),e.aS0(1,17),e.k70())}function Po(n,i){1&n&&(e.SAx(0),e.aS0(1,18),e.k70())}function $o(n,i){1&n&&(e.SAx(0),e.aS0(1,19),e.k70())}function Go(n,i){1&n&&(e.SAx(0),e.aS0(1,20),e.k70())}function xo(n,i){1&n&&(e.I0R(0,"app-no-items",21)(1,"h4"),e.aS0(2,22),e.C$Y(),e.I0R(3,"span"),e.aS0(4,23),e.C$Y()()),2&n&&e.E7m("showLoader",!1)}function Lo(n,i){if(1&n&&(e.OEk(0),e.wVc(1,"date")),2&n){const t=e.GaO().$implicit;e.oRS(" ",e.g7$(1,1,t.datetime,"full")," ")}}function Do(n,i){if(1&n&&(e.I0R(0,"p"),e.SAx(1),e.aS0(2,53),e.k70(),e.OEk(3),e.C$Y()),2&n){const t=e.GaO(2).$implicit;e.yG2(3),e.CAO(" ",t.table_type.name," (id=",t.table_type_id,"). ")}}function Yo(n,i){if(1&n&&(e.yuY(0,Do,4,2,"ng-template",null,51,e.gJz),e.I0R(2,"span",52)(3,"mat-icon",40),e.OEk(4,"table_restaurant"),e.C$Y(),e.I0R(5,"span"),e.OEk(6),e.C$Y()()),2&n){const t=e.Gew(1),o=e.GaO().$implicit;e.yG2(2),e.E7m("tuiHint",t),e.yG2(4),e.cNF(o.table_type.name)}}function Vo(n,i){if(1&n&&(e.I0R(0,"span",54)(1,"span",46)(2,"span",40),e.aS0(3,55),e.C$Y(),e.I0R(4,"span",40),e.OEk(5),e.C$Y()()()),2&n){const t=e.GaO().$implicit;e.yG2(5),e.cNF(t.table)}}function bo(n,i){1&n&&(e.SAx(0),e.aS0(1,58),e.k70())}function ko(n,i){1&n&&(e.SAx(0),e.aS0(1,59),e.k70())}function wo(n,i){1&n&&(e.SAx(0),e.aS0(1,60),e.k70())}function zo(n,i){1&n&&(e.SAx(0),e.aS0(1,61),e.k70())}function Fo(n,i){if(1&n&&e.yuY(0,bo,2,0)(1,ko,2,0)(2,wo,2,0)(3,zo,2,0),2&n){const t=e.GaO(2).$implicit;let o;e.C0Y(0,"todo"===(o=t.payment.status)?0:"authorized"===o?1:"paid"===o?2:"refunded"===o?3:-1)}}function Ho(n,i){if(1&n&&(e.yuY(0,Fo,4,1,"ng-template",null,56,e.gJz),e.I0R(2,"mat-icon",57),e.wVc(3,"paymentStatusColor"),e.OEk(4,"attach_money"),e.C$Y()),2&n){const t=e.Gew(1),o=e.GaO().$implicit;e.yG2(2),e.E7m("tuiHint",t)("ngClass",e.kDX(3,2,o.payment.status))}}function Xo(n,i){if(1&n&&(e.I0R(0,"p",62),e.OEk(1),e.C$Y()),2&n){const t=e.GaO().$implicit;e.yG2(),e.oRS(" ",t.notes," ")}}function Uo(n,i){if(1&n&&(e.I0R(0,"p",63),e.OEk(1),e.C$Y()),2&n){const t=e.GaO().$implicit;e.E7m("phoneTo",t.phone)("whatsapp",!0),e.yG2(),e.cNF(t.phone)}}function Jo(n,i){if(1&n&&(e.I0R(0,"p",64),e.OEk(1),e.C$Y()),2&n){const t=e.GaO().$implicit;e.E7m("mailTo",t.email),e.yG2(),e.cNF(t.email)}}function Ko(n,i){if(1&n&&(e.I0R(0,"span",65)(1,"span",40),e.aS0(2,66),e.C$Y(),e.I0R(3,"span"),e.OEk(4),e.wVc(5,"date"),e.C$Y()()),2&n){const t=e.GaO().$implicit;e.yG2(4),e.cNF(e.g7$(5,1,t.cancelled_at,"medium"))}}function Bo(n,i){1&n&&(e.I0R(0,"span"),e.aS0(1,67),e.C$Y())}function Qo(n,i){1&n&&(e.I0R(0,"span"),e.aS0(1,68),e.C$Y())}function Wo(n,i){if(1&n){const t=e.KQA();e.I0R(0,"a",69),e.qCj("click",function(){e.usT(t);const _=e.GaO().$implicit,s=e.GaO();return e.CGJ(s.editTable(_))}),e.SAx(1),e.aS0(2,70),e.k70(),e.C$Y()}}const jo=n=>({rotate180:n});function Zo(n,i){if(1&n){const t=e.KQA();e.I0R(0,"div",24)(1,"div")(2,"span",25),e.yuY(3,Lo,2,4,"ng-template",null,26,e.gJz),e.I0R(5,"span",27),e.OEk(6),e.wVc(7,"date"),e.C$Y(),e.I0R(8,"span",28),e.OEk(9),e.C$Y(),e.wR5(10,"app-reservation-people",29),e.yuY(11,Yo,7,2)(12,Vo,6,1,"span",30)(13,Ho,5,4),e.C$Y(),e.yuY(14,Xo,2,1,"p",31),e.I0R(15,"tui-expand",null,32),e.yuY(17,Uo,2,3,"p",33)(18,Jo,2,2,"p",34),e.I0R(19,"div",35)(20,"a",36),e.SAx(21),e.aS0(22,37),e.k70(),e.C$Y()(),e.I0R(23,"div",38)(24,"span",39)(25,"span",40),e.aS0(26,41),e.C$Y(),e.I0R(27,"span"),e.OEk(28),e.wVc(29,"date"),e.C$Y()(),e.yuY(30,Ko,6,4,"span",42),e.C$Y(),e.I0R(31,"div",35),e.wR5(32,"app-admin-reservation-payment",43),e.C$Y(),e.wR5(33,"app-reservation-events",44),e.C$Y(),e.I0R(34,"button",45),e.qCj("click",function(){e.usT(t);const _=e.Gew(16);return e.CGJ(_.expanded=!_.expanded)}),e.I0R(35,"span",46),e.yuY(36,Bo,2,0,"span")(37,Qo,2,0),e.I0R(38,"mat-icon",47),e.OEk(39,"expand_more"),e.C$Y()()()(),e.I0R(40,"div",48)(41,"app-eip-reservation-status",49),e.qCj("statusChange",function(_){const c=e.usT(t).$implicit,R=e.GaO();return e.CGJ(R.updateStatus(c,_))}),e.C$Y(),e.yuY(42,Wo,3,0,"a",50),e.C$Y()()}if(2&n){const t=i.$implicit,o=e.Gew(4),_=e.Gew(16);e.yG2(5),e.E7m("tuiHint",o),e.yG2(),e.oRS(" ",e.g7$(7,21,t.datetime,"HH:mm")," "),e.yG2(3),e.cNF(t.fullname),e.yG2(),e.E7m("adults",t.adults)("children",t.children),e.yG2(),e.C0Y(11,t.table_type?11:-1),e.yG2(),e.C0Y(12,t.table?12:-1),e.yG2(),e.C0Y(13,t.payment?13:-1),e.yG2(),e.C0Y(14,t.notes&&t.notes.length>0?14:-1),e.yG2(3),e.C0Y(17,t.phone&&t.phone.length>0?17:-1),e.yG2(),e.C0Y(18,t.email&&t.email.length>0?18:-1),e.yG2(2),e._6D("routerLink",t.id),e.yG2(8),e.cNF(e.g7$(29,24,t.created_at,"medium")),e.yG2(2),e.C0Y(30,t.cancelled_at?30:-1),e.yG2(2),e.E7m("reservation",t),e.yG2(),e.E7m("reservation",t),e.yG2(3),e.C0Y(36,_.expanded?36:37),e.yG2(2),e.E7m("ngClass",e.S45(27,jo,_.expanded)),e.yG2(3),e.E7m("buttonAppearance","flat")("reservation",t),e.yG2(),e.C0Y(42,t.table?-1:42)}}function qo(n,i){1&n&&e.C_f(0)}function e_(n,i){if(1&n&&e.yuY(0,qo,1,0,"ng-container",71),2&n){e.GaO();const t=e.Gew(20);e.E7m("ngTemplateOutlet",t)}}let t_=(()=>{class n{constructor(){this.loading=(0,e.OCB)(!1),this.data=(0,e.OCB)(null),this.items=(0,e.S6b)(()=>this.data()?.items||[]),this.dialogs=(0,e.uUt)(d._k),this.injector=(0,e.uUt)(e.zZn),this.service=(0,e.uUt)(Z.S),this.router=(0,e.uUt)(j.E5),this.notifications=(0,e.uUt)(te.E),this.date=(0,e.uUt)(p.y),this.destroy$=(0,e.uUt)(E.UF),this._=(0,e.uUt)(Fn.OY).setTitle("Reservations | La Porta D'Acqua"),this.reservationsEvents=(0,e.uUt)(fo.I),this.inputSize="m",this.filters={}}ngOnInit(){this.reservationsEvents.listenWsChanges().subscribe({next:()=>this.search()}),this.router.events.pipe((0,$.a)(this.destroy$)).subscribe({next:t=>{t instanceof j.MT&&this.search()}})}updateStatus(t,o){const _=t.id;_&&o?this.notifications.confirm("La prenotazione verr\xe0 aggiornata.",{title:"\n           Booking \n          " + t.fullname + "\n           for \n          " + ((t.adults || 0) + (t.children || 0)) + "\n           in status \n          " + Ro.au[o].title + "\n        "}).subscribe({next:s=>{s&&this.confirmedUpdateStatus(_,o)}}):this.notifications.error()}delete(t){t&&this.notifications.confirm("Are you sure you want to cancel this reservation?").subscribe({next:o=>{o&&this.confirmedDelete(t)}})}filtersChanged(t){this.filters=t,this.search(t)}editTable(t){this.dialogs.open(new m.WO(go,this.injector),{data:{item:t}}).pipe((0,$.a)(this.destroy$)).subscribe({next:o=>{0!=o&&t.id&&(this.loading.set(!0),this.service.update(t.id,{table:o}).pipe((0,$.a)(this.destroy$),(0,V.U)(()=>this.loading.set(!1)),(0,V.U)(()=>this.search())).subscribe())},error:o=>console.error(o)})}confirmedUpdateStatus(t,o){this.loading.set(!0),("deleted"==o?this.service.destroy(t):this.service.updateStatus(t,o)).pipe((0,$.a)(this.destroy$),(0,V.U)(()=>this.loading.set(!1))).subscribe({next:()=>{this.notifications.fireSnackBar("State updated successfully."),this.search()},error:s=>{this.notifications.error((0,k.mk)(s)||"Something went wrong with the status update.")}})}confirmedDelete(t){this.loading.set(!0),this.service.destroy(t).pipe((0,$.a)(this.destroy$),(0,V.U)(()=>{this.loading.set(!1),this.search()})).subscribe({error:o=>{this.notifications.error((0,k.mk)(o)||"Something went wrong with the cancellation.")}})}search(t=this.filters){t||={},t={...t},this.loading.set(!0),this.service.search(t).pipe((0,$.a)(this.destroy$),(0,V.U)(()=>this.loading.set(!1))).subscribe({next:o=>{this.data.set(o)},error:o=>{this.notifications.error((0,k.mk)(o)||"Something went wrong in the research."),console.error(o)}})}static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.In1({type:n,selectors:[["app-admin-reservations-home"]],viewQuery:function(o,_){if(1&o&&e.CC$(Re,7),2&o){let s;e.wto(s=e.Gqi())&&(_.turnSelect=s.first)}},standalone:!0,features:[e.M5G([E.UF]),e.UHJ],decls:28,vars:7,consts:()=>{let t,o,_,s,c,R,G,z,F,H,X,U,J,K,B,Q,W,A,_e,ie,y,ye,he;return t="Reservations",o="Schedule",_="Name",s="Email",c="No.",R="State",G="Table",z="Note",F="Contacts",H="No reservation",X="Try changing the search filters.",U="Change reservation",J="Creation:",K="The type of table has been selected.",B="Table",Q="The payment is pending completion.",W="The payment has been authorized.",A="The payment has been successfully completed.",_e="The payment has been refunded.",ie="Cancellation:",y="Hide details",ye="Show details",he="Assign table",[t,["datetimeCol",""],["nameCol",""],["emailCol",""],["peopleCol",""],["statusCol",""],["tableCol",""],["detailsCol",""],["contactsCol",""],["noItems",""],[3,"loading","data","filtersChanged"],[3,"overlay","showLoader"],[3,"showLoader","filters"],o,_,s,c,R,G,z,F,[3,"showLoader"],H,X,[1,"p-3","m-2","flex","items-center","justify-between","border","rounded-md","border-slate-400"],[1,"flex","items-center","text-lg","mb-2","flex-wrap"],["detailDatetime",""],[1,"me-2",3,"tuiHint"],[1,"me-2"],[1,"me-2",3,"adults","children"],["class","text-danger font-bold"],["class","block mb-2 text-danger font-bold overflow-wrap-anywhere"],["expand",""],["class","block mb-2 overflow-wrap-anywhere",3,"phoneTo","whatsapp"],["class","block mb-2 overflow-wrap-anywhere",3,"mailTo"],[1,"block","mb-2"],["tuiLink","",3,"routerLink"],U,[1,"block"],[1,"text-slate-400","block","mb-2"],[1,"me-1"],J,["class","text-slate-400 block mb-2",3,"tuiHint"],[3,"reservation"],[1,"my-auto",3,"reservation"],["type","button","size","s","tuiButton","","appearance","outline",3,"click"],[1,"flex","items-center"],[1,"animation-speed-2",3,"ngClass"],[1,"flex","flex-col","justify-center","items-around"],[1,"mb-3",3,"buttonAppearance","reservation","statusChange"],["class","flex flex-col items-center justify-center","tuiLink",""],["tableTypeHint",""],[1,"flex","items-center","border","rounded-md","border-slate-400","p-1","me-2",3,"tuiHint"],K,[1,"text-danger","font-bold"],B,["paymentStatusHint",""],[3,"tuiHint","ngClass"],Q,W,A,_e,[1,"block","mb-2","text-danger","font-bold","overflow-wrap-anywhere"],[1,"block","mb-2","overflow-wrap-anywhere",3,"phoneTo","whatsapp"],[1,"block","mb-2","overflow-wrap-anywhere",3,"mailTo"],[1,"text-slate-400","block","mb-2",3,"tuiHint"],ie,y,ye,["tuiLink","",1,"flex","flex-col","items-center","justify-center",3,"click"],he,[4,"ngTemplateOutlet"],["class","p-3 m-2 flex items-center justify-between border rounded-md border-slate-400"]]},template:function(o,_){1&o&&(e.I0R(0,"h1"),e.SAx(1),e.aS0(2,0),e.k70(),e.C$Y(),e.yuY(3,Io,2,0,"ng-template",null,1,e.gJz)(5,Ao,2,0,"ng-template",null,2,e.gJz)(7,yo,2,0,"ng-template",null,3,e.gJz)(9,ho,2,0,"ng-template",null,4,e.gJz)(11,vo,2,0,"ng-template",null,5,e.gJz)(13,Po,2,0,"ng-template",null,6,e.gJz)(15,$o,2,0,"ng-template",null,7,e.gJz)(17,Go,2,0,"ng-template",null,8,e.gJz)(19,xo,5,1,"ng-template",null,9,e.gJz),e.I0R(21,"app-list-reservations-filters",10),e.qCj("filtersChanged",function(c){return _.filtersChanged(c)}),e.I0R(22,"tui-loader",11),e.c53(23,Zo,43,29,"div",72,Mo,!1,e_,1,1,"ng-container"),e.C$Y()(),e.wR5(26,"app-reservation-tables-summary",12)(27,"router-outlet")),2&o&&(e.yG2(21),e.E7m("loading",_.loading())("data",_.data()),e.yG2(),e.E7m("overlay",!0)("showLoader",_.loading()),e.yG2(),e.oho(_.items()),e.yG2(3),e.E7m("showLoader",_.loading())("filters",_.filters))},dependencies:[p.MD,p.QF,p.XV,p.y,r.sl,C.CQ,u.m6,S.CI,S.Kw,P.qL,j.ER,f.w,f.C,j.cP,ee.yy,O.WY,O.lh,O.SL,O.i6,O.IT,Tn,vn,Ln,Vn,Ae,Hn.O,M.Sk,M.Cb,uo,r.y,Co,L.kh,L.st,Oo.u,Ie],encapsulation:2,changeDetection:0})}return n})()},9052:(b,g,a)=>{a.d(g,{y:()=>S});var e=a(4496),p=a(7760),r=a(6700),C=a(7368),E=a(2700),u=a(1368);function d(f,O){if(1&f&&(e.wR5(0,"img",1),e.wVc(1,"async")),2&f){const M=e.GaO();e.uQ9("max-w-[100%] h-auto min-h-[50px] md:min-h-[100px] ",M.imgClass,""),e._6D("src",e.kDX(1,5,M.imageSrc$),e.K6U),e.E7m("draggable",!1)}}let S=(()=>{class f{constructor(){this.noImage="/assets/img/no-image.jpg",this.imagesService=(0,e.uUt)(p.U),this.imgClass="block rounded",this.image$=new r.g(null),this.imageSrc$=this.image$.pipe((0,C.G)(M=>M instanceof Blob?(0,E.of)(URL.createObjectURL(M)):M&&M.id?this.imagesService.downloadUrl(M.id):(0,E.of)(this.noImage)))}set image(M){this.image$.next(M??null)}static#e=this.\u0275fac=function(L){return new(L||f)};static#t=this.\u0275cmp=e.In1({type:f,selectors:[["app-show-image"]],inputs:{imgClass:"imgClass",image:"image"},standalone:!0,features:[e.UHJ],decls:2,vars:3,consts:[[3,"draggable","class","src"],[3,"draggable","src"]],template:function(L,P){1&L&&(e.yuY(0,d,2,7,"img",0),e.wVc(1,"async")),2&L&&e.C0Y(0,e.kDX(1,1,P.imageSrc$)?0:-1)},dependencies:[u.a],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center}"],changeDetection:0})}return f})()},9772:(b,g,a)=>{a.d(g,{CU:()=>r,MJ:()=>p,ye:()=>C}),(new Date).getTimezoneOffset();const p=1;function r(E,u=p){if(!("string"==typeof E&&E.length>0&&E.match(/\d{1,2}:\d{1,2}/)))return console.error("Invalid string provided to strTimeTimezone",{string:E}),"";const S=Number(E.split(":")[0])+u;return`${S<10?"0":""}${S}:${E.split(":")[1]}`}function C(E,u=p){return r(E,-1*u)}},1960:(b,g,a)=>{a.d(g,{u:()=>C});var e=a(8400),p=a(7516);class r extends e.w{constructor(u){super(u),this.date=u.date?new Date(u.date):void 0,this.reservation_turn_id=u.reservation_turn_id,this.group_id=u.group_id,this.reservation_turn=u.reservation_turn?new p.e(u.reservation_turn):void 0}}class C extends e.w{constructor(u){super(u),this.turns=[],this.dates=[],this.title=u.title,this.status=u.status,this.preorder_type=u.preorder_type,this.payment_value=u.payment_value,this.message=u.message,this.turns=(u.turns||[]).map(d=>new p.e(d)),this.dates=(u.dates||[]).map(d=>new r(d)),this.translations=u.translations||{},this.table_type_to_preorder_reservation_groups=u.table_type_to_preorder_reservation_groups}}},7516:(b,g,a)=>{a.d(g,{e:()=>C});var e=a(8400),p=a(9772),r=a(1960);class C extends e.w{constructor(u){super(u),this.messages=[],this.name=u.name,this.weekday=u.weekday,this.step=u.step,this.valid_times=u.valid_times,this.starts_at=u.starts_at?(0,p.CU)(u.starts_at):void 0,this.ends_at=u.ends_at?(0,p.CU)(u.ends_at):void 0,this.preorder_reservation_group=u.preorder_reservation_group?new r.u(u.preorder_reservation_group):void 0,this.messages=u.messages}}},9160:(b,g,a)=>{a.d(g,{E:()=>r});var e=a(400),p=a(4496);let r=(()=>{class C{transform(u){return u instanceof Date?u:u instanceof e.EK?u.toUtcNativeDate():null}static#e=this.\u0275fac=function(d){return new(d||C)};static#t=this.\u0275pipe=p.UTH({name:"fromTuiDay",type:C,pure:!0,standalone:!0})}return C})()},2516:(b,g,a)=>{a.d(g,{G:()=>p});var e=a(4496);let p=(()=>{class r{constructor(){this.weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}transform(E){return"number"!=typeof E&&"string"==typeof E&&(E=parseInt(E)),"number"==typeof E&&E>=0&&E<=6?this.weekdays[E]:null}static#e=this.\u0275fac=function(u){return new(u||r)};static#t=this.\u0275pipe=e.UTH({name:"weekday",type:r,pure:!0,standalone:!0})}return r})()},7760:(b,g,a)=>{a.d(g,{U:()=>C});var e=a(6012),p=a(2264),r=a(4496);let C=(()=>{class E extends e.s{constructor(){super(p.W,"images")}removeFromRecord(d,S){return this.patch(`${d}/remove_from_record`,{record_type:S.record_type,record_id:S.record_id})}updateRecord(d,S){return this.patch("record",{image_ids:S,record_type:d.record_type,record_id:d.record_id})}downloadUrl(d){return this.url(`${d}/download`)}static#e=this.\u0275fac=function(S){return new(S||E)};static#t=this.\u0275prov=r.wxM({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})()},7556:(b,g,a)=>{a.d(g,{K:()=>C});var e=a(6012),p=a(7516),r=a(4496);let C=(()=>{class E extends e.s{constructor(){super(p.e,"admin/reservation_turns")}static#e=this.\u0275fac=function(S){return new(S||E)};static#t=this.\u0275prov=r.wxM({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})()},7492:(b,g,a)=>{a.d(g,{W:()=>C});var e=a(6012),p=a(9064),r=a(4496);let C=(()=>{class E extends e.s{constructor(){super(p.g,"admin/table_types")}static#e=this.\u0275fac=function(S){return new(S||E)};static#t=this.\u0275prov=r.wxM({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})()},5892:(b,g,a)=>{a.d(g,{Ws:()=>x,yy:()=>se});var e=a(4496),p=a(2528),r=a(4472);(0,p.W0)((0,r.u)("showHideText"));const E=(0,p.W0)((0,r.u)("paginationTexts"));var u=a(466),d=a(1512),S=a(4336),f=a(3656),O=a(8212),M=a(5944),L=a(1368),P=a(1040);function j(l,v){if(1&l&&(e.SAx(0),e.OEk(1),e.I0R(2,"strong",6),e.OEk(3),e.C$Y(),e.k70()),2&l){const m=e.GaO().ngIf,I=e.GaO();e.yG2(),e.oRS(" ",m.pages," "),e.yG2(2),e.cNF(I.pages)}}function ee(l,v){if(1&l&&(e.SAx(0),e.OEk(1),e.k70()),2&l){const m=v.polymorpheusOutlet;e.yG2(),e.oRS(" ",m," ")}}function te(l,v){if(1&l&&e.wR5(0,"tui-svg",13),2&l){const m=e.GaO(4);e.E7m("src",m.commonIcons.check)}}function $(l,v){1&l&&e.wR5(0,"span",14)}const V=(l,v)=>({$implicit:l,total:v});function k(l,v){if(1&l){const m=e.KQA();e.SAx(0),e.I0R(1,"button",9),e.qCj("click",function(){const w=e.usT(m).$implicit,ne=e.GaO(3);return e.CGJ(ne.onItem(w))}),e.yuY(2,ee,2,1,"ng-container",10)(3,te,1,1,"tui-svg",11)(4,$,1,0,"ng-template",null,12,e.gJz),e.C$Y(),e.k70()}if(2&l){const m=v.$implicit,I=e.Gew(5),N=e.GaO(3);e.yG2(2),e.E7m("polymorpheusOutlet",N.options.sizeOptionContent)("polymorpheusOutletContext",e.IBC(4,V,m,N.total)),e.yG2(),e.E7m("ngIf",m===N.size)("ngIfElse",I)}}function Z(l,v){if(1&l&&(e.I0R(0,"tui-data-list",7),e.yuY(1,k,6,7,"ng-container",8),e.C$Y()),2&l){const m=e.GaO(2);e.yG2(),e.E7m("ngForOf",m.items)}}function re(l,v){if(1&l){const m=e.KQA();e.SAx(0),e.I0R(1,"button",15),e.qCj("click",function(){e.usT(m);const N=e.GaO(2);return e.CGJ(N.back())}),e.C$Y(),e.I0R(2,"button",16),e.qCj("click",function(){e.usT(m);const N=e.GaO(2);return e.CGJ(N.forth())}),e.C$Y(),e.k70()}if(2&l){const m=v.ngIf,I=e.GaO(2);e.yG2(),e.E7m("disabled",I.leftDisabled)("icon",I.icons.decrement)("title",m[0]),e.yG2(),e.E7m("disabled",I.rightDisabled)("icon",I.icons.increment)("title",m[1])}}function le(l,v){if(1&l){const m=e.KQA();e.SAx(0),e.I0R(1,"span",1),e.yuY(2,j,4,2,"ng-container",0),e.C$Y(),e.I0R(3,"span",2),e.OEk(4),e.I0R(5,"tui-hosted-dropdown",3),e.iHE("openChange",function(N){e.usT(m);const w=e.GaO();return e.kNx(w.open,N)||(w.open=N),e.CGJ(N)}),e.I0R(6,"button",4)(7,"strong"),e.OEk(8),e.C$Y()(),e.yuY(9,Z,2,1,"ng-template",null,5,e.gJz),e.C$Y(),e.OEk(11),e.I0R(12,"strong",6),e.OEk(13),e.C$Y()(),e.yuY(14,re,3,6,"ng-container",0),e.wVc(15,"async"),e.k70()}if(2&l){const m=v.ngIf,I=e.Gew(10),N=e.GaO();e.yG2(2),e.E7m("ngIf",N.options.showPages),e.yG2(2),e.oRS(" ",m.linesPerPage," "),e.yG2(),e.E7m("content",I),e.OKB("open",N.open),e.yG2(3),e.CAO("",N.start+1,"\u2013",N.end,""),e.yG2(3),e.oRS(" ",m.of," "),e.yG2(2),e.cNF(N.total),e.yG2(),e.E7m("ngIf",e.kDX(15,9,N.spinTexts$))}}const D=(0,p.AL)({sizeOptionContent:function ae({$implicit:l}){return`${l}`},showPages:!0,items:[10,20,50,100],size:10});let x=(()=>{class l{constructor(m,I,N,w,ne){this.icons=m,this.spinTexts$=I,this.texts$=N,this.options=w,this.commonIcons=ne,this.items=this.options.items,this.total=0,this.page=0,this.size=this.options.size,this.pageChange=new e._w7,this.sizeChange=new e._w7,this.paginationChange=new e._w7,this.open=!1}get pages(){return Math.ceil(this.total/this.size)}get start(){return this.page*this.size}get end(){return Math.min(this.start+this.size,this.total)}get leftDisabled(){return!this.start}get rightDisabled(){return this.end===this.total}get pagination(){return{page:this.page,size:this.size}}onItem(m){const{start:I}=this;this.size=m,this.sizeChange.emit(m),this.open=!1,this.page=Math.floor(I/this.size),this.pageChange.emit(this.page),this.paginationChange.emit(this.pagination)}back(){this.page--,this.pageChange.emit(this.page),this.paginationChange.emit(this.pagination)}forth(){this.page++,this.pageChange.emit(this.page),this.paginationChange.emit(this.pagination)}}return l.\u0275fac=function(m){return new(m||l)(e.GI1(M.KY),e.GI1(M.s1),e.GI1(E),e.GI1(D),e.GI1(M.QJ))},l.\u0275cmp=e.In1({type:l,selectors:[["tui-table-pagination"]],inputs:{items:"items",total:"total",page:"page",size:"size"},outputs:{pageChange:"pageChange",sizeChange:"sizeChange",paginationChange:"paginationChange"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"t-pages"],["automation-id","tui-table-pagination__lines-per-page-wrapper"],[3,"content","open","openChange"],["tuiLink","","type","button"],["content",""],[1,"t-strong"],["size","s"],[4,"ngFor","ngForOf"],["tuiOption","",1,"t-item",3,"click"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],["class","t-checkmark",3,"src",4,"ngIf","ngIfElse"],["fakeIcon",""],[1,"t-checkmark",3,"src"],[1,"t-checkmark"],["appearance","icon","size","xs","tuiIconButton","","type","button",1,"t-back",3,"disabled","icon","title","click"],["appearance","icon","size","xs","tuiIconButton","","type","button",3,"disabled","icon","title","click"]],template:function(m,I){1&m&&(e.yuY(0,le,16,11,"ng-container",0),e.wVc(1,"async")),2&m&&e.E7m("ngIf",e.kDX(1,1,I.texts$))},dependencies:[u.Qw,d.C,S.yi,S.sP,f.Wu,O.Kw,L.u_,L.ay,P.Af,L.a],styles:["[_nghost-%COMP%]{display:flex;font:var(--tui-font-text-s);align-items:center;color:var(--tui-text-03)}.t-strong[_ngcontent-%COMP%]{color:var(--tui-text-01)}.t-pages[_ngcontent-%COMP%]{margin-right:auto}.t-item[_ngcontent-%COMP%]{min-width:5.5rem;box-sizing:border-box}.t-checkmark[_ngcontent-%COMP%]{min-width:1.5rem;border-left:5px solid transparent}.t-back[_ngcontent-%COMP%]{margin:0 .25rem 0 1.5rem}"],changeDetection:0}),l})(),se=(()=>{class l{}return l.\u0275fac=function(m){return new(m||l)},l.\u0275mod=e.a4G({type:l}),l.\u0275inj=e.s3X({imports:[[L.MD,O.CI,d.w,u.GE,S.A$,f.Yt,P.Ux]]}),l})()}}]);