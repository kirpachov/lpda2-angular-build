"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[8220],{2040:(v,m,o)=>{o.r(m),o.d(m,{EditPublicMessageModule:()=>w});var e=o(1236),S=o(7552),t=o(4496),M=o(6500),T=o(3480),C=o(3616),g=o(6684),l=o(7368),d=o(4704),u=o(9212),f=o(8824),c=o(6504),A=o(7048),O=o(1128),D=o(9938),L=o(8392),$=o(8256),r=o(9064),p=o(9956),n=o(8212),s=o(8048),I=o(5188),U=o(6052),y=o(9860),B=o(1480),x=o(1368),z=o(1343),b=o(7936),F=o(4336);function V(a,G){1&a&&(t.OEk(0),t.wVc(1,"publicMessageKey")),2&a&&t.cNF(t.kDX(1,1,G.$implicit))}function Y(a,G){if(1&a&&t.wR5(0,"tui-data-list-wrapper",20),2&a){const i=t.GaO(),_=t.Gew(9);t.E7m("itemContent",_)("items",i.keys)}}function K(a,G){1&a&&t.C_f(0)}const W=a=>({$implicit:a});function X(a,G){if(1&a&&(t.I0R(0,"div",5),t.OEk(1," Il testo verr\xe0 mostrato nella seguente posizione:"),t.wR5(2,"br"),t.I0R(3,"b"),t.yuY(4,K,1,0,"ng-container",21),t.C$Y()()),2&a){const i=t.GaO(),_=t.Gew(9);t.yG2(4),t.E7m("ngTemplateOutlet",_)("ngTemplateOutletContext",t.S45(2,W,i.form.value.key))}}let j=(()=>{class a{constructor(){this.service=(0,t.uUt)(M.o),this.destroy$=(0,t.uUt)(T.UF),this.route=(0,t.uUt)(e.gV),this.router=(0,t.uUt)(e.E5),this.notifications=(0,t.uUt)(O.E),this.loading=(0,t.OCB)(!1),this.keys=[...y.EF],this.submitted=(0,t.OCB)(!1),this.form=new c.WC({key:new c.Ku(null,[c.AQ.required]),text:new c.Ku(null)}),this.e=this.errorsFor}ngOnInit(){this.form.get("key")?.valueChanges?.pipe((0,C.a)(this.destroy$),(0,g.I)(i=>(0,y.Qn)(i)),(0,l.G)(i=>this.service.show(i))).subscribe({next:i=>{this.form.patchValue({text:i.translations?.text})},error:i=>{console.warn(i)}}),this.route.params.pipe((0,C.a)(this.destroy$),(0,d.k)(i=>i.key),(0,g.I)(i=>(0,y.Qn)(i)),(0,u.y)(i=>this.form.patchValue({key:i})),(0,u.y)(()=>this.form.controls.key.disable())).subscribe((0,z.I)())}submit(){this.submitted.set(!0),!this.form.invalid&&(this.loading.set(!0),this.service.create(this.formVal()).pipe((0,C.a)(this.destroy$),(0,f.U)(()=>this.loading.set(!1))).subscribe({next:()=>{this.notifications.fireSnackBar("Saved")},error:i=>{i instanceof A.gj&&422==i.status?D.y.assignErrorsToForm(this.form,i):this.notifications.error(i instanceof A.gj?(0,$.mk)(i):L.a)}}))}cancel(){this.router.navigate(["../"],{relativeTo:this.route})}errorsFor(i){const _=this.form.get(i);return _&&(_.dirty||_.touched||this.submitted())?_.errors:null}formVal(){return{key:this.form.controls.key.value,text:this.form.value.text}}static#t=this.\u0275fac=function(_){return new(_||a)};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["app-edit-public-message"]],standalone:!0,features:[t.M5G([T.UF]),t.UHJ],decls:29,vars:8,consts:()=>{let i,_,E,P,N,R;return i="Set message",_="\n           You can display customized messages on public pages. For each\n          position, you can put exactly one message translated into multiple\n          languages. \n        ",E="Select the position of the text to display.",P="Translation",N="Confirm",R="Cancel",[[1,"flex","items-center"],i,[1,"text-slate-400"],_,[3,"formGroup","ngSubmit"],[1,"mb-3"],["keySelectContent",""],["tuiTextfieldSize","l",3,"formControlName","valueContent"],E,["tuiTextfield",""],[3,"itemContent","items",4,"tuiDataList"],["class","mb-3"],[3,"errors"],["formControlName","text"],P,[1,"flex"],["tuiButton","","type","submit","size","l",1,"me-2",3,"showLoader"],N,["tuiButton","","type","button","appearance","icon","size","l",3,"showLoader","click"],R,[3,"itemContent","items"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]]},template:function(_,E){if(1&_&&(t.I0R(0,"h1",0)(1,"span"),t.aS0(2,1),t.C$Y()(),t.I0R(3,"p",2),t.SAx(4),t.aS0(5,3),t.k70(),t.C$Y(),t.I0R(6,"form",4),t.qCj("ngSubmit",function(){return E.submit()}),t.I0R(7,"div",5),t.yuY(8,V,2,3,"ng-template",null,6,t.gJz),t.I0R(10,"tui-select",7),t.SAx(11),t.aS0(12,8),t.k70(),t.wR5(13,"input",9),t.yuY(14,Y,1,2,"tui-data-list-wrapper",10),t.C$Y(),t.yuY(15,X,5,4,"div",11),t.wR5(16,"app-errors",12),t.C$Y(),t.I0R(17,"div",5)(18,"app-i18n-input",13),t.SAx(19),t.aS0(20,14),t.k70(),t.C$Y(),t.wR5(21,"app-errors",12),t.C$Y(),t.I0R(22,"div",15)(23,"button",16),t.SAx(24),t.aS0(25,17),t.k70(),t.C$Y(),t.I0R(26,"button",18),t.qCj("click",function(){return E.cancel()}),t.SAx(27),t.aS0(28,19),t.k70(),t.C$Y()()()),2&_){const P=t.Gew(9);t.yG2(6),t.E7m("formGroup",E.form),t.yG2(4),t.E7m("formControlName","key")("valueContent",P),t.yG2(5),t.C0Y(15,E.form.value.key?15:-1),t.yG2(),t.E7m("errors",E.e("text")),t.yG2(5),t.E7m("errors",E.e("text")),t.yG2(2),t.E7m("showLoader",E.loading()),t.yG2(3),t.E7m("showLoader",E.loading())}},dependencies:[c.sl,c.sz,c.ue,c.u,c.uW,c.Wo,r.w,p.g,n.CI,n.Kw,I.my,I.cP,I.uO,b.b,s.aS,s.rD,U.q8,U.OO,F.Ux,B.s,x.XV],encapsulation:2,changeDetection:0})}return a})(),w=(()=>{class a{static#t=this.\u0275fac=function(_){return new(_||a)};static#e=this.\u0275mod=t.a4G({type:a});static#o=this.\u0275inj=t.s3X({imports:[e.qQ.forChild([(0,S.VV)(j,{path:"",closeable:!0,dismissible:!0,size:"m"})])]})}return a})()},9064:(v,m,o)=>{o.d(m,{w:()=>$});var e=o(4496),S=o(6504),t=o(3480),M=o(6700),T=o(3616),C=o(6684),g=o(3797),l=o(8588),d=o(1368),u=o(9956),f=o(1292);function c(r,p){if(1&r&&(e.I0R(0,"tui-textarea",2),e.OEk(1),e.C$Y()),2&r){const n=e.GaO().$implicit,s=e.GaO();e.E7m("formControl",n.control),e.yG2(),e.oRS(" ",s.getFullLang(n.lang)," ")}}function A(r,p){if(1&r&&(e.I0R(0,"tui-input",2),e.OEk(1),e.C$Y()),2&r){const n=e.GaO().$implicit,s=e.GaO();e.E7m("formControl",n.control),e.yG2(),e.oRS(" ",s.getFullLang(n.lang)," ")}}const O=r=>({"mb-3":r});function D(r,p){if(1&r&&(e.SAx(0),e.I0R(1,"div",1),e.yuY(2,c,2,2,"tui-textarea",2)(3,A,2,2),e.wR5(4,"app-errors",3),e.C$Y(),e.k70()),2&r){const n=p.$implicit,s=p.last,I=e.GaO();e.yG2(),e.E7m("ngClass",e.S45(3,O,!s)),e.yG2(),e.C0Y(2,I.long?2:3),e.yG2(2),e.E7m("errors",n.control.errors)}}const L=["*"];let $=(()=>{class r{constructor(){this.destroy$=new t.UF,this.long=!1,this.controls=(0,e.OCB)({}),this.controlsArr=(0,e.S6b)(()=>{const n=this.controls();return Object.keys(n).map(s=>({lang:s,control:n[s]}))}),this.touched$=new M.g(!1),this.value$=new M.g({})}ngAfterViewInit(){this.addLang("it"),this.addLang("en")}ngOnInit(){}registerOnChange(n){this.value$.pipe((0,T.a)(this.destroy$)).subscribe({next:s=>n(s)})}registerOnTouched(n){this.touched$.pipe((0,C.I)(s=>!0===s)).subscribe({next:()=>n()})}writeValue(n){this.patchValue(n??{}),this.touched$.next(!1)}wasTouched(){this.touched$.next(!0)}getFullLang(n){return f.S[n]??n}controlChanged(n){this.value$.next({...this.value$.value,[n]:this.controls()[n].value})}patchValue(n){Object.keys(n).forEach(s=>this.addLang(s)),Object.keys(this.controls()).forEach(s=>{this.controls()[s].patchValue(n[s]??null)})}addLang(n){if(this.controls()[n])return;const s=new S.Ku;s.valueChanges.subscribe({next:()=>this.controlChanged(n)}),this.controls.set({...this.controls(),[n]:s})}static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275cmp=e.In1({type:r,selectors:[["app-i18n-input"]],inputs:{long:"long"},standalone:!0,features:[e.M5G([{provide:S.Y6,useExisting:(0,e.wd)(()=>r),multi:!0},t.UF]),e.UHJ],ngContentSelectors:L,decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"ngClass"],[3,"formControl"],[3,"errors"]],template:function(s,I){1&s&&(e.kPM(),e._Xx(0),e.yuY(1,D,5,5,"ng-container",0)),2&s&&(e.yG2(),e.E7m("ngForOf",I.controlsArr()))},dependencies:[S.sl,S.ue,S.ug,g.CQ,g.Oo,g.cP,d.Iw,u.g,d.QF,l.Y3,l.wp,l.kd],changeDetection:0})}return r})()},1292:(v,m,o)=>{o.d(m,{S:()=>e});const e={it:"Italian",en:"English",es:"Spanish",fr:"French",de:"German",pt:"Portuguese",ru:"Russian",zh:"Chinese",ja:"Japanese",ar:"Arabic",hi:"Hindi",bn:"Bengali",pa:"Punjabi",ms:"Malaysian"}},6988:(v,m,o)=>{o.d(m,{E:()=>C,Q:()=>g});var e=o(4496),S=o(3480),t=o(3840),M=o(3120),T=o(3616);let C=(()=>{class l{constructor(u,f){this.el=u,this.destroy$=f}set tuiScrollIntoView(u){u&&(0,M.k)(0).pipe((0,T.a)(this.destroy$)).subscribe(()=>{this.el.nativeElement.dispatchEvent(new CustomEvent(t.dG,{bubbles:!0,detail:this.el.nativeElement}))})}}return l.\u0275fac=function(u){return new(u||l)(e.GI1(e.GMv),e.GI1(S.UF,2))},l.\u0275dir=e.Sc5({type:l,selectors:[["","tuiScrollIntoView",""]],inputs:{tuiScrollIntoView:"tuiScrollIntoView"},features:[e.M5G([S.UF])]}),l})(),g=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=e.a4G({type:l}),l.\u0275inj=e.s3X({}),l})()}}]);