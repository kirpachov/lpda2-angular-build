"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[5620],{5620:(V,T,M)=>{M.d(T,{S:()=>S,sD:()=>D});var g=M(4496),E=M(4532),C=M(1316);let D=(()=>{class p{constructor(d,k){this.ngZone=d,this.elementRef=k,this.maskedElement=null,this.maskito=E.Se,this.maskitoElement=E.qu}ngOnChanges(){var d;return(0,C.kH)(this,void 0,void 0,function*(){null===(d=this.maskedElement)||void 0===d||d.destroy();const k=this.maskitoElement,v=yield k(this.elementRef.nativeElement);this.maskitoElement===k&&this.ngZone.runOutsideAngular(()=>{var y;this.maskedElement=new E.oZ(v,null!==(y=this.maskito)&&void 0!==y?y:E.Se)})})}ngOnDestroy(){var d;null===(d=this.maskedElement)||void 0===d||d.destroy()}}return p.\u0275fac=function(d){return new(d||p)(g.GI1(g.WW2),g.GI1(g.GMv))},p.\u0275dir=g.Sc5({type:p,selectors:[["","maskito",""]],inputs:{maskito:"maskito",maskitoElement:"maskitoElement"},features:[g.SYr]}),p})(),S=(()=>{class p{}return p.\u0275fac=function(d){return new(d||p)},p.\u0275mod=g.a4G({type:p}),p.\u0275inj=g.s3X({}),p})()},4532:(V,T,M)=>{M.d(T,{Se:()=>E,oZ:()=>G,qq:()=>P,qu:()=>g});const g=i=>i.querySelector("input,textarea")||i,E={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"};class C{constructor(){this.now=null,this.past=[],this.future=[]}undo(){const e=this.past.pop();e&&this.now&&(this.future.push(this.now),this.updateElement(e,"historyUndo"))}redo(){const e=this.future.pop();e&&this.now&&(this.past.push(this.now),this.updateElement(e,"historyRedo"))}updateHistory(e){if(!this.now)return void(this.now=e);const n=this.now.value!==e.value,t=this.now.selection.some((s,o)=>s!==e.selection[o]);!n&&!t||(n&&(this.past.push(this.now),this.future=[]),this.now=e)}updateElement(e,n){this.now=e,this.updateElementState(e,{inputType:n,data:null})}}function S(i){return"string"==typeof i}function p(i,e,n,t){let s="";for(let o=e.length;o<i.length;o++){const a=i[o],l=t?.value[o]===a;if(!S(a)||a===n&&!l)return s;s+=a}return s}function f(i,e){return Array.isArray(e)?i.length===e.length&&Array.from(i).every((n,t)=>{const s=e[t];return S(s)?n===s:n.match(s)}):e.test(i)}function v(i,e,n=null){if(f(i.value,e))return i;const{value:t,selection:s}=Array.isArray(e)?function d(i,e,n){let t=null,s=null;const o=Array.from(i.value).reduce((l,r,u)=>{const h=l+p(e,l,r,n),m=e[h.length];return S(m)?h+m:r.match(m)?(null===t&&u>=i.selection[0]&&(t=h.length),null===s&&u>=i.selection[1]&&(s=h.length),h+r):h},""),a=p(e,o,"",n);return{value:f(o+a,e)?o+a:o,selection:[t??o.length,s??o.length]}}(i,e,n):function k({value:i,selection:e},n){const[t,s]=e;let o=t,a=s;return{value:Array.from(i).reduce((r,u,c)=>{const h=r+u;return t===c&&(o=r.length),s===c&&(a=r.length),h.match(n)?h:r},""),selection:[o,a]}}(i,e);return{selection:s,value:Array.isArray(e)?t.slice(0,e.length):t}}function y(i,e){if(!Array.isArray(e))return i;const[n,t]=i.selection,s=[],o=Array.from(i.value).reduce((a,l,r)=>{const u=e[r];return r===n&&s.push(a.length),r===t&&s.push(a.length),S(u)&&u===l?a:a+l},"");return s.length<2&&s.push(...new Array(2-s.length).fill(o.length)),{value:o,selection:[s[0],s[1]]}}class A{constructor(e,n){this.initialElementState=e,this.maskOptions=n,this.value="",this.selection=[0,0];const{value:t,selection:s}=v(e,this.getMaskExpression(e));this.value=t,this.selection=s}addCharacters([e,n],t){const{value:s}=this,o=this.getMaskExpression({value:s.slice(0,e)+t+s.slice(n),selection:[e+t.length,e+t.length]}),a={value:s,selection:[e,n]},l=y(a,o),[r,u]=function I({value:i,selection:e},n,t){const[s,o]=e;return{value:i,selection:"replace"===("function"==typeof t?t({value:i,selection:e}):t)?[s,s+n.length]:[s,o]}}(l,t,this.maskOptions.overwriteMode).selection,c=l.value.slice(0,r)+t,h=c.length,m=v({value:c+l.value.slice(u),selection:[h,h]},o,a);if(s.slice(0,r)===v({value:c,selection:[h,h]},o,a).value||function D(i,...e){return e.every(({value:n,selection:t})=>n===i.value&&t[0]===i.selection[0]&&t[1]===i.selection[1])}(this,m))throw new Error("Invalid mask value");this.value=m.value,this.selection=m.selection}deleteCharacters([e,n]){if(e===n||!n)return;const{value:t}=this,s=this.getMaskExpression({value:t.slice(0,e)+t.slice(n),selection:[e,e]}),o={value:t,selection:[e,n]},a=y(o,s),[l,r]=a.selection,c=v({value:a.value.slice(0,l)+a.value.slice(r),selection:[l,l]},s,o);this.value=c.value,this.selection=c.selection}getMaskExpression(e){const{mask:n}=this.maskOptions;return"function"==typeof n?n(e):n}}class B{constructor(e){this.element=e,this.listeners=[]}listen(e,n,t){const s=n;this.element.addEventListener(e,s,t),this.listeners.push(()=>this.element.removeEventListener(e,s))}destroy(){this.listeners.forEach(e=>e())}}function _(i,e,n){return i.ctrlKey===!!(1&e)&&i.altKey===!!(2&e)&&i.shiftKey===!!(4&e)&&i.metaKey===!!(8&e)&&i.keyCode===n}function j({value:i,selection:e},n){const[t,s]=e;if(t!==s)return[t,s];const o=n?i.slice(t).indexOf("\n")+1||i.length:i.slice(0,s).lastIndexOf("\n")+1;return[n?t:o,n?o:s]}function x({value:i,selection:e},n){const[t,s]=e;return t!==s?[t,s]:(n?[t,s+1]:[t-1,s]).map(a=>Math.min(Math.max(a,0),i.length))}const F=/\s+$/g,L=/^\s+/g,b=/\s/;function W({value:i,selection:e},n){const[t,s]=e;if(t!==s)return[t,s];if(n){const r=i.slice(t),[u]=r.match(L)||[""],c=r.replace(L,"").search(b);return[t,-1!==c?t+u.length+c:i.length]}const o=i.slice(0,s),[a]=o.match(F)||[""],l=o.replace(F,"").split("").reverse().findIndex(r=>r.match(b));return[-1!==l?s-a.length-l:0,s]}function w(i=[]){return(e,...n)=>i.reduce((t,s)=>Object.assign(Object.assign({},t),s(t,...n)),e)}function P(i,e){const n=Object.assign(Object.assign({},E),e),t=w(n.preprocessors),s=w(n.postprocessors),o="string"==typeof i?{value:i,selection:[0,0]}:i,{elementState:a}=t({elementState:o,data:""},"validation"),l=new A(a,n),{value:r,selection:u}=s(l,o);return"string"==typeof i?r:{value:r,selection:u}}class G extends C{constructor(e,n){super(),this.element=e,this.maskitoOptions=n,this.isTextArea="TEXTAREA"===this.element.nodeName,this.eventListener=new B(this.element),this.options=Object.assign(Object.assign({},E),this.maskitoOptions),this.preprocessor=w(this.options.preprocessors),this.postprocessor=w(this.options.postprocessors),this.teardowns=this.options.plugins.map(t=>t(this.element,this.options)),this.ensureValueFitsMask(),this.updateHistory(this.elementState),this.eventListener.listen("keydown",t=>function H(i){return _(i,1,89)||_(i,5,90)||_(i,12,90)}(t)?(t.preventDefault(),this.redo()):function R(i){return _(i,1,90)||_(i,8,90)}(t)?(t.preventDefault(),this.undo()):void 0),function K(i){return"onbeforeinput"in i}(e)?this.eventListener.listen("beforeinput",t=>{const s=t.inputType.includes("Forward");switch(this.updateHistory(this.elementState),t.inputType){case"historyUndo":return t.preventDefault(),this.undo();case"historyRedo":return t.preventDefault(),this.redo();case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:t,isForward:s,selection:x(this.elementState,s)});case"deleteWordForward":case"deleteWordBackward":return this.handleDelete({event:t,isForward:s,selection:W(this.elementState,s),force:!0});case"deleteSoftLineBackward":case"deleteSoftLineForward":case"deleteHardLineBackward":case"deleteHardLineForward":return this.handleDelete({event:t,isForward:s,selection:j(this.elementState,s),force:!0});case"insertCompositionText":return;case"insertLineBreak":return this.handleEnter(t);default:return this.handleInsert(t,t.data||"")}}):(this.eventListener.listen("keydown",t=>this.handleKeydown(t)),this.eventListener.listen("paste",t=>{var s;return this.handleInsert(t,(null===(s=t.clipboardData)||void 0===s?void 0:s.getData("text/plain"))||"")})),this.eventListener.listen("input",({inputType:t})=>{"insertCompositionText"!==t&&(this.ensureValueFitsMask(),this.updateHistory(this.elementState))}),this.eventListener.listen("compositionend",()=>{this.ensureValueFitsMask(),this.updateHistory(this.elementState)})}get elementState(){const{value:e,selectionStart:n,selectionEnd:t}=this.element;return{value:e,selection:[n||0,t||0]}}get maxLength(){const{maxLength:e}=this.element;return-1===e?1/0:e}destroy(){this.eventListener.destroy(),this.teardowns.forEach(e=>e?.())}updateElementState({value:e,selection:n},t={inputType:"insertText",data:null}){const s=this.elementState.value;this.updateValue(e),this.updateSelectionRange(n),s!==e&&this.dispatchInputEvent(t)}updateSelectionRange([e,n]){var t,s;(this.element.selectionStart!==e||this.element.selectionEnd!==n)&&(null===(s=(t=this.element).setSelectionRange)||void 0===s||s.call(t,e,n))}updateValue(e){this.element.value=e}ensureValueFitsMask(){this.updateElementState(P(this.elementState,this.options))}dispatchInputEvent(e={inputType:"insertText",data:null}){const n=typeof window<"u"?window:globalThis;n?.InputEvent&&this.element.dispatchEvent(new InputEvent("input",Object.assign(Object.assign({},e),{bubbles:!0,cancelable:!1})))}handleKeydown(e){const n=e.key,t="Delete"===n;switch(n){case"Backspace":case"Delete":return this.handleDelete({event:e,isForward:t,selection:x(this.elementState,t)});case"Enter":return this.handleEnter(e)}(function U({key:i,ctrlKey:e,metaKey:n,altKey:t}){const s=e||n||t,o=/^.$/u.test(i);return!s&&"Backspace"!==i&&o})(e)&&this.handleInsert(e,n)}handleDelete({event:e,selection:n,isForward:t,force:s=!1}){const o={value:this.elementState.value,selection:n},[a,l]=o.selection,{elementState:r}=this.preprocessor({elementState:o,data:""},t?"deleteForward":"deleteBackward"),u=new A(r,this.options),[c,h]=r.selection;u.deleteCharacters([c,h]);const m=this.postprocessor(u,o);if(o.value.slice(0,a)+o.value.slice(l)!==m.value||s)return e.preventDefault(),function O(i,...e){return e.every(({value:n})=>n===i.value)}(o,r,u,m)?this.updateSelectionRange(t?[h,h]:[c,c]):(this.updateElementState(m,{inputType:"inputType"in e?e.inputType:t?"deleteContentForward":"deleteContentBackward",data:null}),void this.updateHistory(m))}handleInsert(e,n){const t=this.elementState,{elementState:s,data:o=n}=this.preprocessor({data:n,elementState:t},"insert"),a=new A(s,this.options);try{a.addCharacters(s.selection,o)}catch{return e.preventDefault()}const[l,r]=s.selection,u=s.value.slice(0,l)+n+s.value.slice(r),c=this.postprocessor(a,t);if(c.value.length>this.maxLength)return e.preventDefault();u!==c.value&&(e.preventDefault(),this.updateElementState(c,{data:n,inputType:"inputType"in e?e.inputType:"insertText"}),this.updateHistory(c))}handleEnter(e){this.isTextArea&&this.handleInsert(e,"\n")}}}}]);