"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[8336],{8336:(b,T,o)=>{o.r(T),o.d(T,{DuplicateCategoryModule:()=>k});var s=o(2992),$=o(7552),e=o(4496),y=o(1712),A=o(3480),n=o(6504),l=o(9852),O=o(3616),U=o(8824),L=o(1128),Y=o(5820),R=o(8256),v=o(9938),B=o(6524),z=o(9956),u=o(8976),d=o(8212),N=o(9880),c=o(1512),g=o(5704),S=o(8392),H=o(9088);let X=(()=>{class a{constructor(){this.destroy$=(0,e.uUt)(A.UF),this.router=(0,e.uUt)(s.E5),this.route=(0,e.uUt)(s.gV),this.service=(0,e.uUt)(y.S),this.notifications=(0,e.uUt)(L.E),this.submitted=!1,this.category=(0,e.OCB)(null),this.form=new n.WC({copy_dishes:new n.Ku("full",[n.AQ.required,l.S.in(["full","link","none"])]),copy_images:new n.Ku("full",[n.AQ.required,l.S.in(["full","link","none"])]),copy_children:new n.Ku("full",[n.AQ.required,l.S.in(["full","none"])]),create_as_root:new n.Ku(!1),parent:new n.Ku(null,[l.S.instanceof(Y.Q)])}),this.saving=(0,e.OCB)(!1),this.loading=(0,e.S6b)(()=>this.saving()),this.e=this.getErrorsFor}ngOnInit(){this.route.parent?.parent?.params.pipe((0,O.a)(this.destroy$)).subscribe({next:t=>{this.loadCategory(t.category_id)}})}submit(){if(this.submitted=!0,this.form.invalid)return;const t=this.category()?.id;if(!t)throw new Error(`Category id invalid: ${t}`);this.saving.set(!0),this.service.copy(t,this.formValue()).pipe((0,O.a)(this.destroy$),(0,U.U)(()=>this.saving.set(!1))).subscribe({next:i=>{this.notifications.fireSnackBar("Duplicate."),this.router.navigate(["../..",i.id],{relativeTo:this.route})},error:i=>{this.manageError(i)}})}cancel(){(this.form.touched||this.form.dirty)&&!confirm("Are you sure you want to undo the changes made?")||(this.notifications.fireSnackBar("Operation canceled"),this.navigateBack())}formValue(){return{copy_dishes:this.form.value.copy_dishes,copy_images:this.form.value.copy_images,copy_children:this.form.value.copy_children,parent_id:this.form.value.create_as_root?null:this.form.value.parent?.id??null}}navigateBack(){this.router.navigate([".."],{relativeTo:this.route})}manageError(t){422==t.status?v.y.assignErrorsToForm(this.form,t):this.notifications.error((0,R.mk)(t)||S.a)}getErrorsFor(t){const i=this.form.get(t);return i&&(this.submitted||i.touched||i.dirty)?i.errors:null}loadCategory(t){t&&this.service.show(t).pipe((0,O.a)(this.destroy$)).subscribe({next:i=>{this.category.set(i)},error:i=>{this.notifications.error((0,R.mk)(i)||S.a)}})}static#e=this.\u0275fac=function(i){return new(i||a)};static#o=this.\u0275cmp=e.In1({type:a,selectors:[["app-duplicate-category"]],standalone:!0,features:[e.M5G([A.UF]),e.UHJ],decls:67,vars:33,consts:()=>{let t,i,_,C,E,M,m,p,f,D,G,P,h,I;return t="Copy category",i="Create the new category as:",_="Main menu",C="Parent category of the new category:",E="Copy subcategories?",M="Copy",m="Copying dishes?",p="Copy",f="Associate existing",D="Copying images?",G="Copy",P="Associate existing",h="Confirm",I="Cancel",[[1,"flex","items-center"],t,[1,"ml-2"],["tuiLink","",3,"routerLink"],[3,"formGroup","ngSubmit"],[1,"mb-3"],i,["tuiGroup","",1,"group",3,"collapsed"],["contentAlign","right","size","l",3,"hideRadio","formControlName","item"],_,[3,"errors"],[3,"expanded"],[3,"formControlName"],C,E,["contentAlign","right","formControlName","copy_children","item","full","size","l",3,"hideRadio"],M,["contentAlign","right","formControlName","copy_children","item","none","size","l",3,"hideRadio"],m,["contentAlign","right","formControlName","copy_dishes","item","full","size","l",3,"hideRadio"],p,["contentAlign","right","formControlName","copy_dishes","item","link","size","l",3,"hideRadio"],f,["contentAlign","right","formControlName","copy_dishes","item","none","size","l",3,"hideRadio"],D,["contentAlign","right","formControlName","copy_images","item","full","size","l",3,"hideRadio"],G,["contentAlign","right","formControlName","copy_images","item","link","size","l",3,"hideRadio"],P,["contentAlign","right","formControlName","copy_images","item","none","size","l",3,"hideRadio"],["type","submit","size","l","tuiButton","",1,"me-2",3,"appearance"],h,["type","button","size","l","tuiButton","",1,"me-2",3,"appearance","click"],I]},template:function(i,_){if(1&i&&(e.I0R(0,"div",0)(1,"h1"),e.aS0(2,1),e.C$Y(),e.I0R(3,"span",2)(4,"a",3),e.wVc(5,"urlTo"),e.OEk(6),e.C$Y()()(),e.I0R(7,"form",4),e.qCj("ngSubmit",function(){return _.submit()}),e.I0R(8,"div",5)(9,"p"),e.aS0(10,6),e.C$Y(),e.I0R(11,"div",7)(12,"tui-radio-block",8),e.SAx(13),e.aS0(14,9),e.k70(),e.C$Y(),e.I0R(15,"tui-radio-block",8),e.OEk(16," Sotto-categoria "),e.C$Y()(),e.wR5(17,"app-errors",10),e.C$Y(),e.I0R(18,"tui-expand",11)(19,"div",5)(20,"app-menu-category-select",12),e.SAx(21),e.aS0(22,13),e.k70(),e.C$Y(),e.wR5(23,"app-errors",10),e.C$Y()(),e.I0R(24,"div",5)(25,"p"),e.aS0(26,14),e.C$Y(),e.I0R(27,"div",7)(28,"tui-radio-block",15),e.SAx(29),e.aS0(30,16),e.k70(),e.C$Y(),e.I0R(31,"tui-radio-block",17),e.OEk(32," No "),e.C$Y()(),e.wR5(33,"app-errors",10),e.C$Y(),e.I0R(34,"div",5)(35,"p"),e.aS0(36,18),e.C$Y(),e.I0R(37,"div",7)(38,"tui-radio-block",19),e.SAx(39),e.aS0(40,20),e.k70(),e.C$Y(),e.I0R(41,"tui-radio-block",21),e.SAx(42),e.aS0(43,22),e.k70(),e.C$Y(),e.I0R(44,"tui-radio-block",23),e.OEk(45," No "),e.C$Y()(),e.wR5(46,"app-errors",10),e.C$Y(),e.I0R(47,"div",5)(48,"p"),e.aS0(49,24),e.C$Y(),e.I0R(50,"div",7)(51,"tui-radio-block",25),e.SAx(52),e.aS0(53,26),e.k70(),e.C$Y(),e.I0R(54,"tui-radio-block",27),e.SAx(55),e.aS0(56,28),e.k70(),e.C$Y(),e.I0R(57,"tui-radio-block",29),e.OEk(58," No "),e.C$Y()(),e.wR5(59,"app-errors",10),e.C$Y(),e.I0R(60,"div",0)(61,"button",30),e.SAx(62),e.aS0(63,31),e.k70(),e.C$Y(),e.I0R(64,"button",32),e.qCj("click",function(){return _.cancel()}),e.SAx(65),e.aS0(66,33),e.k70(),e.C$Y()()()),2&i){let C,E;e.yG2(4),e.E7m("routerLink",e.g7$(5,30,null==(C=_.category())?null:C.id,"menuCategory.show")),e.yG2(2),e.cNF(null==(E=_.category())?null:E.name),e.yG2(),e.E7m("formGroup",_.form),e.yG2(4),e.E7m("collapsed",!0),e.yG2(),e.E7m("hideRadio",!0)("formControlName","create_as_root")("item",!0),e.yG2(3),e.E7m("hideRadio",!0)("formControlName","create_as_root")("item",!1),e.yG2(2),e.E7m("errors",_.e("create_as_root")),e.yG2(),e.E7m("expanded",!_.form.value.create_as_root),e.yG2(2),e.E7m("formControlName","parent"),e.yG2(3),e.E7m("errors",_.e("parent")),e.yG2(4),e.E7m("collapsed",!0),e.yG2(),e.E7m("hideRadio",!0),e.yG2(3),e.E7m("hideRadio",!0),e.yG2(2),e.E7m("errors",_.e("copy_children")),e.yG2(4),e.E7m("collapsed",!0),e.yG2(),e.E7m("hideRadio",!0),e.yG2(3),e.E7m("hideRadio",!0),e.yG2(3),e.E7m("hideRadio",!0),e.yG2(2),e.E7m("errors",_.e("copy_dishes")),e.yG2(4),e.E7m("collapsed",!0),e.yG2(),e.E7m("hideRadio",!0),e.yG2(3),e.E7m("hideRadio",!0),e.yG2(3),e.E7m("hideRadio",!0),e.yG2(2),e.E7m("errors",_.e("copy_images")),e.yG2(2),e.E7m("appearance","primary"),e.yG2(3),e.E7m("appearance","outline")}},dependencies:[n.sl,n.sz,n.ue,n.u,n.uW,n.Wo,B.a,z.g,u.Gy,u.Ko,g.W,g.I,d.CI,d.Kw,N.kh,N.st,c.w,c.C,s.ER,H.S],changeDetection:0})}return a})(),k=(()=>{class a{static#e=this.\u0275fac=function(i){return new(i||a)};static#o=this.\u0275mod=e.a4G({type:a});static#i=this.\u0275inj=e.s3X({imports:[s.qQ.forChild([(0,$.VV)(X,{path:"",closeable:!0,dismissible:!1,size:"l"})])]})}return a})()}}]);