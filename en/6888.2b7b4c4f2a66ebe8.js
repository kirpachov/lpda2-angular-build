"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[6888],{2876:(z,A,_)=>{_.r(A),_.d(A,{AdminReservationsHomeComponent:()=>bn});var t=_(4496),p=_(1368),r=_(6504),O=_(3797),m=_(3480),c=_(5e3),R=_(8212),s=_(1512),M=_(5656),v=_(7692),F=_(9880),C=_(1560),d=_(1236),G=_(5892),b=_(1128),y=_(3616),S=_(8824),h=_(8256),u=_(8304),f=_(7556),Y=_(580),E=_(2516),D=_(6096),I=_(6052),V=_(9604),k=_(8048),W=_(7936),X=_(4336),T=_(6732),L=_(1040);function g(e,a){1&e&&(t.SAx(0),t.aS0(1,10),t.k70())}function $(e,a){if(1&e&&(t.SAx(0),t.OEk(1),t.k70()),2&e){const n=a.polymorpheusOutlet;t.yG2(),t.oRS(" ",n," ")}}function P(e,a){if(1&e&&t.yuY(0,$,2,1,"ng-container",11),2&e){const n=t.GaO(2);t.E7m("polymorpheusOutlet",n.optionTemplate$())}}function B(e,a){1&e&&t.C_f(0)}const j=(e,a)=>({$implicit:e,injector:a});function Et(e,a){if(1&e&&t.yuY(0,B,1,0,"ng-container",12),2&e){const n=t.GaO().$implicit,o=t.GaO();t.E7m("polymorpheusOutlet",o.optionTemplate$())("polymorpheusOutletContext",t.IBC(2,j,n,o.injector))}}function dt(e,a){1&e&&t.C_f(0)}const it=e=>({data:e});function Tt(e,a){if(1&e&&t.yuY(0,dt,1,0,"ng-container",12),2&e){const n=t.GaO().$implicit,o=t.GaO();t.E7m("polymorpheusOutlet",o.optionTemplate$())("polymorpheusOutletContext",t.S45(2,it,n))}}function Ct(e,a){if(1&e&&t.wR5(0,"div",13),2&e){const n=t.GaO().$implicit,o=t.GaO();t.E7m("innerText",o.stringify(n))}}function St(e,a){if(1&e&&t.yuY(0,P,1,1)(1,Et,1,5)(2,Tt,1,4)(3,Ct,1,1),2&e){const n=t.GaO();let o;t.C0Y(0,"text"===(o=n.optionTemplateType$())?0:"template"===o?1:"component"===o?2:3)}}function Rt(e,a){if(1&e&&(t.SAx(0),t.OEk(1),t.k70()),2&e){const n=a.polymorpheusOutlet;t.yG2(),t.oRS(" ",n," ")}}function gt(e,a){if(1&e&&t.yuY(0,Rt,2,1,"ng-container",11),2&e){const n=t.GaO(2);t.E7m("polymorpheusOutlet",n.nativeOptionTemplate$())}}function Ot(e,a){1&e&&t.C_f(0)}function ft(e,a){if(1&e&&t.yuY(0,Ot,1,0,"ng-container",12),2&e){const n=t.GaO().$implicit,o=t.GaO();t.E7m("polymorpheusOutlet",o.nativeOptionTemplate$())("polymorpheusOutletContext",t.IBC(2,j,n,o.injector))}}function Nt(e,a){1&e&&t.C_f(0)}function Mt(e,a){if(1&e&&t.yuY(0,Nt,1,0,"ng-container",12),2&e){const n=t.GaO().$implicit,o=t.GaO();t.E7m("polymorpheusOutlet",o.nativeOptionTemplate$())("polymorpheusOutletContext",t.S45(2,it,n))}}function It(e,a){if(1&e&&t.wR5(0,"div",13),2&e){const n=t.GaO().$implicit,o=t.GaO();t.E7m("innerText",o.stringify(n))}}function ht(e,a){if(1&e&&t.yuY(0,gt,1,1)(1,ft,1,5)(2,Mt,1,4)(3,It,1,1),2&e){const n=t.GaO();let o;t.C0Y(0,"text"===(o=n.nativeOptionTemplateType$())?0:"template"===o?1:"component"===o?2:3)}}function At(e,a){if(1&e&&(t.SAx(0),t.OEk(1),t.k70()),2&e){const n=t.GaO(2);t.yG2(),t.oRS(" ",n.placeholder," ")}}function vt(e,a){if(1&e&&(t.I0R(0,"span",null,14),t._Xx(2),t.C$Y(),t.yuY(3,At,2,1,"ng-container",15)),2&e){const n=t.Gew(1);t.yG2(3),t.E7m("ngIf",!n.hasChildNodes())}}function yt(e,a){1&e&&(t.SAx(0),t.aS0(1,19),t.k70())}function Pt(e,a){if(1&e&&(t.I0R(0,"span"),t.OEk(1),t.C$Y()),2&e){const n=t.GaO(2);t.yG2(),t.cNF(n.emptyContentString())}}function $t(e,a){1&e&&t.C_f(0)}function xt(e,a){if(1&e&&(t.SAx(0),t.yuY(1,$t,1,0,"ng-container",8),t.k70()),2&e){const n=t.GaO(4);t.yG2(),t.E7m("ngTemplateOutlet",n.emptyContentTemplate())}}function Gt(e,a){if(1&e&&(t.SAx(0),t.yuY(1,xt,2,1,"ng-container",20),t.k70()),2&e){t.GaO(2);const n=t.Gew(6),o=t.GaO();t.yG2(),t.E7m("ngIf",o.emptyContentTemplate())("ngIfElse",n)}}function Lt(e,a){if(1&e&&(t.SAx(0),t.yuY(1,Gt,2,2,"ng-container",20),t.k70()),2&e){t.GaO();const n=t.Gew(4),o=t.GaO();t.yG2(),t.E7m("ngIf",o.emptyContent$())("ngIfElse",n)}}function Dt(e,a){if(1&e&&(t.I0R(0,"span",null,16),t._Xx(2,1),t.C$Y(),t.yuY(3,yt,2,0,"ng-template",null,17,t.gJz)(5,Pt,2,1,"ng-template",null,18,t.gJz)(7,Lt,2,2,"ng-container",15)),2&e){const n=t.Gew(1);t.yG2(7),t.E7m("ngIf",!n.hasChildNodes())}}function Yt(e,a){1&e&&t.wR5(0,"tui-loader")}function Vt(e,a){1&e&&t.C_f(0)}function bt(e,a){if(1&e&&t.yuY(0,Vt,1,0,"ng-container",8),2&e){t.GaO(2);const n=t.Gew(9);t.E7m("ngTemplateOutlet",n)}}function kt(e,a){1&e&&t.C_f(0)}function wt(e,a){if(1&e&&(t.SAx(0),t.yuY(1,kt,1,0,"ng-container",8),t.k70()),2&e){t.GaO(2);const n=t.Gew(11);t.yG2(),t.E7m("ngTemplateOutlet",n)}}function zt(e,a){if(1&e&&t.yuY(0,bt,1,1,"ng-template",null,21,t.gJz)(2,wt,2,1,"ng-container",20),2&e){const n=t.Gew(1),o=t.GaO();t.yG2(2),t.E7m("ngIf",o.loading())("ngIfElse",n)}}function Ft(e,a){1&e&&t.C_f(0)}function Ut(e,a){1&e&&t.C_f(0)}function Ht(e,a){1&e&&t.C_f(0)}function Xt(e,a){if(1&e&&(t.SAx(0),t.yuY(1,Ht,1,0,"ng-container",8),t.k70()),2&e){t.GaO(4);const n=t.Gew(11);t.yG2(),t.E7m("ngTemplateOutlet",n)}}function Bt(e,a){1&e&&t.C_f(0)}function Kt(e,a){if(1&e){const n=t.KQA();t.I0R(0,"button",28)(1,"span",29),t.qCj("click",function(){t.usT(n);const i=t.GaO(4);return t.CGJ(i.loadMoreItems())}),t.yuY(2,Bt,1,0,"ng-container",20),t.C$Y()()}if(2&e){const n=t.GaO(4),o=t.Gew(1);t.E7m("size",n.optionSize)("disabled",!0),t.yG2(2),t.E7m("ngIf",n.loadMore)("ngIfElse",o)}}function Jt(e,a){if(1&e&&(t.SAx(0),t.yuY(1,Xt,2,1,"ng-container",15)(2,Kt,3,4,"button",27),t.k70()),2&e){const n=t.GaO(3);t.yG2(),t.E7m("ngIf",n.loading),t.yG2(),t.E7m("ngIf",!n.loading)}}const Wt=e=>({$implicit:e});function jt(e,a){if(1&e){const n=t.KQA();t.SAx(0),t.I0R(1,"button",25),t.qCj("mouseenter",function(){const i=t.usT(n),l=i.index,N=i.last,x=t.GaO(2);return t.CGJ(x.optionMouseEnter(l,N))})("focus",function(){const i=t.usT(n),l=i.index,N=i.last,x=t.GaO(2);return t.CGJ(x.optionFocus(l,N))}),t.yuY(2,Ut,1,0,"ng-container",26),t.C$Y(),t.yuY(3,Jt,3,2,"ng-container",15),t.k70()}if(2&e){const n=a.$implicit,o=a.last,i=t.GaO(2),l=t.Gew(5);t.yG2(),t.E7m("size",i.optionSize)("value",n)("disabled",i.disabledItemHandler(n)),t.yG2(),t.E7m("ngTemplateOutlet",l)("ngTemplateOutletContext",t.S45(6,Wt,n)),t.yG2(),t.E7m("ngIf",o&&i.thereAreMoreItems)}}function Qt(e,a){if(1&e){const n=t.KQA();t.I0R(0,"span",33),t.qCj("click",function(){t.usT(n);const i=t.GaO(3);return t.CGJ(i.createNew.emit())}),t.I0R(1,"mat-icon"),t.OEk(2,"add"),t.C$Y(),t.I0R(3,"span"),t.aS0(4,34),t.C$Y()()}}function Zt(e,a){if(1&e&&(t.I0R(0,"button",30)(1,"span",null,31),t._Xx(3,2),t.C$Y(),t.yuY(4,Qt,5,0,"span",32),t.C$Y()),2&e){const n=t.Gew(2),o=t.GaO(2);t.E7m("size",o.optionSize)("value",null)("disabled",!0),t.yG2(4),t.E7m("ngIf",!n.hasChildNodes())}}function qt(e,a){if(1&e&&(t.I0R(0,"tui-data-list",22),t.yuY(1,jt,4,8,"ng-container",23)(2,Zt,5,4,"button",24),t.C$Y()),2&e){const n=t.GaO(),o=t.Gew(13);t.E7m("emptyContent",o),t.yG2(),t.E7m("ngForOf",n.items()),t.yG2(),t.E7m("ngIf",n.showCreateNew)}}const te=["*",[["","empty-content",""]],[["","create-new",""]]],ee=["*","[empty-content]","[create-new]"];let _t=(()=>{class e extends Y.m{constructor(){super(),this.weekday=(0,t.uUt)(E.G),this.stringify=n=>`${n.name} (${n.starts_at} - ${n.ends_at}, ${this.weekday.transform(n.weekday)})`,this.service=(0,t.uUt)(f.K)}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.In1({type:e,selectors:[["app-reservation-turn-select"]],inputs:{outputType:"outputType",multiple:"multiple",service:"service",stringify:"stringify",query:"query",autofocus:"autofocus",placeholder:"placeholder",optionTemplate:"optionTemplate",stringifyOption:"stringifyOption",inputSize:"inputSize",page:"page",per_page:"per_page",optionSize:"optionSize",disabledItemHandler:"disabledItemHandler",loadMoreOnLastItem:"loadMoreOnLastItem",emptyContent:"emptyContent",showCreateNew:"showCreateNew",nativeOptionTemplate:"nativeOptionTemplate",filters:"filters",showCleaner:"showCleaner"},outputs:{httpError:"httpError",pageChange:"pageChange",queryChange:"queryChange",per_pageChange:"per_pageChange",createNew:"createNew"},standalone:!0,features:[t.M5G([{provide:r.Y6,useExisting:(0,t.wd)(()=>e),multi:!0},m.UF,E.G]),t.eg9,t.UHJ],ngContentSelectors:ee,decls:17,vars:6,consts:()=>{let n,o,i;return n="Load more",o="We found nothing.",i="Create new",[["loadMoreDefault",""],["valueContent",""],["nativeOptionTemplate",""],["placeholderTemplate",""],["nativeEmptyContentTemplate",""],["loadingTemplate",""],["loadingOrEmptyContent",""],[3,"tuiTextfieldCleaner","stringify","tuiTextfieldSize","formControl","valueContent","searchChange"],[4,"ngTemplateOutlet"],[3,"emptyContent",4,"tuiDataList"],n,[4,"polymorpheusOutlet"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],[3,"innerText"],["customContent",""],[4,"ngIf"],["customEmptyContent",""],["defaultEmptyContent",""],["emptyContentCustomString",""],o,[4,"ngIf","ngIfElse"],["empty",""],[3,"emptyContent"],[4,"ngFor","ngForOf"],["tuiOption","",3,"size","value","disabled",4,"ngIf"],["tuiOption","",3,"size","value","disabled","mouseenter","focus"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tuiOption","",3,"size","disabled",4,"ngIf"],["tuiOption","",3,"size","disabled"],["role","button",3,"click"],["tuiOption","",3,"size","value","disabled"],["createNewCustomTemplate",""],["role","button","class","d-flex align-items-center",3,"click",4,"ngIf"],["role","button",1,"d-flex","align-items-center",3,"click"],i]},template:function(o,i){if(1&o&&(t.kPM(te),t.yuY(0,g,2,0,"ng-template",null,0,t.gJz)(2,St,4,1,"ng-template",null,1,t.gJz)(4,ht,4,1,"ng-template",null,2,t.gJz)(6,vt,4,1,"ng-template",null,3,t.gJz)(8,Dt,8,1,"ng-template",null,4,t.gJz)(10,Yt,1,0,"ng-template",null,5,t.gJz)(12,zt,3,2,"ng-template",null,6,t.gJz),t.I0R(14,"tui-combo-box",7),t.qCj("searchChange",function(N){return i.onSearchChange(N)}),t.yuY(15,Ft,1,0,"ng-container",8)(16,qt,3,3,"tui-data-list",9),t.C$Y()),2&o){const l=t.Gew(3),N=t.Gew(7);t.yG2(14),t.E7m("tuiTextfieldCleaner",i.showCleaner)("stringify",i.stringify)("tuiTextfieldSize",i.inputSize)("formControl",i.control)("valueContent",l),t.yG2(),t.E7m("ngTemplateOutlet",N)}},dependencies:[p.MD,p.ay,p.u_,p.XV,D.uk,D.i_,D.qI,k.aS,k.es,k.rD,W.KA,O.CQ,X.A$,X.yi,X.sP,X.Ux,I.q8,r.sl,r.ue,r.ug,T.kR,V.CA,v.Sk,v.Cb,L.Ux,L.Af,C.oB,C.qL],changeDetection:0})}return e})();var at=_(8016),Z=_(466),ne=_(3264),Q=_(400),tt=_(4e3),et=_(6684),oe=_(4704),nt=_(6380);const ie=["*"];let _e=(()=>{class e{constructor(){this.destroy$=(0,t.uUt)(m.UF),this.control=new r.Ku(null),this.inputSize="m",this.valueChanges$=this.control.valueChanges.pipe((0,y.a)(this.destroy$),(0,tt.a)(),(0,et.I)(()=>this.control.valid),(0,oe.k)(n=>n?n.toLocalNativeDate():null)),this.today=Q.EK.currentLocal()}ngOnInit(){}registerOnChange(n){this.valueChanges$.subscribe(n)}registerOnTouched(n){this.valueChanges$.subscribe(n)}setDisabledState(n){n?this.control.disable():this.control.enable()}writeValue(n){this.control.patchValue(this.formatToTuiDay(n))}prevDay(){this.control.value instanceof Q.EK?this.control.setValue(this.control.value.append({day:-1})):console.warn("control value invalid",this.control.value)}nextDay(){this.control.value instanceof Q.EK?this.control.setValue(this.control.value.append({day:1})):console.warn("control value invalid",this.control.value)}formatToTuiDay(n){return null===n||n instanceof Q.EK?n:n instanceof Date?Q.EK.fromLocalNativeDate(n):"string"==typeof n?Q.EK.fromLocalNativeDate(new Date(n)):(console.warn("Invalid value for reservation date select:",n),null)}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.In1({type:e,selectors:[["app-reservation-date-select"]],inputs:{inputSize:"inputSize"},standalone:!0,features:[t.M5G([{provide:r.Y6,useExisting:(0,t.wd)(()=>e),multi:!0},m.UF]),t.UHJ],ngContentSelectors:ie,decls:9,vars:4,consts:[[1,"flex","items-center"],["tuiIconButton","","type","button","size","m","appearance","icon",1,"!border","!border-solid","!rounded-full","!border-slate-400",3,"click"],[1,"mx-2","grow",3,"tuiAutoFocus","tuiTextfieldSize","min","formControl"]],template:function(o,i){1&o&&(t.kPM(),t.I0R(0,"div",0)(1,"button",1),t.qCj("click",function(){return i.prevDay()}),t.I0R(2,"mat-icon"),t.OEk(3,"arrow_back"),t.C$Y()(),t.I0R(4,"tui-input-date",2),t._Xx(5),t.C$Y(),t.I0R(6,"button",1),t.qCj("click",function(){return i.nextDay()}),t.I0R(7,"mat-icon"),t.OEk(8,"arrow_forward"),t.C$Y()()()),2&o&&(t.yG2(4),t.E7m("tuiAutoFocus",!0)("tuiTextfieldSize",i.inputSize)("min",i.today)("formControl",i.control))},dependencies:[R.CI,R.Kw,C.qL,nt.iO,nt.yc,nt.Ml,c.m6,c.gJ,k.aS,k.rD,r.sl,r.ue,r.ug],styles:["[_nghost-%COMP%]{display:block;min-width:250px}"],changeDetection:0})}return e})();var ae=_(5136),se=_(2300),st=_(9772),re=_(4592),rt=_(9368);const le=["*"];let ce=(()=>{class e{constructor(){this.removeClick=new t._w7}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.In1({type:e,selectors:[["app-chip"]],outputs:{removeClick:"removeClick"},standalone:!0,features:[t.UHJ],ngContentSelectors:le,decls:6,vars:0,consts:[[1,"rounded","border","py-2","px-3","border-slate-200","flex","items-center"],["size","s","tuiIconButton","","type","button","appearance","custom",1,"!flex","ms-1",3,"click"]],template:function(o,i){1&o&&(t.kPM(),t.I0R(0,"div",0)(1,"span"),t._Xx(2),t.C$Y(),t.I0R(3,"button",1),t.qCj("click",function(){return i.removeClick.emit()}),t.I0R(4,"mat-icon"),t.OEk(5,"close"),t.C$Y()()())},dependencies:[C.oB,C.qL],styles:["[_nghost-%COMP%]{display:inline-block}"]})}return e})();function ue(e,a){if(1&e){const n=t.KQA();t.I0R(0,"form",17),t.qCj("ngSubmit",function(){t.usT(n);const i=t.GaO();return t.CGJ(i.closeFiltersModal())}),t.I0R(1,"div",18)(2,"div",14)(3,"tui-input",19),t.SAx(4),t.aS0(5,20),t.k70(),t.wR5(6,"input",21),t.C$Y()()(),t.I0R(7,"div",18)(8,"app-reservation-status-select",22),t.SAx(9),t.aS0(10,23),t.k70(),t.C$Y()(),t.I0R(11,"button",24),t.SAx(12),t.aS0(13,25),t.k70(),t.C$Y()()}if(2&e){const n=t.GaO();t.E7m("formGroup",n.hiddenFormGroup),t.yG2(3),t.E7m("tuiTextfieldSize","l")("tuiAutoFocus",!0)("formControl",n.query),t.yG2(5),t.E7m("showCleaner",!0)("inputSize","l")("formControl",n.status)}}function pe(e,a){if(1&e){const n=t.KQA();t.I0R(0,"app-chip",26),t.qCj("removeClick",function(){t.usT(n);const i=t.GaO();return t.CGJ(i.status.patchValue(null))}),t.SAx(1),t.aS0(2,27),t.k70(),t.OEk(3,": "),t.wR5(4,"app-reservation-status",28),t.C$Y()}if(2&e){const n=t.GaO();t.yG2(4),t.E7m("status",n.status.value)}}function me(e,a){if(1&e){const n=t.KQA();t.I0R(0,"app-chip",26),t.qCj("removeClick",function(){t.usT(n);const i=t.GaO();return t.CGJ(i.query.patchValue(null))}),t.SAx(1),t.aS0(2,29),t.k70(),t.OEk(3),t.C$Y()}if(2&e){const n=t.GaO();t.yG2(3),t.oRS(": ",n.query.value," ")}}const lt=e=>({date:e});function Ee(e,a){if(1&e&&t.wR5(0,"app-reservation-tables-summary",16),2&e){const n=t.GaO();let o;t.E7m("showLoader",!1)("filters",t.S45(2,lt,null!==(o=n.dateStr())&&void 0!==o?o:""))}}const de=()=>[10,20,50,100],Te=["*"];let Ce=(()=>{class e{constructor(){this.dialogs=(0,t.uUt)(at._k),this.loading=!1,this.data=null,this.filtersChanged=new t._w7,this.destroy$=(0,t.uUt)(m.UF),this.datePipe=(0,t.uUt)(p.y),this.query=new r.Ku(null),this.turn=new r.Ku(null),this.date=new r.Ku(new Date),this.status=new r.Ku("active"),this.hiddenFormGroup=new r.WC({query:this.query,status:this.status}),this.dateStr=(0,t.OCB)(this.formatDate(this.date.value)),this.offset=0,this.per_page=10,this.lastFilters={}}ngOnInit(){this.date.valueChanges.pipe((0,y.a)(this.destroy$)).subscribe({next:n=>{this.turn.setValue(null),n?this.turn.disabled&&this.turn.enable():this.turn.disable(),this.dateStr.set(this.formatDate(n))},error:n=>console.error(n)}),[this.date,this.turn,this.status].map(n=>{n.valueChanges.pipe((0,y.a)(this.destroy$),(0,tt.a)(),(0,et.I)(()=>n.valid)).subscribe({next:()=>{this.offset=0,this.filtersMayHaveChanged()}})}),[this.query].map(n=>{n.valueChanges.pipe((0,y.a)(this.destroy$),(0,tt.a)(),(0,se.o)(500),(0,et.I)(()=>n.valid)).subscribe({next:()=>{this.offset=0,this.filtersMayHaveChanged()}})})}ngAfterViewInit(){this.emitCurrentFilters()}submit(){this.emitCurrentFilters()}mergeFilters(n){}setFilters(n){}currentFilters(){const n={};if("string"==typeof this.query.value&&this.query.valid&&this.query.value.length>0&&(n.query=this.query.value),this.date.value instanceof Date&&this.date.valid){const o=this.datePipe.transform(this.date.value,"YYYY-MM-dd"),i=this.turn.value;this.turn.valid&&i instanceof ae.e&&i.starts_at&&i.ends_at?(n.datetime_from=`${o} ${(0,st.ye)(i.starts_at)}`,n.datetime_to=`${o} ${(0,st.ye)(i.ends_at)}`):o&&(n.date=o)}return"string"==typeof this.status.value&&this.status.valid&&(n.status=this.status.value),n}paginationChange(n){this.offset=n.page,this.per_page=n.size,this.filtersMayHaveChanged()}fireModal(n){this.filtersSub?.unsubscribe(),this.filtersSub=this.dialogs.open(n).subscribe()}closeFiltersModal(){this.filtersSub?.unsubscribe()}filtersMayHaveChanged(){const n=this.currentFilters(),o=JSON.stringify(n)!==JSON.stringify(this.lastFilters);return o&&(this.lastFilters=n,this.emitCurrentFilters()),o}formatDate(n){return n instanceof Date?this.datePipe.transform(n,"YYYY-MM-dd"):null}emitCurrentFilters(){this.filtersChanged.emit(this.currentFilters())}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.In1({type:e,selectors:[["app-list-reservations-filters"]],inputs:{loading:"loading",data:"data"},outputs:{filtersChanged:"filtersChanged"},standalone:!0,features:[t.M5G([m.UF]),t.UHJ],ngContentSelectors:Te,decls:28,vars:15,consts:()=>{let n,o,i,l,N,x,K,J;return n="Data",o="Shift",i="Export reservations",l="Filter bookings",N="State",x="Close",K="State",J="Search for",[["additionalFiltersTemplate",""],[1,"flex","flex-wrap","items-center"],[1,"col-12","md:col-6"],[3,"inputSize","formControl"],n,[1,"col-11","md:col-5","px-1"],[1,"mx-2",2,"min-width","150px",3,"showCleaner","filters","inputSize","formControl"],o,[1,"col-1"],["type","button","tuiIconButton","","appearance","flat",3,"showLoader","click"],[1,"col-12"],[1,"my-2",3,"items","total","paginationChange"],[1,"flex","items-center","mb-2"],["routerLink","export","tuiLink",""],[1,"flex","items-center"],i,[3,"showLoader","filters"],[3,"formGroup","ngSubmit"],[1,"block","mb-3"],[1,"grow","me-2",3,"tuiTextfieldSize","tuiAutoFocus","formControl"],l,["tuiTextfield",""],[3,"showCleaner","inputSize","formControl"],N,["tuiButton","","appearance","primary","type","submit"],x,[3,"removeClick"],K,[3,"status"],J]},template:function(o,i){if(1&o){const l=t.KQA();t.kPM(),t.yuY(0,ue,14,7,"ng-template",null,0,t.gJz),t.I0R(2,"div",1)(3,"div",2)(4,"app-reservation-date-select",3),t.SAx(5),t.aS0(6,4),t.k70(),t.C$Y()(),t.I0R(7,"div",5)(8,"app-reservation-turn-select",6),t.SAx(9),t.aS0(10,7),t.k70(),t.C$Y()(),t.I0R(11,"div",8)(12,"button",9),t.qCj("click",function(){t.usT(l);const x=t.Gew(1);return t.CGJ(i.fireModal(x))}),t.I0R(13,"mat-icon"),t.OEk(14,"filter_alt"),t.C$Y()()(),t.I0R(15,"div",10),t.yuY(16,pe,5,1,"app-chip")(17,me,4,1,"app-chip"),t.C$Y()(),t._Xx(18),t.I0R(19,"tui-table-pagination",11),t.qCj("paginationChange",function(x){return i.paginationChange(x)}),t.C$Y(),t.I0R(20,"div",12)(21,"a",13)(22,"span",14)(23,"mat-icon"),t.OEk(24,"download_file"),t.C$Y(),t.SAx(25),t.aS0(26,15),t.k70(),t.C$Y()()(),t.yuY(27,Ee,1,4,"app-reservation-tables-summary",16)}if(2&o){let l;t.yG2(4),t.E7m("inputSize","m")("formControl",i.date),t.yG2(4),t.E7m("showCleaner",!0)("filters",t.S45(12,lt,i.dateStr()))("inputSize","m")("formControl",i.turn),t.yG2(4),t.E7m("showLoader",i.loading),t.yG2(4),t.C0Y(16,i.status.value?16:-1),t.yG2(),t.C0Y(17,i.query.value?17:-1),t.yG2(2),t.E7m("items",t.q4q(14,de))("total",null!==(l=null==i.data||null==i.data.metadata?null:i.data.metadata.total_count)&&void 0!==l?l:0),t.yG2(8),t.C0Y(27,i.dateStr()?27:-1)}},dependencies:[R.CI,R.Kw,C.qL,O.CQ,O.Oo,O.cP,W.b,c.m6,c.gJ,s.w,s.C,d.ER,ne.Y,_t,_e,G.yy,G.Ws,r.sl,r.sz,r.ue,r.u,r.ug,r.uW,re.u,Z.GE,k.aS,k.rD,rt.a,ce],encapsulation:2,changeDetection:0})}return e})(),Se=(()=>{class e{constructor(){this.human={email_open:"Open email"}}transform(n){return null==n?null:this.human[n]??null}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275pipe=t.UTH({name:"humanizeEventType",type:e,pure:!0,standalone:!0})}return e})();function Re(e,a){1&e&&(t.SAx(0),t.aS0(1,3),t.k70())}const ge=(e,a)=>({"text-blue-500":e,"text-slate-500":a}),Oe=e=>({rotate180:e});function fe(e,a){if(1&e&&(t.I0R(0,"tui-hosted-dropdown",1,4)(2,"button",5)(3,"span",6)(4,"span",7),t.OEk(5),t.C$Y(),t.I0R(6,"mat-icon",8),t.OEk(7,"mail"),t.C$Y(),t.I0R(8,"mat-icon",9),t.OEk(9,"expand_more"),t.C$Y()()()()),2&e){const n=t.Gew(1),o=t.GaO(),i=t.Gew(4);t.E7m("content",i),t.yG2(5),t.cNF(o.emails().length),t.yG2(),t.E7m("ngClass",t.IBC(4,ge,o.emailOpenAtLeastOnce(),!o.emailOpenAtLeastOnce())),t.yG2(2),t.E7m("ngClass",t.S45(7,Oe,n.open))}}const ot=(e,a)=>a.id;function Ne(e,a){if(1&e&&(t.I0R(0,"span",19),t.OEk(1),t.wVc(2,"json"),t.C$Y()),2&e){const n=t.GaO().$implicit;t.yG2(),t.cNF(t.kDX(2,1,n.event_data))}}function Me(e,a){if(1&e&&(t.I0R(0,"li")(1,"span",6)(2,"span",7),t.OEk(3),t.wVc(4,"humanizeEventType"),t.C$Y(),t.I0R(5,"span",7),t.OEk(6),t.wVc(7,"date"),t.C$Y(),t.yuY(8,Ne,3,3,"span",18),t.C$Y()()),2&e){const n=a.$implicit,o=t.GaO().$implicit;t.yG2(3),t.cNF(t.kDX(4,3,o.event_type)),t.yG2(3),t.cNF(t.g7$(7,5,n.event_time,"EEEE d MMMM y, H:m")),t.yG2(2),t.C0Y(8,n.event_data?8:-1)}}function Ie(e,a){1&e&&t.c53(0,Me,9,8,"li",null,ot),2&e&&t.oho(a.$implicit.events)}function he(e,a){if(1&e&&(t.I0R(0,"div",14)(1,"div",15)(2,"span",16),t.OEk(3),t.C$Y(),t.I0R(4,"b",7),t.aS0(5,17),t.C$Y(),t.I0R(6,"span"),t.OEk(7),t.wVc(8,"date"),t.C$Y()()(),t.I0R(9,"ul"),t.c53(10,Ie,2,0,null,null,ot),t.C$Y()),2&e){const n=a.$implicit;t.yG2(3),t.oRS("#",n.id,""),t.yG2(4),t.cNF(t.g7$(8,2,n.created_at,"EEEE d MMMM y, H:m")),t.yG2(3),t.oho(n.image_pixels)}}function Ae(e,a){1&e&&(t.SAx(0),t.aS0(1,20),t.k70())}function ve(e,a){1&e&&(t.SAx(0),t.aS0(1,21),t.k70())}function ye(e,a){if(1&e){const n=t.KQA();t.I0R(0,"div",11),t.c53(1,he,12,5,null,null,ot),t.I0R(3,"button",12),t.qCj("click",function(){t.usT(n);const i=t.GaO(2);return t.CGJ(i.resendEmail())}),t.I0R(4,"span",6)(5,"span",13),t.yuY(6,Ae,2,0,"ng-container")(7,ve,2,0),t.C$Y(),t.I0R(8,"mat-icon"),t.OEk(9,"send"),t.C$Y()()()()}if(2&e){const n=t.GaO(2);t.yG2(),t.oho(n.emails()),t.yG2(2),t.E7m("showLoader",n.loading())("appearance","outline")("disabled",!(n.reservation.email&&n.reservation.email.length>0)),t.yG2(3),t.C0Y(6,n.emails().length>0?6:7)}}function Pe(e,a){if(1&e&&t.yuY(0,ye,10,4,"div",10),2&e){const n=t.GaO();t.C0Y(0,n.reservation?0:-1)}}let $e=(()=>{class e{constructor(){this.service=(0,t.uUt)(u.S),this.notifications=(0,t.uUt)(b.E),this.destroy$=(0,t.uUt)(m.UF),this.emails=(0,t.OCB)([]),this.loading=(0,t.OCB)(!1),this.emailOpenAtLeastOnce=(0,t.S6b)(()=>{const n=this.emails();let o=!1;return n.forEach(i=>{i.image_pixels?.forEach(l=>{"email_open"===l.event_type&&l.events&&l.events.length>0&&(o=!0)})}),o})}resendEmail(){const n=this.reservation?.id;n&&(this.loading.set(!0),this.service.deliverConfirmationEmail(n).pipe((0,y.a)(this.destroy$),(0,S.U)(()=>this.loading.set(!1))).subscribe({next:o=>{this.notifications.fireSnackBar("Email sent"),this.setEmailsByReservation(o)},error:o=>{this.notifications.error((0,h.mk)(o)??"Something went wrong. Please try again later.")}}))}ngOnChanges(n){n.reservation&&this.setEmailsByReservation(n.reservation.currentValue)}setEmailsByReservation(n){this.emails.set(n?.delivered_emails??[])}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.In1({type:e,selectors:[["app-reservation-events"]],inputs:{reservation:"reservation"},standalone:!0,features:[t.SYr,t.UHJ],decls:5,vars:1,consts:()=>{let n,o,i,l;return n="Send booking confirmation.",o="Email sent",i="Resend confirmation email.",l="Send confirmation email.",[["resendHint",""],[3,"content"],["allEvents",""],n,["dropdown",""],["tuiButton","","appearance","custom","size","s","type","button"],[1,"flex","items-center"],[1,"me-1"],[1,"text-slate-500",3,"ngClass"],[1,"text-slate-500","animation-speed-2",3,"ngClass"],["class","p-3"],[1,"p-3"],["type","button","tuiButton","","size","s",3,"showLoader","appearance","disabled","click"],[1,"me-2"],[1,"flex","flex-col"],[1,"flex"],[1,"text-slate-400","me-1"],o,["class","text-slate-400"],[1,"text-slate-400"],i,l]},template:function(o,i){1&o&&t.yuY(0,Re,2,0,"ng-template",null,0,t.gJz)(2,fe,10,9,"tui-hosted-dropdown",1)(3,Pe,1,1,"ng-template",null,2,t.gJz),2&o&&(t.yG2(2),t.C0Y(2,i.reservation?2:-1))},dependencies:[R.CI,R.Kw,C.qL,M.WY,Z.GE,Z.Qw,p.y,p.ED,Se,p.QF],encapsulation:2})}return e})();const xe=["phoneTo",""];function Ge(e,a){1&e&&(t.I0R(0,"mat-icon",3),t.OEk(1,"chat"),t.C$Y())}function Le(e,a){1&e&&(t.I0R(0,"mat-icon",3),t.OEk(1,"call"),t.C$Y())}const De=["*"];let Ye=(()=>{class e{constructor(){this.whatsapp=!1}ngOnChanges(){this.href=this.whatsapp?`https://wa.me/${this.phoneTo}`:`tel:${this.phoneTo}`}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.In1({type:e,selectors:[["","phoneTo",""]],inputs:{phoneTo:"phoneTo",whatsapp:"whatsapp"},standalone:!0,features:[t.SYr,t.UHJ],attrs:xe,ngContentSelectors:De,decls:5,vars:2,consts:[["target","_blank","tuiLink","",3,"href"],[1,"flex","items-center"],["class","ms-1"],[1,"ms-1"]],template:function(o,i){1&o&&(t.kPM(),t.I0R(0,"a",0)(1,"span",1),t._Xx(2),t.yuY(3,Ge,2,0,"mat-icon",2)(4,Le,2,0),t.C$Y()()),2&o&&(t._6D("href",i.href,t.K6U),t.yG2(3),t.C0Y(3,i.whatsapp?3:4))},dependencies:[s.w,s.C,C.qL],changeDetection:0})}return e})();const Ve=["mailTo",""],be=["*"];let ke=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.In1({type:e,selectors:[["","mailTo",""]],inputs:{mailTo:"mailTo"},standalone:!0,features:[t.UHJ],attrs:Ve,ngContentSelectors:be,decls:3,vars:1,consts:[["target","_blank","tuiLink","",3,"href"],[1,"flex","items-center"]],template:function(o,i){1&o&&(t.kPM(),t.I0R(0,"a",0)(1,"span",1),t._Xx(2),t.C$Y()()),2&o&&t.CI5("href","mailto:",i.mailTo,"",t.K6U)},dependencies:[s.w,s.C],changeDetection:0})}return e})();function we(e,a){if(1&e&&(t.I0R(0,"p"),t.OEk(1),t.SAx(2),t.aS0(3,2),t.k70(),t.C$Y(),t.I0R(4,"p"),t.OEk(5),t.SAx(6),t.aS0(7,3),t.k70(),t.C$Y()),2&e){const n=t.GaO();let o,i;t.yG2(),t.oRS(" ",null!==(o=n.adults)&&void 0!==o?o:0," "),t.yG2(4),t.oRS(" ",null!==(i=n.children)&&void 0!==i?i:0," ")}}function ze(e,a){if(1&e&&(t.I0R(0,"span"),t.OEk(1),t.C$Y(),t.I0R(2,"mat-icon"),t.OEk(3,"person2"),t.C$Y()),2&e){const n=t.GaO();t.yG2(),t.cNF(n.adults)}}function Fe(e,a){if(1&e&&(t.I0R(0,"span"),t.OEk(1),t.C$Y(),t.I0R(2,"mat-icon"),t.OEk(3,"child_care"),t.C$Y()),2&e){const n=t.GaO();t.yG2(),t.cNF(n.children)}}function Ue(e,a){1&e&&t.OEk(0," ??? ")}let He=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.In1({type:e,selectors:[["app-reservation-people"]],inputs:{adults:"adults",children:"children"},standalone:!0,features:[t.UHJ],decls:6,vars:4,consts:()=>{let n,o;return n="Adults",o="Children",[["hint",""],[1,"flex","items-center",3,"tuiHint"],n,o]},template:function(o,i){if(1&o&&(t.yuY(0,we,8,2,"ng-template",null,0,t.gJz),t.I0R(2,"div",1),t.yuY(3,ze,4,1)(4,Fe,4,1)(5,Ue,1,0),t.C$Y()),2&o){const l=t.Gew(1);t.yG2(2),t.E7m("tuiHint",l),t.yG2(),t.C0Y(3,i.adults&&i.adults>0?3:-1),t.yG2(),t.C0Y(4,i.children&&i.children>0?4:-1),t.yG2(),t.C0Y(5,i.adults&&i.adults>0||i.children&&i.children>0?-1:5)}},dependencies:[C.qL,M.WY,M.lh,M.SL,M.i6,M.IT],encapsulation:2})}return e})();var Xe=_(4476),Be=_(8640),Ke=_(3040);function Je(e,a){1&e&&(t.I0R(0,"span",4),t.aS0(1,5),t.C$Y())}function We(e,a){1&e&&(t.I0R(0,"span",6),t.aS0(1,7),t.C$Y())}function je(e,a){1&e&&(t.I0R(0,"span",8),t.aS0(1,9),t.C$Y())}function Qe(e,a){1&e&&t.OEk(0," error ")}function Ze(e,a){if(1&e&&t.yuY(0,Je,2,0)(1,We,2,0)(2,je,2,0)(3,Qe,1,0),2&e){const n=t.GaO(2);let o;t.C0Y(0,"paid"===(o=n.status())?0:"todo"===o?1:"refunded"===o?2:3)}}function qe(e,a){if(1&e&&(t.I0R(0,"div",18),t.OEk(1),t.wVc(2,"currency"),t.C$Y()),2&e){const n=t.GaO(3);let o;t.yG2(),t.oRS(" ",t.kDX(2,1,null==(o=n.payment())?null:o.value)," ")}}function tn(e,a){if(1&e&&(t.I0R(0,"p",19),t.SAx(1),t.aS0(2,20),t.k70(),t.I0R(3,"app-copy-content",21),t.OEk(4),t.C$Y()()),2&e){const n=t.GaO(3);let o,i;t.yG2(3),t.E7m("content",null==(o=n.payment())?null:o.external_id),t.yG2(),t.cNF(null==(i=n.payment())?null:i.external_id)}}function en(e,a){1&e&&t.C_f(0)}function nn(e,a){1&e&&(t.SAx(0),t.aS0(1,22),t.k70())}function on(e,a){if(1&e){const n=t.KQA();t.I0R(0,"p",23),t.aS0(1,24),t.C$Y(),t.I0R(2,"button",25),t.qCj("click",function(){t.usT(n);const i=t.GaO(3);return t.CGJ(i.cancelPayment())}),t.SAx(3),t.aS0(4,26),t.k70(),t.C$Y()}if(2&e){const n=t.GaO(3);t.yG2(2),t.E7m("showLoader",n.loading())}}function _n(e,a){if(1&e&&(t.I0R(0,"p"),t.aS0(1,27),t.C$Y(),t.I0R(2,"div",28)(3,"a",29),t.OEk(4),t.C$Y(),t.wR5(5,"app-copy-content",21),t.C$Y()),2&e){const n=t.GaO(3);let o,i,l;t.yG2(3),t._6D("href",null==(o=n.payment())?null:o.hpp_url,t.K6U),t.yG2(),t.cNF(null==(i=n.payment())?null:i.hpp_url),t.yG2(),t.E7m("content",null==(l=n.payment())?null:l.hpp_url)}}function an(e,a){1&e&&(t.I0R(0,"p"),t.aS0(1,30),t.C$Y())}function sn(e,a){1&e&&t.OEk(0," error ")}function rn(e,a){if(1&e){const n=t.KQA();t.I0R(0,"h2",10),t.aS0(1,11),t.C$Y(),t.yuY(2,qe,3,3,"div",12)(3,tn,5,2,"p",13),t.I0R(4,"div",14)(5,"div",15),t.yuY(6,en,1,0,"ng-container",3),t.C$Y(),t.yuY(7,nn,2,0,"ng-template",null,16,t.gJz),t.I0R(9,"button",17),t.qCj("click",function(){t.usT(n);const i=t.GaO(2);return t.CGJ(i.fetchPaymentStatus())}),t.I0R(10,"mat-icon"),t.OEk(11,"refresh"),t.C$Y()()(),t.yuY(12,on,5,1)(13,_n,6,3)(14,an,2,0)(15,sn,1,0)}if(2&e){const n=t.Gew(8);t.GaO();const o=t.Gew(1),i=t.GaO();let l,N,x;t.yG2(2),t.C0Y(2,null!=(l=i.payment())&&l.value?2:-1),t.yG2(),t.C0Y(3,null!=(N=i.payment())&&N.external_id?3:-1),t.yG2(3),t.E7m("ngTemplateOutlet",o),t.yG2(3),t.E7m("tuiHint",n)("showLoader",i.loading()),t.yG2(3),t.C0Y(12,"paid"===(x=i.status())?12:"todo"===x?13:"refunded"===x?14:15)}}function ln(e,a){1&e&&t.C_f(0)}function cn(e,a){if(1&e){const n=t.KQA();t.yuY(0,Ze,4,1,"ng-template",null,0,t.gJz)(2,rn,16,6,"ng-template",null,1,t.gJz),t.I0R(4,"button",2),t.qCj("click",function(){t.usT(n);const i=t.Gew(3),l=t.GaO();return t.CGJ(l.showDialog(i))}),t.yuY(5,ln,1,0,"ng-container",3),t.C$Y()}if(2&e){const n=t.Gew(1);t.yG2(5),t.E7m("ngTemplateOutlet",n)}}let un=(()=>{class e{constructor(){this.destroy=(0,t.uUt)(m.UF),this.dialogs=(0,t.uUt)(at._k),this.reservations=(0,t.uUt)(u.S),this.notifications=(0,t.uUt)(b.E),this.reservation=(0,t.OCB)(null),this.payment=(0,t.OCB)(null),this.status=(0,t.S6b)(()=>this.payment()?.status||null),this.loading=(0,t.OCB)(!1)}set reservationValue(n){this.reservation.set(n),this.payment.set(n?.payment||null)}showDialog(n){this.dialogs.open(n).subscribe()}fetchPaymentStatus(){const n=this.reservation()?.id;n?(this.loading.set(!0),this.reservations.refreshPaymentStatus(n).pipe((0,y.a)(this.destroy),(0,S.U)(()=>this.loading.set(!1))).subscribe(o=>{this.reservationValue=o},o=>{this.notifications.error((0,h.mk)(o))})):this.notifications.error()}cancelPayment(){const n=this.reservation()?.id;n?this.notifications.confirm("The money from the reservation will be returned to the customer. Are you sure?").subscribe({next:o=>{o&&(this.loading.set(!0),this.reservations.refoundPayment(n).pipe((0,y.a)(this.destroy),(0,S.U)(()=>this.loading.set(!1))).subscribe(i=>{this.reservationValue=i},i=>{this.notifications.error((0,h.mk)(i))}))}}):this.notifications.error()}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.In1({type:e,selectors:[["app-admin-reservation-payment"]],inputs:{reservationValue:[t.Wk5.None,"reservation","reservationValue"]},standalone:!0,features:[t.M5G([m.UF]),t.UHJ],decls:1,vars:1,consts:()=>{let n,o,i,l,N,x,K,J,U,q;return n="Paid",o="Unpaid",i="Refunded",l="Payment status",N="Payment ID:",x="Update status (download the latest version from the payment gateway)",K="The payment has been successfully completed.",J="Refund payment",U="Link to complete the payment:",q="The payment has been refunded.",[["paymentStatus",""],["modalTemplate",""],["type","button","tuiButton","","size","m","appearance","outline",3,"click"],[4,"ngTemplateOutlet"],[1,"text-center","text-success-dark","text-nowrap"],n,[1,"text-center","text-danger","text-nowrap"],o,[1,"text-center","text-warning","text-nowrap"],i,[1,"text-xl","bold","mb-3"],l,["class","w-fit border font-bold rounded-md border-success-dark text-success-dark flex items-center p-2"],["class","mt-3"],[1,"flex","items-center"],[1,"me-2"],["hintForRefresh",""],["size","m","type","button","tuiIconButton","",3,"tuiHint","showLoader","click"],[1,"w-fit","border","font-bold","rounded-md","border-success-dark","text-success-dark","flex","items-center","p-2"],[1,"mt-3"],N,[3,"content"],x,[1,"my-3"],K,["tuiButton","","type","button","size","m","appearance","secondary-destructive",3,"showLoader","click"],J,U,[1,"flex","items-center","justify-center"],["tuiLink","",1,"me-2",3,"href"],q]},template:function(o,i){1&o&&t.yuY(0,cn,6,1),2&o&&t.C0Y(0,i.payment()?0:-1)},dependencies:[R.CI,R.Kw,Ke.M,s.w,s.C,p.cf,p.XV,C.oB,C.qL,M.WY,M.lh,M.SL,M.i6,M.IT],changeDetection:0})}return e})();function pn(e,a){if(1&e){const n=t.KQA();t.I0R(0,"button",8),t.qCj("click",function(){t.usT(n);const i=t.GaO().$implicit,l=t.GaO(2);return t.CGJ(l.emit(i))}),t.wR5(1,"app-reservation-status",5),t.C$Y()}if(2&e){const n=t.GaO().$implicit;t.yG2(),t.E7m("status",n)}}function mn(e,a){if(1&e&&t.yuY(0,pn,2,1,"button",7),2&e){const n=a.$implicit,o=t.GaO(2);t.C0Y(0,n!=o.status()?0:-1)}}function En(e,a){if(1&e&&(t.I0R(0,"tui-data-list"),t.c53(1,mn,1,1,null,null,t.oxv),t.C$Y()),2&e){const n=t.GaO();t.yG2(),t.oho(n.options)}}const dn=e=>({rotate180:e});let Tn=(()=>{class e{constructor(){this.destroy$=(0,t.uUt)(m.UF),this.service=(0,t.uUt)(u.S),this.statusChange=new t._w7,this.itemId=(0,t.OCB)(null),this.loading=(0,t.OCB)(!1),this.status=(0,t.OCB)(null),this.options=["arrived","noshow"],this.buttonAppearance="outline"}set reservation(n){this.itemId.set(n.id||null),this.loading.set(!1),this.status.set(n.status||null)}emit(n){this.statusChange.emit(n)}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.In1({type:e,selectors:[["app-eip-reservation-status"]],inputs:{buttonAppearance:"buttonAppearance",reservation:"reservation"},outputs:{statusChange:"statusChange"},standalone:!0,features:[t.M5G([m.UF]),t.UHJ],decls:9,vars:6,consts:[["dropdownContent",""],[3,"content"],["dropdown",""],["type","button","size","m","tuiButton","",3,"appearance"],[1,"flex","items-center"],[3,"status"],[1,"animation-speed-2",3,"ngClass"],["type","button","tuiOption",""],["type","button","tuiOption","",3,"click"]],template:function(o,i){if(1&o&&(t.yuY(0,En,3,0,"ng-template",null,0,t.gJz),t.I0R(2,"tui-hosted-dropdown",1,2)(4,"button",3)(5,"span",4),t.wR5(6,"app-reservation-status",5),t.I0R(7,"mat-icon",6),t.OEk(8,"expand_more"),t.C$Y()()()()),2&o){const l=t.Gew(1),N=t.Gew(3);t.yG2(2),t.E7m("content",l),t.yG2(2),t.E7m("appearance",i.buttonAppearance),t.yG2(2),t.E7m("status",i.status()),t.yG2(),t.E7m("ngClass",t.S45(4,dn,N.open))}},dependencies:[R.CI,R.Kw,Z.GE,Z.Qw,X.A$,X.yi,X.sP,v.Sk,rt.a,C.oB,C.qL,p.QF],changeDetection:0})}return e})();var Cn=_(1183);const Sn=(e,a)=>a.id;function Rn(e,a){1&e&&(t.SAx(0),t.aS0(1,12),t.k70())}function gn(e,a){1&e&&(t.SAx(0),t.aS0(1,13),t.k70())}function On(e,a){1&e&&(t.SAx(0),t.aS0(1,14),t.k70())}function fn(e,a){1&e&&(t.SAx(0),t.aS0(1,15),t.k70())}function Nn(e,a){1&e&&(t.SAx(0),t.aS0(1,16),t.k70())}function Mn(e,a){1&e&&(t.SAx(0),t.aS0(1,17),t.k70())}function In(e,a){1&e&&(t.SAx(0),t.aS0(1,18),t.k70())}function hn(e,a){1&e&&(t.SAx(0),t.aS0(1,19),t.k70())}function An(e,a){1&e&&(t.I0R(0,"app-no-items",20)(1,"h4"),t.aS0(2,21),t.C$Y(),t.I0R(3,"span"),t.aS0(4,22),t.C$Y()()),2&e&&t.E7m("showLoader",!1)}function vn(e,a){if(1&e&&(t.I0R(0,"p",41),t.OEk(1),t.C$Y()),2&e){const n=t.GaO().$implicit;t.E7m("phoneTo",n.phone)("whatsapp",!0),t.yG2(),t.cNF(n.phone)}}function yn(e,a){if(1&e&&(t.I0R(0,"p",42),t.OEk(1),t.C$Y()),2&e){const n=t.GaO().$implicit;t.E7m("mailTo",n.email),t.yG2(),t.cNF(n.email)}}function Pn(e,a){if(1&e&&(t.I0R(0,"p",43),t.OEk(1),t.C$Y()),2&e){const n=t.GaO().$implicit;t.yG2(),t.oRS(" ",n.notes," ")}}function $n(e,a){if(1&e&&(t.I0R(0,"span",43)(1,"span",44),t.aS0(2,45),t.C$Y(),t.OEk(3),t.C$Y()),2&e){const n=t.GaO().$implicit;t.yG2(3),t.oRS(" ",n.table," ")}}function xn(e,a){1&e&&(t.I0R(0,"span"),t.aS0(1,46),t.C$Y())}function Gn(e,a){1&e&&(t.I0R(0,"span"),t.aS0(1,47),t.C$Y())}const Ln=e=>({rotate180:e});function Dn(e,a){if(1&e){const n=t.KQA();t.I0R(0,"div",23)(1,"div")(2,"span",24),t.qCj("click",function(){t.usT(n);const i=t.Gew(10);return t.CGJ(i.expanded=!i.expanded)}),t.I0R(3,"span",25),t.OEk(4),t.wVc(5,"date"),t.C$Y(),t.I0R(6,"span",25),t.OEk(7),t.C$Y(),t.wR5(8,"app-reservation-people",26),t.C$Y(),t.I0R(9,"tui-expand",null,27),t.yuY(11,vn,2,3,"p",28)(12,yn,2,2,"p",29)(13,Pn,2,1,"p",30)(14,$n,4,1,"span",30),t.I0R(15,"div",31)(16,"a",32),t.SAx(17),t.aS0(18,33),t.k70(),t.C$Y()(),t.I0R(19,"div",31),t.wR5(20,"app-admin-reservation-payment",34),t.C$Y(),t.wR5(21,"app-reservation-events",35),t.C$Y(),t.I0R(22,"button",36),t.qCj("click",function(){t.usT(n);const i=t.Gew(10);return t.CGJ(i.expanded=!i.expanded)}),t.I0R(23,"span",37),t.yuY(24,xn,2,0,"span")(25,Gn,2,0),t.I0R(26,"mat-icon",38),t.OEk(27,"expand_more"),t.C$Y()()()(),t.I0R(28,"div",39)(29,"app-eip-reservation-status",40),t.qCj("statusChange",function(i){const N=t.usT(n).$implicit,x=t.GaO();return t.CGJ(x.updateStatus(N,i))}),t.C$Y()()()}if(2&e){const n=a.$implicit,o=t.Gew(10);t.yG2(4),t.cNF(t.g7$(5,15,n.datetime,"HH:mm")),t.yG2(3),t.cNF(n.fullname),t.yG2(),t.E7m("adults",n.adults)("children",n.children),t.yG2(3),t.C0Y(11,n.phone&&n.phone.length>0?11:-1),t.yG2(),t.C0Y(12,n.email&&n.email.length>0?12:-1),t.yG2(),t.C0Y(13,n.notes&&n.notes.length>0?13:-1),t.yG2(),t.C0Y(14,n.table?14:-1),t.yG2(2),t._6D("routerLink",n.id),t.yG2(4),t.E7m("reservation",n),t.yG2(),t.E7m("reservation",n),t.yG2(3),t.C0Y(24,o.expanded?24:25),t.yG2(2),t.E7m("ngClass",t.S45(18,Ln,o.expanded)),t.yG2(3),t.E7m("buttonAppearance","flat")("reservation",n)}}function Yn(e,a){1&e&&t.C_f(0)}function Vn(e,a){if(1&e&&t.yuY(0,Yn,1,0,"ng-container",48),2&e){t.GaO();const n=t.Gew(20);t.E7m("ngTemplateOutlet",n)}}let bn=(()=>{class e{constructor(){this.loading=(0,t.OCB)(!1),this.data=(0,t.OCB)(null),this.items=(0,t.S6b)(()=>this.data()?.items||[]),this.service=(0,t.uUt)(u.S),this.notifications=(0,t.uUt)(b.E),this.date=(0,t.uUt)(p.y),this.destroy$=(0,t.uUt)(m.UF),this._=(0,t.uUt)(Xe.OY).setTitle("Reservations | La Porta D'Acqua"),this.inputSize="m",this.defaultOrder={field:"datetime",asc:!0},this.filters={},this.order=new r.Ku(null)}ngOnInit(){this.order.valueChanges.subscribe({next:n=>{this.search()}})}updateStatus(n,o){const i=n.id;i&&o?this.notifications.confirm("La prenotazione verr\xe0 aggiornata.",{title:"\n          Booking\n          " + n.fullname + "\n          for\n          " + ((n.adults || 0) + (n.children || 0)) + "\n          in status\n          " + Cn.au[o].title + "\n        "}).subscribe({next:l=>{l&&(this.loading.set(!0),this.service.updateStatus(i,o).pipe((0,y.a)(this.destroy$),(0,S.U)(()=>this.loading.set(!1))).subscribe({next:()=>{this.notifications.fireSnackBar("State updated successfully."),this.search()},error:N=>{this.notifications.error((0,h.mk)(N)||"Something went wrong with the status update.")}}))}}):this.notifications.error()}delete(n){n&&this.notifications.confirm("Are you sure you want to cancel this reservation?").subscribe({next:o=>{o&&this.confirmedDelete(n)}})}filtersChanged(n){this.filters=n,this.search(n)}confirmedDelete(n){this.loading.set(!0),this.service.destroy(n).pipe((0,y.a)(this.destroy$),(0,S.U)(()=>{this.loading.set(!1),this.search()})).subscribe({error:o=>{this.notifications.error((0,h.mk)(o)||"Something went wrong with the cancellation.")}})}search(n=this.filters){n||={},n={...n};const o=this.order.value;this.order.valid&&o&&(n.order_by_field=o.field,n.order_by_direction=o.asc?"ASC":"DESC"),this.loading.set(!0),this.service.search(n).pipe((0,y.a)(this.destroy$),(0,S.U)(()=>this.loading.set(!1))).subscribe({next:i=>{this.data.set(i)},error:i=>{this.notifications.error((0,h.mk)(i)||"Something went wrong in the research."),console.error(i)}})}static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275cmp=t.In1({type:e,selectors:[["app-admin-reservations-home"]],viewQuery:function(o,i){if(1&o&&t.CC$(_t,7),2&o){let l;t.wto(l=t.Gqi())&&(i.turnSelect=l.first)}},standalone:!0,features:[t.M5G([m.UF]),t.UHJ],decls:27,vars:5,consts:()=>{let n,o,i,l,N,x,K,J,U,q,H,ct,ut,pt,mt;return n="Reservations",o="Schedule",i="Name",l="Email",N="No.",x="State",K="Table",J="Note",U="Contacts",q="No reservation",H="Try changing the search filters.",ct="Change reservation",ut="Table",pt="Hide details",mt="Show details",[n,["datetimeCol",""],["nameCol",""],["emailCol",""],["peopleCol",""],["statusCol",""],["tableCol",""],["detailsCol",""],["contactsCol",""],["noItems",""],[3,"loading","data","filtersChanged"],[3,"overlay","showLoader"],o,i,l,N,x,K,J,U,[3,"showLoader"],q,H,[1,"p-3","m-2","flex","items-center","justify-between","border","rounded-md","border-slate-400"],[1,"flex","items-center","text-lg","mb-2",3,"click"],[1,"me-2"],[3,"adults","children"],["expand",""],["class","block mb-2",3,"phoneTo","whatsapp"],["class","block mb-2",3,"mailTo"],["class","block mb-2 text-slate-400"],[1,"block","mb-2"],["tuiLink","",3,"routerLink"],ct,[3,"reservation"],[1,"my-auto",3,"reservation"],["type","button","size","s","tuiButton","","appearance","outline",3,"click"],[1,"flex","items-center"],[1,"animation-speed-2",3,"ngClass"],[1,"flex","flex-col","items-around"],[1,"mb-3",3,"buttonAppearance","reservation","statusChange"],[1,"block","mb-2",3,"phoneTo","whatsapp"],[1,"block","mb-2",3,"mailTo"],[1,"block","mb-2","text-slate-400"],[1,"me-1"],ut,pt,mt,[4,"ngTemplateOutlet"],["class","p-3 m-2 flex items-center justify-between border rounded-md border-slate-400"]]},template:function(o,i){1&o&&(t.I0R(0,"h1"),t.SAx(1),t.aS0(2,0),t.k70(),t.C$Y(),t.yuY(3,Rn,2,0,"ng-template",null,1,t.gJz)(5,gn,2,0,"ng-template",null,2,t.gJz)(7,On,2,0,"ng-template",null,3,t.gJz)(9,fn,2,0,"ng-template",null,4,t.gJz)(11,Nn,2,0,"ng-template",null,5,t.gJz)(13,Mn,2,0,"ng-template",null,6,t.gJz)(15,In,2,0,"ng-template",null,7,t.gJz)(17,hn,2,0,"ng-template",null,8,t.gJz)(19,An,5,1,"ng-template",null,9,t.gJz),t.I0R(21,"app-list-reservations-filters",10),t.qCj("filtersChanged",function(N){return i.filtersChanged(N)}),t.I0R(22,"tui-loader",11),t.c53(23,Dn,30,20,"div",49,Sn,!1,Vn,1,1,"ng-container"),t.C$Y()(),t.wR5(26,"router-outlet")),2&o&&(t.yG2(21),t.E7m("loading",i.loading())("data",i.data()),t.yG2(),t.E7m("overlay",!0)("showLoader",i.loading()),t.yG2(),t.oho(i.items()))},dependencies:[p.MD,p.QF,p.XV,p.y,r.sl,O.CQ,c.m6,R.CI,R.Kw,C.qL,d.ER,s.w,s.C,d.cP,G.yy,M.WY,Ce,$e,Ye,ke,He,Be.O,v.Sk,v.Cb,un,r.y,Tn,F.kh,F.st],encapsulation:2,changeDetection:0})}return e})()},4592:(z,A,_)=>{_.d(A,{u:()=>Y});var t=_(4496),p=_(3480),r=_(8304),O=_(3616),m=_(8824),c=_(7692),R=_(5656);let s=(()=>{class E{transform(I){return null==I||"object"!=typeof I||Array.isArray(I)?[]:Object.keys(I).map(V=>[V,I[V]])}static#t=this.\u0275fac=function(V){return new(V||E)};static#e=this.\u0275pipe=t.UTH({name:"objectToArray",type:E,pure:!0,standalone:!0})}return E})();function M(E,D){if(1&E&&t.wR5(0,"tui-loader",0),2&E){const I=t.GaO();t.E7m("showLoader",I.showLoader)("size","s")}}const v=(E,D)=>D.turn.id;function F(E,D){1&E&&t._Xx(0)}const C=(E,D)=>D[0];function d(E,D){1&E&&t.OEk(0,"Quante persone ci sono al tavolo in questione")}function G(E,D){if(1&E&&(t.I0R(0,"th",4),t.OEk(1),t.I0R(2,"span"),t.aS0(3,11),t.C$Y()()),2&E){const I=D.$implicit;t.yG2(),t.oRS(" ",I[0]," ")}}function b(E,D){1&E&&t.OEk(0,"Quanti tavoli con lo stesso numero di persone")}function y(E,D){if(1&E&&(t.I0R(0,"td",8)(1,"span"),t.OEk(2),t.C$Y()()),2&E){const I=D.$implicit;t.yG2(2),t.cNF(I[1])}}function S(E,D){if(1&E&&(t.I0R(0,"p",1)(1,"b"),t.OEk(2),t.C$Y()(),t.I0R(3,"table",2)(4,"thead")(5,"tr",3)(6,"th",4),t.yuY(7,d,1,0,"ng-template",null,5,t.gJz),t.I0R(9,"span",6),t.aS0(10,7),t.C$Y()(),t.c53(11,G,4,1,"th",12,C),t.wVc(13,"objectToArray"),t.C$Y()(),t.I0R(14,"tbody")(15,"tr",3)(16,"td",8),t.yuY(17,b,1,0,"ng-template",null,9,t.gJz),t.I0R(19,"span",6),t.aS0(20,10),t.C$Y()(),t.c53(21,y,3,1,"td",13,C),t.wVc(23,"objectToArray"),t.C$Y()()()),2&E){const I=D.$implicit,V=t.Gew(8),k=t.Gew(18);t.yG2(2),t.cNF(I.turn.name),t.yG2(7),t.E7m("tuiHint",V),t.yG2(2),t.oho(t.kDX(13,3,I.summary)),t.yG2(8),t.E7m("tuiHint",k),t.yG2(2),t.oho(t.kDX(23,5,I.summary))}}const h=()=>[];function u(E,D){if(1&E&&(t.yuY(0,F,1,0),t.c53(1,S,24,7,null,null,v)),2&E){const I=t.GaO();t.C0Y(0,(I.data()||t.q4q(1,h)).length>0?0:-1),t.yG2(),t.oho(I.data())}}const f=["*"];let Y=(()=>{class E{constructor(){this.destroy$=(0,t.uUt)(p.UF),this.service=(0,t.uUt)(r.S),this.data=(0,t.OCB)(null),this.loading=(0,t.OCB)(!1),this.showLoader=!0,this.filters=null}ngOnChanges(){this.query()}query(){this.loading.set(!0),this.service.tablesSummary(this.filters??{}).pipe((0,O.a)(this.destroy$),(0,m.U)(()=>this.loading.set(!1))).subscribe({next:I=>{this.data.set(I)}})}static#t=this.\u0275fac=function(V){return new(V||E)};static#e=this.\u0275cmp=t.In1({type:E,selectors:[["app-reservation-tables-summary"]],inputs:{showLoader:"showLoader",filters:"filters"},standalone:!0,features:[t.M5G([p.UF]),t.SYr,t.UHJ],ngContentSelectors:f,decls:2,vars:1,consts:()=>{let I,V,k;return I="Type:",V="Quantity:",k="people",[[3,"showLoader","size"],[1,"font-xl"],[1,"tui-table"],[1,"tui-table__tr","tui-table__tr_border_none"],[1,"tui-table__th"],["headerExplain",""],[3,"tuiHint"],I,[1,"tui-table__td"],["valueExplain",""],V,k,["class","tui-table__th"],["class","tui-table__td"]]},template:function(V,k){1&V&&(t.kPM(),t.yuY(0,M,1,2,"tui-loader",0)(1,u,3,2)),2&V&&t.C0Y(0,k.loading()?0:1)},dependencies:[c.Sk,c.Cb,s,R.WY,R.lh,R.SL,R.i6,R.IT],styles:["td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid var(--tui-base-04)}table[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-size:.9rem}table[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]   .tui-table__td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]   .tui-table__th[_ngcontent-%COMP%]{padding:.5rem;height:inherit}"],changeDetection:0})}return E})()},8128:(z,A,_)=>{function t(p){if(!p)return null;const r=p.match(/filename="(.+)"/);return r?r[1]:null}_.d(A,{k:()=>t})},9772:(z,A,_)=>{_.d(A,{CU:()=>p,ye:()=>r});const t=(new Date).getTimezoneOffset()/60;function p(O,m=t){return"string"==typeof O&&O.length>0&&O.match(/\d{1,2}:\d{1,2}/)?`${Number(O.split(":")[0])-m}:${O.split(":")[1]}`:(console.error("Invalid string provided to strTimeTimezone",{string:O}),"")}function r(O,m=t){return p(O,-1*m)}},1960:(z,A,_)=>{_.d(A,{u:()=>O});var t=_(8400),p=_(5136);class r extends t.w{constructor(c){super(c),this.date=c.date?new Date(c.date):void 0,this.reservation_turn_id=c.reservation_turn_id,this.group_id=c.group_id,this.reservation_turn=c.reservation_turn?new p.e(c.reservation_turn):void 0}}class O extends t.w{constructor(c){super(c),this.turns=[],this.dates=[],this.title=c.title,this.status=c.status,this.preorder_type=c.preorder_type,this.payment_value=c.payment_value,this.message=c.message,this.turns=(c.turns||[]).map(R=>new p.e(R)),this.dates=(c.dates||[]).map(R=>new r(R))}}},5136:(z,A,_)=>{_.d(A,{e:()=>O});var t=_(8400),p=_(9772),r=_(1960);class O extends t.w{constructor(c){super(c),this.name=c.name,this.weekday=c.weekday,this.step=c.step,this.valid_times=c.valid_times,this.starts_at=c.starts_at?(0,p.CU)(c.starts_at):void 0,this.ends_at=c.ends_at?(0,p.CU)(c.ends_at):void 0,this.preorder_reservation_group=c.preorder_reservation_group?new r.u(c.preorder_reservation_group):void 0}}},5180:(z,A,_)=>{_.d(A,{C:()=>c});var t=_(8400);class p extends t.w{constructor(s){super(s),this.image_pixel_id=s.image_pixel_id,this.event_data=s.event_data,this.event_time=s.event_time?new Date(s.event_time):void 0}}class r extends t.w{constructor(s){super(s),this.image_id=s.image_id,this.delivered_email_id=s.delivered_email_id,this.record_type=s.record_type,this.record_id=s.record_id,this.event_type=s.event_type,this.secret=s.secret,this.events=s.events?s.events.map(M=>new p(M)):[]}}class O extends t.w{constructor(s){super(s),this.record_id=s.record_id,this.record_type=s.record_type,this.text=s.text,this.html=s.html,this.subject=s.subject,this.headers=s.headers,this.raw=s.raw,this.image_pixels=s.image_pixels?s.image_pixels.map(M=>new r(M)):[]}}class m extends t.w{constructor(s){super(s),this.hpp_url=s.hpp_url,this.value=s.value,this.status=s.status,this.reservation_id=s.reservation_id,this.preorder_type=s.preorder_type,this.external_id=s.external_id,this.other=s.other}}class c extends t.w{constructor(s){super(s),this.fullname=s.fullname,this.datetime=s.datetime?new Date(s.datetime):void 0,this.status=s.status,this.secret=s.secret,this.adults=s.adults,this.children=s.children,this.table=s.table,this.notes=s.notes,this.email=s.email,this.phone=s.phone,this.payment=s.payment?new m(s.payment):void 0,this.delivered_emails=s.delivered_emails?s.delivered_emails.map(M=>new O(M)):[]}}},2516:(z,A,_)=>{_.d(A,{G:()=>p});var t=_(4496);let p=(()=>{class r{constructor(){this.weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}transform(m){return"number"!=typeof m&&"string"==typeof m&&(m=parseInt(m)),"number"==typeof m&&m>=0&&m<=6?this.weekdays[m]:null}static#t=this.\u0275fac=function(c){return new(c||r)};static#e=this.\u0275pipe=t.UTH({name:"weekday",type:r,pure:!0,standalone:!0})}return r})()},7556:(z,A,_)=>{_.d(A,{K:()=>O});var t=_(6012),p=_(5136),r=_(4496);let O=(()=>{class m extends t.s{constructor(){super(p.e,"admin/reservation_turns")}static#t=this.\u0275fac=function(s){return new(s||m)};static#e=this.\u0275prov=r.wxM({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},8304:(z,A,_)=>{_.d(A,{S:()=>M});var t=_(6012),p=_(5180),r=_(4704),O=_(3252),m=_(9144),c=_(7048),R=_(8128),s=_(4496);let M=(()=>{class v extends t.s{constructor(){super(p.C,"admin/reservations")}updateStatus(C,d){return this.patch(`${C}/status/${d}`,{}).pipe((0,r.k)(G=>this.mapItem(G)))}tablesSummary(C={}){return this.get("tables_summary",{params:C})}deliverConfirmationEmail(C){return this.post(`${C}/deliver_confirmation_email`,{}).pipe((0,r.k)(d=>this.mapItem(d)))}refoundPayment(C){return this.post(`${C}/refund_payment`,{}).pipe((0,r.k)(d=>this.mapItem(d)))}refreshPaymentStatus(C){return this.post(`${C}/refresh_payment_status`,{}).pipe((0,r.k)(d=>this.mapItem(d)))}export(C){return new O._(d=>{this.get("export",{responseType:"blob",observe:"response",params:C}).pipe((0,m.a)(G=>(console.error("ReservationsService.export() error:",G),d.error(G),new O._))).subscribe(G=>{if(G instanceof c.WA&&G.body){const b=(0,R.k)(G.headers?.get("Content-Disposition"))??"Prenotazioni.xlsx",y=G.headers?.get("Content-Type")??"application/octet-stream",S=window.URL.createObjectURL(new Blob([G.body],{type:y})),h=document.createElement("a");h.href=S,h.download=b,h.click(),d.complete()}})})}static#t=this.\u0275fac=function(d){return new(d||v)};static#e=this.\u0275prov=s.wxM({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})()},5892:(z,A,_)=>{_.d(A,{Ws:()=>W,yy:()=>X});var t=_(4496),p=_(2528),r=_(4472);(0,p.W0)((0,r.u)("showHideText"));const m=(0,p.W0)((0,r.u)("paginationTexts"));var c=_(466),R=_(1512),s=_(4336),M=_(3656),v=_(8212),F=_(5944),C=_(1368),d=_(1040);function G(T,L){if(1&T&&(t.SAx(0),t.OEk(1),t.I0R(2,"strong",6),t.OEk(3),t.C$Y(),t.k70()),2&T){const g=t.GaO().ngIf,$=t.GaO();t.yG2(),t.oRS(" ",g.pages," "),t.yG2(2),t.cNF($.pages)}}function b(T,L){if(1&T&&(t.SAx(0),t.OEk(1),t.k70()),2&T){const g=L.polymorpheusOutlet;t.yG2(),t.oRS(" ",g," ")}}function y(T,L){if(1&T&&t.wR5(0,"tui-svg",13),2&T){const g=t.GaO(4);t.E7m("src",g.commonIcons.check)}}function S(T,L){1&T&&t.wR5(0,"span",14)}const h=(T,L)=>({$implicit:T,total:L});function u(T,L){if(1&T){const g=t.KQA();t.SAx(0),t.I0R(1,"button",9),t.qCj("click",function(){const B=t.usT(g).$implicit,j=t.GaO(3);return t.CGJ(j.onItem(B))}),t.yuY(2,b,2,1,"ng-container",10)(3,y,1,1,"tui-svg",11)(4,S,1,0,"ng-template",null,12,t.gJz),t.C$Y(),t.k70()}if(2&T){const g=L.$implicit,$=t.Gew(5),P=t.GaO(3);t.yG2(2),t.E7m("polymorpheusOutlet",P.options.sizeOptionContent)("polymorpheusOutletContext",t.IBC(4,h,g,P.total)),t.yG2(),t.E7m("ngIf",g===P.size)("ngIfElse",$)}}function f(T,L){if(1&T&&(t.I0R(0,"tui-data-list",7),t.yuY(1,u,6,7,"ng-container",8),t.C$Y()),2&T){const g=t.GaO(2);t.yG2(),t.E7m("ngForOf",g.items)}}function Y(T,L){if(1&T){const g=t.KQA();t.SAx(0),t.I0R(1,"button",15),t.qCj("click",function(){t.usT(g);const P=t.GaO(2);return t.CGJ(P.back())}),t.C$Y(),t.I0R(2,"button",16),t.qCj("click",function(){t.usT(g);const P=t.GaO(2);return t.CGJ(P.forth())}),t.C$Y(),t.k70()}if(2&T){const g=L.ngIf,$=t.GaO(2);t.yG2(),t.E7m("disabled",$.leftDisabled)("icon",$.icons.decrement)("title",g[0]),t.yG2(),t.E7m("disabled",$.rightDisabled)("icon",$.icons.increment)("title",g[1])}}function E(T,L){if(1&T){const g=t.KQA();t.SAx(0),t.I0R(1,"span",1),t.yuY(2,G,4,2,"ng-container",0),t.C$Y(),t.I0R(3,"span",2),t.OEk(4),t.I0R(5,"tui-hosted-dropdown",3),t.iHE("openChange",function(P){t.usT(g);const B=t.GaO();return t.kNx(B.open,P)||(B.open=P),t.CGJ(P)}),t.I0R(6,"button",4)(7,"strong"),t.OEk(8),t.C$Y()(),t.yuY(9,f,2,1,"ng-template",null,5,t.gJz),t.C$Y(),t.OEk(11),t.I0R(12,"strong",6),t.OEk(13),t.C$Y()(),t.yuY(14,Y,3,6,"ng-container",0),t.wVc(15,"async"),t.k70()}if(2&T){const g=L.ngIf,$=t.Gew(10),P=t.GaO();t.yG2(2),t.E7m("ngIf",P.options.showPages),t.yG2(2),t.oRS(" ",g.linesPerPage," "),t.yG2(),t.E7m("content",$),t.OKB("open",P.open),t.yG2(3),t.CAO("",P.start+1,"\u2013",P.end,""),t.yG2(3),t.oRS(" ",g.of," "),t.yG2(2),t.cNF(P.total),t.yG2(),t.E7m("ngIf",t.kDX(15,9,P.spinTexts$))}}const V=(0,p.AL)({sizeOptionContent:function D({$implicit:T}){return`${T}`},showPages:!0,items:[10,20,50,100],size:10});let W=(()=>{class T{constructor(g,$,P,B,j){this.icons=g,this.spinTexts$=$,this.texts$=P,this.options=B,this.commonIcons=j,this.items=this.options.items,this.total=0,this.page=0,this.size=this.options.size,this.pageChange=new t._w7,this.sizeChange=new t._w7,this.paginationChange=new t._w7,this.open=!1}get pages(){return Math.ceil(this.total/this.size)}get start(){return this.page*this.size}get end(){return Math.min(this.start+this.size,this.total)}get leftDisabled(){return!this.start}get rightDisabled(){return this.end===this.total}get pagination(){return{page:this.page,size:this.size}}onItem(g){const{start:$}=this;this.size=g,this.sizeChange.emit(g),this.open=!1,this.page=Math.floor($/this.size),this.pageChange.emit(this.page),this.paginationChange.emit(this.pagination)}back(){this.page--,this.pageChange.emit(this.page),this.paginationChange.emit(this.pagination)}forth(){this.page++,this.pageChange.emit(this.page),this.paginationChange.emit(this.pagination)}}return T.\u0275fac=function(g){return new(g||T)(t.GI1(F.KY),t.GI1(F.s1),t.GI1(m),t.GI1(V),t.GI1(F.QJ))},T.\u0275cmp=t.In1({type:T,selectors:[["tui-table-pagination"]],inputs:{items:"items",total:"total",page:"page",size:"size"},outputs:{pageChange:"pageChange",sizeChange:"sizeChange",paginationChange:"paginationChange"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"t-pages"],["automation-id","tui-table-pagination__lines-per-page-wrapper"],[3,"content","open","openChange"],["tuiLink","","type","button"],["content",""],[1,"t-strong"],["size","s"],[4,"ngFor","ngForOf"],["tuiOption","",1,"t-item",3,"click"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],["class","t-checkmark",3,"src",4,"ngIf","ngIfElse"],["fakeIcon",""],[1,"t-checkmark",3,"src"],[1,"t-checkmark"],["appearance","icon","size","xs","tuiIconButton","","type","button",1,"t-back",3,"disabled","icon","title","click"],["appearance","icon","size","xs","tuiIconButton","","type","button",3,"disabled","icon","title","click"]],template:function(g,$){1&g&&(t.yuY(0,E,16,11,"ng-container",0),t.wVc(1,"async")),2&g&&t.E7m("ngIf",t.kDX(1,1,$.texts$))},dependencies:[c.Qw,R.C,s.yi,s.sP,M.Wu,v.Kw,C.u_,C.ay,d.Af,C.a],styles:["[_nghost-%COMP%]{display:flex;font:var(--tui-font-text-s);align-items:center;color:var(--tui-text-03)}.t-strong[_ngcontent-%COMP%]{color:var(--tui-text-01)}.t-pages[_ngcontent-%COMP%]{margin-right:auto}.t-item[_ngcontent-%COMP%]{min-width:5.5rem;box-sizing:border-box}.t-checkmark[_ngcontent-%COMP%]{min-width:1.5rem;border-left:5px solid transparent}.t-back[_ngcontent-%COMP%]{margin:0 .25rem 0 1.5rem}"],changeDetection:0}),T})(),X=(()=>{class T{}return T.\u0275fac=function(g){return new(g||T)},T.\u0275mod=t.a4G({type:T}),T.\u0275inj=t.s3X({imports:[[C.MD,v.CI,R.w,c.GE,s.A$,M.Yt,d.Ux]]}),T})()},1200:(z,A,_)=>{_.d(A,{A:()=>c,m:()=>R});var t=_(4496),p=_(900),r=_(3480),O=_(800),m=_(3616);let c=(()=>{class s{constructor(v,F,C){this.el=v,this.zone=F,this.destroy$=C,this.eventName=""}ngOnInit(){(0,O.w)(this.el.nativeElement,this.eventName,{passive:!1}).pipe((0,p.Uv)(this.zone),(0,p.uy)(),(0,m.a)(this.destroy$)).subscribe()}}return s.\u0275fac=function(v){return new(v||s)(t.GI1(t.GMv),t.GI1(t.WW2),t.GI1(r.UF,2))},s.\u0275dir=t.Sc5({type:s,selectors:[["","tuiPreventDefault",""]],inputs:{eventName:[t.Wk5.None,"tuiPreventDefault","eventName"]},features:[t.M5G([r.UF])]}),s})(),R=(()=>{class s{}return s.\u0275fac=function(v){return new(v||s)},s.\u0275mod=t.a4G({type:s}),s.\u0275inj=t.s3X({}),s})()},9880:(z,A,_)=>{_.d(A,{kP:()=>C,kh:()=>y,st:()=>b});var t=_(4496),p=_(3480),r=_(4392),O=_(3120),m=_(3616),c=_(7692),R=_(1368);const s=["wrapper"];function M(S,h){if(1&S&&(t.I0R(0,"tui-loader",4),t.C_f(1,5),t.C$Y()),2&S){const u=t.GaO(2);t.E7m("overlay",!0)("showLoader",u.loading),t.yG2(),t.E7m("ngTemplateOutlet",u.content)}}function v(S,h){if(1&S&&(t.SAx(0),t._Xx(1),t.yuY(2,M,2,3,"tui-loader",3),t.k70()),2&S){const u=t.GaO();t.yG2(2),t.E7m("ngIf",u.async)("ngIfElse",u.content)}}const F=["*"];let C=(()=>{class S{}return S.\u0275fac=function(u){return new(u||S)},S.\u0275dir=t.Sc5({type:S,selectors:[["","tuiExpandContent",""]]}),S})();let b=(()=>{class S{constructor(u,f){this.cdr=u,this.destroy$=f,this.state=0,this.async=!1,this.content=null,this.expanded=null}set expandedSetter(u){if(null!==this.expanded)return 0!==this.state?(this.expanded=u,void(this.state=3)):(this.expanded=u,void this.retrigger(this.async&&u?1:3));this.expanded=u}get overflow(){return 0!==this.state}get loading(){return!!this.expanded&&this.async&&1===this.state}get height(){const{expanded:u,state:f,contentWrapper:Y}=this;return u&&2===f||!u&&3===f?0:Y&&(!u&&2===f||u&&3===f)?Y.nativeElement.offsetHeight:Y&&u&&1===f?Math.max(Y.nativeElement.offsetHeight,48):null}get contentVisible(){return this.expanded||0!==this.state}onTransitionEnd({propertyName:u}){"opacity"===u&&3===this.state&&(this.state=0)}onExpandLoaded(u){u.stopPropagation(),1===this.state&&this.retrigger(3)}retrigger(u){this.state=2,(0,O.k)(0).pipe((0,m.a)(this.destroy$)).subscribe(()=>{2===this.state&&(this.state=u,this.cdr.markForCheck())})}}return S.\u0275fac=function(u){return new(u||S)(t.GI1(t.kD9),t.GI1(p.UF,2))},S.\u0275cmp=t.In1({type:S,selectors:[["tui-expand"]],contentQueries:function(u,f,Y){if(1&u&&t.szK(Y,C,5,t.Yw2),2&u){let E;t.wto(E=t.Gqi())&&(f.content=E.first)}},viewQuery:function(u,f){if(1&u&&t.CC$(s,5),2&u){let Y;t.wto(Y=t.Gqi())&&(f.contentWrapper=Y.first)}},hostVars:9,hostBindings:function(u,f){1&u&&t.qCj("transitionend.self",function(E){return f.onTransitionEnd(E)})("tui-expand-loaded",function(E){return f.onExpandLoaded(E)}),2&u&&(t.e48("aria-expanded",f.expanded),t.m4B("height",f.height,"px"),t.eAK("_expanded",f.expanded)("_overflow",f.overflow)("_loading",f.loading))},inputs:{async:"async",expandedSetter:[t.Wk5.None,"expanded","expandedSetter"]},features:[t.M5G([p.UF])],ngContentSelectors:F,decls:3,vars:3,consts:[[1,"t-wrapper"],["wrapper",""],[4,"ngIf"],["size","l",3,"overlay","showLoader",4,"ngIf","ngIfElse"],["size","l",3,"overlay","showLoader"],[3,"ngTemplateOutlet"]],template:function(u,f){1&u&&(t.kPM(),t.I0R(0,"div",0,1),t.yuY(2,v,3,2,"ng-container",2),t.C$Y()),2&u&&(t.E7m("@tuiParentAnimation",void 0)("@.disabled",f.overflow),t.yG2(2),t.E7m("ngIf",f.contentVisible))},dependencies:[c.Cb,R.u_,R.XV],styles:['[_nghost-%COMP%]{transition-property:opacity,height,visibility;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;display:block;opacity:0;transition-delay:1ms}._overflow[_nghost-%COMP%]{overflow:hidden}._expanded[_nghost-%COMP%]{opacity:1;transform:translate(0)}._loading[_nghost-%COMP%]{opacity:.99}.t-wrapper[_ngcontent-%COMP%]:before, .t-wrapper[_ngcontent-%COMP%]:after{content:"";display:table}'],data:{animation:[r.cI]},changeDetection:0}),S})(),y=(()=>{class S{}return S.\u0275fac=function(u){return new(u||S)},S.\u0275mod=t.a4G({type:S}),S.\u0275inj=t.s3X({imports:[[R.MD,c.Sk]]}),S})()},812:(z,A,_)=>{_.d(A,{m2:()=>C,mU:()=>s,qS:()=>O,w3:()=>d}),_(4392);var p=_(2528);_(3840);const O={DMY:"dd/mm/yyyy",MDY:"mm/dd/yyyy",YMD:"yyyy/mm/dd"},s=/\([#]+\)|[#\- ]/g,C=(b,y,S,h)=>{if(!y?.isSingleDay||!S)return b;const u=(0,p.Kw)(Object.entries(S).map(([Y,E])=>[Y,-E])),f=y.from.append(h?u:S).append({day:h?1:-1});return h?f.dayBefore(b)?b:f:b&&f.dayAfter(b)?b:f},d={HH:23,MM:59,SS:59,MS:999}}}]);