(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[9696],{9696:(B,c,a)=>{"use strict";a.r(c),a.d(c,{CategoryDashboardComponent:()=>Ei});var t=a(4496),r=a(3480),s=a(1236),_=a(1712),l=a(8676),u=a(1128),d=a(3616),C=a(8824),T=a(8256),M=a(1264),L=a(8016),m=a(8212),S=a(6504),D=a(7656),w=a(168),V=a(1096),N=a(832),v=a(2528),P=a(1800),A=a(4164),H=a(4680),Q=a(1632),p=a(7692),R=a(3656),h=a(4108),O=a(4304),b=a(1220),f=a(1368),I=a(1040);const Y=["focusableElement"];function G(n,E){if(1&n&&t.wR5(0,"tui-loader",7),2&n){const e=t.GaO();t.E7m("inheritColor",!0)("showLoader",e.value)("size",e.loaderSize)}}function tt(n,E){1&n&&t.wR5(0,"tui-svg",10),2&n&&t.E7m("src",E.polymorpheusOutlet)}const st=n=>({$implicit:n});function Yt(n,E){if(1&n&&(t.I0R(0,"span",8),t.yuY(1,tt,1,1,"tui-svg",9),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.E7m("polymorpheusOutlet",e.iconOn)("polymorpheusOutletContext",t.S45(2,st,e.size))}}function Pt(n,E){if(1&n&&t.wR5(0,"tui-loader",7),2&n){const e=t.GaO();t.E7m("inheritColor",!0)("showLoader",!e.value)("size",e.loaderSize)}}function vt(n,E){1&n&&t.wR5(0,"tui-svg",12),2&n&&t.E7m("src",E.polymorpheusOutlet)}function Ct(n,E){if(1&n&&(t.I0R(0,"span",8),t.yuY(1,vt,1,1,"tui-svg",11),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.E7m("polymorpheusOutlet",e.iconOff)("polymorpheusOutletContext",t.S45(2,st,e.size))}}const gt=(0,v.AL)({icons:{toggleOff:({$implicit:n})=>"m"===n?"tuiIconToggleOff":"tuiIconToggleOffLarge",toggleOn:({$implicit:n})=>"m"===n?"tuiIconToggleOn":"tuiIconToggleOnLarge"},appearances:{checked:O.oN.Primary,unchecked:O.oN.Secondary},singleColor:!1,showIcons:!1,size:"m"});let Bt=(()=>{class n extends P._y{constructor(e,i,o,g){super(e,i),this.modeDirective=o,this.options=g,this.singleColor=this.options.singleColor,this.showIcons=this.options.showIcons,this.showLoader=!1,this.size=this.options.size}get iconOn(){return this.options.icons.toggleOn}get iconOff(){return this.options.icons.toggleOff}get nativeFocusableElement(){var e,i;return null!==(i=null===(e=this.focusableElement)||void 0===e?void 0:e.nativeElement)&&void 0!==i?i:null}get focused(){return(0,A.ER)(this.nativeFocusableElement)}get appearance(){return this.singleColor||this.value?this.options.appearances.checked:this.options.appearances.unchecked}get sizeM(){return"m"===this.size}get loaderSize(){return this.sizeM?"xs":"s"}get hostMode(){var e,i;return null!==(i=null===(e=this.modeDirective)||void 0===e?void 0:e.mode)&&void 0!==i?i:null}onChecked(e){this.value=e}onFocused(e){this.updateFocused(e)}onFocusVisible(e){this.updateFocusVisible(e)}getFallbackValue(){return!1}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(S.eq,10),t.GI1(t.kD9),t.GI1(b.Y,8),t.GI1(gt))},n.\u0275cmp=t.In1({type:n,selectors:[["tui-toggle"]],viewQuery:function(e,i){if(1&e&&t.CC$(Y,5),2&e){let o;t.wto(o=t.Gqi())&&(i.focusableElement=o.first)}},hostVars:4,hostBindings:function(e,i){2&e&&(t.e48("data-size",i.size)("data-mode",i.hostMode),t.eAK("_checked",i.value))},inputs:{singleColor:"singleColor",showIcons:"showIcons",showLoader:"showLoader",size:"size"},features:[t.M5G([(0,H.NK)(n),(0,P.q4)(n)]),t.eg9],decls:9,vars:16,consts:[["tuiWrapper","",3,"active","appearance","disabled","focus","hover","invalid","readOnly"],[1,"t-toggle"],["class","t-loader",3,"inheritColor","showLoader","size",4,"ngIf"],["class","t-icon-wrapper",4,"ngIf"],[1,"t-circle"],["automation-id","tui-toggle__checkbox","role","switch","type","checkbox",1,"t-checkbox",3,"disabled","id","tuiFocusable","tuiChecked","tuiCheckedChange","tuiFocusedChange","tuiFocusVisibleChange"],["focusableElement",""],[1,"t-loader",3,"inheritColor","showLoader","size"],[1,"t-icon-wrapper"],["automation-id","tui-toggle__check-icon","class","t-icon",3,"src",4,"polymorpheusOutlet","polymorpheusOutletContext"],["automation-id","tui-toggle__check-icon",1,"t-icon",3,"src"],["automation-id","tui-toggle__cancel-icon","class","t-icon t-icon_off",3,"src",4,"polymorpheusOutlet","polymorpheusOutletContext"],["automation-id","tui-toggle__cancel-icon",1,"t-icon","t-icon_off",3,"src"]],template:function(e,i){1&e&&(t.I0R(0,"div",0)(1,"div",1),t.yuY(2,G,1,3,"tui-loader",2)(3,Yt,2,4,"span",3),t.wR5(4,"div",4),t.yuY(5,Pt,1,3,"tui-loader",2)(6,Ct,2,4,"span",3),t.C$Y(),t.I0R(7,"input",5,6),t.iHE("tuiCheckedChange",function(g){return t.kNx(i.value,g)||(i.value=g),g}),t.qCj("tuiFocusedChange",function(g){return i.onFocused(g)})("tuiFocusVisibleChange",function(g){return i.onFocusVisible(g)}),t.C$Y()()),2&e&&(t.E7m("active",i.pseudoActive)("appearance",i.appearance)("disabled",i.computedDisabled)("focus",i.computedFocusVisible)("hover",i.pseudoHover)("invalid",i.computedInvalid)("readOnly",i.readOnly),t.yG2(2),t.E7m("ngIf",i.showLoader),t.yG2(),t.E7m("ngIf",i.showIcons&&!i.showLoader),t.yG2(2),t.E7m("ngIf",i.showLoader),t.yG2(),t.E7m("ngIf",i.showIcons&&!i.showLoader),t.yG2(),t.E7m("disabled",i.disabled)("id",i.id)("tuiFocusable",i.focusable),t.OKB("tuiChecked",i.value),t.e48("aria-checked",i.value))},dependencies:[p.Cb,R.Wu,h.S,f.u_,I.Af,D.g,w.O,V.h,N.w],styles:["[_nghost-%COMP%]{position:relative;display:inline-block;vertical-align:middle;overflow:hidden;border-radius:6.25rem}[data-size=m][_nghost-%COMP%]{width:2rem;height:1rem}[data-size=l][_nghost-%COMP%]{width:3rem;height:1.5rem}.t-checkbox[_ngcontent-%COMP%]{padding:0;margin:0;border-width:0;border-radius:inherit;background:none;font-size:inherit;line-height:inherit;font-weight:inherit;color:inherit;caret-color:currentColor;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;word-break:keep-all;-webkit-text-fill-color:currentColor;position:absolute;top:0;left:0;height:100%;width:100%;opacity:0;cursor:pointer}.t-checkbox[_ngcontent-%COMP%]:-webkit-autofill, .t-checkbox[_ngcontent-%COMP%]:-webkit-autofill:hover, .t-checkbox[_ngcontent-%COMP%]:-webkit-autofill:focus{caret-color:var(--tui-base-09);border-radius:inherit;color:inherit!important;background-color:transparent!important;-webkit-text-fill-color:var(--tui-text-01)!important;border-color:var(--tui-autofill);-webkit-box-shadow:0 0 0 100rem var(--tui-autofill) inset!important}._disabled[_nghost-%COMP%]   .t-checkbox[_ngcontent-%COMP%]{pointer-events:none;cursor:default}.t-toggle[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;display:flex;align-items:center;justify-content:center}[data-size=m][_nghost-%COMP%]   .t-toggle[_ngcontent-%COMP%]{width:3rem;height:1rem;transform:translate(-1rem)}[data-size=l][_nghost-%COMP%]   .t-toggle[_ngcontent-%COMP%]{width:4.5rem;height:1.5rem;transform:translate(-1.5rem)}._checked[_nghost-%COMP%]   .t-toggle[_ngcontent-%COMP%]{transform:translate(0)}.t-circle[_ngcontent-%COMP%]{margin:.125rem 0;flex-shrink:0;border-radius:100%;background-color:var(--tui-base-01)}._disabled[_nghost-%COMP%]   .t-circle_light[_ngcontent-%COMP%]{opacity:.24}[data-size=m][_nghost-%COMP%]   .t-circle[_ngcontent-%COMP%]{width:.75rem;height:.75rem}[data-size=l][_nghost-%COMP%]   .t-circle[_ngcontent-%COMP%]{width:1rem;height:1rem}._disabled[_nghost-%COMP%]   .t-circle[_ngcontent-%COMP%]{background-color:var(--tui-base-01)}.t-loader[_ngcontent-%COMP%]{min-width:auto}[_nghost-%COMP%]:not(._checked)   .t-loader[_ngcontent-%COMP%]{color:var(--tui-base-06)}[_nghost-%COMP%]:not(._checked)._disabled   .t-loader[_ngcontent-%COMP%]{color:var(--tui-base-05)}[_nghost-%COMP%]:not(._checked)[data-mode=onDark]   .t-loader[_ngcontent-%COMP%]{color:var(--tui-text-03-night)}[_nghost-%COMP%]:not(._checked)[data-mode=onDark]._disabled   .t-loader[_ngcontent-%COMP%]{color:var(--tui-clear-inverse-active)}[_nghost-%COMP%]:not(._checked)[data-mode=onLight]   .t-loader[_ngcontent-%COMP%]{color:var(--tui-text-03)}[_nghost-%COMP%]:not(._checked)[data-mode=onLight]._disabled   .t-loader[_ngcontent-%COMP%]{color:var(--tui-clear-active)}[data-size=m][_nghost-%COMP%]   .t-loader[_ngcontent-%COMP%]{width:.75rem;margin:0 .2rem;transform:scale(.75)}[data-size=l][_nghost-%COMP%]   .t-loader[_ngcontent-%COMP%]{width:1rem;margin:0 .25rem}.t-icon-wrapper[_ngcontent-%COMP%]{display:flex}.t-icon[_ngcontent-%COMP%]{opacity:.8}.t-icon_off[_ngcontent-%COMP%]{color:var(--tui-base-06)}._disabled[_nghost-%COMP%]   .t-icon_off[_ngcontent-%COMP%]{color:var(--tui-base-05)}[data-mode=onDark][_nghost-%COMP%]   .t-icon_off[_ngcontent-%COMP%]{color:var(--tui-text-03-night)}[data-mode=onDark]._disabled[_nghost-%COMP%]   .t-icon_off[_ngcontent-%COMP%]{color:var(--tui-clear-inverse-active)}[data-mode=onLight][_nghost-%COMP%]   .t-icon_off[_ngcontent-%COMP%]{color:var(--tui-text-03)}[data-mode=onLight]._disabled[_nghost-%COMP%]   .t-icon_off[_ngcontent-%COMP%]{color:var(--tui-clear-active)}[data-size=m][_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{width:1rem;height:1rem;transform:scale(.75)}[data-size=l][_nghost-%COMP%]   .t-icon[_ngcontent-%COMP%]{margin:0 .125rem;width:1.5rem;height:1.5rem}[_nghost-%COMP%]:hover   .t-icon[_ngcontent-%COMP%]{opacity:1}"],changeDetection:0}),n})(),ct=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.a4G({type:n}),n.\u0275inj=t.s3X({imports:[[f.MD,V.O,w.C,Q.u,N.I,D.W,h.g,R.Yt,p.Sk,I.Ux]]}),n})();var Dt=a(3320),J=a(6380),K=a(2740),W=a(2204),Et=a(9956),et=a(400),St=a(9880),it=a(1512),ut=a(9088),nt=a(964),Ut=a(1528),wt=a(1956),ie=a(4476);const oe=["qrcElement"];let se=(()=>{class n{constructor(e,i){this.renderer=e,this.sanitizer=i,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new t._w7,this.context=null}ngOnChanges(){var e=this;return(0,Ut.c)(function*(){yield e.createQRCode()})()}isValidQrCodeText(e){return!1===this.allowEmptyString?!(typeof e>"u"||""===e||"null"===e||null===e):!(typeof e>"u")}toDataURL(e){return new Promise((i,o)=>{(0,wt.g7)(this.qrdata,e,(g,y)=>{g?o(g):i(y)})})}toCanvas(e,i){return new Promise((o,g)=>{(0,wt.gH)(e,this.qrdata,i,y=>{y?g(y):o("success")})})}toSVG(e){return new Promise((i,o)=>{(0,wt.toString)(this.qrdata,e,(g,y)=>{g?o(g):i(y)})})}renderElement(e){for(const i of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,i);this.renderer.appendChild(this.qrcElement.nativeElement,e)}createQRCode(){var e=this;return(0,Ut.c)(function*(){e.version&&e.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),e.version=40):e.version&&e.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),e.version=1):void 0!==e.version&&isNaN(e.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),e.version=void 0);try{if(!e.isValidQrCodeText(e.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");e.isValidQrCodeText(e.qrdata)&&""===e.qrdata&&(e.qrdata=" ");const i={color:{dark:e.colorDark,light:e.colorLight},errorCorrectionLevel:e.errorCorrectionLevel,margin:e.margin,scale:e.scale,version:e.version,width:e.width},o=e.imageSrc,g=e.imageHeight||40,y=e.imageWidth||40;switch(e.elementType){case"canvas":{const $=e.renderer.createElement("canvas");e.context=$.getContext("2d"),e.toCanvas($,i).then(()=>{if(e.ariaLabel&&e.renderer.setAttribute($,"aria-label",`${e.ariaLabel}`),e.title&&e.renderer.setAttribute($,"title",`${e.title}`),o&&e.context){e.centerImage=new Image(y,g),o!==e.centerImage.src&&(e.centerImage.src=o),g!==e.centerImage.height&&(e.centerImage.height=g),y!==e.centerImage.width&&(e.centerImage.width=y);const k=e.centerImage;k&&(k.onload=()=>{e.context?.drawImage(k,$.width/2-y/2,$.height/2-g/2,y,g)})}e.renderElement($),e.emitQRCodeURL($)}).catch(k=>{console.error("[angularx-qrcode] canvas error:",k)});break}case"svg":{const $=e.renderer.createElement("div");e.toSVG(i).then(k=>{e.renderer.setProperty($,"innerHTML",k);const z=$.firstChild;e.renderer.setAttribute(z,"height",`${e.width}`),e.renderer.setAttribute(z,"width",`${e.width}`),e.renderElement(z),e.emitQRCodeURL(z)}).catch(k=>{console.error("[angularx-qrcode] svg error:",k)});break}default:{const $=e.renderer.createElement("img");e.toDataURL(i).then(k=>{e.alt&&$.setAttribute("alt",e.alt),e.ariaLabel&&$.setAttribute("aria-label",e.ariaLabel),$.setAttribute("src",k),e.title&&$.setAttribute("title",e.title),e.renderElement($),e.emitQRCodeURL($)}).catch(k=>{console.error("[angularx-qrcode] img/url error:",k)})}}}catch(i){console.error("[angularx-qrcode] Error generating QR Code:",i.message)}})()}emitQRCodeURL(e){const i=e.constructor.name;if(i===SVGSVGElement.name){const y=new Blob([e.outerHTML],{type:"image/svg+xml"}),$=URL.createObjectURL(y),k=this.sanitizer.bypassSecurityTrustUrl($);return void this.qrCodeURL.emit(k)}let o="";i===HTMLCanvasElement.name&&(o=e.toDataURL("image/png")),i===HTMLImageElement.name&&(o=e.src),fetch(o).then(g=>g.blob()).then(g=>URL.createObjectURL(g)).then(g=>this.sanitizer.bypassSecurityTrustUrl(g)).then(g=>{this.qrCodeURL.emit(g)}).catch(g=>{console.error("[angularx-qrcode] Error when fetching image/png URL: "+g)})}static#t=this.\u0275fac=function(i){return new(i||n)(t.GI1(t.q87),t.GI1(ie.mI))};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["qrcode"]],viewQuery:function(i,o){if(1&i&&t.CC$(oe,7),2&i){let g;t.wto(g=t.Gqi())&&(o.qrcElement=g.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[t.SYr],decls:2,vars:2,consts:[["qrcElement",""]],template:function(i,o){1&i&&t.wR5(0,"div",null,0),2&i&&t.m8U(o.cssClass)},encapsulation:2,changeDetection:0})}return n})(),ae=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.a4G({type:n});static#n=this.\u0275inj=t.s3X({})}return n})();var Tt=a(1560);let re=(()=>{class n{saveAsImage(e,i="qrcode"){let o=null;if(o=e.qrcElement.nativeElement.querySelector("canvas").toDataURL("image/png"),!o)return;const g=function _e(n){const E=n.split(";base64,"),e=E[0].split(":")[1],i=window.atob(E[1]),o=new Uint8Array(i.length);for(let g=0;g<i.length;++g)o[g]=i.charCodeAt(g);return new Blob([o],{type:e})}(o),y=new Blob([g],{type:"image/png"}),$=window.URL.createObjectURL(y),k=document.createElement("a");k.href=$,k.download=i,k.click()}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-qr-code"]],inputs:{data:"data"},standalone:!0,features:[t.M5G([]),t.UHJ],decls:10,vars:3,consts:()=>{let e;return e="Scarica",[[1,"relative","qr-container"],[1,"download-container","bg-black/50","absolute","top-0","bottom-0","end-0","start-0","flex","items-center","justify-center"],["tuiButton","","type","button","appearance","primary",3,"click"],[1,"flex","items-center"],e,[1,"flex","justify-center",3,"elementType","qrdata","width"],["publicQR",""]]},template:function(i,o){if(1&i){const g=t.KQA();t.I0R(0,"div",0)(1,"div",1)(2,"button",2),t.qCj("click",function(){t.usT(g);const $=t.Gew(9);return t.CGJ(o.saveAsImage($))}),t.I0R(3,"span",3)(4,"mat-icon"),t.OEk(5,"download_file"),t.C$Y(),t.I0R(6,"span"),t.aS0(7,4),t.C$Y()()()(),t.wR5(8,"qrcode",5,6),t.C$Y()}2&i&&(t.yG2(8),t.E7m("elementType","canvas")("qrdata",o.data)("width",256))},dependencies:[ae,se,Tt.qL,m.CI,m.Kw],styles:["[_nghost-%COMP%]   .qr-container[_ngcontent-%COMP%]   .download-container[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .qr-container[_ngcontent-%COMP%]:hover   .download-container[_ngcontent-%COMP%]{display:flex}"],changeDetection:0})}return n})();var le=a(3040);function ce(n,E){1&n&&(t.I0R(0,"span",26),t.aS0(1,27),t.C$Y())}function ue(n,E){1&n&&(t.I0R(0,"span",28),t.aS0(1,29),t.C$Y())}function de(n,E){if(1&n&&t.wR5(0,"app-qr-code",11),2&n){const e=t.GaO();t.E7m("data",e.publicUrl)}}const xt=n=>({hidden:n});function Ce(n,E){if(1&n&&(t.I0R(0,"p",2),t.aS0(1,30),t.C$Y(),t.I0R(2,"div",4)(3,"span"),t.aS0(4,31),t.C$Y(),t.I0R(5,"div",32)(6,"div",33)(7,"tui-input-date",34),t.SAx(8),t.aS0(9,35),t.k70(),t.C$Y(),t.wR5(10,"app-errors",9),t.C$Y(),t.I0R(11,"div",36)(12,"tui-input-time",37),t.SAx(13),t.aS0(14,38),t.k70(),t.C$Y(),t.I0R(15,"span",2),t.aS0(16,39),t.C$Y(),t.wR5(17,"app-errors",9),t.C$Y()()(),t.I0R(18,"div",4)(19,"span"),t.aS0(20,40),t.C$Y(),t.I0R(21,"div",32)(22,"div",33)(23,"tui-input-date",41),t.SAx(24),t.aS0(25,42),t.k70(),t.C$Y(),t.wR5(26,"app-errors",9),t.C$Y(),t.I0R(27,"div",36)(28,"tui-input-time",43),t.SAx(29),t.aS0(30,44),t.k70(),t.C$Y(),t.I0R(31,"span",2),t.aS0(32,45),t.C$Y(),t.wR5(33,"app-errors",9),t.C$Y()()()),2&n){const e=t.GaO();t.yG2(10),t.E7m("errors",e.e("public_from_date")),t.yG2(),t.E7m("ngClass",t.S45(6,xt,!e.form.value.public_from_date)),t.yG2(6),t.E7m("errors",e.e("public_from_time")),t.yG2(9),t.E7m("errors",e.e("public_to_date")),t.yG2(),t.E7m("ngClass",t.S45(8,xt,!e.form.value.public_to_date)),t.yG2(6),t.E7m("errors",e.e("public_to_time"))}}function ge(n,E){if(1&n&&(t.I0R(0,"p",2),t.aS0(1,46),t.C$Y(),t.I0R(2,"div",4)(3,"span"),t.aS0(4,47),t.C$Y(),t.I0R(5,"div",32)(6,"div",33)(7,"tui-input-time",48),t.SAx(8),t.aS0(9,49),t.k70(),t.C$Y(),t.I0R(10,"span",2),t.aS0(11,50),t.C$Y(),t.wR5(12,"app-errors",9),t.C$Y(),t.I0R(13,"div",51)(14,"tui-input-time",52),t.SAx(15),t.aS0(16,53),t.k70(),t.C$Y(),t.I0R(17,"span",2),t.aS0(18,54),t.C$Y(),t.wR5(19,"app-errors",9),t.C$Y()()()),2&n){const e=t.GaO();t.yG2(12),t.E7m("errors",e.e("daily_from")),t.yG2(7),t.E7m("errors",e.e("daily_to"))}}function Ee(n,E){1&n&&(t.I0R(0,"span",26),t.aS0(1,55),t.C$Y())}function Se(n,E){1&n&&(t.I0R(0,"span",28),t.aS0(1,56),t.C$Y())}function Te(n,E){if(1&n&&t.wR5(0,"app-qr-code",11),2&n){const e=t.GaO();t.E7m("data",e.privateUrl)}}let me=(()=>{class n{constructor(e){this.context=e,this.destroy$=(0,t.uUt)(r.UF),this.service=(0,t.uUt)(_.S),this.notifications=(0,t.uUt)(u.E),this.urlTo=(0,t.uUt)(ut.S),this.form=new S.WC({private_visible:new S.Ku,public_from_date:new S.Ku,public_from_time:new S.Ku,public_to_date:new S.Ku,public_to_time:new S.Ku,public_visible:new S.Ku,daily_from:new S.Ku,daily_to:new S.Ku}),this.submitted=!1,this.dailyVisibilityOpen=!1,this.absoluteVisibilityOpen=!1,this.saving=(0,t.OCB)(!1),this.privateUrl=`${location.origin}/${this.urlTo.transform(this.context.data?.category?.secret_desc??this.context.data?.category?.secret??"","menuCategory.private")}`,this.publicUrl=`${location.origin}/${this.urlTo.transform(this.context.data?.category?.id??"","menuCategory.public")}`,this.e=this.getErrorsFor}ngOnInit(){const e=this.context.data.category.visibility;e?this.updateForm(e):this.form.reset()}submit(e={}){this.submitted=!0;const i=this.context.data?.category?.id;this.form.invalid||!i||(this.saving.set(!0),this.service.updateVisibility(i,{...this.formVal(),...e}).pipe((0,d.a)(this.destroy$),(0,C.U)(()=>this.saving.set(!1))).subscribe({next:o=>{this.notifications.fireSnackBar("Visibilit\xE0 aggiornata."),this.context.completeWith(o)},error:o=>{this.manageError(o)}}))}cancel(){(this.form.touched||this.form.dirty)&&!confirm("Sei sicuro di voler annullare le modifiche fatte?")||this.context.completeWith(null)}formVal(){const e={public_visible:this.form.value.public_visible,private_visible:this.form.value.private_visible,daily_from:this.form.value.daily_from instanceof et.uc?(0,nt.Ez)(this.form.value.daily_from):"",daily_to:this.form.value.daily_to instanceof et.uc?(0,nt.Ez)(this.form.value.daily_to):""},i=this.form.value;if(i.public_from_date instanceof et.EK){const o=i.public_from_time instanceof et.uc?i.public_from_time:new et.uc(0,0);e.public_from=(0,nt.Qx)(i.public_from_date,o)}else e.public_from="";if(i.public_to_date instanceof et.EK){const o=i.public_to_time instanceof et.uc?i.public_to_time:new et.uc(0,0);e.public_to=(0,nt.Qx)(i.public_to_date,o)}else e.public_to="";return e}togglePrivateVisible(){this.form.patchValue({private_visible:!this.form.value.private_visible})}togglePublicVisible(){this.form.patchValue({public_visible:!this.form.value.public_visible})}updateForm(e){if(!e)return;const i={public_visible:e.public_visible,private_visible:e.private_visible,public_from_date:e.public_from?(0,nt._0)(e.public_from):null,public_from_time:e.public_from?(0,nt.Q1)(e.public_from):null,public_to_date:e.public_to?(0,nt._0)(e.public_to):null,public_to_time:e.public_to?(0,nt.Q1)(e.public_to):null,daily_from:e.daily_from?(0,nt.Q1)(e.daily_from):null,daily_to:e.daily_to?(0,nt.Q1)(e.daily_to):null};i.public_from_time instanceof et.uc&&0===i.public_from_time?.hours&&0===i.public_from_time?.minutes&&(i.public_from_time=null),i.public_to_time instanceof et.uc&&0===i.public_to_time?.hours&&0===i.public_to_time?.minutes&&(i.public_to_time=null),this.form.patchValue(i),(e.daily_from||e.daily_to)&&(this.dailyVisibilityOpen=!0),(e.public_from||e.public_to)&&(this.absoluteVisibilityOpen=!0)}getErrorsFor(e){const i=this.form.get(e);return i&&(this.submitted||i.touched||i.dirty)?i.errors:null}manageError(e){422!=e.status||"object"!=typeof e.error.details||"cannot_publish"!=e.error.details.error_code?this.notifications.error((0,T.mk)(e)||"Errore nel salvataggio."):this.notifications.confirm(e.error.message??"Pubblicazione fallita.",{yes:"Forza pubblicazione",no:"Annulla",title:"Errori nella pubblicazione"}).pipe((0,d.a)(this.destroy$)).subscribe({next:i=>{i&&this.force()},error:i=>{console.warn("error",i)}})}force(){this.submit({force:!0})}static#t=this.\u0275fac=function(i){return new(i||n)(t.GI1(I.C0))};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-timestamps-modal"]],standalone:!0,features:[t.M5G([r.UF,ut.S]),t.UHJ],decls:53,vars:21,consts:()=>{let e,i,o,g,y,$,k,z,q,Z,X,at,_t,rt,F,ft,pt,Ot,It,Mt,ht,Rt,Nt,At,yt;return e="Se attivata, il men\xF9 sar\xE0 visibile nella pagina pubblica.",i="Programma visibilit\xE0 assoluta",o="Programma visibilit\xE0 giornaliera",g="Se attivata, solo gli utenti che conoscono il link potranno visualizzare la pagina.",y="Conferma",$="Annulla",k="Attivata",z="Disattivata",q="\xC8 possibile mostrare o nascondere il me\xF9 nella pagina pubblica in modo programmatico da una certa data fino ad un altra. Se queste date non vengono inserite, il men\xF9 sar\xE0 sempre visibile.",Z="Men\xF9 visibile dal giorno:",X="Giorno",at="Ora",_t="Formato 24 ore.",rt="Fino al giorno:",F="Giorno",ft="Ora",pt="Formato 24 ore.",Ot="\xC8 possibile mostrare il men\xF9 nella pagina pubblica solo in determinate fasce orarie. Se non vengono specificate fasce orarie, il men\xF9 sar\xE0 sempre visibile.",It="Orari:",Mt="Dalle ore",ht="Formato 24 ore.",Rt="fino alle ore",Nt="Formato 24 ore.",At="Attivata",yt="Disattivata",[[3,"formGroup","ngSubmit"],[3,"overlay","showLoader"],[1,"text-sm","text-slate-400"],e,[1,"mb-3"],[1,"flex","items-center"],[1,"me-1",3,"formControlName"],[1,"cursor-pointer",3,"click"],["class","text-green-700"],[3,"errors"],[3,"expanded"],[3,"data"],[1,"flex","items-center","mb-3"],["target","_blank","tuiLink","",1,"me-2","text-xs",3,"href"],[3,"content"],[3,"open"],[1,"text-lg"],i,["tuiAccordionItemContent",""],o,[1,"my-3"],g,["tuiButton","","type","submit","size","l",1,"me-1"],y,["tuiButton","","appearance","outline","type","button","size","l",3,"click"],$,[1,"text-green-700"],k,[1,"text-slate-700"],z,q,Z,[1,"flex","items-top"],[1,"flex","grow","flex-col"],["formControlName","public_from_date",1,"me-2","mb-1"],X,[1,"grow","flex","flex-col",3,"ngClass"],["formControlName","public_from_time",1,"mb-1"],at,_t,rt,["formControlName","public_to_date",1,"me-2","mb-1"],F,["formControlName","public_to_time",1,"mb-1"],ft,pt,Ot,It,["formControlName","daily_from",1,"me-2","mb-1"],Mt,ht,[1,"grow","flex","flex-col"],["formControlName","daily_to",1,"mb-1"],Rt,Nt,At,yt]},template:function(i,o){1&i&&(t.I0R(0,"form",0),t.qCj("ngSubmit",function(){return o.submit()}),t.I0R(1,"tui-loader",1)(2,"h4"),t.OEk(3,"Visibilit\xe0 pubblica"),t.C$Y(),t.I0R(4,"p",2),t.aS0(5,3),t.C$Y(),t.I0R(6,"div",4)(7,"div",5),t.wR5(8,"tui-toggle",6),t.I0R(9,"span",7),t.qCj("click",function(){return o.togglePublicVisible()}),t.yuY(10,ce,2,0,"span",8)(11,ue,2,0),t.C$Y()(),t.wR5(12,"app-errors",9),t.C$Y(),t.I0R(13,"tui-expand",10),t.yuY(14,de,1,1,"app-qr-code",11),t.I0R(15,"div",12)(16,"a",13),t.OEk(17),t.C$Y(),t.wR5(18,"app-copy-content",14),t.C$Y(),t.I0R(19,"tui-accordion")(20,"tui-accordion-item",15)(21,"span",16),t.aS0(22,17),t.C$Y(),t.yuY(23,Ce,34,10,"ng-template",18),t.C$Y(),t.I0R(24,"tui-accordion-item",15)(25,"span",16),t.aS0(26,19),t.C$Y(),t.yuY(27,ge,20,2,"ng-template",18),t.C$Y()()(),t.wR5(28,"hr",20),t.I0R(29,"h4"),t.OEk(30,"Visibilit\xe0 privata"),t.C$Y(),t.I0R(31,"p",2),t.aS0(32,21),t.C$Y(),t.I0R(33,"div",4)(34,"div",5),t.wR5(35,"tui-toggle",6),t.I0R(36,"span",7),t.qCj("click",function(){return o.togglePrivateVisible()}),t.yuY(37,Ee,2,0,"span",8)(38,Se,2,0),t.C$Y()(),t.wR5(39,"app-errors",9),t.C$Y(),t.I0R(40,"tui-expand",10),t.yuY(41,Te,1,1,"app-qr-code",11),t.I0R(42,"div",12)(43,"a",13),t.OEk(44),t.C$Y(),t.wR5(45,"app-copy-content",14),t.C$Y()(),t.I0R(46,"div",5)(47,"button",22),t.SAx(48),t.aS0(49,23),t.k70(),t.C$Y(),t.I0R(50,"button",24),t.qCj("click",function(){return o.cancel()}),t.SAx(51),t.aS0(52,25),t.k70(),t.C$Y()()()()),2&i&&(t.E7m("formGroup",o.form),t.yG2(),t.E7m("overlay",!0)("showLoader",o.saving()),t.yG2(7),t.E7m("formControlName","public_visible"),t.yG2(2),t.C0Y(10,o.form.value.public_visible?10:11),t.yG2(2),t.E7m("errors",o.e("public_visible")),t.yG2(),t.E7m("expanded",o.form.value.public_visible),t.yG2(),t.C0Y(14,o.publicUrl?14:-1),t.yG2(2),t._6D("href",o.publicUrl,t.K6U),t.yG2(),t.cNF(o.publicUrl),t.yG2(),t.E7m("content",o.publicUrl),t.yG2(2),t.E7m("open",o.absoluteVisibilityOpen),t.yG2(4),t.E7m("open",o.dailyVisibilityOpen),t.yG2(11),t.E7m("formControlName","private_visible"),t.yG2(2),t.C0Y(37,o.form.value.private_visible?37:38),t.yG2(2),t.E7m("errors",o.e("private_visible")),t.yG2(),t.E7m("expanded",o.form.value.private_visible),t.yG2(),t.C0Y(41,o.privateUrl?41:-1),t.yG2(2),t._6D("href",o.privateUrl,t.K6U),t.yG2(),t.cNF(o.privateUrl),t.yG2(),t.E7m("content",o.privateUrl))},dependencies:[ct,Bt,Et.g,S.sl,S.sz,S.ue,S.u,S.uW,S.Wo,Dt.K6,m.CI,m.Kw,J.iO,J.yc,J.Ml,K.IZ,K.iw,K.gt,St.kh,St.st,it.w,it.C,p.Sk,p.Cb,re,f.QF,W.Ep,W.Ix,W._Q,W.Up,le.M],changeDetection:0})}return n})();function fe(n,E){1&n&&(t.I0R(0,"span",14),t.aS0(1,15),t.C$Y())}function pe(n,E){1&n&&(t.I0R(0,"span",16),t.aS0(1,17),t.C$Y())}function Oe(n,E){if(1&n&&(t.I0R(0,"span",4),t.aS0(1,20),t.C$Y(),t.I0R(2,"span",4),t.OEk(3),t.wVc(4,"date"),t.C$Y()),2&n){const e=t.GaO(3);t.yG2(3),t.cNF(t.g7$(4,1,e.daily_from(),"HH:mm"))}}function Ie(n,E){if(1&n&&(t.I0R(0,"span",4),t.OEk(1,"fino alle ore"),t.C$Y(),t.I0R(2,"span",4),t.OEk(3),t.wVc(4,"date"),t.C$Y()),2&n){const e=t.GaO(3);t.yG2(3),t.cNF(t.g7$(4,1,e.daily_to(),"HH:mm"))}}function Me(n,E){if(1&n&&(t.I0R(0,"div",3)(1,"span",4),t.aS0(2,19),t.C$Y(),t.yuY(3,Oe,5,4)(4,Ie,5,4),t.C$Y()),2&n){const e=t.GaO(2);t.yG2(3),t.C0Y(3,e.daily_from()?3:-1),t.yG2(),t.C0Y(4,e.daily_to()?4:-1)}}function he(n,E){if(1&n&&(t.I0R(0,"span"),t.OEk(1),t.wVc(2,"date"),t.C$Y()),2&n){const e=t.GaO(4);t.yG2(),t.cNF(t.g7$(2,1,e.public_from(),"HH:mm"))}}function Re(n,E){if(1&n&&(t.I0R(0,"div",3)(1,"span",4),t.aS0(2,21),t.C$Y(),t.I0R(3,"span",4),t.OEk(4),t.wVc(5,"date"),t.C$Y(),t.yuY(6,he,3,4,"span"),t.wVc(7,"date"),t.C$Y()),2&n){const e=t.GaO(3);t.yG2(4),t.cNF(t.g7$(5,2,e.public_from(),"EEEE d MMMM y")),t.yG2(2),t.C0Y(6,"00:00"!=t.g7$(7,5,e.public_from(),"HH:mm")?6:-1)}}function Ne(n,E){if(1&n&&(t.I0R(0,"span"),t.OEk(1),t.wVc(2,"date"),t.C$Y()),2&n){const e=t.GaO(4);t.yG2(),t.cNF(t.g7$(2,1,e.public_to(),"HH:mm"))}}function Ae(n,E){if(1&n&&(t.I0R(0,"div",3)(1,"span",4),t.aS0(2,22),t.C$Y(),t.I0R(3,"span",4),t.OEk(4),t.wVc(5,"date"),t.C$Y(),t.yuY(6,Ne,3,4,"span"),t.wVc(7,"date"),t.C$Y()),2&n){const e=t.GaO(3);t.yG2(4),t.cNF(t.g7$(5,2,e.public_to(),"EEEE d MMMM y")),t.yG2(2),t.C0Y(6,"00:00"!=t.g7$(7,5,e.public_to(),"HH:mm")?6:-1)}}function ye(n,E){if(1&n&&(t.I0R(0,"div"),t.yuY(1,Re,8,8,"div",18)(2,Ae,8,8,"div",18),t.C$Y()),2&n){const e=t.GaO(2);t.yG2(),t.C0Y(1,e.public_from()?1:-1),t.yG2(),t.C0Y(2,e.public_to()?2:-1)}}function Pe(n,E){if(1&n&&(t.yuY(0,Me,5,2,"div",18),t.I0R(1,"div",2),t.yuY(2,ye,3,2,"div"),t.C$Y()),2&n){const e=t.GaO();t.C0Y(0,e.daily_from()||e.daily_to()?0:-1),t.yG2(2),t.C0Y(2,e.public_from()||e.public_to()?2:-1)}}function Le(n,E){1&n&&(t.I0R(0,"span",14),t.aS0(1,23),t.C$Y())}function De(n,E){1&n&&(t.I0R(0,"span",16),t.aS0(1,24),t.C$Y())}let $e=(()=>{class n{constructor(){this.dialogs=(0,t.uUt)(L._k),this.injector=(0,t.uUt)(t.zZn),this.item=(0,t.OCB)(null),this.private_visible=(0,t.S6b)(()=>this.item()?.visibility?.private_visible??!1),this.public_from=(0,t.S6b)(()=>this.item()?.visibility?.public_from),this.public_to=(0,t.S6b)(()=>this.item()?.visibility?.public_to),this.daily_from=(0,t.S6b)(()=>this.item()?.visibility?.daily_from),this.daily_to=(0,t.S6b)(()=>this.item()?.visibility?.daily_to),this.public_visible=(0,t.S6b)(()=>this.item()?.visibility?.public_visible??!1),this.categoryChange=new t._w7}set category(e){this.item.set(e??null)}get category(){return this.item()}editTimestamps(){this.dialogs.open(new I.WO(me,this.injector),{data:{category:this.item()},dismissible:!1,closeable:!0,label:"Modifica visibilit\xE0"}).subscribe({next:e=>{e&&(this.item.set(e),this.categoryChange.emit(e))}})}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-eip-category-visibility"]],inputs:{category:"category"},outputs:{categoryChange:"categoryChange"},standalone:!0,features:[t.M5G([r.UF]),t.UHJ],decls:27,vars:3,consts:()=>{let e,i,o,g,y,$,k,z,q,Z,X,at,_t,rt;return e="Visibilit\xE0",i="Visibilit\xE0",o="pubblica",g="Visibilit\xE0",y="privata",$="Modifica visibilit\xE0",k="Attivata",z="Disattivata",q="Visibile",Z="dalle ore",X="Da",at="fino a",_t="Attivata",rt="Disattivata",[[1,"mb-1","me-1"],e,[1,"flex","flex-col"],[1,"flex","items-center"],[1,"me-1"],i,[1,"me-2"],o,["class","me-2 text-green-700"],["class","flex flex-col"],g,y,["type","button","tuiButton","","size","m","appearance","flat",3,"click"],$,[1,"me-2","text-green-700"],k,[1,"me-2","text-slate-700"],z,["class","flex items-center"],q,Z,X,at,_t,rt]},template:function(i,o){1&i&&(t.I0R(0,"h4",0),t.aS0(1,1),t.C$Y(),t.I0R(2,"div",2)(3,"div",3)(4,"span",3)(5,"span",4),t.aS0(6,5),t.C$Y(),t.I0R(7,"b",6),t.aS0(8,7),t.C$Y()(),t.yuY(9,fe,2,0,"span",8)(10,pe,2,0)(11,Pe,3,2,"div",9),t.C$Y()(),t.I0R(12,"div",2)(13,"div",3)(14,"span",3)(15,"span",4),t.aS0(16,10),t.C$Y(),t.I0R(17,"b",6),t.aS0(18,11),t.C$Y()(),t.yuY(19,Le,2,0,"span",8)(20,De,2,0),t.C$Y()(),t.I0R(21,"button",12),t.qCj("click",function(){return o.editTimestamps()}),t.I0R(22,"span",3)(23,"mat-icon"),t.OEk(24,"edit"),t.C$Y(),t.I0R(25,"span"),t.aS0(26,13),t.C$Y()()()),2&i&&(t.yG2(9),t.C0Y(9,o.public_visible()?9:10),t.yG2(2),t.C0Y(11,o.public_visible()?11:-1),t.yG2(8),t.C0Y(19,o.private_visible()?19:20))},dependencies:[ct,S.sl,f.y,m.CI,m.Kw,Tt.qL],changeDetection:0})}return n})();var be=a(5004),ot=a(466),j=a(4336),Ge=a(2904);function Ye(n,E){if(1&n&&t.wR5(0,"i"),2&n){const e=t.GaO();t.uQ9("align-self-center fas fa-fw fa-",e.icon,"")}}function ve(n,E){if(1&n&&(t.I0R(0,"span",3),t.OEk(1),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.oRS(" ",e.humanStatus," ")}}const Be=[[["","title",""]]],we=n=>({color:n}),ke=["[title]"];let Ue=(()=>{class n extends Ge.c{constructor(){super(...arguments),this.configs={active:{text:"Attivo",color:"var(--tui-positive, lime)",icon:"check"},deleted:{text:"Eliminato",color:"red",icon:"trash"}}}static#t=this.\u0275fac=(()=>{let e;return function(o){return(e||(e=t.otF(n)))(o||n)}})();static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-menu-category-status"]],inputs:{status:"status"},standalone:!0,features:[t.eg9,t.UHJ],ngContentSelectors:ke,decls:7,vars:5,consts:[[1,"d-flex","flex-column"],[1,"d-flex","flex-row",3,"ngStyle"],[3,"class",4,"ngIf"],[1,"align-self-center"],["customTitle",""],["class","align-self-center",4,"ngIf"]],template:function(i,o){if(1&i&&(t.kPM(Be),t.I0R(0,"span",0)(1,"span",1),t.yuY(2,Ye,1,3,"i",2),t.I0R(3,"span",3,4),t._Xx(5),t.C$Y(),t.yuY(6,ve,2,1,"span",5),t.C$Y()()),2&i){const g=t.Gew(4);t.yG2(),t.E7m("ngStyle",t.S45(3,we,o.color)),t.yG2(),t.E7m("ngIf",o.validStatus&&o.validConfig),t.yG2(4),t.E7m("ngIf",!g.hasChildNodes())}},dependencies:[f.Qt,f.u_],encapsulation:2,changeDetection:0})}return n})();function xe(n,E){if(1&n){const e=t.KQA();t.I0R(0,"tui-data-list")(1,"button",2),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.delete())}),t.I0R(2,"span",3)(3,"mat-icon",4),t.OEk(4,"delete"),t.C$Y(),t.I0R(5,"span"),t.aS0(6,5),t.C$Y()()()()}}const ze=n=>({rotate180:n});function He(n,E){if(1&n&&(t.I0R(0,"tui-hosted-dropdown",1,6)(2,"button",7)(3,"span",3),t.wR5(4,"app-menu-category-status",8),t.I0R(5,"mat-icon",9),t.OEk(6,"expand_more"),t.C$Y()()()()),2&n){const e=t.Gew(1),i=t.GaO(),o=t.Gew(1);t.E7m("content",o),t.yG2(4),t.E7m("status",i.category.status),t.yG2(),t.E7m("ngClass",t.S45(3,ze,e.open))}}let Ve=(()=>{class n{constructor(){this.notifications=(0,t.uUt)(u.E),this.destroy$=(0,t.uUt)(r.UF),this.deleteCategory=new t._w7,this.statusChange=new t._w7,this.categoryChange=new t._w7,this.category=null}delete(){this.notifications.confirm("Sei sicuro di voler eliminare la categoria?",{yes:"S\xEC, elimina la categoria",no:"Annulla"}).pipe((0,d.a)(this.destroy$)).subscribe({next:e=>{e&&this.deleteCategory.emit()}})}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-edit-menu-category-status"]],inputs:{category:"category"},outputs:{deleteCategory:"deleteCategory",statusChange:"statusChange",categoryChange:"categoryChange"},standalone:!0,features:[t.M5G([r.UF]),t.UHJ],decls:3,vars:1,consts:()=>{let e;return e="Elimina",[["dropdownContent",""],[3,"content"],["tuiOption","",3,"click"],[1,"flex","items-center"],[1,"me-1"],e,["dropdown",""],["tuiButton","","type","button","appearance","outline","size","l"],[1,"me-1",3,"status"],[1,"animation-speed-2",3,"ngClass"]]},template:function(i,o){1&i&&t.yuY(0,xe,7,0,"ng-template",null,0,t.gJz)(2,He,7,5,"tui-hosted-dropdown",1),2&i&&(t.yG2(2),t.C0Y(2,o.category&&o.category.status?2:-1))},dependencies:[ot.GE,ot.Qw,j.A$,j.yi,j.sP,Tt.qL,Ue,m.CI,m.Kw,f.QF],encapsulation:2})}return n})();var zt=a(4e3),Fe=a(6684),Ht=a(2300),dt=a(3797),mt=a(8048);const Xe=["*"];let Qe=(()=>{class n{constructor(){this.destroy$=(0,t.uUt)(r.UF),this.notifications=(0,t.uUt)(u.E),this.categoriesService=(0,t.uUt)(_.S),this.removingPrice=(0,t.OCB)(!1),this.searchingDishes=(0,t.OCB)(!1),this.savingPrice=(0,t.OCB)(!1),this.loading=(0,t.S6b)(()=>this.savingPrice()||this.searchingDishes()||this.removingPrice()),this.categoryChanged=new t._w7,this.category=null,this.price=new S.Ku(null)}ngOnInit(){this.price.valueChanges.pipe((0,d.a)(this.destroy$),(0,zt.a)(),(0,Fe.I)(e=>e!=this.category?.price),(0,Ht.o)(1500)).subscribe({next:e=>this.updateRemote(e)})}ngOnChanges(e){e.category&&this.price.patchValue(this.category?.price??null)}updateRemote(e){const i=this.category?.id;i&&(this.updateRemoteSub?.unsubscribe(),this.savingPrice.set(!0),this.updateRemoteSub=this.categoriesService.update(i,{price:e}).pipe((0,d.a)(this.destroy$),(0,C.U)(()=>this.savingPrice.set(!1))).subscribe({next:o=>{this.category=o,this.categoryChanged.emit(o),this.notifications.fireSnackBar("Prezzo salvato.")},error:o=>{this.notifications.fireSnackBar((0,T.mk)(o)||"Qualcosa \xE8 andato storto nel salvataggio del prezzo.")}}))}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-category-price"]],inputs:{category:"category"},outputs:{categoryChanged:"categoryChanged"},standalone:!0,features:[t.M5G([r.UF]),t.SYr,t.UHJ],ngContentSelectors:Xe,decls:2,vars:1,consts:[["tuiTextfieldSize","l","tuiTextfieldPostfix","\u20ac",3,"formControl"]],template:function(i,o){1&i&&(t.kPM(),t.I0R(0,"tui-input",0),t._Xx(1),t.C$Y()),2&i&&t.E7m("formControl",o.price)},dependencies:[dt.CQ,dt.Oo,dt.cP,mt.aS,mt.rD,mt.We,S.sl,S.ue,S.ug,St.kh,m.CI],encapsulation:2,changeDetection:0})}return n})();function Je(n,E){1&n&&(t.SAx(0),t.aS0(1,6),t.k70())}function Ke(n,E){1&n&&(t.SAx(0),t.aS0(1,7),t.k70())}function je(n,E){if(1&n&&(t.I0R(0,"a",20),t.wVc(1,"urlTo"),t.I0R(2,"span",2)(3,"mat-icon",3),t.OEk(4,"link"),t.C$Y(),t.I0R(5,"span"),t.aS0(6,24),t.C$Y()()()),2&n){const e=t.GaO(3);t.E7m("routerLink",t.g7$(1,1,e.category.id,"menuCategory.public"))}}function We(n,E){if(1&n&&(t.I0R(0,"a",20),t.wVc(1,"urlTo"),t.I0R(2,"span",2)(3,"mat-icon",3),t.OEk(4,"share"),t.C$Y(),t.I0R(5,"span"),t.aS0(6,25),t.C$Y()()()),2&n){const e=t.GaO(3);t.E7m("routerLink",t.g7$(1,1,e.category.secret,"menuCategory.private"))}}function qe(n,E){if(1&n){const e=t.KQA();t.I0R(0,"tui-data-list")(1,"button",20)(2,"span",2)(3,"mat-icon",3),t.OEk(4,"content_copy"),t.C$Y(),t.I0R(5,"span"),t.aS0(6,21),t.C$Y()()(),t.yuY(7,je,7,4,"a",20)(8,We,7,4,"a",20),t.I0R(9,"button",22),t.qCj("click",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.confirmAndDelete())}),t.I0R(10,"span",2)(11,"mat-icon",3),t.OEk(12,"delete"),t.C$Y(),t.I0R(13,"span"),t.aS0(14,23),t.C$Y()()()()}if(2&n){const e=t.GaO(2);t.yG2(),t.E7m("routerLink","duplicate"),t.yG2(6),t.C0Y(7,!0===(null==e.category.visibility?null:e.category.visibility.public_visible)?7:-1),t.yG2(),t.C0Y(8,!0===(null==e.category.visibility?null:e.category.visibility.private_visible)?8:-1)}}function Ze(n,E){if(1&n){const e=t.KQA();t.I0R(0,"h4",9),t.aS0(1,26),t.C$Y(),t.I0R(2,"app-name-desc-eip",27),t.qCj("submittedChanges",function(o){t.usT(e);const g=t.GaO(2);return t.CGJ(g.saveNameDesc(o))}),t.C$Y()}if(2&n){const e=t.GaO(2);t.yG2(2),t.E7m("translations",e.category.translations)}}function tn(n,E){if(1&n){const e=t.KQA();t.I0R(0,"app-eip-category-visibility",28),t.iHE("categoryChange",function(o){t.usT(e);const g=t.GaO(2);return t.kNx(g.category,o)||(g.category=o),t.CGJ(o)}),t.C$Y()}if(2&n){const e=t.GaO(2);t.OKB("category",e.category)}}function en(n,E){if(1&n){const e=t.KQA();t.I0R(0,"div",8)(1,"div")(2,"h4",9),t.aS0(3,10),t.C$Y(),t.wR5(4,"app-show-images",11),t.I0R(5,"div",0)(6,"h4",9),t.aS0(7,12),t.C$Y(),t.I0R(8,"app-edit-menu-category-status",13),t.qCj("deleteCategory",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.deleteCategory())})("statusChange",function(o){t.usT(e);const g=t.GaO();return t.CGJ(g.updateStatus(o))}),t.iHE("categoryChange",function(o){t.usT(e);const g=t.GaO();return t.kNx(g.category,o)||(g.category=o),t.CGJ(o)}),t.C$Y()(),t.I0R(9,"div",0)(10,"app-category-price",14),t.qCj("categoryChanged",function(o){t.usT(e);const g=t.GaO();return t.CGJ(g.setCategory(o))}),t.SAx(11),t.aS0(12,15),t.k70(),t.C$Y()()(),t.yuY(13,qe,15,3,"ng-template",null,16,t.gJz),t.I0R(15,"div")(16,"tui-hosted-dropdown",17)(17,"button",18)(18,"mat-icon"),t.OEk(19,"more_vert"),t.C$Y()()()()(),t.yuY(20,Ze,3,1)(21,tn,1,1,"app-eip-category-visibility",19)}if(2&n){const e=t.Gew(14),i=t.GaO();t.yG2(4),t.E7m("recordType","Menu::Category")("recordId",i.category.id)("images",i.category.images),t.yG2(4),t.OKB("category",i.category),t.yG2(2),t.E7m("category",i.category),t.yG2(6),t.E7m("content",e),t.yG2(4),t.C0Y(20,i.category.translations?20:-1),t.yG2(),t.C0Y(21,i.category.visibility?21:-1)}}const nn=[[["","breadcrumb",""]]],on=n=>({rotate180:n}),sn=["[breadcrumb]"];let an=(()=>{class n{constructor(){this.destroy$=(0,t.uUt)(r.UF),this.service=(0,t.uUt)(_.S),this.notifications=(0,t.uUt)(u.E),this.router=(0,t.uUt)(s.E5),this.route=(0,t.uUt)(s.gV),this.categoryChange=new t._w7,this.category=null,this.expanded=!1,this.loading=(0,t.OCB)(!1)}saveNameDesc(e){const i=this.category?.id;i&&(this.loading.set(!0),this.service.update(i,e).pipe((0,d.a)(this.destroy$),(0,C.U)(()=>this.loading.set(!1))).subscribe({next:o=>{this.notifications.fireSnackBar("Traduzioni aggiornate."),this.categoryChange.emit(o),this.category=o},error:o=>{this.notifications.error((0,T.mk)(o)||"Qualcosa \xE8 andato storto.")}}))}updateStatus(e){const i=this.category?.id;!e||!i||(this.loading.set(!0),this.service.update(i,{status:e}).pipe((0,d.a)(this.destroy$),(0,C.U)(()=>this.loading.set(!1))).subscribe({next:o=>{this.notifications.fireSnackBar("Stato aggiornato."),this.categoryChange.emit(o),this.category=o},error:o=>{this.notifications.error((0,T.mk)(o)||"Qualcosa \xE8 andato storto.")}}))}deleteCategory(){const e=this.category?.id;e&&(this.loading.set(!0),this.service.destroy(e).pipe((0,d.a)(this.destroy$),(0,C.U)(()=>this.loading.set(!1))).subscribe({next:()=>{this.notifications.fireSnackBar("Categoria eliminata."),this.router.navigate(["../"],{relativeTo:this.route})},error:i=>{this.notifications.error((0,T.mk)(i)||"Qualcosa \xE8 andato storto.")}}))}confirmAndDelete(){this.notifications.confirm("Sei sicuro di voler eliminare la categoria?",{yes:"S\xEC, elimina la categoria",no:"Annulla"}).pipe((0,d.a)(this.destroy$)).subscribe({next:e=>{this.deleteCategory()}})}setCategory(e){this.category=e,this.categoryChange.emit(e)}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-category-details"]],inputs:{category:"category"},outputs:{categoryChange:"categoryChange"},standalone:!0,features:[t.M5G([r.UF]),t.UHJ],ngContentSelectors:sn,decls:13,vars:7,consts:()=>{let e,i,o,g,y,$,k,z,q,Z;return e="Chiudi dettagli",i="Dettagli categoria",o="Immagini categoria",g="Stato categoria",y="Prezzo fisso per la categoria",$="Duplica",k="Elimina",z="Anteprima link pubblico",q="Anteprima link privato",Z="Traduzioni",[[1,"mb-3"],["tuiButton","","appearance","flat","size","m",3,"click"],[1,"flex","items-center"],[1,"me-1"],[1,"animation-speed-2",3,"ngClass"],[3,"expanded"],e,i,[1,"flex","justify-between"],[1,"mb-1","me-1"],o,[1,"mb-3",3,"recordType","recordId","images"],g,[1,"mb-3",3,"category","deleteCategory","statusChange","categoryChange"],[3,"category","categoryChanged"],y,["actions",""],[3,"content"],["tuiIconButton","","type","button","appearance","outline","size","m"],[3,"category"],["type","button","tuiOption","",3,"routerLink"],$,["type","button","tuiOption","",3,"click"],k,z,q,Z,[1,"mb-3",3,"translations","submittedChanges"],[3,"category","categoryChange"]]},template:function(i,o){1&i&&(t.kPM(nn),t.I0R(0,"h1"),t.OEk(1),t.C$Y(),t._Xx(2),t.I0R(3,"div",0)(4,"button",1),t.qCj("click",function(){return o.expanded=!o.expanded}),t.I0R(5,"span",2)(6,"span",3),t.yuY(7,Je,2,0,"ng-container")(8,Ke,2,0),t.C$Y(),t.I0R(9,"mat-icon",4),t.OEk(10,"expand_more"),t.C$Y()()()(),t.I0R(11,"tui-expand",5),t.yuY(12,en,22,8),t.C$Y()),2&i&&(t.yG2(),t.oRS(" ",null==o.category?null:o.category.name,"\n"),t.yG2(6),t.C0Y(7,o.expanded?7:8),t.yG2(2),t.E7m("ngClass",t.S45(5,on,o.expanded)),t.yG2(2),t.E7m("expanded",o.expanded),t.yG2(),t.C0Y(12,o.category?12:-1))},dependencies:[M.g,$e,be.O,St.kh,St.st,m.CI,m.Kw,Tt.qL,f.QF,Ve,ot.GE,ot.Qw,j.A$,j.yi,j.sP,s.ER,ut.S,Qe],changeDetection:0})}return n})();var _n=a(3020),rn=a(5193),ln=a(5656),Vt=a(6376),cn=a(1104),Ft=a(4856),Xt=a(6528),Qt=a(5e3),$t=a(9212),un=a(9052),Jt=a(5892),bt=a(3400),Gt=a(8392),dn=a(9640),Cn=a(2368);function gn(n,E){if(1&n&&(t.I0R(0,"p",10),t.OEk(1),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.oRS(" ",e.context.data.hint," ")}}let Kt=(()=>{class n{constructor(e,i){this.dialogs=e,this.context=i,this.control=new S.Ku(null,[S.AQ.required]),this.form=new S.WC({category:this.control})}submit(){const e=this.control.value;e&&this.context.completeWith(e)}cancelled(){this.context.completeWith(null)}static#t=this.\u0275fac=function(i){return new(i||n)(t.GI1(L._k),t.GI1(I.C0))};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-modal-input-menu-category"]],standalone:!0,features:[t.UHJ],decls:13,vars:4,consts:()=>{let e,i,o;return e="Seleziona la categoria",i="Conferma",o="Annulla",[[3,"formGroup","ngSubmit"],[1,"block","mb-3"],[3,"autofocus","formControl"],e,["class","text-slate-400 block mb-3"],[1,"flex","items-center"],["type","submit","tuiButton","",1,"me-2"],i,["type","button","tuiButton","","appearance","icon",3,"click"],o,[1,"text-slate-400","block","mb-3"]]},template:function(i,o){1&i&&(t.I0R(0,"form",0),t.qCj("ngSubmit",function(){return o.submit()}),t.I0R(1,"div",1)(2,"app-menu-category-select",2),t.SAx(3),t.aS0(4,3),t.k70(),t.C$Y()(),t.yuY(5,gn,2,1,"p",4),t.I0R(6,"div",5)(7,"button",6),t.SAx(8),t.aS0(9,7),t.k70(),t.C$Y(),t.I0R(10,"button",8),t.qCj("click",function(){return o.cancelled()}),t.SAx(11),t.aS0(12,9),t.k70(),t.C$Y()()()),2&i&&(t.E7m("formGroup",o.form),t.yG2(2),t.E7m("autofocus",!0)("formControl",o.control),t.yG2(3),t.C0Y(5,o.context.data.hint?5:-1))},dependencies:[Cn.a,S.sl,S.sz,S.ue,S.u,S.ug,S.uW,m.CI,m.Kw],encapsulation:2})}return n})();var En=a(7936);const Sn=(n,E)=>E.id;function Tn(n,E){if(1&n&&(t.I0R(0,"span",19),t.OEk(1),t.C$Y()),2&n){const e=t.GaO();let i;t.yG2(),t.oRS("(",null==(i=e.data())||null==i.metadata?null:i.metadata.total_count,")")}}function mn(n,E){if(1&n&&(t.I0R(0,"a",21),t.wVc(1,"urlTo"),t.I0R(2,"span",1)(3,"mat-icon",19),t.OEk(4,"share"),t.C$Y(),t.SAx(5),t.aS0(6,23),t.k70(),t.C$Y()()),2&n){const e=t.GaO(2);t.E7m("routerLink",t.g7$(1,1,e.parentCategoryId,"menuCategory.linkDish"))}}function fn(n,E){if(1&n&&(t.I0R(0,"tui-data-list",20)(1,"a",21),t.wVc(2,"urlTo"),t.I0R(3,"span",1)(4,"mat-icon",19),t.OEk(5,"add_circle"),t.C$Y(),t.I0R(6,"span"),t.aS0(7,22),t.C$Y()()(),t.yuY(8,mn,7,4,"a",21),t.C$Y()),2&n){const e=t.GaO();let i;t.yG2(),t.E7m("routerLink",t.g7$(2,2,null!==(i=e.parentCategoryId)&&void 0!==i?i:"","menuCategory.createDish")),t.yG2(7),t.C0Y(8,e.parentCategoryId?8:-1)}}function pn(n,E){1&n&&(t.SAx(0),t.aS0(1,28),t.k70())}function On(n,E){1&n&&(t.SAx(0),t.aS0(1,29),t.k70())}function In(n,E){1&n&&(t.SAx(0),t.aS0(1,30),t.k70())}function Mn(n,E){1&n&&(t.SAx(0),t.aS0(1,31),t.k70())}function hn(n,E){if(1&n){const e=t.KQA();t.I0R(0,"tui-data-list",20)(1,"button",24),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.triggerFiltering())}),t.I0R(2,"span",1)(3,"mat-icon",19),t.OEk(4,"search"),t.C$Y(),t.SAx(5),t.aS0(6,25),t.k70(),t.C$Y()(),t.yuY(7,pn,2,0,"ng-template",null,26,t.gJz),t.I0R(9,"button",24),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.triggerSelectingDishes())}),t.I0R(10,"span",1)(11,"mat-icon",19),t.OEk(12,"check_box"),t.C$Y(),t.yuY(13,On,2,0,"ng-container",27),t.C$Y()(),t.I0R(14,"button",24),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.triggerOrdering())}),t.I0R(15,"span",1)(16,"mat-icon",19),t.OEk(17,"sort_by_alpha"),t.C$Y(),t.yuY(18,In,2,0,"ng-container")(19,Mn,2,0),t.C$Y()()()}if(2&n){const e=t.Gew(8),i=t.GaO();t.yG2(13),t.E7m("ngIf",i.selecting())("ngIfElse",e),t.yG2(5),t.C0Y(18,i.ordering()?18:19)}}function Rn(n,E){if(1&n){const e=t.KQA();t.I0R(0,"div",32)(1,"form",33),t.qCj("ngSubmit",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.submitFilters())}),t.I0R(2,"button",34)(3,"mat-icon"),t.OEk(4,"search"),t.C$Y()(),t.I0R(5,"tui-input",35),t.SAx(6),t.aS0(7,36),t.k70(),t.wR5(8,"input",37),t.C$Y()()()}if(2&n){const e=t.GaO();t.yG2(),t.E7m("formGroup",e.filters),t.yG2(),t.E7m("showLoader",e.searching()),t.yG2(3),t.E7m("tuiTextfieldSize","m"),t.yG2(3),t.E7m("autocomplete",!1)}}function Nn(n,E){if(1&n){const e=t.KQA();t.I0R(0,"tui-data-list")(1,"button",45)(2,"button",46),t.qCj("click",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.updateSelectedDishStatus("active"))}),t.I0R(3,"app-dish-status",47)(4,"span",1)(5,"mat-icon",19),t.OEk(6,"check_circle"),t.C$Y(),t.I0R(7,"span"),t.aS0(8,48),t.C$Y()()()()(),t.I0R(9,"button",45)(10,"button",46),t.qCj("click",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.updateSelectedDishStatus("inactive"))}),t.I0R(11,"app-dish-status",47)(12,"span",1)(13,"mat-icon",19),t.OEk(14,"cancel"),t.C$Y(),t.I0R(15,"span"),t.aS0(16,49),t.C$Y()()()()(),t.I0R(17,"button",45)(18,"button",46),t.qCj("click",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.removeSelectedDishesFromCategory())}),t.I0R(19,"span",1)(20,"span"),t.aS0(21,50),t.C$Y()()()(),t.I0R(22,"button",45)(23,"button",46),t.qCj("click",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.moveSelectedToOtherCategory())}),t.I0R(24,"span",1)(25,"span"),t.aS0(26,51),t.C$Y()()()(),t.I0R(27,"button",45)(28,"button",46),t.qCj("click",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.associateSelectedToOtherCategory())}),t.I0R(29,"span",1)(30,"span"),t.aS0(31,52),t.C$Y()()()()()}2&n&&(t.yG2(3),t.E7m("status","active"),t.yG2(8),t.E7m("status","inactive"))}const jt=n=>({rotate180:n});function An(n,E){if(1&n&&(t.yuY(0,Nn,32,2,"ng-template",null,38,t.gJz),t.I0R(2,"div",32)(3,"div",39)(4,"span",40),t.OEk(5),t.SAx(6),t.aS0(7,41),t.k70(),t.C$Y(),t.I0R(8,"tui-hosted-dropdown",6,42)(10,"button",43)(11,"span",39)(12,"span"),t.aS0(13,44),t.C$Y(),t.I0R(14,"mat-icon",10),t.OEk(15,"expand_more"),t.C$Y()()()()()()),2&n){const e=t.Gew(1),i=t.Gew(9),o=t.GaO();t.yG2(5),t.oRS(" ",o.selectedDishes().length," "),t.yG2(3),t.E7m("content",e),t.yG2(2),t.E7m("disabled",0==o.selectedDishes().length),t.yG2(4),t.E7m("ngClass",t.S45(4,jt,i.open))}}function yn(n,E){if(1&n){const e=t.KQA();t.I0R(0,"button",53),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.orderAllBy("name"))}),t.SAx(1),t.aS0(2,54),t.k70(),t.C$Y()}}function Pn(n,E){if(1&n){const e=t.KQA();t.I0R(0,"button",46),t.qCj("click",function(){t.usT(e);const o=t.GaO(3).$implicit,g=t.GaO();return t.CGJ(g.updateDishStatus(o.id,"active"))}),t.I0R(1,"app-dish-status",47)(2,"span",1)(3,"mat-icon",19),t.OEk(4,"check_circle"),t.C$Y(),t.I0R(5,"span"),t.aS0(6,69),t.C$Y()()()()}2&n&&(t.yG2(),t.E7m("status","active"))}function Ln(n,E){if(1&n){const e=t.KQA();t.I0R(0,"button",46),t.qCj("click",function(){t.usT(e);const o=t.GaO(3).$implicit,g=t.GaO();return t.CGJ(g.updateDishStatus(o.id,"inactive"))}),t.I0R(1,"app-dish-status",47)(2,"span",1)(3,"mat-icon",19),t.OEk(4,"cancel"),t.C$Y(),t.I0R(5,"span"),t.aS0(6,70),t.C$Y()()()()}2&n&&(t.yG2(),t.E7m("status","inactive"))}function Dn(n,E){if(1&n){const e=t.KQA();t.I0R(0,"tui-loader",71)(1,"p"),t.aS0(2,72),t.C$Y(),t.I0R(3,"div",73)(4,"button",74),t.qCj("click",function(){t.usT(e);const o=t.GaO(3).$implicit,g=t.GaO();return t.CGJ(g.deleteDish(o))}),t.SAx(5),t.aS0(6,75),t.k70(),t.C$Y(),t.I0R(7,"button",76),t.qCj("click",function(){t.usT(e);const o=t.GaO(3).$implicit,g=t.GaO();return t.CGJ(g.removeDishFromCategory(o))}),t.SAx(8),t.aS0(9,77),t.k70(),t.C$Y(),t.I0R(10,"button",78),t.qCj("click",function(){t.usT(e);const o=t.GaO(4);return t.CGJ(o.closeModal())}),t.SAx(11),t.aS0(12,79),t.k70(),t.C$Y()()()}if(2&n){const e=t.GaO(4);t.E7m("overlay",!0)("showLoader",e.deleting())}}const $n=n=>["dish",n],bn=n=>["dish",n,"duplicate"];function Gn(n,E){if(1&n){const e=t.KQA();t.I0R(0,"tui-data-list",20)(1,"a",21)(2,"span",1)(3,"mat-icon",19),t.OEk(4,"visibility"),t.C$Y(),t.I0R(5,"span"),t.aS0(6,64),t.C$Y()()(),t.I0R(7,"a",21)(8,"span",1)(9,"mat-icon",19),t.OEk(10,"content_copy"),t.C$Y(),t.I0R(11,"span"),t.aS0(12,65),t.C$Y()()(),t.yuY(13,Pn,7,1,"button",66)(14,Ln,7,1,"button",66)(15,Dn,13,2,"ng-template",null,67,t.gJz),t.I0R(17,"button",46),t.qCj("click",function(){t.usT(e);const o=t.Gew(16),g=t.GaO(3);return t.CGJ(g.showModal(o))}),t.I0R(18,"span",1)(19,"mat-icon",19),t.OEk(20,"delete"),t.C$Y(),t.I0R(21,"span"),t.aS0(22,68),t.C$Y()()()()}if(2&n){const e=t.GaO(2).$implicit;t.yG2(),t.E7m("routerLink",t.S45(4,$n,e.id)),t.yG2(6),t.E7m("routerLink",t.S45(6,bn,e.id)),t.yG2(6),t.E7m("ngIf","active"!=e.status),t.yG2(),t.E7m("ngIf","inactive"!=e.status)}}function Yn(n,E){if(1&n&&t.yuY(0,Gn,23,8,"tui-data-list",63),2&n){const e=t.GaO().$implicit;t.E7m("ngIf",e)}}function vn(n,E){if(1&n&&t.wR5(0,"app-show-image",80),2&n){const e=t.GaO().$implicit;t.E7m("image",e.images[0])}}function Bn(n,E){1&n&&(t.I0R(0,"button",62)(1,"mat-icon",81),t.OEk(2,"drag_handle"),t.C$Y()())}function wn(n,E){if(1&n){const e=t.KQA();t.I0R(0,"tui-checkbox-block",82),t.qCj("ngModelChange",function(o){t.usT(e);const g=t.GaO(),y=g.$implicit,$=g.$index,k=t.GaO();return t.CGJ(k.triggerSelection(y,$,o))}),t.C$Y()}if(2&n){const e=t.GaO().$implicit,i=t.GaO();t.E7m("ngModel",i.selectedDishes().includes(e.id))}}function kn(n,E){if(1&n&&(t.I0R(0,"tui-hosted-dropdown",6)(1,"button",62)(2,"mat-icon"),t.OEk(3,"more_vert"),t.C$Y()()()),2&n){t.GaO();const e=t.Gew(1);t.E7m("content",e)}}const Un=n=>({"border-tui-primary bg-tui-secondary-active":n}),Wt=(n,E)=>({categoryId:n,itemId:E}),xn=n=>({"text-warning":n});function zn(n,E){if(1&n&&(t.yuY(0,Yn,1,1,"ng-template",null,55,t.gJz),t.I0R(2,"tui-island",56)(3,"div",57)(4,"span",1)(5,"a",58),t.wVc(6,"urlTo"),t.yuY(7,vn,1,1,"app-show-image",59),t.C$Y(),t.I0R(8,"div")(9,"a",60),t.wVc(10,"urlTo"),t.OEk(11),t.C$Y(),t.I0R(12,"p",61),t.OEk(13),t.C$Y()()(),t.yuY(14,Bn,3,0,"button",62)(15,wn,1,1)(16,kn,4,1),t.C$Y()()),2&n){const e=E.$implicit,i=t.GaO();t.yG2(2),t.E7m("ngClass",t.S45(14,Un,i.selectedDishes().includes(e.id))),t.yG2(3),t.E7m("routerLink",t.g7$(6,8,t.IBC(16,Wt,i.parentCategoryId,e.id),"dish.show")),t.yG2(2),t.E7m("ngIf",e&&e.images&&e.images.length>0),t.yG2(2),t.E7m("routerLink",t.g7$(10,11,t.IBC(19,Wt,i.parentCategoryId,e.id),"dish.show")),t.yG2(2),t.cNF(e.name),t.yG2(),t.E7m("ngClass",t.S45(22,xn,"inactive"===e.status)),t.yG2(),t.cNF(e.status),t.yG2(),t.C0Y(14,i.ordering()?14:i.selecting()?15:16)}}function Hn(n,E){1&n&&t.wR5(0,"tui-loader",83),2&n&&t.E7m("showLoader",!0)}function Vn(n,E){1&n&&(t.I0R(0,"p",84),t.SAx(1),t.aS0(2,85),t.k70(),t.C$Y())}function Fn(n,E){if(1&n&&t.yuY(0,Hn,1,1,"tui-loader",83)(1,Vn,3,0),2&n){const e=t.GaO();t.C0Y(0,e.searching()?0:1)}}const Xn=n=>({invisible:n}),Qn=n=>({"allow-reorder":n}),Jn=()=>[10,100,1e3];let Kn=(()=>{class n{constructor(){this.injector=(0,t.uUt)(t.zZn),this.service=(0,t.uUt)(l.k),this.categoriesService=(0,t.uUt)(_.S),this.destroy$=(0,t.uUt)(r.UF),this.notifications=(0,t.uUt)(u.E),this.router=(0,t.uUt)(s.E5),this.dialogs=(0,t.uUt)(L._k),this.data=(0,t.OCB)(null),this.items=(0,t.S6b)(()=>this.data()?.items??[]),this.filtering=(0,t.OCB)(!0),this.selecting=(0,t.OCB)(!1),this.ordering=(0,t.OCB)(!1),this.searching=(0,t.OCB)(!1),this.deleting=(0,t.OCB)(!1),this.moving=(0,t.OCB)(!1),this.updatingStatus=(0,t.OCB)(!1),this.relocating=(0,t.OCB)(!1),this.loading=(0,t.S6b)(()=>this.searching()||this.deleting()||this.moving()||this.updatingStatus()||this.relocating()),this.reorderEnabled=(0,t.OCB)(!0),this.filters=new S.WC({query:new S.Ku(null)}),this.selectedDishes=(0,t.OCB)([]),this.offset=0,this.per_page=100,this.parentCategoryId=null}ngOnInit(){this.search(),this.filters.valueChanges.pipe((0,d.a)(this.destroy$),(0,zt.a)(),(0,Ht.o)(200),(0,$t.y)(()=>this.offset=0)).subscribe({next:()=>this.search()}),this.router.events.pipe((0,d.a)(this.destroy$)).subscribe({next:e=>{e instanceof s.MT&&this.search()}})}ngOnChanges(e){e.parentCategoryId&&this.search()}triggerSelectingDishes(){this.selecting()?this.resetSelecting():this.selecting.set(!0)}updateSelectedDishStatus(e){this.updatingStatus.set(!0),this.service.bulkUpdateStatus({dish_ids:this.selectedDishes(),status:e}).pipe((0,d.a)(this.destroy$),(0,C.U)(()=>this.updatingStatus.set(!1)),(0,$t.y)(()=>this.search())).subscribe({next:()=>{this.resetSelecting(),this.notifications.fireSnackBar("Stato aggiornato.")},error:i=>{this.notifications.error((0,T.mk)(i)||"Qualcosa \xE8 andato storto.")}})}removeSelectedDishesFromCategory(){this.notifications.confirm("Sei sicuro di voler rimuovere i piatti selezionati da questa categoria?").subscribe({next:e=>{if(e){if(!this.parentCategoryId)return this.notifications.error(Gt.a);this.relocateDishes({dish_ids:this.selectedDishes(),from_category_id:this.parentCategoryId})}}})}moveSelectedToOtherCategory(){this.dialogs.open(new I.WO(Kt,this.injector),{data:{hint:"I piatti verrano rimossi dall'attuale categoria e associati alla nuova."},label:"Seleziona la categoria in cui spostare i piatti."}).pipe((0,d.a)(this.destroy$)).subscribe({next:e=>{e&&e.id&&this.parentCategoryId?this.relocateDishes({dish_ids:this.selectedDishes(),from_category_id:this.parentCategoryId,to_category_id:e.id}):this.notifications.error(Gt.a)},error:e=>this.notifications.error(e)})}associateSelectedToOtherCategory(){this.dialogs.open(new I.WO(Kt,this.injector),{data:{hint:"I piatti saranno visibili sia dalla categoria attuale sia da quella che stai per selezionare."},label:"Seleziona la categoria a cui aggiungere i piatti selezionati."}).pipe((0,d.a)(this.destroy$)).subscribe({next:e=>{e&&e.id&&this.parentCategoryId?this.relocateDishes({dish_ids:this.selectedDishes(),to_category_id:e.id}):this.notifications.error(Gt.a)},error:e=>this.notifications.error(e)})}triggerSelection(e,i,o){const g=e.id;g&&this.selectedDishes.update(y=>(o?y.push(g):y=y.filter($=>$!=g),[...new Set(y)]))}updateDishStatus(e,i){!i||!e||(this.updatingStatus.set(!0),this.service.updateStatus(e,i).pipe((0,d.a)(this.destroy$),(0,C.U)(()=>this.updatingStatus.set(!1)),(0,$t.y)(()=>this.search())).subscribe({next:()=>{this.notifications.fireSnackBar("Stato aggiornato.")},error:o=>{this.notifications.error((0,T.mk)(o)||"Qualcosa \xE8 andato storto.")}}))}triggerFiltering(){this.filtering.set(!this.filtering()),this.search()}submitFilters(){this.search()}paginationChange(e){this.per_page=e.size,this.offset=e.page,this.search()}search(e=this.parseFilters()){this.searchSub?.unsubscribe(),this.searching.set(!0),this.searchSub=this.service.search(e).pipe((0,d.a)(this.destroy$),(0,C.U)(()=>this.searching.set(!1))).subscribe({next:i=>this.data.set(i),error:i=>{this.data.set(null),this.notifications.error((0,T.mk)(i)||"Qualcosa \xE8 andato storto. Riprova pi\xF9 tardi.")}})}parseFilters(){const e=this.filters.value,i={per_page:this.per_page,offset:this.offset};return this.filtering()&&e.query&&(i.query=e.query),i.category_id=this.parentCategoryId??"",i}deleteDish(e){const i=e?.id;i&&(this.deleting.set(!0),this.service.destroy(i).pipe((0,d.a)(this.destroy$),(0,C.U)(()=>this.deleting.set(!1)),(0,C.U)(()=>this.closeModal())).subscribe({next:()=>{this.notifications.fireSnackBar("Piatto eliminato."),this.search()},error:o=>{this.notifications.error((0,T.mk)(o)||"Qualcosa \xE8 andato storto.")}}))}removeDishFromCategory(e){const i=e?.id;i&&this.parentCategoryId&&(this.deleting.set(!0),this.categoriesService.removeDish(this.parentCategoryId,i).pipe((0,d.a)(this.destroy$),(0,C.U)(()=>this.deleting.set(!1)),(0,C.U)(()=>this.closeModal())).subscribe({next:()=>{this.notifications.fireSnackBar("Piatto rimosso dalla categoria."),this.search()},error:o=>{this.notifications.error((0,T.mk)(o)||Gt.a)}}))}drop(e){if(e.previousIndex===e.currentIndex)return;const i=this.items(),o=i[e.previousIndex]?.id;if(!o)return;const g=this.parentCategoryId;(0,bt.qv)(i,e.previousIndex,e.currentIndex);const y=g?{to_index:e.currentIndex,category_id:g}:{to_index:e.currentIndex};this.moving.set(!0),this.service.move(o,y).pipe((0,d.a)(this.destroy$),(0,C.U)(()=>this.moving.set(!1)),(0,C.U)(()=>this.search())).subscribe({error:$=>this.notifications.error((0,T.mk)($)||"Qualcosa \xE8 andato storto.")})}triggerOrdering(){this.ordering()||this.notifications.fireSnackBar("Sposta i piatti trascinandoli con il bottone sul lato destro di ciascuna categoria.","Capito",{duration:5e3}),this.ordering.set(!this.ordering())}orderAllBy(e){const i=this.parentCategoryId;i&&(this.moving.set(!0),this.categoriesService.orderDishes(i,e).pipe((0,d.a)(this.destroy$),(0,C.U)(()=>this.moving.set(!1))).subscribe({next:()=>{this.notifications.fireSnackBar("Tutti i piatti ordinati per " + e + ""),this.ordering.set(!1),this.search()},error:o=>this.notifications.error((0,T.mk)(o)||"Qualcosa \xE8 andato storto.")}))}showModal(e,i={}){this.modalSub=this.dialogs.open(e,{size:"auto"}).subscribe()}closeModal(){this.modalSub?.unsubscribe()}resetSelecting(){this.selecting.set(!1),this.selectedDishes.set([])}relocateDishes(e){this.relocating.set(!0),this.service.relocate(e).pipe((0,d.a)(this.destroy$),(0,C.U)(()=>this.relocating.set(!1)),(0,$t.y)(()=>this.search())).subscribe({error:i=>this.notifications.error((0,T.mk)(i)||"Qualcosa \xE8 andato storto."),next:()=>{this.resetSelecting(),this.notifications.fireSnackBar("Piatto/i spostato/i.")}})}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-list-dishes"]],inputs:{parentCategoryId:"parentCategoryId"},standalone:!0,features:[t.M5G([_.S]),t.SYr,t.UHJ],decls:34,vars:23,consts:()=>{let e,i,o,g,y,$,k,z,q,Z,X,at,_t,rt,F,ft,pt,Ot,It,Mt,ht,Rt,Nt,At,yt,U,ee,ne;return e="Piatti",i="Aggiungi",o="Crea nuovo",g="Associa esistente",y="Filtra elementi",$="Seleziona elementi",k="Chiudi selezione",z="Fatto.",q="Riordina",Z="Filtra per nome o descrizione",X="piatti selezionati",at="Azioni",_t="Attiva",rt="Disattiva",F="Rimuovi da questa categoria",ft="Sposta in un altra categoria",pt="Associa anche in un altra categoria",Ot="Ordina tutti per nome",It="Visualizza",Mt="Duplica",ht="Rimuovi",Rt="Attiva",Nt="Disattiva",At="Vuoi eliminare definitivamente questo piatto, oppure solo rimuoverlo da questa categoria?",yt="Elimina definitivamente",U="Rimuovi da questa categoria",ee="Annulla",ne="Non ci sono piatti",[[1,"flex","items-center","justify-between"],[1,"flex","items-center"],[1,"me-1",3,"click"],e,["class","me-1"],["addItemDropdownContent",""],[3,"content"],["addDropdown",""],["tuiButton","","appearance","flat","type","button","size","m"],i,[1,"animation-speed-2",3,"ngClass"],["categoriesOptions",""],["tuiIconButton","","size","m","appearance","outline","type","button"],["tuiProgressBar","","max","100",3,"ngClass","size","value"],["class","mt-3"],["type","button","size","l","tuiButton","","appearance","flat"],[1,"text-slate-400","my-3"],["cdkDropList","",1,"items-list",3,"ngClass","cdkDropListDisabled","cdkDropListDropped"],[1,"my-2",3,"items","size","total","paginationChange"],[1,"me-1"],["role","menu"],["tuiOption","",3,"routerLink"],o,g,["tuiOption","",3,"click"],y,["openSelectionMsg",""],[4,"ngIf","ngIfElse"],$,k,z,q,[1,"mt-3"],[1,"flex","items-center",3,"formGroup","ngSubmit"],["type","submit","tuiIconButton","","appearance","flat",1,"me-2",3,"showLoader"],["formControlName","query","tuiAutoFocus","",1,"grow",3,"tuiTextfieldSize"],Z,["type","text","tuiTextfield","",3,"autocomplete"],["bulkActionsDropdown",""],[1,"flex","items-center","justify-center"],[1,"me-2","text-xl"],X,["hostedDropdown",""],["tuiButton","","type","button","appearance","outline","size","m",3,"disabled"],at,["tuiOption",""],["type","button","tuiOption","",3,"click"],[3,"status"],_t,rt,F,ft,pt,["type","button","size","l","tuiButton","","appearance","flat",3,"click"],Ot,["actions",""],["cdkDrag","",1,"border","mb-2",3,"ngClass"],[1,"flex","justify-between","items-center"],[3,"routerLink"],["style","max-width: 100px;","class","inline-block rounded me-2",3,"image",4,"ngIf"],["tuiLink","",1,"text-lg",3,"routerLink"],[1,"tui-island__category",3,"ngClass"],["cdkDragHandle","","size","m","appearance","outline","type","button","tuiIconButton",""],["role","menu",4,"ngIf"],It,Mt,["type","button","tuiOption","",3,"click",4,"ngIf"],["removeDishDropdownTemplate",""],ht,Rt,Nt,["size","l",3,"overlay","showLoader"],At,[1,"grid","grid-cols-1","md:grid-cols-3","gap-3"],["type","button","tuiButton","","appearance","secondary-destructive",3,"click"],yt,["type","button","tuiButton","","appearance","secondary",3,"click"],U,["type","button","tuiButton","","appearance","outline",3,"click"],ee,[1,"inline-block","rounded","me-2",2,"max-width","100px",3,"image"],[1,"drag-shake"],["size","l",1,"centered",3,"ngModel","ngModelChange"],["size","m",3,"showLoader"],[1,"text-center"],ne]},template:function(i,o){if(1&i&&(t.I0R(0,"div",0)(1,"div",1)(2,"h2",2),t.qCj("click",function(){return o.search()}),t.SAx(3),t.aS0(4,3),t.k70(),t.C$Y(),t.yuY(5,Tn,2,1,"span",4)(6,fn,9,5,"ng-template",null,5,t.gJz),t.I0R(8,"tui-hosted-dropdown",6,7)(10,"button",8)(11,"span",1)(12,"mat-icon"),t.OEk(13,"add"),t.C$Y(),t.I0R(14,"span"),t.aS0(15,9),t.C$Y(),t.I0R(16,"mat-icon",10),t.OEk(17,"expand_more"),t.C$Y()()()()(),t.yuY(18,hn,20,3,"ng-template",null,11,t.gJz),t.I0R(20,"tui-hosted-dropdown",6)(21,"button",12)(22,"mat-icon"),t.OEk(23,"more_vert"),t.C$Y()()()(),t.wR5(24,"progress",13),t.yuY(25,Rn,9,4,"div",14)(26,An,16,6)(27,yn,3,0,"button",15),t.wR5(28,"hr",16),t.I0R(29,"div",17),t.qCj("cdkDropListDropped",function(y){return o.drop(y)}),t.c53(30,zn,17,24,null,null,Sn,!1,Fn,2,1),t.C$Y(),t.I0R(33,"tui-table-pagination",18),t.qCj("paginationChange",function(y){return o.paginationChange(y)}),t.C$Y()),2&i){const g=t.Gew(7),y=t.Gew(9),$=t.Gew(19);let k,z;t.yG2(5),t.C0Y(5,null!=(k=o.data())&&null!=k.metadata&&k.metadata.total_count?5:-1),t.yG2(3),t.E7m("content",g),t.yG2(8),t.E7m("ngClass",t.S45(16,jt,y.open)),t.yG2(4),t.E7m("content",$),t.yG2(4),t.E7m("ngClass",t.S45(18,Xn,!o.loading()))("size","s")("value",void 0),t.yG2(),t.C0Y(25,o.filtering()?25:-1),t.yG2(),t.C0Y(26,o.selecting()?26:-1),t.yG2(),t.C0Y(27,o.ordering()?27:-1),t.yG2(2),t.E7m("ngClass",t.S45(20,Qn,o.reorderEnabled()))("cdkDropListDisabled",!o.reorderEnabled()),t.yG2(),t.oho(o.items()),t.yG2(3),t.E7m("items",t.q4q(22,Jn))("size",100)("total",null!==(z=null==(z=o.data())||null==z.metadata?null:z.metadata.total_count)&&void 0!==z?z:0)}},dependencies:[s.ER,it.w,it.C,Tt.qL,ot.GE,ot.Qw,m.CI,m.Kw,Vt.k,Vt.C,cn.t,rn.ms,j.A$,j.yi,j.sP,f.u_,un.y,ut.S,S.sl,S.sz,S.ue,S.u,S.uW,S.Wo,dt.CQ,dt.Oo,dt.cP,En.b,Qt.m6,Qt.gJ,mt.aS,mt.rD,p.Sk,p.Cb,f.QF,Jt.yy,Jt.Ws,bt.Cm,bt.w5,bt.A3,ln.WY,Ft.Gs,Ft.qA,dn.o,Xt.i,Xt.I,S.y,S._G],styles:["[_nghost-%COMP%]   .items-list.allow-reorder.cdk-drop-list-dragging[_ngcontent-%COMP%]   tui-island[cdkDrag][_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   .items-list.allow-reorder[_ngcontent-%COMP%]   .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   .items-list.allow-reorder[_ngcontent-%COMP%]   .cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}[_nghost-%COMP%]   [cdkDragHandle][_ngcontent-%COMP%]{cursor:move}"]})}return n})(),jn=(()=>{class n{constructor(){this.parent=null}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-list-items"]],hostAttrs:[1,"grow","flex","flex-col","md:flex-row"],inputs:{parent:"parent"},standalone:!0,features:[t.UHJ],decls:4,vars:2,consts:[[1,"flex","flex-col","grow-0","mb-5","md:me-3","md:grow"],[1,"border-solid","border-slate-200","p-2","rounded-md","border",3,"parentCategoryId"],[1,"flex","flex-col","grow-0","mb-5","md:grow"]],template:function(i,o){1&i&&(t.I0R(0,"div",0),t.wR5(1,"app-list-categories",1),t.C$Y(),t.I0R(2,"div",2),t.wR5(3,"app-list-dishes",1),t.C$Y()),2&i&&(t.yG2(),t.E7m("parentCategoryId",null==o.parent?null:o.parent.id),t.yG2(2),t.E7m("parentCategoryId",null==o.parent?null:o.parent.id))},dependencies:[m.CI,it.w,ot.GE,_n.M,Kn],encapsulation:2})}return n})();var Wn=a(4392),kt=a(1588);function qn(n,E){1&n&&t.C_f(0)}function Zn(n,E){if(1&n&&t.wR5(0,"tui-svg",4),2&n){const e=t.GaO(2);t.E7m("src",e.options.icon)}}function ti(n,E){if(1&n&&(t.SAx(0),t.C_f(1,2),t.yuY(2,Zn,1,1,"tui-svg",3),t.k70()),2&n){const e=E.$implicit,i=E.last;t.yG2(),t.E7m("ngTemplateOutlet",e),t.yG2(),t.E7m("ngIf",!i)}}const Zt=(0,v.AL)({icon:"tuiIconChevronRight",size:"m",mode:"onLight"});let ei=(()=>{class n extends b.Y{constructor(e){super(),this.options=e,this.size=this.options.size,this.items=Wn.Jh,this.mode=this.options.mode}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(Zt))},n.\u0275cmp=t.In1({type:n,selectors:[["tui-breadcrumbs"]],contentQueries:function(e,i,o){if(1&e&&t.szK(o,kt.S,4,t.Yw2),2&e){let g;t.wto(g=t.Gqi())&&(i.items=g)}},hostVars:1,hostBindings:function(e,i){2&e&&t.e48("data-size",i.size)},inputs:{size:"size"},features:[t.M5G([{provide:b.Y,useExisting:(0,t.wd)(()=>n)}]),t.eg9],decls:3,vars:4,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["class","t-icon",3,"src",4,"ngIf"],[1,"t-icon",3,"src"]],template:function(e,i){1&e&&(t.yuY(0,qn,1,0,"ng-container",0),t.wVc(1,"async"),t.yuY(2,ti,3,2,"ng-container",1)),2&e&&(t.E7m("ngIf",t.kDX(1,2,i.items.changes)),t.yG2(2),t.E7m("ngForOf",i.items))},dependencies:[R.Wu,f.u_,f.ay,f.XV,f.a],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:2.5rem;white-space:nowrap;font:var(--tui-font-text-s);color:var(--tui-text-01)}[data-size=l][_nghost-%COMP%]{font:var(--tui-font-text-m)}.t-icon[_ngcontent-%COMP%]{margin:0 .25rem;opacity:.4}"],changeDetection:0}),n})(),ni=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.a4G({type:n}),n.\u0275inj=t.s3X({imports:[[f.MD,R.Yt,kt.s]]}),n})();var ii=a(9888),te=a(4259);function oi(n,E){if(1&n&&(t.I0R(0,"a",4),t.OEk(1),t.C$Y()),2&n){const e=E.$implicit,i=t.GaO(4);t._6D("routerLink",i.items[e].url),t.yG2(),t.oRS(" ",i.items[e].name," ")}}function si(n,E){if(1&n&&(t.I0R(0,"tui-data-list"),t.yuY(1,oi,2,2,"a",3),t.C$Y()),2&n){const e=t.GaO(3);t.yG2(),t.E7m("tuiRepeatTimesOf",e.items.length-e.max)}}function ai(n,E){if(1&n&&(t.I0R(0,"tui-hosted-dropdown",5),t.wR5(1,"button",6),t.C$Y()),2&n){t.GaO();const e=t.Gew(1);t.E7m("content",e)}}function _i(n,E){1&n&&t.yuY(0,si,2,1,"ng-template",null,1,t.gJz)(2,ai,2,1,"tui-hosted-dropdown",2)}function ri(n,E){if(1&n&&(t.I0R(0,"a",8),t.OEk(1),t.C$Y()),2&n){const e=t.GaO().$implicit,i=t.GaO(2);t._6D("routerLink",i.items[e+i.items.length-i.max].url),t.yG2(),t.oRS(" ",i.items[e+i.items.length-i.max].name," ")}}function li(n,E){1&n&&(t.SAx(0),t.yuY(1,ri,2,2,"a",7),t.k70())}function ci(n,E){if(1&n&&(t.I0R(0,"tui-breadcrumbs"),t.yuY(1,_i,3,0)(2,li,2,0,"ng-container",0),t.C$Y()),2&n){const e=t.GaO();t.yG2(),t.C0Y(1,e.items.length>e.max?1:-1),t.yG2(),t.E7m("tuiRepeatTimesOf",e.max)}}let ui=(()=>{class n{constructor(){this.urlTo=(0,t.uUt)(ut.S),this.items=[],this.max=1,this.includeRoot=!0}set breadcrumbs(e){this.parseBreadcrumbs(e??[]),this.max=this.items.length}parseBreadcrumbs(e){this.items=[],this.includeRoot&&this.items.push({url:"/admin/menu/",name:"Menu"}),e&&e.forEach(i=>{const o=this.urlTo.transform(i.id,"menuCategory.show");o?this.items.push({url:o,name:i.name??`no-name #${i.id}`}):console.error("Invalid url for category",{item:i,url:o})})}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-category-breadcrumbs"]],inputs:{breadcrumbs:"breadcrumbs",includeRoot:"includeRoot"},standalone:!0,features:[t.M5G([ut.S]),t.UHJ],decls:1,vars:1,consts:[[4,"tuiRepeatTimes","tuiRepeatTimesOf"],["content",""],[3,"content",4,"tuiItem"],["tuiOption","",3,"routerLink",4,"tuiRepeatTimes","tuiRepeatTimesOf"],["tuiOption","",3,"routerLink"],[3,"content"],["appearance","secondary","icon","tuiIconMoreHorizontal","size","xs","title","More","tuiIconButton",""],["tuiLink","",3,"routerLink",4,"tuiItem"],["tuiLink","",3,"routerLink"]],template:function(i,o){1&i&&t.yuY(0,ci,3,2,"tui-breadcrumbs"),2&i&&t.C0Y(0,o.items.length>0?0:-1)},dependencies:[ni,ei,kt.S,j.A$,j.yi,j.sP,te.U9,te._k,s.ER,ot.GE,ot.Qw,m.CI,m.Kw,it.w,it.C,ii.Q7,S.y],changeDetection:0})}return n})();function di(n,E){1&n&&t.wR5(0,"tui-loader",0),2&n&&t.E7m("showLoader",!0)("size","xl")}function Ci(n,E){if(1&n){const e=t.KQA();t.I0R(0,"app-category-details",1),t.qCj("categoryChange",function(o){t.usT(e);const g=t.GaO();return t.CGJ(g.category.set(o))}),t.wR5(1,"app-category-breadcrumbs",2),t.C$Y(),t.wR5(2,"app-list-items",3)}if(2&n){const e=t.GaO();t.E7m("category",e.category()),t.yG2(),t.E7m("breadcrumbs",e.breadcrumbs()),t.yG2(),t.E7m("parent",e.category())}}function gi(n,E){if(1&n&&(t.I0R(0,"h1"),t.aS0(1,4),t.C$Y(),t.I0R(2,"a",5)(3,"span"),t.aS0(4,6),t.C$Y()()),2&n){const e=t.GaO();t.yG2(),t.oBb(e.categoryId),t.Ylm(1)}}let Ei=(()=>{class n{constructor(){this.route=(0,t.uUt)(s.gV),this.router=(0,t.uUt)(s.E5),this.categoriesService=(0,t.uUt)(_.S),this.dishesService=(0,t.uUt)(l.k),this.destroy$=(0,t.uUt)(r.UF),this.notifications=(0,t.uUt)(u.E),this.categoryId=null,this.loadingData=(0,t.OCB)(!1),this.loadingCategory=(0,t.OCB)(!1),this.loading=(0,t.S6b)(()=>this.loadingCategory()||this.loadingData()),this.category=(0,t.OCB)(null),this.data=(0,t.OCB)(null),this.breadcrumbs=(0,t.S6b)(()=>this.data()?.breadcrumbs??[]),this.max=1}ngOnInit(){this.route.params.pipe((0,d.a)(this.destroy$)).subscribe(e=>{this.categoryId=Number(e.category_id),console.assert(!isNaN(this.categoryId)&&this.categoryId>0,"Category id is required"),this.loadCategory(),this.loadData()})}loadCategory(e=this.categoryId){console.assert(!isNaN(e)&&e>0,"Category id is required"),this.loadingCategory.set(!0),this.categoriesService.show(e).pipe((0,d.a)(this.destroy$),(0,C.U)(()=>this.loadingCategory.set(!1))).subscribe({next:i=>this.setCategory(i),error:i=>{this.setCategory(null),this.notifications.error((0,T.mk)(i)||"Qualcosa \xE8 andato storto. Riprova pi\xF9 tardi.")}})}loadData(e=this.categoryId){console.assert(!isNaN(e)&&e>0,"Category id is required"),this.loadingData.set(!0),this.categoriesService.dashboardData(e).pipe((0,d.a)(this.destroy$),(0,C.U)(()=>this.loadingData.set(!1))).subscribe({next:i=>this.data.set(i),error:i=>this.notifications.error((0,T.mk)(i)||"Qualcosa \xE8 andato storto. Riprova pi\xF9 tardi.")})}setCategory(e){this.category.set(e)}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-category-dashboard"]],hostAttrs:[1,"grow","flex","flex-col"],standalone:!0,features:[t.M5G([r.UF]),t.UHJ],decls:4,vars:1,consts:()=>{let e,i;return e="Categoria #" + "\ufffd0\ufffd" + " non trovata.",i="Torna al men\xF9",[[3,"showLoader","size"],[3,"category","categoryChange"],["breadcrumb","",1,"mb-3",3,"breadcrumbs"],[3,"parent"],e,["tuiLink","","routerLink","/admin/menu"],i]},template:function(i,o){1&i&&(t.yuY(0,di,1,2,"tui-loader",0)(1,Ci,3,3)(2,gi,5,1),t.wR5(3,"router-outlet")),2&i&&t.C0Y(0,o.loading()?0:o.category()?1:2)},dependencies:[an,p.Sk,p.Cb,jn,s.cP,ui,it.w,it.C,s.ER],changeDetection:0})}return n})()},4868:B=>{"use strict";var c={single_source_shortest_paths:function(a,t,r){var s={},_={};_[t]=0;var u,d,C,T,M,m,l=c.PriorityQueue.make();for(l.push(t,0);!l.empty();)for(C in T=(u=l.pop()).cost,M=a[d=u.value]||{})M.hasOwnProperty(C)&&(m=T+M[C],(typeof _[C]>"u"||_[C]>m)&&(_[C]=m,l.push(C,m),s[C]=d));if(typeof r<"u"&&typeof _[r]>"u"){var w=["Could not find a path from ",t," to ",r,"."].join("");throw new Error(w)}return s},extract_shortest_path_from_predecessor_list:function(a,t){for(var r=[],s=t;s;)r.push(s),s=a[s];return r.reverse(),r},find_path:function(a,t,r){var s=c.single_source_shortest_paths(a,t,r);return c.extract_shortest_path_from_predecessor_list(s,r)},PriorityQueue:{make:function(a){var s,t=c.PriorityQueue,r={};for(s in a=a||{},t)t.hasOwnProperty(s)&&(r[s]=t[s]);return r.queue=[],r.sorter=a.sorter||t.default_sorter,r},default_sorter:function(a,t){return a.cost-t.cost},push:function(a,t){this.queue.push({value:a,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};B.exports=c},6559:B=>{"use strict";B.exports=function(a){for(var t=[],r=a.length,s=0;s<r;s++){var _=a.charCodeAt(s);if(_>=55296&&_<=56319&&r>s+1){var l=a.charCodeAt(s+1);l>=56320&&l<=57343&&(_=1024*(_-55296)+l-56320+65536,s+=1)}_<128?t.push(_):_<2048?(t.push(_>>6|192),t.push(63&_|128)):_<55296||_>=57344&&_<65536?(t.push(_>>12|224),t.push(_>>6&63|128),t.push(63&_|128)):_>=65536&&_<=1114111?(t.push(_>>18|240),t.push(_>>12&63|128),t.push(_>>6&63|128),t.push(63&_|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},1956:(B,c,a)=>{const r=a(8072),s=a(384),_=a(2384),l=a(9944);function u(d,C,T,M,L){const m=[].slice.call(arguments,1),S=m.length,D="function"==typeof m[S-1];if(!D&&!r())throw new Error("Callback required as last argument");if(!D){if(S<1)throw new Error("Too few arguments provided");return 1===S?(T=C,C=M=void 0):2===S&&!C.getContext&&(M=T,T=C,C=void 0),new Promise(function(w,V){try{const N=s.create(T,M);w(d(N,C,M))}catch(N){V(N)}})}if(S<2)throw new Error("Too few arguments provided");2===S?(L=T,T=C,C=M=void 0):3===S&&(C.getContext&&typeof L>"u"?(L=M,M=void 0):(L=M,M=T,T=C,C=void 0));try{const w=s.create(T,M);L(null,d(w,C,M))}catch(w){L(w)}}c.gH=u.bind(null,_.render),c.g7=u.bind(null,_.renderToDataURL),c.toString=u.bind(null,function(d,C,T){return l.render(d,T)})},8072:B=>{B.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},4936:(B,c,a)=>{const t=a(5744).getSymbolSize;c.getRowColCoords=function(s){if(1===s)return[];const _=Math.floor(s/7)+2,l=t(s),u=145===l?26:2*Math.ceil((l-13)/(2*_-2)),d=[l-7];for(let C=1;C<_-1;C++)d[C]=d[C-1]-u;return d.push(6),d.reverse()},c.getPositions=function(s){const _=[],l=c.getRowColCoords(s),u=l.length;for(let d=0;d<u;d++)for(let C=0;C<u;C++)0===d&&0===C||0===d&&C===u-1||d===u-1&&0===C||_.push([l[d],l[C]]);return _}},4600:(B,c,a)=>{const t=a(3612),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(_){this.mode=t.ALPHANUMERIC,this.data=_}s.getBitsLength=function(l){return 11*Math.floor(l/2)+l%2*6},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(l){let u;for(u=0;u+2<=this.data.length;u+=2){let d=45*r.indexOf(this.data[u]);d+=r.indexOf(this.data[u+1]),l.put(d,11)}this.data.length%2&&l.put(r.indexOf(this.data[u]),6)},B.exports=s},8980:B=>{function c(){this.buffer=[],this.length=0}c.prototype={get:function(a){const t=Math.floor(a/8);return 1==(this.buffer[t]>>>7-a%8&1)},put:function(a,t){for(let r=0;r<t;r++)this.putBit(1==(a>>>t-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(a){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),a&&(this.buffer[t]|=128>>>this.length%8),this.length++}},B.exports=c},664:B=>{function c(a){if(!a||a<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=a,this.data=new Uint8Array(a*a),this.reservedBit=new Uint8Array(a*a)}c.prototype.set=function(a,t,r,s){const _=a*this.size+t;this.data[_]=r,s&&(this.reservedBit[_]=!0)},c.prototype.get=function(a,t){return this.data[a*this.size+t]},c.prototype.xor=function(a,t,r){this.data[a*this.size+t]^=r},c.prototype.isReserved=function(a,t){return this.reservedBit[a*this.size+t]},B.exports=c},4692:(B,c,a)=>{const t=a(6559),r=a(3612);function s(_){this.mode=r.BYTE,"string"==typeof _&&(_=t(_)),this.data=new Uint8Array(_)}s.getBitsLength=function(l){return 8*l},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(_){for(let l=0,u=this.data.length;l<u;l++)_.put(this.data[l],8)},B.exports=s},2136:(B,c,a)=>{const t=a(5120),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];c.getBlocksCount=function(l,u){switch(u){case t.L:return r[4*(l-1)+0];case t.M:return r[4*(l-1)+1];case t.Q:return r[4*(l-1)+2];case t.H:return r[4*(l-1)+3];default:return}},c.getTotalCodewordsCount=function(l,u){switch(u){case t.L:return s[4*(l-1)+0];case t.M:return s[4*(l-1)+1];case t.Q:return s[4*(l-1)+2];case t.H:return s[4*(l-1)+3];default:return}}},5120:(B,c)=>{c.L={bit:1},c.M={bit:0},c.Q={bit:3},c.H={bit:2},c.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},c.from=function(r,s){if(c.isValid(r))return r;try{return function a(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return c.L;case"m":case"medium":return c.M;case"q":case"quartile":return c.Q;case"h":case"high":return c.H;default:throw new Error("Unknown EC Level: "+t)}}(r)}catch{return s}}},8984:(B,c,a)=>{const t=a(5744).getSymbolSize;c.getPositions=function(_){const l=t(_);return[[0,0],[l-7,0],[0,l-7]]}},8196:(B,c,a)=>{const t=a(5744),_=t.getBCHDigit(1335);c.getEncodedBits=function(u,d){const C=u.bit<<3|d;let T=C<<10;for(;t.getBCHDigit(T)-_>=0;)T^=1335<<t.getBCHDigit(T)-_;return 21522^(C<<10|T)}},6764:(B,c)=>{const a=new Uint8Array(512),t=new Uint8Array(256);(function(){let s=1;for(let _=0;_<255;_++)a[_]=s,t[s]=_,s<<=1,256&s&&(s^=285);for(let _=255;_<512;_++)a[_]=a[_-255]})(),c.log=function(s){if(s<1)throw new Error("log("+s+")");return t[s]},c.exp=function(s){return a[s]},c.mul=function(s,_){return 0===s||0===_?0:a[t[s]+t[_]]}},6396:(B,c,a)=>{const t=a(3612),r=a(5744);function s(_){this.mode=t.KANJI,this.data=_}s.getBitsLength=function(l){return 13*l},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(_){let l;for(l=0;l<this.data.length;l++){let u=r.toSJIS(this.data[l]);if(u>=33088&&u<=40956)u-=33088;else{if(!(u>=57408&&u<=60351))throw new Error("Invalid SJIS character: "+this.data[l]+"\nMake sure your charset is UTF-8");u-=49472}u=192*(u>>>8&255)+(255&u),_.put(u,13)}},B.exports=s},1920:(B,c)=>{c.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function t(r,s,_){switch(r){case c.Patterns.PATTERN000:return(s+_)%2==0;case c.Patterns.PATTERN001:return s%2==0;case c.Patterns.PATTERN010:return _%3==0;case c.Patterns.PATTERN011:return(s+_)%3==0;case c.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(_/3))%2==0;case c.Patterns.PATTERN101:return s*_%2+s*_%3==0;case c.Patterns.PATTERN110:return(s*_%2+s*_%3)%2==0;case c.Patterns.PATTERN111:return(s*_%3+(s+_)%2)%2==0;default:throw new Error("bad maskPattern:"+r)}}c.isValid=function(s){return null!=s&&""!==s&&!isNaN(s)&&s>=0&&s<=7},c.from=function(s){return c.isValid(s)?parseInt(s,10):void 0},c.getPenaltyN1=function(s){const _=s.size;let l=0,u=0,d=0,C=null,T=null;for(let M=0;M<_;M++){u=d=0,C=T=null;for(let L=0;L<_;L++){let m=s.get(M,L);m===C?u++:(u>=5&&(l+=u-5+3),C=m,u=1),m=s.get(L,M),m===T?d++:(d>=5&&(l+=d-5+3),T=m,d=1)}u>=5&&(l+=u-5+3),d>=5&&(l+=d-5+3)}return l},c.getPenaltyN2=function(s){const _=s.size;let l=0;for(let u=0;u<_-1;u++)for(let d=0;d<_-1;d++){const C=s.get(u,d)+s.get(u,d+1)+s.get(u+1,d)+s.get(u+1,d+1);(4===C||0===C)&&l++}return 3*l},c.getPenaltyN3=function(s){const _=s.size;let l=0,u=0,d=0;for(let C=0;C<_;C++){u=d=0;for(let T=0;T<_;T++)u=u<<1&2047|s.get(C,T),T>=10&&(1488===u||93===u)&&l++,d=d<<1&2047|s.get(T,C),T>=10&&(1488===d||93===d)&&l++}return 40*l},c.getPenaltyN4=function(s){let _=0;const l=s.data.length;for(let d=0;d<l;d++)_+=s.data[d];return 10*Math.abs(Math.ceil(100*_/l/5)-10)},c.applyMask=function(s,_){const l=_.size;for(let u=0;u<l;u++)for(let d=0;d<l;d++)_.isReserved(d,u)||_.xor(d,u,t(s,d,u))},c.getBestMask=function(s,_){const l=Object.keys(c.Patterns).length;let u=0,d=1/0;for(let C=0;C<l;C++){_(C),c.applyMask(C,s);const T=c.getPenaltyN1(s)+c.getPenaltyN2(s)+c.getPenaltyN3(s)+c.getPenaltyN4(s);c.applyMask(C,s),T<d&&(d=T,u=C)}return u}},3612:(B,c,a)=>{const t=a(8656),r=a(8768);c.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},c.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},c.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},c.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},c.MIXED={bit:-1},c.getCharCountIndicator=function(l,u){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!t.isValid(u))throw new Error("Invalid version: "+u);return u>=1&&u<10?l.ccBits[0]:u<27?l.ccBits[1]:l.ccBits[2]},c.getBestModeForData=function(l){return r.testNumeric(l)?c.NUMERIC:r.testAlphanumeric(l)?c.ALPHANUMERIC:r.testKanji(l)?c.KANJI:c.BYTE},c.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},c.isValid=function(l){return l&&l.bit&&l.ccBits},c.from=function(l,u){if(c.isValid(l))return l;try{return function s(_){if("string"!=typeof _)throw new Error("Param is not a string");switch(_.toLowerCase()){case"numeric":return c.NUMERIC;case"alphanumeric":return c.ALPHANUMERIC;case"kanji":return c.KANJI;case"byte":return c.BYTE;default:throw new Error("Unknown mode: "+_)}}(l)}catch{return u}}},4983:(B,c,a)=>{const t=a(3612);function r(s){this.mode=t.NUMERIC,this.data=s.toString()}r.getBitsLength=function(_){return 10*Math.floor(_/3)+(_%3?_%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(_){let l,u,d;for(l=0;l+3<=this.data.length;l+=3)u=this.data.substr(l,3),d=parseInt(u,10),_.put(d,10);const C=this.data.length-l;C>0&&(u=this.data.substr(l),d=parseInt(u,10),_.put(d,3*C+1))},B.exports=r},7892:(B,c,a)=>{const t=a(6764);c.mul=function(s,_){const l=new Uint8Array(s.length+_.length-1);for(let u=0;u<s.length;u++)for(let d=0;d<_.length;d++)l[u+d]^=t.mul(s[u],_[d]);return l},c.mod=function(s,_){let l=new Uint8Array(s);for(;l.length-_.length>=0;){const u=l[0];for(let C=0;C<_.length;C++)l[C]^=t.mul(_[C],u);let d=0;for(;d<l.length&&0===l[d];)d++;l=l.slice(d)}return l},c.generateECPolynomial=function(s){let _=new Uint8Array([1]);for(let l=0;l<s;l++)_=c.mul(_,new Uint8Array([1,t.exp(l)]));return _}},384:(B,c,a)=>{const t=a(5744),r=a(5120),s=a(8980),_=a(664),l=a(4936),u=a(8984),d=a(1920),C=a(2136),T=a(4176),M=a(6544),L=a(8196),m=a(3612),S=a(4168);function v(p,R,h){const O=p.size,b=L.getEncodedBits(R,h);let f,I;for(f=0;f<15;f++)I=1==(b>>f&1),p.set(f<6?f:f<8?f+1:O-15+f,8,I,!0),p.set(8,f<8?O-f-1:f<9?15-f-1+1:15-f-1,I,!0);p.set(O-8,8,1,!0)}function Q(p,R,h,O){let b;if(Array.isArray(p))b=S.fromArray(p);else{if("string"!=typeof p)throw new Error("Invalid data");{let tt=R;if(!tt){const st=S.rawSplit(p);tt=M.getBestVersionForData(st,h)}b=S.fromString(p,tt||40)}}const f=M.getBestVersionForData(b,h);if(!f)throw new Error("The amount of data is too big to be stored in a QR Code");if(R){if(R<f)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+f+".\n")}else R=f;const I=function A(p,R,h){const O=new s;h.forEach(function(G){O.put(G.mode.bit,4),O.put(G.getLength(),m.getCharCountIndicator(G.mode,p)),G.write(O)});const I=8*(t.getSymbolTotalCodewords(p)-C.getTotalCodewordsCount(p,R));for(O.getLengthInBits()+4<=I&&O.put(0,4);O.getLengthInBits()%8!=0;)O.putBit(0);const Y=(I-O.getLengthInBits())/8;for(let G=0;G<Y;G++)O.put(G%2?17:236,8);return function H(p,R,h){const O=t.getSymbolTotalCodewords(R),f=O-C.getTotalCodewordsCount(R,h),I=C.getBlocksCount(R,h),G=I-O%I,tt=Math.floor(O/I),st=Math.floor(f/I),Yt=st+1,Pt=tt-st,vt=new T(Pt);let Ct=0;const lt=new Array(I),gt=new Array(I);let Lt=0;const Bt=new Uint8Array(p.buffer);for(let W=0;W<I;W++){const Et=W<G?st:Yt;lt[W]=Bt.slice(Ct,Ct+Et),gt[W]=vt.encode(lt[W]),Ct+=Et,Lt=Math.max(Lt,Et)}const ct=new Uint8Array(O);let J,K,Dt=0;for(J=0;J<Lt;J++)for(K=0;K<I;K++)J<lt[K].length&&(ct[Dt++]=lt[K][J]);for(J=0;J<Pt;J++)for(K=0;K<I;K++)ct[Dt++]=gt[K][J];return ct}(O,p,R)}(R,h,b),Y=t.getSymbolSize(R),G=new _(Y);return function D(p,R){const h=p.size,O=u.getPositions(R);for(let b=0;b<O.length;b++){const f=O[b][0],I=O[b][1];for(let Y=-1;Y<=7;Y++)if(!(f+Y<=-1||h<=f+Y))for(let G=-1;G<=7;G++)I+G<=-1||h<=I+G||p.set(f+Y,I+G,Y>=0&&Y<=6&&(0===G||6===G)||G>=0&&G<=6&&(0===Y||6===Y)||Y>=2&&Y<=4&&G>=2&&G<=4,!0)}}(G,R),function w(p){const R=p.size;for(let h=8;h<R-8;h++){const O=h%2==0;p.set(h,6,O,!0),p.set(6,h,O,!0)}}(G),function V(p,R){const h=l.getPositions(R);for(let O=0;O<h.length;O++){const b=h[O][0],f=h[O][1];for(let I=-2;I<=2;I++)for(let Y=-2;Y<=2;Y++)p.set(b+I,f+Y,-2===I||2===I||-2===Y||2===Y||0===I&&0===Y,!0)}}(G,R),v(G,h,0),R>=7&&function N(p,R){const h=p.size,O=M.getEncodedBits(R);let b,f,I;for(let Y=0;Y<18;Y++)b=Math.floor(Y/3),f=Y%3+h-8-3,I=1==(O>>Y&1),p.set(b,f,I,!0),p.set(f,b,I,!0)}(G,R),function P(p,R){const h=p.size;let O=-1,b=h-1,f=7,I=0;for(let Y=h-1;Y>0;Y-=2)for(6===Y&&Y--;;){for(let G=0;G<2;G++)if(!p.isReserved(b,Y-G)){let tt=!1;I<R.length&&(tt=1==(R[I]>>>f&1)),p.set(b,Y-G,tt),f--,-1===f&&(I++,f=7)}if(b+=O,b<0||h<=b){b-=O,O=-O;break}}}(G,I),isNaN(O)&&(O=d.getBestMask(G,v.bind(null,G,h))),d.applyMask(O,G),v(G,h,O),{modules:G,version:R,errorCorrectionLevel:h,maskPattern:O,segments:b}}c.create=function(R,h){if(typeof R>"u"||""===R)throw new Error("No input text");let b,f,O=r.M;return typeof h<"u"&&(O=r.from(h.errorCorrectionLevel,r.M),b=M.from(h.version),f=d.from(h.maskPattern),h.toSJISFunc&&t.setToSJISFunction(h.toSJISFunc)),Q(R,b,O,f)}},4176:(B,c,a)=>{const t=a(7892);function r(s){this.genPoly=void 0,this.degree=s,this.degree&&this.initialize(this.degree)}r.prototype.initialize=function(_){this.degree=_,this.genPoly=t.generateECPolynomial(this.degree)},r.prototype.encode=function(_){if(!this.genPoly)throw new Error("Encoder not initialized");const l=new Uint8Array(_.length+this.degree);l.set(_);const u=t.mod(l,this.genPoly),d=this.degree-u.length;if(d>0){const C=new Uint8Array(this.degree);return C.set(u,d),C}return u},B.exports=r},8768:(B,c)=>{const a="[0-9]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const s="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+")(?:.|[\r\n]))+";c.KANJI=new RegExp(r,"g"),c.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),c.BYTE=new RegExp(s,"g"),c.NUMERIC=new RegExp(a,"g"),c.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const _=new RegExp("^"+r+"$"),l=new RegExp("^"+a+"$"),u=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");c.testKanji=function(C){return _.test(C)},c.testNumeric=function(C){return l.test(C)},c.testAlphanumeric=function(C){return u.test(C)}},4168:(B,c,a)=>{const t=a(3612),r=a(4983),s=a(4600),_=a(4692),l=a(6396),u=a(8768),d=a(5744),C=a(4868);function T(N){return unescape(encodeURIComponent(N)).length}function M(N,v,P){const A=[];let H;for(;null!==(H=N.exec(P));)A.push({data:H[0],index:H.index,mode:v,length:H[0].length});return A}function L(N){const v=M(u.NUMERIC,t.NUMERIC,N),P=M(u.ALPHANUMERIC,t.ALPHANUMERIC,N);let A,H;return d.isKanjiModeEnabled()?(A=M(u.BYTE,t.BYTE,N),H=M(u.KANJI,t.KANJI,N)):(A=M(u.BYTE_KANJI,t.BYTE,N),H=[]),v.concat(P,A,H).sort(function(p,R){return p.index-R.index}).map(function(p){return{data:p.data,mode:p.mode,length:p.length}})}function m(N,v){switch(v){case t.NUMERIC:return r.getBitsLength(N);case t.ALPHANUMERIC:return s.getBitsLength(N);case t.KANJI:return l.getBitsLength(N);case t.BYTE:return _.getBitsLength(N)}}function V(N,v){let P;const A=t.getBestModeForData(N);if(P=t.from(v,A),P!==t.BYTE&&P.bit<A.bit)throw new Error('"'+N+'" cannot be encoded with mode '+t.toString(P)+".\n Suggested mode is: "+t.toString(A));switch(P===t.KANJI&&!d.isKanjiModeEnabled()&&(P=t.BYTE),P){case t.NUMERIC:return new r(N);case t.ALPHANUMERIC:return new s(N);case t.KANJI:return new l(N);case t.BYTE:return new _(N)}}c.fromArray=function(v){return v.reduce(function(P,A){return"string"==typeof A?P.push(V(A,null)):A.data&&P.push(V(A.data,A.mode)),P},[])},c.fromString=function(v,P){const H=function D(N){const v=[];for(let P=0;P<N.length;P++){const A=N[P];switch(A.mode){case t.NUMERIC:v.push([A,{data:A.data,mode:t.ALPHANUMERIC,length:A.length},{data:A.data,mode:t.BYTE,length:A.length}]);break;case t.ALPHANUMERIC:v.push([A,{data:A.data,mode:t.BYTE,length:A.length}]);break;case t.KANJI:v.push([A,{data:A.data,mode:t.BYTE,length:T(A.data)}]);break;case t.BYTE:v.push([{data:A.data,mode:t.BYTE,length:T(A.data)}])}}return v}(L(v,d.isKanjiModeEnabled())),Q=function w(N,v){const P={},A={start:{}};let H=["start"];for(let Q=0;Q<N.length;Q++){const p=N[Q],R=[];for(let h=0;h<p.length;h++){const O=p[h],b=""+Q+h;R.push(b),P[b]={node:O,lastCount:0},A[b]={};for(let f=0;f<H.length;f++){const I=H[f];P[I]&&P[I].node.mode===O.mode?(A[I][b]=m(P[I].lastCount+O.length,O.mode)-m(P[I].lastCount,O.mode),P[I].lastCount+=O.length):(P[I]&&(P[I].lastCount=O.length),A[I][b]=m(O.length,O.mode)+4+t.getCharCountIndicator(O.mode,v))}}H=R}for(let Q=0;Q<H.length;Q++)A[H[Q]].end=0;return{map:A,table:P}}(H,P),p=C.find_path(Q.map,"start","end"),R=[];for(let h=1;h<p.length-1;h++)R.push(Q.table[p[h]].node);return c.fromArray(function S(N){return N.reduce(function(v,P){const A=v.length-1>=0?v[v.length-1]:null;return A&&A.mode===P.mode?(v[v.length-1].data+=P.data,v):(v.push(P),v)},[])}(R))},c.rawSplit=function(v){return c.fromArray(L(v,d.isKanjiModeEnabled()))}},5744:(B,c)=>{let a;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];c.getSymbolSize=function(s){if(!s)throw new Error('"version" cannot be null or undefined');if(s<1||s>40)throw new Error('"version" should be in range from 1 to 40');return 4*s+17},c.getSymbolTotalCodewords=function(s){return t[s]},c.getBCHDigit=function(r){let s=0;for(;0!==r;)s++,r>>>=1;return s},c.setToSJISFunction=function(s){if("function"!=typeof s)throw new Error('"toSJISFunc" is not a valid function.');a=s},c.isKanjiModeEnabled=function(){return typeof a<"u"},c.toSJIS=function(s){return a(s)}},8656:(B,c)=>{c.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}},6544:(B,c,a)=>{const t=a(5744),r=a(2136),s=a(5120),_=a(3612),l=a(8656),d=t.getBCHDigit(7973);function T(m,S){return _.getCharCountIndicator(m,S)+4}function M(m,S){let D=0;return m.forEach(function(w){const V=T(w.mode,S);D+=V+w.getBitsLength()}),D}c.from=function(S,D){return l.isValid(S)?parseInt(S,10):D},c.getCapacity=function(S,D,w){if(!l.isValid(S))throw new Error("Invalid QR Code version");typeof w>"u"&&(w=_.BYTE);const v=8*(t.getSymbolTotalCodewords(S)-r.getTotalCodewordsCount(S,D));if(w===_.MIXED)return v;const P=v-T(w,S);switch(w){case _.NUMERIC:return Math.floor(P/10*3);case _.ALPHANUMERIC:return Math.floor(P/11*2);case _.KANJI:return Math.floor(P/13);default:return Math.floor(P/8)}},c.getBestVersionForData=function(S,D){let w;const V=s.from(D,s.M);if(Array.isArray(S)){if(S.length>1)return function L(m,S){for(let D=1;D<=40;D++)if(M(m,D)<=c.getCapacity(D,S,_.MIXED))return D}(S,V);if(0===S.length)return 1;w=S[0]}else w=S;return function C(m,S,D){for(let w=1;w<=40;w++)if(S<=c.getCapacity(w,D,m))return w}(w.mode,w.getLength(),V)},c.getEncodedBits=function(S){if(!l.isValid(S)||S<7)throw new Error("Invalid QR Code version");let D=S<<12;for(;t.getBCHDigit(D)-d>=0;)D^=7973<<t.getBCHDigit(D)-d;return S<<12|D}},2384:(B,c,a)=>{const t=a(3848);c.render=function(l,u,d){let C=d,T=u;typeof C>"u"&&(!u||!u.getContext)&&(C=u,u=void 0),u||(T=function s(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}()),C=t.getOptions(C);const M=t.getImageWidth(l.modules.size,C),L=T.getContext("2d"),m=L.createImageData(M,M);return t.qrToImageData(m.data,l,C),function r(_,l,u){_.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=u,l.width=u,l.style.height=u+"px",l.style.width=u+"px"}(L,T,M),L.putImageData(m,0,0),T},c.renderToDataURL=function(l,u,d){let C=d;return typeof C>"u"&&(!u||!u.getContext)&&(C=u,u=void 0),C||(C={}),c.render(l,u,C).toDataURL(C.type||"image/png",(C.rendererOpts||{}).quality)}},9944:(B,c,a)=>{const t=a(3848);function r(l,u){const d=l.a/255,C=u+'="'+l.hex+'"';return d<1?C+" "+u+'-opacity="'+d.toFixed(2).slice(1)+'"':C}function s(l,u,d){let C=l+u;return typeof d<"u"&&(C+=" "+d),C}c.render=function(u,d,C){const T=t.getOptions(d),M=u.modules.size,L=u.modules.data,m=M+2*T.margin,S=T.color.light.a?"<path "+r(T.color.light,"fill")+' d="M0 0h'+m+"v"+m+'H0z"/>':"",D="<path "+r(T.color.dark,"stroke")+' d="'+function _(l,u,d){let C="",T=0,M=!1,L=0;for(let m=0;m<l.length;m++){const S=Math.floor(m%u),D=Math.floor(m/u);!S&&!M&&(M=!0),l[m]?(L++,m>0&&S>0&&l[m-1]||(C+=M?s("M",S+d,.5+D+d):s("m",T,0),T=0,M=!1),S+1<u&&l[m+1]||(C+=s("h",L),L=0)):T++}return C}(L,M,T.margin)+'"/>',N='<svg xmlns="http://www.w3.org/2000/svg" '+(T.width?'width="'+T.width+'" height="'+T.width+'" ':"")+'viewBox="0 0 '+m+" "+m+'" shape-rendering="crispEdges">'+S+D+"</svg>\n";return"function"==typeof C&&C(null,N),N}},3848:(B,c)=>{function a(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)throw new Error("Color should be defined as hex string");let r=t.slice().replace("#","").split("");if(r.length<3||5===r.length||r.length>8)throw new Error("Invalid hex color: "+t);(3===r.length||4===r.length)&&(r=Array.prototype.concat.apply([],r.map(function(_){return[_,_]}))),6===r.length&&r.push("F","F");const s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:255&s,hex:"#"+r.slice(0,6).join("")}}c.getOptions=function(r){r||(r={}),r.color||(r.color={});const _=r.width&&r.width>=21?r.width:void 0;return{width:_,scale:_?4:r.scale||4,margin:typeof r.margin>"u"||null===r.margin||r.margin<0?4:r.margin,color:{dark:a(r.color.dark||"#000000ff"),light:a(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},c.getScale=function(r,s){return s.width&&s.width>=r+2*s.margin?s.width/(r+2*s.margin):s.scale},c.getImageWidth=function(r,s){const _=c.getScale(r,s);return Math.floor((r+2*s.margin)*_)},c.qrToImageData=function(r,s,_){const l=s.modules.size,u=s.modules.data,d=c.getScale(l,_),C=Math.floor((l+2*_.margin)*d),T=_.margin*d,M=[_.color.light,_.color.dark];for(let L=0;L<C;L++)for(let m=0;m<C;m++){let S=4*(L*C+m),D=_.color.light;L>=T&&m>=T&&L<C-T&&m<C-T&&(D=M[u[Math.floor((L-T)/d)*l+Math.floor((m-T)/d)]?1:0]),r[S++]=D.r,r[S++]=D.g,r[S++]=D.b,r[S]=D.a}}}}]);