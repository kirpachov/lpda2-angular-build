"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[7264],{7264:(k,A,s)=>{s.d(A,{s:()=>_n});var t=s(4496),M=s(8212),g=s(1512),m=s(1316),c=s(6504),I=s(9852),u=s(4392),_=s(900),p=s(2528),v=s(8987),P=s(4164),E=s(3480),b=s(9392),w=s(3656),N=s(5944),l=s(696),C=s(528),R=s(1192),T=s(3616),h=s(6684),O=s(1368);function S(n,o){1&n&&t.C_f(0)}const F=["*"],_t=["tuiStep",""];function Xt(n,o){if(1&n&&t.wR5(0,"tui-svg",4),2&n){const e=t.GaO();t.E7m("src",e.icon)}}let Tt=(()=>{class n{constructor(e,i,r,a,d,f){this.cdr=e,this.el=i,this.scrollService=r,this.duration=d,this.destroy$=f,this.steps=u.Jh,this.orientation="horizontal",this.activeItemIndexChange=new t._w7,this.activeItemIndex=0,a.subscribe(()=>this.scrollIntoView(this.activeItemIndex))}set activeIndex(e){this.activeItemIndex=e,this.scrollIntoView(e)}get changes$(){return(0,_.jv)(this.steps).pipe((0,R.o)(0))}onHorizontal(e,i){"horizontal"!==this.orientation||!e.target||(e.preventDefault(),this.moveFocus(e.target,i))}onVertical(e,i){"vertical"!==this.orientation||!e.target||(e.preventDefault(),this.moveFocus(e.target,i))}indexOf(e){return(0,p.SQ)(this.steps).findIndex(({nativeElement:i})=>i===e)}isActive(e){return e===this.activeItemIndex}activate(e){this.activeItemIndex!==e&&(this.activeItemIndex=e,this.activeItemIndexChange.emit(e),this.cdr.markForCheck(),this.scrollIntoView(e))}getNativeElements(e){return e.map(({nativeElement:i})=>i)}moveFocus(e,i){if(!(0,v.CK)(e))return;const r=this.getNativeElements(this.steps),a=r.findIndex(d=>d===e);(0,P.uO)(a,r,i)}scrollIntoView(e){const i=this.getNativeElements(this.steps)[e];if(!i)return;const{nativeElement:r}=this.el,{clientHeight:a,clientWidth:d,offsetTop:f,offsetLeft:y}=r,{offsetHeight:D,offsetWidth:L,offsetTop:ut,offsetLeft:lt}=i,dt=lt-y-d/2+L/2;this.scrollService.scroll$(r,Math.max(0,ut-f-a/2+D/2),Math.max(0,dt),this.duration/3).pipe((0,T.a)(this.destroy$)).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(t.kD9),t.GI1(t.GMv),t.GI1(E.IL),t.GI1(E.I$),t.GI1(N._u),t.GI1(E.UF,2))},n.\u0275cmp=t.In1({type:n,selectors:[["tui-stepper"],["nav","tuiStepper",""]],contentQueries:function(e,i,r){if(1&e&&t.szK(r,Ot,4,t.GMv),2&e){let a;t.wto(a=t.Gqi())&&(i.steps=a)}},hostVars:1,hostBindings:function(e,i){1&e&&t.qCj("keydown.arrowRight",function(a){return i.onHorizontal(a,1)})("keydown.arrowLeft",function(a){return i.onHorizontal(a,-1)})("keydown.arrowDown",function(a){return i.onVertical(a,1)})("keydown.arrowUp",function(a){return i.onVertical(a,-1)}),2&e&&t.e48("data-orientation",i.orientation)},inputs:{orientation:"orientation",activeIndex:[t.Wk5.None,"activeItemIndex","activeIndex"]},outputs:{activeItemIndexChange:"activeItemIndexChange"},features:[t.M5G([E.I$,E.UF])],ngContentSelectors:F,decls:3,vars:3,consts:[[4,"ngIf"]],template:function(e,i){1&e&&(t.kPM(),t.yuY(0,S,1,0,"ng-container",0),t.wVc(1,"async"),t._Xx(2)),2&e&&t.E7m("ngIf",t.kDX(1,1,i.changes$))},dependencies:[O.u_,O.a],styles:["[_nghost-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;scroll-behavior:smooth;display:flex;overflow:auto;counter-reset:steps}[_nghost-%COMP%]::-webkit-scrollbar, [_nghost-%COMP%]::-webkit-scrollbar-thumb{display:none}tui-root._reduced-motion   [_nghost-%COMP%]{scroll-behavior:auto}[data-orientation=vertical][_nghost-%COMP%]{flex-direction:column}"],changeDetection:0}),(0,m.UN)([b.w7],n.prototype,"changes$",null),(0,m.UN)([b.w7],n.prototype,"getNativeElements",null),n})(),Ot=(()=>{class n{constructor(e,i,r,a,d){this.stepper=r,this.el=a,this.icons=d,this.stepState="normal",this.icon="",this.focusVisible=!1,i.pipe((0,h.I)(C.Z)).subscribe(()=>{this.activate()}),e.subscribe(f=>{this.focusVisible=f})}get isActive(){return this.stepper.isActive(this.index)}get isVertical(){return"vertical"===this.stepper.orientation}get tabIndex(){return this.isActive?0:-1}get index(){return this.stepper.indexOf(this.el.nativeElement)}activate(){this.stepper.activate(this.index)}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(E.MF),t.GI1(l.oj),t.GI1(Tt),t.GI1(t.GMv),t.GI1(N.QJ))},n.\u0275cmp=t.In1({type:n,selectors:[["button","tuiStep",""],["a","tuiStep","",3,"routerLink",""],["a","tuiStep","","routerLink","","routerLinkActive",""]],hostAttrs:["type","button"],hostVars:8,hostBindings:function(e,i){1&e&&t.qCj("click",function(){return i.activate()}),2&e&&(t.SoX("tabIndex",i.tabIndex),t.e48("data-state",i.stepState),t.eAK("_focus-visible",i.focusVisible)("_active",i.isActive)("_vertical",i.isVertical))},inputs:{stepState:"stepState",icon:"icon"},features:[t.M5G([E.UF,l.oj,E.MF])],attrs:_t,ngContentSelectors:F,decls:5,vars:3,consts:[["class","t-marker t-marker_custom",3,"src",4,"ngIf"],[1,"t-marker","t-marker_error",3,"src"],[1,"t-marker","t-marker_pass",3,"src"],[1,"t-marker","t-marker_index"],[1,"t-marker","t-marker_custom",3,"src"]],template:function(e,i){1&e&&(t.kPM(),t.yuY(0,Xt,1,1,"tui-svg",0),t.wR5(1,"tui-svg",1)(2,"tui-svg",2)(3,"div",3),t._Xx(4)),2&e&&(t.E7m("ngIf",i.icon),t.yG2(),t.E7m("src",i.icons.error),t.yG2(),t.E7m("src",i.icons.check))},dependencies:[w.Wu,O.u_],styles:['[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;text-decoration:none;position:relative;display:flex;align-items:center;flex-shrink:0;color:var(--tui-link);margin-right:1.5rem;outline:none;cursor:pointer;counter-increment:steps}[_nghost-%COMP%]:disabled{pointer-events:none;color:var(--tui-base-07)}[_nghost-%COMP%]:hover{color:var(--tui-link-hover)}[_nghost-%COMP%]:not(:last-of-type)._vertical{margin-bottom:1.25rem}._active[_nghost-%COMP%], ._active[_nghost-%COMP%]:hover{color:var(--tui-text-01);cursor:default}._focus-visible[_nghost-%COMP%]:before{content:"";position:absolute;left:2.75rem;right:0;top:50%;height:1.5rem;margin-top:-.75rem;background:var(--tui-selection)}.t-marker[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;display:flex;width:2rem;height:2rem;border-radius:100%;margin-right:.75rem;flex-shrink:0;align-items:center;justify-content:center;background:var(--tui-secondary);color:var(--tui-link)}[_nghost-%COMP%]:disabled   .t-marker[_ngcontent-%COMP%]{background:var(--tui-base-03);color:var(--tui-base-07)}.t-marker_index[_ngcontent-%COMP%]:before{content:counter(steps)}[_nghost-%COMP%]:hover   .t-marker_index[_ngcontent-%COMP%]{color:var(--tui-link-hover);background:var(--tui-secondary-hover)}._active[_nghost-%COMP%]   .t-marker_index[_ngcontent-%COMP%]{color:var(--tui-primary-text);background:var(--tui-primary)}[_nghost-%COMP%]:not([data-state="normal"]):not(._active)   .t-marker_index[_ngcontent-%COMP%], [_nghost-%COMP%]:not(._active)   .t-marker_custom[_ngcontent-%COMP%] ~ .t-marker_index[_ngcontent-%COMP%]{display:none}.t-marker_error[_ngcontent-%COMP%]{background:var(--tui-error-bg);color:var(--tui-error-fill)}[_nghost-%COMP%]:hover   .t-marker_error[_ngcontent-%COMP%]{background:var(--tui-error-bg-hover);color:var(--tui-error-fill)}[_nghost-%COMP%]:not([data-state="error"])   .t-marker_error[_ngcontent-%COMP%], ._active[_nghost-%COMP%]   .t-marker_error[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:not([data-state="pass"])   .t-marker_pass[_ngcontent-%COMP%], ._active[_nghost-%COMP%]   .t-marker_pass[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:not([data-state="normal"])   .t-marker_custom[_ngcontent-%COMP%], ._active[_nghost-%COMP%]   .t-marker_custom[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]:hover   .t-marker_custom[_ngcontent-%COMP%]{color:var(--tui-link-hover);background:var(--tui-secondary-hover)}'],changeDetection:0}),n})(),Qt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.a4G({type:n}),n.\u0275inj=t.s3X({imports:[[O.MD,w.Yt]]}),n})();var pt=s(668),mt=s(3797),Q=s(3044),It=s(9104),W=s(1800),Mt=s(4680),Wt=s(6732),K=s(466),G=s(7936),j=s(4336),Rt=s(8976),yt=s(5656),$=s(8048),St=s(4108),J=s(2500),Z=s(3840),U=s(3724),Pt=s(7176),H=s(4532),Nt=s(6572),jt=s(9371),At=s(796),xt=s(5900),bt=s(5620);const Jt=["*",[["input"]]],Zt=["*","input"],Ft=(0,p.AL)({phoneMaskAfterCountryCode:"### ###-##-##",allowText:!1,countryCode:"+7"}),$t=n=>n.replace(/\D/g,"").length;function qt(n,o){const e=(n+o).replace(/[^#\d]+/g,"").length,i=r=>r.replace("+7"===n?/^(\+?7?\s?8?)\s?/:new RegExp(`^(\\+?${n.replace("+","")}?)\\s?`),"");return({elementState:r,data:a})=>{const{value:d,selection:f}=r;return{elementState:{selection:f,value:$t(d)>e?i(d):d},data:$t(a)>=e?i(a):a}}}function q(n){return Number.isNaN(parseInt(n.replace(Z.mM,""),10))}let Gt=(()=>{class n extends W._y{constructor(e,i,r,a,d){super(e,i),this.textfieldCleaner=r,this.options=a,this.textfieldSize=d,this.phoneMaskAfterCountryCode=this.options.phoneMaskAfterCountryCode,this.allowText=this.options.allowText,this.search="",this.searchChange=new t._w7,this.countryCode=this.options.countryCode,this.open=!1}set countryCodeSetter(e){const i=this.countryCode;this.countryCode=e,this.updateValueWithNewCountryCode(i,e)}get size(){return this.textfieldSize.size}get nativeFocusableElement(){return!this.textfield||this.computedDisabled?null:this.textfield.nativeFocusableElement}get focused(){return(0,P.ER)(this.nativeFocusableElement)||!!this.dropdown&&this.dropdown.focused}get nativeValue(){var e;return(null===(e=this.nativeFocusableElement)||void 0===e?void 0:e.value)||(0,H.qq)(this.value,this.maskOptions)}set nativeValue(e){this.nativeFocusableElement&&(this.nativeFocusableElement.value=e)}get inputMode(){return this.allowText?"text":"numeric"}get canOpen(){return this.interactive&&!!this.datalist}get canClean(){return this.nativeValue!==this.nonRemovablePrefix&&this.textfieldCleaner.cleaner}get maskOptions(){return this.calculateMask(this.countryCode,this.phoneMaskAfterCountryCode,this.nonRemovablePrefix,this.allowText)}onActiveZone(e){return this.updateFocused(e),!e||this.nativeValue||this.readOnly||this.allowText?this.nativeValue===this.nonRemovablePrefix||this.isTextValue?(this.updateSearch(""),void(this.nativeValue="")):void(!e&&!this.allowText&&this.nativeFocusableElement&&(this.nativeValue=this.nativeValue.replace(/\D$/,""))):(this.updateSearch(this.nonRemovablePrefix),void(this.nativeValue=this.nonRemovablePrefix))}onValueChange(e){const i=q(e)?e:e.replace(Z.mM,"").slice(0,this.maxPhoneLength);this.updateSearch(i),this.value=i===this.countryCode||q(i)?"":i,this.open=!0,!this.value&&!this.allowText&&(this.nativeValue=this.nonRemovablePrefix)}handleOption(e){this.focusInput(),this.value=e,this.nativeValue=(0,H.qq)(this.value,this.maskOptions),this.updateSearch(""),this.open=!1}setDisabledState(){super.setDisabledState(),this.open=!1}writeValue(e){super.writeValue(e),this.nativeValue=(0,H.qq)(e||"",this.maskOptions),this.updateSearch("")}getFallbackValue(){return""}get nonRemovablePrefix(){return`${this.countryCode} `}get maxPhoneLength(){return this.countryCode.length+this.phoneMaskAfterCountryCode.replace(/[^#]+/g,"").length}get isTextValue(){return!!this.search&&q(this.search)}calculateMask(e,i,r,a){const d=function te(n,o){return[...n.split("")," ",...o.replace(/[^#\- ()]+/g,"").split("").map(e=>"#"===e?/\d/:e)]}(e,i),f=[qt(e,i)];return a?{mask:({value:y})=>q(y)&&"+"!==y?H.Se.mask:d,preprocessors:f}:{mask:d,preprocessors:f,postprocessors:[(0,Nt.G)(r)],plugins:[(0,Nt.yu)((y,[D,L])=>[D===L?r.length:0,y.length])]}}focusInput(){this.nativeFocusableElement&&this.nativeFocusableElement.focus({preventScroll:!0})}updateSearch(e){this.search!==e&&(this.search=e,this.searchChange.emit(e))}updateValueWithNewCountryCode(e,i){this.isTextValue||(this.value=this.value.replace(e,i),this.nativeValue=(0,H.qq)(this.value,this.maskOptions))}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(c.eq,10),t.GI1(t.kD9),t.GI1($.CU),t.GI1(Ft),t.GI1($.$K))},n.\u0275cmp=t.In1({type:n,selectors:[["tui-input-phone"]],contentQueries:function(e,i,r){if(1&e&&t.szK(r,j.Ux,5,t.Yw2),2&e){let a;t.wto(a=t.Gqi())&&(i.datalist=a.first)}},viewQuery:function(e,i){if(1&e&&(t.CC$(K.Qw,5),t.CC$(G.y_,5)),2&e){let r;t.wto(r=t.Gqi())&&(i.dropdown=r.first),t.wto(r=t.Gqi())&&(i.textfield=r.first)}},hostVars:1,hostBindings:function(e,i){2&e&&t.e48("data-size",i.size)},inputs:{countryCodeSetter:[t.Wk5.None,"countryCode","countryCodeSetter"],phoneMaskAfterCountryCode:"phoneMaskAfterCountryCode",allowText:"allowText",search:"search"},outputs:{searchChange:"searchChange"},features:[t.M5G([(0,Mt.NK)(n),(0,W.q4)(n),(0,N.UH)(n)],[At.YL]),t.eg9],ngContentSelectors:Zt,decls:4,vars:13,consts:[[1,"t-hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["tuiValueAccessor","",1,"t-textfield",3,"disabled","focusable","invalid","maskito","nativeId","pseudoFocus","pseudoHover","readOnly","tuiTextfieldCleaner","value","valueChange"]],template:function(e,i){1&e&&(t.kPM(Jt),t.I0R(0,"tui-hosted-dropdown",0),t.iHE("openChange",function(a){return t.kNx(i.open,a)||(i.open=a),a}),t.qCj("tuiActiveZoneChange",function(a){return i.onActiveZone(a)}),t.I0R(1,"tui-primitive-textfield",1),t.iHE("valueChange",function(a){return t.kNx(i.nativeValue,a)||(i.nativeValue=a),a}),t.qCj("valueChange",function(a){return i.onValueChange(a)}),t._Xx(2),t._Xx(3,1,["ngProjectAs","input",5,["input"]]),t.C$Y()()),2&e&&(t.E7m("canOpen",i.canOpen)("content",i.datalist||""),t.OKB("open",i.open),t.yG2(),t.E7m("disabled",i.computedDisabled)("focusable",i.focusable)("invalid",i.computedInvalid)("maskito",i.maskOptions)("nativeId",i.nativeId)("pseudoFocus",i.computedFocused)("pseudoHover",i.pseudoHover)("readOnly",i.readOnly)("tuiTextfieldCleaner",i.canClean),t.OKB("value",i.nativeValue))},dependencies:[K.Qw,G.y_,Q.M,G.KQ,xt.a,bt.sD,$.es],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}"],changeDetection:0}),(0,m.UN)([b.w7],n.prototype,"calculateMask",null),n})(),ee=(()=>{class n extends jt.Cm{get value(){return this.host.nativeValue}onValueChange(e){this.host.onValueChange(e)}process(e){this.input=e}ngDoCheck(){this.input&&(this.input.type="tel",this.input.inputMode=this.host.inputMode)}}return n.\u0275fac=(()=>{let o;return function(i){return(o||(o=t.otF(n)))(i||n)}})(),n.\u0275dir=t.Sc5({type:n,selectors:[["tui-input-phone"]],features:[t.M5G([(0,N.iu)(n)]),t.eg9]}),n})(),ne=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.a4G({type:n}),n.\u0275inj=t.s3X({imports:[[bt.S,G.KA,K.GE,$.aS,Q.L,xt.i]]}),n})();var ht=s(3012),ie=s(812);function tt(n,o){return n[o].replace(/[()\- ]/g,"").length}function et(n,o){return n[o].replace(ie.mU,"")}function wt(n){const o=Number(n.slice(1,4));return o<600||o>799}let Ut=(()=>{class n{constructor(e){this.countriesMasks=e}transform(e,i){return i.find(r=>{if(r===U.q.RU&&/^[78]/.test(e)&&/^(?!880[1-9 ])/.test(e)&&e.length+1===tt(this.countriesMasks,U.q.RU)||e.startsWith(et(this.countriesMasks,r).replace(u.qs,""))&&e.length+1===tt(this.countriesMasks,r))switch(r){case U.q.RU:return wt(e);case U.q.KZ:return!wt(e);default:return!0}return!1})}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(ht.gu,16))},n.\u0275pipe=t.UTH({name:"tuiToCountryCode",type:n,pure:!0}),n})();var Lt=s(1040);function oe(n,o){if(1&n){const e=t.KQA();t.I0R(0,"button",10),t.qCj("click",function(){const a=t.usT(e).$implicit,d=t.GaO(3);return t.CGJ(d.onItemClick(a))}),t.wR5(1,"img",11),t.wVc(2,"tuiFlag"),t.I0R(3,"span",12),t.OEk(4),t.C$Y(),t.I0R(5,"span",13),t.OEk(6),t.wVc(7,"tuiMapper"),t.C$Y()()}if(2&n){const e=o.$implicit,i=t.GaO(2).ngIf,r=t.GaO();t.yG2(),t.E7m("src",t.kDX(2,3,e),t.K6U),t.yG2(3),t.oRS(" ",i[e]," "),t.yG2(2),t.oRS(" ",t.g7$(7,5,e,r.isoToCountryCodeMapper)," ")}}function re(n,o){if(1&n&&(t.I0R(0,"tui-data-list"),t.yuY(1,oe,8,8,"button",9),t.C$Y()),2&n){const e=t.GaO(2);t.yG2(),t.E7m("ngForOf",e.countries)}}function ae(n,o){if(1&n&&(t.wR5(0,"img",14),t.wVc(1,"tuiFlag")),2&n){const e=t.GaO().ngIf,i=t.GaO();t.E7m("alt",e[i.countryIsoCode])("src",t.kDX(1,2,i.countryIsoCode),t.K6U)}}function se(n,o){1&n&&t.C_f(0)}function ue(n,o){if(1&n&&(t.I0R(0,"div",15),t.yuY(1,se,1,0,"ng-container",16),t.C$Y()),2&n){const e=t.GaO(2);t.yG2(),t.E7m("polymorpheusOutlet",e.arrow)}}function le(n,o){if(1&n){const e=t.KQA();t.I0R(0,"tui-hosted-dropdown",1),t.iHE("openChange",function(r){t.usT(e);const a=t.GaO();return t.kNx(a.open,r)||(a.open=r),t.CGJ(r)}),t.qCj("tuiActiveZoneChange",function(r){t.usT(e);const a=t.GaO();return t.CGJ(a.onActiveZone(r))}),t.I0R(1,"div",2),t.wR5(2,"tui-primitive-textfield",3),t.I0R(3,"tui-input-phone",4),t.iHE("ngModelChange",function(r){t.usT(e);const a=t.GaO();return t.kNx(a.value,r)||(a.value=r),t.CGJ(r)}),t._Xx(4),t.wR5(5,"input",5),t.C$Y()(),t.yuY(6,re,2,1,"ng-template",null,6,t.gJz)(8,ae,2,4,"ng-template",null,7,t.gJz)(10,ue,2,1,"ng-template",null,8,t.gJz),t.C$Y()}if(2&n){const e=t.Gew(7),i=t.Gew(9),r=t.Gew(11),a=t.GaO();t.E7m("canOpen",!a.readOnly)("content",e),t.OKB("open",a.open),t.yG2(2),t.E7m("disabled",a.disabled)("editable",!1)("focusable",a.focusable)("pseudoFocus",a.open||null)("readOnly",a.readOnly)("tuiTextfieldCustomContent",i)("tuiTextfieldIcon",r)("tuiTextfieldLabelOutside",!0),t.yG2(),t.E7m("countryCode",a.inputPhoneCountryCode)("disabled",a.disabled)("focusable",a.focusable)("phoneMaskAfterCountryCode",a.phoneMaskAfterCountryCode)("pseudoFocus",a.pseudoFocus)("pseudoHover",a.pseudoHover)("pseudoInvalid",a.computedInvalid)("readOnly",a.readOnly),t.OKB("ngModel",a.value)}}const ce=["*"],Vt=(0,p.AL)({countries:[],countryIsoCode:U.q.RU});let _e=(()=>{class n extends W._y{constructor(e,i,r,a,d,f,y,D){super(e,i),this.countriesNames$=r,this.countriesMasks=a,this.options=d,this.flagPipe=f,this.extractCountryCodePipe=y,this.textfieldSize=D,this.countries=this.options.countries,this.countryIsoCodeChange=new t._w7,this.countryIsoCode=this.options.countryIsoCode,this.open=!1,this.arrow=Pt.ie,this.isoToCountryCodeMapper=L=>et(this.countriesMasks,L)}set isoCode(e){var i;this.countryIsoCode!==e&&(null===(i=this.inputPhoneComponent)||void 0===i||i.writeValue(this.value),this.countryIsoCode=e)}get size(){return this.textfieldSize.size}get nativeFocusableElement(){return this.inputPhoneComponent&&!this.computedDisabled?this.inputPhoneComponent.nativeFocusableElement:null}get focused(){return!!this.primitiveTextfield&&this.primitiveTextfield.focused||!!this.inputPhoneComponent&&this.inputPhoneComponent.focused}get inputPhoneCountryCode(){return et(this.countriesMasks,this.countryIsoCode)}get phoneMaskAfterCountryCode(){return this.calculateMaskAfterCountryCode(this.countriesMasks[this.countryIsoCode],this.inputPhoneCountryCode)}get countryFlagPath(){return this.getFlagPath(this.countryIsoCode)}onPaste(e){let i=function de(n){var o;return"dataTransfer"in n?(null===(o=n.dataTransfer)||void 0===o?void 0:o.getData("text/plain"))||"":(0,v.WM)(n)}(e).replace(Z.Go,"");const r=this.extractCountryCodePipe.transform(i,this.countries);r?(r===U.q.RU&&(i=i.replace(/^8/,"7")),this.updateCountryIsoCode(r),this.value=`${u.qs}${i}`):this.value=`${this.inputPhoneCountryCode}${i}`.replace(Z.mM,"").slice(0,tt(this.countriesMasks,this.countryIsoCode))}getFlagPath(e){return this.flagPipe.transform(e)}onItemClick(e){this.open=!1,this.updateCountryIsoCode(e),this.cdr.detectChanges();const i=tt(this.countriesMasks,e);this.value.length>i&&(this.value=this.value.slice(0,i)),this.nativeFocusableElement&&this.nativeFocusableElement.focus()}setDisabledState(){super.setDisabledState(),this.close()}isoToCountryCode(e){return et(this.countriesMasks,e)}onModelChange(e){this.value=e}onActiveZone(e){this.updateFocused(e)}getFallbackValue(){return""}calculateMaskAfterCountryCode(e,i){return e.replace(i,"").trim()}close(){this.open=!1}updateCountryIsoCode(e){this.countryIsoCode=e,this.countryIsoCodeChange.emit(e)}}return n.\u0275fac=function(e){return new(e||n)(t.GI1(c.eq,10),t.GI1(t.kD9),t.GI1(ht.cV),t.GI1(ht.gu),t.GI1(Vt),t.GI1(J.i),t.GI1(Ut),t.GI1($.$K))},n.\u0275cmp=t.In1({type:n,selectors:[["tui-input-phone-international"]],viewQuery:function(e,i){if(1&e&&(t.CC$(Gt,5),t.CC$(G.y_,5)),2&e){let r;t.wto(r=t.Gqi())&&(i.inputPhoneComponent=r.first),t.wto(r=t.Gqi())&&(i.primitiveTextfield=r.first)}},hostVars:1,hostBindings:function(e,i){1&e&&t.qCj("paste.capture.prevent.stop",function(a){return i.onPaste(a)})("drop.capture.prevent.stop",function(a){return i.onPaste(a)}),2&e&&t.e48("data-size",i.size)},inputs:{isoCode:[t.Wk5.None,"countryIsoCode","isoCode"],countries:"countries"},outputs:{countryIsoCodeChange:"countryIsoCodeChange"},features:[t.M5G([(0,Mt.NK)(n),(0,W.q4)(n),J.i,Ut],[At.YL]),t.eg9],ngContentSelectors:ce,decls:2,vars:3,consts:[["class","t-hosted-dropdown",3,"canOpen","content","open","openChange","tuiActiveZoneChange",4,"ngIf"],[1,"t-hosted-dropdown",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["tuiGroup",""],["tuiHintContent","","tuiTextfieldPostfix","","tuiTextfieldPrefix","",1,"t-country-select","tui-group__auto-width-item",3,"disabled","editable","focusable","pseudoFocus","readOnly","tuiTextfieldCustomContent","tuiTextfieldIcon","tuiTextfieldLabelOutside"],[1,"t-input-phone","tui-group__auto-width-item",3,"countryCode","disabled","focusable","phoneMaskAfterCountryCode","pseudoFocus","pseudoHover","pseudoInvalid","readOnly","ngModel","ngModelChange"],["autocomplete","new-password","tuiTextfield",""],["dropdown",""],["countryValueContent",""],["icon",""],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"],["alt","",1,"t-country-item-flag",3,"src"],[1,"t-country-item-name"],[1,"t-country-item-code"],[1,"t-flag",3,"alt","src"],["appearance","icon","tuiWrapper",""],[4,"polymorpheusOutlet"]],template:function(e,i){1&e&&(t.kPM(),t.yuY(0,le,12,20,"tui-hosted-dropdown",0),t.wVc(1,"async")),2&e&&t.E7m("ngIf",t.kDX(1,1,i.countriesNames$))},dependencies:[K.Qw,G.y_,Gt,G.b,j.yi,j.sP,O.u_,Q.M,Rt.Ko,G.KQ,yt.cb,$.We,$.Id,$.a4,$.uU,$.E9,ee,c.ue,c._G,O.ay,St.S,Lt.Af,O.a,J.i,It.M],styles:["[_nghost-%COMP%]{display:block}._disabled[_nghost-%COMP%]{pointer-events:none}.t-hosted-dropdown[_ngcontent-%COMP%]{display:block}.t-country-select[_ngcontent-%COMP%]{width:5.625rem}.t-country-select[_ngcontent-%COMP%]:not(._readonly)     input:not(:disabled){cursor:pointer}.t-country-select._readonly[_ngcontent-%COMP%]     input{cursor:default}.t-country-select[data-size=m][_ngcontent-%COMP%]{width:5.5rem}.t-country-select[data-size=s][_ngcontent-%COMP%]{width:2rem}.t-country-select[data-size=s][_ngcontent-%COMP%]   .t-flag[_ngcontent-%COMP%]{margin-left:-1rem}.t-arrow-icon[_ngcontent-%COMP%]{position:relative;display:flex;width:1.5rem;height:1.5rem;align-items:center;justify-content:center;box-sizing:border-box;cursor:pointer;pointer-events:none;pointer-events:auto}._readonly[_nghost-%COMP%]   .t-arrow-icon[_ngcontent-%COMP%], ._disabled[_nghost-%COMP%]   .t-arrow-icon[_ngcontent-%COMP%]{pointer-events:none}.t-arrow-icon_open[_ngcontent-%COMP%]{transform:rotate(180deg)}.t-input-phone[_ngcontent-%COMP%]{flex:1}.t-flag[_ngcontent-%COMP%]{width:1.75rem;height:1.25rem;margin-left:-.5rem}.t-country-item-flag[_ngcontent-%COMP%]{width:1.75rem;height:1.25rem}.t-country-item-name[_ngcontent-%COMP%]{margin-left:.75rem;margin-right:auto}.t-country-item-code[_ngcontent-%COMP%]{color:var(--tui-text-02);margin-right:.25rem}"],changeDetection:0}),(0,m.UN)([b.w7],n.prototype,"calculateMaskAfterCountryCode",null),n})(),pe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.a4G({type:n}),n.\u0275inj=t.s3X({imports:[[O.MD,c.y,Lt.Ux,w.Yt,ne,Rt.Gy,G.KA,$.aS,yt.WY,K.GE,j.A$,Pt.S2,St.g,Wt.kR,It.E,Q.L,J.y]]}),n})();var gt=s(8588),Ct=s(9888),nt=s(6528),Bt=s(5e3),me=s(908);const he=(n,o,e)=>({"bg-primary text-bold text-white":n,"border-t":o,"border-s":e});function ge(n,o){if(1&n){const e=t.KQA();t.I0R(0,"div",5),t.qCj("click",function(){const a=t.usT(e).$implicit,d=t.GaO();return t.CGJ(d.control.setValue(a))}),t.OEk(1),t.C$Y()}if(2&n){const e=o.$implicit,i=t.GaO();t.E7m("ngClass",t.uAc(2,he,i.control.value===e,e<i.perRow+1,(e-1)%i.perRow==0)),t.yG2(),t.oRS(" ",e," ")}}const Ce=(n,o)=>({"grid-template-rows":n,"grid-template-columns":o}),fe=["*"];let ve=(()=>{class n{constructor(){this.cd=(0,t.uUt)(t.kD9),this.control=new c.Ku(null),this.maxPeople=10,this.perRow=2,this.options=[],this.innerWidth=window.innerWidth}ngOnInit(){this.recalculatePerRow(),this.recalculateOptions()}ngOnChanges(){this.recalculatePerRow(),this.recalculateOptions()}writeValue(e){if("string"==typeof e&&e.length>0&&e.match(/^\d+$/)&&(e=Number(e)),null==typeof e&&(e=null),null===e||"number"==typeof e)return this.control.setValue(e),void this.cd.detectChanges();console.warn(`PeopleCountInputComponent: invalid value ${e}`)}registerOnChange(e){this.control.valueChanges.subscribe(e)}registerOnTouched(e){this.control.valueChanges.subscribe(e)}setDisabledState(e){e?this.control.disable():this.control.enable()}onResize(e){this.innerWidth=window.innerWidth,this.recalculatePerRow()}recalculatePerRow(){if(this.innerWidth<768)return void(this.perRow=2);if(this.innerWidth<992&&this.maxPeople%3==0)return void(this.perRow=3);let e=5;for(;e>2;){if(this.maxPeople%e==0)return void(this.perRow=e);e--}this.perRow=e}recalculateOptions(){this.options=Array.from({length:this.maxPeople},(e,i)=>i+1)}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-people-count-input"]],hostBindings:function(i,r){1&i&&t.qCj("resize",function(d){return r.onResize(d)},!1,t.MbM)},inputs:{maxPeople:"maxPeople"},standalone:!0,features:[t.M5G([E.UF,{provide:c.Y6,useExisting:n,multi:!0}]),t.SYr,t.UHJ],ngContentSelectors:fe,decls:8,vars:5,consts:()=>{let e;return e="Per prenotazioni pi\xF9 grandi di " + "\ufffd0\ufffd" + " persone," + "\ufffd#7\ufffd" + "Contattaci" + "\ufffd/#7\ufffd" + "",[[1,"flex","items-center","justify-center","mb-5"],[1,"grid","border-primary","text-2xl",3,"ngStyle"],[1,"text-center","text-lg"],e,[1,"ms-1"],[1,"cursor-pointer","flex","items-center","justify-center","border-primary","border-e","border-b",3,"ngClass","click"],["class","cursor-pointer flex items-center justify-center border-primary border-e border-b",3,"ngClass"]]},template:function(i,r){1&i&&(t.kPM(),t._Xx(0),t.I0R(1,"div",0)(2,"div",1),t.c53(3,ge,2,6,"div",6,t.oxv),t.C$Y()(),t.I0R(5,"p",2),t.Mff(6,3),t.wR5(7,"app-contact-us",4),t.U7j(),t.C$Y()),2&i&&(t.yG2(2),t.E7m("ngStyle",t.IBC(2,Ce,"repeat("+r.options.length/r.perRow+", 5rem)","repeat("+r.options.length/(r.options.length/r.perRow)+", 5rem)")),t.yG2(),t.oho(r.options),t.yG2(4),t.oBb(r.maxPeople),t.Ylm(6))},dependencies:[O.QF,O.Qt,g.w,me.Q],changeDetection:0})}return n})();var it=s(8824),V=s(400),ot=s(9880),zt=s(1673),Yt=s(7692),ft=s(9212),Ee=s(3412),Te=s(7368),rt=s(964),at=s(9772),Oe=s(1560),vt=s(1128),X=s(7048),st=s(8256),B=s(8392),Et=s(4820),Ie=s(1940),Me=s(6772);let Re=(()=>{class n extends Me.A{constructor(){super("reservations"),this.version=2}getValidTimes(e){let i="";return e instanceof V.EK&&(i=`${e.year}-${(e.month+1)%13}-${e.day}`),this.get("valid_times",{params:{date:i}})}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275prov=t.wxM({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const ye=["warningsDiv"];function Se(n,o){if(1&n){const e=t.KQA();t.I0R(0,"div",8)(1,"tui-checkbox-block",9),t.qCj("ngModelChange",function(){t.usT(e);const r=t.GaO();return t.CGJ(r.showOnlyValidDates.set(!r.showOnlyValidDates()))}),t.SAx(2),t.aS0(3,10),t.k70(),t.C$Y()()}if(2&n){const e=t.GaO();t.yG2(),t.E7m("contentAlign","left")("ngModel",e.showOnlyValidDates())}}function Pe(n,o){if(1&n){const e=t.KQA();t.I0R(0,"p",11),t.SAx(1),t.aS0(2,12),t.k70(),t.I0R(3,"span",13),t.qCj("click",function(){t.usT(e);const r=t.GaO();return t.CGJ(r.date.reset())}),t.OEk(4),t.wVc(5,"date"),t.I0R(6,"mat-icon",14),t.OEk(7,"edit"),t.C$Y()()()}if(2&n){const e=t.GaO();t.yG2(4),t.oRS(" ",t.g7$(5,1,e.date.value.toLocalNativeDate(),"EEEE d MMMM y")," ")}}function Ne(n,o){1&n&&t.wR5(0,"tui-loader",7),2&n&&t.E7m("showLoader",!0)}const Ae=(n,o)=>({"btn-primary":n,"btn-primary-outline":o});function xe(n,o){if(1&n){const e=t.KQA();t.I0R(0,"button",17),t.qCj("click",function(){const a=t.usT(e).$implicit,d=t.GaO(3);return t.CGJ(d.onTimeClick(a))}),t.OEk(1),t.C$Y()}if(2&n){const e=o.$implicit,i=t.GaO(3);t.E7m("ngClass",t.IBC(2,Ae,i.time.value&&i.time.value.hours==e.hours&&i.time.value.minutes==e.minutes,!(i.time.value&&i.time.value.hours==e.hours&&i.time.value.minutes==e.minutes))),t.yG2(),t.oRS(" ",e," ")}}function be(n,o){if(1&n&&(t.I0R(0,"div",22),t.OEk(1),t.C$Y()),2&n){const e=o.$implicit;t.yG2(),t.cNF(e)}}function De(n,o){if(1&n){const e=t.KQA();t.I0R(0,"div",18,19),t.c53(2,be,2,1,"div",23,t.oxv),t.I0R(4,"button",20),t.qCj("click",function(){t.usT(e);const r=t.GaO(3);return t.CGJ(r.warningAccepted.setValue(!0))}),t.SAx(5),t.aS0(6,21),t.k70(),t.C$Y()()}if(2&n){const e=t.GaO(3);t.yG2(2),t.oho(e.warningsToShow())}}function Fe(n,o){if(1&n&&(t.I0R(0,"div",15),t.c53(1,xe,2,5,"button",24,t.oxv),t.C$Y(),t.yuY(3,De,7,0,"div",16)),2&n){const e=t.GaO(2);t.yG2(),t.oho(e.validTimes()),t.yG2(2),t.C0Y(3,e.warningsToShow().length>0?3:-1)}}function $e(n,o){if(1&n){const e=t.KQA();t.I0R(0,"div")(1,"p",25),t.aS0(2,26),t.C$Y(),t.I0R(3,"button",27),t.qCj("click",function(){t.usT(e);const r=t.GaO(2);return t.CGJ(r.findValidDate())}),t.SAx(4),t.aS0(5,28),t.k70(),t.C$Y()()}}function Ge(n,o){if(1&n&&t.yuY(0,Fe,4,1)(1,$e,6,0),2&n){const e=t.GaO();t.C0Y(0,e.validTimes().length>0?0:1)}}let we=(()=>{class n{constructor(){this.cd=(0,t.uUt)(t.kD9),this.reservationsService=(0,t.uUt)(Et.G),this.reservationsv2=(0,t.uUt)(Re),this.notifications=(0,t.uUt)(vt.E),this.destroy$=(0,t.uUt)(E.UF),this.datePipe=(0,t.uUt)(O.y),this.showOnlyValidDates=(0,t.OCB)(!1),this.hasSeenInvalidDateMessage=(0,t.OCB)(!1),this.valueChanged=new t._w7,this.inputTouch=new t._w7,this.lastDate=(0,t.OCB)(null),this.date=new c.Ku(null,[c.AQ.required]),this.time=new c.Ku(null,[c.AQ.required]),this.warningAccepted=new c.Ku(!1),this.groups=(0,t.OCB)({}),this.messages=(0,t.OCB)({}),this.warningsToShow=(0,t.OCB)([]),this.validDates=(0,t.OCB)([]),this.validTimes=(0,t.OCB)([]),this.loadingTimes=(0,t.OCB)(!1),this.loadingDates=(0,t.OCB)(!1),this.today=(0,t.OCB)(V.EK.currentLocal()),this.maxDaysInAdvance=300,this.maxDate=(0,t.OCB)(null),this.disabledDates=e=>!(!this.showOnlyValidDates()||!e.dayBefore(this.today())&&!e.dayAfter(this.today().append({day:this.maxDaysInAdvance}))&&(0===this.validDates().length||e.dayAfter(this.validDates()[this.validDates().length-1])||this.validDates().find(i=>i.daySame(e)))),this.paymentGroupDefaultMessage="Per assicurarti uno dei nostro vavoli sar\xE0 necessario un pagamento che verr\xE0 scalato dal conto finale al ristorante."}ngOnInit(){this.updateMaxDate(),this.loadDates(),this.date.valueChanges.pipe((0,T.a)(this.destroy$),(0,ft.y)(()=>this.time.setValue(null)),(0,ft.y)(e=>{e&&this.lastDate.set(e)})).subscribe(),this.time.valueChanges.pipe((0,T.a)(this.destroy$)).subscribe({next:e=>{this.warningAccepted.setValue(!1);let i=[];const r={...this.groups()};if(e){const a=r[e.toString()];a&&i.push(a?.message||this.paymentGroupDefaultMessage);const d=this.messages()[e.toString()];d&&(i=[...i,...d])}this.warningsToShow.set(i),setTimeout(()=>{this.warningsToShow().length&&this.warningsDiv?.nativeElement&&this.warningsDiv.nativeElement.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})})}}),(0,Ee.U)(this.date.valueChanges.pipe((0,T.a)(this.destroy$),(0,h.I)(()=>this.date.valid)),this.time.valueChanges.pipe((0,T.a)(this.destroy$),(0,h.I)(()=>this.time.valid)),this.warningAccepted.valueChanges.pipe((0,T.a)(this.destroy$),(0,h.I)(()=>!0===this.warningAccepted.value))).subscribe({next:()=>{this.touched();const e=this.date.value,i=this.time.value;e&&i&&(0===this.warningsToShow().length||this.warningAccepted.value)&&this.emit((0,rt.Qx)(e,i))}}),this.date.valueChanges.pipe((0,T.a)(this.destroy$),(0,h.I)(e=>e instanceof V.EK),(0,ft.y)(()=>this.loadingTimes.set(!0)),(0,Te.G)(e=>this.reservationsv2.getValidTimes(e).pipe((0,it.U)(()=>this.loadingTimes.set(!1))))).subscribe({next:e=>{const i=e.turns.map(a=>a.valid_times).filter(a=>Array.isArray(a)&&a.length>0).flat();this.validTimes.set(i.map(a=>V.uc.fromString((0,at.CU)(a))).sort((a,d)=>a.toAbsoluteMilliseconds()-d.toAbsoluteMilliseconds())),this.groups.set(e.turns.reduce((a,d)=>(d.valid_times?.forEach(f=>{d.preorder_reservation_group&&(a[(0,at.CU)(f)]=d.preorder_reservation_group)}),a),{}));const r={};e.turns.forEach(a=>{a.valid_times?.forEach(d=>{(a.messages||[]).forEach(f=>{f&&"string"==typeof f.message&&f.message.length>0&&(r[(0,at.CU)(d)]||=[],r[(0,at.CU)(d)].push(f.message))})})}),this.messages.set(r)},error:e=>{this.notifications.error(e instanceof X.gj?(0,st.mk)(e):B.a)}})}findValidDate(){this.hasSeenInvalidDateMessage.set(!0),this.showOnlyValidDates.set(!0),this.date.reset()}writeValue(e){return null==e?(this.date.reset(),void this.time.reset()):"string"==typeof e?(this.date.setValue((0,rt.ay)(e)),this.time.setValue((0,rt.QX)(e)),void setTimeout(()=>this.cd.detectChanges())):void console.warn("Invalid parameter provided to writeValue",{obj:e})}registerOnChange(e){this.valueChanged.subscribe(e)}registerOnTouched(e){this.inputTouch.subscribe(e)}setDisabledState(e){e?(this.date.disable(),this.time.disable()):(this.date.enable(),this.time.enable())}ngOnChanges(e){this.updateMaxDate()}onDayClick(e){this.date.setValue(e)}touched(){this.inputTouch.emit()}emit(e){this.valueChanged.emit(e)}onTimeClick(e){this.time.setValue(e)}onMonthChange(e){this.loadDates(e)}loadDates(e=V.Ci.currentLocal()){const i=new V.EK(e.year,e.month,1),r=i.append({month:1}).append({day:-1});this.loadingDates.set(!0),this.reservationsService.getValidDates({from_date:this.datePipe.transform(i.toUtcNativeDate(),"yyyy-MM-dd")||"",to_date:this.datePipe.transform(r.toUtcNativeDate(),"yyyy-MM-dd")||""}).pipe((0,T.a)(this.destroy$),(0,it.U)(()=>this.loadingDates.set(!1))).subscribe({next:a=>{this.validDates.update(d=>{let f=[...d];return a.forEach(y=>{f.find(D=>D.daySame(y))||f.push(y)}),f})},error:a=>{console.error(a),this.notifications.error(a instanceof X.gj?(0,st.mk)(a):B.a)}})}updateMaxDate(){this.maxDate.set(V.EK.currentLocal().append({day:this.maxDaysInAdvance}))}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-datetime-input"]],viewQuery:function(i,r){if(1&i&&t.CC$(ye,5),2&i){let a;t.wto(a=t.Gqi())&&(r.warningsDiv=a.first)}},inputs:{maxDaysInAdvance:"maxDaysInAdvance"},outputs:{valueChanged:"valueChanged",inputTouch:"inputTouch"},standalone:!0,features:[t.M5G([E.UF,{provide:c.Y6,useExisting:n,multi:!0}]),t.SYr,t.UHJ],decls:11,vars:9,consts:()=>{let e,i,r,a,d,f;return e="Scegli la data",i="Solo date selezionabili",r="Seleziona l'orario per il giorno",a="Conferma",d="Siamo spiacenti, non sono disponibili orari per la data selezionata.",f="Trova una data",[[3,"expanded"],[1,"text-xl","text-center","mb-3"],e,[1,"flex","flex-col","items-center","justify-center"],[3,"min","max","disabledItemHandler","value","monthChange","touchend","dayClick"],["class","p-3"],["class","text-xl mb-2"],[3,"showLoader"],[1,"p-3"],[3,"contentAlign","ngModel","ngModelChange"],i,[1,"text-xl","mb-2"],r,[1,"cursor-pointer","inline-flex","items-center","ms-2","underline",3,"click"],[1,"ms-1"],[1,"grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","gap-3"],["class","w-full my-5 border border-primary p-3 rounded-lg"],["type","button","size","m","tuiButton","","appearance","custom",3,"ngClass","click"],[1,"w-full","my-5","border","border-primary","p-3","rounded-lg"],["warningsDiv",""],["tuiButton","","appearance","primary","size","m","type","button",1,"mb-3",3,"click"],a,[1,"w-full","text-pretty","my-3","text-xl"],["class","w-full text-pretty my-3 text-xl"],["type","button","size","m","tuiButton","","appearance","custom",3,"ngClass"],[1,"text-xl","text-danger","block","mb-2"],d,["tuiButton","","type","button",3,"click"],f]},template:function(i,r){1&i&&(t.I0R(0,"tui-expand",0)(1,"p",1),t.SAx(2),t.aS0(3,2),t.k70(),t.C$Y(),t.I0R(4,"div",3)(5,"tui-calendar",4),t.qCj("monthChange",function(d){return r.onMonthChange(d)})("touchend",function(){return r.touched()})("dayClick",function(d){return r.onDayClick(d)}),t.C$Y(),t.yuY(6,Se,4,2,"div",5),t.C$Y()(),t.I0R(7,"tui-expand",0),t.yuY(8,Pe,8,4,"p",6)(9,Ne,1,1,"tui-loader",7)(10,Ge,2,1),t.C$Y()),2&i&&(t.E7m("expanded",r.date.invalid),t.yG2(5),t.E7m("min",r.today())("max",r.showOnlyValidDates()?r.maxDate():null)("disabledItemHandler",r.disabledDates)("value",r.lastDate()),t.yG2(),t.C0Y(6,r.hasSeenInvalidDateMessage()?6:-1),t.yG2(),t.E7m("expanded",r.date.valid),t.yG2(),t.C0Y(8,r.date.value?8:-1),t.yG2(),t.C0Y(9,r.loadingTimes()?9:10))},dependencies:[ot.kh,ot.st,zt.y,zt.I,M.CI,M.Kw,O.QF,O.y,Oe.qL,Yt.Sk,Yt.Cb,nt.i,nt.I,c.sl,c.ue,Ie.Q,c.y,c._G],changeDetection:0})}return n})();var Le=s(1676),z=s(9938),ke=s(9956),Ve=s(3468),Be=s(1236),ze=s(1588);function Ye(n,o){if(1&n&&(t.OEk(0),t.SAx(1),t.aS0(2,8),t.k70()),2&n){const e=t.GaO();t.oRS(" ",e.people.value," ")}}function Ke(n,o){1&n&&(t.SAx(0),t.aS0(1,9),t.k70())}function He(n,o){if(1&n&&(t.OEk(0),t.wVc(1,"date")),2&n){const e=t.GaO();t.oRS(" ",t.g7$(1,1,e.datetime.value,"EEEE d MMMM y HH:mm")," ")}}function Xe(n,o){1&n&&(t.SAx(0),t.aS0(1,10),t.k70())}function Qe(n,o){if(1&n&&t.wR5(0,"app-errors",16),2&n){const e=t.GaO(2);t.E7m("errors",e.people.errors)}}function We(n,o){if(1&n){const e=t.KQA();t.I0R(0,"div",11)(1,"div",12)(2,"app-people-count-input",13)(3,"span",14),t.aS0(4,15),t.C$Y()(),t.yuY(5,Qe,1,1,"app-errors",16),t.I0R(6,"tui-expand",17)(7,"button",18),t.qCj("click",function(){t.usT(e);const r=t.GaO();return t.CGJ(r.nextStep())}),t.SAx(8),t.aS0(9,19),t.k70(),t.C$Y()()()()}if(2&n){const e=t.GaO();t.yG2(2),t.E7m("maxPeople",e.maxPeople())("formControl",e.people),t.yG2(3),t.C0Y(5,e.showErrorsFor(0)?5:-1),t.yG2(),t.E7m("expanded",e.people.valid||e.maxIndex()>0)}}function je(n,o){if(1&n&&t.wR5(0,"app-errors",16),2&n){const e=t.GaO(2);t.E7m("errors",e.datetime.errors)}}function Je(n,o){if(1&n&&(t.I0R(0,"div",11)(1,"div",12),t.wR5(2,"app-datetime-input",20,21),t.yuY(4,je,1,1,"app-errors",16),t.C$Y()()),2&n){const e=t.GaO();t.yG2(2),t.E7m("maxDaysInAdvance",e.maxDaysInAdvance())("formControl",e.datetime),t.yG2(2),t.C0Y(4,e.showErrorsFor(1)?4:-1)}}function Ze(n,o){if(1&n&&t.wR5(0,"app-errors",16),2&n){const e=t.GaO(2);t.E7m("errors",e.contacts.controls.firstName.errors)}}function qe(n,o){if(1&n&&t.wR5(0,"app-errors",16),2&n){const e=t.GaO(2);t.E7m("errors",e.contacts.controls.lastName.errors)}}function tn(n,o){if(1&n&&t.wR5(0,"app-errors",16),2&n){const e=t.GaO(2);t.E7m("errors",e.contacts.controls.email.errors)}}function en(n,o){if(1&n&&t.wR5(0,"app-errors",16),2&n){const e=t.GaO(2);t.E7m("errors",e.contacts.controls.phone.errors)}}function nn(n,o){if(1&n){const e=t.KQA();t.I0R(0,"div",22)(1,"form",23),t.qCj("ngSubmit",function(){t.usT(e);const r=t.GaO();return t.CGJ(r.nextStep())}),t.I0R(2,"div",24)(3,"div",25)(4,"tui-input",26),t.SAx(5),t.aS0(6,27),t.k70(),t.wR5(7,"input",28),t.C$Y(),t.yuY(8,Ze,1,1,"app-errors",16),t.C$Y(),t.I0R(9,"div",25)(10,"tui-input",29),t.SAx(11),t.aS0(12,30),t.k70(),t.wR5(13,"input",31),t.C$Y(),t.yuY(14,qe,1,1,"app-errors",16),t.C$Y()(),t.I0R(15,"div",32)(16,"tui-input",26),t.SAx(17),t.aS0(18,33),t.k70(),t.wR5(19,"input",34),t.C$Y(),t.yuY(20,tn,1,1,"app-errors",16),t.C$Y(),t.I0R(21,"div",32)(22,"tui-input-phone-international",35),t.iHE("countryIsoCodeChange",function(r){t.usT(e);const a=t.GaO();return t.kNx(a.countryIsoCode,r)||(a.countryIsoCode=r),t.CGJ(r)}),t.SAx(23),t.aS0(24,36),t.k70(),t.C$Y(),t.yuY(25,en,1,1,"app-errors",16),t.C$Y(),t.I0R(26,"tui-expand",17)(27,"button",37),t.SAx(28),t.aS0(29,38),t.k70(),t.C$Y()()()()}if(2&n){const e=t.GaO();t.yG2(),t.E7m("formGroup",e.contacts),t.yG2(3),t.E7m("tuiAutoFocus",!0)("formControlName","firstName"),t.yG2(4),t.C0Y(8,e.showErrorsFor(2)?8:-1),t.yG2(2),t.E7m("formControlName","lastName"),t.yG2(4),t.C0Y(14,e.showErrorsFor(2)?14:-1),t.yG2(2),t.E7m("tuiAutoFocus",!0)("formControlName","email"),t.yG2(4),t.C0Y(20,e.showErrorsFor(2)?20:-1),t.yG2(2),t.E7m("countries",e.countries),t.OKB("countryIsoCode",e.countryIsoCode),t.E7m("formControlName","phone"),t.yG2(3),t.C0Y(25,e.showErrorsFor(2)?25:-1),t.yG2(),t.E7m("expanded",e.contacts.valid)}}function on(n,o){if(1&n){const e=t.KQA();t.I0R(0,"div",22)(1,"form",23),t.qCj("ngSubmit",function(){t.usT(e);const r=t.GaO();return t.CGJ(r.nextStep())}),t.I0R(2,"div",32)(3,"tui-input-number",39),t.SAx(4),t.aS0(5,40),t.k70(),t.C$Y()(),t.I0R(6,"div",32)(7,"tui-textarea",41),t.SAx(8),t.aS0(9,42),t.k70(),t.C$Y()(),t.I0R(10,"div",32)(11,"tui-checkbox-block",43),t.SAx(12),t.aS0(13,44),t.k70(),t.C$Y()(),t.I0R(14,"button",45),t.SAx(15),t.aS0(16,46),t.k70(),t.C$Y()()()}if(2&n){const e=t.GaO();t.yG2(),t.E7m("formGroup",e.notesForm),t.yG2(2),t.E7m("decimal","never")("min",0)("step",1)("max",e.people.value),t.yG2(11),t.E7m("showLoader",e.submitting())("disabled",e.notesForm.invalid)}}class Y{constructor(){this.destroy$=(0,t.uUt)(E.UF),this.reservations=(0,t.uUt)(Et.G),this.notifications=(0,t.uUt)(vt.E),this.publicDataService=(0,t.uUt)(Le.s),this.cd=(0,t.uUt)(t.kD9),this.router=(0,t.uUt)(Be.E5),this.createdReservation=new t._w7,this.currentIndex=(0,t.OCB)(0),this.lastMaxIndex=0,this.maxIndex=(0,t.S6b)(()=>{const o=this.currentIndex();return this.lastMaxIndex<o&&(this.lastMaxIndex=o),this.lastMaxIndex}),this.maxPeople=(0,t.OCB)(10),this.maxDaysInAdvance=(0,t.OCB)(300),this.submitting=(0,t.OCB)(!1),this.submitted=(0,t.OCB)(!1),this.people=new c.Ku(null,[c.AQ.required,I.S.min(0)]),this.datetime=new c.Ku(null,[c.AQ.required,I.S.pattern(rt.e6)]),this.contacts=new c.WC({firstName:new c.Ku(null,[c.AQ.required,c.AQ.minLength(2)]),lastName:new c.Ku(null,[c.AQ.required,c.AQ.minLength(2)]),email:new c.Ku(null,[c.AQ.required,c.AQ.email]),phone:new c.Ku(null,[c.AQ.required,c.AQ.minLength(6)])}),this.notesForm=new c.WC({notes:new c.Ku(null),children:new c.Ku(0,[c.AQ.required,I.S.min(0)]),acceptTerms:new c.Ku(!1,[c.AQ.requiredTrue])}),this.countries=Object.values(U.q),this.configs=(0,t.uUt)(Ve.m),this.countryIsoCode=U.q.IT,this.locale="en",this.steps={0:{form:this.people,submitted:!1,viewed:!1},1:{form:this.datetime,submitted:!1,viewed:!1},2:{form:this.contacts,submitted:!1,viewed:!1},3:{form:this.notesForm,submitted:!1,viewed:!1}}}ngOnInit(){this.configs.locale$.pipe((0,T.a)(this.destroy$)).subscribe(o=>{this.locale=o?o.split("-")[0]:"en"}),this.people.valueChanges.pipe((0,T.a)(this.destroy$),(0,h.I)(o=>"number"==typeof o&&o>0),(0,h.I)(()=>0===this.currentIndex())).subscribe({next:()=>{setTimeout(()=>this.nextStep(),10)}}),this.datetime.valueChanges.pipe((0,T.a)(this.destroy$),(0,h.I)(o=>this.datetime.valid),(0,h.I)(()=>1===this.currentIndex())).subscribe({next:()=>{setTimeout(()=>this.nextStep(),10)}}),this.publicDataService.data$.pipe((0,T.a)(this.destroy$),(0,h.I)(o=>null!==o)).subscribe({next:o=>{const e=o.settings.max_people_per_reservation??null;this.maxPeople.set(e?Number(e):this.maxPeople());const i=o.settings.reservation_max_days_in_advance??null;this.maxDaysInAdvance.set(i?Number(i):this.maxDaysInAdvance())}})}nextStep(){this.currentStep().submitted=!0,!this.currentStep().form.invalid&&(this.steps[this.currentIndex()+1]?(this.currentIndex.update(o=>o+1),this.currentStep().viewed=!0):this.submitForm())}setState(o){this.currentIndex.set(o)}getState(o){const e=this.steps[o];if(!e)return"normal";const i=e.form;return!i||o>this.currentIndex()?"normal":i.invalid&&i.dirty?"error":i.valid?"pass":"normal"}showErrorsFor(o){if(this.submitted())return!0;const e=this.steps[o];return!e||e.submitted}currentStep(){return this.steps[this.currentIndex()]}loadPrevious(o){let e=0;o.adults&&(e+=o.adults),o.children&&(e+=o.children),this.people.setValue(e||null),this.datetime.setValue(o.datetime?o.datetime:null),o.firstName&&this.contacts.get("firstName")?.setValue(o.firstName),o.lastName&&this.contacts.get("lastName")?.setValue(o.lastName),o.email&&this.contacts.get("email")?.setValue(o.email),o.phone&&this.contacts.get("phone")?.setValue(o.phone),o.phoneCountry&&(this.countryIsoCode=o.phoneCountry),o.notes&&this.notesForm.patchValue({notes:o.notes}),o.children&&this.notesForm.patchValue({children:o.children})}formatOutput(){const o=this.contacts.get("email")?.value,e=this.contacts.get("phone")?.value,i=this.contacts.get("firstName")?.value,r=this.contacts.get("lastName")?.value,a=this.datetime.value,d=this.notesForm.get("children")?.value,f=this.people.value,y=this.notesForm.get("notes")?.value;let D=f||0;return d&&(D-=d),function Ue(n){const o=(e,i)=>(console.warn(`Invalid field ${e}`,i),null);return"string"==typeof n.lang&&n.lang.length>0?"string"==typeof n.email&&n.email.length>0?"string"==typeof n.phone&&n.phone.length>0?"string"==typeof n.firstName&&n.firstName.length>0?"string"==typeof n.lastName&&n.lastName.length>0?"string"==typeof n.datetime&&n.datetime.length>0?null===n.notes||"string"==typeof n.notes&&n.notes.length>0?"number"==typeof n.children&&n.children>=0?"number"==typeof n.adults&&n.adults>=0?{lang:n.lang,email:n.email,phone:n.phone,datetime:n.datetime,children:n.children,notes:n.notes,adults:n.adults,first_name:n.firstName,last_name:n.lastName}:o("adults",n.adults):o("children",n.children):o("notes",n.notes):o("datetime",n.datetime):o("lastName",n.lastName):o("firstName",n.firstName):o("phone",n.phone):o("email",n.email):o("lang",n.lang)}({email:o,phone:e,datetime:a,children:d,notes:y,adults:D,lang:this.locale,firstName:i,lastName:r})}reset(){this.currentIndex.set(0),Object.values(this.steps).forEach(o=>o.form.reset())}submitForm(){this.submitted.set(!0);const o=this.formatOutput();if(!o)return void this.notifications.error(B.a);let e=setTimeout(()=>this.submitting.set(!0),500);this.reservations.create(o).pipe((0,T.a)(this.destroy$),(0,it.U)(()=>clearTimeout(e)),(0,it.U)(()=>this.submitting.set(!1))).subscribe({next:i=>{i.payment?.hpp_url?window.location.href=i.payment.hpp_url:(this.createdReservation.emit(i),this.notifications.success("La tua prenotazione \xE8 stata creata. A breve ti invieremo un'email di conferma."),this.reset(),i.secret&&this.router.navigate(["/r/",i.secret]))},error:i=>{i instanceof X.gj&&422===i.status?this.manageUnprocessableEntity(i):this.notifications.error(i instanceof X.gj?(0,st.mk)(i):B.a)}})}manageUnprocessableEntity(o){if(!(o instanceof X.gj))return void this.notifications.error(B.a);if(!(422==o.status&&"object"==typeof o.error&&null!==o.error&&"object"==typeof o.error&&Object.keys(o.error.details).length>0))return console.warn("expected response to have status 422 and error { details: { <field>: <error> } } but did not ",o),void this.notifications.error(B.a);const e=o.error.details;console.warn("manageUnprocessableEntity()",{error:e,response:o}),e.people&&(z.y.assignErrorsToFormFromArray(this.people,e.people),delete e.adults,delete e.children,delete e.people),e.datetime&&(z.y.assignErrorsToFormFromArray(this.datetime,e.datetime),delete e.datetime),e.first_name&&(z.y.assignErrorsToFormFromArray(this.contacts.controls.firstName,e.first_name),delete e.first_name),e.last_name&&(z.y.assignErrorsToFormFromArray(this.contacts.controls.lastName,e.last_name),delete e.last_name),e.phone&&(z.y.assignErrorsToFormFromArray(this.contacts.controls.phone,e.phone),delete e.phone),e.email&&(z.y.assignErrorsToFormFromArray(this.contacts.controls.email,e.email),delete e.email),Object.keys(e).length>0&&this.notifications.error((0,st.Yj)(Object.values(e).flat())??B.a);const i=Object.keys(this.steps).find(r=>this.steps[Number(r)].form.invalid);i&&!isNaN(Number(i))&&Number(i)>=0&&this.currentIndex.set(Number(i)),this.cd.detectChanges()}static#t=this.\u0275fac=function(e){return new(e||Y)};static#e=this.\u0275cmp=t.In1({type:Y,selectors:[["app-public-reservation-form"]],outputs:{createdReservation:"createdReservation"},standalone:!0,features:[t.M5G([E.UF]),t.UHJ],decls:18,vars:13,consts:()=>{let o,e,i,r,a,d,f,y,D,L,ut,lt,ct,dt,Kt,Ht;return o="Contatti",e="Riepilogo",i="ospiti",r="Quante persone?",a="Quando?",d="Seleziona il numero di ospiti",f="Continua",y="Nome",D="Cognome",L="Email",ut="Cellulare",lt="Continua",ct="Quanti bambini ci saranno con voi?",dt="Informazioni aggiuntive, se necessario, sono da aggiungere qui!",Kt="Accetto i termini e le condizioni",Ht="Conferma prenotazione",[[1,"justify-around",3,"activeItemIndex"],["tuiStep","",3,"stepState","click"],["tuiStep","",3,"stepState","disabled","click"],o,e,[1,"w-full","h-full",3,"draggable","index","itemsCount","indexChange"],["class","p-3 flex items-center justify-center",4,"tuiItem"],["class","p-3",4,"tuiItem"],i,r,a,[1,"p-3","flex","items-center","justify-center"],[1,"max-w-[500px]"],[3,"maxPeople","formControl"],[1,"text-xl","text-center","mb-2","block"],d,[3,"errors"],[3,"expanded"],["tuiButton","","appearance","custom","type","button",1,"btn-primary",3,"click"],f,[1,"block","mb-3",3,"maxDaysInAdvance","formControl"],["datetimeInput",""],[1,"p-3"],[1,"mx-auto","max-w-[500px]",3,"formGroup","ngSubmit"],[1,"flex","items-center","mb-3"],[1,"grow"],[1,"grow","me-2",3,"tuiAutoFocus","formControlName"],y,["tuiTextfield","","autocomplete","first_name"],[1,"grow","ms-2",3,"formControlName"],D,["tuiTextfield","","autocomplete","last_name"],[1,"mb-3"],L,["tuiTextfield","","autocomplete","email"],[3,"countries","countryIsoCode","formControlName","countryIsoCodeChange"],ut,["tuiButton","","appearance","custom","type","submit",1,"btn-primary"],lt,["formControlName","children",3,"decimal","min","step","max"],ct,["formControlName","notes"],dt,["formControlName","acceptTerms"],Kt,["tuiButton","","appearance","custom","type","submit",1,"btn-primary",3,"showLoader","disabled"],Ht]},template:function(e,i){1&e&&(t.I0R(0,"tui-stepper",0)(1,"button",1),t.qCj("click",function(){return i.setState(0)}),t.yuY(2,Ye,3,1,"ng-container")(3,Ke,2,0),t.C$Y(),t.I0R(4,"button",2),t.qCj("click",function(){return i.setState(1)}),t.yuY(5,He,2,4)(6,Xe,2,0),t.C$Y(),t.I0R(7,"button",2),t.qCj("click",function(){return i.setState(2)}),t.SAx(8),t.aS0(9,3),t.k70(),t.C$Y(),t.I0R(10,"button",2),t.qCj("click",function(){return i.setState(3)}),t.SAx(11),t.aS0(12,4),t.k70(),t.C$Y()(),t.I0R(13,"tui-carousel",5),t.iHE("indexChange",function(a){return t.kNx(i.currentIndex,a)||(i.currentIndex=a),a}),t.yuY(14,We,10,4,"div",6)(15,Je,5,3,"div",6)(16,nn,30,14,"div",7)(17,on,17,7,"div",7),t.C$Y()),2&e&&(t.E7m("activeItemIndex",i.currentIndex()),t.yG2(),t.E7m("stepState",i.getState(0)),t.yG2(),t.C0Y(2,i.people.value&&i.people.valid&&i.currentIndex()>0?2:3),t.yG2(2),t.E7m("stepState",i.getState(1))("disabled",i.maxIndex()<1),t.yG2(),t.C0Y(5,i.datetime.value&&i.datetime.valid&&i.currentIndex()>1?5:6),t.yG2(2),t.E7m("stepState",i.getState(2))("disabled",i.maxIndex()<2),t.yG2(3),t.E7m("stepState",i.getState(3))("disabled",i.maxIndex()<3),t.yG2(3),t.E7m("draggable",!1),t.OKB("index",i.currentIndex),t.E7m("itemsCount",1))},dependencies:[Qt,Tt,Ot,ve,c.sl,c.sz,c.ue,c.u,c.ug,c.uW,c.Wo,pt.uG,pt.iy,pt.Ep,ze.S,we,mt.CQ,mt.Oo,mt.cP,G.b,M.CI,M.Kw,O.y,Bt.m6,Bt.gJ,pe,_e,gt.Y3,gt.wp,gt.kd,Ct.Q7,Ct.mi,Ct.Qj,nt.i,nt.I,ot.kh,ot.st,ke.g],styles:["[_nghost-%COMP%]     tui-stepper{--tui-primary: var(--first-color);--tui-link: var(--first-color);--tui-secondary: var(--second-color);--tui-link-hover: var(--second-color);--tui-secondary-hover: var(--first-color)}"],changeDetection:0})}(0,m.UN)([b.w7],Y.prototype,"getState",null),(0,m.UN)([b.w7],Y.prototype,"showErrorsFor",null);var rn=s(6616),an=s(7424),sn=s(1680);function un(n,o){1&n&&(t.SAx(0),t.aS0(1,4),t.k70())}function ln(n,o){1&n&&(t.SAx(0),t.aS0(1,5),t.k70())}function cn(n,o){if(1&n&&t.wR5(0,"app-public-reservation-confirmation",3),2&n){const e=t.GaO();t.E7m("reservation",e.createdReservation())}}function dn(n,o){1&n&&(t.I0R(0,"p",6),t.SAx(1),t.aS0(2,7),t.k70(),t.C$Y(),t.wR5(3,"app-public-message",8)(4,"app-public-reservation-form")),2&n&&(t.yG2(3),t.E7m("location","new-reservation-form"))}let _n=(()=>{class n{constructor(){this.notifications=(0,t.uUt)(vt.E),this.reservations=(0,t.uUt)(Et.G),this.destroy$=(0,t.uUt)(E.UF),this.localStorage=(0,t.uUt)(rn.s),this.createdReservation=(0,t.OCB)(null),this.resendingConfirmation=(0,t.OCB)(!1)}ngOnInit(){this.reservations.created.pipe((0,T.a)(this.destroy$)).subscribe({next:e=>{this.createdReservation.set(e)}})}static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.In1({type:n,selectors:[["app-public-home-reserve"]],standalone:!0,features:[t.M5G([E.UF]),t.UHJ],decls:7,vars:2,consts:()=>{let e,i,r;return e="Prenotazione confermata!",i="Prenota ora",r="Riserva il tuo posto ad uno dei nostri tavoli e garantisciti la nostra esperienza esclusiva. ",[[1,"mx-4","md:mx-8","lg:mx-12","my-3"],[1,"text-5xl","text-center","text-primary","mb-2"],[1,"bg-primary","w-3/4","mx-auto","h-[1px]","mb-5"],[3,"reservation"],e,i,[1,"text-xl","text-center","mb-3"],r,[1,"block","mb-3","text-center","text-xl",3,"location"]]},template:function(i,r){1&i&&(t.I0R(0,"div",0)(1,"h2",1),t.yuY(2,un,2,0,"ng-container")(3,ln,2,0),t.C$Y(),t.wR5(4,"hr",2),t.yuY(5,cn,1,1,"app-public-reservation-confirmation",3)(6,dn,5,1),t.C$Y()),2&i&&(t.yG2(2),t.C0Y(2,r.createdReservation()?2:3),t.yG2(3),t.C0Y(5,r.createdReservation()?5:6))},dependencies:[M.CI,Y,an.K,g.w,sn.I],styles:["[_nghost-%COMP%]{background-color:var(--sixth-color)}"],changeDetection:0})}return n})()},9852:(k,A,s)=>{s.d(A,{S:()=>c});var t=s(6504),M=s(400);const g=I=>null!=I&&""!=`${I}`;class c extends t.AQ{static formWeeklyFromTo(u,_){return p=>{if(!(p instanceof t.WC))return console.warn("formWeeklyFromTo: param is not a FormGroup",p),null;const v=p,P=v.get(u),E=v.get(_);return P&&E&&P.value instanceof M.uc&&E.value instanceof M.uc&&P.value&&E.value&&P.value.toAbsoluteMilliseconds()>=E.value.toAbsoluteMilliseconds()?{formWeeklyFromTo:!0}:null}}static canBeBlankIf(u,_,p){const v=p?.message||"La form non \xE8 valida.";return P=>{if(!(P instanceof t.WC))throw new Error("canBeBlankIf: thisIsAFormGroup is not a FormGroup");const b=P.get(u);if(!b)throw new Error("canBeBlankIf: control is blank. control name: "+u);return g(b.value)||_()?null:{[`${u}canBeBlankIf`]:v}}}static listOfEmails(u){const _=u.value;if(!_||"string"!=typeof _||!_.length)return null;const p=new RegExp("^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$","i");return _.split(/\,|\s+/gm).map(v=>v.trim()).filter(v=>v.length).forEach(v=>{if(!p.test(v))return{listOfEmails:!0}}),null}static mustBeArray(u){return Array.isArray(u.value)?null:{mustBeArray:!0}}static objectNotEmpty(u){return g(u.value)&&"object"==typeof u.value&&0===Object.keys(u.value).length&&0===Object.values(u.value).filter(p=>g(p)).length?{objectNotEmpty:!0}:null}static arrayMinLength(u){return _=>Array.isArray(_.value)&&_.value.length<u?{arrayMinLength:{requiredLength:u,actualLength:_.value?.length??0}}:null}static validateArray(u){return _=>{if(!Array.isArray(_.value))return null;const p={};for(const v of _.value){const P=u(new t.yM(v));P&&Object.assign(p,P)}return Object.keys(p).length?p:null}}static percentage(u){return g(u.value)&&(isNaN(u.value)||u.value<0||u.value>100)?{percentage:!0}:null}static phoneIT(u){const _=v=>v?null:{phoneIT:!0},p=`${u.value}`.trim().replace(/\s+/gm,"").replace(/^\+39/gm,"");return g(p)?_(!((I=p).length<9||isNaN(Number(I))||I.length>14)):_(!0);var I}static instanceof(u){return _=>!g(_.value)||_.value instanceof u?null:{instanceof:!0}}static#t=this.instanceOf=this.instanceof;static numerical(u){return g(u.value)&&isNaN(u.value)?{numerical:!0}:null}static moreThan(u){return _=>_.value<=u?{moreThan:!0}:null}static in(u){return this.inclusion(u)}static inclusion(u){return _=>g(_.value)&&!u.includes(_.value)?{inclusion:!0}:null}}},964:(k,A,s)=>{s.d(A,{Ez:()=>p,In:()=>b,Q1:()=>N,Q9:()=>E,QX:()=>u,Qx:()=>g,_0:()=>w,ay:()=>m,cr:()=>I,e6:()=>M,yc:()=>c});var t=s(400);const M=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/;function g(l,C){return new Date(`${l.formattedYear}-${l.formattedMonthPart}-${l.formattedDayPart} ${C.toString()}`).toISOString()}function m(l){if(!("string"==typeof l&&l.length>0&&l.match(M)))return console.error("Invalid string provided to isoStringToTuiDay",{isoString:l}),null;const C=new Date(l);return new t.EK(C.getFullYear(),C.getMonth()+1,C.getDate())}function c(l){if("string"==typeof l&&l.length>0&&l.match(/^\d{4}-\d{1,2}-\d{1,2}\s{1}\d{1,2}:\d{1,2}$/)&&(l=l.split(" ")[0]),!("string"==typeof l&&l.length>0&&l.match(/^\d{4}-\d{1,2}-\d{1,2}$/)))return console.error("Invalid string provided to stringToTuiDay. Expected format YYYY-MM-DD, got",{str:l}),null;const{day:C,month:R,year:T}=t.EK.parseRawDateString(l,"YMD");return new t.EK(T,R,C)}function I(l){if("string"==typeof l&&l.length>0&&l.match(/^\d{4}-\d{1,2}-\d{1,2}\s{1}\d{1,2}:\d{1,2}$/)&&(l=l.split(" ")[1]),!("string"==typeof l&&l.length>0&&l.match(/^\d{1,2}:\d{1,2}$/)))return console.error("Invalid string provided to stringToTuiDay. Expected format HH:mm, got",{str:l}),null;const[C,R]=l.split(":").map(T=>Number(T));return"number"==typeof C&&C>=0&&C<=23?"number"==typeof R&&R>=0&&R<60?new t.uc(C,R):(console.error("error while parsing time in stringToTuiTime. minutes are invalid",{minutes:R}),null):(console.error("error while parsing time in stringToTuiTime. hours is invalid ",{hours:C}),null)}function u(l){if(!("string"==typeof l&&l.length>0&&l.match(M)))return console.error("Invalid string provided to isoStringToTuiTime",{isoString:l}),null;const C=new Date(l);return new t.uc(C.getHours(),C.getMinutes())}function p(l){return new Date(`1970-01-01 ${l.toString()}`).toISOString()}function E(l){const C=new Date(`${l}Z`);return`${C.getFullYear()}-${String(C.getMonth()+1).padStart(2,"0")}-${String(C.getDate()).padStart(2,"0")} ${String(C.getHours()).padStart(2,"0")}:${String(C.getMinutes()).padStart(2,"0")}`}function b(l){return function v(l){const C=new Date(`1970-01-01 ${l}`);return`${`${C.getUTCHours()}`.padStart(2,"0")}:${`${C.getUTCMinutes()}`.padStart(2,"0")}`}(l.toString())}function w(l){return new t.EK(l.getFullYear(),l.getMonth(),l.getDate())}function N(l){return new t.uc(l.getHours(),l.getMinutes())}},1588:(k,A,s)=>{s.d(A,{S:()=>M,s:()=>g});var t=s(4496);let M=(()=>{class m{}return m.\u0275fac=function(I){return new(I||m)},m.\u0275dir=t.Sc5({type:m,selectors:[["","tuiItem",""]]}),m})(),g=(()=>{class m{}return m.\u0275fac=function(I){return new(I||m)},m.\u0275mod=t.a4G({type:m}),m.\u0275inj=t.s3X({}),m})()},8976:(k,A,s)=>{s.d(A,{Gy:()=>I,Ko:()=>c});var t=s(4496),M=s(3480),g=s(1368);let m=(()=>{class u{}return u.\u0275fac=function(p){return new(p||u)},u.\u0275cmp=t.In1({type:u,selectors:[["ng-component"]],hostAttrs:[1,"tui-group-styles"],decls:0,vars:0,template:function(p,v){},styles:[".tui-group{position:relative;display:flex;isolation:isolate}.tui-group>*{flex:1 1 0;min-width:0}.tui-group>*:not(:last-child){margin-right:.125rem}.tui-group.tui-group>*:nth-child(n){border-radius:0}.tui-group_collapsed>*{z-index:1}.tui-group_collapsed>*:not(:last-child){margin-right:-1px}.tui-group_collapsed>*._readonly,.tui-group_collapsed>*._disabled,.tui-group_collapsed>*._readonly:hover,.tui-group_collapsed>*._disabled:hover{z-index:0}.tui-group_collapsed>*:hover,.tui-group_collapsed>*._hovered,.tui-group_collapsed>*._pressed{z-index:3}.tui-group_collapsed>*._invalid{z-index:2}.tui-group_collapsed>*._invalid:hover,.tui-group_collapsed>*._invalid._hovered,.tui-group_collapsed>*._invalid._pressed{z-index:4}.tui-group_collapsed>*._hosted_dropdown_focused,.tui-group_collapsed>*._focus-visible,.tui-group_collapsed>*._focused.ng-touched,.tui-group_collapsed>*._focused.ng-untouched{z-index:5}.tui-group_collapsed>*._active,.tui-group_collapsed>*[data-appearance=whiteblock-active]{z-index:6}.tui-group_collapsed>*._focus-visible._focused,.tui-group_collapsed>*._focus-visible._active,.tui-group_collapsed>*._focus-visible[data-appearance=whiteblock-active]{z-index:7}.tui-group_orientation_vertical{display:inline-flex;flex-direction:column}.tui-group_orientation_vertical>*{min-height:auto;flex:0 0 auto}.tui-group_orientation_vertical>*:not(:last-child){margin-right:0;margin-bottom:.125rem}.tui-group_orientation_vertical.tui-group_collapsed>*:not(:last-child){margin-right:0;margin-bottom:-1px}.tui-group_rounded.tui-group_orientation_horizontal>*:first-child{border-top-left-radius:var(--tui-radius-m);border-bottom-left-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_horizontal>*:last-child{border-top-right-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_horizontal.tui-group_radius_large>*:first-child{border-top-left-radius:var(--tui-radius-l);border-bottom-left-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_horizontal.tui-group_radius_large>*:last-child{border-top-right-radius:var(--tui-radius-l);border-bottom-right-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_vertical>*:first-child{border-top-left-radius:var(--tui-radius-m);border-top-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_vertical>*:last-child{border-bottom-left-radius:var(--tui-radius-m);border-bottom-right-radius:var(--tui-radius-m)}.tui-group_rounded.tui-group_orientation_vertical.tui-group_radius_large>*:first-child{border-top-left-radius:var(--tui-radius-l);border-top-right-radius:var(--tui-radius-l)}.tui-group_rounded.tui-group_orientation_vertical.tui-group_radius_large>*:last-child{border-bottom-left-radius:var(--tui-radius-l);border-bottom-right-radius:var(--tui-radius-l)}@media screen and (max-width: 47.9625em){.tui-group_rounded.tui-group_adaptive.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_horizontal>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:last-child:not(:first-child),.tui-group_rounded.tui-group_adaptive.tui-group_orientation_horizontal>*:last-child:not(:first-child){border-radius:var(--tui-radius-m)}}@media screen and (max-width: 47.9625em){.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:first-child:not(:last-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical:not(.tui-group_collapsed)>*:last-child:not(:first-child),.tui-group_rounded.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:last-child:not(:first-child){border-radius:var(--tui-radius-l)}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_orientation_vertical{width:100%}.tui-group_adaptive.tui-group_orientation_vertical>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_vertical>*:not(:last-child){margin-bottom:1rem}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-m) var(--tui-radius-m) 0 0}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-m) var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_vertical.tui-group_collapsed>*:not(:last-child){margin-bottom:-1px}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_orientation_horizontal{flex-direction:column;width:100%}.tui-group_adaptive.tui-group_orientation_horizontal>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_horizontal>*:not(:last-child){margin-right:0;margin-bottom:1rem}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-m) var(--tui-radius-m) 0 0}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-m) var(--tui-radius-m)}.tui-group_adaptive.tui-group_orientation_horizontal.tui-group_collapsed>*:not(:last-child){margin-right:0;margin-bottom:-1px}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-l)}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_vertical.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-l) var(--tui-radius-l)}}@media screen and (max-width: 47.9625em){.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal>*:nth-child(n):not(:only-child){border-radius:var(--tui-radius-l)}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:nth-child(n):not(:only-child){border-radius:0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:first-child:not(:last-child){border-radius:var(--tui-radius-l) var(--tui-radius-l) 0 0}.tui-group_adaptive.tui-group_radius_large.tui-group_orientation_horizontal.tui-group_collapsed>*:last-child:not(:first-child){border-radius:0 0 var(--tui-radius-l) var(--tui-radius-l)}}.tui-group__auto-width-item{min-width:auto;flex:0 0 auto}.tui-group .tui-group__inherit-item{border-radius:inherit}\n"],encapsulation:2,changeDetection:0}),u})(),c=(()=>{class u{constructor(p){this.orientation="horizontal",this.adaptive=!1,this.collapsed=!1,this.rounded=!0,this.size="m",p.addComponent(m)}get orientationHorizontal(){return"horizontal"===this.orientation}get orientationVertical(){return"vertical"===this.orientation}get sizeLarge(){return"l"===this.size}}return u.\u0275fac=function(p){return new(p||u)(t.GI1(M.WS))},u.\u0275dir=t.Sc5({type:u,selectors:[["","tuiGroup","",5,"ng-container"]],hostAttrs:["role","group",1,"tui-group"],hostVars:12,hostBindings:function(p,v){2&p&&t.eAK("tui-group_adaptive",v.adaptive)("tui-group_collapsed",v.collapsed)("tui-group_rounded",v.rounded)("tui-group_orientation_horizontal",v.orientationHorizontal)("tui-group_orientation_vertical",v.orientationVertical)("tui-group_radius_large",v.sizeLarge)},inputs:{orientation:"orientation",adaptive:"adaptive",collapsed:"collapsed",rounded:"rounded",size:"size"}}),u})(),I=(()=>{class u{}return u.\u0275fac=function(p){return new(p||u)},u.\u0275mod=t.a4G({type:u}),u.\u0275inj=t.s3X({imports:[[g.MD]]}),u})()},2500:(k,A,s)=>{s.d(A,{i:()=>c,y:()=>I});var t=s(4496),M=s(3656),g=s(3840),m=s(3724);let c=(()=>{class u{constructor(p){this.svgOptions=p,this.staticPath=this.svgOptions.path("tuiIcon").replace("tuiIcon.svg#tuiIcon","").replace(`tuiIcon.svg${g._m}#tuiIcon`,"")}transform(p){if(!p)return null;switch(p){case m.q.BL:case m.q.BQ:case m.q.CW:case m.q.GF:case m.q.GP:case m.q.MF:case m.q.MQ:case m.q.NC:case m.q.RE:case m.q.YT:return`${this.staticPath}${m.q.FR}.png`;case m.q.SX:return`${this.staticPath}${m.q.NL}.png`;default:return`${this.staticPath}${p}.png`}}}return u.\u0275fac=function(p){return new(p||u)(t.GI1(M.iY,16))},u.\u0275pipe=t.UTH({name:"tuiFlag",type:u,pure:!0}),u})(),I=(()=>{class u{}return u.\u0275fac=function(p){return new(p||u)},u.\u0275mod=t.a4G({type:u}),u.\u0275inj=t.s3X({}),u})()},7176:(k,A,s)=>{s.d(A,{S2:()=>l,ie:()=>N,qE:()=>R,qu:()=>E});var t=s(4496),M=s(3656),g=s(5608),m=s(466),c=s(8048),I=s(1040),u=s(2528),_=s(1368);function p(h,O){1&h&&t.wR5(0,"tui-svg",2),2&h&&t.E7m("src",O.polymorpheusOutlet)}function v(h,O){1&h&&t.C_f(0)}const E=(0,u.AL)({iconSmall:"tuiIconChevronDown",iconLarge:"tuiIconChevronDownLarge"}),N=new I.WO((()=>{class h{constructor(S,F,_t){this.dropdown=S,this.textfieldSize=F,this.options=_t}get rotated(){return this.dropdown.open}get arrowIcon(){return(0,g.yi)(this.textfieldSize.size)?this.options.iconLarge:this.options.iconSmall}}return h.\u0275fac=function(S){return new(S||h)(t.GI1(m.Qw),t.GI1(c.$K),t.GI1(E))},h.\u0275cmp=t.In1({type:h,selectors:[["tui-arrow"]],hostVars:2,hostBindings:function(S,F){2&S&&t.eAK("_rotated",F.rotated)},decls:3,vars:4,consts:[[3,"src",4,"polymorpheusOutlet"],[4,"ngIf"],[3,"src"]],template:function(S,F){1&S&&(t.yuY(0,p,1,1,"tui-svg",0)(1,v,1,0,"ng-container",1),t.wVc(2,"async")),2&S&&(t.E7m("polymorpheusOutlet",F.arrowIcon),t.yG2(),t.E7m("ngIf",t.kDX(2,2,F.dropdown.openChange)))},dependencies:[M.Wu,I.Af,_.u_,_.a],styles:["[_nghost-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;display:block;cursor:pointer;pointer-events:none}._rotated[_nghost-%COMP%]{transform:rotate(180deg)}"],changeDetection:0}),h})());let l=(()=>{class h{}return h.\u0275fac=function(S){return new(S||h)},h.\u0275mod=t.a4G({type:h}),h.\u0275inj=t.s3X({imports:[[_.MD,M.Yt,I.Ux]]}),h})();const R=(0,u.AL)({interactive:N,disabled:N})},812:(k,A,s)=>{s.d(A,{m2:()=>E,mU:()=>_,qS:()=>m,w3:()=>b}),s(4392);var M=s(2528);s(3840);const m={DMY:"dd/mm/yyyy",MDY:"mm/dd/yyyy",YMD:"yyyy/mm/dd"},_=/\([#]+\)|[#\- ]/g,E=(N,l,C,R)=>{if(!l?.isSingleDay||!C)return N;const T=(0,M.Kw)(Object.entries(C).map(([O,S])=>[O,-S])),h=l.from.append(R?T:C).append({day:R?1:-1});return R?h.dayBefore(N)?N:h:N&&h.dayAfter(N)?N:h},b={HH:23,MM:59,SS:59,MS:999}}}]);