"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[9004],{9004:(C,P,n)=>{n.r(P),n.d(P,{UpdateDishPricesComponent:()=>s});var e=n(4496),l=n(6504),r=n(8676),I=n(1128),o=n(3480),m=n(8212),h=n(8976),t=n(8048),i=n(9880),_=n(1512),D=n(5188),A=n(3580),d=n(5460),S=n(9888),R=n(3616),v=n(8824),E=n(9956),g=n(1236);let s=(()=>{class a{constructor(){this.destroy$=(0,e.uUt)(o.UF),this.service=(0,e.uUt)(r.k),this.notifications=(0,e.uUt)(I.E),this.submitting=(0,e.OCB)(!1),this.loading=(0,e.S6b)(()=>this.submitting()),this.form=new l.WC({amount:new l.Ku(null,[]),percent:new l.Ku(null,[l.AQ.min(-100)]),isAbsolute:new l.Ku(!1)})}submit(){const{amount:u,percent:c}=this.form.value;if(this.form.invalid||(null==u||0==u)&&(null==c||0==c))return void this.notifications.error();let p=null;"number"==typeof u&&0!=u&&(p={amount:u}),"number"==typeof c&&0!=c&&(p={percent:c}),null!=p?(this.submitting.set(!0),this.service.updatePrices(p).pipe((0,R.a)(this.destroy$),(0,v.U)(()=>this.submitting.set(!1))).subscribe(()=>{this.notifications.success("Prezzi aggiornati"),this.form.reset()})):this.notifications.error()}static#e=this.\u0275fac=function(c){return new(c||a)};static#t=this.\u0275cmp=e.In1({type:a,selectors:[["app-update-dish-prices"]],standalone:!0,features:[e.M5G([o.UF]),e.UHJ],decls:33,vars:12,consts:()=>{let u,c,p,f,O,U,$;return u="Modifica massiva prezzi piatti",c="Indietro",p="Percentuale",f="Valore assoluto",O="Valore assoluto",U="Percentuale",$="Conferma",[[1,"block","mb-3"],u,[1,"block","mb-2"],["tuiLink","","routerLink",".."],c,[3,"formGroup","ngSubmit"],[1,"mb-3"],["tuiGroup","",1,"group",3,"collapsed"],["formControlName","isAbsolute","size","l",3,"item"],p,f,[3,"expanded"],["formControlName","amount",3,"tuiTextfieldPostfix"],O,[3,"errors"],["formControlName","percent",3,"tuiTextfieldPostfix"],U,[1,"flex","items-center"],["tuiButton","","appearance","primary","type","submit",3,"showLoader"],$]},template:function(c,p){if(1&c&&(e.I0R(0,"h1",0),e.SAx(1),e.aS0(2,1),e.k70(),e.C$Y(),e.I0R(3,"div",2)(4,"a",3),e.SAx(5),e.aS0(6,4),e.k70(),e.C$Y()(),e.I0R(7,"form",5),e.qCj("ngSubmit",function(){return p.submit()}),e.I0R(8,"div",6)(9,"div",7)(10,"tui-radio-block",8),e.SAx(11),e.aS0(12,9),e.k70(),e.C$Y(),e.I0R(13,"tui-radio-block",8),e.SAx(14),e.aS0(15,10),e.k70(),e.C$Y()()(),e.I0R(16,"tui-expand",11)(17,"div",6)(18,"tui-input-number",12),e.SAx(19),e.aS0(20,13),e.k70(),e.C$Y(),e.wR5(21,"app-errors",14),e.C$Y()(),e.I0R(22,"tui-expand",11)(23,"div",6)(24,"tui-input-number",15),e.SAx(25),e.aS0(26,16),e.k70(),e.C$Y(),e.wR5(27,"app-errors",14),e.C$Y()(),e.wR5(28,"app-errors",14),e.I0R(29,"div",17)(30,"button",18),e.SAx(31),e.aS0(32,19),e.k70(),e.C$Y()()()),2&c){let f,O;e.yG2(7),e.E7m("formGroup",p.form),e.yG2(2),e.E7m("collapsed",!0),e.yG2(),e.E7m("item",!1),e.yG2(3),e.E7m("item",!0),e.yG2(3),e.E7m("expanded",p.form.controls.isAbsolute.value),e.yG2(2),e.E7m("tuiTextfieldPostfix","\u20ac"),e.yG2(3),e.E7m("errors",null==(f=p.form.get("amount"))?null:f.errors),e.yG2(),e.E7m("expanded",!p.form.controls.isAbsolute.value),e.yG2(2),e.E7m("tuiTextfieldPostfix","%"),e.yG2(3),e.E7m("errors",null==(O=p.form.get("percent"))?null:O.errors),e.yG2(),e.E7m("errors",p.form.errors),e.yG2(2),e.E7m("showLoader",p.loading())}},dependencies:[l.sl,l.sz,l.ue,l.u,l.uW,l.Wo,m.CI,m.Kw,h.Gy,h.Ko,D.my,A.W,A.I,d.Ud,t.aS,t.We,E.g,i.kh,i.st,S.Q7,S.mi,S.Qj,_.w,_.C,g.qQ,g.ER],changeDetection:0})}return a})()},4824:(C,P,n)=>{n.d(P,{o:()=>r});var e=n(8400),l=n(2264);class r extends e.w{constructor(o){super(o),this.name=o.name,this.description=o.description,this.status=o.status,this.other=o.other,this.translations={...o.translations},o.image&&(this.image=new l.W(o.image))}}},5891:(C,P,n)=>{n.d(P,{S:()=>m});var e=n(8400),l=n(2264),r=n(355),I=n(4824),o=n(532);class m extends e.w{constructor(t){super(t),this.name=t.name,this.description=t.description,this.status=t.status,this.price=t.price,this.translations=t.translations,this.images=t.images?t.images.map(i=>new l.W(i)):[],this.suggestions=t.suggestions?t.suggestions.map(i=>new m(i)):[],this.tags=t.tags?t.tags.map(i=>new r.E(i)):[],this.allergens=t.allergens?t.allergens.map(i=>new I.o(i)):[],this.ingredients=t.ingredients?t.ingredients.map(i=>new o.e(i)):[]}}},532:(C,P,n)=>{n.d(P,{e:()=>r});var e=n(8400),l=n(2264);class r extends e.w{constructor(o){super(o),this.name=o.name,this.description=o.description,this.status=o.status,this.other=o.other,this.translations={...o.translations},o.image&&(this.image=new l.W(o.image))}}},355:(C,P,n)=>{n.d(P,{E:()=>r});var e=n(8400),l=n(2264);class r extends e.w{constructor(o){super(o),this.name=o.name,this.description=o.description,this.status=o.status,this.other=o.other,this.translations={...o.translations},this.color=o.color,o.image&&(this.image=new l.W(o.image))}}},8676:(C,P,n)=>{n.d(P,{k:()=>o});var e=n(6012),l=n(5891),r=n(4704),I=n(4496);let o=(()=>{class m extends e.s{constructor(){super(l.S,"admin/menu/dishes")}updatePrices(t){return(null==t.filters||null==t.filters)&&delete t.filters,this.patch("update_prices",t)}copy(t,i){return this.post(`${t}/copy`,i).pipe((0,r.k)(_=>this.mapItem(_)))}move(t,i){return this.patch(`${t}/move`,i).pipe((0,r.k)(_=>this.mapItem(_)))}moveIngredient(t,i,_){return this.patch(`${t}/ingredients/${i}/move`,{to_index:_}).pipe((0,r.k)(D=>this.mapItem(D)))}moveTag(t,i,_){return this.patch(`${t}/tags/${i}/move`,{to_index:_}).pipe((0,r.k)(D=>this.mapItem(D)))}moveAllergen(t,i,_){return this.patch(`${t}/allergens/${i}/move`,{to_index:_}).pipe((0,r.k)(D=>this.mapItem(D)))}updateStatus(t,i){return this.patch(`${t}/status/${i}`,{}).pipe((0,r.k)(_=>this.mapItem(_)))}addIngredient(t,i){return this.post(`${t}/ingredients/${i}`,{}).pipe((0,r.k)(_=>this.mapItem(_)))}removeIngredient(t,i){return this.delete(`${t}/ingredients/${i}`).pipe((0,r.k)(_=>this.mapItem(_)))}addTag(t,i){return this.post(`${t}/tags/${i}`,{}).pipe((0,r.k)(_=>this.mapItem(_)))}removeTag(t,i){return this.delete(`${t}/tags/${i}`).pipe((0,r.k)(_=>this.mapItem(_)))}addAllergen(t,i){return this.post(`${t}/allergens/${i}`,{}).pipe((0,r.k)(_=>this.mapItem(_)))}removeAllergen(t,i){return this.delete(`${t}/allergens/${i}`).pipe((0,r.k)(_=>this.mapItem(_)))}references(t){return this.get(`${t}/references`).pipe((0,r.k)(i=>i))}addSuggestion(t,i){return this.post(`${t}/suggestions/${i}`,{}).pipe((0,r.k)(_=>this.mapItem(_)))}removeSuggestion(t,i){return this.delete(`${t}/suggestions/${i}`).pipe((0,r.k)(_=>this.mapItem(_)))}static#e=this.\u0275fac=function(i){return new(i||m)};static#t=this.\u0275prov=I.wxM({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},9880:(C,P,n)=>{n.d(P,{kP:()=>A,kh:()=>v,st:()=>R});var e=n(4496),l=n(3480),r=n(4392),I=n(3120),o=n(3616),m=n(7692),h=n(1368);const t=["wrapper"];function i(E,g){if(1&E&&(e.I0R(0,"tui-loader",4),e.C_f(1,5),e.C$Y()),2&E){const s=e.GaO(2);e.E7m("overlay",!0)("showLoader",s.loading),e.yG2(),e.E7m("ngTemplateOutlet",s.content)}}function _(E,g){if(1&E&&(e.SAx(0),e._Xx(1),e.yuY(2,i,2,3,"tui-loader",3),e.k70()),2&E){const s=e.GaO();e.yG2(2),e.E7m("ngIf",s.async)("ngIfElse",s.content)}}const D=["*"];let A=(()=>{class E{}return E.\u0275fac=function(s){return new(s||E)},E.\u0275dir=e.Sc5({type:E,selectors:[["","tuiExpandContent",""]]}),E})();let R=(()=>{class E{constructor(s,a){this.cdr=s,this.destroy$=a,this.state=0,this.async=!1,this.content=null,this.expanded=null}set expandedSetter(s){if(null!==this.expanded)return 0!==this.state?(this.expanded=s,void(this.state=3)):(this.expanded=s,void this.retrigger(this.async&&s?1:3));this.expanded=s}get overflow(){return 0!==this.state}get loading(){return!!this.expanded&&this.async&&1===this.state}get height(){const{expanded:s,state:a,contentWrapper:M}=this;return s&&2===a||!s&&3===a?0:M&&(!s&&2===a||s&&3===a)?M.nativeElement.offsetHeight:M&&s&&1===a?Math.max(M.nativeElement.offsetHeight,48):null}get contentVisible(){return this.expanded||0!==this.state}onTransitionEnd({propertyName:s}){"opacity"===s&&3===this.state&&(this.state=0)}onExpandLoaded(s){s.stopPropagation(),1===this.state&&this.retrigger(3)}retrigger(s){this.state=2,(0,I.k)(0).pipe((0,o.a)(this.destroy$)).subscribe(()=>{2===this.state&&(this.state=s,this.cdr.markForCheck())})}}return E.\u0275fac=function(s){return new(s||E)(e.GI1(e.kD9),e.GI1(l.UF,2))},E.\u0275cmp=e.In1({type:E,selectors:[["tui-expand"]],contentQueries:function(s,a,M){if(1&s&&e.szK(M,A,5,e.Yw2),2&s){let u;e.wto(u=e.Gqi())&&(a.content=u.first)}},viewQuery:function(s,a){if(1&s&&e.CC$(t,5),2&s){let M;e.wto(M=e.Gqi())&&(a.contentWrapper=M.first)}},hostVars:9,hostBindings:function(s,a){1&s&&e.qCj("transitionend.self",function(u){return a.onTransitionEnd(u)})("tui-expand-loaded",function(u){return a.onExpandLoaded(u)}),2&s&&(e.e48("aria-expanded",a.expanded),e.m4B("height",a.height,"px"),e.eAK("_expanded",a.expanded)("_overflow",a.overflow)("_loading",a.loading))},inputs:{async:"async",expandedSetter:[e.Wk5.None,"expanded","expandedSetter"]},features:[e.M5G([l.UF])],ngContentSelectors:D,decls:3,vars:3,consts:[[1,"t-wrapper"],["wrapper",""],[4,"ngIf"],["size","l",3,"overlay","showLoader",4,"ngIf","ngIfElse"],["size","l",3,"overlay","showLoader"],[3,"ngTemplateOutlet"]],template:function(s,a){1&s&&(e.kPM(),e.I0R(0,"div",0,1),e.yuY(2,_,3,2,"ng-container",2),e.C$Y()),2&s&&(e.E7m("@tuiParentAnimation",void 0)("@.disabled",a.overflow),e.yG2(2),e.E7m("ngIf",a.contentVisible))},dependencies:[m.Cb,h.u_,h.XV],styles:['[_nghost-%COMP%]{transition-property:opacity,height,visibility;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;display:block;opacity:0;transition-delay:1ms}._overflow[_nghost-%COMP%]{overflow:hidden}._expanded[_nghost-%COMP%]{opacity:1;transform:translate(0)}._loading[_nghost-%COMP%]{opacity:.99}.t-wrapper[_ngcontent-%COMP%]:before, .t-wrapper[_ngcontent-%COMP%]:after{content:"";display:table}'],data:{animation:[r.cI]},changeDetection:0}),E})(),v=(()=>{class E{}return E.\u0275fac=function(s){return new(s||E)},E.\u0275mod=e.a4G({type:E}),E.\u0275inj=e.s3X({imports:[[h.MD,m.Sk]]}),E})()}}]);