"use strict";(self.webpackChunklpda2=self.webpackChunklpda2||[]).push([[2580],{8620:(k,x,n)=>{n.r(x),n.d(x,{EditPasswordModule:()=>b});var r=n(2992),_=n(7552),e=n(4496),c=n(6504),i=n(1560),w=n(4616),R=n(1128),A=n(5e3),O=n(7692),m=n(8048),I=n(8212),S=n(7568),h=n(7936);function a(s,l){1&s&&(e.I0R(0,"p",18),e.OEk(1,"La password inserita non \xe8 corretta!"),e.C$Y())}function p(s,l){1&s&&(e.I0R(0,"p",18),e.aS0(1,19),e.C$Y())}function f(s,l){1&s&&(e.I0R(0,"p",18),e.OEk(1,"Il tuo account \xe8 stato bloccato, quindi non \xe8 possibile modificare la password!"),e.C$Y())}function L(s,l){1&s&&e.yuY(0,a,2,0,"p",17)(1,p,2,0,"p",17)(2,f,2,0,"p",17),2&s&&(e.C0Y(0,l.invalid?0:-1),e.yG2(),e.C0Y(1,l.required?1:-1),e.yG2(),e.C0Y(2,l.userBlocked?2:-1))}function F(s,l){1&s&&(e.I0R(0,"p",20),e.aS0(1,21),e.C$Y())}function y(s,l){1&s&&(e.I0R(0,"p",18),e.aS0(1,22),e.C$Y())}function W(s,l){if(1&s&&(e.I0R(0,"p",18),e.OEk(1),e.C$Y()),2&s){const E=e.GaO();e.yG2(),e.cNF(E.tooShort)}}function $(s,l){1&s&&e.yuY(0,y,2,0,"p",17)(1,W,2,1,"p",17),2&s&&(e.C0Y(0,l.required?0:-1),e.yG2(),e.C0Y(1,l.tooShort?1:-1))}function G(s,l){1&s&&(e.I0R(0,"p",20),e.aS0(1,23),e.C$Y())}function U(s,l){1&s&&(e.I0R(0,"mat-icon"),e.OEk(1,"vpn_key"),e.C$Y())}let N=(()=>{class s{constructor(){this.submitting=!1,this.current_password=new c.Ku(null,[c.AQ.required]),this.new_password=new c.Ku(null,[c.AQ.required]),this.form=new c.WC({current_password:this.current_password,new_password:this.new_password}),this.profile=(0,e.uUt)(w.x),this.router=(0,e.uUt)(r.E5),this.activeRoute=(0,e.uUt)(r.gV),this.notification=(0,e.uUt)(R.E)}submit(){this.form.invalid||(this.submitting=!0,this.profile.changePassword(this.current_password.value,this.new_password.value).subscribe({next:()=>{this.submitting=!1,this.router.navigate([".."],{relativeTo:this.activeRoute}),this.notification.fireSnackBar("Password aggiornata con successo!")},error:E=>{this.submitting=!1,422===E.status&&E.error.errors.forEach(d=>{const v=`${d.field}:${d.code}`;switch(v){case"current_password:missing":case"current_password:blank":this.current_password.setErrors({required:!0});break;case"current_password:invalid":this.current_password.setErrors({invalid:d.message});break;case"new_password:missing":case"new_password:blank":this.new_password.setErrors({required:!0});break;case"new_password:too_short":this.new_password.setErrors({tooShort:d.message});break;case"user:blocked":this.current_password.setErrors({userBlocked:d.message});break;default:console.error(`Unhandled error: ${v}: ${d.message}`)}})}}))}static#e=this.\u0275fac=function(D){return new(D||s)};static#t=this.\u0275cmp=e.In1({type:s,selectors:[["app-edit-password"]],standalone:!0,features:[e.UHJ],decls:32,vars:9,consts:()=>{let E,D,d,v,g,P,C;return E="Modifica password",D="\n          Inserisci la tua password corrente e scegli una nuova password, quindi\n          premi \n          " + "\ufffd#8\ufffd" + "\n          Avanti\n          " + "\ufffd/#8\ufffd" + "\n           per proseguire\n        ",d="Avanti",v="La password non pu\xF2 essere vuota!",g="Inserisci la tua password attuale",P="La password non pu\xF2 essere vuota!",C="Scegli una nuova password per il tuo account",[[1,"text-2xl","font-bold","uppercase","|","flex","items-center","justify-center","|","border-b-2","border-b-slate-100","|","pb-4","mb-4"],["inline","",1,"me-3"],E,[3,"showLoader","overlay"],[1,"mb-2"],D,[3,"formGroup","ngSubmit"],[1,"mb-3"],["tuiHintContent","","formControlName","current_password","data-cy","password-field","tuiAutoFocus","",3,"tuiTextfieldIconLeft"],["password",""],["tuiTextfield","","type","password","autocomplete","password"],["tuiHintContent","","formControlName","new_password","data-cy","password-field",3,"tuiTextfieldIconLeft"],[1,"flex","flex-row","justify-between","items-center"],["tuiButton","","appearance","secondary-destructive","routerLink",".."],["tuiButton","","type","submit","data-cy","submit-btn",3,"showLoader","disabled"],d,["keyIcon",""],["class","form-text error"],[1,"form-text","error"],v,[1,"form-text"],g,P,C]},template:function(D,d){if(1&D&&(e.I0R(0,"h1",0)(1,"mat-icon",1),e.OEk(2,"lock"),e.C$Y(),e.SAx(3),e.aS0(4,2),e.k70(),e.C$Y(),e.I0R(5,"tui-loader",3)(6,"p",4),e.Mff(7,5),e.wR5(8,"strong"),e.U7j(),e.C$Y(),e.I0R(9,"form",6),e.qCj("ngSubmit",function(){return d.submit()}),e.I0R(10,"div")(11,"div",7)(12,"tui-input-password",8,9),e.OEk(14," Password attuale "),e.wR5(15,"input",10),e.C$Y(),e.yuY(16,L,3,3)(17,F,2,0),e.C$Y(),e.I0R(18,"div",7)(19,"tui-input-password",11,9),e.OEk(21," Scegli una nuova password "),e.wR5(22,"input",10),e.C$Y(),e.yuY(23,$,2,2)(24,G,2,0),e.C$Y(),e.I0R(25,"div",12)(26,"a",13),e.OEk(27,"Annulla"),e.C$Y(),e.I0R(28,"button",14),e.aS0(29,15),e.C$Y()()()()(),e.yuY(30,U,2,0,"ng-template",null,16,e.gJz)),2&D){const v=e.Gew(31);let g,P,C;e.yG2(5),e.E7m("showLoader",d.submitting)("overlay",!0),e.yG2(4),e.E7m("formGroup",d.form),e.yG2(3),e.E7m("tuiTextfieldIconLeft",v),e.yG2(4),e.C0Y(16,(g=(null==(P=d.form.get("current_password"))?null:P.touched)&&(null==(P=d.form.get("current_password"))?null:P.errors))?16:17,g),e.yG2(3),e.E7m("tuiTextfieldIconLeft",v),e.yG2(4),e.C0Y(23,(g=(null==(C=d.form.get("new_password"))?null:C.touched)&&(null==(C=d.form.get("new_password"))?null:C.errors))?23:24,g),e.yG2(5),e.E7m("showLoader",d.submitting)("disabled",d.form.invalid)}},dependencies:[r.qQ,r.ER,c.sl,c.sz,c.ue,c.u,c.uW,c.Wo,O.Sk,O.Cb,S.eW,S.Mt,S.Ki,h.b,m.aS,m.Ep,A.m6,A.gJ,I.CI,I.Kw,i.oB,i.qL]})}return s})(),b=(()=>{class s{static#e=this.\u0275fac=function(D){return new(D||s)};static#t=this.\u0275mod=e.a4G({type:s});static#i=this.\u0275inj=e.s3X({imports:[r.qQ.forChild([(0,_.VV)(N,{path:"",closeable:!0,dismissible:!1,size:"s"})])]})}return s})()},3905:(k,x,n)=>{n.d(x,{MZ:()=>h,ae:()=>I,uU:()=>S});var r=n(4496),_=n(4392),e=n(900),c=n(8987),i=n(3252),w=n(3412),R=n(4704),A=n(6684),O=n(4e3);function m({currentTarget:a,relatedTarget:p}){return!(0,c.CK)(p)||!(0,c.CK)(a)||!a.contains(p)}let I=(()=>{class a extends i._{constructor(f,L){super(F=>this.stream$.subscribe(F)),this.el=f,this.zone=L,this.stream$=(0,w.U)((0,e.Ax)(this.el.nativeElement,"mouseenter").pipe((0,R.k)(_.Ml)),(0,e.Ax)(this.el.nativeElement,"mouseleave").pipe((0,R.k)(_.so)),(0,e.Ax)(this.el.nativeElement,"mouseout").pipe((0,A.I)(m),(0,R.k)(_.so))).pipe((0,O.a)(),(0,e.OA)(this.zone))}}return a.\u0275fac=function(f){return new(f||a)(r.CoB(r.GMv),r.CoB(r.WW2))},a.\u0275prov=r.wxM({token:a,factory:a.\u0275fac}),a})(),S=(()=>{class a{constructor(f){this.tuiHoveredChange=f}}return a.\u0275fac=function(f){return new(f||a)(r.GI1(I))},a.\u0275dir=r.Sc5({type:a,selectors:[["","tuiHoveredChange",""]],outputs:{tuiHoveredChange:"tuiHoveredChange"},features:[r.M5G([I])]}),a})(),h=(()=>{class a{}return a.\u0275fac=function(f){return new(f||a)},a.\u0275mod=r.a4G({type:a}),a.\u0275inj=r.s3X({}),a})()},8048:(k,x,n)=>{n.d(x,{$K:()=>g,CU:()=>f,E9:()=>l,Ep:()=>b,Gk:()=>$,Id:()=>v,W:()=>M,We:()=>D,a4:()=>y,aS:()=>C,cn:()=>z,es:()=>L,me:()=>S,rD:()=>P,uU:()=>U});var r=n(2528),_=n(1800),e=n(3480),c=n(900),i=n(4496),w=n(5944),R=n(3412),A=n(792),O=n(3616);class m{constructor(o,T,u,B,X,Y,K,H,j,Q,V,J,Z){this.change$=o,this.options=T,this.legacyAppearance=u,this.appearanceDirective=B,this.cleanerDirective=X,this.customContentDirective=Y,this.iconDirective=K,this.iconLeftDirective=H,this.labelOutsideDirective=j,this.sizeDirective=Q,this.prefixDirective=V,this.postfixDirective=J,this.fillerDirective=Z}get appearance(){return this.appearanceDirective.appearance||this.legacyAppearance}get cleaner(){return this.cleanerDirective.cleaner}get customContent(){return this.customContentDirective.customContent||""}get icon(){return this.iconDirective.icon}get iconLeft(){return this.iconLeftDirective.iconLeft}get labelOutside(){return this.labelOutsideDirective.labelOutside}get size(){return this.sizeDirective.size}get prefix(){return this.prefixDirective.prefix}get postfix(){return this.postfixDirective.postfix}get filler(){return this.fillerDirective.filler}}const S=(0,r.AL)({iconCleaner:"tuiIconClose",hintOnDisabled:!1}),a=(0,r.W0)(()=>new p);let p=(()=>{class t extends _.QD{constructor(){super(...arguments),this.appearance=""}}return t.\u0275fac=(()=>{let o;return function(u){return(o||(o=i.otF(t)))(u||t)}})(),t.\u0275dir=i.Sc5({type:t,selectors:[["","tuiTextfieldAppearance",""]],inputs:{appearance:[i.Wk5.None,"tuiTextfieldAppearance","appearance"]},features:[i.M5G([{provide:a,useExisting:(0,i.wd)(()=>t)}]),i.eg9]}),t})();const f=(0,r.W0)(()=>new L);let L=(()=>{class t extends _.QD{constructor(){super(...arguments),this.cleaner=!1}}return t.\u0275fac=(()=>{let o;return function(u){return(o||(o=i.otF(t)))(u||t)}})(),t.\u0275dir=i.Sc5({type:t,selectors:[["","tuiTextfieldCleaner",""]],inputs:{cleaner:[i.Wk5.None,"tuiTextfieldCleaner","cleaner"]},features:[i.M5G([{provide:f,useExisting:(0,i.wd)(()=>t)}]),i.eg9]}),t})();const F=(0,r.W0)(()=>new y);let y=(()=>{class t extends _.QD{}return t.\u0275fac=(()=>{let o;return function(u){return(o||(o=i.otF(t)))(u||t)}})(),t.\u0275dir=i.Sc5({type:t,selectors:[["","tuiTextfieldCustomContent",""]],inputs:{customContent:[i.Wk5.None,"tuiTextfieldCustomContent","customContent"]},features:[i.M5G([{provide:F,useExisting:(0,i.wd)(()=>t)}]),i.eg9]}),t})();const W=(0,r.W0)(()=>new $);let $=(()=>{class t extends _.QD{constructor(){super(...arguments),this.filler=""}}return t.\u0275fac=(()=>{let o;return function(u){return(o||(o=i.otF(t)))(u||t)}})(),t.\u0275dir=i.Sc5({type:t,selectors:[["","tuiTextfieldFiller",""]],inputs:{filler:[i.Wk5.None,"tuiTextfieldFiller","filler"]},features:[i.M5G([{provide:W,useExisting:(0,i.wd)(()=>t)}]),i.eg9]}),t})();const G=(0,r.W0)(()=>new U);let U=(()=>{class t extends _.QD{}return t.\u0275fac=(()=>{let o;return function(u){return(o||(o=i.otF(t)))(u||t)}})(),t.\u0275dir=i.Sc5({type:t,selectors:[["","tuiTextfieldIcon",""]],inputs:{icon:[i.Wk5.None,"tuiTextfieldIcon","icon"]},features:[i.M5G([{provide:G,useExisting:(0,i.wd)(()=>t)}]),i.eg9]}),t})();const N=(0,r.W0)(()=>new b);let b=(()=>{class t extends _.QD{}return t.\u0275fac=(()=>{let o;return function(u){return(o||(o=i.otF(t)))(u||t)}})(),t.\u0275dir=i.Sc5({type:t,selectors:[["","tuiTextfieldIconLeft",""]],inputs:{iconLeft:[i.Wk5.None,"tuiTextfieldIconLeft","iconLeft"]},features:[i.M5G([{provide:N,useExisting:(0,i.wd)(()=>t)}]),i.eg9]}),t})();const s=(0,r.W0)(()=>new l);let l=(()=>{class t extends _.QD{constructor(){super(...arguments),this.labelOutside=!1}}return t.\u0275fac=(()=>{let o;return function(u){return(o||(o=i.otF(t)))(u||t)}})(),t.\u0275dir=i.Sc5({type:t,selectors:[["","tuiTextfieldLabelOutside",""]],inputs:{labelOutside:[i.Wk5.None,"tuiTextfieldLabelOutside","labelOutside"]},features:[i.M5G([{provide:s,useExisting:(0,i.wd)(()=>t)}]),i.eg9]}),t})();const E=(0,r.W0)(()=>new D);let D=(()=>{class t extends _.QD{constructor(){super(...arguments),this.postfix=""}}return t.\u0275fac=(()=>{let o;return function(u){return(o||(o=i.otF(t)))(u||t)}})(),t.\u0275dir=i.Sc5({type:t,selectors:[["","tuiTextfieldPostfix",""]],inputs:{postfix:[i.Wk5.None,"tuiTextfieldPostfix","postfix"]},features:[i.M5G([{provide:E,useExisting:(0,i.wd)(()=>t)}]),i.eg9]}),t})();const d=(0,r.W0)(()=>new v);let v=(()=>{class t extends _.QD{constructor(){super(...arguments),this.prefix=""}}return t.\u0275fac=(()=>{let o;return function(u){return(o||(o=i.otF(t)))(u||t)}})(),t.\u0275dir=i.Sc5({type:t,selectors:[["","tuiTextfieldPrefix",""]],inputs:{prefix:[i.Wk5.None,"tuiTextfieldPrefix","prefix"]},features:[i.M5G([{provide:d,useExisting:(0,i.wd)(()=>t)}]),i.eg9]}),t})();const g=(0,r.W0)(()=>new P);let P=(()=>{class t extends _.QD{constructor(){super(...arguments),this.size="l"}}return t.\u0275fac=(()=>{let o;return function(u){return(o||(o=i.otF(t)))(u||t)}})(),t.\u0275dir=i.Sc5({type:t,selectors:[["","tuiTextfieldSize",""]],inputs:{size:[i.Wk5.None,"tuiTextfieldSize","size"]},features:[i.M5G([{provide:g,useExisting:(0,i.wd)(()=>t)}]),i.eg9]}),t})(),C=(()=>{class t{}return t.\u0275fac=function(T){return new(T||t)},t.\u0275mod=i.a4G({type:t}),t.\u0275inj=i.s3X({}),t})();const M=new i.UbH("[TUI_TEXTFIELD_WATCHED_CONTROLLER]"),z=[e.UF,{provide:M,deps:[i.kD9,e.UF,S,w.k9,a,f,F,G,N,s,g,d,E,W],useFactory:(t,o,T,u,...B)=>{const X=(0,R.U)(...B.map(({change$:Y})=>Y||A.C)).pipe((0,c.iQ)(t),(0,O.a)(o));return X.subscribe(),new m(X,T,u,...B)}}]}}]);